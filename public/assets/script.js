(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zy={exports:{}},nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aL;function dH(){if(aL)return nc;aL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return nc.Fragment=e,nc.jsx=n,nc.jsxs=n,nc}var sL;function hH(){return sL||(sL=1,zy.exports=dH()),zy.exports}var S=hH(),Ky={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oL;function mH(){if(oL)return Fe;oL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(B){return B===null||typeof B!="object"?null:(B=h&&B[h]||B["@@iterator"],typeof B=="function"?B:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function b(B,V,H){this.props=B,this.context=V,this.refs=x,this.updater=H||y}b.prototype.isReactComponent={},b.prototype.setState=function(B,V){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,V,"setState")},b.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function T(){}T.prototype=b.prototype;function _(B,V,H){this.props=B,this.context=V,this.refs=x,this.updater=H||y}var w=_.prototype=new T;w.constructor=_,v(w,b.prototype),w.isPureReactComponent=!0;var O=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function L(B,V,H,te,ce,ye){return H=ye.ref,{$$typeof:t,type:B,key:V,ref:H!==void 0?H:null,props:ye}}function P(B,V){return L(B.type,V,void 0,void 0,void 0,B.props)}function N(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function k(B){var V={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(H){return V[H]})}var M=/\/+/g;function $(B,V){return typeof B=="object"&&B!==null&&B.key!=null?k(""+B.key):V.toString(36)}function K(){}function W(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(K,K):(B.status="pending",B.then(function(V){B.status==="pending"&&(B.status="fulfilled",B.value=V)},function(V){B.status==="pending"&&(B.status="rejected",B.reason=V)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Y(B,V,H,te,ce){var ye=typeof B;(ye==="undefined"||ye==="boolean")&&(B=null);var ge=!1;if(B===null)ge=!0;else switch(ye){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(B.$$typeof){case t:case e:ge=!0;break;case d:return ge=B._init,Y(ge(B._payload),V,H,te,ce)}}if(ge)return ce=ce(B),ge=te===""?"."+$(B,0):te,O(ce)?(H="",ge!=null&&(H=ge.replace(M,"$&/")+"/"),Y(ce,V,H,"",function(pe){return pe})):ce!=null&&(N(ce)&&(ce=P(ce,H+(ce.key==null||B&&B.key===ce.key?"":(""+ce.key).replace(M,"$&/")+"/")+ge)),V.push(ce)),1;ge=0;var Me=te===""?".":te+":";if(O(B))for(var Re=0;Re<B.length;Re++)te=B[Re],ye=Me+$(te,Re),ge+=Y(te,V,H,ye,ce);else if(Re=p(B),typeof Re=="function")for(B=Re.call(B),Re=0;!(te=B.next()).done;)te=te.value,ye=Me+$(te,Re++),ge+=Y(te,V,H,ye,ce);else if(ye==="object"){if(typeof B.then=="function")return Y(W(B),V,H,te,ce);throw V=String(B),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ge}function j(B,V,H){if(B==null)return B;var te=[],ce=0;return Y(B,te,"","",function(ye){return V.call(H,ye,ce++)}),te}function G(B){if(B._status===-1){var V=B._result;V=V(),V.then(function(H){(B._status===0||B._status===-1)&&(B._status=1,B._result=H)},function(H){(B._status===0||B._status===-1)&&(B._status=2,B._result=H)}),B._status===-1&&(B._status=0,B._result=V)}if(B._status===1)return B._result.default;throw B._result}var q=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Z(){}return Fe.Children={map:j,forEach:function(B,V,H){j(B,function(){V.apply(this,arguments)},H)},count:function(B){var V=0;return j(B,function(){V++}),V},toArray:function(B){return j(B,function(V){return V})||[]},only:function(B){if(!N(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Fe.Component=b,Fe.Fragment=n,Fe.Profiler=i,Fe.PureComponent=_,Fe.StrictMode=r,Fe.Suspense=c,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return R.H.useMemoCache(B)}},Fe.cache=function(B){return function(){return B.apply(null,arguments)}},Fe.cloneElement=function(B,V,H){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var te=v({},B.props),ce=B.key,ye=void 0;if(V!=null)for(ge in V.ref!==void 0&&(ye=void 0),V.key!==void 0&&(ce=""+V.key),V)!C.call(V,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&V.ref===void 0||(te[ge]=V[ge]);var ge=arguments.length-2;if(ge===1)te.children=H;else if(1<ge){for(var Me=Array(ge),Re=0;Re<ge;Re++)Me[Re]=arguments[Re+2];te.children=Me}return L(B.type,ce,void 0,void 0,ye,te)},Fe.createContext=function(B){return B={$$typeof:s,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},Fe.createElement=function(B,V,H){var te,ce={},ye=null;if(V!=null)for(te in V.key!==void 0&&(ye=""+V.key),V)C.call(V,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ce[te]=V[te]);var ge=arguments.length-2;if(ge===1)ce.children=H;else if(1<ge){for(var Me=Array(ge),Re=0;Re<ge;Re++)Me[Re]=arguments[Re+2];ce.children=Me}if(B&&B.defaultProps)for(te in ge=B.defaultProps,ge)ce[te]===void 0&&(ce[te]=ge[te]);return L(B,ye,void 0,void 0,null,ce)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(B){return{$$typeof:o,render:B}},Fe.isValidElement=N,Fe.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:G}},Fe.memo=function(B,V){return{$$typeof:u,type:B,compare:V===void 0?null:V}},Fe.startTransition=function(B){var V=R.T,H={};R.T=H;try{var te=B(),ce=R.S;ce!==null&&ce(H,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(Z,q)}catch(ye){q(ye)}finally{R.T=V}},Fe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Fe.use=function(B){return R.H.use(B)},Fe.useActionState=function(B,V,H){return R.H.useActionState(B,V,H)},Fe.useCallback=function(B,V){return R.H.useCallback(B,V)},Fe.useContext=function(B){return R.H.useContext(B)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(B,V){return R.H.useDeferredValue(B,V)},Fe.useEffect=function(B,V,H){var te=R.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(B,V)},Fe.useId=function(){return R.H.useId()},Fe.useImperativeHandle=function(B,V,H){return R.H.useImperativeHandle(B,V,H)},Fe.useInsertionEffect=function(B,V){return R.H.useInsertionEffect(B,V)},Fe.useLayoutEffect=function(B,V){return R.H.useLayoutEffect(B,V)},Fe.useMemo=function(B,V){return R.H.useMemo(B,V)},Fe.useOptimistic=function(B,V){return R.H.useOptimistic(B,V)},Fe.useReducer=function(B,V,H){return R.H.useReducer(B,V,H)},Fe.useRef=function(B){return R.H.useRef(B)},Fe.useState=function(B){return R.H.useState(B)},Fe.useSyncExternalStore=function(B,V,H){return R.H.useSyncExternalStore(B,V,H)},Fe.useTransition=function(){return R.H.useTransition()},Fe.version="19.1.0",Fe}var lL;function Bp(){return lL||(lL=1,Ky.exports=mH()),Ky.exports}var F=Bp();const Q=vt(F);var Yy={exports:{}},rc={},Wy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uL;function pH(){return uL||(uL=1,function(t){function e(j,G){var q=j.length;j.push(G);e:for(;0<q;){var Z=q-1>>>1,B=j[Z];if(0<i(B,G))j[Z]=G,j[q]=B,q=Z;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var G=j[0],q=j.pop();if(q!==G){j[0]=q;e:for(var Z=0,B=j.length,V=B>>>1;Z<V;){var H=2*(Z+1)-1,te=j[H],ce=H+1,ye=j[ce];if(0>i(te,q))ce<B&&0>i(ye,te)?(j[Z]=ye,j[ce]=q,Z=ce):(j[Z]=te,j[H]=q,Z=H);else if(ce<B&&0>i(ye,q))j[Z]=ye,j[ce]=q,Z=ce;else break e}}return G}function i(j,G){var q=j.sortIndex-G.sortIndex;return q!==0?q:j.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,h=null,p=3,y=!1,v=!1,x=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function O(j){for(var G=n(u);G!==null;){if(G.callback===null)r(u);else if(G.startTime<=j)r(u),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(u)}}function R(j){if(x=!1,O(j),!v)if(n(c)!==null)v=!0,C||(C=!0,$());else{var G=n(u);G!==null&&Y(R,G.startTime-j)}}var C=!1,L=-1,P=5,N=-1;function k(){return b?!0:!(t.unstable_now()-N<P)}function M(){if(b=!1,C){var j=t.unstable_now();N=j;var G=!0;try{e:{v=!1,x&&(x=!1,_(L),L=-1),y=!0;var q=p;try{t:{for(O(j),h=n(c);h!==null&&!(h.expirationTime>j&&k());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,p=h.priorityLevel;var B=Z(h.expirationTime<=j);if(j=t.unstable_now(),typeof B=="function"){h.callback=B,O(j),G=!0;break t}h===n(c)&&r(c),O(j)}else r(c);h=n(c)}if(h!==null)G=!0;else{var V=n(u);V!==null&&Y(R,V.startTime-j),G=!1}}break e}finally{h=null,p=q,y=!1}G=void 0}}finally{G?$():C=!1}}}var $;if(typeof w=="function")$=function(){w(M)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,W=K.port2;K.port1.onmessage=M,$=function(){W.postMessage(null)}}else $=function(){T(M,0)};function Y(j,G){L=T(function(){j(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(j){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var q=p;p=G;try{return j()}finally{p=q}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=p;p=j;try{return G()}finally{p=q}},t.unstable_scheduleCallback=function(j,G,q){var Z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,j){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=q+B,j={id:d++,callback:G,priorityLevel:j,startTime:q,expirationTime:B,sortIndex:-1},q>Z?(j.sortIndex=q,e(u,j),n(c)===null&&j===n(u)&&(x?(_(L),L=-1):x=!0,Y(R,q-Z))):(j.sortIndex=B,e(c,j),v||y||(v=!0,C||(C=!0,$()))),j},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(j){var G=p;return function(){var q=p;p=G;try{return j.apply(this,arguments)}finally{p=q}}}}(Xy)),Xy}var cL;function gH(){return cL||(cL=1,Wy.exports=pH()),Wy.exports}var Qy={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fL;function yH(){if(fL)return Ln;fL=1;var t=Bp();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:d}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,d)},Ln.flushSync=function(c){var u=s.T,d=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=d,r.d.f()}},Ln.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Ln.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ln.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&r.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ln.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Ln.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(c,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ln.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Ln.requestFormReset=function(c){r.d.r(c)},Ln.unstable_batchedUpdates=function(c,u){return c(u)},Ln.useFormState=function(c,u,d){return s.H.useFormState(c,u,d)},Ln.useFormStatus=function(){return s.H.useHostTransitionStatus()},Ln.version="19.1.0",Ln}var dL;function vH(){if(dL)return Qy.exports;dL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qy.exports=yH(),Qy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hL;function bH(){if(hL)return rc;hL=1;var t=gH(),e=Bp(),n=vH();function r(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var f=l,m=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(m=f.return),l=f.return;while(l)}return f.tag===3?m:null}function s(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(r(188))}function c(l){var f=l.alternate;if(!f){if(f=a(l),f===null)throw Error(r(188));return f!==l?null:l}for(var m=l,g=f;;){var E=m.return;if(E===null)break;var A=E.alternate;if(A===null){if(g=E.return,g!==null){m=g;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===m)return o(E),l;if(A===g)return o(E),f;A=A.sibling}throw Error(r(188))}if(m.return!==g.return)m=E,g=A;else{for(var I=!1,U=E.child;U;){if(U===m){I=!0,m=E,g=A;break}if(U===g){I=!0,g=E,m=A;break}U=U.sibling}if(!I){for(U=A.child;U;){if(U===m){I=!0,m=A,g=E;break}if(U===g){I=!0,g=A,m=E;break}U=U.sibling}if(!I)throw Error(r(189))}}if(m.alternate!==g)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?l:f}function u(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=u(l),f!==null)return f;l=l.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),w=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=M&&l[M]||l["@@iterator"],typeof l=="function"?l:null)}var K=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===K?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case C:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case w:return(l.displayName||"Context")+".Provider";case _:return(l._context.displayName||"Context")+".Consumer";case O:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return f=l.displayName||null,f!==null?f:W(l.type)||"Memo";case P:f=l._payload,l=l._init;try{return W(l(f))}catch{}}return null}var Y=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},Z=[],B=-1;function V(l){return{current:l}}function H(l){0>B||(l.current=Z[B],Z[B]=null,B--)}function te(l,f){B++,Z[B]=l.current,l.current=f}var ce=V(null),ye=V(null),ge=V(null),Me=V(null);function Re(l,f){switch(te(ge,f),te(ye,l),te(ce,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?PC(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=PC(f),l=NC(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}H(ce),te(ce,l)}function pe(){H(ce),H(ye),H(ge)}function Ae(l){l.memoizedState!==null&&te(Me,l);var f=ce.current,m=NC(f,l.type);f!==m&&(te(ye,l),te(ce,m))}function Oe(l){ye.current===l&&(H(ce),H(ye)),Me.current===l&&(H(Me),Qu._currentValue=q)}var me=Object.prototype.hasOwnProperty,rt=t.unstable_scheduleCallback,Be=t.unstable_cancelCallback,It=t.unstable_shouldYield,_e=t.unstable_requestPaint,je=t.unstable_now,Rt=t.unstable_getCurrentPriorityLevel,yn=t.unstable_ImmediatePriority,Wt=t.unstable_UserBlockingPriority,Xt=t.unstable_NormalPriority,vn=t.unstable_LowPriority,Ri=t.unstable_IdlePriority,Oi=t.log,ss=t.unstable_setDisableYieldValue,Br=null,_n=null;function ii(l){if(typeof Oi=="function"&&ss(l),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(Br,l)}catch{}}var Rn=Math.clz32?Math.clz32:ZG,sd=Math.log,os=Math.LN2;function ZG(l){return l>>>=0,l===0?32:31-(sd(l)/os|0)|0}var od=256,ld=4194304;function ls(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ud(l,f,m){var g=l.pendingLanes;if(g===0)return 0;var E=0,A=l.suspendedLanes,I=l.pingedLanes;l=l.warmLanes;var U=g&134217727;return U!==0?(g=U&~A,g!==0?E=ls(g):(I&=U,I!==0?E=ls(I):m||(m=U&~l,m!==0&&(E=ls(m))))):(U=g&~A,U!==0?E=ls(U):I!==0?E=ls(I):m||(m=g&~l,m!==0&&(E=ls(m)))),E===0?0:f!==0&&f!==E&&(f&A)===0&&(A=E&-E,m=f&-f,A>=m||A===32&&(m&4194048)!==0)?f:E}function su(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function JG(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g_(){var l=od;return od<<=1,(od&4194048)===0&&(od=256),l}function y_(){var l=ld;return ld<<=1,(ld&62914560)===0&&(ld=4194304),l}function Mg(l){for(var f=[],m=0;31>m;m++)f.push(l);return f}function ou(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function eV(l,f,m,g,E,A){var I=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var U=l.entanglements,z=l.expirationTimes,ie=l.hiddenUpdates;for(m=I&~m;0<m;){var ue=31-Rn(m),he=1<<ue;U[ue]=0,z[ue]=-1;var ae=ie[ue];if(ae!==null)for(ie[ue]=null,ue=0;ue<ae.length;ue++){var se=ae[ue];se!==null&&(se.lane&=-536870913)}m&=~he}g!==0&&v_(l,g,0),A!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=A&~(I&~f))}function v_(l,f,m){l.pendingLanes|=f,l.suspendedLanes&=~f;var g=31-Rn(f);l.entangledLanes|=f,l.entanglements[g]=l.entanglements[g]|1073741824|m&4194090}function b_(l,f){var m=l.entangledLanes|=f;for(l=l.entanglements;m;){var g=31-Rn(m),E=1<<g;E&f|l[g]&f&&(l[g]|=f),m&=~E}}function kg(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function jg(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function x_(){var l=G.p;return l!==0?l:(l=window.event,l===void 0?32:JC(l.type))}function tV(l,f){var m=G.p;try{return G.p=l,f()}finally{G.p=m}}var ma=Math.random().toString(36).slice(2),On="__reactFiber$"+ma,$n="__reactProps$"+ma,ao="__reactContainer$"+ma,Ug="__reactEvents$"+ma,nV="__reactListeners$"+ma,rV="__reactHandles$"+ma,S_="__reactResources$"+ma,lu="__reactMarker$"+ma;function Bg(l){delete l[On],delete l[$n],delete l[Ug],delete l[nV],delete l[rV]}function so(l){var f=l[On];if(f)return f;for(var m=l.parentNode;m;){if(f=m[ao]||m[On]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(l=UC(l);l!==null;){if(m=l[On])return m;l=UC(l)}return f}l=m,m=l.parentNode}return null}function oo(l){if(l=l[On]||l[ao]){var f=l.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return l}return null}function uu(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(r(33))}function lo(l){var f=l[S_];return f||(f=l[S_]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function on(l){l[lu]=!0}var E_=new Set,T_={};function us(l,f){uo(l,f),uo(l+"Capture",f)}function uo(l,f){for(T_[l]=f,l=0;l<f.length;l++)E_.add(f[l])}var iV=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),A_={},w_={};function aV(l){return me.call(w_,l)?!0:me.call(A_,l)?!1:iV.test(l)?w_[l]=!0:(A_[l]=!0,!1)}function cd(l,f,m){if(aV(f))if(m===null)l.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var g=f.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+m)}}function fd(l,f,m){if(m===null)l.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+m)}}function Ci(l,f,m,g){if(g===null)l.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(f,m,""+g)}}var Fg,__;function co(l){if(Fg===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);Fg=f&&f[1]||"",__=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fg+l+__}var $g=!1;function Gg(l,f){if(!l||$g)return"";$g=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(f){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var ae=se}Reflect.construct(l,[],he)}else{try{he.call()}catch(se){ae=se}l.call(he.prototype)}}else{try{throw Error()}catch(se){ae=se}(he=l())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&ae&&typeof se.stack=="string")return[se.stack,ae.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=g.DetermineComponentFrameRoot(),I=A[0],U=A[1];if(I&&U){var z=I.split(`
`),ie=U.split(`
`);for(E=g=0;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;for(;E<ie.length&&!ie[E].includes("DetermineComponentFrameRoot");)E++;if(g===z.length||E===ie.length)for(g=z.length-1,E=ie.length-1;1<=g&&0<=E&&z[g]!==ie[E];)E--;for(;1<=g&&0<=E;g--,E--)if(z[g]!==ie[E]){if(g!==1||E!==1)do if(g--,E--,0>E||z[g]!==ie[E]){var ue=`
`+z[g].replace(" at new "," at ");return l.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",l.displayName)),ue}while(1<=g&&0<=E);break}}}finally{$g=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?co(m):""}function sV(l){switch(l.tag){case 26:case 27:case 5:return co(l.type);case 16:return co("Lazy");case 13:return co("Suspense");case 19:return co("SuspenseList");case 0:case 15:return Gg(l.type,!1);case 11:return Gg(l.type.render,!1);case 1:return Gg(l.type,!0);case 31:return co("Activity");default:return""}}function R_(l){try{var f="";do f+=sV(l),l=l.return;while(l);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function hr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function O_(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function oV(l){var f=O_(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,f),g=""+l[f];if(!l.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,A=m.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return E.call(this)},set:function(I){g=""+I,A.call(this,I)}}),Object.defineProperty(l,f,{enumerable:m.enumerable}),{getValue:function(){return g},setValue:function(I){g=""+I},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function dd(l){l._valueTracker||(l._valueTracker=oV(l))}function C_(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var m=f.getValue(),g="";return l&&(g=O_(l)?l.checked?"true":"false":l.value),l=g,l!==m?(f.setValue(l),!0):!1}function hd(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var lV=/[\n"\\]/g;function mr(l){return l.replace(lV,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Vg(l,f,m,g,E,A,I,U){l.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?l.type=I:l.removeAttribute("type"),f!=null?I==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+hr(f)):l.value!==""+hr(f)&&(l.value=""+hr(f)):I!=="submit"&&I!=="reset"||l.removeAttribute("value"),f!=null?qg(l,I,hr(f)):m!=null?qg(l,I,hr(m)):g!=null&&l.removeAttribute("value"),E==null&&A!=null&&(l.defaultChecked=!!A),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.name=""+hr(U):l.removeAttribute("name")}function L_(l,f,m,g,E,A,I,U){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(l.type=A),f!=null||m!=null){if(!(A!=="submit"&&A!=="reset"||f!=null))return;m=m!=null?""+hr(m):"",f=f!=null?""+hr(f):m,U||f===l.value||(l.value=f),l.defaultValue=f}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=U?l.checked:!!g,l.defaultChecked=!!g,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(l.name=I)}function qg(l,f,m){f==="number"&&hd(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function fo(l,f,m,g){if(l=l.options,f){f={};for(var E=0;E<m.length;E++)f["$"+m[E]]=!0;for(m=0;m<l.length;m++)E=f.hasOwnProperty("$"+l[m].value),l[m].selected!==E&&(l[m].selected=E),E&&g&&(l[m].defaultSelected=!0)}else{for(m=""+hr(m),f=null,E=0;E<l.length;E++){if(l[E].value===m){l[E].selected=!0,g&&(l[E].defaultSelected=!0);return}f!==null||l[E].disabled||(f=l[E])}f!==null&&(f.selected=!0)}}function D_(l,f,m){if(f!=null&&(f=""+hr(f),f!==l.value&&(l.value=f),m==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=m!=null?""+hr(m):""}function I_(l,f,m,g){if(f==null){if(g!=null){if(m!=null)throw Error(r(92));if(Y(g)){if(1<g.length)throw Error(r(93));g=g[0]}m=g}m==null&&(m=""),f=m}m=hr(f),l.defaultValue=m,g=l.textContent,g===m&&g!==""&&g!==null&&(l.value=g)}function ho(l,f){if(f){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=f;return}}l.textContent=f}var uV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function P_(l,f,m){var g=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?g?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":g?l.setProperty(f,m):typeof m!="number"||m===0||uV.has(f)?f==="float"?l.cssFloat=m:l[f]=(""+m).trim():l[f]=m+"px"}function N_(l,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(l=l.style,m!=null){for(var g in m)!m.hasOwnProperty(g)||f!=null&&f.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var E in f)g=f[E],f.hasOwnProperty(E)&&m[E]!==g&&P_(l,E,g)}else for(var A in f)f.hasOwnProperty(A)&&P_(l,A,f[A])}function Hg(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function md(l){return fV.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var zg=null;function Kg(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var mo=null,po=null;function M_(l){var f=oo(l);if(f&&(l=f.stateNode)){var m=l[$n]||null;e:switch(l=f.stateNode,f.type){case"input":if(Vg(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+mr(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var g=m[f];if(g!==l&&g.form===l.form){var E=g[$n]||null;if(!E)throw Error(r(90));Vg(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(f=0;f<m.length;f++)g=m[f],g.form===l.form&&C_(g)}break e;case"textarea":D_(l,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&fo(l,!!m.multiple,f,!1)}}}var Yg=!1;function k_(l,f,m){if(Yg)return l(f,m);Yg=!0;try{var g=l(f);return g}finally{if(Yg=!1,(mo!==null||po!==null)&&(Jd(),mo&&(f=mo,l=po,po=mo=null,M_(f),l)))for(f=0;f<l.length;f++)M_(l[f])}}function cu(l,f){var m=l.stateNode;if(m===null)return null;var g=m[$n]||null;if(g===null)return null;m=g[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wg=!1;if(Li)try{var fu={};Object.defineProperty(fu,"passive",{get:function(){Wg=!0}}),window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{Wg=!1}var pa=null,Xg=null,pd=null;function j_(){if(pd)return pd;var l,f=Xg,m=f.length,g,E="value"in pa?pa.value:pa.textContent,A=E.length;for(l=0;l<m&&f[l]===E[l];l++);var I=m-l;for(g=1;g<=I&&f[m-g]===E[A-g];g++);return pd=E.slice(l,1<g?1-g:void 0)}function gd(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function yd(){return!0}function U_(){return!1}function Gn(l){function f(m,g,E,A,I){this._reactName=m,this._targetInst=E,this.type=g,this.nativeEvent=A,this.target=I,this.currentTarget=null;for(var U in l)l.hasOwnProperty(U)&&(m=l[U],this[U]=m?m(A):A[U]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?yd:U_,this.isPropagationStopped=U_,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),f}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vd=Gn(cs),du=d({},cs,{view:0,detail:0}),dV=Gn(du),Qg,Zg,hu,bd=d({},du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e0,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==hu&&(hu&&l.type==="mousemove"?(Qg=l.screenX-hu.screenX,Zg=l.screenY-hu.screenY):Zg=Qg=0,hu=l),Qg)},movementY:function(l){return"movementY"in l?l.movementY:Zg}}),B_=Gn(bd),hV=d({},bd,{dataTransfer:0}),mV=Gn(hV),pV=d({},du,{relatedTarget:0}),Jg=Gn(pV),gV=d({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),yV=Gn(gV),vV=d({},cs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),bV=Gn(vV),xV=d({},cs,{data:0}),F_=Gn(xV),SV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AV(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=TV[l])?!!f[l]:!1}function e0(){return AV}var wV=d({},du,{key:function(l){if(l.key){var f=SV[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=gd(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?EV[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e0,charCode:function(l){return l.type==="keypress"?gd(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?gd(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),_V=Gn(wV),RV=d({},bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$_=Gn(RV),OV=d({},du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e0}),CV=Gn(OV),LV=d({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),DV=Gn(LV),IV=d({},bd,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),PV=Gn(IV),NV=d({},cs,{newState:0,oldState:0}),MV=Gn(NV),kV=[9,13,27,32],t0=Li&&"CompositionEvent"in window,mu=null;Li&&"documentMode"in document&&(mu=document.documentMode);var jV=Li&&"TextEvent"in window&&!mu,G_=Li&&(!t0||mu&&8<mu&&11>=mu),V_=" ",q_=!1;function H_(l,f){switch(l){case"keyup":return kV.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z_(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var go=!1;function UV(l,f){switch(l){case"compositionend":return z_(f);case"keypress":return f.which!==32?null:(q_=!0,V_);case"textInput":return l=f.data,l===V_&&q_?null:l;default:return null}}function BV(l,f){if(go)return l==="compositionend"||!t0&&H_(l,f)?(l=j_(),pd=Xg=pa=null,go=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return G_&&f.locale!=="ko"?null:f.data;default:return null}}var FV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K_(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!FV[l.type]:f==="textarea"}function Y_(l,f,m,g){mo?po?po.push(g):po=[g]:mo=g,f=ah(f,"onChange"),0<f.length&&(m=new vd("onChange","change",null,m,g),l.push({event:m,listeners:f}))}var pu=null,gu=null;function $V(l){OC(l,0)}function xd(l){var f=uu(l);if(C_(f))return l}function W_(l,f){if(l==="change")return f}var X_=!1;if(Li){var n0;if(Li){var r0="oninput"in document;if(!r0){var Q_=document.createElement("div");Q_.setAttribute("oninput","return;"),r0=typeof Q_.oninput=="function"}n0=r0}else n0=!1;X_=n0&&(!document.documentMode||9<document.documentMode)}function Z_(){pu&&(pu.detachEvent("onpropertychange",J_),gu=pu=null)}function J_(l){if(l.propertyName==="value"&&xd(gu)){var f=[];Y_(f,gu,l,Kg(l)),k_($V,f)}}function GV(l,f,m){l==="focusin"?(Z_(),pu=f,gu=m,pu.attachEvent("onpropertychange",J_)):l==="focusout"&&Z_()}function VV(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return xd(gu)}function qV(l,f){if(l==="click")return xd(f)}function HV(l,f){if(l==="input"||l==="change")return xd(f)}function zV(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var Jn=typeof Object.is=="function"?Object.is:zV;function yu(l,f){if(Jn(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var m=Object.keys(l),g=Object.keys(f);if(m.length!==g.length)return!1;for(g=0;g<m.length;g++){var E=m[g];if(!me.call(f,E)||!Jn(l[E],f[E]))return!1}return!0}function eR(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function tR(l,f){var m=eR(l);l=0;for(var g;m;){if(m.nodeType===3){if(g=l+m.textContent.length,l<=f&&g>=f)return{node:m,offset:f-l};l=g}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=eR(m)}}function nR(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?nR(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function rR(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=hd(l.document);f instanceof l.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)l=f.contentWindow;else break;f=hd(l.document)}return f}function i0(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var KV=Li&&"documentMode"in document&&11>=document.documentMode,yo=null,a0=null,vu=null,s0=!1;function iR(l,f,m){var g=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;s0||yo==null||yo!==hd(g)||(g=yo,"selectionStart"in g&&i0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),vu&&yu(vu,g)||(vu=g,g=ah(a0,"onSelect"),0<g.length&&(f=new vd("onSelect","select",null,f,m),l.push({event:f,listeners:g}),f.target=yo)))}function fs(l,f){var m={};return m[l.toLowerCase()]=f.toLowerCase(),m["Webkit"+l]="webkit"+f,m["Moz"+l]="moz"+f,m}var vo={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},o0={},aR={};Li&&(aR=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function ds(l){if(o0[l])return o0[l];if(!vo[l])return l;var f=vo[l],m;for(m in f)if(f.hasOwnProperty(m)&&m in aR)return o0[l]=f[m];return l}var sR=ds("animationend"),oR=ds("animationiteration"),lR=ds("animationstart"),YV=ds("transitionrun"),WV=ds("transitionstart"),XV=ds("transitioncancel"),uR=ds("transitionend"),cR=new Map,l0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");l0.push("scrollEnd");function Fr(l,f){cR.set(l,f),us(f,[l])}var fR=new WeakMap;function pr(l,f){if(typeof l=="object"&&l!==null){var m=fR.get(l);return m!==void 0?m:(f={value:l,source:f,stack:R_(f)},fR.set(l,f),f)}return{value:l,source:f,stack:R_(f)}}var gr=[],bo=0,u0=0;function Sd(){for(var l=bo,f=u0=bo=0;f<l;){var m=gr[f];gr[f++]=null;var g=gr[f];gr[f++]=null;var E=gr[f];gr[f++]=null;var A=gr[f];if(gr[f++]=null,g!==null&&E!==null){var I=g.pending;I===null?E.next=E:(E.next=I.next,I.next=E),g.pending=E}A!==0&&dR(m,E,A)}}function Ed(l,f,m,g){gr[bo++]=l,gr[bo++]=f,gr[bo++]=m,gr[bo++]=g,u0|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function c0(l,f,m,g){return Ed(l,f,m,g),Td(l)}function xo(l,f){return Ed(l,null,null,f),Td(l)}function dR(l,f,m){l.lanes|=m;var g=l.alternate;g!==null&&(g.lanes|=m);for(var E=!1,A=l.return;A!==null;)A.childLanes|=m,g=A.alternate,g!==null&&(g.childLanes|=m),A.tag===22&&(l=A.stateNode,l===null||l._visibility&1||(E=!0)),l=A,A=A.return;return l.tag===3?(A=l.stateNode,E&&f!==null&&(E=31-Rn(m),l=A.hiddenUpdates,g=l[E],g===null?l[E]=[f]:g.push(f),f.lane=m|536870912),A):null}function Td(l){if(50<Vu)throw Vu=0,gy=null,Error(r(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var So={};function QV(l,f,m,g){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(l,f,m,g){return new QV(l,f,m,g)}function f0(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Di(l,f){var m=l.alternate;return m===null?(m=er(l.tag,f,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=f,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,f=l.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function hR(l,f){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,f=m.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function Ad(l,f,m,g,E,A){var I=0;if(g=l,typeof l=="function")f0(l)&&(I=1);else if(typeof l=="string")I=Jq(l,m,ce.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=er(31,m,f,E),l.elementType=N,l.lanes=A,l;case v:return hs(m.children,E,A,f);case x:I=8,E|=24;break;case b:return l=er(12,m,f,E|2),l.elementType=b,l.lanes=A,l;case R:return l=er(13,m,f,E),l.elementType=R,l.lanes=A,l;case C:return l=er(19,m,f,E),l.elementType=C,l.lanes=A,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case T:case w:I=10;break e;case _:I=9;break e;case O:I=11;break e;case L:I=14;break e;case P:I=16,g=null;break e}I=29,m=Error(r(130,l===null?"null":typeof l,"")),g=null}return f=er(I,m,f,E),f.elementType=l,f.type=g,f.lanes=A,f}function hs(l,f,m,g){return l=er(7,l,g,f),l.lanes=m,l}function d0(l,f,m){return l=er(6,l,null,f),l.lanes=m,l}function h0(l,f,m){return f=er(4,l.children!==null?l.children:[],l.key,f),f.lanes=m,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var Eo=[],To=0,wd=null,_d=0,yr=[],vr=0,ms=null,Ii=1,Pi="";function ps(l,f){Eo[To++]=_d,Eo[To++]=wd,wd=l,_d=f}function mR(l,f,m){yr[vr++]=Ii,yr[vr++]=Pi,yr[vr++]=ms,ms=l;var g=Ii;l=Pi;var E=32-Rn(g)-1;g&=~(1<<E),m+=1;var A=32-Rn(f)+E;if(30<A){var I=E-E%5;A=(g&(1<<I)-1).toString(32),g>>=I,E-=I,Ii=1<<32-Rn(f)+E|m<<E|g,Pi=A+l}else Ii=1<<A|m<<E|g,Pi=l}function m0(l){l.return!==null&&(ps(l,1),mR(l,1,0))}function p0(l){for(;l===wd;)wd=Eo[--To],Eo[To]=null,_d=Eo[--To],Eo[To]=null;for(;l===ms;)ms=yr[--vr],yr[vr]=null,Pi=yr[--vr],yr[vr]=null,Ii=yr[--vr],yr[vr]=null}var jn=null,Pt=null,nt=!1,gs=null,ai=!1,g0=Error(r(519));function ys(l){var f=Error(r(418,""));throw Su(pr(f,l)),g0}function pR(l){var f=l.stateNode,m=l.type,g=l.memoizedProps;switch(f[On]=l,f[$n]=g,m){case"dialog":Ke("cancel",f),Ke("close",f);break;case"iframe":case"object":case"embed":Ke("load",f);break;case"video":case"audio":for(m=0;m<Hu.length;m++)Ke(Hu[m],f);break;case"source":Ke("error",f);break;case"img":case"image":case"link":Ke("error",f),Ke("load",f);break;case"details":Ke("toggle",f);break;case"input":Ke("invalid",f),L_(f,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),dd(f);break;case"select":Ke("invalid",f);break;case"textarea":Ke("invalid",f),I_(f,g.value,g.defaultValue,g.children),dd(f)}m=g.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||g.suppressHydrationWarning===!0||IC(f.textContent,m)?(g.popover!=null&&(Ke("beforetoggle",f),Ke("toggle",f)),g.onScroll!=null&&Ke("scroll",f),g.onScrollEnd!=null&&Ke("scrollend",f),g.onClick!=null&&(f.onclick=sh),f=!0):f=!1,f||ys(l)}function gR(l){for(jn=l.return;jn;)switch(jn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:jn=jn.return}}function bu(l){if(l!==jn)return!1;if(!nt)return gR(l),nt=!0,!1;var f=l.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||Iy(l.type,l.memoizedProps)),m=!m),m&&Pt&&ys(l),gR(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,f=0;l;){if(l.nodeType===8)if(m=l.data,m==="/$"){if(f===0){Pt=Gr(l.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;l=l.nextSibling}Pt=null}}else f===27?(f=Pt,Da(l.type)?(l=ky,ky=null,Pt=l):Pt=f):Pt=jn?Gr(l.stateNode.nextSibling):null;return!0}function xu(){Pt=jn=null,nt=!1}function yR(){var l=gs;return l!==null&&(Hn===null?Hn=l:Hn.push.apply(Hn,l),gs=null),l}function Su(l){gs===null?gs=[l]:gs.push(l)}var y0=V(null),vs=null,Ni=null;function ga(l,f,m){te(y0,f._currentValue),f._currentValue=m}function Mi(l){l._currentValue=y0.current,H(y0)}function v0(l,f,m){for(;l!==null;){var g=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,g!==null&&(g.childLanes|=f)):g!==null&&(g.childLanes&f)!==f&&(g.childLanes|=f),l===m)break;l=l.return}}function b0(l,f,m,g){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var A=E.dependencies;if(A!==null){var I=E.child;A=A.firstContext;e:for(;A!==null;){var U=A;A=E;for(var z=0;z<f.length;z++)if(U.context===f[z]){A.lanes|=m,U=A.alternate,U!==null&&(U.lanes|=m),v0(A.return,m,l),g||(I=null);break e}A=U.next}}else if(E.tag===18){if(I=E.return,I===null)throw Error(r(341));I.lanes|=m,A=I.alternate,A!==null&&(A.lanes|=m),v0(I,m,l),I=null}else I=E.child;if(I!==null)I.return=E;else for(I=E;I!==null;){if(I===l){I=null;break}if(E=I.sibling,E!==null){E.return=I.return,I=E;break}I=I.return}E=I}}function Eu(l,f,m,g){l=null;for(var E=f,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var I=E.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var U=E.type;Jn(E.pendingProps.value,I.value)||(l!==null?l.push(U):l=[U])}}else if(E===Me.current){if(I=E.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(Qu):l=[Qu])}E=E.return}l!==null&&b0(f,l,m,g),f.flags|=262144}function Rd(l){for(l=l.firstContext;l!==null;){if(!Jn(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function bs(l){vs=l,Ni=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Cn(l){return vR(vs,l)}function Od(l,f){return vs===null&&bs(l),vR(l,f)}function vR(l,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},Ni===null){if(l===null)throw Error(r(308));Ni=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else Ni=Ni.next=f;return m}var ZV=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(m,g){l.push(g)}};this.abort=function(){f.aborted=!0,l.forEach(function(m){return m()})}},JV=t.unstable_scheduleCallback,eq=t.unstable_NormalPriority,Qt={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function x0(){return{controller:new ZV,data:new Map,refCount:0}}function Tu(l){l.refCount--,l.refCount===0&&JV(eq,function(){l.controller.abort()})}var Au=null,S0=0,Ao=0,wo=null;function tq(l,f){if(Au===null){var m=Au=[];S0=0,Ao=Ty(),wo={status:"pending",value:void 0,then:function(g){m.push(g)}}}return S0++,f.then(bR,bR),f}function bR(){if(--S0===0&&Au!==null){wo!==null&&(wo.status="fulfilled");var l=Au;Au=null,Ao=0,wo=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function nq(l,f){var m=[],g={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return l.then(function(){g.status="fulfilled",g.value=f;for(var E=0;E<m.length;E++)(0,m[E])(f)},function(E){for(g.status="rejected",g.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),g}var xR=j.S;j.S=function(l,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&tq(l,f),xR!==null&&xR(l,f)};var xs=V(null);function E0(){var l=xs.current;return l!==null?l:bt.pooledCache}function Cd(l,f){f===null?te(xs,xs.current):te(xs,f.pool)}function SR(){var l=E0();return l===null?null:{parent:Qt._currentValue,pool:l}}var wu=Error(r(460)),ER=Error(r(474)),Ld=Error(r(542)),T0={then:function(){}};function TR(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Dd(){}function AR(l,f,m){switch(m=l[m],m===void 0?l.push(f):m!==f&&(f.then(Dd,Dd),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,_R(l),l;default:if(typeof f.status=="string")f.then(Dd,Dd);else{if(l=bt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=f,l.status="pending",l.then(function(g){if(f.status==="pending"){var E=f;E.status="fulfilled",E.value=g}},function(g){if(f.status==="pending"){var E=f;E.status="rejected",E.reason=g}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,_R(l),l}throw _u=f,wu}}var _u=null;function wR(){if(_u===null)throw Error(r(459));var l=_u;return _u=null,l}function _R(l){if(l===wu||l===Ld)throw Error(r(483))}var ya=!1;function A0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function w0(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function va(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ba(l,f,m){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(st&2)!==0){var E=g.pending;return E===null?f.next=f:(f.next=E.next,E.next=f),g.pending=f,f=Td(l),dR(l,null,m),f}return Ed(l,g,f,m),Td(l)}function Ru(l,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var g=f.lanes;g&=l.pendingLanes,m|=g,f.lanes=m,b_(l,m)}}function _0(l,f){var m=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,m===g)){var E=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var I={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};A===null?E=A=I:A=A.next=I,m=m.next}while(m!==null);A===null?E=A=f:A=A.next=f}else E=A=f;m={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:g.shared,callbacks:g.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=f}var R0=!1;function Ou(){if(R0){var l=wo;if(l!==null)throw l}}function Cu(l,f,m,g){R0=!1;var E=l.updateQueue;ya=!1;var A=E.firstBaseUpdate,I=E.lastBaseUpdate,U=E.shared.pending;if(U!==null){E.shared.pending=null;var z=U,ie=z.next;z.next=null,I===null?A=ie:I.next=ie,I=z;var ue=l.alternate;ue!==null&&(ue=ue.updateQueue,U=ue.lastBaseUpdate,U!==I&&(U===null?ue.firstBaseUpdate=ie:U.next=ie,ue.lastBaseUpdate=z))}if(A!==null){var he=E.baseState;I=0,ue=ie=z=null,U=A;do{var ae=U.lane&-536870913,se=ae!==U.lane;if(se?(Xe&ae)===ae:(g&ae)===ae){ae!==0&&ae===Ao&&(R0=!0),ue!==null&&(ue=ue.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ie=l,Ce=U;ae=f;var dt=m;switch(Ce.tag){case 1:if(Ie=Ce.payload,typeof Ie=="function"){he=Ie.call(dt,he,ae);break e}he=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ce.payload,ae=typeof Ie=="function"?Ie.call(dt,he,ae):Ie,ae==null)break e;he=d({},he,ae);break e;case 2:ya=!0}}ae=U.callback,ae!==null&&(l.flags|=64,se&&(l.flags|=8192),se=E.callbacks,se===null?E.callbacks=[ae]:se.push(ae))}else se={lane:ae,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ue===null?(ie=ue=se,z=he):ue=ue.next=se,I|=ae;if(U=U.next,U===null){if(U=E.shared.pending,U===null)break;se=U,U=se.next,se.next=null,E.lastBaseUpdate=se,E.shared.pending=null}}while(!0);ue===null&&(z=he),E.baseState=z,E.firstBaseUpdate=ie,E.lastBaseUpdate=ue,A===null&&(E.shared.lanes=0),Ra|=I,l.lanes=I,l.memoizedState=he}}function RR(l,f){if(typeof l!="function")throw Error(r(191,l));l.call(f)}function OR(l,f){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)RR(m[l],f)}var _o=V(null),Id=V(0);function CR(l,f){l=Gi,te(Id,l),te(_o,f),Gi=l|f.baseLanes}function O0(){te(Id,Gi),te(_o,_o.current)}function C0(){Gi=Id.current,H(_o),H(Id)}var xa=0,$e=null,ct=null,Vt=null,Pd=!1,Ro=!1,Ss=!1,Nd=0,Lu=0,Oo=null,rq=0;function jt(){throw Error(r(321))}function L0(l,f){if(f===null)return!1;for(var m=0;m<f.length&&m<l.length;m++)if(!Jn(l[m],f[m]))return!1;return!0}function D0(l,f,m,g,E,A){return xa=A,$e=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,j.H=l===null||l.memoizedState===null?dO:hO,Ss=!1,A=m(g,E),Ss=!1,Ro&&(A=DR(f,m,g,E)),LR(l),A}function LR(l){j.H=Fd;var f=ct!==null&&ct.next!==null;if(xa=0,Vt=ct=$e=null,Pd=!1,Lu=0,Oo=null,f)throw Error(r(300));l===null||ln||(l=l.dependencies,l!==null&&Rd(l)&&(ln=!0))}function DR(l,f,m,g){$e=l;var E=0;do{if(Ro&&(Oo=null),Lu=0,Ro=!1,25<=E)throw Error(r(301));if(E+=1,Vt=ct=null,l.updateQueue!=null){var A=l.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}j.H=cq,A=f(m,g)}while(Ro);return A}function iq(){var l=j.H,f=l.useState()[0];return f=typeof f.then=="function"?Du(f):f,l=l.useState()[0],(ct!==null?ct.memoizedState:null)!==l&&($e.flags|=1024),f}function I0(){var l=Nd!==0;return Nd=0,l}function P0(l,f,m){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~m}function N0(l){if(Pd){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Pd=!1}xa=0,Vt=ct=$e=null,Ro=!1,Lu=Nd=0,Oo=null}function Vn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?$e.memoizedState=Vt=l:Vt=Vt.next=l,Vt}function qt(){if(ct===null){var l=$e.alternate;l=l!==null?l.memoizedState:null}else l=ct.next;var f=Vt===null?$e.memoizedState:Vt.next;if(f!==null)Vt=f,ct=l;else{if(l===null)throw $e.alternate===null?Error(r(467)):Error(r(310));ct=l,l={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Vt===null?$e.memoizedState=Vt=l:Vt=Vt.next=l}return Vt}function M0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Du(l){var f=Lu;return Lu+=1,Oo===null&&(Oo=[]),l=AR(Oo,l,f),f=$e,(Vt===null?f.memoizedState:Vt.next)===null&&(f=f.alternate,j.H=f===null||f.memoizedState===null?dO:hO),l}function Md(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Du(l);if(l.$$typeof===w)return Cn(l)}throw Error(r(438,String(l)))}function k0(l){var f=null,m=$e.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var g=$e.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(f={data:g.data.map(function(E){return E.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=M0(),$e.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(l),g=0;g<l;g++)m[g]=k;return f.index++,m}function ki(l,f){return typeof f=="function"?f(l):f}function kd(l){var f=qt();return j0(f,ct,l)}function j0(l,f,m){var g=l.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=m;var E=l.baseQueue,A=g.pending;if(A!==null){if(E!==null){var I=E.next;E.next=A.next,A.next=I}f.baseQueue=E=A,g.pending=null}if(A=l.baseState,E===null)l.memoizedState=A;else{f=E.next;var U=I=null,z=null,ie=f,ue=!1;do{var he=ie.lane&-536870913;if(he!==ie.lane?(Xe&he)===he:(xa&he)===he){var ae=ie.revertLane;if(ae===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),he===Ao&&(ue=!0);else if((xa&ae)===ae){ie=ie.next,ae===Ao&&(ue=!0);continue}else he={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},z===null?(U=z=he,I=A):z=z.next=he,$e.lanes|=ae,Ra|=ae;he=ie.action,Ss&&m(A,he),A=ie.hasEagerState?ie.eagerState:m(A,he)}else ae={lane:he,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},z===null?(U=z=ae,I=A):z=z.next=ae,$e.lanes|=he,Ra|=he;ie=ie.next}while(ie!==null&&ie!==f);if(z===null?I=A:z.next=U,!Jn(A,l.memoizedState)&&(ln=!0,ue&&(m=wo,m!==null)))throw m;l.memoizedState=A,l.baseState=I,l.baseQueue=z,g.lastRenderedState=A}return E===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function U0(l){var f=qt(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var g=m.dispatch,E=m.pending,A=f.memoizedState;if(E!==null){m.pending=null;var I=E=E.next;do A=l(A,I.action),I=I.next;while(I!==E);Jn(A,f.memoizedState)||(ln=!0),f.memoizedState=A,f.baseQueue===null&&(f.baseState=A),m.lastRenderedState=A}return[A,g]}function IR(l,f,m){var g=$e,E=qt(),A=nt;if(A){if(m===void 0)throw Error(r(407));m=m()}else m=f();var I=!Jn((ct||E).memoizedState,m);I&&(E.memoizedState=m,ln=!0),E=E.queue;var U=MR.bind(null,g,E,l);if(Iu(2048,8,U,[l]),E.getSnapshot!==f||I||Vt!==null&&Vt.memoizedState.tag&1){if(g.flags|=2048,Co(9,jd(),NR.bind(null,g,E,m,f),null),bt===null)throw Error(r(349));A||(xa&124)!==0||PR(g,f,m)}return m}function PR(l,f,m){l.flags|=16384,l={getSnapshot:f,value:m},f=$e.updateQueue,f===null?(f=M0(),$e.updateQueue=f,f.stores=[l]):(m=f.stores,m===null?f.stores=[l]:m.push(l))}function NR(l,f,m,g){f.value=m,f.getSnapshot=g,kR(f)&&jR(l)}function MR(l,f,m){return m(function(){kR(f)&&jR(l)})}function kR(l){var f=l.getSnapshot;l=l.value;try{var m=f();return!Jn(l,m)}catch{return!0}}function jR(l){var f=xo(l,2);f!==null&&ar(f,l,2)}function B0(l){var f=Vn();if(typeof l=="function"){var m=l;if(l=m(),Ss){ii(!0);try{m()}finally{ii(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:l},f}function UR(l,f,m,g){return l.baseState=m,j0(l,ct,typeof g=="function"?g:ki)}function aq(l,f,m,g,E){if(Bd(l))throw Error(r(485));if(l=f.action,l!==null){var A={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){A.listeners.push(I)}};j.T!==null?m(!0):A.isTransition=!1,g(A),m=f.pending,m===null?(A.next=f.pending=A,BR(f,A)):(A.next=m.next,f.pending=m.next=A)}}function BR(l,f){var m=f.action,g=f.payload,E=l.state;if(f.isTransition){var A=j.T,I={};j.T=I;try{var U=m(E,g),z=j.S;z!==null&&z(I,U),FR(l,f,U)}catch(ie){F0(l,f,ie)}finally{j.T=A}}else try{A=m(E,g),FR(l,f,A)}catch(ie){F0(l,f,ie)}}function FR(l,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(g){$R(l,f,g)},function(g){return F0(l,f,g)}):$R(l,f,m)}function $R(l,f,m){f.status="fulfilled",f.value=m,GR(f),l.state=m,f=l.pending,f!==null&&(m=f.next,m===f?l.pending=null:(m=m.next,f.next=m,BR(l,m)))}function F0(l,f,m){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do f.status="rejected",f.reason=m,GR(f),f=f.next;while(f!==g)}l.action=null}function GR(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function VR(l,f){return f}function qR(l,f){if(nt){var m=bt.formState;if(m!==null){e:{var g=$e;if(nt){if(Pt){t:{for(var E=Pt,A=ai;E.nodeType!==8;){if(!A){E=null;break t}if(E=Gr(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){Pt=Gr(E.nextSibling),g=E.data==="F!";break e}}ys(g)}g=!1}g&&(f=m[0])}}return m=Vn(),m.memoizedState=m.baseState=f,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:VR,lastRenderedState:f},m.queue=g,m=uO.bind(null,$e,g),g.dispatch=m,g=B0(!1),A=H0.bind(null,$e,!1,g.queue),g=Vn(),E={state:f,dispatch:null,action:l,pending:null},g.queue=E,m=aq.bind(null,$e,E,A,m),E.dispatch=m,g.memoizedState=l,[f,m,!1]}function HR(l){var f=qt();return zR(f,ct,l)}function zR(l,f,m){if(f=j0(l,f,VR)[0],l=kd(ki)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var g=Du(f)}catch(I){throw I===wu?Ld:I}else g=f;f=qt();var E=f.queue,A=E.dispatch;return m!==f.memoizedState&&($e.flags|=2048,Co(9,jd(),sq.bind(null,E,m),null)),[g,A,l]}function sq(l,f){l.action=f}function KR(l){var f=qt(),m=ct;if(m!==null)return zR(f,m,l);qt(),f=f.memoizedState,m=qt();var g=m.queue.dispatch;return m.memoizedState=l,[f,g,!1]}function Co(l,f,m,g){return l={tag:l,create:m,deps:g,inst:f,next:null},f=$e.updateQueue,f===null&&(f=M0(),$e.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=l.next=l:(g=m.next,m.next=l,l.next=g,f.lastEffect=l),l}function jd(){return{destroy:void 0,resource:void 0}}function YR(){return qt().memoizedState}function Ud(l,f,m,g){var E=Vn();g=g===void 0?null:g,$e.flags|=l,E.memoizedState=Co(1|f,jd(),m,g)}function Iu(l,f,m,g){var E=qt();g=g===void 0?null:g;var A=E.memoizedState.inst;ct!==null&&g!==null&&L0(g,ct.memoizedState.deps)?E.memoizedState=Co(f,A,m,g):($e.flags|=l,E.memoizedState=Co(1|f,A,m,g))}function WR(l,f){Ud(8390656,8,l,f)}function XR(l,f){Iu(2048,8,l,f)}function QR(l,f){return Iu(4,2,l,f)}function ZR(l,f){return Iu(4,4,l,f)}function JR(l,f){if(typeof f=="function"){l=l();var m=f(l);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function eO(l,f,m){m=m!=null?m.concat([l]):null,Iu(4,4,JR.bind(null,f,l),m)}function $0(){}function tO(l,f){var m=qt();f=f===void 0?null:f;var g=m.memoizedState;return f!==null&&L0(f,g[1])?g[0]:(m.memoizedState=[l,f],l)}function nO(l,f){var m=qt();f=f===void 0?null:f;var g=m.memoizedState;if(f!==null&&L0(f,g[1]))return g[0];if(g=l(),Ss){ii(!0);try{l()}finally{ii(!1)}}return m.memoizedState=[g,f],g}function G0(l,f,m){return m===void 0||(xa&1073741824)!==0?l.memoizedState=f:(l.memoizedState=m,l=aC(),$e.lanes|=l,Ra|=l,m)}function rO(l,f,m,g){return Jn(m,f)?m:_o.current!==null?(l=G0(l,m,g),Jn(l,f)||(ln=!0),l):(xa&42)===0?(ln=!0,l.memoizedState=m):(l=aC(),$e.lanes|=l,Ra|=l,f)}function iO(l,f,m,g,E){var A=G.p;G.p=A!==0&&8>A?A:8;var I=j.T,U={};j.T=U,H0(l,!1,f,m);try{var z=E(),ie=j.S;if(ie!==null&&ie(U,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ue=nq(z,g);Pu(l,f,ue,ir(l))}else Pu(l,f,g,ir(l))}catch(he){Pu(l,f,{then:function(){},status:"rejected",reason:he},ir())}finally{G.p=A,j.T=I}}function oq(){}function V0(l,f,m,g){if(l.tag!==5)throw Error(r(476));var E=aO(l).queue;iO(l,E,f,q,m===null?oq:function(){return sO(l),m(g)})}function aO(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:q},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:m},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function sO(l){var f=aO(l).next.queue;Pu(l,f,{},ir())}function q0(){return Cn(Qu)}function oO(){return qt().memoizedState}function lO(){return qt().memoizedState}function lq(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var m=ir();l=va(m);var g=ba(f,l,m);g!==null&&(ar(g,f,m),Ru(g,f,m)),f={cache:x0()},l.payload=f;return}f=f.return}}function uq(l,f,m){var g=ir();m={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Bd(l)?cO(f,m):(m=c0(l,f,m,g),m!==null&&(ar(m,l,g),fO(m,f,g)))}function uO(l,f,m){var g=ir();Pu(l,f,m,g)}function Pu(l,f,m,g){var E={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Bd(l))cO(f,E);else{var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=f.lastRenderedReducer,A!==null))try{var I=f.lastRenderedState,U=A(I,m);if(E.hasEagerState=!0,E.eagerState=U,Jn(U,I))return Ed(l,f,E,0),bt===null&&Sd(),!1}catch{}finally{}if(m=c0(l,f,E,g),m!==null)return ar(m,l,g),fO(m,f,g),!0}return!1}function H0(l,f,m,g){if(g={lane:2,revertLane:Ty(),action:g,hasEagerState:!1,eagerState:null,next:null},Bd(l)){if(f)throw Error(r(479))}else f=c0(l,m,g,2),f!==null&&ar(f,l,2)}function Bd(l){var f=l.alternate;return l===$e||f!==null&&f===$e}function cO(l,f){Ro=Pd=!0;var m=l.pending;m===null?f.next=f:(f.next=m.next,m.next=f),l.pending=f}function fO(l,f,m){if((m&4194048)!==0){var g=f.lanes;g&=l.pendingLanes,m|=g,f.lanes=m,b_(l,m)}}var Fd={readContext:Cn,use:Md,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},dO={readContext:Cn,use:Md,useCallback:function(l,f){return Vn().memoizedState=[l,f===void 0?null:f],l},useContext:Cn,useEffect:WR,useImperativeHandle:function(l,f,m){m=m!=null?m.concat([l]):null,Ud(4194308,4,JR.bind(null,f,l),m)},useLayoutEffect:function(l,f){return Ud(4194308,4,l,f)},useInsertionEffect:function(l,f){Ud(4,2,l,f)},useMemo:function(l,f){var m=Vn();f=f===void 0?null:f;var g=l();if(Ss){ii(!0);try{l()}finally{ii(!1)}}return m.memoizedState=[g,f],g},useReducer:function(l,f,m){var g=Vn();if(m!==void 0){var E=m(f);if(Ss){ii(!0);try{m(f)}finally{ii(!1)}}}else E=f;return g.memoizedState=g.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},g.queue=l,l=l.dispatch=uq.bind(null,$e,l),[g.memoizedState,l]},useRef:function(l){var f=Vn();return l={current:l},f.memoizedState=l},useState:function(l){l=B0(l);var f=l.queue,m=uO.bind(null,$e,f);return f.dispatch=m,[l.memoizedState,m]},useDebugValue:$0,useDeferredValue:function(l,f){var m=Vn();return G0(m,l,f)},useTransition:function(){var l=B0(!1);return l=iO.bind(null,$e,l.queue,!0,!1),Vn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,m){var g=$e,E=Vn();if(nt){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),bt===null)throw Error(r(349));(Xe&124)!==0||PR(g,f,m)}E.memoizedState=m;var A={value:m,getSnapshot:f};return E.queue=A,WR(MR.bind(null,g,A,l),[l]),g.flags|=2048,Co(9,jd(),NR.bind(null,g,A,m,f),null),m},useId:function(){var l=Vn(),f=bt.identifierPrefix;if(nt){var m=Pi,g=Ii;m=(g&~(1<<32-Rn(g)-1)).toString(32)+m,f="«"+f+"R"+m,m=Nd++,0<m&&(f+="H"+m.toString(32)),f+="»"}else m=rq++,f="«"+f+"r"+m.toString(32)+"»";return l.memoizedState=f},useHostTransitionStatus:q0,useFormState:qR,useActionState:qR,useOptimistic:function(l){var f=Vn();f.memoizedState=f.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=H0.bind(null,$e,!0,m),m.dispatch=f,[l,f]},useMemoCache:k0,useCacheRefresh:function(){return Vn().memoizedState=lq.bind(null,$e)}},hO={readContext:Cn,use:Md,useCallback:tO,useContext:Cn,useEffect:XR,useImperativeHandle:eO,useInsertionEffect:QR,useLayoutEffect:ZR,useMemo:nO,useReducer:kd,useRef:YR,useState:function(){return kd(ki)},useDebugValue:$0,useDeferredValue:function(l,f){var m=qt();return rO(m,ct.memoizedState,l,f)},useTransition:function(){var l=kd(ki)[0],f=qt().memoizedState;return[typeof l=="boolean"?l:Du(l),f]},useSyncExternalStore:IR,useId:oO,useHostTransitionStatus:q0,useFormState:HR,useActionState:HR,useOptimistic:function(l,f){var m=qt();return UR(m,ct,l,f)},useMemoCache:k0,useCacheRefresh:lO},cq={readContext:Cn,use:Md,useCallback:tO,useContext:Cn,useEffect:XR,useImperativeHandle:eO,useInsertionEffect:QR,useLayoutEffect:ZR,useMemo:nO,useReducer:U0,useRef:YR,useState:function(){return U0(ki)},useDebugValue:$0,useDeferredValue:function(l,f){var m=qt();return ct===null?G0(m,l,f):rO(m,ct.memoizedState,l,f)},useTransition:function(){var l=U0(ki)[0],f=qt().memoizedState;return[typeof l=="boolean"?l:Du(l),f]},useSyncExternalStore:IR,useId:oO,useHostTransitionStatus:q0,useFormState:KR,useActionState:KR,useOptimistic:function(l,f){var m=qt();return ct!==null?UR(m,ct,l,f):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:k0,useCacheRefresh:lO},Lo=null,Nu=0;function $d(l){var f=Nu;return Nu+=1,Lo===null&&(Lo=[]),AR(Lo,l,f)}function Mu(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function Gd(l,f){throw f.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(f),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function mO(l){var f=l._init;return f(l._payload)}function pO(l){function f(J,X){if(l){var ne=J.deletions;ne===null?(J.deletions=[X],J.flags|=16):ne.push(X)}}function m(J,X){if(!l)return null;for(;X!==null;)f(J,X),X=X.sibling;return null}function g(J){for(var X=new Map;J!==null;)J.key!==null?X.set(J.key,J):X.set(J.index,J),J=J.sibling;return X}function E(J,X){return J=Di(J,X),J.index=0,J.sibling=null,J}function A(J,X,ne){return J.index=ne,l?(ne=J.alternate,ne!==null?(ne=ne.index,ne<X?(J.flags|=67108866,X):ne):(J.flags|=67108866,X)):(J.flags|=1048576,X)}function I(J){return l&&J.alternate===null&&(J.flags|=67108866),J}function U(J,X,ne,de){return X===null||X.tag!==6?(X=d0(ne,J.mode,de),X.return=J,X):(X=E(X,ne),X.return=J,X)}function z(J,X,ne,de){var Ee=ne.type;return Ee===v?ue(J,X,ne.props.children,de,ne.key):X!==null&&(X.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===P&&mO(Ee)===X.type)?(X=E(X,ne.props),Mu(X,ne),X.return=J,X):(X=Ad(ne.type,ne.key,ne.props,null,J.mode,de),Mu(X,ne),X.return=J,X)}function ie(J,X,ne,de){return X===null||X.tag!==4||X.stateNode.containerInfo!==ne.containerInfo||X.stateNode.implementation!==ne.implementation?(X=h0(ne,J.mode,de),X.return=J,X):(X=E(X,ne.children||[]),X.return=J,X)}function ue(J,X,ne,de,Ee){return X===null||X.tag!==7?(X=hs(ne,J.mode,de,Ee),X.return=J,X):(X=E(X,ne),X.return=J,X)}function he(J,X,ne){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=d0(""+X,J.mode,ne),X.return=J,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case p:return ne=Ad(X.type,X.key,X.props,null,J.mode,ne),Mu(ne,X),ne.return=J,ne;case y:return X=h0(X,J.mode,ne),X.return=J,X;case P:var de=X._init;return X=de(X._payload),he(J,X,ne)}if(Y(X)||$(X))return X=hs(X,J.mode,ne,null),X.return=J,X;if(typeof X.then=="function")return he(J,$d(X),ne);if(X.$$typeof===w)return he(J,Od(J,X),ne);Gd(J,X)}return null}function ae(J,X,ne,de){var Ee=X!==null?X.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ee!==null?null:U(J,X,""+ne,de);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case p:return ne.key===Ee?z(J,X,ne,de):null;case y:return ne.key===Ee?ie(J,X,ne,de):null;case P:return Ee=ne._init,ne=Ee(ne._payload),ae(J,X,ne,de)}if(Y(ne)||$(ne))return Ee!==null?null:ue(J,X,ne,de,null);if(typeof ne.then=="function")return ae(J,X,$d(ne),de);if(ne.$$typeof===w)return ae(J,X,Od(J,ne),de);Gd(J,ne)}return null}function se(J,X,ne,de,Ee){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return J=J.get(ne)||null,U(X,J,""+de,Ee);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case p:return J=J.get(de.key===null?ne:de.key)||null,z(X,J,de,Ee);case y:return J=J.get(de.key===null?ne:de.key)||null,ie(X,J,de,Ee);case P:var qe=de._init;return de=qe(de._payload),se(J,X,ne,de,Ee)}if(Y(de)||$(de))return J=J.get(ne)||null,ue(X,J,de,Ee,null);if(typeof de.then=="function")return se(J,X,ne,$d(de),Ee);if(de.$$typeof===w)return se(J,X,ne,Od(X,de),Ee);Gd(X,de)}return null}function Ie(J,X,ne,de){for(var Ee=null,qe=null,we=X,Le=X=0,cn=null;we!==null&&Le<ne.length;Le++){we.index>Le?(cn=we,we=null):cn=we.sibling;var Qe=ae(J,we,ne[Le],de);if(Qe===null){we===null&&(we=cn);break}l&&we&&Qe.alternate===null&&f(J,we),X=A(Qe,X,Le),qe===null?Ee=Qe:qe.sibling=Qe,qe=Qe,we=cn}if(Le===ne.length)return m(J,we),nt&&ps(J,Le),Ee;if(we===null){for(;Le<ne.length;Le++)we=he(J,ne[Le],de),we!==null&&(X=A(we,X,Le),qe===null?Ee=we:qe.sibling=we,qe=we);return nt&&ps(J,Le),Ee}for(we=g(we);Le<ne.length;Le++)cn=se(we,J,Le,ne[Le],de),cn!==null&&(l&&cn.alternate!==null&&we.delete(cn.key===null?Le:cn.key),X=A(cn,X,Le),qe===null?Ee=cn:qe.sibling=cn,qe=cn);return l&&we.forEach(function(ka){return f(J,ka)}),nt&&ps(J,Le),Ee}function Ce(J,X,ne,de){if(ne==null)throw Error(r(151));for(var Ee=null,qe=null,we=X,Le=X=0,cn=null,Qe=ne.next();we!==null&&!Qe.done;Le++,Qe=ne.next()){we.index>Le?(cn=we,we=null):cn=we.sibling;var ka=ae(J,we,Qe.value,de);if(ka===null){we===null&&(we=cn);break}l&&we&&ka.alternate===null&&f(J,we),X=A(ka,X,Le),qe===null?Ee=ka:qe.sibling=ka,qe=ka,we=cn}if(Qe.done)return m(J,we),nt&&ps(J,Le),Ee;if(we===null){for(;!Qe.done;Le++,Qe=ne.next())Qe=he(J,Qe.value,de),Qe!==null&&(X=A(Qe,X,Le),qe===null?Ee=Qe:qe.sibling=Qe,qe=Qe);return nt&&ps(J,Le),Ee}for(we=g(we);!Qe.done;Le++,Qe=ne.next())Qe=se(we,J,Le,Qe.value,de),Qe!==null&&(l&&Qe.alternate!==null&&we.delete(Qe.key===null?Le:Qe.key),X=A(Qe,X,Le),qe===null?Ee=Qe:qe.sibling=Qe,qe=Qe);return l&&we.forEach(function(fH){return f(J,fH)}),nt&&ps(J,Le),Ee}function dt(J,X,ne,de){if(typeof ne=="object"&&ne!==null&&ne.type===v&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case p:e:{for(var Ee=ne.key;X!==null;){if(X.key===Ee){if(Ee=ne.type,Ee===v){if(X.tag===7){m(J,X.sibling),de=E(X,ne.props.children),de.return=J,J=de;break e}}else if(X.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===P&&mO(Ee)===X.type){m(J,X.sibling),de=E(X,ne.props),Mu(de,ne),de.return=J,J=de;break e}m(J,X);break}else f(J,X);X=X.sibling}ne.type===v?(de=hs(ne.props.children,J.mode,de,ne.key),de.return=J,J=de):(de=Ad(ne.type,ne.key,ne.props,null,J.mode,de),Mu(de,ne),de.return=J,J=de)}return I(J);case y:e:{for(Ee=ne.key;X!==null;){if(X.key===Ee)if(X.tag===4&&X.stateNode.containerInfo===ne.containerInfo&&X.stateNode.implementation===ne.implementation){m(J,X.sibling),de=E(X,ne.children||[]),de.return=J,J=de;break e}else{m(J,X);break}else f(J,X);X=X.sibling}de=h0(ne,J.mode,de),de.return=J,J=de}return I(J);case P:return Ee=ne._init,ne=Ee(ne._payload),dt(J,X,ne,de)}if(Y(ne))return Ie(J,X,ne,de);if($(ne)){if(Ee=$(ne),typeof Ee!="function")throw Error(r(150));return ne=Ee.call(ne),Ce(J,X,ne,de)}if(typeof ne.then=="function")return dt(J,X,$d(ne),de);if(ne.$$typeof===w)return dt(J,X,Od(J,ne),de);Gd(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,X!==null&&X.tag===6?(m(J,X.sibling),de=E(X,ne),de.return=J,J=de):(m(J,X),de=d0(ne,J.mode,de),de.return=J,J=de),I(J)):m(J,X)}return function(J,X,ne,de){try{Nu=0;var Ee=dt(J,X,ne,de);return Lo=null,Ee}catch(we){if(we===wu||we===Ld)throw we;var qe=er(29,we,null,J.mode);return qe.lanes=de,qe.return=J,qe}finally{}}}var Do=pO(!0),gO=pO(!1),br=V(null),si=null;function Sa(l){var f=l.alternate;te(Zt,Zt.current&1),te(br,l),si===null&&(f===null||_o.current!==null||f.memoizedState!==null)&&(si=l)}function yO(l){if(l.tag===22){if(te(Zt,Zt.current),te(br,l),si===null){var f=l.alternate;f!==null&&f.memoizedState!==null&&(si=l)}}else Ea()}function Ea(){te(Zt,Zt.current),te(br,br.current)}function ji(l){H(br),si===l&&(si=null),H(Zt)}var Zt=V(0);function Vd(l){for(var f=l;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||My(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function z0(l,f,m,g){f=l.memoizedState,m=m(g,f),m=m==null?f:d({},f,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var K0={enqueueSetState:function(l,f,m){l=l._reactInternals;var g=ir(),E=va(g);E.payload=f,m!=null&&(E.callback=m),f=ba(l,E,g),f!==null&&(ar(f,l,g),Ru(f,l,g))},enqueueReplaceState:function(l,f,m){l=l._reactInternals;var g=ir(),E=va(g);E.tag=1,E.payload=f,m!=null&&(E.callback=m),f=ba(l,E,g),f!==null&&(ar(f,l,g),Ru(f,l,g))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var m=ir(),g=va(m);g.tag=2,f!=null&&(g.callback=f),f=ba(l,g,m),f!==null&&(ar(f,l,m),Ru(f,l,m))}};function vO(l,f,m,g,E,A,I){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,A,I):f.prototype&&f.prototype.isPureReactComponent?!yu(m,g)||!yu(E,A):!0}function bO(l,f,m,g){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,g),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,g),f.state!==l&&K0.enqueueReplaceState(f,f.state,null)}function Es(l,f){var m=f;if("ref"in f){m={};for(var g in f)g!=="ref"&&(m[g]=f[g])}if(l=l.defaultProps){m===f&&(m=d({},m));for(var E in l)m[E]===void 0&&(m[E]=l[E])}return m}var qd=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function xO(l){qd(l)}function SO(l){console.error(l)}function EO(l){qd(l)}function Hd(l,f){try{var m=l.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(g){setTimeout(function(){throw g})}}function TO(l,f,m){try{var g=l.onCaughtError;g(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Y0(l,f,m){return m=va(m),m.tag=3,m.payload={element:null},m.callback=function(){Hd(l,f)},m}function AO(l){return l=va(l),l.tag=3,l}function wO(l,f,m,g){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var A=g.value;l.payload=function(){return E(A)},l.callback=function(){TO(f,m,g)}}var I=m.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(l.callback=function(){TO(f,m,g),typeof E!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function fq(l,f,m,g,E){if(m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(f=m.alternate,f!==null&&Eu(f,m,E,!0),m=br.current,m!==null){switch(m.tag){case 13:return si===null?vy():m.alternate===null&&Nt===0&&(Nt=3),m.flags&=-257,m.flags|=65536,m.lanes=E,g===T0?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([g]):f.add(g),xy(l,g,E)),!1;case 22:return m.flags|=65536,g===T0?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([g])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([g]):m.add(g)),xy(l,g,E)),!1}throw Error(r(435,m.tag))}return xy(l,g,E),vy(),!1}if(nt)return f=br.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=E,g!==g0&&(l=Error(r(422),{cause:g}),Su(pr(l,m)))):(g!==g0&&(f=Error(r(423),{cause:g}),Su(pr(f,m))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,g=pr(g,m),E=Y0(l.stateNode,g,E),_0(l,E),Nt!==4&&(Nt=2)),!1;var A=Error(r(520),{cause:g});if(A=pr(A,m),Gu===null?Gu=[A]:Gu.push(A),Nt!==4&&(Nt=2),f===null)return!0;g=pr(g,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,l=E&-E,m.lanes|=l,l=Y0(m.stateNode,g,l),_0(m,l),!1;case 1:if(f=m.type,A=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Oa===null||!Oa.has(A))))return m.flags|=65536,E&=-E,m.lanes|=E,E=AO(E),wO(E,l,m,g),_0(m,E),!1}m=m.return}while(m!==null);return!1}var _O=Error(r(461)),ln=!1;function bn(l,f,m,g){f.child=l===null?gO(f,null,m,g):Do(f,l.child,m,g)}function RO(l,f,m,g,E){m=m.render;var A=f.ref;if("ref"in g){var I={};for(var U in g)U!=="ref"&&(I[U]=g[U])}else I=g;return bs(f),g=D0(l,f,m,I,A,E),U=I0(),l!==null&&!ln?(P0(l,f,E),Ui(l,f,E)):(nt&&U&&m0(f),f.flags|=1,bn(l,f,g,E),f.child)}function OO(l,f,m,g,E){if(l===null){var A=m.type;return typeof A=="function"&&!f0(A)&&A.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=A,CO(l,f,A,g,E)):(l=Ad(m.type,null,g,f,f.mode,E),l.ref=f.ref,l.return=f,f.child=l)}if(A=l.child,!ny(l,E)){var I=A.memoizedProps;if(m=m.compare,m=m!==null?m:yu,m(I,g)&&l.ref===f.ref)return Ui(l,f,E)}return f.flags|=1,l=Di(A,g),l.ref=f.ref,l.return=f,f.child=l}function CO(l,f,m,g,E){if(l!==null){var A=l.memoizedProps;if(yu(A,g)&&l.ref===f.ref)if(ln=!1,f.pendingProps=g=A,ny(l,E))(l.flags&131072)!==0&&(ln=!0);else return f.lanes=l.lanes,Ui(l,f,E)}return W0(l,f,m,g,E)}function LO(l,f,m){var g=f.pendingProps,E=g.children,A=l!==null?l.memoizedState:null;if(g.mode==="hidden"){if((f.flags&128)!==0){if(g=A!==null?A.baseLanes|m:m,l!==null){for(E=f.child=l.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;f.childLanes=A&~g}else f.childLanes=0,f.child=null;return DO(l,f,g,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&Cd(f,A!==null?A.cachePool:null),A!==null?CR(f,A):O0(),yO(f);else return f.lanes=f.childLanes=536870912,DO(l,f,A!==null?A.baseLanes|m:m,m)}else A!==null?(Cd(f,A.cachePool),CR(f,A),Ea(),f.memoizedState=null):(l!==null&&Cd(f,null),O0(),Ea());return bn(l,f,E,m),f.child}function DO(l,f,m,g){var E=E0();return E=E===null?null:{parent:Qt._currentValue,pool:E},f.memoizedState={baseLanes:m,cachePool:E},l!==null&&Cd(f,null),O0(),yO(f),l!==null&&Eu(l,f,g,!0),null}function zd(l,f){var m=f.ref;if(m===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(l===null||l.ref!==m)&&(f.flags|=4194816)}}function W0(l,f,m,g,E){return bs(f),m=D0(l,f,m,g,void 0,E),g=I0(),l!==null&&!ln?(P0(l,f,E),Ui(l,f,E)):(nt&&g&&m0(f),f.flags|=1,bn(l,f,m,E),f.child)}function IO(l,f,m,g,E,A){return bs(f),f.updateQueue=null,m=DR(f,g,m,E),LR(l),g=I0(),l!==null&&!ln?(P0(l,f,A),Ui(l,f,A)):(nt&&g&&m0(f),f.flags|=1,bn(l,f,m,A),f.child)}function PO(l,f,m,g,E){if(bs(f),f.stateNode===null){var A=So,I=m.contextType;typeof I=="object"&&I!==null&&(A=Cn(I)),A=new m(g,A),f.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=K0,f.stateNode=A,A._reactInternals=f,A=f.stateNode,A.props=g,A.state=f.memoizedState,A.refs={},A0(f),I=m.contextType,A.context=typeof I=="object"&&I!==null?Cn(I):So,A.state=f.memoizedState,I=m.getDerivedStateFromProps,typeof I=="function"&&(z0(f,m,I,g),A.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(I=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),I!==A.state&&K0.enqueueReplaceState(A,A.state,null),Cu(f,g,A,E),Ou(),A.state=f.memoizedState),typeof A.componentDidMount=="function"&&(f.flags|=4194308),g=!0}else if(l===null){A=f.stateNode;var U=f.memoizedProps,z=Es(m,U);A.props=z;var ie=A.context,ue=m.contextType;I=So,typeof ue=="object"&&ue!==null&&(I=Cn(ue));var he=m.getDerivedStateFromProps;ue=typeof he=="function"||typeof A.getSnapshotBeforeUpdate=="function",U=f.pendingProps!==U,ue||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(U||ie!==I)&&bO(f,A,g,I),ya=!1;var ae=f.memoizedState;A.state=ae,Cu(f,g,A,E),Ou(),ie=f.memoizedState,U||ae!==ie||ya?(typeof he=="function"&&(z0(f,m,he,g),ie=f.memoizedState),(z=ya||vO(f,m,z,g,ae,ie,I))?(ue||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(f.flags|=4194308)):(typeof A.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=g,f.memoizedState=ie),A.props=g,A.state=ie,A.context=I,g=z):(typeof A.componentDidMount=="function"&&(f.flags|=4194308),g=!1)}else{A=f.stateNode,w0(l,f),I=f.memoizedProps,ue=Es(m,I),A.props=ue,he=f.pendingProps,ae=A.context,ie=m.contextType,z=So,typeof ie=="object"&&ie!==null&&(z=Cn(ie)),U=m.getDerivedStateFromProps,(ie=typeof U=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(I!==he||ae!==z)&&bO(f,A,g,z),ya=!1,ae=f.memoizedState,A.state=ae,Cu(f,g,A,E),Ou();var se=f.memoizedState;I!==he||ae!==se||ya||l!==null&&l.dependencies!==null&&Rd(l.dependencies)?(typeof U=="function"&&(z0(f,m,U,g),se=f.memoizedState),(ue=ya||vO(f,m,ue,g,ae,se,z)||l!==null&&l.dependencies!==null&&Rd(l.dependencies))?(ie||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,se,z),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,se,z)),typeof A.componentDidUpdate=="function"&&(f.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof A.componentDidUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=1024),f.memoizedProps=g,f.memoizedState=se),A.props=g,A.state=se,A.context=z,g=ue):(typeof A.componentDidUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=1024),g=!1)}return A=g,zd(l,f),g=(f.flags&128)!==0,A||g?(A=f.stateNode,m=g&&typeof m.getDerivedStateFromError!="function"?null:A.render(),f.flags|=1,l!==null&&g?(f.child=Do(f,l.child,null,E),f.child=Do(f,null,m,E)):bn(l,f,m,E),f.memoizedState=A.state,l=f.child):l=Ui(l,f,E),l}function NO(l,f,m,g){return xu(),f.flags|=256,bn(l,f,m,g),f.child}var X0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Q0(l){return{baseLanes:l,cachePool:SR()}}function Z0(l,f,m){return l=l!==null?l.childLanes&~m:0,f&&(l|=xr),l}function MO(l,f,m){var g=f.pendingProps,E=!1,A=(f.flags&128)!==0,I;if((I=A)||(I=l!==null&&l.memoizedState===null?!1:(Zt.current&2)!==0),I&&(E=!0,f.flags&=-129),I=(f.flags&32)!==0,f.flags&=-33,l===null){if(nt){if(E?Sa(f):Ea(),nt){var U=Pt,z;if(z=U){e:{for(z=U,U=ai;z.nodeType!==8;){if(!U){U=null;break e}if(z=Gr(z.nextSibling),z===null){U=null;break e}}U=z}U!==null?(f.memoizedState={dehydrated:U,treeContext:ms!==null?{id:Ii,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},z=er(18,null,null,0),z.stateNode=U,z.return=f,f.child=z,jn=f,Pt=null,z=!0):z=!1}z||ys(f)}if(U=f.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return My(U)?f.lanes=32:f.lanes=536870912,null;ji(f)}return U=g.children,g=g.fallback,E?(Ea(),E=f.mode,U=Kd({mode:"hidden",children:U},E),g=hs(g,E,m,null),U.return=f,g.return=f,U.sibling=g,f.child=U,E=f.child,E.memoizedState=Q0(m),E.childLanes=Z0(l,I,m),f.memoizedState=X0,g):(Sa(f),J0(f,U))}if(z=l.memoizedState,z!==null&&(U=z.dehydrated,U!==null)){if(A)f.flags&256?(Sa(f),f.flags&=-257,f=ey(l,f,m)):f.memoizedState!==null?(Ea(),f.child=l.child,f.flags|=128,f=null):(Ea(),E=g.fallback,U=f.mode,g=Kd({mode:"visible",children:g.children},U),E=hs(E,U,m,null),E.flags|=2,g.return=f,E.return=f,g.sibling=E,f.child=g,Do(f,l.child,null,m),g=f.child,g.memoizedState=Q0(m),g.childLanes=Z0(l,I,m),f.memoizedState=X0,f=E);else if(Sa(f),My(U)){if(I=U.nextSibling&&U.nextSibling.dataset,I)var ie=I.dgst;I=ie,g=Error(r(419)),g.stack="",g.digest=I,Su({value:g,source:null,stack:null}),f=ey(l,f,m)}else if(ln||Eu(l,f,m,!1),I=(m&l.childLanes)!==0,ln||I){if(I=bt,I!==null&&(g=m&-m,g=(g&42)!==0?1:kg(g),g=(g&(I.suspendedLanes|m))!==0?0:g,g!==0&&g!==z.retryLane))throw z.retryLane=g,xo(l,g),ar(I,l,g),_O;U.data==="$?"||vy(),f=ey(l,f,m)}else U.data==="$?"?(f.flags|=192,f.child=l.child,f=null):(l=z.treeContext,Pt=Gr(U.nextSibling),jn=f,nt=!0,gs=null,ai=!1,l!==null&&(yr[vr++]=Ii,yr[vr++]=Pi,yr[vr++]=ms,Ii=l.id,Pi=l.overflow,ms=f),f=J0(f,g.children),f.flags|=4096);return f}return E?(Ea(),E=g.fallback,U=f.mode,z=l.child,ie=z.sibling,g=Di(z,{mode:"hidden",children:g.children}),g.subtreeFlags=z.subtreeFlags&65011712,ie!==null?E=Di(ie,E):(E=hs(E,U,m,null),E.flags|=2),E.return=f,g.return=f,g.sibling=E,f.child=g,g=E,E=f.child,U=l.child.memoizedState,U===null?U=Q0(m):(z=U.cachePool,z!==null?(ie=Qt._currentValue,z=z.parent!==ie?{parent:ie,pool:ie}:z):z=SR(),U={baseLanes:U.baseLanes|m,cachePool:z}),E.memoizedState=U,E.childLanes=Z0(l,I,m),f.memoizedState=X0,g):(Sa(f),m=l.child,l=m.sibling,m=Di(m,{mode:"visible",children:g.children}),m.return=f,m.sibling=null,l!==null&&(I=f.deletions,I===null?(f.deletions=[l],f.flags|=16):I.push(l)),f.child=m,f.memoizedState=null,m)}function J0(l,f){return f=Kd({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Kd(l,f){return l=er(22,l,null,f),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function ey(l,f,m){return Do(f,l.child,null,m),l=J0(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function kO(l,f,m){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f),v0(l.return,f,m)}function ty(l,f,m,g,E){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:g,tail:m,tailMode:E}:(A.isBackwards=f,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=m,A.tailMode=E)}function jO(l,f,m){var g=f.pendingProps,E=g.revealOrder,A=g.tail;if(bn(l,f,g.children,m),g=Zt.current,(g&2)!==0)g=g&1|2,f.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&kO(l,m,f);else if(l.tag===19)kO(l,m,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}g&=1}switch(te(Zt,g),E){case"forwards":for(m=f.child,E=null;m!==null;)l=m.alternate,l!==null&&Vd(l)===null&&(E=m),m=m.sibling;m=E,m===null?(E=f.child,f.child=null):(E=m.sibling,m.sibling=null),ty(f,!1,E,m,A);break;case"backwards":for(m=null,E=f.child,f.child=null;E!==null;){if(l=E.alternate,l!==null&&Vd(l)===null){f.child=E;break}l=E.sibling,E.sibling=m,m=E,E=l}ty(f,!0,m,null,A);break;case"together":ty(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Ui(l,f,m){if(l!==null&&(f.dependencies=l.dependencies),Ra|=f.lanes,(m&f.childLanes)===0)if(l!==null){if(Eu(l,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(r(153));if(f.child!==null){for(l=f.child,m=Di(l,l.pendingProps),f.child=m,m.return=f;l.sibling!==null;)l=l.sibling,m=m.sibling=Di(l,l.pendingProps),m.return=f;m.sibling=null}return f.child}function ny(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&Rd(l)))}function dq(l,f,m){switch(f.tag){case 3:Re(f,f.stateNode.containerInfo),ga(f,Qt,l.memoizedState.cache),xu();break;case 27:case 5:Ae(f);break;case 4:Re(f,f.stateNode.containerInfo);break;case 10:ga(f,f.type,f.memoizedProps.value);break;case 13:var g=f.memoizedState;if(g!==null)return g.dehydrated!==null?(Sa(f),f.flags|=128,null):(m&f.child.childLanes)!==0?MO(l,f,m):(Sa(f),l=Ui(l,f,m),l!==null?l.sibling:null);Sa(f);break;case 19:var E=(l.flags&128)!==0;if(g=(m&f.childLanes)!==0,g||(Eu(l,f,m,!1),g=(m&f.childLanes)!==0),E){if(g)return jO(l,f,m);f.flags|=128}if(E=f.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),te(Zt,Zt.current),g)break;return null;case 22:case 23:return f.lanes=0,LO(l,f,m);case 24:ga(f,Qt,l.memoizedState.cache)}return Ui(l,f,m)}function UO(l,f,m){if(l!==null)if(l.memoizedProps!==f.pendingProps)ln=!0;else{if(!ny(l,m)&&(f.flags&128)===0)return ln=!1,dq(l,f,m);ln=(l.flags&131072)!==0}else ln=!1,nt&&(f.flags&1048576)!==0&&mR(f,_d,f.index);switch(f.lanes=0,f.tag){case 16:e:{l=f.pendingProps;var g=f.elementType,E=g._init;if(g=E(g._payload),f.type=g,typeof g=="function")f0(g)?(l=Es(g,l),f.tag=1,f=PO(null,f,g,l,m)):(f.tag=0,f=W0(null,f,g,l,m));else{if(g!=null){if(E=g.$$typeof,E===O){f.tag=11,f=RO(null,f,g,l,m);break e}else if(E===L){f.tag=14,f=OO(null,f,g,l,m);break e}}throw f=W(g)||g,Error(r(306,f,""))}}return f;case 0:return W0(l,f,f.type,f.pendingProps,m);case 1:return g=f.type,E=Es(g,f.pendingProps),PO(l,f,g,E,m);case 3:e:{if(Re(f,f.stateNode.containerInfo),l===null)throw Error(r(387));g=f.pendingProps;var A=f.memoizedState;E=A.element,w0(l,f),Cu(f,g,null,m);var I=f.memoizedState;if(g=I.cache,ga(f,Qt,g),g!==A.cache&&b0(f,[Qt],m,!0),Ou(),g=I.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:I.cache},f.updateQueue.baseState=A,f.memoizedState=A,f.flags&256){f=NO(l,f,g,m);break e}else if(g!==E){E=pr(Error(r(424)),f),Su(E),f=NO(l,f,g,m);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Pt=Gr(l.firstChild),jn=f,nt=!0,gs=null,ai=!0,m=gO(f,null,g,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(xu(),g===E){f=Ui(l,f,m);break e}bn(l,f,g,m)}f=f.child}return f;case 26:return zd(l,f),l===null?(m=GC(f.type,null,f.pendingProps,null))?f.memoizedState=m:nt||(m=f.type,l=f.pendingProps,g=oh(ge.current).createElement(m),g[On]=f,g[$n]=l,Sn(g,m,l),on(g),f.stateNode=g):f.memoizedState=GC(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return Ae(f),l===null&&nt&&(g=f.stateNode=BC(f.type,f.pendingProps,ge.current),jn=f,ai=!0,E=Pt,Da(f.type)?(ky=E,Pt=Gr(g.firstChild)):Pt=E),bn(l,f,f.pendingProps.children,m),zd(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&nt&&((E=g=Pt)&&(g=Fq(g,f.type,f.pendingProps,ai),g!==null?(f.stateNode=g,jn=f,Pt=Gr(g.firstChild),ai=!1,E=!0):E=!1),E||ys(f)),Ae(f),E=f.type,A=f.pendingProps,I=l!==null?l.memoizedProps:null,g=A.children,Iy(E,A)?g=null:I!==null&&Iy(E,I)&&(f.flags|=32),f.memoizedState!==null&&(E=D0(l,f,iq,null,null,m),Qu._currentValue=E),zd(l,f),bn(l,f,g,m),f.child;case 6:return l===null&&nt&&((l=m=Pt)&&(m=$q(m,f.pendingProps,ai),m!==null?(f.stateNode=m,jn=f,Pt=null,l=!0):l=!1),l||ys(f)),null;case 13:return MO(l,f,m);case 4:return Re(f,f.stateNode.containerInfo),g=f.pendingProps,l===null?f.child=Do(f,null,g,m):bn(l,f,g,m),f.child;case 11:return RO(l,f,f.type,f.pendingProps,m);case 7:return bn(l,f,f.pendingProps,m),f.child;case 8:return bn(l,f,f.pendingProps.children,m),f.child;case 12:return bn(l,f,f.pendingProps.children,m),f.child;case 10:return g=f.pendingProps,ga(f,f.type,g.value),bn(l,f,g.children,m),f.child;case 9:return E=f.type._context,g=f.pendingProps.children,bs(f),E=Cn(E),g=g(E),f.flags|=1,bn(l,f,g,m),f.child;case 14:return OO(l,f,f.type,f.pendingProps,m);case 15:return CO(l,f,f.type,f.pendingProps,m);case 19:return jO(l,f,m);case 31:return g=f.pendingProps,m=f.mode,g={mode:g.mode,children:g.children},l===null?(m=Kd(g,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=Di(l.child,g),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return LO(l,f,m);case 24:return bs(f),g=Cn(Qt),l===null?(E=E0(),E===null&&(E=bt,A=x0(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=m),E=A),f.memoizedState={parent:g,cache:E},A0(f),ga(f,Qt,E)):((l.lanes&m)!==0&&(w0(l,f),Cu(f,null,null,m),Ou()),E=l.memoizedState,A=f.memoizedState,E.parent!==g?(E={parent:g,cache:g},f.memoizedState=E,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=E),ga(f,Qt,g)):(g=A.cache,ga(f,Qt,g),g!==E.cache&&b0(f,[Qt],m,!0))),bn(l,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Bi(l){l.flags|=4}function BO(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!KC(f)){if(f=br.current,f!==null&&((Xe&4194048)===Xe?si!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||f!==si))throw _u=T0,ER;l.flags|=8192}}function Yd(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?y_():536870912,l.lanes|=f,Mo|=f)}function ku(l,f){if(!nt)switch(l.tailMode){case"hidden":f=l.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Ot(l){var f=l.alternate!==null&&l.alternate.child===l.child,m=0,g=0;if(f)for(var E=l.child;E!==null;)m|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)m|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=g,l.childLanes=m,f}function hq(l,f,m){var g=f.pendingProps;switch(p0(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(f),null;case 1:return Ot(f),null;case 3:return m=f.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),Mi(Qt),pe(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(bu(f)?Bi(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,yR())),Ot(f),null;case 26:return m=f.memoizedState,l===null?(Bi(f),m!==null?(Ot(f),BO(f,m)):(Ot(f),f.flags&=-16777217)):m?m!==l.memoizedState?(Bi(f),Ot(f),BO(f,m)):(Ot(f),f.flags&=-16777217):(l.memoizedProps!==g&&Bi(f),Ot(f),f.flags&=-16777217),null;case 27:Oe(f),m=ge.current;var E=f.type;if(l!==null&&f.stateNode!=null)l.memoizedProps!==g&&Bi(f);else{if(!g){if(f.stateNode===null)throw Error(r(166));return Ot(f),null}l=ce.current,bu(f)?pR(f):(l=BC(E,g,m),f.stateNode=l,Bi(f))}return Ot(f),null;case 5:if(Oe(f),m=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==g&&Bi(f);else{if(!g){if(f.stateNode===null)throw Error(r(166));return Ot(f),null}if(l=ce.current,bu(f))pR(f);else{switch(E=oh(ge.current),l){case 1:l=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:l=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":l=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":l=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":l=E.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof g.is=="string"?E.createElement("select",{is:g.is}):E.createElement("select"),g.multiple?l.multiple=!0:g.size&&(l.size=g.size);break;default:l=typeof g.is=="string"?E.createElement(m,{is:g.is}):E.createElement(m)}}l[On]=f,l[$n]=g;e:for(E=f.child;E!==null;){if(E.tag===5||E.tag===6)l.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break e;for(;E.sibling===null;){if(E.return===null||E.return===f)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}f.stateNode=l;e:switch(Sn(l,m,g),m){case"button":case"input":case"select":case"textarea":l=!!g.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bi(f)}}return Ot(f),f.flags&=-16777217,null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==g&&Bi(f);else{if(typeof g!="string"&&f.stateNode===null)throw Error(r(166));if(l=ge.current,bu(f)){if(l=f.stateNode,m=f.memoizedProps,g=null,E=jn,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}l[On]=f,l=!!(l.nodeValue===m||g!==null&&g.suppressHydrationWarning===!0||IC(l.nodeValue,m)),l||ys(f)}else l=oh(l).createTextNode(g),l[On]=f,f.stateNode=l}return Ot(f),null;case 13:if(g=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=bu(f),g!==null&&g.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=f.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[On]=f}else xu(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ot(f),E=!1}else E=yR(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return f.flags&256?(ji(f),f):(ji(f),null)}if(ji(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=g!==null,l=l!==null&&l.memoizedState!==null,m){g=f.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool);var A=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==E&&(g.flags|=2048)}return m!==l&&m&&(f.child.flags|=8192),Yd(f,f.updateQueue),Ot(f),null;case 4:return pe(),l===null&&Ry(f.stateNode.containerInfo),Ot(f),null;case 10:return Mi(f.type),Ot(f),null;case 19:if(H(Zt),E=f.memoizedState,E===null)return Ot(f),null;if(g=(f.flags&128)!==0,A=E.rendering,A===null)if(g)ku(E,!1);else{if(Nt!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(A=Vd(l),A!==null){for(f.flags|=128,ku(E,!1),l=A.updateQueue,f.updateQueue=l,Yd(f,l),f.subtreeFlags=0,l=m,m=f.child;m!==null;)hR(m,l),m=m.sibling;return te(Zt,Zt.current&1|2),f.child}l=l.sibling}E.tail!==null&&je()>Qd&&(f.flags|=128,g=!0,ku(E,!1),f.lanes=4194304)}else{if(!g)if(l=Vd(A),l!==null){if(f.flags|=128,g=!0,l=l.updateQueue,f.updateQueue=l,Yd(f,l),ku(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!nt)return Ot(f),null}else 2*je()-E.renderingStartTime>Qd&&m!==536870912&&(f.flags|=128,g=!0,ku(E,!1),f.lanes=4194304);E.isBackwards?(A.sibling=f.child,f.child=A):(l=E.last,l!==null?l.sibling=A:f.child=A,E.last=A)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=je(),f.sibling=null,l=Zt.current,te(Zt,g?l&1|2:l&1),f):(Ot(f),null);case 22:case 23:return ji(f),C0(),g=f.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(f.flags|=8192):g&&(f.flags|=8192),g?(m&536870912)!==0&&(f.flags&128)===0&&(Ot(f),f.subtreeFlags&6&&(f.flags|=8192)):Ot(f),m=f.updateQueue,m!==null&&Yd(f,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),g=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(g=f.memoizedState.cachePool.pool),g!==m&&(f.flags|=2048),l!==null&&H(xs),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),Mi(Qt),Ot(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function mq(l,f){switch(p0(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return Mi(Qt),pe(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return Oe(f),null;case 13:if(ji(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(r(340));xu()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return H(Zt),null;case 4:return pe(),null;case 10:return Mi(f.type),null;case 22:case 23:return ji(f),C0(),l!==null&&H(xs),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return Mi(Qt),null;case 25:return null;default:return null}}function FO(l,f){switch(p0(f),f.tag){case 3:Mi(Qt),pe();break;case 26:case 27:case 5:Oe(f);break;case 4:pe();break;case 13:ji(f);break;case 19:H(Zt);break;case 10:Mi(f.type);break;case 22:case 23:ji(f),C0(),l!==null&&H(xs);break;case 24:Mi(Qt)}}function ju(l,f){try{var m=f.updateQueue,g=m!==null?m.lastEffect:null;if(g!==null){var E=g.next;m=E;do{if((m.tag&l)===l){g=void 0;var A=m.create,I=m.inst;g=A(),I.destroy=g}m=m.next}while(m!==E)}}catch(U){pt(f,f.return,U)}}function Ta(l,f,m){try{var g=f.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var A=E.next;g=A;do{if((g.tag&l)===l){var I=g.inst,U=I.destroy;if(U!==void 0){I.destroy=void 0,E=f;var z=m,ie=U;try{ie()}catch(ue){pt(E,z,ue)}}}g=g.next}while(g!==A)}}catch(ue){pt(f,f.return,ue)}}function $O(l){var f=l.updateQueue;if(f!==null){var m=l.stateNode;try{OR(f,m)}catch(g){pt(l,l.return,g)}}}function GO(l,f,m){m.props=Es(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(g){pt(l,f,g)}}function Uu(l,f){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof m=="function"?l.refCleanup=m(g):m.current=g}}catch(E){pt(l,f,E)}}function oi(l,f){var m=l.ref,g=l.refCleanup;if(m!==null)if(typeof g=="function")try{g()}catch(E){pt(l,f,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){pt(l,f,E)}else m.current=null}function VO(l){var f=l.type,m=l.memoizedProps,g=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&g.focus();break e;case"img":m.src?g.src=m.src:m.srcSet&&(g.srcset=m.srcSet)}}catch(E){pt(l,l.return,E)}}function ry(l,f,m){try{var g=l.stateNode;Mq(g,l.type,m,f),g[$n]=f}catch(E){pt(l,l.return,E)}}function qO(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Da(l.type)||l.tag===4}function iy(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||qO(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Da(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function ay(l,f,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(l),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=sh));else if(g!==4&&(g===27&&Da(l.type)&&(m=l.stateNode,f=null),l=l.child,l!==null))for(ay(l,f,m),l=l.sibling;l!==null;)ay(l,f,m),l=l.sibling}function Wd(l,f,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,f?m.insertBefore(l,f):m.appendChild(l);else if(g!==4&&(g===27&&Da(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(Wd(l,f,m),l=l.sibling;l!==null;)Wd(l,f,m),l=l.sibling}function HO(l){var f=l.stateNode,m=l.memoizedProps;try{for(var g=l.type,E=f.attributes;E.length;)f.removeAttributeNode(E[0]);Sn(f,g,m),f[On]=l,f[$n]=m}catch(A){pt(l,l.return,A)}}var Fi=!1,Ut=!1,sy=!1,zO=typeof WeakSet=="function"?WeakSet:Set,un=null;function pq(l,f){if(l=l.containerInfo,Ly=hh,l=rR(l),i0(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var g=m.getSelection&&m.getSelection();if(g&&g.rangeCount!==0){m=g.anchorNode;var E=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var I=0,U=-1,z=-1,ie=0,ue=0,he=l,ae=null;t:for(;;){for(var se;he!==m||E!==0&&he.nodeType!==3||(U=I+E),he!==A||g!==0&&he.nodeType!==3||(z=I+g),he.nodeType===3&&(I+=he.nodeValue.length),(se=he.firstChild)!==null;)ae=he,he=se;for(;;){if(he===l)break t;if(ae===m&&++ie===E&&(U=I),ae===A&&++ue===g&&(z=I),(se=he.nextSibling)!==null)break;he=ae,ae=he.parentNode}he=se}m=U===-1||z===-1?null:{start:U,end:z}}else m=null}m=m||{start:0,end:0}}else m=null;for(Dy={focusedElem:l,selectionRange:m},hh=!1,un=f;un!==null;)if(f=un,l=f.child,(f.subtreeFlags&1024)!==0&&l!==null)l.return=f,un=l;else for(;un!==null;){switch(f=un,A=f.alternate,l=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&A!==null){l=void 0,m=f,E=A.memoizedProps,A=A.memoizedState,g=m.stateNode;try{var Ie=Es(m.type,E,m.elementType===m.type);l=g.getSnapshotBeforeUpdate(Ie,A),g.__reactInternalSnapshotBeforeUpdate=l}catch(Ce){pt(m,m.return,Ce)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,m=l.nodeType,m===9)Ny(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Ny(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=f.sibling,l!==null){l.return=f.return,un=l;break}un=f.return}}function KO(l,f,m){var g=m.flags;switch(m.tag){case 0:case 11:case 15:Aa(l,m),g&4&&ju(5,m);break;case 1:if(Aa(l,m),g&4)if(l=m.stateNode,f===null)try{l.componentDidMount()}catch(I){pt(m,m.return,I)}else{var E=Es(m.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(E,f,l.__reactInternalSnapshotBeforeUpdate)}catch(I){pt(m,m.return,I)}}g&64&&$O(m),g&512&&Uu(m,m.return);break;case 3:if(Aa(l,m),g&64&&(l=m.updateQueue,l!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{OR(l,f)}catch(I){pt(m,m.return,I)}}break;case 27:f===null&&g&4&&HO(m);case 26:case 5:Aa(l,m),f===null&&g&4&&VO(m),g&512&&Uu(m,m.return);break;case 12:Aa(l,m);break;case 13:Aa(l,m),g&4&&XO(l,m),g&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=Aq.bind(null,m),Gq(l,m))));break;case 22:if(g=m.memoizedState!==null||Fi,!g){f=f!==null&&f.memoizedState!==null||Ut,E=Fi;var A=Ut;Fi=g,(Ut=f)&&!A?wa(l,m,(m.subtreeFlags&8772)!==0):Aa(l,m),Fi=E,Ut=A}break;case 30:break;default:Aa(l,m)}}function YO(l){var f=l.alternate;f!==null&&(l.alternate=null,YO(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&Bg(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Tt=null,qn=!1;function $i(l,f,m){for(m=m.child;m!==null;)WO(l,f,m),m=m.sibling}function WO(l,f,m){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Br,m)}catch{}switch(m.tag){case 26:Ut||oi(m,f),$i(l,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Ut||oi(m,f);var g=Tt,E=qn;Da(m.type)&&(Tt=m.stateNode,qn=!1),$i(l,f,m),Ku(m.stateNode),Tt=g,qn=E;break;case 5:Ut||oi(m,f);case 6:if(g=Tt,E=qn,Tt=null,$i(l,f,m),Tt=g,qn=E,Tt!==null)if(qn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(m.stateNode)}catch(A){pt(m,f,A)}else try{Tt.removeChild(m.stateNode)}catch(A){pt(m,f,A)}break;case 18:Tt!==null&&(qn?(l=Tt,jC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),tc(l)):jC(Tt,m.stateNode));break;case 4:g=Tt,E=qn,Tt=m.stateNode.containerInfo,qn=!0,$i(l,f,m),Tt=g,qn=E;break;case 0:case 11:case 14:case 15:Ut||Ta(2,m,f),Ut||Ta(4,m,f),$i(l,f,m);break;case 1:Ut||(oi(m,f),g=m.stateNode,typeof g.componentWillUnmount=="function"&&GO(m,f,g)),$i(l,f,m);break;case 21:$i(l,f,m);break;case 22:Ut=(g=Ut)||m.memoizedState!==null,$i(l,f,m),Ut=g;break;default:$i(l,f,m)}}function XO(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{tc(l)}catch(m){pt(f,f.return,m)}}function gq(l){switch(l.tag){case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new zO),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new zO),f;default:throw Error(r(435,l.tag))}}function oy(l,f){var m=gq(l);f.forEach(function(g){var E=wq.bind(null,l,g);m.has(g)||(m.add(g),g.then(E,E))})}function tr(l,f){var m=f.deletions;if(m!==null)for(var g=0;g<m.length;g++){var E=m[g],A=l,I=f,U=I;e:for(;U!==null;){switch(U.tag){case 27:if(Da(U.type)){Tt=U.stateNode,qn=!1;break e}break;case 5:Tt=U.stateNode,qn=!1;break e;case 3:case 4:Tt=U.stateNode.containerInfo,qn=!0;break e}U=U.return}if(Tt===null)throw Error(r(160));WO(A,I,E),Tt=null,qn=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)QO(f,l),f=f.sibling}var $r=null;function QO(l,f){var m=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:tr(f,l),nr(l),g&4&&(Ta(3,l,l.return),ju(3,l),Ta(5,l,l.return));break;case 1:tr(f,l),nr(l),g&512&&(Ut||m===null||oi(m,m.return)),g&64&&Fi&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?g:m.concat(g))));break;case 26:var E=$r;if(tr(f,l),nr(l),g&512&&(Ut||m===null||oi(m,m.return)),g&4){var A=m!==null?m.memoizedState:null;if(g=l.memoizedState,m===null)if(g===null)if(l.stateNode===null){e:{g=l.type,m=l.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":A=E.getElementsByTagName("title")[0],(!A||A[lu]||A[On]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(g),E.head.insertBefore(A,E.querySelector("head > title"))),Sn(A,g,m),A[On]=l,on(A),g=A;break e;case"link":var I=HC("link","href",E).get(g+(m.href||""));if(I){for(var U=0;U<I.length;U++)if(A=I[U],A.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&A.getAttribute("rel")===(m.rel==null?null:m.rel)&&A.getAttribute("title")===(m.title==null?null:m.title)&&A.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){I.splice(U,1);break t}}A=E.createElement(g),Sn(A,g,m),E.head.appendChild(A);break;case"meta":if(I=HC("meta","content",E).get(g+(m.content||""))){for(U=0;U<I.length;U++)if(A=I[U],A.getAttribute("content")===(m.content==null?null:""+m.content)&&A.getAttribute("name")===(m.name==null?null:m.name)&&A.getAttribute("property")===(m.property==null?null:m.property)&&A.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&A.getAttribute("charset")===(m.charSet==null?null:m.charSet)){I.splice(U,1);break t}}A=E.createElement(g),Sn(A,g,m),E.head.appendChild(A);break;default:throw Error(r(468,g))}A[On]=l,on(A),g=A}l.stateNode=g}else zC(E,l.type,l.stateNode);else l.stateNode=qC(E,g,l.memoizedProps);else A!==g?(A===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):A.count--,g===null?zC(E,l.type,l.stateNode):qC(E,g,l.memoizedProps)):g===null&&l.stateNode!==null&&ry(l,l.memoizedProps,m.memoizedProps)}break;case 27:tr(f,l),nr(l),g&512&&(Ut||m===null||oi(m,m.return)),m!==null&&g&4&&ry(l,l.memoizedProps,m.memoizedProps);break;case 5:if(tr(f,l),nr(l),g&512&&(Ut||m===null||oi(m,m.return)),l.flags&32){E=l.stateNode;try{ho(E,"")}catch(se){pt(l,l.return,se)}}g&4&&l.stateNode!=null&&(E=l.memoizedProps,ry(l,E,m!==null?m.memoizedProps:E)),g&1024&&(sy=!0);break;case 6:if(tr(f,l),nr(l),g&4){if(l.stateNode===null)throw Error(r(162));g=l.memoizedProps,m=l.stateNode;try{m.nodeValue=g}catch(se){pt(l,l.return,se)}}break;case 3:if(ch=null,E=$r,$r=lh(f.containerInfo),tr(f,l),$r=E,nr(l),g&4&&m!==null&&m.memoizedState.isDehydrated)try{tc(f.containerInfo)}catch(se){pt(l,l.return,se)}sy&&(sy=!1,ZO(l));break;case 4:g=$r,$r=lh(l.stateNode.containerInfo),tr(f,l),nr(l),$r=g;break;case 12:tr(f,l),nr(l);break;case 13:tr(f,l),nr(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(hy=je()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,oy(l,g)));break;case 22:E=l.memoizedState!==null;var z=m!==null&&m.memoizedState!==null,ie=Fi,ue=Ut;if(Fi=ie||E,Ut=ue||z,tr(f,l),Ut=ue,Fi=ie,nr(l),g&8192)e:for(f=l.stateNode,f._visibility=E?f._visibility&-2:f._visibility|1,E&&(m===null||z||Fi||Ut||Ts(l)),m=null,f=l;;){if(f.tag===5||f.tag===26){if(m===null){z=m=f;try{if(A=z.stateNode,E)I=A.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{U=z.stateNode;var he=z.memoizedProps.style,ae=he!=null&&he.hasOwnProperty("display")?he.display:null;U.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(se){pt(z,z.return,se)}}}else if(f.tag===6){if(m===null){z=f;try{z.stateNode.nodeValue=E?"":z.memoizedProps}catch(se){pt(z,z.return,se)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}g&4&&(g=l.updateQueue,g!==null&&(m=g.retryQueue,m!==null&&(g.retryQueue=null,oy(l,m))));break;case 19:tr(f,l),nr(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,oy(l,g)));break;case 30:break;case 21:break;default:tr(f,l),nr(l)}}function nr(l){var f=l.flags;if(f&2){try{for(var m,g=l.return;g!==null;){if(qO(g)){m=g;break}g=g.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var E=m.stateNode,A=iy(l);Wd(l,A,E);break;case 5:var I=m.stateNode;m.flags&32&&(ho(I,""),m.flags&=-33);var U=iy(l);Wd(l,U,I);break;case 3:case 4:var z=m.stateNode.containerInfo,ie=iy(l);ay(l,ie,z);break;default:throw Error(r(161))}}catch(ue){pt(l,l.return,ue)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function ZO(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;ZO(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function Aa(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)KO(l,f.alternate,f),f=f.sibling}function Ts(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:Ta(4,f,f.return),Ts(f);break;case 1:oi(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&GO(f,f.return,m),Ts(f);break;case 27:Ku(f.stateNode);case 26:case 5:oi(f,f.return),Ts(f);break;case 22:f.memoizedState===null&&Ts(f);break;case 30:Ts(f);break;default:Ts(f)}l=l.sibling}}function wa(l,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var g=f.alternate,E=l,A=f,I=A.flags;switch(A.tag){case 0:case 11:case 15:wa(E,A,m),ju(4,A);break;case 1:if(wa(E,A,m),g=A,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ie){pt(g,g.return,ie)}if(g=A,E=g.updateQueue,E!==null){var U=g.stateNode;try{var z=E.shared.hiddenCallbacks;if(z!==null)for(E.shared.hiddenCallbacks=null,E=0;E<z.length;E++)RR(z[E],U)}catch(ie){pt(g,g.return,ie)}}m&&I&64&&$O(A),Uu(A,A.return);break;case 27:HO(A);case 26:case 5:wa(E,A,m),m&&g===null&&I&4&&VO(A),Uu(A,A.return);break;case 12:wa(E,A,m);break;case 13:wa(E,A,m),m&&I&4&&XO(E,A);break;case 22:A.memoizedState===null&&wa(E,A,m),Uu(A,A.return);break;case 30:break;default:wa(E,A,m)}f=f.sibling}}function ly(l,f){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&Tu(m))}function uy(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Tu(l))}function li(l,f,m,g){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)JO(l,f,m,g),f=f.sibling}function JO(l,f,m,g){var E=f.flags;switch(f.tag){case 0:case 11:case 15:li(l,f,m,g),E&2048&&ju(9,f);break;case 1:li(l,f,m,g);break;case 3:li(l,f,m,g),E&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Tu(l)));break;case 12:if(E&2048){li(l,f,m,g),l=f.stateNode;try{var A=f.memoizedProps,I=A.id,U=A.onPostCommit;typeof U=="function"&&U(I,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(z){pt(f,f.return,z)}}else li(l,f,m,g);break;case 13:li(l,f,m,g);break;case 23:break;case 22:A=f.stateNode,I=f.alternate,f.memoizedState!==null?A._visibility&2?li(l,f,m,g):Bu(l,f):A._visibility&2?li(l,f,m,g):(A._visibility|=2,Io(l,f,m,g,(f.subtreeFlags&10256)!==0)),E&2048&&ly(I,f);break;case 24:li(l,f,m,g),E&2048&&uy(f.alternate,f);break;default:li(l,f,m,g)}}function Io(l,f,m,g,E){for(E=E&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var A=l,I=f,U=m,z=g,ie=I.flags;switch(I.tag){case 0:case 11:case 15:Io(A,I,U,z,E),ju(8,I);break;case 23:break;case 22:var ue=I.stateNode;I.memoizedState!==null?ue._visibility&2?Io(A,I,U,z,E):Bu(A,I):(ue._visibility|=2,Io(A,I,U,z,E)),E&&ie&2048&&ly(I.alternate,I);break;case 24:Io(A,I,U,z,E),E&&ie&2048&&uy(I.alternate,I);break;default:Io(A,I,U,z,E)}f=f.sibling}}function Bu(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=l,g=f,E=g.flags;switch(g.tag){case 22:Bu(m,g),E&2048&&ly(g.alternate,g);break;case 24:Bu(m,g),E&2048&&uy(g.alternate,g);break;default:Bu(m,g)}f=f.sibling}}var Fu=8192;function Po(l){if(l.subtreeFlags&Fu)for(l=l.child;l!==null;)eC(l),l=l.sibling}function eC(l){switch(l.tag){case 26:Po(l),l.flags&Fu&&l.memoizedState!==null&&tH($r,l.memoizedState,l.memoizedProps);break;case 5:Po(l);break;case 3:case 4:var f=$r;$r=lh(l.stateNode.containerInfo),Po(l),$r=f;break;case 22:l.memoizedState===null&&(f=l.alternate,f!==null&&f.memoizedState!==null?(f=Fu,Fu=16777216,Po(l),Fu=f):Po(l));break;default:Po(l)}}function tC(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function $u(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var g=f[m];un=g,rC(g,l)}tC(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)nC(l),l=l.sibling}function nC(l){switch(l.tag){case 0:case 11:case 15:$u(l),l.flags&2048&&Ta(9,l,l.return);break;case 3:$u(l);break;case 12:$u(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,Xd(l)):$u(l);break;default:$u(l)}}function Xd(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var g=f[m];un=g,rC(g,l)}tC(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:Ta(8,f,f.return),Xd(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,Xd(f));break;default:Xd(f)}l=l.sibling}}function rC(l,f){for(;un!==null;){var m=un;switch(m.tag){case 0:case 11:case 15:Ta(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var g=m.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Tu(m.memoizedState.cache)}if(g=m.child,g!==null)g.return=m,un=g;else e:for(m=l;un!==null;){g=un;var E=g.sibling,A=g.return;if(YO(g),g===m){un=null;break e}if(E!==null){E.return=A,un=E;break e}un=A}}}var yq={getCacheForType:function(l){var f=Cn(Qt),m=f.data.get(l);return m===void 0&&(m=l(),f.data.set(l,m)),m}},vq=typeof WeakMap=="function"?WeakMap:Map,st=0,bt=null,ze=null,Xe=0,ot=0,rr=null,_a=!1,No=!1,cy=!1,Gi=0,Nt=0,Ra=0,As=0,fy=0,xr=0,Mo=0,Gu=null,Hn=null,dy=!1,hy=0,Qd=1/0,Zd=null,Oa=null,xn=0,Ca=null,ko=null,jo=0,my=0,py=null,iC=null,Vu=0,gy=null;function ir(){if((st&2)!==0&&Xe!==0)return Xe&-Xe;if(j.T!==null){var l=Ao;return l!==0?l:Ty()}return x_()}function aC(){xr===0&&(xr=(Xe&536870912)===0||nt?g_():536870912);var l=br.current;return l!==null&&(l.flags|=32),xr}function ar(l,f,m){(l===bt&&(ot===2||ot===9)||l.cancelPendingCommit!==null)&&(Uo(l,0),La(l,Xe,xr,!1)),ou(l,m),((st&2)===0||l!==bt)&&(l===bt&&((st&2)===0&&(As|=m),Nt===4&&La(l,Xe,xr,!1)),ui(l))}function sC(l,f,m){if((st&6)!==0)throw Error(r(327));var g=!m&&(f&124)===0&&(f&l.expiredLanes)===0||su(l,f),E=g?Sq(l,f):by(l,f,!0),A=g;do{if(E===0){No&&!g&&La(l,f,0,!1);break}else{if(m=l.current.alternate,A&&!bq(m)){E=by(l,f,!1),A=!1;continue}if(E===2){if(A=f,l.errorRecoveryDisabledLanes&A)var I=0;else I=l.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){f=I;e:{var U=l;E=Gu;var z=U.current.memoizedState.isDehydrated;if(z&&(Uo(U,I).flags|=256),I=by(U,I,!1),I!==2){if(cy&&!z){U.errorRecoveryDisabledLanes|=A,As|=A,E=4;break e}A=Hn,Hn=E,A!==null&&(Hn===null?Hn=A:Hn.push.apply(Hn,A))}E=I}if(A=!1,E!==2)continue}}if(E===1){Uo(l,0),La(l,f,0,!0);break}e:{switch(g=l,A=E,A){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:La(g,f,xr,!_a);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(E=hy+300-je(),10<E)){if(La(g,f,xr,!_a),ud(g,0,!0)!==0)break e;g.timeoutHandle=MC(oC.bind(null,g,m,Hn,Zd,dy,f,xr,As,Mo,_a,A,2,-0,0),E);break e}oC(g,m,Hn,Zd,dy,f,xr,As,Mo,_a,A,0,-0,0)}}break}while(!0);ui(l)}function oC(l,f,m,g,E,A,I,U,z,ie,ue,he,ae,se){if(l.timeoutHandle=-1,he=f.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Xu={stylesheets:null,count:0,unsuspend:eH},eC(f),he=nH(),he!==null)){l.cancelPendingCommit=he(mC.bind(null,l,f,A,m,g,E,I,U,z,ue,1,ae,se)),La(l,A,I,!ie);return}mC(l,f,A,m,g,E,I,U,z)}function bq(l){for(var f=l;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var g=0;g<m.length;g++){var E=m[g],A=E.getSnapshot;E=E.value;try{if(!Jn(A(),E))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function La(l,f,m,g){f&=~fy,f&=~As,l.suspendedLanes|=f,l.pingedLanes&=~f,g&&(l.warmLanes|=f),g=l.expirationTimes;for(var E=f;0<E;){var A=31-Rn(E),I=1<<A;g[A]=-1,E&=~I}m!==0&&v_(l,m,f)}function Jd(){return(st&6)===0?(qu(0),!1):!0}function yy(){if(ze!==null){if(ot===0)var l=ze.return;else l=ze,Ni=vs=null,N0(l),Lo=null,Nu=0,l=ze;for(;l!==null;)FO(l.alternate,l),l=l.return;ze=null}}function Uo(l,f){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,jq(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),yy(),bt=l,ze=m=Di(l.current,null),Xe=f,ot=0,rr=null,_a=!1,No=su(l,f),cy=!1,Mo=xr=fy=As=Ra=Nt=0,Hn=Gu=null,dy=!1,(f&8)!==0&&(f|=f&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=f;0<g;){var E=31-Rn(g),A=1<<E;f|=l[E],g&=~A}return Gi=f,Sd(),m}function lC(l,f){$e=null,j.H=Fd,f===wu||f===Ld?(f=wR(),ot=3):f===ER?(f=wR(),ot=4):ot=f===_O?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,rr=f,ze===null&&(Nt=1,Hd(l,pr(f,l.current)))}function uC(){var l=j.H;return j.H=Fd,l===null?Fd:l}function cC(){var l=j.A;return j.A=yq,l}function vy(){Nt=4,_a||(Xe&4194048)!==Xe&&br.current!==null||(No=!0),(Ra&134217727)===0&&(As&134217727)===0||bt===null||La(bt,Xe,xr,!1)}function by(l,f,m){var g=st;st|=2;var E=uC(),A=cC();(bt!==l||Xe!==f)&&(Zd=null,Uo(l,f)),f=!1;var I=Nt;e:do try{if(ot!==0&&ze!==null){var U=ze,z=rr;switch(ot){case 8:yy(),I=6;break e;case 3:case 2:case 9:case 6:br.current===null&&(f=!0);var ie=ot;if(ot=0,rr=null,Bo(l,U,z,ie),m&&No){I=0;break e}break;default:ie=ot,ot=0,rr=null,Bo(l,U,z,ie)}}xq(),I=Nt;break}catch(ue){lC(l,ue)}while(!0);return f&&l.shellSuspendCounter++,Ni=vs=null,st=g,j.H=E,j.A=A,ze===null&&(bt=null,Xe=0,Sd()),I}function xq(){for(;ze!==null;)fC(ze)}function Sq(l,f){var m=st;st|=2;var g=uC(),E=cC();bt!==l||Xe!==f?(Zd=null,Qd=je()+500,Uo(l,f)):No=su(l,f);e:do try{if(ot!==0&&ze!==null){f=ze;var A=rr;t:switch(ot){case 1:ot=0,rr=null,Bo(l,f,A,1);break;case 2:case 9:if(TR(A)){ot=0,rr=null,dC(f);break}f=function(){ot!==2&&ot!==9||bt!==l||(ot=7),ui(l)},A.then(f,f);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:TR(A)?(ot=0,rr=null,dC(f)):(ot=0,rr=null,Bo(l,f,A,7));break;case 5:var I=null;switch(ze.tag){case 26:I=ze.memoizedState;case 5:case 27:var U=ze;if(!I||KC(I)){ot=0,rr=null;var z=U.sibling;if(z!==null)ze=z;else{var ie=U.return;ie!==null?(ze=ie,eh(ie)):ze=null}break t}}ot=0,rr=null,Bo(l,f,A,5);break;case 6:ot=0,rr=null,Bo(l,f,A,6);break;case 8:yy(),Nt=6;break e;default:throw Error(r(462))}}Eq();break}catch(ue){lC(l,ue)}while(!0);return Ni=vs=null,j.H=g,j.A=E,st=m,ze!==null?0:(bt=null,Xe=0,Sd(),Nt)}function Eq(){for(;ze!==null&&!It();)fC(ze)}function fC(l){var f=UO(l.alternate,l,Gi);l.memoizedProps=l.pendingProps,f===null?eh(l):ze=f}function dC(l){var f=l,m=f.alternate;switch(f.tag){case 15:case 0:f=IO(m,f,f.pendingProps,f.type,void 0,Xe);break;case 11:f=IO(m,f,f.pendingProps,f.type.render,f.ref,Xe);break;case 5:N0(f);default:FO(m,f),f=ze=hR(f,Gi),f=UO(m,f,Gi)}l.memoizedProps=l.pendingProps,f===null?eh(l):ze=f}function Bo(l,f,m,g){Ni=vs=null,N0(f),Lo=null,Nu=0;var E=f.return;try{if(fq(l,E,f,m,Xe)){Nt=1,Hd(l,pr(m,l.current)),ze=null;return}}catch(A){if(E!==null)throw ze=E,A;Nt=1,Hd(l,pr(m,l.current)),ze=null;return}f.flags&32768?(nt||g===1?l=!0:No||(Xe&536870912)!==0?l=!1:(_a=l=!0,(g===2||g===9||g===3||g===6)&&(g=br.current,g!==null&&g.tag===13&&(g.flags|=16384))),hC(f,l)):eh(f)}function eh(l){var f=l;do{if((f.flags&32768)!==0){hC(f,_a);return}l=f.return;var m=hq(f.alternate,f,Gi);if(m!==null){ze=m;return}if(f=f.sibling,f!==null){ze=f;return}ze=f=l}while(f!==null);Nt===0&&(Nt=5)}function hC(l,f){do{var m=mq(l.alternate,l);if(m!==null){m.flags&=32767,ze=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(l=l.sibling,l!==null)){ze=l;return}ze=l=m}while(l!==null);Nt=6,ze=null}function mC(l,f,m,g,E,A,I,U,z){l.cancelPendingCommit=null;do th();while(xn!==0);if((st&6)!==0)throw Error(r(327));if(f!==null){if(f===l.current)throw Error(r(177));if(A=f.lanes|f.childLanes,A|=u0,eV(l,m,A,I,U,z),l===bt&&(ze=bt=null,Xe=0),ko=f,Ca=l,jo=m,my=A,py=E,iC=g,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,_q(Xt,function(){return bC(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||g){g=j.T,j.T=null,E=G.p,G.p=2,I=st,st|=4;try{pq(l,f,m)}finally{st=I,G.p=E,j.T=g}}xn=1,pC(),gC(),yC()}}function pC(){if(xn===1){xn=0;var l=Ca,f=ko,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=j.T,j.T=null;var g=G.p;G.p=2;var E=st;st|=4;try{QO(f,l);var A=Dy,I=rR(l.containerInfo),U=A.focusedElem,z=A.selectionRange;if(I!==U&&U&&U.ownerDocument&&nR(U.ownerDocument.documentElement,U)){if(z!==null&&i0(U)){var ie=z.start,ue=z.end;if(ue===void 0&&(ue=ie),"selectionStart"in U)U.selectionStart=ie,U.selectionEnd=Math.min(ue,U.value.length);else{var he=U.ownerDocument||document,ae=he&&he.defaultView||window;if(ae.getSelection){var se=ae.getSelection(),Ie=U.textContent.length,Ce=Math.min(z.start,Ie),dt=z.end===void 0?Ce:Math.min(z.end,Ie);!se.extend&&Ce>dt&&(I=dt,dt=Ce,Ce=I);var J=tR(U,Ce),X=tR(U,dt);if(J&&X&&(se.rangeCount!==1||se.anchorNode!==J.node||se.anchorOffset!==J.offset||se.focusNode!==X.node||se.focusOffset!==X.offset)){var ne=he.createRange();ne.setStart(J.node,J.offset),se.removeAllRanges(),Ce>dt?(se.addRange(ne),se.extend(X.node,X.offset)):(ne.setEnd(X.node,X.offset),se.addRange(ne))}}}}for(he=[],se=U;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<he.length;U++){var de=he[U];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}hh=!!Ly,Dy=Ly=null}finally{st=E,G.p=g,j.T=m}}l.current=f,xn=2}}function gC(){if(xn===2){xn=0;var l=Ca,f=ko,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=j.T,j.T=null;var g=G.p;G.p=2;var E=st;st|=4;try{KO(l,f.alternate,f)}finally{st=E,G.p=g,j.T=m}}xn=3}}function yC(){if(xn===4||xn===3){xn=0,_e();var l=Ca,f=ko,m=jo,g=iC;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?xn=5:(xn=0,ko=Ca=null,vC(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(Oa=null),jg(m),f=f.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Br,f,void 0,(f.current.flags&128)===128)}catch{}if(g!==null){f=j.T,E=G.p,G.p=2,j.T=null;try{for(var A=l.onRecoverableError,I=0;I<g.length;I++){var U=g[I];A(U.value,{componentStack:U.stack})}}finally{j.T=f,G.p=E}}(jo&3)!==0&&th(),ui(l),E=l.pendingLanes,(m&4194090)!==0&&(E&42)!==0?l===gy?Vu++:(Vu=0,gy=l):Vu=0,qu(0)}}function vC(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,Tu(f)))}function th(l){return pC(),gC(),yC(),bC()}function bC(){if(xn!==5)return!1;var l=Ca,f=my;my=0;var m=jg(jo),g=j.T,E=G.p;try{G.p=32>m?32:m,j.T=null,m=py,py=null;var A=Ca,I=jo;if(xn=0,ko=Ca=null,jo=0,(st&6)!==0)throw Error(r(331));var U=st;if(st|=4,nC(A.current),JO(A,A.current,I,m),st=U,qu(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Br,A)}catch{}return!0}finally{G.p=E,j.T=g,vC(l,f)}}function xC(l,f,m){f=pr(m,f),f=Y0(l.stateNode,f,2),l=ba(l,f,2),l!==null&&(ou(l,2),ui(l))}function pt(l,f,m){if(l.tag===3)xC(l,l,m);else for(;f!==null;){if(f.tag===3){xC(f,l,m);break}else if(f.tag===1){var g=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Oa===null||!Oa.has(g))){l=pr(m,l),m=AO(2),g=ba(f,m,2),g!==null&&(wO(m,g,f,l),ou(g,2),ui(g));break}}f=f.return}}function xy(l,f,m){var g=l.pingCache;if(g===null){g=l.pingCache=new vq;var E=new Set;g.set(f,E)}else E=g.get(f),E===void 0&&(E=new Set,g.set(f,E));E.has(m)||(cy=!0,E.add(m),l=Tq.bind(null,l,f,m),f.then(l,l))}function Tq(l,f,m){var g=l.pingCache;g!==null&&g.delete(f),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,bt===l&&(Xe&m)===m&&(Nt===4||Nt===3&&(Xe&62914560)===Xe&&300>je()-hy?(st&2)===0&&Uo(l,0):fy|=m,Mo===Xe&&(Mo=0)),ui(l)}function SC(l,f){f===0&&(f=y_()),l=xo(l,f),l!==null&&(ou(l,f),ui(l))}function Aq(l){var f=l.memoizedState,m=0;f!==null&&(m=f.retryLane),SC(l,m)}function wq(l,f){var m=0;switch(l.tag){case 13:var g=l.stateNode,E=l.memoizedState;E!==null&&(m=E.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(f),SC(l,m)}function _q(l,f){return rt(l,f)}var nh=null,Fo=null,Sy=!1,rh=!1,Ey=!1,ws=0;function ui(l){l!==Fo&&l.next===null&&(Fo===null?nh=Fo=l:Fo=Fo.next=l),rh=!0,Sy||(Sy=!0,Oq())}function qu(l,f){if(!Ey&&rh){Ey=!0;do for(var m=!1,g=nh;g!==null;){if(l!==0){var E=g.pendingLanes;if(E===0)var A=0;else{var I=g.suspendedLanes,U=g.pingedLanes;A=(1<<31-Rn(42|l)+1)-1,A&=E&~(I&~U),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(m=!0,wC(g,A))}else A=Xe,A=ud(g,g===bt?A:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(A&3)===0||su(g,A)||(m=!0,wC(g,A));g=g.next}while(m);Ey=!1}}function Rq(){EC()}function EC(){rh=Sy=!1;var l=0;ws!==0&&(kq()&&(l=ws),ws=0);for(var f=je(),m=null,g=nh;g!==null;){var E=g.next,A=TC(g,f);A===0?(g.next=null,m===null?nh=E:m.next=E,E===null&&(Fo=m)):(m=g,(l!==0||(A&3)!==0)&&(rh=!0)),g=E}qu(l)}function TC(l,f){for(var m=l.suspendedLanes,g=l.pingedLanes,E=l.expirationTimes,A=l.pendingLanes&-62914561;0<A;){var I=31-Rn(A),U=1<<I,z=E[I];z===-1?((U&m)===0||(U&g)!==0)&&(E[I]=JG(U,f)):z<=f&&(l.expiredLanes|=U),A&=~U}if(f=bt,m=Xe,m=ud(l,l===f?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,m===0||l===f&&(ot===2||ot===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&Be(g),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||su(l,m)){if(f=m&-m,f===l.callbackPriority)return f;switch(g!==null&&Be(g),jg(m)){case 2:case 8:m=Wt;break;case 32:m=Xt;break;case 268435456:m=Ri;break;default:m=Xt}return g=AC.bind(null,l),m=rt(m,g),l.callbackPriority=f,l.callbackNode=m,f}return g!==null&&g!==null&&Be(g),l.callbackPriority=2,l.callbackNode=null,2}function AC(l,f){if(xn!==0&&xn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(th()&&l.callbackNode!==m)return null;var g=Xe;return g=ud(l,l===bt?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(sC(l,g,f),TC(l,je()),l.callbackNode!=null&&l.callbackNode===m?AC.bind(null,l):null)}function wC(l,f){if(th())return null;sC(l,f,!0)}function Oq(){Uq(function(){(st&6)!==0?rt(yn,Rq):EC()})}function Ty(){return ws===0&&(ws=g_()),ws}function _C(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:md(""+l)}function RC(l,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,l.id&&m.setAttribute("form",l.id),f.parentNode.insertBefore(m,f),l=new FormData(l),m.parentNode.removeChild(m),l}function Cq(l,f,m,g,E){if(f==="submit"&&m&&m.stateNode===E){var A=_C((E[$n]||null).action),I=g.submitter;I&&(f=(f=I[$n]||null)?_C(f.formAction):I.getAttribute("formAction"),f!==null&&(A=f,I=null));var U=new vd("action","action",null,g,E);l.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ws!==0){var z=I?RC(E,I):new FormData(E);V0(m,{pending:!0,data:z,method:E.method,action:A},null,z)}}else typeof A=="function"&&(U.preventDefault(),z=I?RC(E,I):new FormData(E),V0(m,{pending:!0,data:z,method:E.method,action:A},A,z))},currentTarget:E}]})}}for(var Ay=0;Ay<l0.length;Ay++){var wy=l0[Ay],Lq=wy.toLowerCase(),Dq=wy[0].toUpperCase()+wy.slice(1);Fr(Lq,"on"+Dq)}Fr(sR,"onAnimationEnd"),Fr(oR,"onAnimationIteration"),Fr(lR,"onAnimationStart"),Fr("dblclick","onDoubleClick"),Fr("focusin","onFocus"),Fr("focusout","onBlur"),Fr(YV,"onTransitionRun"),Fr(WV,"onTransitionStart"),Fr(XV,"onTransitionCancel"),Fr(uR,"onTransitionEnd"),uo("onMouseEnter",["mouseout","mouseover"]),uo("onMouseLeave",["mouseout","mouseover"]),uo("onPointerEnter",["pointerout","pointerover"]),uo("onPointerLeave",["pointerout","pointerover"]),us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),us("onBeforeInput",["compositionend","keypress","textInput","paste"]),us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Iq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hu));function OC(l,f){f=(f&4)!==0;for(var m=0;m<l.length;m++){var g=l[m],E=g.event;g=g.listeners;e:{var A=void 0;if(f)for(var I=g.length-1;0<=I;I--){var U=g[I],z=U.instance,ie=U.currentTarget;if(U=U.listener,z!==A&&E.isPropagationStopped())break e;A=U,E.currentTarget=ie;try{A(E)}catch(ue){qd(ue)}E.currentTarget=null,A=z}else for(I=0;I<g.length;I++){if(U=g[I],z=U.instance,ie=U.currentTarget,U=U.listener,z!==A&&E.isPropagationStopped())break e;A=U,E.currentTarget=ie;try{A(E)}catch(ue){qd(ue)}E.currentTarget=null,A=z}}}}function Ke(l,f){var m=f[Ug];m===void 0&&(m=f[Ug]=new Set);var g=l+"__bubble";m.has(g)||(CC(f,l,2,!1),m.add(g))}function _y(l,f,m){var g=0;f&&(g|=4),CC(m,l,g,f)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Ry(l){if(!l[ih]){l[ih]=!0,E_.forEach(function(m){m!=="selectionchange"&&(Iq.has(m)||_y(m,!1,l),_y(m,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[ih]||(f[ih]=!0,_y("selectionchange",!1,f))}}function CC(l,f,m,g){switch(JC(f)){case 2:var E=aH;break;case 8:E=sH;break;default:E=$y}m=E.bind(null,f,m,l),E=void 0,!Wg||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(E=!0),g?E!==void 0?l.addEventListener(f,m,{capture:!0,passive:E}):l.addEventListener(f,m,!0):E!==void 0?l.addEventListener(f,m,{passive:E}):l.addEventListener(f,m,!1)}function Oy(l,f,m,g,E){var A=g;if((f&1)===0&&(f&2)===0&&g!==null)e:for(;;){if(g===null)return;var I=g.tag;if(I===3||I===4){var U=g.stateNode.containerInfo;if(U===E)break;if(I===4)for(I=g.return;I!==null;){var z=I.tag;if((z===3||z===4)&&I.stateNode.containerInfo===E)return;I=I.return}for(;U!==null;){if(I=so(U),I===null)return;if(z=I.tag,z===5||z===6||z===26||z===27){g=A=I;continue e}U=U.parentNode}}g=g.return}k_(function(){var ie=A,ue=Kg(m),he=[];e:{var ae=cR.get(l);if(ae!==void 0){var se=vd,Ie=l;switch(l){case"keypress":if(gd(m)===0)break e;case"keydown":case"keyup":se=_V;break;case"focusin":Ie="focus",se=Jg;break;case"focusout":Ie="blur",se=Jg;break;case"beforeblur":case"afterblur":se=Jg;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=B_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=mV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=CV;break;case sR:case oR:case lR:se=yV;break;case uR:se=DV;break;case"scroll":case"scrollend":se=dV;break;case"wheel":se=PV;break;case"copy":case"cut":case"paste":se=bV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=$_;break;case"toggle":case"beforetoggle":se=MV}var Ce=(f&4)!==0,dt=!Ce&&(l==="scroll"||l==="scrollend"),J=Ce?ae!==null?ae+"Capture":null:ae;Ce=[];for(var X=ie,ne;X!==null;){var de=X;if(ne=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ne===null||J===null||(de=cu(X,J),de!=null&&Ce.push(zu(X,de,ne))),dt)break;X=X.return}0<Ce.length&&(ae=new se(ae,Ie,null,m,ue),he.push({event:ae,listeners:Ce}))}}if((f&7)===0){e:{if(ae=l==="mouseover"||l==="pointerover",se=l==="mouseout"||l==="pointerout",ae&&m!==zg&&(Ie=m.relatedTarget||m.fromElement)&&(so(Ie)||Ie[ao]))break e;if((se||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,se?(Ie=m.relatedTarget||m.toElement,se=ie,Ie=Ie?so(Ie):null,Ie!==null&&(dt=a(Ie),Ce=Ie.tag,Ie!==dt||Ce!==5&&Ce!==27&&Ce!==6)&&(Ie=null)):(se=null,Ie=ie),se!==Ie)){if(Ce=B_,de="onMouseLeave",J="onMouseEnter",X="mouse",(l==="pointerout"||l==="pointerover")&&(Ce=$_,de="onPointerLeave",J="onPointerEnter",X="pointer"),dt=se==null?ae:uu(se),ne=Ie==null?ae:uu(Ie),ae=new Ce(de,X+"leave",se,m,ue),ae.target=dt,ae.relatedTarget=ne,de=null,so(ue)===ie&&(Ce=new Ce(J,X+"enter",Ie,m,ue),Ce.target=ne,Ce.relatedTarget=dt,de=Ce),dt=de,se&&Ie)t:{for(Ce=se,J=Ie,X=0,ne=Ce;ne;ne=$o(ne))X++;for(ne=0,de=J;de;de=$o(de))ne++;for(;0<X-ne;)Ce=$o(Ce),X--;for(;0<ne-X;)J=$o(J),ne--;for(;X--;){if(Ce===J||J!==null&&Ce===J.alternate)break t;Ce=$o(Ce),J=$o(J)}Ce=null}else Ce=null;se!==null&&LC(he,ae,se,Ce,!1),Ie!==null&&dt!==null&&LC(he,dt,Ie,Ce,!0)}}e:{if(ae=ie?uu(ie):window,se=ae.nodeName&&ae.nodeName.toLowerCase(),se==="select"||se==="input"&&ae.type==="file")var Ee=W_;else if(K_(ae))if(X_)Ee=HV;else{Ee=VV;var qe=GV}else se=ae.nodeName,!se||se.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ie&&Hg(ie.elementType)&&(Ee=W_):Ee=qV;if(Ee&&(Ee=Ee(l,ie))){Y_(he,Ee,m,ue);break e}qe&&qe(l,ae,ie),l==="focusout"&&ie&&ae.type==="number"&&ie.memoizedProps.value!=null&&qg(ae,"number",ae.value)}switch(qe=ie?uu(ie):window,l){case"focusin":(K_(qe)||qe.contentEditable==="true")&&(yo=qe,a0=ie,vu=null);break;case"focusout":vu=a0=yo=null;break;case"mousedown":s0=!0;break;case"contextmenu":case"mouseup":case"dragend":s0=!1,iR(he,m,ue);break;case"selectionchange":if(KV)break;case"keydown":case"keyup":iR(he,m,ue)}var we;if(t0)e:{switch(l){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else go?H_(l,m)&&(Le="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(Le="onCompositionStart");Le&&(G_&&m.locale!=="ko"&&(go||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&go&&(we=j_()):(pa=ue,Xg="value"in pa?pa.value:pa.textContent,go=!0)),qe=ah(ie,Le),0<qe.length&&(Le=new F_(Le,l,null,m,ue),he.push({event:Le,listeners:qe}),we?Le.data=we:(we=z_(m),we!==null&&(Le.data=we)))),(we=jV?UV(l,m):BV(l,m))&&(Le=ah(ie,"onBeforeInput"),0<Le.length&&(qe=new F_("onBeforeInput","beforeinput",null,m,ue),he.push({event:qe,listeners:Le}),qe.data=we)),Cq(he,l,ie,m,ue)}OC(he,f)})}function zu(l,f,m){return{instance:l,listener:f,currentTarget:m}}function ah(l,f){for(var m=f+"Capture",g=[];l!==null;){var E=l,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=cu(l,m),E!=null&&g.unshift(zu(l,E,A)),E=cu(l,f),E!=null&&g.push(zu(l,E,A))),l.tag===3)return g;l=l.return}return[]}function $o(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function LC(l,f,m,g,E){for(var A=f._reactName,I=[];m!==null&&m!==g;){var U=m,z=U.alternate,ie=U.stateNode;if(U=U.tag,z!==null&&z===g)break;U!==5&&U!==26&&U!==27||ie===null||(z=ie,E?(ie=cu(m,A),ie!=null&&I.unshift(zu(m,ie,z))):E||(ie=cu(m,A),ie!=null&&I.push(zu(m,ie,z)))),m=m.return}I.length!==0&&l.push({event:f,listeners:I})}var Pq=/\r\n?/g,Nq=/\u0000|\uFFFD/g;function DC(l){return(typeof l=="string"?l:""+l).replace(Pq,`
`).replace(Nq,"")}function IC(l,f){return f=DC(f),DC(l)===f}function sh(){}function ft(l,f,m,g,E,A){switch(m){case"children":typeof g=="string"?f==="body"||f==="textarea"&&g===""||ho(l,g):(typeof g=="number"||typeof g=="bigint")&&f!=="body"&&ho(l,""+g);break;case"className":fd(l,"class",g);break;case"tabIndex":fd(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":fd(l,m,g);break;case"style":N_(l,g,A);break;case"data":if(f!=="object"){fd(l,"data",g);break}case"src":case"href":if(g===""&&(f!=="a"||m!=="href")){l.removeAttribute(m);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(m);break}g=md(""+g),l.setAttribute(m,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(m==="formAction"?(f!=="input"&&ft(l,f,"name",E.name,E,null),ft(l,f,"formEncType",E.formEncType,E,null),ft(l,f,"formMethod",E.formMethod,E,null),ft(l,f,"formTarget",E.formTarget,E,null)):(ft(l,f,"encType",E.encType,E,null),ft(l,f,"method",E.method,E,null),ft(l,f,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(m);break}g=md(""+g),l.setAttribute(m,g);break;case"onClick":g!=null&&(l.onclick=sh);break;case"onScroll":g!=null&&Ke("scroll",l);break;case"onScrollEnd":g!=null&&Ke("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}m=md(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,""+g):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":g===!0?l.setAttribute(m,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,g):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(m,g):l.removeAttribute(m);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(m):l.setAttribute(m,g);break;case"popover":Ke("beforetoggle",l),Ke("toggle",l),cd(l,"popover",g);break;case"xlinkActuate":Ci(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ci(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ci(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ci(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ci(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ci(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ci(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ci(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ci(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":cd(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=cV.get(m)||m,cd(l,m,g))}}function Cy(l,f,m,g,E,A){switch(m){case"style":N_(l,g,A);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"children":typeof g=="string"?ho(l,g):(typeof g=="number"||typeof g=="bigint")&&ho(l,""+g);break;case"onScroll":g!=null&&Ke("scroll",l);break;case"onScrollEnd":g!=null&&Ke("scrollend",l);break;case"onClick":g!=null&&(l.onclick=sh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!T_.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),f=m.slice(2,E?m.length-7:void 0),A=l[$n]||null,A=A!=null?A[m]:null,typeof A=="function"&&l.removeEventListener(f,A,E),typeof g=="function")){typeof A!="function"&&A!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(f,g,E);break e}m in l?l[m]=g:g===!0?l.setAttribute(m,""):cd(l,m,g)}}}function Sn(l,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",l),Ke("load",l);var g=!1,E=!1,A;for(A in m)if(m.hasOwnProperty(A)){var I=m[A];if(I!=null)switch(A){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:ft(l,f,A,I,m,null)}}E&&ft(l,f,"srcSet",m.srcSet,m,null),g&&ft(l,f,"src",m.src,m,null);return;case"input":Ke("invalid",l);var U=A=I=E=null,z=null,ie=null;for(g in m)if(m.hasOwnProperty(g)){var ue=m[g];if(ue!=null)switch(g){case"name":E=ue;break;case"type":I=ue;break;case"checked":z=ue;break;case"defaultChecked":ie=ue;break;case"value":A=ue;break;case"defaultValue":U=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,f));break;default:ft(l,f,g,ue,m,null)}}L_(l,A,U,z,ie,I,E,!1),dd(l);return;case"select":Ke("invalid",l),g=I=A=null;for(E in m)if(m.hasOwnProperty(E)&&(U=m[E],U!=null))switch(E){case"value":A=U;break;case"defaultValue":I=U;break;case"multiple":g=U;default:ft(l,f,E,U,m,null)}f=A,m=I,l.multiple=!!g,f!=null?fo(l,!!g,f,!1):m!=null&&fo(l,!!g,m,!0);return;case"textarea":Ke("invalid",l),A=E=g=null;for(I in m)if(m.hasOwnProperty(I)&&(U=m[I],U!=null))switch(I){case"value":g=U;break;case"defaultValue":E=U;break;case"children":A=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:ft(l,f,I,U,m,null)}I_(l,g,E,A),dd(l);return;case"option":for(z in m)if(m.hasOwnProperty(z)&&(g=m[z],g!=null))switch(z){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ft(l,f,z,g,m,null)}return;case"dialog":Ke("beforetoggle",l),Ke("toggle",l),Ke("cancel",l),Ke("close",l);break;case"iframe":case"object":Ke("load",l);break;case"video":case"audio":for(g=0;g<Hu.length;g++)Ke(Hu[g],l);break;case"image":Ke("error",l),Ke("load",l);break;case"details":Ke("toggle",l);break;case"embed":case"source":case"link":Ke("error",l),Ke("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in m)if(m.hasOwnProperty(ie)&&(g=m[ie],g!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:ft(l,f,ie,g,m,null)}return;default:if(Hg(f)){for(ue in m)m.hasOwnProperty(ue)&&(g=m[ue],g!==void 0&&Cy(l,f,ue,g,m,void 0));return}}for(U in m)m.hasOwnProperty(U)&&(g=m[U],g!=null&&ft(l,f,U,g,m,null))}function Mq(l,f,m,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,I=null,U=null,z=null,ie=null,ue=null;for(se in m){var he=m[se];if(m.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":z=he;default:g.hasOwnProperty(se)||ft(l,f,se,null,g,he)}}for(var ae in g){var se=g[ae];if(he=m[ae],g.hasOwnProperty(ae)&&(se!=null||he!=null))switch(ae){case"type":A=se;break;case"name":E=se;break;case"checked":ie=se;break;case"defaultChecked":ue=se;break;case"value":I=se;break;case"defaultValue":U=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,f));break;default:se!==he&&ft(l,f,ae,se,g,he)}}Vg(l,I,U,z,ie,ue,A,E);return;case"select":se=I=U=ae=null;for(A in m)if(z=m[A],m.hasOwnProperty(A)&&z!=null)switch(A){case"value":break;case"multiple":se=z;default:g.hasOwnProperty(A)||ft(l,f,A,null,g,z)}for(E in g)if(A=g[E],z=m[E],g.hasOwnProperty(E)&&(A!=null||z!=null))switch(E){case"value":ae=A;break;case"defaultValue":U=A;break;case"multiple":I=A;default:A!==z&&ft(l,f,E,A,g,z)}f=U,m=I,g=se,ae!=null?fo(l,!!m,ae,!1):!!g!=!!m&&(f!=null?fo(l,!!m,f,!0):fo(l,!!m,m?[]:"",!1));return;case"textarea":se=ae=null;for(U in m)if(E=m[U],m.hasOwnProperty(U)&&E!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:ft(l,f,U,null,g,E)}for(I in g)if(E=g[I],A=m[I],g.hasOwnProperty(I)&&(E!=null||A!=null))switch(I){case"value":ae=E;break;case"defaultValue":se=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==A&&ft(l,f,I,E,g,A)}D_(l,ae,se);return;case"option":for(var Ie in m)if(ae=m[Ie],m.hasOwnProperty(Ie)&&ae!=null&&!g.hasOwnProperty(Ie))switch(Ie){case"selected":l.selected=!1;break;default:ft(l,f,Ie,null,g,ae)}for(z in g)if(ae=g[z],se=m[z],g.hasOwnProperty(z)&&ae!==se&&(ae!=null||se!=null))switch(z){case"selected":l.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:ft(l,f,z,ae,g,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in m)ae=m[Ce],m.hasOwnProperty(Ce)&&ae!=null&&!g.hasOwnProperty(Ce)&&ft(l,f,Ce,null,g,ae);for(ie in g)if(ae=g[ie],se=m[ie],g.hasOwnProperty(ie)&&ae!==se&&(ae!=null||se!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,f));break;default:ft(l,f,ie,ae,g,se)}return;default:if(Hg(f)){for(var dt in m)ae=m[dt],m.hasOwnProperty(dt)&&ae!==void 0&&!g.hasOwnProperty(dt)&&Cy(l,f,dt,void 0,g,ae);for(ue in g)ae=g[ue],se=m[ue],!g.hasOwnProperty(ue)||ae===se||ae===void 0&&se===void 0||Cy(l,f,ue,ae,g,se);return}}for(var J in m)ae=m[J],m.hasOwnProperty(J)&&ae!=null&&!g.hasOwnProperty(J)&&ft(l,f,J,null,g,ae);for(he in g)ae=g[he],se=m[he],!g.hasOwnProperty(he)||ae===se||ae==null&&se==null||ft(l,f,he,ae,g,se)}var Ly=null,Dy=null;function oh(l){return l.nodeType===9?l:l.ownerDocument}function PC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function NC(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function Iy(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Py=null;function kq(){var l=window.event;return l&&l.type==="popstate"?l===Py?!1:(Py=l,!0):(Py=null,!1)}var MC=typeof setTimeout=="function"?setTimeout:void 0,jq=typeof clearTimeout=="function"?clearTimeout:void 0,kC=typeof Promise=="function"?Promise:void 0,Uq=typeof queueMicrotask=="function"?queueMicrotask:typeof kC<"u"?function(l){return kC.resolve(null).then(l).catch(Bq)}:MC;function Bq(l){setTimeout(function(){throw l})}function Da(l){return l==="head"}function jC(l,f){var m=f,g=0,E=0;do{var A=m.nextSibling;if(l.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"){if(0<g&&8>g){m=g;var I=l.ownerDocument;if(m&1&&Ku(I.documentElement),m&2&&Ku(I.body),m&4)for(m=I.head,Ku(m),I=m.firstChild;I;){var U=I.nextSibling,z=I.nodeName;I[lu]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&I.rel.toLowerCase()==="stylesheet"||m.removeChild(I),I=U}}if(E===0){l.removeChild(A),tc(f);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:g=m.charCodeAt(0)-48;else g=0;m=A}while(m);tc(f)}function Ny(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ny(m),Bg(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function Fq(l,f,m,g){for(;l.nodeType===1;){var E=m;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[lu])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(A=l.getAttribute("rel"),A==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(A!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(A=l.getAttribute("src"),(A!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===A)return l}else return l;if(l=Gr(l.nextSibling),l===null)break}return null}function $q(l,f,m){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=Gr(l.nextSibling),l===null))return null;return l}function My(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function Gq(l,f){var m=l.ownerDocument;if(l.data!=="$?"||m.readyState==="complete")f();else{var g=function(){f(),m.removeEventListener("DOMContentLoaded",g)};m.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Gr(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return l}var ky=null;function UC(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return l;f--}else m==="/$"&&f++}l=l.previousSibling}return null}function BC(l,f,m){switch(f=oh(m),l){case"html":if(l=f.documentElement,!l)throw Error(r(452));return l;case"head":if(l=f.head,!l)throw Error(r(453));return l;case"body":if(l=f.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Ku(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);Bg(l)}var Sr=new Map,FC=new Set;function lh(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Vi=G.d;G.d={f:Vq,r:qq,D:Hq,C:zq,L:Kq,m:Yq,X:Xq,S:Wq,M:Qq};function Vq(){var l=Vi.f(),f=Jd();return l||f}function qq(l){var f=oo(l);f!==null&&f.tag===5&&f.type==="form"?sO(f):Vi.r(l)}var Go=typeof document>"u"?null:document;function $C(l,f,m){var g=Go;if(g&&typeof f=="string"&&f){var E=mr(f);E='link[rel="'+l+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),FC.has(E)||(FC.add(E),l={rel:l,crossOrigin:m,href:f},g.querySelector(E)===null&&(f=g.createElement("link"),Sn(f,"link",l),on(f),g.head.appendChild(f)))}}function Hq(l){Vi.D(l),$C("dns-prefetch",l,null)}function zq(l,f){Vi.C(l,f),$C("preconnect",l,f)}function Kq(l,f,m){Vi.L(l,f,m);var g=Go;if(g&&l&&f){var E='link[rel="preload"][as="'+mr(f)+'"]';f==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+mr(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+mr(m.imageSizes)+'"]')):E+='[href="'+mr(l)+'"]';var A=E;switch(f){case"style":A=Vo(l);break;case"script":A=qo(l)}Sr.has(A)||(l=d({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:l,as:f},m),Sr.set(A,l),g.querySelector(E)!==null||f==="style"&&g.querySelector(Yu(A))||f==="script"&&g.querySelector(Wu(A))||(f=g.createElement("link"),Sn(f,"link",l),on(f),g.head.appendChild(f)))}}function Yq(l,f){Vi.m(l,f);var m=Go;if(m&&l){var g=f&&typeof f.as=="string"?f.as:"script",E='link[rel="modulepreload"][as="'+mr(g)+'"][href="'+mr(l)+'"]',A=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=qo(l)}if(!Sr.has(A)&&(l=d({rel:"modulepreload",href:l},f),Sr.set(A,l),m.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Wu(A)))return}g=m.createElement("link"),Sn(g,"link",l),on(g),m.head.appendChild(g)}}}function Wq(l,f,m){Vi.S(l,f,m);var g=Go;if(g&&l){var E=lo(g).hoistableStyles,A=Vo(l);f=f||"default";var I=E.get(A);if(!I){var U={loading:0,preload:null};if(I=g.querySelector(Yu(A)))U.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":f},m),(m=Sr.get(A))&&jy(l,m);var z=I=g.createElement("link");on(z),Sn(z,"link",l),z._p=new Promise(function(ie,ue){z.onload=ie,z.onerror=ue}),z.addEventListener("load",function(){U.loading|=1}),z.addEventListener("error",function(){U.loading|=2}),U.loading|=4,uh(I,f,g)}I={type:"stylesheet",instance:I,count:1,state:U},E.set(A,I)}}}function Xq(l,f){Vi.X(l,f);var m=Go;if(m&&l){var g=lo(m).hoistableScripts,E=qo(l),A=g.get(E);A||(A=m.querySelector(Wu(E)),A||(l=d({src:l,async:!0},f),(f=Sr.get(E))&&Uy(l,f),A=m.createElement("script"),on(A),Sn(A,"link",l),m.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(E,A))}}function Qq(l,f){Vi.M(l,f);var m=Go;if(m&&l){var g=lo(m).hoistableScripts,E=qo(l),A=g.get(E);A||(A=m.querySelector(Wu(E)),A||(l=d({src:l,async:!0,type:"module"},f),(f=Sr.get(E))&&Uy(l,f),A=m.createElement("script"),on(A),Sn(A,"link",l),m.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(E,A))}}function GC(l,f,m,g){var E=(E=ge.current)?lh(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=Vo(m.href),m=lo(E).hoistableStyles,g=m.get(f),g||(g={type:"style",instance:null,count:0,state:null},m.set(f,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=Vo(m.href);var A=lo(E).hoistableStyles,I=A.get(l);if(I||(E=E.ownerDocument||E,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(l,I),(A=E.querySelector(Yu(l)))&&!A._p&&(I.instance=A,I.state.loading=5),Sr.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Sr.set(l,m),A||Zq(E,l,m,I.state))),f&&g===null)throw Error(r(528,""));return I}if(f&&g!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=qo(m),m=lo(E).hoistableScripts,g=m.get(f),g||(g={type:"script",instance:null,count:0,state:null},m.set(f,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Vo(l){return'href="'+mr(l)+'"'}function Yu(l){return'link[rel="stylesheet"]['+l+"]"}function VC(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function Zq(l,f,m,g){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?g.loading=1:(f=l.createElement("link"),g.preload=f,f.addEventListener("load",function(){return g.loading|=1}),f.addEventListener("error",function(){return g.loading|=2}),Sn(f,"link",m),on(f),l.head.appendChild(f))}function qo(l){return'[src="'+mr(l)+'"]'}function Wu(l){return"script[async]"+l}function qC(l,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var g=l.querySelector('style[data-href~="'+mr(m.href)+'"]');if(g)return f.instance=g,on(g),g;var E=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),on(g),Sn(g,"style",E),uh(g,m.precedence,l),f.instance=g;case"stylesheet":E=Vo(m.href);var A=l.querySelector(Yu(E));if(A)return f.state.loading|=4,f.instance=A,on(A),A;g=VC(m),(E=Sr.get(E))&&jy(g,E),A=(l.ownerDocument||l).createElement("link"),on(A);var I=A;return I._p=new Promise(function(U,z){I.onload=U,I.onerror=z}),Sn(A,"link",g),f.state.loading|=4,uh(A,m.precedence,l),f.instance=A;case"script":return A=qo(m.src),(E=l.querySelector(Wu(A)))?(f.instance=E,on(E),E):(g=m,(E=Sr.get(A))&&(g=d({},m),Uy(g,E)),l=l.ownerDocument||l,E=l.createElement("script"),on(E),Sn(E,"link",g),l.head.appendChild(E),f.instance=E);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(g=f.instance,f.state.loading|=4,uh(g,m.precedence,l));return f.instance}function uh(l,f,m){for(var g=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,A=E,I=0;I<g.length;I++){var U=g[I];if(U.dataset.precedence===f)A=U;else if(A!==E)break}A?A.parentNode.insertBefore(l,A.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(l,f.firstChild))}function jy(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function Uy(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var ch=null;function HC(l,f,m){if(ch===null){var g=new Map,E=ch=new Map;E.set(m,g)}else E=ch,g=E.get(m),g||(g=new Map,E.set(m,g));if(g.has(l))return g;for(g.set(l,null),m=m.getElementsByTagName(l),E=0;E<m.length;E++){var A=m[E];if(!(A[lu]||A[On]||l==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var I=A.getAttribute(f)||"";I=l+I;var U=g.get(I);U?U.push(A):g.set(I,[A])}}return g}function zC(l,f,m){l=l.ownerDocument||l,l.head.insertBefore(m,f==="title"?l.querySelector("head > title"):null)}function Jq(l,f,m){if(m===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function KC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Xu=null;function eH(){}function tH(l,f,m){if(Xu===null)throw Error(r(475));var g=Xu;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=Vo(m.href),A=l.querySelector(Yu(E));if(A){l=A._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(g.count++,g=fh.bind(g),l.then(g,g)),f.state.loading|=4,f.instance=A,on(A);return}A=l.ownerDocument||l,m=VC(m),(E=Sr.get(E))&&jy(m,E),A=A.createElement("link"),on(A);var I=A;I._p=new Promise(function(U,z){I.onload=U,I.onerror=z}),Sn(A,"link",m),f.instance=A}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(g.count++,f=fh.bind(g),l.addEventListener("load",f),l.addEventListener("error",f))}}function nH(){if(Xu===null)throw Error(r(475));var l=Xu;return l.stylesheets&&l.count===0&&By(l,l.stylesheets),0<l.count?function(f){var m=setTimeout(function(){if(l.stylesheets&&By(l,l.stylesheets),l.unsuspend){var g=l.unsuspend;l.unsuspend=null,g()}},6e4);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(m)}}:null}function fh(){if(this.count--,this.count===0){if(this.stylesheets)By(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var dh=null;function By(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,dh=new Map,f.forEach(rH,l),dh=null,fh.call(l))}function rH(l,f){if(!(f.state.loading&4)){var m=dh.get(l);if(m)var g=m.get(null);else{m=new Map,dh.set(l,m);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var I=E[A];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(m.set(I.dataset.precedence,I),g=I)}g&&m.set(null,g)}E=f.instance,I=E.getAttribute("data-precedence"),A=m.get(I)||g,A===g&&m.set(null,E),m.set(I,E),this.count++,g=fh.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),A?A.parentNode.insertBefore(E,A.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),f.state.loading|=4}}var Qu={$$typeof:w,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function iH(l,f,m,g,E,A,I,U){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mg(0),this.hiddenUpdates=Mg(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function YC(l,f,m,g,E,A,I,U,z,ie,ue,he){return l=new iH(l,f,m,I,U,z,ie,he),f=1,A===!0&&(f|=24),A=er(3,null,null,f),l.current=A,A.stateNode=l,f=x0(),f.refCount++,l.pooledCache=f,f.refCount++,A.memoizedState={element:g,isDehydrated:m,cache:f},A0(A),l}function WC(l){return l?(l=So,l):So}function XC(l,f,m,g,E,A){E=WC(E),g.context===null?g.context=E:g.pendingContext=E,g=va(f),g.payload={element:m},A=A===void 0?null:A,A!==null&&(g.callback=A),m=ba(l,g,f),m!==null&&(ar(m,l,f),Ru(m,l,f))}function QC(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<f?m:f}}function Fy(l,f){QC(l,f),(l=l.alternate)&&QC(l,f)}function ZC(l){if(l.tag===13){var f=xo(l,67108864);f!==null&&ar(f,l,67108864),Fy(l,67108864)}}var hh=!0;function aH(l,f,m,g){var E=j.T;j.T=null;var A=G.p;try{G.p=2,$y(l,f,m,g)}finally{G.p=A,j.T=E}}function sH(l,f,m,g){var E=j.T;j.T=null;var A=G.p;try{G.p=8,$y(l,f,m,g)}finally{G.p=A,j.T=E}}function $y(l,f,m,g){if(hh){var E=Gy(g);if(E===null)Oy(l,f,g,mh,m),eL(l,g);else if(lH(E,l,f,m,g))g.stopPropagation();else if(eL(l,g),f&4&&-1<oH.indexOf(l)){for(;E!==null;){var A=oo(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var I=ls(A.pendingLanes);if(I!==0){var U=A;for(U.pendingLanes|=2,U.entangledLanes|=2;I;){var z=1<<31-Rn(I);U.entanglements[1]|=z,I&=~z}ui(A),(st&6)===0&&(Qd=je()+500,qu(0))}}break;case 13:U=xo(A,2),U!==null&&ar(U,A,2),Jd(),Fy(A,2)}if(A=Gy(g),A===null&&Oy(l,f,g,mh,m),A===E)break;E=A}E!==null&&g.stopPropagation()}else Oy(l,f,g,null,m)}}function Gy(l){return l=Kg(l),Vy(l)}var mh=null;function Vy(l){if(mh=null,l=so(l),l!==null){var f=a(l);if(f===null)l=null;else{var m=f.tag;if(m===13){if(l=s(f),l!==null)return l;l=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return mh=l,null}function JC(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rt()){case yn:return 2;case Wt:return 8;case Xt:case vn:return 32;case Ri:return 268435456;default:return 32}default:return 32}}var qy=!1,Ia=null,Pa=null,Na=null,Zu=new Map,Ju=new Map,Ma=[],oH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function eL(l,f){switch(l){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":Zu.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(f.pointerId)}}function ec(l,f,m,g,E,A){return l===null||l.nativeEvent!==A?(l={blockedOn:f,domEventName:m,eventSystemFlags:g,nativeEvent:A,targetContainers:[E]},f!==null&&(f=oo(f),f!==null&&ZC(f)),l):(l.eventSystemFlags|=g,f=l.targetContainers,E!==null&&f.indexOf(E)===-1&&f.push(E),l)}function lH(l,f,m,g,E){switch(f){case"focusin":return Ia=ec(Ia,l,f,m,g,E),!0;case"dragenter":return Pa=ec(Pa,l,f,m,g,E),!0;case"mouseover":return Na=ec(Na,l,f,m,g,E),!0;case"pointerover":var A=E.pointerId;return Zu.set(A,ec(Zu.get(A)||null,l,f,m,g,E)),!0;case"gotpointercapture":return A=E.pointerId,Ju.set(A,ec(Ju.get(A)||null,l,f,m,g,E)),!0}return!1}function tL(l){var f=so(l.target);if(f!==null){var m=a(f);if(m!==null){if(f=m.tag,f===13){if(f=s(m),f!==null){l.blockedOn=f,tV(l.priority,function(){if(m.tag===13){var g=ir();g=kg(g);var E=xo(m,g);E!==null&&ar(E,m,g),Fy(m,g)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ph(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var m=Gy(l.nativeEvent);if(m===null){m=l.nativeEvent;var g=new m.constructor(m.type,m);zg=g,m.target.dispatchEvent(g),zg=null}else return f=oo(m),f!==null&&ZC(f),l.blockedOn=m,!1;f.shift()}return!0}function nL(l,f,m){ph(l)&&m.delete(f)}function uH(){qy=!1,Ia!==null&&ph(Ia)&&(Ia=null),Pa!==null&&ph(Pa)&&(Pa=null),Na!==null&&ph(Na)&&(Na=null),Zu.forEach(nL),Ju.forEach(nL)}function gh(l,f){l.blockedOn===f&&(l.blockedOn=null,qy||(qy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,uH)))}var yh=null;function rL(l){yh!==l&&(yh=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yh===l&&(yh=null);for(var f=0;f<l.length;f+=3){var m=l[f],g=l[f+1],E=l[f+2];if(typeof g!="function"){if(Vy(g||m)===null)continue;break}var A=oo(m);A!==null&&(l.splice(f,3),f-=3,V0(A,{pending:!0,data:E,method:m.method,action:g},g,E))}}))}function tc(l){function f(z){return gh(z,l)}Ia!==null&&gh(Ia,l),Pa!==null&&gh(Pa,l),Na!==null&&gh(Na,l),Zu.forEach(f),Ju.forEach(f);for(var m=0;m<Ma.length;m++){var g=Ma[m];g.blockedOn===l&&(g.blockedOn=null)}for(;0<Ma.length&&(m=Ma[0],m.blockedOn===null);)tL(m),m.blockedOn===null&&Ma.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(g=0;g<m.length;g+=3){var E=m[g],A=m[g+1],I=E[$n]||null;if(typeof A=="function")I||rL(m);else if(I){var U=null;if(A&&A.hasAttribute("formAction")){if(E=A,I=A[$n]||null)U=I.formAction;else if(Vy(E)!==null)continue}else U=I.action;typeof U=="function"?m[g+1]=U:(m.splice(g,3),g-=3),rL(m)}}}function Hy(l){this._internalRoot=l}vh.prototype.render=Hy.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,g=ir();XC(m,g,l,f,null,null)},vh.prototype.unmount=Hy.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;XC(l.current,2,null,l,null,null),Jd(),f[ao]=null}};function vh(l){this._internalRoot=l}vh.prototype.unstable_scheduleHydration=function(l){if(l){var f=x_();l={blockedOn:null,target:l,priority:f};for(var m=0;m<Ma.length&&f!==0&&f<Ma[m].priority;m++);Ma.splice(m,0,l),m===0&&tL(l)}};var iL=e.version;if(iL!=="19.1.0")throw Error(r(527,iL,"19.1.0"));G.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(f),l=l!==null?u(l):null,l=l===null?null:l.stateNode,l};var cH={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bh.isDisabled&&bh.supportsFiber)try{Br=bh.inject(cH),_n=bh}catch{}}return rc.createRoot=function(l,f){if(!i(l))throw Error(r(299));var m=!1,g="",E=xO,A=SO,I=EO,U=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(g=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(A=f.onCaughtError),f.onRecoverableError!==void 0&&(I=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(U=f.unstable_transitionCallbacks)),f=YC(l,1,!1,null,null,m,g,E,A,I,U,null),l[ao]=f.current,Ry(l),new Hy(f)},rc.hydrateRoot=function(l,f,m){if(!i(l))throw Error(r(299));var g=!1,E="",A=xO,I=SO,U=EO,z=null,ie=null;return m!=null&&(m.unstable_strictMode===!0&&(g=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(A=m.onUncaughtError),m.onCaughtError!==void 0&&(I=m.onCaughtError),m.onRecoverableError!==void 0&&(U=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(z=m.unstable_transitionCallbacks),m.formState!==void 0&&(ie=m.formState)),f=YC(l,1,!0,f,m??null,g,E,A,I,U,z,ie),f.context=WC(null),m=f.current,g=ir(),g=kg(g),E=va(g),E.callback=null,ba(m,E,g),m=g,f.current.lanes=m,ou(f,m),ui(f),l[ao]=f.current,Ry(l),new vh(f)},rc.version="19.1.0",rc}var mL;function xH(){if(mL)return Yy.exports;mL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yy.exports=bH(),Yy.exports}var SH=xH(),ic={},pL;function EH(){if(pL)return ic;pL=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.parse=s,ic.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function s(p,y){const v=new a,x=p.length;if(x<2)return v;const b=(y==null?void 0:y.decode)||d;let T=0;do{const _=p.indexOf("=",T);if(_===-1)break;const w=p.indexOf(";",T),O=w===-1?x:w;if(_>O){T=p.lastIndexOf(";",_-1)+1;continue}const R=o(p,T,_),C=c(p,_,R),L=p.slice(R,C);if(v[L]===void 0){let P=o(p,_+1,O),N=c(p,O,P);const k=b(p.slice(P,N));v[L]=k}T=O+1}while(T<x);return v}function o(p,y,v){do{const x=p.charCodeAt(y);if(x!==32&&x!==9)return y}while(++y<v);return v}function c(p,y,v){for(;y>v;){const x=p.charCodeAt(--y);if(x!==32&&x!==9)return y+1}return v}function u(p,y,v){const x=(v==null?void 0:v.encode)||encodeURIComponent;if(!t.test(p))throw new TypeError(`argument name is invalid: ${p}`);const b=x(y);if(!e.test(b))throw new TypeError(`argument val is invalid: ${y}`);let T=p+"="+b;if(!v)return T;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);T+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);T+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);T+="; Path="+v.path}if(v.expires){if(!h(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);T+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(T+="; HttpOnly"),v.secure&&(T+="; Secure"),v.partitioned&&(T+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return T}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function h(p){return i.call(p)==="[object Date]"}return ic}EH();var gL="popstate";function TH(t={}){function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return GE("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Bc(i)}return wH(e,n,null,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AH(){return Math.random().toString(36).substring(2,10)}function yL(t,e){return{usr:t.state,key:t.key,idx:e}}function GE(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ql(e):e,state:n,key:e&&e.key||r||AH()}}function Bc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ql(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function wH(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function h(){o="POP";let b=d(),T=b==null?null:b-u;u=b,c&&c({action:o,location:x.location,delta:T})}function p(b,T){o="PUSH";let _=GE(x.location,b,T);u=d()+1;let w=yL(_,u),O=x.createHref(_);try{s.pushState(w,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(O)}a&&c&&c({action:o,location:x.location,delta:1})}function y(b,T){o="REPLACE";let _=GE(x.location,b,T);u=d();let w=yL(_,u),O=x.createHref(_);s.replaceState(w,"",O),a&&c&&c({action:o,location:x.location,delta:0})}function v(b){return _H(b)}let x={get action(){return o},get location(){return t(i,s)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(gL,h),c=b,()=>{i.removeEventListener(gL,h),c=null}},createHref(b){return e(i,b)},createURL:v,encodeLocation(b){let T=v(b);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:y,go(b){return s.go(b)}};return x}function _H(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Bc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function pB(t,e,n="/"){return RH(t,e,n,!1)}function RH(t,e,n,r){let i=typeof e=="string"?ql(e):e,a=ra(i.pathname||"/",n);if(a==null)return null;let s=gB(t);OH(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=BH(a);o=jH(s[c],u,r)}return o}function gB(t,e=[],n=[],r=""){let i=(a,s,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let u=Ji([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(_t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),gB(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:MH(u,a.index),routesMeta:d})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let c of yB(a.path))i(a,s,c)}),e}function yB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=yB(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function OH(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var CH=/^:[\w-]+$/,LH=3,DH=2,IH=1,PH=10,NH=-2,vL=t=>t==="*";function MH(t,e){let n=t.split("/"),r=n.length;return n.some(vL)&&(r+=NH),e&&(r+=DH),n.filter(i=>!vL(i)).reduce((i,a)=>i+(CH.test(a)?LH:a===""?IH:PH),r)}function kH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function jH(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=bm({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=bm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Ji([a,h.pathname]),pathnameBase:VH(Ji([a,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(a=Ji([a,h.pathnameBase]))}return s}function bm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=UH(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:h},p)=>{if(d==="*"){let v=o[p]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=o[p];return h&&!y?u[d]=void 0:u[d]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function UH(t,e=!1,n=!0){Jr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function BH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ra(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function FH(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ql(t):t;return{pathname:n?n.startsWith("/")?n:$H(n,e):e,search:qH(r),hash:HH(i)}}function $H(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GH(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function JA(t){let e=GH(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function e1(t,e,n,r=!1){let i;typeof t=="string"?i=ql(t):(i={...t},_t(!i.pathname||!i.pathname.includes("?"),Zy("?","pathname","search",i)),_t(!i.pathname||!i.pathname.includes("#"),Zy("#","pathname","hash",i)),_t(!i.search||!i.search.includes("#"),Zy("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}o=h>=0?e[h]:"/"}let c=FH(i,o),u=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Ji=t=>t.join("/").replace(/\/\/+/g,"/"),VH=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qH=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HH=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zH(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var vB=["POST","PUT","PATCH","DELETE"];new Set(vB);var KH=["GET",...vB];new Set(KH);var Hl=F.createContext(null);Hl.displayName="DataRouter";var Fp=F.createContext(null);Fp.displayName="DataRouterState";var bB=F.createContext({isTransitioning:!1});bB.displayName="ViewTransition";var YH=F.createContext(new Map);YH.displayName="Fetchers";var WH=F.createContext(null);WH.displayName="Await";var ei=F.createContext(null);ei.displayName="Navigation";var Uf=F.createContext(null);Uf.displayName="Location";var jr=F.createContext({outlet:null,matches:[],isDataRoute:!1});jr.displayName="Route";var t1=F.createContext(null);t1.displayName="RouteError";function XH(t,{relative:e}={}){_t(zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=F.useContext(ei),{hash:i,pathname:a,search:s}=Bf(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:Ji([n,a])),r.createHref({pathname:o,search:s,hash:i})}function zl(){return F.useContext(Uf)!=null}function Ja(){return _t(zl(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(Uf).location}var xB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SB(t){F.useContext(ei).static||F.useLayoutEffect(t)}function pn(){let{isDataRoute:t}=F.useContext(jr);return t?fz():QH()}function QH(){_t(zl(),"useNavigate() may be used only in the context of a <Router> component.");let t=F.useContext(Hl),{basename:e,navigator:n}=F.useContext(ei),{matches:r}=F.useContext(jr),{pathname:i}=Ja(),a=JSON.stringify(JA(r)),s=F.useRef(!1);return SB(()=>{s.current=!0}),F.useCallback((c,u={})=>{if(Jr(s.current,xB),!s.current)return;if(typeof c=="number"){n.go(c);return}let d=e1(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ji([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,i,t])}var ZH=F.createContext(null);function JH(t){let e=F.useContext(jr).outlet;return e&&F.createElement(ZH.Provider,{value:t},e)}function ca(){let{matches:t}=F.useContext(jr),e=t[t.length-1];return e?e.params:{}}function Bf(t,{relative:e}={}){let{matches:n}=F.useContext(jr),{pathname:r}=Ja(),i=JSON.stringify(JA(n));return F.useMemo(()=>e1(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function ez(t,e){return EB(t,e)}function EB(t,e,n,r){var T;_t(zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=F.useContext(ei),{matches:a}=F.useContext(jr),s=a[a.length-1],o=s?s.params:{},c=s?s.pathname:"/",u=s?s.pathnameBase:"/",d=s&&s.route;{let _=d&&d.path||"";TB(c,!d||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let h=Ja(),p;if(e){let _=typeof e=="string"?ql(e):e;_t(u==="/"||((T=_.pathname)==null?void 0:T.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=h;let y=p.pathname||"/",v=y;if(u!=="/"){let _=u.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=pB(t,{pathname:v});Jr(d||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Jr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=az(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Ji([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Ji([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,n,r);return e&&b?F.createElement(Uf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function tz(){let t=cz(),e=zH(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=F.createElement(F.Fragment,null,F.createElement("p",null,"💿 Hey developer 👋"),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:a},"ErrorBoundary")," or"," ",F.createElement("code",{style:a},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,s)}var nz=F.createElement(tz,null),rz=class extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?F.createElement(jr.Provider,{value:this.props.routeContext},F.createElement(t1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iz({routeContext:t,match:e,children:n}){let r=F.useContext(Hl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(jr.Provider,{value:t},n)}function az(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let c=i.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);_t(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let s=!1,o=-1;if(n)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=c),u.route.id){let{loaderData:d,errors:h}=n,p=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||p){s=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((c,u,d)=>{let h,p=!1,y=null,v=null;n&&(h=a&&u.route.id?a[u.route.id]:void 0,y=u.route.errorElement||nz,s&&(o<0&&d===0?(TB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,v=null):o===d&&(p=!0,v=u.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,d+1)),b=()=>{let T;return h?T=y:p?T=v:u.route.Component?T=F.createElement(u.route.Component,null):u.route.element?T=u.route.element:T=c,F.createElement(iz,{match:u,routeContext:{outlet:c,matches:x,isDataRoute:n!=null},children:T})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?F.createElement(rz,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}function n1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sz(t){let e=F.useContext(Hl);return _t(e,n1(t)),e}function oz(t){let e=F.useContext(Fp);return _t(e,n1(t)),e}function lz(t){let e=F.useContext(jr);return _t(e,n1(t)),e}function r1(t){let e=lz(t),n=e.matches[e.matches.length-1];return _t(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function uz(){return r1("useRouteId")}function cz(){var r;let t=F.useContext(t1),e=oz("useRouteError"),n=r1("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function fz(){let{router:t}=sz("useNavigate"),e=r1("useNavigate"),n=F.useRef(!1);return SB(()=>{n.current=!0}),F.useCallback(async(i,a={})=>{Jr(n.current,xB),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var bL={};function TB(t,e,n){!e&&!bL[t]&&(bL[t]=!0,Jr(!1,n))}F.memo(dz);function dz({routes:t,future:e,state:n}){return EB(t,void 0,n,e)}function hz({to:t,replace:e,state:n,relative:r}){_t(zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=F.useContext(ei);Jr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=F.useContext(jr),{pathname:s}=Ja(),o=pn(),c=e1(t,JA(a),s,r==="path"),u=JSON.stringify(c);return F.useEffect(()=>{o(JSON.parse(u),{replace:e,state:n,relative:r})},[o,u,r,e,n]),null}function mz(t){return JH(t.context)}function At(t){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pz({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){_t(!zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),o=F.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof n=="string"&&(n=ql(n));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:p="default"}=n,y=F.useMemo(()=>{let v=ra(c,s);return v==null?null:{location:{pathname:v,search:u,hash:d,state:h,key:p},navigationType:r}},[s,c,u,d,h,p,r]);return Jr(y!=null,`<Router basename="${s}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:F.createElement(ei.Provider,{value:o},F.createElement(Uf.Provider,{children:e,value:y}))}function gz({children:t,location:e}){return ez(VE(t),e)}function VE(t,e=[]){let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let a=[...e,i];if(r.type===F.Fragment){n.push.apply(n,VE(r.props.children,a));return}_t(r.type===At,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=VE(r.props.children,a)),n.push(s)}),n}var tm="get",nm="application/x-www-form-urlencoded";function $p(t){return t!=null&&typeof t.tagName=="string"}function yz(t){return $p(t)&&t.tagName.toLowerCase()==="button"}function vz(t){return $p(t)&&t.tagName.toLowerCase()==="form"}function bz(t){return $p(t)&&t.tagName.toLowerCase()==="input"}function xz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Sz(t,e){return t.button===0&&(!e||e==="_self")&&!xz(t)}var Sh=null;function Ez(){if(Sh===null)try{new FormData(document.createElement("form"),0),Sh=!1}catch{Sh=!0}return Sh}var Tz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jy(t){return t!=null&&!Tz.has(t)?(Jr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nm}"`),null):t}function Az(t,e){let n,r,i,a,s;if(vz(t)){let o=t.getAttribute("action");r=o?ra(o,e):null,n=t.getAttribute("method")||tm,i=Jy(t.getAttribute("enctype"))||nm,a=new FormData(t)}else if(yz(t)||bz(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?ra(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||tm,i=Jy(t.getAttribute("formenctype"))||Jy(o.getAttribute("enctype"))||nm,a=new FormData(o,t),!Ez()){let{name:u,type:d,value:h}=t;if(d==="image"){let p=u?`${u}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else u&&a.append(u,h)}}else{if($p(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tm,r=null,i=nm,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}function i1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function wz(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _z(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Rz(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await wz(a,n);return s.links?s.links():[]}return[]}));return Dz(r.flat(1).filter(_z).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function xL(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{var h;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Oz(t,e,{includeHydrateFallback:n}={}){return Cz(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Cz(t){return[...new Set(t)]}function Lz(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Dz(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(Lz(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Iz=new Set([100,101,204,205]);function Pz(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&ra(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function AB(){let t=F.useContext(Hl);return i1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Nz(){let t=F.useContext(Fp);return i1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var a1=F.createContext(void 0);a1.displayName="FrameworkContext";function wB(){let t=F.useContext(a1);return i1(t,"You must render this element inside a <HydratedRouter> element"),t}function Mz(t,e){let n=F.useContext(a1),[r,i]=F.useState(!1),[a,s]=F.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,p=F.useRef(null);F.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=T=>{T.forEach(_=>{s(_.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[t]),F.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let y=()=>{i(!0)},v=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,p,{}]:[a,p,{onFocus:ac(o,y),onBlur:ac(c,v),onMouseEnter:ac(u,y),onMouseLeave:ac(d,v),onTouchStart:ac(h,y)}]:[!1,p,{}]}function ac(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function kz({page:t,...e}){let{router:n}=AB(),r=F.useMemo(()=>pB(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?F.createElement(Uz,{page:t,matches:r,...e}):null}function jz(t){let{manifest:e,routeModules:n}=wB(),[r,i]=F.useState([]);return F.useEffect(()=>{let a=!1;return Rz(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Uz({page:t,matches:e,...n}){let r=Ja(),{manifest:i,routeModules:a}=wB(),{basename:s}=AB(),{loaderData:o,matches:c}=Nz(),u=F.useMemo(()=>xL(t,e,c,i,r,"data"),[t,e,c,i,r]),d=F.useMemo(()=>xL(t,e,c,i,r,"assets"),[t,e,c,i,r]),h=F.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,x=!1;if(e.forEach(T=>{var w;let _=i.routes[T.route.id];!_||!_.hasLoader||(!u.some(O=>O.route.id===T.route.id)&&T.route.id in o&&((w=a[T.route.id])!=null&&w.shouldRevalidate)||_.hasClientLoader?x=!0:v.add(T.route.id))}),v.size===0)return[];let b=Pz(t,s);return x&&v.size>0&&b.searchParams.set("_routes",e.filter(T=>v.has(T.route.id)).map(T=>T.route.id).join(",")),[b.pathname+b.search]},[s,o,r,i,u,e,t,a]),p=F.useMemo(()=>Oz(d,i),[d,i]),y=jz(d);return F.createElement(F.Fragment,null,h.map(v=>F.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>F.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),y.map(({key:v,link:x})=>F.createElement("link",{key:v,...x})))}function Bz(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var _B=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_B&&(window.__reactRouterVersion="7.6.2")}catch{}function Fz({basename:t,children:e,window:n}){let r=F.useRef();r.current==null&&(r.current=TH({window:n,v5Compat:!0}));let i=r.current,[a,s]=F.useState({action:i.action,location:i.location}),o=F.useCallback(c=>{F.startTransition(()=>s(c))},[s]);return F.useLayoutEffect(()=>i.listen(o),[i,o]),F.createElement(pz,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var RB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hi=F.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:h,...p},y){let{basename:v}=F.useContext(ei),x=typeof u=="string"&&RB.test(u),b,T=!1;if(typeof u=="string"&&x&&(b=u,_B))try{let N=new URL(window.location.href),k=u.startsWith("//")?new URL(N.protocol+u):new URL(u),M=ra(k.pathname,v);k.origin===N.origin&&M!=null?u=M+k.search+k.hash:T=!0}catch{Jr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=XH(u,{relative:i}),[w,O,R]=Mz(r,p),C=qz(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:i,viewTransition:h});function L(N){e&&e(N),N.defaultPrevented||C(N)}let P=F.createElement("a",{...p,...R,href:b||_,onClick:T||a?e:L,ref:Bz(y,O),target:c,"data-discover":!x&&n==="render"?"true":void 0});return w&&!x?F.createElement(F.Fragment,null,P,F.createElement(kz,{page:_})):P});hi.displayName="Link";var $z=F.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},d){let h=Bf(s,{relative:u.relative}),p=Ja(),y=F.useContext(Fp),{navigator:v,basename:x}=F.useContext(ei),b=y!=null&&Wz(h)&&o===!0,T=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,_=p.pathname,w=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(_=_.toLowerCase(),w=w?w.toLowerCase():null,T=T.toLowerCase()),w&&x&&(w=ra(w,x)||w);const O=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let R=_===T||!i&&_.startsWith(T)&&_.charAt(O)==="/",C=w!=null&&(w===T||!i&&w.startsWith(T)&&w.charAt(T.length)==="/"),L={isActive:R,isPending:C,isTransitioning:b},P=R?e:void 0,N;typeof r=="function"?N=r(L):N=[r,R?"active":null,C?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(L):a;return F.createElement(hi,{...u,"aria-current":P,className:N,ref:d,style:k,to:s,viewTransition:o},typeof c=="function"?c(L):c)});$z.displayName="NavLink";var Gz=F.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=tm,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...p},y)=>{let v=Kz(),x=Yz(o,{relative:u}),b=s.toLowerCase()==="get"?"get":"post",T=typeof o=="string"&&RB.test(o),_=w=>{if(c&&c(w),w.defaultPrevented)return;w.preventDefault();let O=w.nativeEvent.submitter,R=(O==null?void 0:O.getAttribute("formmethod"))||s;v(O||w.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:i,state:a,relative:u,preventScrollReset:d,viewTransition:h})};return F.createElement("form",{ref:y,method:b,action:x,onSubmit:r?c:_,...p,"data-discover":!T&&t==="render"?"true":void 0})});Gz.displayName="Form";function Vz(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OB(t){let e=F.useContext(Hl);return _t(e,Vz(t)),e}function qz(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let o=pn(),c=Ja(),u=Bf(t,{relative:a});return F.useCallback(d=>{if(Sz(d,e)){d.preventDefault();let h=n!==void 0?n:Bc(c)===Bc(u);o(t,{replace:h,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[c,o,u,n,r,e,t,i,a,s])}var Hz=0,zz=()=>`__${String(++Hz)}__`;function Kz(){let{router:t}=OB("useSubmit"),{basename:e}=F.useContext(ei),n=uz();return F.useCallback(async(r,i={})=>{let{action:a,method:s,encType:o,formData:c,body:u}=Az(r,e);if(i.navigate===!1){let d=i.fetcherKey||zz();await t.fetch(d,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Yz(t,{relative:e}={}){let{basename:n}=F.useContext(ei),r=F.useContext(jr);_t(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Bf(t||".",{relative:e})},s=Ja();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let d=o.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ji([n,a.pathname])),Bc(a)}function Wz(t,e={}){let n=F.useContext(bB);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=OB("useViewTransitionState"),i=Bf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=ra(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=ra(n.nextLocation.pathname,r)||n.nextLocation.pathname;return bm(i.pathname,s)!=null||bm(i.pathname,a)!=null}[...Iz];var ev={exports:{}},tv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SL;function Xz(){if(SL)return tv;SL=1;var t=Bp();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return tv.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var y=i(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=s(function(){function b(R){if(!T){if(T=!0,_=R,R=h(R),p!==void 0&&v.hasValue){var C=v.value;if(p(C,R))return w=C}return w=R}if(C=w,n(_,R))return C;var L=h(R);return p!==void 0&&p(C,L)?(_=R,C):(_=R,w=L)}var T=!1,_,w,O=d===void 0?null:d;return[function(){return b(u())},O===null?void 0:function(){return b(O())}]},[u,d,h,p]);var x=r(c,y[0],y[1]);return a(function(){v.hasValue=!0,v.value=x},[x]),o(x),x},tv}var EL;function Qz(){return EL||(EL=1,ev.exports=Xz()),ev.exports}var Zz=Qz();function Jz(t){t()}function eK(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Jz(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var TL={notify(){},get:()=>[]};function tK(t,e){let n,r=TL,i=0,a=!1;function s(x){d();const b=r.subscribe(x);let T=!1;return()=>{T||(T=!0,b(),h())}}function o(){r.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return a}function d(){i++,n||(n=t.subscribe(c),r=eK())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=TL)}function p(){a||(a=!0,d())}function y(){a&&(a=!1,h())}const v={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:y,getListeners:()=>r};return v}var nK=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rK=nK(),iK=()=>typeof navigator<"u"&&navigator.product==="ReactNative",aK=iK(),sK=()=>rK||aK?F.useLayoutEffect:F.useEffect,oK=sK(),nv=Symbol.for("react-redux-context"),rv=typeof globalThis<"u"?globalThis:{};function lK(){if(!F.createContext)return{};const t=rv[nv]??(rv[nv]=new Map);let e=t.get(F.createContext);return e||(e=F.createContext(null),t.set(F.createContext,e)),e}var Ya=lK();function uK(t){const{children:e,context:n,serverState:r,store:i}=t,a=F.useMemo(()=>{const c=tK(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=F.useMemo(()=>i.getState(),[i]);oK(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||Ya;return F.createElement(o.Provider,{value:a},e)}var cK=uK;function s1(t=Ya){return function(){return F.useContext(t)}}var CB=s1();function LB(t=Ya){const e=t===Ya?CB:s1(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var fK=LB();function dK(t=Ya){const e=t===Ya?fK:LB(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var rn=dK(),hK=(t,e)=>t===e;function mK(t=Ya){const e=t===Ya?CB:s1(t),n=(r,i={})=>{const{equalityFn:a=hK}=typeof i=="function"?{equalityFn:i}:i,s=e(),{store:o,subscription:c,getServerState:u}=s;F.useRef(!0);const d=F.useCallback({[r.name](p){return r(p)}}[r.name],[r]),h=Zz.useSyncExternalStoreWithSelector(c.addNestedSub,o.getState,u||o.getState,d,a);return F.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var an=mK();const DB="LOGIN_REQUEST",o1="LOGIN_SUCCESS",IB="LOGIN_FAILURE",PB="LOGOUT",pK="LOGOUT_SUCCESS";function NB(t,e){return function(){return t.apply(e,arguments)}}const{toString:gK}=Object.prototype,{getPrototypeOf:l1}=Object,{iterator:Gp,toStringTag:MB}=Symbol,Vp=(t=>e=>{const n=gK.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ti=t=>(t=t.toLowerCase(),e=>Vp(e)===t),qp=t=>e=>typeof e===t,{isArray:Kl}=Array,Fc=qp("undefined");function yK(t){return t!==null&&!Fc(t)&&t.constructor!==null&&!Fc(t.constructor)&&Xn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kB=ti("ArrayBuffer");function vK(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&kB(t.buffer),e}const bK=qp("string"),Xn=qp("function"),jB=qp("number"),Hp=t=>t!==null&&typeof t=="object",xK=t=>t===!0||t===!1,rm=t=>{if(Vp(t)!=="object")return!1;const e=l1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(MB in t)&&!(Gp in t)},SK=ti("Date"),EK=ti("File"),TK=ti("Blob"),AK=ti("FileList"),wK=t=>Hp(t)&&Xn(t.pipe),_K=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Xn(t.append)&&((e=Vp(t))==="formdata"||e==="object"&&Xn(t.toString)&&t.toString()==="[object FormData]"))},RK=ti("URLSearchParams"),[OK,CK,LK,DK]=["ReadableStream","Request","Response","Headers"].map(ti),IK=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ff(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Kl(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length;let o;for(r=0;r<s;r++)o=a[r],e.call(null,t[o],o,t)}}function UB(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Ms=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,BB=t=>!Fc(t)&&t!==Ms;function qE(){const{caseless:t}=BB(this)&&this||{},e={},n=(r,i)=>{const a=t&&UB(e,i)||i;rm(e[a])&&rm(r)?e[a]=qE(e[a],r):rm(r)?e[a]=qE({},r):Kl(r)?e[a]=r.slice():e[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ff(arguments[r],n);return e}const PK=(t,e,n,{allOwnKeys:r}={})=>(Ff(e,(i,a)=>{n&&Xn(i)?t[a]=NB(i,n):t[a]=i},{allOwnKeys:r}),t),NK=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),MK=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},kK=(t,e,n,r)=>{let i,a,s;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],(!r||r(s,t,e))&&!o[s]&&(e[s]=t[s],o[s]=!0);t=n!==!1&&l1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},jK=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},UK=t=>{if(!t)return null;if(Kl(t))return t;let e=t.length;if(!jB(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},BK=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&l1(Uint8Array)),FK=(t,e)=>{const r=(t&&t[Gp]).call(t);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},$K=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},GK=ti("HTMLFormElement"),VK=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),AL=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),qK=ti("RegExp"),FB=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ff(n,(i,a)=>{let s;(s=e(i,a,t))!==!1&&(r[a]=s||i)}),Object.defineProperties(t,r)},HK=t=>{FB(t,(e,n)=>{if(Xn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Xn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},zK=(t,e)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return Kl(t)?r(t):r(String(t).split(e)),n},KK=()=>{},YK=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function WK(t){return!!(t&&Xn(t.append)&&t[MB]==="FormData"&&t[Gp])}const XK=t=>{const e=new Array(10),n=(r,i)=>{if(Hp(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const a=Kl(r)?[]:{};return Ff(r,(s,o)=>{const c=n(s,i+1);!Fc(c)&&(a[o]=c)}),e[i]=void 0,a}}return r};return n(t,0)},QK=ti("AsyncFunction"),ZK=t=>t&&(Hp(t)||Xn(t))&&Xn(t.then)&&Xn(t.catch),$B=((t,e)=>t?setImmediate:e?((n,r)=>(Ms.addEventListener("message",({source:i,data:a})=>{i===Ms&&a===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Ms.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Xn(Ms.postMessage)),JK=typeof queueMicrotask<"u"?queueMicrotask.bind(Ms):typeof process<"u"&&process.nextTick||$B,e9=t=>t!=null&&Xn(t[Gp]),oe={isArray:Kl,isArrayBuffer:kB,isBuffer:yK,isFormData:_K,isArrayBufferView:vK,isString:bK,isNumber:jB,isBoolean:xK,isObject:Hp,isPlainObject:rm,isReadableStream:OK,isRequest:CK,isResponse:LK,isHeaders:DK,isUndefined:Fc,isDate:SK,isFile:EK,isBlob:TK,isRegExp:qK,isFunction:Xn,isStream:wK,isURLSearchParams:RK,isTypedArray:BK,isFileList:AK,forEach:Ff,merge:qE,extend:PK,trim:IK,stripBOM:NK,inherits:MK,toFlatObject:kK,kindOf:Vp,kindOfTest:ti,endsWith:jK,toArray:UK,forEachEntry:FK,matchAll:$K,isHTMLForm:GK,hasOwnProperty:AL,hasOwnProp:AL,reduceDescriptors:FB,freezeMethods:HK,toObjectSet:zK,toCamelCase:VK,noop:KK,toFiniteNumber:YK,findKey:UB,global:Ms,isContextDefined:BB,isSpecCompliantForm:WK,toJSONObject:XK,isAsyncFn:QK,isThenable:ZK,setImmediate:$B,asap:JK,isIterable:e9};function Ue(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}oe.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const GB=Ue.prototype,VB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{VB[t]={value:t}});Object.defineProperties(Ue,VB);Object.defineProperty(GB,"isAxiosError",{value:!0});Ue.from=(t,e,n,r,i,a)=>{const s=Object.create(GB);return oe.toFlatObject(t,s,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Ue.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,a&&Object.assign(s,a),s};const t9=null;function HE(t){return oe.isPlainObject(t)||oe.isArray(t)}function qB(t){return oe.endsWith(t,"[]")?t.slice(0,-2):t}function wL(t,e,n){return t?t.concat(e).map(function(i,a){return i=qB(i),!n&&a?"["+i+"]":i}).join(n?".":""):e}function n9(t){return oe.isArray(t)&&!t.some(HE)}const r9=oe.toFlatObject(oe,{},null,function(e){return/^is[A-Z]/.test(e)});function zp(t,e,n){if(!oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=oe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,b){return!oe.isUndefined(b[x])});const r=n.metaTokens,i=n.visitor||d,a=n.dots,s=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(e);if(!oe.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(oe.isDate(v))return v.toISOString();if(oe.isBoolean(v))return v.toString();if(!c&&oe.isBlob(v))throw new Ue("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(v)||oe.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,x,b){let T=v;if(v&&!b&&typeof v=="object"){if(oe.endsWith(x,"{}"))x=r?x:x.slice(0,-2),v=JSON.stringify(v);else if(oe.isArray(v)&&n9(v)||(oe.isFileList(v)||oe.endsWith(x,"[]"))&&(T=oe.toArray(v)))return x=qB(x),T.forEach(function(w,O){!(oe.isUndefined(w)||w===null)&&e.append(s===!0?wL([x],O,a):s===null?x:x+"[]",u(w))}),!1}return HE(v)?!0:(e.append(wL(b,x,a),u(v)),!1)}const h=[],p=Object.assign(r9,{defaultVisitor:d,convertValue:u,isVisitable:HE});function y(v,x){if(!oe.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(v),oe.forEach(v,function(T,_){(!(oe.isUndefined(T)||T===null)&&i.call(e,T,oe.isString(_)?_.trim():_,x,p))===!0&&y(T,x?x.concat(_):[_])}),h.pop()}}if(!oe.isObject(t))throw new TypeError("data must be an object");return y(t),e}function _L(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function u1(t,e){this._pairs=[],t&&zp(t,this,e)}const HB=u1.prototype;HB.append=function(e,n){this._pairs.push([e,n])};HB.toString=function(e){const n=e?function(r){return e.call(this,r,_L)}:_L;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function i9(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zB(t,e,n){if(!e)return t;const r=n&&n.encode||i9;oe.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(e,n):a=oe.isURLSearchParams(e)?e.toString():new u1(e,n).toString(r),a){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class RL{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const KB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},a9=typeof URLSearchParams<"u"?URLSearchParams:u1,s9=typeof FormData<"u"?FormData:null,o9=typeof Blob<"u"?Blob:null,l9={isBrowser:!0,classes:{URLSearchParams:a9,FormData:s9,Blob:o9},protocols:["http","https","file","blob","url","data"]},c1=typeof window<"u"&&typeof document<"u",zE=typeof navigator=="object"&&navigator||void 0,u9=c1&&(!zE||["ReactNative","NativeScript","NS"].indexOf(zE.product)<0),c9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",f9=c1&&window.location.href||"http://localhost",d9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:c1,hasStandardBrowserEnv:u9,hasStandardBrowserWebWorkerEnv:c9,navigator:zE,origin:f9},Symbol.toStringTag,{value:"Module"})),Mn={...d9,...l9};function h9(t,e){return zp(t,new Mn.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,a){return Mn.isNode&&oe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function m9(t){return oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function p9(t){const e={},n=Object.keys(t);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],e[a]=t[a];return e}function YB(t){function e(n,r,i,a){let s=n[a++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),c=a>=n.length;return s=!s&&oe.isArray(i)?i.length:s,c?(oe.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!o):((!i[s]||!oe.isObject(i[s]))&&(i[s]=[]),e(n,r,i[s],a)&&oe.isArray(i[s])&&(i[s]=p9(i[s])),!o)}if(oe.isFormData(t)&&oe.isFunction(t.entries)){const n={};return oe.forEachEntry(t,(r,i)=>{e(m9(r),i,n,0)}),n}return null}function g9(t,e,n){if(oe.isString(t))try{return(e||JSON.parse)(t),oe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const $f={transitional:KB,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=oe.isObject(e);if(a&&oe.isHTMLForm(e)&&(e=new FormData(e)),oe.isFormData(e))return i?JSON.stringify(YB(e)):e;if(oe.isArrayBuffer(e)||oe.isBuffer(e)||oe.isStream(e)||oe.isFile(e)||oe.isBlob(e)||oe.isReadableStream(e))return e;if(oe.isArrayBufferView(e))return e.buffer;if(oe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return h9(e,this.formSerializer).toString();if((o=oe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return zp(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),g9(e)):e}],transformResponse:[function(e){const n=this.transitional||$f.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(oe.isResponse(e)||oe.isReadableStream(e))return e;if(e&&oe.isString(e)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?Ue.from(o,Ue.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mn.classes.FormData,Blob:Mn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],t=>{$f.headers[t]={}});const y9=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),v9=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||e[n]&&y9[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},OL=Symbol("internals");function sc(t){return t&&String(t).trim().toLowerCase()}function im(t){return t===!1||t==null?t:oe.isArray(t)?t.map(im):String(t)}function b9(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const x9=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function iv(t,e,n,r,i){if(oe.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!oe.isString(e)){if(oe.isString(r))return e.indexOf(r)!==-1;if(oe.isRegExp(r))return r.test(e)}}function S9(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function E9(t,e){const n=oe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,a,s){return this[r].call(this,e,i,a,s)},configurable:!0})})}let Qn=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function a(o,c,u){const d=sc(c);if(!d)throw new Error("header name must be a non-empty string");const h=oe.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||c]=im(o))}const s=(o,c)=>oe.forEach(o,(u,d)=>a(u,d,c));if(oe.isPlainObject(e)||e instanceof this.constructor)s(e,n);else if(oe.isString(e)&&(e=e.trim())&&!x9(e))s(v9(e),n);else if(oe.isObject(e)&&oe.isIterable(e)){let o={},c,u;for(const d of e){if(!oe.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(c=o[u])?oe.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}s(o,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=sc(e),e){const r=oe.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return b9(i);if(oe.isFunction(n))return n.call(this,i,r);if(oe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=sc(e),e){const r=oe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||iv(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function a(s){if(s=sc(s),s){const o=oe.findKey(r,s);o&&(!n||iv(r,r[o],o,n))&&(delete r[o],i=!0)}}return oe.isArray(e)?e.forEach(a):a(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const a=n[r];(!e||iv(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const n=this,r={};return oe.forEach(this,(i,a)=>{const s=oe.findKey(r,a);if(s){n[s]=im(i),delete n[a];return}const o=e?S9(a):String(a).trim();o!==a&&delete n[a],n[o]=im(i),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return oe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&oe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[OL]=this[OL]={accessors:{}}).accessors,i=this.prototype;function a(s){const o=sc(s);r[o]||(E9(i,s),r[o]=!0)}return oe.isArray(e)?e.forEach(a):a(e),this}};Qn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(Qn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});oe.freezeMethods(Qn);function av(t,e){const n=this||$f,r=e||n,i=Qn.from(r.headers);let a=r.data;return oe.forEach(t,function(o){a=o.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function WB(t){return!!(t&&t.__CANCEL__)}function Yl(t,e,n){Ue.call(this,t??"canceled",Ue.ERR_CANCELED,e,n),this.name="CanceledError"}oe.inherits(Yl,Ue,{__CANCEL__:!0});function XB(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ue("Request failed with status code "+n.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function T9(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function A9(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,a=0,s;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[a];s||(s=u),n[i]=c,r[i]=u;let h=a,p=0;for(;h!==i;)p+=n[h++],h=h%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),u-s<e)return;const y=d&&u-d;return y?Math.round(p*1e3/y):void 0}}function w9(t,e){let n=0,r=1e3/e,i,a;const s=(u,d=Date.now())=>{n=d,i=null,a&&(clearTimeout(a),a=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=r?s(u,d):(i=u,a||(a=setTimeout(()=>{a=null,s(i)},r-h)))},()=>i&&s(i)]}const xm=(t,e,n=3)=>{let r=0;const i=A9(50,250);return w9(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,c=s-r,u=i(c),d=s<=o;r=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&d?(o-s)/u:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(h)},n)},CL=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},LL=t=>(...e)=>oe.asap(()=>t(...e)),_9=Mn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Mn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Mn.origin),Mn.navigator&&/(msie|trident)/i.test(Mn.navigator.userAgent)):()=>!0,R9=Mn.hasStandardBrowserEnv?{write(t,e,n,r,i,a){const s=[t+"="+encodeURIComponent(e)];oe.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),oe.isString(r)&&s.push("path="+r),oe.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function O9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function C9(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function QB(t,e,n){let r=!O9(e);return t&&(r||n==!1)?C9(t,e):e}const DL=t=>t instanceof Qn?{...t}:t;function Ys(t,e){e=e||{};const n={};function r(u,d,h,p){return oe.isPlainObject(u)&&oe.isPlainObject(d)?oe.merge.call({caseless:p},u,d):oe.isPlainObject(d)?oe.merge({},d):oe.isArray(d)?d.slice():d}function i(u,d,h,p){if(oe.isUndefined(d)){if(!oe.isUndefined(u))return r(void 0,u,h,p)}else return r(u,d,h,p)}function a(u,d){if(!oe.isUndefined(d))return r(void 0,d)}function s(u,d){if(oe.isUndefined(d)){if(!oe.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function o(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(u,d,h)=>i(DL(u),DL(d),h,!0)};return oe.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=c[d]||i,p=h(t[d],e[d],d);oe.isUndefined(p)&&h!==o||(n[d]=p)}),n}const ZB=t=>{const e=Ys({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=e;e.headers=s=Qn.from(s),e.url=zB(QB(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(oe.isFormData(n)){if(Mn.hasStandardBrowserEnv||Mn.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[u,...d]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Mn.hasStandardBrowserEnv&&(r&&oe.isFunction(r)&&(r=r(e)),r||r!==!1&&_9(e.url))){const u=i&&a&&R9.read(a);u&&s.set(i,u)}return e},L9=typeof XMLHttpRequest<"u",D9=L9&&function(t){return new Promise(function(n,r){const i=ZB(t);let a=i.data;const s=Qn.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=i,d,h,p,y,v;function x(){y&&y(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function T(){if(!b)return;const w=Qn.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),R={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:t,request:b};XB(function(L){n(L),x()},function(L){r(L),x()},R),b=null}"onloadend"in b?b.onloadend=T:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(T)},b.onabort=function(){b&&(r(new Ue("Request aborted",Ue.ECONNABORTED,t,b)),b=null)},b.onerror=function(){r(new Ue("Network Error",Ue.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let O=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const R=i.transitional||KB;i.timeoutErrorMessage&&(O=i.timeoutErrorMessage),r(new Ue(O,R.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,t,b)),b=null},a===void 0&&s.setContentType(null),"setRequestHeader"in b&&oe.forEach(s.toJSON(),function(O,R){b.setRequestHeader(R,O)}),oe.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),o&&o!=="json"&&(b.responseType=i.responseType),u&&([p,v]=xm(u,!0),b.addEventListener("progress",p)),c&&b.upload&&([h,y]=xm(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(d=w=>{b&&(r(!w||w.type?new Yl(null,t,b):w),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const _=T9(i.url);if(_&&Mn.protocols.indexOf(_)===-1){r(new Ue("Unsupported protocol "+_+":",Ue.ERR_BAD_REQUEST,t));return}b.send(a||null)})},I9=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const a=function(u){if(!i){i=!0,o();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Ue?d:new Yl(d instanceof Error?d.message:d))}};let s=e&&setTimeout(()=>{s=null,a(new Ue(`timeout ${e} of ms exceeded`,Ue.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),t=null)};t.forEach(u=>u.addEventListener("abort",a));const{signal:c}=r;return c.unsubscribe=()=>oe.asap(o),c}},P9=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},N9=async function*(t,e){for await(const n of M9(t))yield*P9(n,e)},M9=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},IL=(t,e,n,r)=>{const i=N9(t,e);let a=0,s,o=c=>{s||(s=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await i.next();if(u){o(),c.close();return}let h=d.byteLength;if(n){let p=a+=h;n(p)}c.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},Kp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",JB=Kp&&typeof ReadableStream=="function",k9=Kp&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),eF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},j9=JB&&eF(()=>{let t=!1;const e=new Request(Mn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),PL=64*1024,KE=JB&&eF(()=>oe.isReadableStream(new Response("").body)),Sm={stream:KE&&(t=>t.body)};Kp&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Sm[e]&&(Sm[e]=oe.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Ue(`Response type '${e}' is not supported`,Ue.ERR_NOT_SUPPORT,r)})})})(new Response);const U9=async t=>{if(t==null)return 0;if(oe.isBlob(t))return t.size;if(oe.isSpecCompliantForm(t))return(await new Request(Mn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(t)||oe.isArrayBuffer(t))return t.byteLength;if(oe.isURLSearchParams(t)&&(t=t+""),oe.isString(t))return(await k9(t)).byteLength},B9=async(t,e)=>{const n=oe.toFiniteNumber(t.getContentLength());return n??U9(e)},F9=Kp&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:p}=ZB(t);u=u?(u+"").toLowerCase():"text";let y=I9([i,a&&a.toAbortSignal()],s),v;const x=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let b;try{if(c&&j9&&n!=="get"&&n!=="head"&&(b=await B9(d,r))!==0){let R=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(oe.isFormData(r)&&(C=R.headers.get("content-type"))&&d.setContentType(C),R.body){const[L,P]=CL(b,xm(LL(c)));r=IL(R.body,PL,L,P)}}oe.isString(h)||(h=h?"include":"omit");const T="credentials"in Request.prototype;v=new Request(e,{...p,signal:y,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:T?h:void 0});let _=await fetch(v,p);const w=KE&&(u==="stream"||u==="response");if(KE&&(o||w&&x)){const R={};["status","statusText","headers"].forEach(N=>{R[N]=_[N]});const C=oe.toFiniteNumber(_.headers.get("content-length")),[L,P]=o&&CL(C,xm(LL(o),!0))||[];_=new Response(IL(_.body,PL,L,()=>{P&&P(),x&&x()}),R)}u=u||"text";let O=await Sm[oe.findKey(Sm,u)||"text"](_,t);return!w&&x&&x(),await new Promise((R,C)=>{XB(R,C,{data:O,headers:Qn.from(_.headers),status:_.status,statusText:_.statusText,config:t,request:v})})}catch(T){throw x&&x(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new Ue("Network Error",Ue.ERR_NETWORK,t,v),{cause:T.cause||T}):Ue.from(T,T&&T.code,t,v)}}),YE={http:t9,xhr:D9,fetch:F9};oe.forEach(YE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const NL=t=>`- ${t}`,$9=t=>oe.isFunction(t)||t===null||t===!1,tF={getAdapter:t=>{t=oe.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let a=0;a<e;a++){n=t[a];let s;if(r=n,!$9(n)&&(r=YE[(s=String(n)).toLowerCase()],r===void 0))throw new Ue(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+a]=r}if(!r){const a=Object.entries(i).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?a.length>1?`since :
`+a.map(NL).join(`
`):" "+NL(a[0]):"as no adapter specified";throw new Ue("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:YE};function sv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Yl(null,t)}function ML(t){return sv(t),t.headers=Qn.from(t.headers),t.data=av.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),tF.getAdapter(t.adapter||$f.adapter)(t).then(function(r){return sv(t),r.data=av.call(t,t.transformResponse,r),r.headers=Qn.from(r.headers),r},function(r){return WB(r)||(sv(t),r&&r.response&&(r.response.data=av.call(t,t.transformResponse,r.response),r.response.headers=Qn.from(r.response.headers))),Promise.reject(r)})}const nF="1.10.0",Yp={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Yp[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const kL={};Yp.transitional=function(e,n,r){function i(a,s){return"[Axios v"+nF+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,o)=>{if(e===!1)throw new Ue(i(s," has been removed"+(n?" in "+n:"")),Ue.ERR_DEPRECATED);return n&&!kL[s]&&(kL[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,s,o):!0}};Yp.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function G9(t,e,n){if(typeof t!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const a=r[i],s=e[a];if(s){const o=t[a],c=o===void 0||s(o,a,t);if(c!==!0)throw new Ue("option "+a+" must be "+c,Ue.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ue("Unknown option "+a,Ue.ERR_BAD_OPTION)}}const am={assertOptions:G9,validators:Yp},ci=am.validators;let Gs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new RL,response:new RL}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ys(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:a}=n;r!==void 0&&am.assertOptions(r,{silentJSONParsing:ci.transitional(ci.boolean),forcedJSONParsing:ci.transitional(ci.boolean),clarifyTimeoutError:ci.transitional(ci.boolean)},!1),i!=null&&(oe.isFunction(i)?n.paramsSerializer={serialize:i}:am.assertOptions(i,{encode:ci.function,serialize:ci.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),am.assertOptions(n,{baseUrl:ci.spelling("baseURL"),withXsrfToken:ci.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=a&&oe.merge(a.common,a[n.method]);a&&oe.forEach(["delete","get","head","post","put","patch","common"],v=>{delete a[v]}),n.headers=Qn.concat(s,a);const o=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(c=c&&x.synchronous,o.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let d,h=0,p;if(!c){const v=[ML.bind(this),void 0];for(v.unshift.apply(v,o),v.push.apply(v,u),p=v.length,d=Promise.resolve(n);h<p;)d=d.then(v[h++],v[h++]);return d}p=o.length;let y=n;for(h=0;h<p;){const v=o[h++],x=o[h++];try{y=v(y)}catch(b){x.call(this,b);break}}try{d=ML.call(this,y)}catch(v){return Promise.reject(v)}for(h=0,p=u.length;h<p;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Ys(this.defaults,e);const n=QB(e.baseURL,e.url,e.allowAbsoluteUrls);return zB(n,e.params,e.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(e){Gs.prototype[e]=function(n,r){return this.request(Ys(r||{},{method:e,url:n,data:(r||{}).data}))}});oe.forEach(["post","put","patch"],function(e){function n(r){return function(a,s,o){return this.request(Ys(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Gs.prototype[e]=n(),Gs.prototype[e+"Form"]=n(!0)});let V9=class rF{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(o=>{r.subscribe(o),a=o}).then(i);return s.cancel=function(){r.unsubscribe(a)},s},e(function(a,s,o){r.reason||(r.reason=new Yl(a,s,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new rF(function(i){e=i}),cancel:e}}};function q9(t){return function(n){return t.apply(null,n)}}function H9(t){return oe.isObject(t)&&t.isAxiosError===!0}const WE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(WE).forEach(([t,e])=>{WE[e]=t});function iF(t){const e=new Gs(t),n=NB(Gs.prototype.request,e);return oe.extend(n,Gs.prototype,e,{allOwnKeys:!0}),oe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return iF(Ys(t,i))},n}const Gt=iF($f);Gt.Axios=Gs;Gt.CanceledError=Yl;Gt.CancelToken=V9;Gt.isCancel=WB;Gt.VERSION=nF;Gt.toFormData=zp;Gt.AxiosError=Ue;Gt.Cancel=Gt.CanceledError;Gt.all=function(e){return Promise.all(e)};Gt.spread=q9;Gt.isAxiosError=H9;Gt.mergeConfig=Ys;Gt.AxiosHeaders=Qn;Gt.formToJSON=t=>YB(oe.isHTMLForm(t)?new FormData(t):t);Gt.getAdapter=tF.getAdapter;Gt.HttpStatusCode=WE;Gt.default=Gt;const{Axios:NSe,AxiosError:MSe,CanceledError:kSe,isCancel:jSe,CancelToken:USe,VERSION:BSe,all:FSe,Cancel:$Se,isAxiosError:GSe,spread:VSe,toFormData:qSe,AxiosHeaders:HSe,HttpStatusCode:zSe,formToJSON:KSe,getAdapter:YSe,mergeConfig:WSe}=Gt;function En(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var z9=typeof Symbol=="function"&&Symbol.observable||"@@observable",jL=z9,ov=()=>Math.random().toString(36).substring(7).split("").join("."),K9={INIT:`@@redux/INIT${ov()}`,REPLACE:`@@redux/REPLACE${ov()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ov()}`},Em=K9;function aF(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function sF(t,e,n){if(typeof t!="function")throw new Error(En(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(En(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(En(1));return n(sF)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((b,T)=>{s.set(T,b)}))}function d(){if(c)throw new Error(En(3));return i}function h(b){if(typeof b!="function")throw new Error(En(4));if(c)throw new Error(En(5));let T=!0;u();const _=o++;return s.set(_,b),function(){if(T){if(c)throw new Error(En(6));T=!1,u(),s.delete(_),a=null}}}function p(b){if(!aF(b))throw new Error(En(7));if(typeof b.type>"u")throw new Error(En(8));if(typeof b.type!="string")throw new Error(En(17));if(c)throw new Error(En(9));try{c=!0,i=r(i,b)}finally{c=!1}return(a=s).forEach(_=>{_()}),b}function y(b){if(typeof b!="function")throw new Error(En(10));r=b,p({type:Em.REPLACE})}function v(){const b=h;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(En(11));function _(){const O=T;O.next&&O.next(d())}return _(),{unsubscribe:b(_)}},[jL](){return this}}}return p({type:Em.INIT}),{dispatch:p,subscribe:h,getState:d,replaceReducer:y,[jL]:v}}function Y9(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Em.INIT})>"u")throw new Error(En(12));if(typeof n(void 0,{type:Em.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(En(13))})}function oF(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{Y9(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let d=0;d<r.length;d++){const h=r[d],p=n[h],y=s[h],v=p(y,o);if(typeof v>"u")throw o&&o.type,new Error(En(14));u[h]=v,c=c||v!==y}return c=c||r.length!==Object.keys(s).length,c?u:s}}function Tm(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function W9(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(En(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=Tm(...o)(i.dispatch),{...i,dispatch:a}}}function lF(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var X9=lF(),Q9=lF,Z9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Tm:Tm.apply(null,arguments)},uF=class xc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,xc.prototype)}static get[Symbol.species](){return xc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new xc(...e[0].concat(this)):new xc(...e.concat(this))}};function J9(t){return typeof t=="boolean"}var e7=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new uF;return n&&(J9(n)?s.push(X9):s.push(Q9(n.extraArgument))),s},t7="RTK_autoBatch",UL=t=>e=>{setTimeout(e,t)},n7=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:UL(10):t.type==="callback"?t.queueNotification:UL(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const h=()=>i&&d(),p=r.subscribe(h);return o.add(d),()=>{p(),o.delete(d)}},dispatch(d){var h;try{return i=!((h=d==null?void 0:d.meta)!=null&&h[t7]),a=!i,a&&(s||(s=!0,c(u))),r.dispatch(d)}finally{i=!0}}})},r7=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new uF(t);return r&&i.push(n7(typeof r=="object"?r:void 0)),i};function i7(t){const e=e7(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(aF(n))o=oF(n);else throw new Error(a7(1));let c;typeof r=="function"?c=r(e):c=e();let u=Tm;i&&(u=Z9({trace:!1,...typeof i=="object"&&i}));const d=W9(...c),h=r7(d);let p=typeof s=="function"?s(h):h();const y=u(...p);return sF(o,a,y)}function a7(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const BL={accessToken:localStorage.getItem("access_token")||null,refreshToken:localStorage.getItem("refresh_token")||null,isAuthenticated:!!localStorage.getItem("access_token"),user:JSON.parse(localStorage.getItem("user_info"))||null,loading:!1,error:null},s7=(t=BL,e)=>{switch(e.type){case DB:return{...t,loading:!0,error:null};case o1:return console.log("Login successful, updating state with tokens and user info:",e.payload),{...t,loading:!1,isAuthenticated:!0,accessToken:e.payload.accessToken,refreshToken:e.payload.refreshToken,user:e.payload.user,error:null};case IB:return{...t,loading:!1,isAuthenticated:!1,accessToken:null,refreshToken:null,user:null,error:e.payload};case PB:return{...BL};default:return t}},cF="GET_CONTENTS_REQUEST",fF="GET_CONTENTS_SUCCESS",dF="GET_CONTENTS_FAILURE",hF="GET_CONTENT_REQUEST",mF="GET_CONTENT_SUCCESS",pF="GET_CONTENT_FAILURE",gF="CREATE_CONTENT_REQUEST",yF="CREATE_CONTENT_SUCCESS",vF="CREATE_CONTENT_FAILURE",bF="UPDATE_CONTENT_REQUEST",xF="UPDATE_CONTENT_SUCCESS",SF="UPDATE_CONTENT_FAILURE",EF="DELETE_CONTENT_REQUEST",TF="DELETE_CONTENT_SUCCESS",AF="DELETE_CONTENT_FAILURE",o7={contents:[],pagination:{current_page:1,last_page:1,per_page:15,total:0,from:0,to:0,links:[]},selectedContent:null,loading:!1,error:null},l7=(t=o7,e)=>{switch(e.type){case cF:case hF:case gF:case bF:case EF:return{...t,loading:!0,error:null};case fF:return{...t,loading:!1,contents:e.payload.data,pagination:{current_page:e.payload.current_page,last_page:e.payload.last_page,per_page:e.payload.per_page,total:e.payload.total,from:e.payload.from,to:e.payload.to,links:e.payload.links},error:null};case mF:return{...t,loading:!1,selectedContent:e.payload,error:null};case yF:return{...t,loading:!1,contents:[...t.contents,e.payload],error:null};case xF:return{...t,loading:!1,contents:t.contents.map(n=>n.id===e.payload.id?e.payload:n),selectedContent:e.payload,error:null};case TF:return{...t,loading:!1,contents:t.contents.filter(n=>n.id!==e.payload),error:null};case dF:case pF:case vF:case SF:case AF:return{...t,loading:!1,error:e.payload};default:return t}},wF="FETCH_OVERVIEW_REQUEST",_F="FETCH_OVERVIEW_SUCCESS",RF="FETCH_OVERVIEW_FAILURE",OF="SET_TIME_RANGE",u7={data:null,timeRange:"week",loading:!1,error:null},c7=(t=u7,e)=>{switch(e.type){case wF:return{...t,loading:!0,error:null};case _F:return{...t,loading:!1,data:e.payload,error:null};case RF:return{...t,loading:!1,error:e.payload,data:null};case OF:return{...t,timeRange:e.payload};default:return t}},CF="FETCH_DEVICES_REQUEST",LF="FETCH_DEVICES_SUCCESS",DF="FETCH_DEVICES_FAILURE",IF="FETCH_DEVICE_BY_ID_REQUEST",PF="FETCH_DEVICE_BY_ID_SUCCESS",NF="FETCH_DEVICE_BY_ID_FAILURE",MF="CREATE_DEVICE_REQUEST",kF="CREATE_DEVICE_SUCCESS",jF="CREATE_DEVICE_FAILURE",UF="UPDATE_DEVICE_REQUEST",BF="UPDATE_DEVICE_SUCCESS",FF="UPDATE_DEVICE_FAILURE",$F="DELETE_DEVICE_REQUEST",GF="DELETE_DEVICE_SUCCESS",VF="DELETE_DEVICE_FAILURE",f7={devices:[],selectedDevice:null,pagination:{total:0,per_page:20,current_page:1,last_page:1},loading:!1,error:null},d7=(t=f7,e)=>{var n;switch(e.type){case CF:case IF:case MF:case UF:case $F:return{...t,loading:!0,error:null};case LF:return{...t,loading:!1,devices:e.payload.devices,pagination:e.payload.pagination,error:null};case PF:return{...t,loading:!1,selectedDevice:e.payload,error:null};case kF:return{...t,loading:!1,devices:[e.payload,...t.devices],error:null};case BF:return{...t,loading:!1,devices:t.devices.map(r=>r.id===e.payload.id?e.payload:r),selectedDevice:((n=t.selectedDevice)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedDevice,error:null};case GF:return{...t,loading:!1,devices:t.devices.filter(r=>r.id!==e.payload),error:null};case DF:case NF:case jF:case FF:case VF:return{...t,loading:!1,error:e.payload};default:return t}},qF=6048e5,h7=864e5,Eh=43200,FL=1440,$L=Symbol.for("constructDateFrom");function Nr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&$L in t?t[$L](e):t instanceof Date?new t.constructor(e):new Date(e)}function nn(t,e){return Nr(e||t,t)}function HF(t,e,n){const r=nn(t,n==null?void 0:n.in);return isNaN(e)?Nr(t,NaN):(e&&r.setDate(r.getDate()+e),r)}let m7={};function Gf(){return m7}function $c(t,e){var o,c,u,d;const n=Gf(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=nn(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Am(t,e){return $c(t,{...e,weekStartsOn:1})}function zF(t,e){const n=nn(t,e==null?void 0:e.in),r=n.getFullYear(),i=Nr(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Am(i),s=Nr(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Am(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function wm(t){const e=nn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Vf(t,...e){const n=Nr.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function _m(t,e){const n=nn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function p7(t,e,n){const[r,i]=Vf(n==null?void 0:n.in,t,e),a=_m(r),s=_m(i),o=+a-wm(a),c=+s-wm(s);return Math.round((o-c)/h7)}function g7(t,e){const n=zF(t,e),r=Nr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Am(r)}function sm(t,e){const n=+nn(t)-+nn(e);return n<0?-1:n>0?1:n}function Wp(t){return Nr(t,Date.now())}function f1(t,e,n){const[r,i]=Vf(n==null?void 0:n.in,t,e);return+_m(r)==+_m(i)}function y7(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function v7(t){return!(!y7(t)&&typeof t!="number"||isNaN(+nn(t)))}function b7(t,e,n){const[r,i]=Vf(n==null?void 0:n.in,t,e),a=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return a*12+s}function x7(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function S7(t,e){return+nn(t)-+nn(e)}function E7(t,e){const n=nn(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function T7(t,e){const n=nn(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function A7(t,e){const n=nn(t,e==null?void 0:e.in);return+E7(n,e)==+T7(n,e)}function w7(t,e,n){const[r,i,a]=Vf(n==null?void 0:n.in,t,t,e),s=sm(i,a),o=Math.abs(b7(i,a));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*o);let c=sm(i,a)===-s;A7(r)&&o===1&&sm(r,a)===1&&(c=!1);const u=s*(o-+c);return u===0?0:u}function _7(t,e,n){const r=S7(t,e)/1e3;return x7(n==null?void 0:n.roundingMethod)(r)}function R7(t,e){const n=nn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const O7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},C7=(t,e,n)=>{let r;const i=O7[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function lv(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const L7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},D7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},I7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P7={date:lv({formats:L7,defaultWidth:"full"}),time:lv({formats:D7,defaultWidth:"full"}),dateTime:lv({formats:I7,defaultWidth:"full"})},N7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},M7=(t,e,n,r)=>N7[t];function oc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const k7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},j7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},U7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},B7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},F7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},G7=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},V7={ordinalNumber:G7,era:oc({values:k7,defaultWidth:"wide"}),quarter:oc({values:j7,defaultWidth:"wide",argumentCallback:t=>t-1}),month:oc({values:U7,defaultWidth:"wide"}),day:oc({values:B7,defaultWidth:"wide"}),dayPeriod:oc({values:F7,defaultWidth:"wide",formattingValues:$7,defaultFormattingWidth:"wide"})};function lc(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?H7(o,h=>h.test(s)):q7(o,h=>h.test(s));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function q7(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function H7(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function z7(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const K7=/^(\d+)(th|st|nd|rd)?/i,Y7=/\d+/i,W7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},X7={any:[/^b/i,/^(a|c)/i]},Q7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Z7={any:[/1/i,/2/i,/3/i,/4/i]},J7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aY={ordinalNumber:z7({matchPattern:K7,parsePattern:Y7,valueCallback:t=>parseInt(t,10)}),era:lc({matchPatterns:W7,defaultMatchWidth:"wide",parsePatterns:X7,defaultParseWidth:"any"}),quarter:lc({matchPatterns:Q7,defaultMatchWidth:"wide",parsePatterns:Z7,defaultParseWidth:"any",valueCallback:t=>t+1}),month:lc({matchPatterns:J7,defaultMatchWidth:"wide",parsePatterns:eY,defaultParseWidth:"any"}),day:lc({matchPatterns:tY,defaultMatchWidth:"wide",parsePatterns:nY,defaultParseWidth:"any"}),dayPeriod:lc({matchPatterns:rY,defaultMatchWidth:"any",parsePatterns:iY,defaultParseWidth:"any"})},KF={code:"en-US",formatDistance:C7,formatLong:P7,formatRelative:M7,localize:V7,match:aY,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sY(t,e){const n=nn(t,e==null?void 0:e.in);return p7(n,R7(n))+1}function oY(t,e){const n=nn(t,e==null?void 0:e.in),r=+Am(n)-+g7(n);return Math.round(r/qF)+1}function YF(t,e){var d,h,p,y;const n=nn(t,e==null?void 0:e.in),r=n.getFullYear(),i=Gf(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(p=i.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,s=Nr((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=$c(s,e),c=Nr((e==null?void 0:e.in)||t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=$c(c,e);return+n>=+o?r+1:+n>=+u?r:r-1}function lY(t,e){var o,c,u,d;const n=Gf(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=YF(t,e),a=Nr((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),$c(a,e)}function uY(t,e){const n=nn(t,e==null?void 0:e.in),r=+$c(n,e)-+lY(n,e);return Math.round(r/qF)+1}function lt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ja={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return lt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):lt(n+1,2)},d(t,e){return lt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return lt(t.getHours()%12||12,e.length)},H(t,e){return lt(t.getHours(),e.length)},m(t,e){return lt(t.getMinutes(),e.length)},s(t,e){return lt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return lt(i,e.length)}},Ho={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},GL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ja.y(t,e)},Y:function(t,e,n,r){const i=YF(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return lt(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):lt(a,e.length)},R:function(t,e){const n=zF(t);return lt(n,e.length)},u:function(t,e){const n=t.getFullYear();return lt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return lt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return lt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ja.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return lt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=uY(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):lt(i,e.length)},I:function(t,e,n){const r=oY(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):lt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ja.d(t,e)},D:function(t,e,n){const r=sY(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return lt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return lt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return lt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Ho.noon:r===0?i=Ho.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Ho.evening:r>=12?i=Ho.afternoon:r>=4?i=Ho.morning:i=Ho.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ja.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ja.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ja.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ja.s(t,e)},S:function(t,e){return ja.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return qL(r);case"XXXX":case"XX":return Cs(r);case"XXXXX":case"XXX":default:return Cs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return qL(r);case"xxxx":case"xx":return Cs(r);case"xxxxx":case"xxx":default:return Cs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+VL(r,":");case"OOOO":default:return"GMT"+Cs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+VL(r,":");case"zzzz":default:return"GMT"+Cs(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return lt(r,e.length)},T:function(t,e,n){return lt(+t,e.length)}};function VL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+lt(a,2)}function qL(t,e){return t%60===0?(t>0?"-":"+")+lt(Math.abs(t)/60,2):Cs(t,e)}function Cs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=lt(Math.trunc(r/60),2),a=lt(r%60,2);return n+i+e+a}const HL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},WF=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},cY=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return HL(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",HL(r,e)).replace("{{time}}",WF(i,e))},fY={p:WF,P:cY},dY=/^D+$/,hY=/^Y+$/,mY=["D","DD","YY","YYYY"];function pY(t){return dY.test(t)}function gY(t){return hY.test(t)}function yY(t,e,n){const r=vY(t,e,n);if(console.warn(r),mY.includes(t))throw new RangeError(r)}function vY(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,SY=/^'([^]*?)'?$/,EY=/''/g,TY=/[a-zA-Z]/;function mn(t,e,n){var d,h,p,y;const r=Gf(),i=r.locale??KF,a=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((y=(p=r.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??0,o=nn(t,n==null?void 0:n.in);if(!v7(o))throw new RangeError("Invalid time value");let c=e.match(xY).map(v=>{const x=v[0];if(x==="p"||x==="P"){const b=fY[x];return b(v,i.formatLong)}return v}).join("").match(bY).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const x=v[0];if(x==="'")return{isToken:!1,value:AY(v)};if(GL[x])return{isToken:!0,value:v};if(x.match(TY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const x=v.value;(gY(x)||pY(x))&&yY(x,e,String(t));const b=GL[x[0]];return b(o,x,i.localize,u)}).join("")}function AY(t){const e=t.match(SY);return e?e[1].replace(EY,"'"):t}function wY(t,e,n){const r=Gf(),i=(n==null?void 0:n.locale)??r.locale??KF,a=2520,s=sm(t,e);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[c,u]=Vf(n==null?void 0:n.in,...s>0?[e,t]:[t,e]),d=_7(u,c),h=(wm(u)-wm(c))/1e3,p=Math.round((d-h)/60);let y;if(p<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,o):d<10?i.formatDistance("lessThanXSeconds",10,o):d<20?i.formatDistance("lessThanXSeconds",20,o):d<40?i.formatDistance("halfAMinute",0,o):d<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):p===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",p,o);if(p<45)return i.formatDistance("xMinutes",p,o);if(p<90)return i.formatDistance("aboutXHours",1,o);if(p<FL){const v=Math.round(p/60);return i.formatDistance("aboutXHours",v,o)}else{if(p<a)return i.formatDistance("xDays",1,o);if(p<Eh){const v=Math.round(p/FL);return i.formatDistance("xDays",v,o)}else if(p<Eh*2)return y=Math.round(p/Eh),i.formatDistance("aboutXMonths",y,o)}if(y=w7(u,c),y<12){const v=Math.round(p/Eh);return i.formatDistance("xMonths",v,o)}else{const v=y%12,x=Math.trunc(y/12);return v<3?i.formatDistance("aboutXYears",x,o):v<9?i.formatDistance("overXYears",x,o):i.formatDistance("almostXYears",x+1,o)}}function _Y(t,e){return wY(t,Wp(t),e)}function RY(t,e){return f1(Nr(t,t),Wp(t))}function OY(t,e){return f1(t,HF(Wp(t),1),e)}function CY(t,e,n){return HF(t,-1,n)}function LY(t,e){return f1(Nr(t,t),CY(Wp(t)))}const XF="FETCH_SUBSCRIPTION_KEYS_REQUEST",QF="FETCH_SUBSCRIPTION_KEYS_SUCCESS",ZF="FETCH_SUBSCRIPTION_KEYS_FAILURE",JF="GENERATE_SUBSCRIPTION_KEY_REQUEST",e$="GENERATE_SUBSCRIPTION_KEY_SUCCESS",t$="GENERATE_SUBSCRIPTION_KEY_FAILURE",n$="DEACTIVATE_SUBSCRIPTION_KEY_REQUEST",r$="DEACTIVATE_SUBSCRIPTION_KEY_SUCCESS",i$="DEACTIVATE_SUBSCRIPTION_KEY_FAILURE",DY={subscriptionKeys:[],loading:!1,error:null},IY=(t=DY,e)=>{switch(e.type){case XF:case JF:case n$:return{...t,loading:!0,error:null};case QF:return{...t,loading:!1,subscriptionKeys:e.payload,error:null};case e$:return{...t,loading:!1,subscriptionKeys:[e.payload,...t.subscriptionKeys],error:null};case r$:return{...t,loading:!1,subscriptionKeys:t.subscriptionKeys.map(n=>n.key===e.payload.key?e.payload:n),error:null};case ZF:case t$:case i$:return{...t,loading:!1,error:e.payload};default:return t}},a$="FETCH_SUGGESTIONS_REQUEST",s$="FETCH_SUGGESTIONS_SUCCESS",o$="FETCH_SUGGESTIONS_FAILURE",l$="FETCH_SUGGESTION_BY_ID_REQUEST",u$="FETCH_SUGGESTION_BY_ID_SUCCESS",c$="FETCH_SUGGESTION_BY_ID_FAILURE",f$="CREATE_SUGGESTION_REQUEST",d$="CREATE_SUGGESTION_SUCCESS",h$="CREATE_SUGGESTION_FAILURE",m$="UPDATE_SUGGESTION_REQUEST",p$="UPDATE_SUGGESTION_SUCCESS",g$="UPDATE_SUGGESTION_FAILURE",y$="DELETE_SUGGESTION_REQUEST",v$="DELETE_SUGGESTION_SUCCESS",b$="DELETE_SUGGESTION_FAILURE",PY={suggestions:[],selectedSuggestion:null,loading:!1,error:null},NY=(t=PY,e)=>{var n;switch(e.type){case a$:case l$:case f$:case m$:case y$:return{...t,loading:!0,error:null};case s$:return{...t,loading:!1,suggestions:e.payload,error:null};case u$:return{...t,loading:!1,selectedSuggestion:e.payload,error:null};case d$:return{...t,loading:!1,suggestions:[e.payload,...t.suggestions],error:null};case p$:return{...t,loading:!1,suggestions:t.suggestions.map(r=>r.id===e.payload.id?e.payload:r),selectedSuggestion:((n=t.selectedSuggestion)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedSuggestion,error:null};case v$:return{...t,loading:!1,suggestions:t.suggestions.filter(r=>r.id!==e.payload),error:null};case o$:case c$:case h$:case g$:case b$:return{...t,loading:!1,error:e.payload};default:return t}},x$="FETCH_LIVESPORTS_REQUEST",S$="FETCH_LIVESPORTS_SUCCESS",E$="FETCH_LIVESPORTS_FAILURE",T$="FETCH_LIVESPORT_BY_ID_REQUEST",A$="FETCH_LIVESPORT_BY_ID_SUCCESS",w$="FETCH_LIVESPORT_BY_ID_FAILURE",_$="CREATE_LIVESPORT_REQUEST",R$="CREATE_LIVESPORT_SUCCESS",O$="CREATE_LIVESPORT_FAILURE",C$="UPDATE_LIVESPORT_REQUEST",L$="UPDATE_LIVESPORT_SUCCESS",D$="UPDATE_LIVESPORT_FAILURE",I$="DELETE_LIVESPORT_REQUEST",P$="DELETE_LIVESPORT_SUCCESS",N$="DELETE_LIVESPORT_FAILURE",MY={livesports:[],selectedLiveSport:null,pagination:{total:0,per_page:15,current_page:1,last_page:1},loading:!1,error:null},kY=(t=MY,e)=>{var n;switch(e.type){case x$:case T$:case _$:case C$:case I$:return{...t,loading:!0,error:null};case S$:return{...t,loading:!1,livesports:e.payload.data,pagination:{total:e.payload.total,per_page:e.payload.per_page,current_page:e.payload.current_page,last_page:e.payload.last_page},error:null};case A$:return{...t,loading:!1,selectedLiveSport:e.payload,error:null};case R$:return{...t,loading:!1,livesports:[e.payload,...t.livesports],error:null};case L$:return{...t,loading:!1,livesports:t.livesports.map(r=>r.id===e.payload.id?e.payload:r),selectedLiveSport:((n=t.selectedLiveSport)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedLiveSport,error:null};case P$:return{...t,loading:!1,livesports:t.livesports.filter(r=>r.id!==e.payload),error:null};case E$:case w$:case O$:case D$:case N$:return{...t,loading:!1,error:e.payload};default:return t}},M$="FETCH_SPORT_MATCHES_REQUEST",k$="FETCH_SPORT_MATCHES_SUCCESS",j$="FETCH_SPORT_MATCHES_FAILURE",U$="FETCH_SPORT_MATCH_DETAIL_REQUEST",B$="FETCH_SPORT_MATCH_DETAIL_SUCCESS",F$="FETCH_SPORT_MATCH_DETAIL_FAILURE",jY={matches:{football:{live:[],upcoming:[],finished:[]}},matchDetail:[],loading:!1,error:null};function UY(t=jY,e){switch(e.type){case M$:case U$:return{...t,loading:!0,error:null};case k$:return{...t,loading:!1,matches:e.payload};case j$:case F$:return{...t,loading:!1,error:e.payload};case B$:return{...t,loading:!1,matchDetail:e.payload};default:return t}}const BY=oF({auth:s7,contents:l7,dashboard:c7,devices:d7,subscriptions:IY,suggestions:NY,livesports:kY,sport:UY}),FY=t=>e=>n=>{const{auth:r}=t.getState(),i=r.token;return i?Je.defaults.headers.common.Authorization=`Bearer ${i}`:delete Je.defaults.headers.common.Authorization,n.type===pK&&delete Je.defaults.headers.common.Authorization,e(n)},Rm=i7({reducer:BY,middleware:t=>t().concat(FY)}),$Y="https://lugyi-car.laravel.cloud/api/auth",Je=Gt.create({baseURL:$Y,headers:{"Content-Type":"application/json",Accept:"application/json"}});Je.interceptors.request.use(t=>{const n=Rm.getState().auth.accessToken;return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t));Je.interceptors.response.use(t=>t,async t=>{var r;const e=t.config;return Rm.getState().auth.refreshToken,((r=t.response)==null?void 0:r.status)===401&&!e._retry&&(e._retry=!0,Rm.dispatch($$())),Promise.reject(t)});const GY=async t=>{var e;try{return(await Je.post("/login",t)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},VY=t=>async e=>{e({type:DB});try{const n=await GY(t);return localStorage.setItem("access_token",n.access_token),localStorage.setItem("refresh_token",n.refresh_token),localStorage.setItem("user_info",JSON.stringify(n.user)),e({type:o1,payload:{accessToken:n.access_token,refreshToken:n.refresh_token,user:n.user}}),Promise.resolve(n)}catch(n){return e({type:IB,payload:n}),Promise.reject(n)}},$$=()=>t=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user_info"),t({type:PB})},qY=()=>t=>{const e=localStorage.getItem("access_token"),n=localStorage.getItem("refresh_token"),r=localStorage.getItem("user_info");e&&n&&t({type:o1,payload:{accessToken:e,refreshToken:n,user:r?JSON.parse(r):null}})},G$=F.createContext({});function HY(t){const e=F.useRef(null);return e.current===null&&(e.current=t()),e.current}const d1=typeof window<"u",zY=d1?F.useLayoutEffect:F.useEffect,h1=F.createContext(null);function m1(t,e){t.indexOf(e)===-1&&t.push(e)}function p1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ia=(t,e,n)=>n>e?e:n<t?t:n;let g1=()=>{};const aa={},V$=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function q$(t){return typeof t=="object"&&t!==null}const H$=t=>/^0[^.\s]+$/u.test(t);function y1(t){let e;return()=>(e===void 0&&(e=t()),e)}const Dr=t=>t,KY=(t,e)=>n=>e(t(n)),qf=(...t)=>t.reduce(KY),Gc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class v1{constructor(){this.subscriptions=[]}add(e){return m1(this.subscriptions,e),()=>p1(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const bi=t=>t*1e3,xi=t=>t/1e3;function z$(t,e){return e?t*(1e3/e):0}const K$=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,YY=1e-7,WY=12;function XY(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=K$(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>YY&&++o<WY);return s}function Hf(t,e,n,r){if(t===e&&n===r)return Dr;const i=a=>XY(a,0,1,t,n);return a=>a===0||a===1?a:K$(i(a),e,r)}const Y$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,W$=t=>e=>1-t(1-e),X$=Hf(.33,1.53,.69,.99),b1=W$(X$),Q$=Y$(b1),Z$=t=>(t*=2)<1?.5*b1(t):.5*(2-Math.pow(2,-10*(t-1))),x1=t=>1-Math.sin(Math.acos(t)),J$=W$(x1),e3=Y$(x1),QY=Hf(.42,0,1,1),ZY=Hf(0,0,.58,1),t3=Hf(.42,0,.58,1),JY=t=>Array.isArray(t)&&typeof t[0]!="number",n3=t=>Array.isArray(t)&&typeof t[0]=="number",eW={linear:Dr,easeIn:QY,easeInOut:t3,easeOut:ZY,circIn:x1,circInOut:e3,circOut:J$,backIn:b1,backInOut:Q$,backOut:X$,anticipate:Z$},tW=t=>typeof t=="string",zL=t=>{if(n3(t)){g1(t.length===4);const[e,n,r,i]=t;return Hf(e,n,r,i)}else if(tW(t))return eW[t];return t},Th=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],KL={value:null};function nW(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){s.has(h)&&(d.schedule(h),t()),c++,h(o)}const d={schedule:(h,p=!1,y=!1)=>{const x=y&&i?n:r;return p&&s.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(o=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),e&&KL.value&&KL.value.frameloop[e].push(c),c=0,n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const rW=40;function r3(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Th.reduce((w,O)=>(w[O]=nW(a,e?O:void 0),w),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:p,render:y,postRender:v}=s,x=()=>{const w=aa.useManualTiming?i.timestamp:performance.now();n=!1,aa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,rW),1)),i.timestamp=w,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),d.process(i),h.process(i),p.process(i),y.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},b=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Th.reduce((w,O)=>{const R=s[O];return w[O]=(C,L=!1,P=!1)=>(n||b(),R.schedule(C,L,P)),w},{}),cancel:w=>{for(let O=0;O<Th.length;O++)s[Th[O]].cancel(w)},state:i,steps:s}}const{schedule:Dt,cancel:Wa,state:An,steps:uv}=r3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dr,!0);let om;function iW(){om=void 0}const Yn={now:()=>(om===void 0&&Yn.set(An.isProcessing||aa.useManualTiming?An.timestamp:performance.now()),om),set:t=>{om=t,queueMicrotask(iW)}},i3=t=>e=>typeof e=="string"&&e.startsWith(t),S1=i3("--"),aW=i3("var(--"),E1=t=>aW(t)?sW.test(t.split("/*")[0].trim()):!1,sW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vc={...Wl,transform:t=>ia(0,1,t)},Ah={...Wl,default:1},_c=t=>Math.round(t*1e5)/1e5,T1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oW(t){return t==null}const lW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,A1=(t,e)=>n=>!!(typeof n=="string"&&lW.test(n)&&n.startsWith(t)||e&&!oW(n)&&Object.prototype.hasOwnProperty.call(n,e)),a3=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(T1);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},uW=t=>ia(0,255,t),cv={...Wl,transform:t=>Math.round(uW(t))},ks={test:A1("rgb","red"),parse:a3("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+cv.transform(t)+", "+cv.transform(e)+", "+cv.transform(n)+", "+_c(Vc.transform(r))+")"};function cW(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const XE={test:A1("#"),parse:cW,transform:ks.transform},zf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fa=zf("deg"),Si=zf("%"),Pe=zf("px"),fW=zf("vh"),dW=zf("vw"),YL={...Si,parse:t=>Si.parse(t)/100,transform:t=>Si.transform(t*100)},tl={test:A1("hsl","hue"),parse:a3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Si.transform(_c(e))+", "+Si.transform(_c(n))+", "+_c(Vc.transform(r))+")"},zt={test:t=>ks.test(t)||XE.test(t)||tl.test(t),parse:t=>ks.test(t)?ks.parse(t):tl.test(t)?tl.parse(t):XE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ks.transform(t):tl.transform(t),getAnimatableNone:t=>{const e=zt.parse(t);return e.alpha=0,zt.transform(e)}},hW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mW(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(T1))==null?void 0:e.length)||0)+(((n=t.match(hW))==null?void 0:n.length)||0)>0}const s3="number",o3="color",pW="var",gW="var(",WL="${}",yW=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(yW,c=>(zt.test(c)?(r.color.push(a),i.push(o3),n.push(zt.parse(c))):c.startsWith(gW)?(r.var.push(a),i.push(pW),n.push(c)):(r.number.push(a),i.push(s3),n.push(parseFloat(c))),++a,WL)).split(WL);return{values:n,split:o,indexes:r,types:i}}function l3(t){return qc(t).values}function u3(t){const{split:e,types:n}=qc(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===s3?a+=_c(i[s]):o===o3?a+=zt.transform(i[s]):a+=i[s]}return a}}const vW=t=>typeof t=="number"?0:zt.test(t)?zt.getAnimatableNone(t):t;function bW(t){const e=l3(t);return u3(t)(e.map(vW))}const Xa={test:mW,parse:l3,createTransformer:u3,getAnimatableNone:bW};function fv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function xW({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=fv(c,o,t+1/3),a=fv(c,o,t),s=fv(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Om(t,e){return n=>n>0?e:t}const Lt=(t,e,n)=>t+(e-t)*n,dv=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},SW=[XE,ks,tl],EW=t=>SW.find(e=>e.test(t));function XL(t){const e=EW(t);if(!e)return!1;let n=e.parse(t);return e===tl&&(n=xW(n)),n}const QL=(t,e)=>{const n=XL(t),r=XL(e);if(!n||!r)return Om(t,e);const i={...n};return a=>(i.red=dv(n.red,r.red,a),i.green=dv(n.green,r.green,a),i.blue=dv(n.blue,r.blue,a),i.alpha=Lt(n.alpha,r.alpha,a),ks.transform(i))},QE=new Set(["none","hidden"]);function TW(t,e){return QE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function AW(t,e){return n=>Lt(t,e,n)}function w1(t){return typeof t=="number"?AW:typeof t=="string"?E1(t)?Om:zt.test(t)?QL:RW:Array.isArray(t)?c3:typeof t=="object"?zt.test(t)?QL:wW:Om}function c3(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>w1(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function wW(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=w1(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function _W(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const RW=(t,e)=>{const n=Xa.createTransformer(e),r=qc(t),i=qc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?QE.has(t)&&!i.values.length||QE.has(e)&&!r.values.length?TW(t,e):qf(c3(_W(r,i),i.values),n):Om(t,e)};function f3(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Lt(t,e,n):w1(t)(t,e)}const OW=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Dt.update(e,n),stop:()=>Wa(e),now:()=>An.isProcessing?An.timestamp:Yn.now()}},d3=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Cm=2e4;function _1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Cm;)e+=n,r=t.next(e);return e>=Cm?1/0:e}function CW(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(_1(r),Cm);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:xi(i)}}const LW=5;function h3(t,e,n){const r=Math.max(e-LW,0);return z$(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hv=.001;function DW({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let i,a,s=1-e;s=ia(Mt.minDamping,Mt.maxDamping,s),t=ia(Mt.minDuration,Mt.maxDuration,xi(t)),s<1?(i=u=>{const d=u*s,h=d*t,p=d-n,y=ZE(u,s),v=Math.exp(-h);return hv-p/y*v},a=u=>{const h=u*s*t,p=h*n+n,y=Math.pow(s,2)*Math.pow(u,2)*t,v=Math.exp(-h),x=ZE(Math.pow(u,2),s);return(-i(u)+hv>0?-1:1)*((p-y)*v)/x}):(i=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-hv+d*h},a=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const o=5/t,c=PW(i,a,o);if(t=bi(t),isNaN(c))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const IW=12;function PW(t,e,n){let r=n;for(let i=1;i<IW;i++)r=r-t(r)/e(r);return r}function ZE(t,e){return t*Math.sqrt(1-e*e)}const NW=["duration","bounce"],MW=["stiffness","damping","mass"];function ZL(t,e){return e.some(n=>t[n]!==void 0)}function kW(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!ZL(t,MW)&&ZL(t,NW))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ia(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Mt.mass,stiffness:i,damping:a}}else{const n=DW(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function Lm(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:y}=kW({...n,velocity:-xi(n.velocity||0)}),v=p||0,x=u/(2*Math.sqrt(c*d)),b=s-a,T=xi(Math.sqrt(c/d)),_=Math.abs(b)<5;r||(r=_?Mt.restSpeed.granular:Mt.restSpeed.default),i||(i=_?Mt.restDelta.granular:Mt.restDelta.default);let w;if(x<1){const R=ZE(T,x);w=C=>{const L=Math.exp(-x*T*C);return s-L*((v+x*T*b)/R*Math.sin(R*C)+b*Math.cos(R*C))}}else if(x===1)w=R=>s-Math.exp(-T*R)*(b+(v+T*b)*R);else{const R=T*Math.sqrt(x*x-1);w=C=>{const L=Math.exp(-x*T*C),P=Math.min(R*C,300);return s-L*((v+x*T*b)*Math.sinh(P)+R*b*Math.cosh(P))/R}}const O={calculatedDuration:y&&h||null,next:R=>{const C=w(R);if(y)o.done=R>=h;else{let L=R===0?v:0;x<1&&(L=R===0?bi(v):h3(w,R,C));const P=Math.abs(L)<=r,N=Math.abs(s-C)<=i;o.done=P&&N}return o.value=o.done?s:C,o},toString:()=>{const R=Math.min(_1(O),Cm),C=d3(L=>O.next(R*L).value,R,30);return R+"ms "+C},toTransition:()=>{}};return O}Lm.applyToOptions=t=>{const e=CW(t,100,Lm);return t.ease=e.ease,t.duration=bi(e.duration),t.type="keyframes",t};function JE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},y=P=>o!==void 0&&P<o||c!==void 0&&P>c,v=P=>o===void 0?c:c===void 0||Math.abs(o-P)<Math.abs(c-P)?o:c;let x=n*e;const b=h+x,T=s===void 0?b:s(b);T!==b&&(x=T-h);const _=P=>-x*Math.exp(-P/r),w=P=>T+_(P),O=P=>{const N=_(P),k=w(P);p.done=Math.abs(N)<=u,p.value=p.done?T:k};let R,C;const L=P=>{y(p.value)&&(R=P,C=Lm({keyframes:[p.value,v(p.value)],velocity:h3(w,P,p.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return L(0),{calculatedDuration:null,next:P=>{let N=!1;return!C&&R===void 0&&(N=!0,O(P),L(P)),R!==void 0&&P>=R?C.next(P-R):(!N&&O(P),p)}}}function jW(t,e,n){const r=[],i=n||aa.mix||f3,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Dr:e;o=qf(c,o)}r.push(o)}return r}function UW(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(g1(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=jW(e,r,i),c=o.length,u=d=>{if(s&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=Gc(t[h],t[h+1],d);return o[h](p)};return n?d=>u(ia(t[0],t[a-1],d)):u}function BW(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Gc(0,e,r);t.push(Lt(n,1,i))}}function FW(t){const e=[0];return BW(e,t.length-1),e}function $W(t,e){return t.map(n=>n*e)}function GW(t,e){return t.map(()=>e||t3).splice(0,t.length-1)}function Rc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=JY(r)?r.map(zL):zL(r),a={done:!1,value:e[0]},s=$W(n&&n.length===e.length?n:FW(e),t),o=UW(s,e,{ease:Array.isArray(i)?i:GW(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const VW=t=>t!==null;function R1(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(VW),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const qW={decay:JE,inertia:JE,tween:Rc,keyframes:Rc,spring:Lm};function m3(t){typeof t.type=="string"&&(t.type=qW[t.type])}class O1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const HW=t=>t/100;class C1 extends O1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Yn.now()&&this.tick(Yn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;m3(e);const{type:n=Rc,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||Rc;c!==Rc&&typeof o[0]!="number"&&(this.mixKeyframes=qf(HW,f3(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=_1(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:y,type:v,onUpdate:x,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,O=r;if(h){const P=Math.min(this.currentTime,i)/o;let N=Math.floor(P),k=P%1;!k&&P>=1&&(k=1),k===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(p==="reverse"?(k=1-k,y&&(k-=y/o)):p==="mirror"&&(O=s)),w=ia(0,1,k)*o}const R=_?{done:!1,value:d[0]}:O.next(w);a&&(R.value=a(R.value));let{done:C}=R;!_&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return L&&v!==JE&&(R.value=R1(d,this.options,b,this.speed)),x&&x(R.value),L&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return xi(this.calculatedDuration)}get time(){return xi(this.currentTime)}set time(e){var n;e=bi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=xi(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=OW,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function zW(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const js=t=>t*180/Math.PI,eT=t=>{const e=js(Math.atan2(t[1],t[0]));return tT(e)},KW={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:eT,rotateZ:eT,skewX:t=>js(Math.atan(t[1])),skewY:t=>js(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},tT=t=>(t=t%360,t<0&&(t+=360),t),JL=eT,eD=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),tD=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),YW={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eD,scaleY:tD,scale:t=>(eD(t)+tD(t))/2,rotateX:t=>tT(js(Math.atan2(t[6],t[5]))),rotateY:t=>tT(js(Math.atan2(-t[2],t[0]))),rotateZ:JL,rotate:JL,skewX:t=>js(Math.atan(t[4])),skewY:t=>js(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function nT(t){return t.includes("scale")?1:0}function rT(t,e){if(!t||t==="none")return nT(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=YW,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=KW,i=o}if(!i)return nT(e);const a=r[e],s=i[1].split(",").map(XW);return typeof a=="function"?a(s):s[a]}const WW=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return rT(n,e)};function XW(t){return parseFloat(t.trim())}const Xl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ql=new Set(Xl),nD=t=>t===Wl||t===Pe,QW=new Set(["x","y","z"]),ZW=Xl.filter(t=>!QW.has(t));function JW(t){const e=[];return ZW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>rT(e,"x"),y:(t,{transform:e})=>rT(e,"y")};Vs.translateX=Vs.x;Vs.translateY=Vs.y;const qs=new Set;let iT=!1,aT=!1,sT=!1;function p3(){if(aT){const t=Array.from(qs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=JW(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))==null||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}aT=!1,iT=!1,qs.forEach(t=>t.complete(sT)),qs.clear()}function g3(){qs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(aT=!0)})}function eX(){sT=!0,g3(),p3(),sT=!1}class L1{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(qs.add(this),iT||(iT=!0,Dt.read(g3),Dt.resolveKeyframes(p3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}zW(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qs.delete(this)}cancel(){this.state==="scheduled"&&(qs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const tX=t=>t.startsWith("--");function nX(t,e,n){tX(e)?t.style.setProperty(e,n):t.style[e]=n}const rX=y1(()=>window.ScrollTimeline!==void 0),iX={};function aX(t,e){const n=y1(t);return()=>iX[e]??n()}const y3=aX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,rD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sc([0,.65,.55,1]),circOut:Sc([.55,0,1,.45]),backIn:Sc([.31,.01,.66,-.59]),backOut:Sc([.33,1.53,.69,.99])};function v3(t,e){if(t)return typeof t=="function"?y3()?d3(t,e):"ease-out":n3(t)?Sc(t):Array.isArray(t)?t.map(n=>v3(n,e)||rD.easeOut):rD[t]}function sX(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=v3(o,i);Array.isArray(h)&&(d.easing=h);const p={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),t.animate(d,p)}function b3(t){return typeof t=="function"&&"applyToOptions"in t}function oX({type:t,...e}){return b3(t)&&y3()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class lX extends O1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,g1(typeof e.type!="string");const u=oX(e);this.animation=sX(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=R1(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):nX(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return xi(Number(e))}get time(){return xi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=bi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&rX()?(this.animation.timeline=e,Dr):n(this)}}const x3={anticipate:Z$,backInOut:Q$,circInOut:e3};function uX(t){return t in x3}function cX(t){typeof t.ease=="string"&&uX(t.ease)&&(t.ease=x3[t.ease])}const iD=10;class fX extends lX{constructor(e){cX(e),m3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new C1({...s,autoplay:!1}),c=bi(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-iD).value,o.sample(c).value,iD),o.stop()}}const aD=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Xa.test(t)||t==="0")&&!t.startsWith("url("));function dX(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function hX(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=aD(i,e),o=aD(a,e);return!s||!o?!1:dX(t)||(n==="spring"||b3(n))&&r}function S3(t){return q$(t)&&"offsetHeight"in t}const mX=new Set(["opacity","clipPath","filter","transform"]),pX=y1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gX(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!S3((u=e==null?void 0:e.owner)==null?void 0:u.current))return!1;const{onUpdate:o,transformTemplate:c}=e.owner.getProps();return pX()&&n&&mX.has(n)&&(n!=="transform"||!c)&&!o&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const yX=40;class vX extends O1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var x,b;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Yn.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:d,...h},y=(d==null?void 0:d.KeyframeResolver)||L1;this.keyframeResolver=new y(o,(x,b,T)=>this.onKeyframesResolved(x,b,p,!T),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Yn.now(),hX(e,a,s,o)||((aa.instantAnimations||!c)&&(d==null||d(R1(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>yX?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!u&&gX(p)?new fX({...p,element:p.motionValue.owner.current}):new C1(p);y.finished.then(()=>this.notifyFinished()).catch(Dr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),eX()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const bX=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xX(t){const e=bX.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function E3(t,e,n=1){const[r,i]=xX(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return V$(s)?parseFloat(s):s}return E1(i)?E3(i,e,n+1):i}function D1(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const T3=new Set(["width","height","top","left","right","bottom",...Xl]),SX={test:t=>t==="auto",parse:t=>t},A3=t=>e=>e.test(t),w3=[Wl,Pe,Si,Fa,dW,fW,SX],sD=t=>w3.find(A3(t));function EX(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||H$(t):!0}const TX=new Set(["brightness","contrast","saturate","opacity"]);function AX(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(T1)||[];if(!r)return t;const i=n.replace(r,"");let a=TX.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const wX=/\b([a-z-]*)\(.*?\)/gu,oT={...Xa,getAnimatableNone:t=>{const e=t.match(wX);return e?e.map(AX).join(" "):t}},oD={...Wl,transform:Math.round},_X={rotate:Fa,rotateX:Fa,rotateY:Fa,rotateZ:Fa,scale:Ah,scaleX:Ah,scaleY:Ah,scaleZ:Ah,skew:Fa,skewX:Fa,skewY:Fa,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Vc,originX:YL,originY:YL,originZ:Pe},I1={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe,..._X,zIndex:oD,fillOpacity:Vc,strokeOpacity:Vc,numOctaves:oD},RX={...I1,color:zt,backgroundColor:zt,outlineColor:zt,fill:zt,stroke:zt,borderColor:zt,borderTopColor:zt,borderRightColor:zt,borderBottomColor:zt,borderLeftColor:zt,filter:oT,WebkitFilter:oT},_3=t=>RX[t];function R3(t,e){let n=_3(t);return n!==oT&&(n=Xa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const OX=new Set(["auto","none","0"]);function CX(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!OX.has(a)&&qc(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=R3(n,i)}class LX extends L1{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),E1(u))){const d=E3(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!T3.has(r)||e.length!==2)return;const[i,a]=e,s=sD(i),o=sD(a);if(s!==o)if(nD(s)&&nD(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else Vs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||EX(e[i]))&&r.push(i);r.length&&CX(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Vs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function DX(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const O3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,lD=30,IX=t=>!isNaN(parseFloat(t));class PX{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var s,o;const a=Yn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=IX(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new v1);const r=this.events[e].add(n);return e==="change"?()=>{r(),Dt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>lD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lD);return z$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yl(t,e){return new PX(t,e)}const{schedule:P1}=r3(queueMicrotask,!1),qr={x:!1,y:!1};function C3(){return qr.x||qr.y}function NX(t){return t==="x"||t==="y"?qr[t]?null:(qr[t]=!0,()=>{qr[t]=!1}):qr.x||qr.y?null:(qr.x=qr.y=!0,()=>{qr.x=qr.y=!1})}function L3(t,e){const n=DX(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function uD(t){return!(t.pointerType==="touch"||C3())}function MX(t,e,n={}){const[r,i,a]=L3(t,n),s=o=>{if(!uD(o))return;const{target:c}=o,u=e(c,o);if(typeof u!="function"||!c)return;const d=h=>{uD(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const D3=(t,e)=>e?t===e?!0:D3(t,e.parentElement):!1,N1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,kX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jX(t){return kX.has(t.tagName)||t.tabIndex!==-1}const lm=new WeakSet;function cD(t){return e=>{e.key==="Enter"&&t(e)}}function mv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const UX=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=cD(()=>{if(lm.has(n))return;mv(n,"down");const i=cD(()=>{mv(n,"up")}),a=()=>mv(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function fD(t){return N1(t)&&!C3()}function BX(t,e,n={}){const[r,i,a]=L3(t,n),s=o=>{const c=o.currentTarget;if(!fD(o))return;lm.add(c);const u=e(c,o),d=(y,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),lm.has(c)&&lm.delete(c),fD(y)&&typeof u=="function"&&u(y,{success:v})},h=y=>{d(y,c===window||c===document||n.useGlobalTarget||D3(c,y.target))},p=y=>{d(y,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),S3(o)&&(o.addEventListener("focus",u=>UX(u,i)),!jX(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function I3(t){return q$(t)&&"ownerSVGElement"in t}function FX(t){return I3(t)&&t.tagName==="svg"}const kn=t=>!!(t&&t.getVelocity),$X=[...w3,zt,Xa],GX=t=>$X.find(A3(t)),P3=F.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function VX(t=!0){const e=F.useContext(h1);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=F.useId();F.useEffect(()=>{if(t)return i(a)},[t]);const s=F.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const N3=F.createContext({strict:!1}),dD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vl={};for(const t in dD)vl[t]={isEnabled:e=>dD[t].some(n=>!!e[n])};function qX(t){for(const e in t)vl[e]={...vl[e],...t[e]}}const HX=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||HX.has(t)}let M3=t=>!Dm(t);function zX(t){typeof t=="function"&&(M3=e=>e.startsWith("on")?!Dm(e):t(e))}try{zX(require("@emotion/is-prop-valid").default)}catch{}function KX(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(M3(i)||n===!0&&Dm(i)||!e&&!Dm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function YX(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Xp=F.createContext({});function Qp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Hc(t){return typeof t=="string"||Array.isArray(t)}const M1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],k1=["initial",...M1];function Zp(t){return Qp(t.animate)||k1.some(e=>Hc(t[e]))}function k3(t){return!!(Zp(t)||t.variants)}function WX(t,e){if(Zp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Hc(n)?n:void 0,animate:Hc(r)?r:void 0}}return t.inherit!==!1?e:{}}function XX(t){const{initial:e,animate:n}=WX(t,F.useContext(Xp));return F.useMemo(()=>({initial:e,animate:n}),[hD(e),hD(n)])}function hD(t){return Array.isArray(t)?t.join(" "):t}const QX=Symbol.for("motionComponentSymbol");function nl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ZX(t,e,n){return F.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):nl(n)&&(n.current=r))},[e])}const j1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JX="framerAppearId",j3="data-"+j1(JX),U3=F.createContext({});function eQ(t,e,n,r,i){var x,b;const{visualElement:a}=F.useContext(Xp),s=F.useContext(N3),o=F.useContext(h1),c=F.useContext(P3).reducedMotion,u=F.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=F.useContext(U3);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&tQ(u.current,n,i,h);const p=F.useRef(!1);F.useInsertionEffect(()=>{d&&p.current&&d.update(n,o)});const y=n[j3],v=F.useRef(!!y&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,y))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,y)));return zY(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),P1.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),F.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,y)}),v.current=!1))}),d}function tQ(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:B3(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&nl(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function B3(t){if(t)return t.options.allowProjection!==!1?t.projection:B3(t.parent)}function nQ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&qX(t);function a(o,c){let u;const d={...F.useContext(P3),...o,layoutId:rQ(o)},{isStatic:h}=d,p=XX(o),y=r(o,h);if(!h&&d1){iQ();const v=aQ(d);u=v.MeasureLayout,p.visualElement=eQ(i,y,d,e,v.ProjectionNode)}return S.jsxs(Xp.Provider,{value:p,children:[u&&p.visualElement?S.jsx(u,{visualElement:p.visualElement,...d}):null,n(i,o,ZX(y,p.visualElement,c),y,h,p.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const s=F.forwardRef(a);return s[QX]=i,s}function rQ({layoutId:t}){const e=F.useContext(G$).id;return e&&t!==void 0?e+"-"+t:t}function iQ(t,e){F.useContext(N3).strict}function aQ(t){const{drag:e,layout:n}=vl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const zc={};function sQ(t){for(const e in t)zc[e]=t[e],S1(e)&&(zc[e].isCSSVariable=!0)}function F3(t,{layout:e,layoutId:n}){return Ql.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!zc[t]||t==="opacity")}const oQ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lQ=Xl.length;function uQ(t,e,n){let r="",i=!0;for(let a=0;a<lQ;a++){const s=Xl[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=O3(o,I1[s]);if(!c){i=!1;const d=oQ[s]||s;r+=`${d}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function U1(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(Ql.has(c)){s=!0;continue}else if(S1(c)){i[c]=u;continue}else{const d=O3(u,I1[c]);c.startsWith("origin")?(o=!0,a[c]=d):r[c]=d}}if(e.transform||(s||n?r.transform=uQ(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const B1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $3(t,e,n){for(const r in e)!kn(e[r])&&!F3(r,n)&&(t[r]=e[r])}function cQ({transformTemplate:t},e){return F.useMemo(()=>{const n=B1();return U1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function fQ(t,e){const n=t.style||{},r={};return $3(r,n,t),Object.assign(r,cQ(t,e)),r}function dQ(t,e){const n={},r=fQ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const hQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},mQ={offset:"strokeDashoffset",array:"strokeDasharray"};function pQ(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?hQ:mQ;t[a.offset]=Pe.transform(-r);const s=Pe.transform(e),o=Pe.transform(n);t[a.array]=`${s} ${o}`}function G3(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,d){if(U1(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&pQ(h,i,a,s,!1)}const V3=()=>({...B1(),attrs:{}}),q3=t=>typeof t=="string"&&t.toLowerCase()==="svg";function gQ(t,e,n,r){const i=F.useMemo(()=>{const a=V3();return G3(a,e,q3(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};$3(a,t.style,t),i.style={...a,...i.style}}return i}const yQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function F1(t){return typeof t!="string"||t.includes("-")?!1:!!(yQ.indexOf(t)>-1||/[A-Z]/u.test(t))}function vQ(t=!1){return(n,r,i,{latestValues:a},s)=>{const c=(F1(n)?gQ:dQ)(r,a,s,n),u=KX(r,typeof n=="string",t),d=n!==F.Fragment?{...u,...c,ref:i}:{},{children:h}=r,p=F.useMemo(()=>kn(h)?h.get():h,[h]);return F.createElement(n,{...d,children:p})}}function mD(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function $1(t,e,n,r){if(typeof e=="function"){const[i,a]=mD(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=mD(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function um(t){return kn(t)?t.get():t}function bQ({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:xQ(n,r,i,t),renderState:e()}}const H3=t=>(e,n)=>{const r=F.useContext(Xp),i=F.useContext(h1),a=()=>bQ(t,e,r,i);return n?a():HY(a)};function xQ(t,e,n,r){const i={},a=r(t,{});for(const p in a)i[p]=um(a[p]);let{initial:s,animate:o}=t;const c=Zp(t),u=k3(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?o:s;if(h&&typeof h!="boolean"&&!Qp(h)){const p=Array.isArray(h)?h:[h];for(let y=0;y<p.length;y++){const v=$1(t,p[y]);if(v){const{transitionEnd:x,transition:b,...T}=v;for(const _ in T){let w=T[_];if(Array.isArray(w)){const O=d?w.length-1:0;w=w[O]}w!==null&&(i[_]=w)}for(const _ in x)i[_]=x[_]}}}return i}function G1(t,e,n){var a;const{style:r}=t,i={};for(const s in r)(kn(r[s])||e.style&&kn(e.style[s])||F3(s,t)||((a=n==null?void 0:n.getValue(s))==null?void 0:a.liveStyle)!==void 0)&&(i[s]=r[s]);return i}const SQ={useVisualState:H3({scrapeMotionValuesFromProps:G1,createRenderState:B1})};function z3(t,e,n){const r=G1(t,e,n);for(const i in t)if(kn(t[i])||kn(e[i])){const a=Xl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const EQ={useVisualState:H3({scrapeMotionValuesFromProps:z3,createRenderState:V3})};function TQ(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...F1(r)?EQ:SQ,preloadedFeatures:t,useRender:vQ(i),createVisualElement:e,Component:r};return nQ(s)}}function Kc(t,e,n){const r=t.getProps();return $1(r,e,n!==void 0?n:r.custom,t)}const lT=t=>Array.isArray(t);function AQ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yl(n))}function wQ(t){return lT(t)?t[t.length-1]||0:t}function _Q(t,e){const n=Kc(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=wQ(a[s]);AQ(t,s,o)}}function RQ(t){return!!(kn(t)&&t.add)}function uT(t,e){const n=t.getValue("willChange");if(RQ(n))return n.add(e);if(!n&&aa.WillChange){const r=new aa.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function K3(t){return t.props[j3]}const OQ=t=>t!==null;function CQ(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(OQ),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const LQ={type:"spring",stiffness:500,damping:25,restSpeed:10},DQ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),IQ={type:"keyframes",duration:.8},PQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},NQ=(t,{keyframes:e})=>e.length>2?IQ:Ql.has(t)?t.startsWith("scale")?DQ(e[1]):LQ:PQ;function MQ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const V1=(t,e,n,r={},i,a)=>s=>{const o=D1(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-bi(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:p=>{e.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};MQ(o)||Object.assign(d,NQ(t,d)),d.duration&&(d.duration=bi(d.duration)),d.repeatDelay&&(d.repeatDelay=bi(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(aa.instantAnimations||aa.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const p=CQ(d.keyframes,o);if(p!==void 0){Dt.update(()=>{d.onUpdate(p),d.onComplete()});return}}return o.isSync?new C1(d):new vX(d)};function kQ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Y3(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in o){const h=t.getValue(d,t.latestValues[d]??null),p=o[d];if(p===void 0||u&&kQ(u,d))continue;const y={delay:n,...D1(a||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===v&&!y.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const T=K3(t);if(T){const _=window.MotionHandoffAnimation(T,d,Dt);_!==null&&(y.startTime=_,x=!0)}}uT(t,d),h.start(V1(d,h,p,t.shouldReduceMotion&&T3.has(d)?{type:!1}:y,t,x));const b=h.animation;b&&c.push(b)}return s&&Promise.all(c).then(()=>{Dt.update(()=>{s&&_Q(t,s)})}),c}function cT(t,e,n={}){var c;const r=Kc(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(Y3(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return jQ(t,e,d+u,h,p,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,d]=o==="beforeChildren"?[a,s]:[s,a];return u().then(()=>d())}else return Promise.all([a(),s(n.delay)])}function jQ(t,e,n=0,r=0,i=1,a){const s=[],o=(t.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort(UQ).forEach((u,d)=>{u.notify("AnimationStart",e),s.push(cT(u,e,{...a,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function UQ(t,e){return t.sortNodePosition(e)}function BQ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>cT(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=cT(t,e,n);else{const i=typeof e=="function"?Kc(t,e,n.custom):e;r=Promise.all(Y3(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function W3(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const FQ=k1.length;function X3(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?X3(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<FQ;n++){const r=k1[n],i=t.props[r];(Hc(i)||i===!1)&&(e[r]=i)}return e}const $Q=[...M1].reverse(),GQ=M1.length;function VQ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>BQ(t,n,r)))}function qQ(t){let e=VQ(t),n=pD(),r=!0;const i=c=>(u,d)=>{var p;const h=Kc(t,d,c==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:y,transitionEnd:v,...x}=h;u={...u,...x,...v}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,d=X3(t.parent)||{},h=[],p=new Set;let y={},v=1/0;for(let b=0;b<GQ;b++){const T=$Q[b],_=n[T],w=u[T]!==void 0?u[T]:d[T],O=Hc(w),R=T===c?_.isActive:null;R===!1&&(v=b);let C=w===d[T]&&w!==u[T]&&O;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),_.protectedKeys={...y},!_.isActive&&R===null||!w&&!_.prevProp||Qp(w)||typeof w=="boolean")continue;const L=HQ(_.prevProp,w);let P=L||T===c&&_.isActive&&!C&&O||b>v&&O,N=!1;const k=Array.isArray(w)?w:[w];let M=k.reduce(i(T),{});R===!1&&(M={});const{prevResolvedValues:$={}}=_,K={...$,...M},W=G=>{P=!0,p.has(G)&&(N=!0,p.delete(G)),_.needsAnimating[G]=!0;const q=t.getValue(G);q&&(q.liveStyle=!1)};for(const G in K){const q=M[G],Z=$[G];if(y.hasOwnProperty(G))continue;let B=!1;lT(q)&&lT(Z)?B=!W3(q,Z):B=q!==Z,B?q!=null?W(G):p.add(G):q!==void 0&&p.has(G)?W(G):_.protectedKeys[G]=!0}_.prevProp=w,_.prevResolvedValues=M,_.isActive&&(y={...y,...M}),r&&t.blockInitialAnimation&&(P=!1),P&&(!(C&&L)||N)&&h.push(...k.map(G=>({animation:G,options:{type:T}})))}if(p.size){const b={};if(typeof u.initial!="boolean"){const T=Kc(t,Array.isArray(u.initial)?u.initial[0]:u.initial);T&&T.transition&&(b.transition=T.transition)}p.forEach(T=>{const _=t.getBaseTarget(T),w=t.getValue(T);w&&(w.liveStyle=!0),b[T]=_??null}),h.push({animation:b})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var y;return(y=p.animationState)==null?void 0:y.setActive(c,u)}),n[c].isActive=u;const d=s(c);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=pD(),r=!0}}}function HQ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!W3(e,t):!1}function _s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pD(){return{animate:_s(!0),whileInView:_s(),whileHover:_s(),whileTap:_s(),whileDrag:_s(),whileFocus:_s(),exit:_s()}}class es{constructor(e){this.isMounted=!1,this.node=e}update(){}}class zQ extends es{constructor(e){super(e),e.animationState||(e.animationState=qQ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Qp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let KQ=0;class YQ extends es{constructor(){super(...arguments),this.id=KQ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const WQ={animation:{Feature:zQ},exit:{Feature:YQ}};function Yc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Kf(t){return{point:{x:t.pageX,y:t.pageY}}}const XQ=t=>e=>N1(e)&&t(e,Kf(e));function Oc(t,e,n,r){return Yc(t,e,XQ(n),r)}function Q3({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function QQ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function ZQ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Z3=1e-4,JQ=1-Z3,eZ=1+Z3,J3=.01,tZ=0-J3,nZ=0+J3;function Bn(t){return t.max-t.min}function rZ(t,e,n){return Math.abs(t-e)<=n}function gD(t,e,n,r=.5){t.origin=r,t.originPoint=Lt(e.min,e.max,t.origin),t.scale=Bn(n)/Bn(e),t.translate=Lt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=JQ&&t.scale<=eZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=tZ&&t.translate<=nZ||isNaN(t.translate))&&(t.translate=0)}function Cc(t,e,n,r){gD(t.x,e.x,n.x,r?r.originX:void 0),gD(t.y,e.y,n.y,r?r.originY:void 0)}function yD(t,e,n){t.min=n.min+e.min,t.max=t.min+Bn(e)}function iZ(t,e,n){yD(t.x,e.x,n.x),yD(t.y,e.y,n.y)}function vD(t,e,n){t.min=e.min-n.min,t.max=t.min+Bn(e)}function Lc(t,e,n){vD(t.x,e.x,n.x),vD(t.y,e.y,n.y)}const bD=()=>({translate:0,scale:1,origin:0,originPoint:0}),rl=()=>({x:bD(),y:bD()}),xD=()=>({min:0,max:0}),Bt=()=>({x:xD(),y:xD()});function Rr(t){return[t("x"),t("y")]}function pv(t){return t===void 0||t===1}function fT({scale:t,scaleX:e,scaleY:n}){return!pv(t)||!pv(e)||!pv(n)}function Ls(t){return fT(t)||e4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function e4(t){return SD(t.x)||SD(t.y)}function SD(t){return t&&t!=="0%"}function Im(t,e,n){const r=t-n,i=e*r;return n+i}function ED(t,e,n,r,i){return i!==void 0&&(t=Im(t,i,r)),Im(t,n,r)+e}function dT(t,e=0,n=1,r,i){t.min=ED(t.min,e,n,r,i),t.max=ED(t.max,e,n,r,i)}function t4(t,{x:e,y:n}){dT(t.x,e.translate,e.scale,e.originPoint),dT(t.y,n.translate,n.scale,n.originPoint)}const TD=.999999999999,AD=1.0000000000001;function aZ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&al(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,t4(t,s)),r&&Ls(a.latestValues)&&al(t,a.latestValues))}e.x<AD&&e.x>TD&&(e.x=1),e.y<AD&&e.y>TD&&(e.y=1)}function il(t,e){t.min=t.min+e,t.max=t.max+e}function wD(t,e,n,r,i=.5){const a=Lt(t.min,t.max,i);dT(t,e,n,a,r)}function al(t,e){wD(t.x,e.x,e.scaleX,e.scale,e.originX),wD(t.y,e.y,e.scaleY,e.scale,e.originY)}function n4(t,e){return Q3(ZQ(t.getBoundingClientRect(),e))}function sZ(t,e,n){const r=n4(t,n),{scroll:i}=e;return i&&(il(r.x,i.offset.x),il(r.y,i.offset.y)),r}const r4=({current:t})=>t?t.ownerDocument.defaultView:null,_D=(t,e)=>Math.abs(t-e);function oZ(t,e){const n=_D(t.x,e.x),r=_D(t.y,e.y);return Math.sqrt(n**2+r**2)}class i4{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=yv(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=oZ(h.offset,{x:0,y:0})>=3;if(!p&&!y)return;const{point:v}=h,{timestamp:x}=An;this.history.push({...v,timestamp:x});const{onStart:b,onMove:T}=this.handlers;p||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=gv(p,this.transformPagePoint),Dt.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=yv(h.type==="pointercancel"?this.lastMoveEventInfo:gv(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,b),v&&v(h,b)},!N1(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Kf(e),o=gv(s,this.transformPagePoint),{point:c}=o,{timestamp:u}=An;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,yv(o,this.history)),this.removeListeners=qf(Oc(this.contextWindow,"pointermove",this.handlePointerMove),Oc(this.contextWindow,"pointerup",this.handlePointerUp),Oc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Wa(this.updatePoint)}}function gv(t,e){return e?{point:e(t.point)}:t}function RD(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yv({point:t},e){return{point:t,delta:RD(t,a4(e)),offset:RD(t,lZ(e)),velocity:uZ(e,.1)}}function lZ(t){return t[0]}function a4(t){return t[t.length-1]}function uZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=a4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>bi(e)));)n--;if(!r)return{x:0,y:0};const a=xi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function cZ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Lt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Lt(n,t,r.max):Math.min(t,n)),t}function OD(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function fZ(t,{top:e,left:n,bottom:r,right:i}){return{x:OD(t.x,n,i),y:OD(t.y,e,r)}}function CD(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function dZ(t,e){return{x:CD(t.x,e.x),y:CD(t.y,e.y)}}function hZ(t,e){let n=.5;const r=Bn(t),i=Bn(e);return i>r?n=Gc(e.min,e.max-r,t.min):r>i&&(n=Gc(t.min,t.max-i,e.min)),ia(0,1,n)}function mZ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hT=.35;function pZ(t=hT){return t===!1?t=0:t===!0&&(t=hT),{x:LD(t,"left","right"),y:LD(t,"top","bottom")}}function LD(t,e,n){return{min:DD(t,e),max:DD(t,n)}}function DD(t,e){return typeof t=="number"?t:t[e]||0}const gZ=new WeakMap;class yZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Kf(d).point)},a=(d,h)=>{const{drag:p,dragPropagation:y,onDragStart:v}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=NX(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rr(b=>{let T=this.getAxisMotionValue(b).get()||0;if(Si.test(T)){const{projection:_}=this.visualElement;if(_&&_.layout){const w=_.layout.layoutBox[b];w&&(T=Bn(w)*(parseFloat(T)/100))}}this.originPoint[b]=T}),v&&Dt.postRender(()=>v(d,h)),uT(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:v,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:b}=h;if(y&&this.currentDirection===null){this.currentDirection=vZ(b),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),x&&x(d,h)},o=(d,h)=>this.stop(d,h),c=()=>Rr(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new i4(e,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:r4(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Dt.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wh(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=cZ(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&nl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=fZ(r.layoutBox,e):this.constraints=!1,this.elastic=pZ(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Rr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=mZ(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=sZ(r,i.root,this.visualElement.getTransformPagePoint());let s=dZ(i.layout.layoutBox,a);if(n){const o=n(QQ(s));this.hasMutatedConstraints=!!o,o&&(s=Q3(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Rr(d=>{if(!wh(d,n,this.currentDirection))return;let h=c&&c[d]||{};s&&(h={min:0,max:0});const p=i?200:1e6,y=i?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return uT(this.visualElement,e),r.start(V1(e,r,0,n,this.visualElement,!1))}stopAnimation(){Rr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Rr(n=>{const{drag:r}=this.getProps();if(!wh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Lt(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!nl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Rr(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=hZ({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rr(s=>{if(!wh(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(Lt(c,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;gZ.set(this.visualElement,this);const e=this.visualElement.current,n=Oc(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();nl(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Dt.read(r);const s=Yc(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Rr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=hT,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function wh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function vZ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class bZ extends es{constructor(e){super(e),this.removeGroupControls=Dr,this.removeListeners=Dr,this.controls=new yZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ID=t=>(e,n)=>{t&&Dt.postRender(()=>t(e,n))};class xZ extends es{constructor(){super(...arguments),this.removePointerDownListener=Dr}onPointerDown(e){this.session=new i4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:r4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ID(e),onStart:ID(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Dt.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Oc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PD(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const uc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Pe.test(t))t=parseFloat(t);else return t;const n=PD(t,e.target.x),r=PD(t,e.target.y);return`${n}% ${r}%`}},SZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Xa.parse(t);if(i.length>5)return r;const a=Xa.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=Lt(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class EZ extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;sQ(TZ),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),cm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Dt.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),P1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function s4(t){const[e,n]=VX(),r=F.useContext(G$);return S.jsx(EZ,{...t,layoutGroup:r,switchLayoutGroup:F.useContext(U3),isPresent:e,safeToRemove:n})}const TZ={borderRadius:{...uc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uc,borderTopRightRadius:uc,borderBottomLeftRadius:uc,borderBottomRightRadius:uc,boxShadow:SZ};function AZ(t,e,n){const r=kn(t)?t:yl(t);return r.start(V1("",r,e,n)),r.animation}const wZ=(t,e)=>t.depth-e.depth;class _Z{constructor(){this.children=[],this.isDirty=!1}add(e){m1(this.children,e),this.isDirty=!0}remove(e){p1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wZ),this.isDirty=!1,this.children.forEach(e)}}function RZ(t,e){const n=Yn.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Wa(r),t(a-e))};return Dt.setup(r,!0),()=>Wa(r)}const o4=["TopLeft","TopRight","BottomLeft","BottomRight"],OZ=o4.length,ND=t=>typeof t=="string"?parseFloat(t):t,MD=t=>typeof t=="number"||Pe.test(t);function CZ(t,e,n,r,i,a){i?(t.opacity=Lt(0,n.opacity??1,LZ(r)),t.opacityExit=Lt(e.opacity??1,0,DZ(r))):a&&(t.opacity=Lt(e.opacity??1,n.opacity??1,r));for(let s=0;s<OZ;s++){const o=`border${o4[s]}Radius`;let c=kD(e,o),u=kD(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||MD(c)===MD(u)?(t[o]=Math.max(Lt(ND(c),ND(u),r),0),(Si.test(u)||Si.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Lt(e.rotate||0,n.rotate||0,r))}function kD(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const LZ=l4(0,.5,J$),DZ=l4(.5,.95,Dr);function l4(t,e,n){return r=>r<t?0:r>e?1:n(Gc(t,e,r))}function jD(t,e){t.min=e.min,t.max=e.max}function Er(t,e){jD(t.x,e.x),jD(t.y,e.y)}function UD(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function BD(t,e,n,r,i){return t-=e,t=Im(t,1/n,r),i!==void 0&&(t=Im(t,1/i,r)),t}function IZ(t,e=0,n=1,r=.5,i,a=t,s=t){if(Si.test(e)&&(e=parseFloat(e),e=Lt(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Lt(a.min,a.max,r);t===a&&(o-=e),t.min=BD(t.min,e,n,o,i),t.max=BD(t.max,e,n,o,i)}function FD(t,e,[n,r,i],a,s){IZ(t,e[n],e[r],e[i],e.scale,a,s)}const PZ=["x","scaleX","originX"],NZ=["y","scaleY","originY"];function $D(t,e,n,r){FD(t.x,e,PZ,n?n.x:void 0,r?r.x:void 0),FD(t.y,e,NZ,n?n.y:void 0,r?r.y:void 0)}function GD(t){return t.translate===0&&t.scale===1}function u4(t){return GD(t.x)&&GD(t.y)}function VD(t,e){return t.min===e.min&&t.max===e.max}function MZ(t,e){return VD(t.x,e.x)&&VD(t.y,e.y)}function qD(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function c4(t,e){return qD(t.x,e.x)&&qD(t.y,e.y)}function HD(t){return Bn(t.x)/Bn(t.y)}function zD(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class kZ{constructor(){this.members=[]}add(e){m1(this.members,e),e.scheduleRender()}remove(e){if(p1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jZ(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:p,skewX:y,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),y&&(r+=`skewX(${y}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const vv=["","X","Y","Z"],UZ={visibility:"hidden"},BZ=1e3;let FZ=0;function bv(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function f4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=K3(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Dt,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&f4(r)}function d4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=FZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(VZ),this.nodes.forEach(YZ),this.nodes.forEach(WZ),this.nodes.forEach(qZ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new _Z)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new v1),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=I3(s)&&!FX(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=RZ(h,250),cm.hasAnimatedSinceResize&&(cm.hasAnimatedSinceResize=!1,this.nodes.forEach(YD))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||eJ,{onLayoutAnimationStart:x,onLayoutAnimationComplete:b}=u.getProps(),T=!this.targetLayout||!c4(this.targetLayout,y),_=!h&&p;if(this.options.layoutRoot||this.resumeFrom||_||h&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...D1(v,"layout"),onPlay:x,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,_)}else h||YD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Wa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XZ),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&f4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KD);return}this.isUpdating||this.nodes.forEach(zZ),this.isUpdating=!1,this.nodes.forEach(KZ),this.nodes.forEach($Z),this.nodes.forEach(GZ),this.clearAllSnapshots();const o=Yn.now();An.delta=ia(0,1e3/60,o-An.timestamp),An.timestamp=o,An.isProcessing=!0,uv.update.process(An),uv.preRender.process(An),uv.render.process(An),An.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,P1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HZ),this.sharedNodes.forEach(QZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bn(this.snapshot.measuredBox.x)&&!Bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!u4(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||Ls(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),tJ(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return Bt();const o=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(nJ))){const{scroll:d}=this.root;d&&(il(o.x,d.offset.x),il(o.y,d.offset.y))}return o}removeElementScroll(s){var c;const o=Bt();if(Er(o,s),(c=this.scroll)!=null&&c.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Er(o,s),il(o.x,h.offset.x),il(o.y,h.offset.y))}return o}applyTransform(s,o=!1){const c=Bt();Er(c,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&al(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ls(d.latestValues)&&al(c,d.latestValues)}return Ls(this.latestValues)&&al(c,this.latestValues),c}removeTransform(s){const o=Bt();Er(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ls(u.latestValues))continue;fT(u.latestValues)&&u.updateSnapshot();const d=Bt(),h=u.measurePageBox();Er(d,h),$D(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Ls(this.latestValues)&&$D(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==An.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=An.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),Lc(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Bt(),this.targetWithTransforms=Bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),iZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Er(this.target,this.layout.layoutBox),t4(this.target,this.targetDelta)):Er(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),Lc(this.relativeTargetOrigin,this.target,y.target),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||fT(this.parent.latestValues)||e4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===An.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Er(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;aZ(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Bt());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(UD(this.prevProjectionDelta.x,this.projectionDelta.x),UD(this.prevProjectionDelta.y,this.projectionDelta.y)),Cc(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!zD(this.projectionDelta.x,this.prevProjectionDelta.x)||!zD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rl(),this.projectionDelta=rl(),this.projectionDeltaWithTransform=rl()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=rl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=Bt(),y=c?c.source:void 0,v=this.layout?this.layout.source:void 0,x=y!==v,b=this.getStack(),T=!b||b.members.length<=1,_=!!(x&&!T&&this.options.crossfade===!0&&!this.path.some(JZ));this.animationProgress=0;let w;this.mixTargetDelta=O=>{const R=O/1e3;WD(h.x,s.x,R),WD(h.y,s.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ZZ(this.relativeTarget,this.relativeTargetOrigin,p,R),w&&MZ(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Bt()),Er(w,this.relativeTarget)),x&&(this.animationValues=d,CZ(d,u,this.latestValues,R,_,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,c,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Wa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dt.update(()=>{cm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yl(0)),this.currentAnimation=AZ(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),s.onUpdate&&s.onUpdate(d)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BZ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&h4(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Bt();const h=Bn(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const p=Bn(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+p}Er(o,c),al(o,d),Cc(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new kZ),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&bv("z",s,u,this.animationValues);for(let d=0;d<vv.length;d++)bv(`rotate${vv[d]}`,s,u,this.animationValues),bv(`skew${vv[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}getProjectionStyles(s){if(!this.instance||this.isSVG)return;if(!this.isVisible)return UZ;const o={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=um(s==null?void 0:s.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none",o;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=um(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Ls(this.latestValues)&&(y.transform=c?c({},""):"none",this.hasProjected=!1),y}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),o.transform=jZ(this.projectionDeltaWithTransform,this.treeScale,d),c&&(o.transform=c(d,o.transform));const{x:h,y:p}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in zc){if(d[y]===void 0)continue;const{correct:v,applyTo:x,isCSSVariable:b}=zc[y],T=o.transform==="none"?d[y]:v(d[y],u);if(x){const _=x.length;for(let w=0;w<_;w++)o[x[w]]=T}else b?this.options.visualElement.renderState.vars[y]=T:o[y]=T}return this.options.layoutId&&(o.pointerEvents=u===this?um(s==null?void 0:s.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(KD),this.root.sharedNodes.clear()}}}function $Z(t){t.updateLayout()}function GZ(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=e.source!==t.layout.source;a==="size"?Rr(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],y=Bn(p);p.min=r[h].min,p.max=p.min+y}):h4(a,e.layoutBox,r)&&Rr(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],y=Bn(r[h]);p.max=p.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+y)});const o=rl();Cc(o,r,e.layoutBox);const c=rl();s?Cc(c,t.applyTransform(i,!0),e.measuredBox):Cc(c,r,e.layoutBox);const u=!u4(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:y}=h;if(p&&y){const v=Bt();Lc(v,e.layoutBox,p.layoutBox);const x=Bt();Lc(x,r,y.layoutBox),c4(v,x)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function VZ(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HZ(t){t.clearSnapshot()}function KD(t){t.clearMeasurements()}function zZ(t){t.isLayoutDirty=!1}function KZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function YD(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function YZ(t){t.resolveTargetDelta()}function WZ(t){t.calcProjection()}function XZ(t){t.resetSkewAndRotation()}function QZ(t){t.removeLeadSnapshot()}function WD(t,e,n){t.translate=Lt(e.translate,0,n),t.scale=Lt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function XD(t,e,n,r){t.min=Lt(e.min,n.min,r),t.max=Lt(e.max,n.max,r)}function ZZ(t,e,n,r){XD(t.x,e.x,n.x,r),XD(t.y,e.y,n.y,r)}function JZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const eJ={duration:.45,ease:[.4,0,.1,1]},QD=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ZD=QD("applewebkit/")&&!QD("chrome/")?Math.round:Dr;function JD(t){t.min=ZD(t.min),t.max=ZD(t.max)}function tJ(t){JD(t.x),JD(t.y)}function h4(t,e,n){return t==="position"||t==="preserve-aspect"&&!rZ(HD(e),HD(n),.2)}function nJ(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const rJ=d4({attachResizeListener:(t,e)=>Yc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xv={current:void 0},m4=d4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xv.current){const t=new rJ({});t.mount(window),t.setOptions({layoutScroll:!0}),xv.current=t}return xv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),iJ={pan:{Feature:xZ},drag:{Feature:bZ,ProjectionNode:m4,MeasureLayout:s4}};function eI(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Dt.postRender(()=>a(e,Kf(e)))}class aJ extends es{mount(){const{current:e}=this.node;e&&(this.unmount=MX(e,(n,r)=>(eI(this.node,r,"Start"),i=>eI(this.node,i,"End"))))}unmount(){}}class sJ extends es{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qf(Yc(this.node.current,"focus",()=>this.onFocus()),Yc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function tI(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Dt.postRender(()=>a(e,Kf(e)))}class oJ extends es{mount(){const{current:e}=this.node;e&&(this.unmount=BX(e,(n,r)=>(tI(this.node,r,"Start"),(i,{success:a})=>tI(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const mT=new WeakMap,Sv=new WeakMap,lJ=t=>{const e=mT.get(t.target);e&&e(t)},uJ=t=>{t.forEach(lJ)};function cJ({root:t,...e}){const n=t||document;Sv.has(n)||Sv.set(n,{});const r=Sv.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(uJ,{root:t,...e})),r[i]}function fJ(t,e,n){const r=cJ(e);return mT.set(t,n),r.observe(t),()=>{mT.delete(t),r.unobserve(t)}}const dJ={some:0,all:1};class hJ extends es{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:dJ[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=u?d:h;p&&p(c)};return fJ(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(mJ(e,n))&&this.startObserver()}unmount(){}}function mJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const pJ={inView:{Feature:hJ},tap:{Feature:oJ},focus:{Feature:sJ},hover:{Feature:aJ}},gJ={layout:{ProjectionNode:m4,MeasureLayout:s4}},pT={current:null},p4={current:!1};function yJ(){if(p4.current=!0,!!d1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>pT.current=t.matches;t.addListener(e),e()}else pT.current=!1}const vJ=new WeakMap;function bJ(t,e,n){for(const r in e){const i=e[r],a=n[r];if(kn(i))t.addValue(r,i);else if(kn(a))t.addValue(r,yl(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,yl(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const nI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=L1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Yn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Dt.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Zp(n),this.isVariantNode=k3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const y=h[p];c[p]!==void 0&&kn(y)&&y.set(c[p],!1)}}mount(e){this.current=e,vJ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),p4.current||yJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pT.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Wa(this.notifyUpdate),Wa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ql.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Dt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vl){const n=vl[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<nI.length;r++){const i=nI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=bJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(V$(r)||H$(r))?r=parseFloat(r):!GX(r)&&Xa.test(n)&&(r=R3(e,n)),this.setBaseTarget(e,kn(r)?r.get():r)),kn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=$1(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!kn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new v1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class g4 extends xJ{constructor(){super(...arguments),this.KeyframeResolver=LX}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;kn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function y4(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}function SJ(t){return window.getComputedStyle(t)}class EJ extends g4{constructor(){super(...arguments),this.type="html",this.renderInstance=y4}readValueFromInstance(e,n){var r;if(Ql.has(n))return(r=this.projection)!=null&&r.isProjecting?nT(n):WW(e,n);{const i=SJ(e),a=(S1(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return n4(e,n)}build(e,n,r){U1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return G1(e,n,r)}}const v4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TJ(t,e,n,r){y4(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(v4.has(i)?i:j1(i),e.attrs[i])}class AJ extends g4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ql.has(n)){const r=_3(n);return r&&r.default||0}return n=v4.has(n)?n:j1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return z3(e,n,r)}build(e,n,r){G3(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){TJ(e,n,r,i)}mount(e){this.isSVGTag=q3(e.tagName),super.mount(e)}}const wJ=(t,e)=>F1(t)?new AJ(e):new EJ(e,{allowProjection:t!==F.Fragment}),_J=TQ({...WQ,...pJ,...iJ,...gJ},wJ),rI=YX(_J),RJ=({className:t="w-6 h-6",...e})=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),OJ=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})}),CJ=()=>{const[t,e]=F.useState(""),[n,r]=F.useState(""),[i,a]=F.useState(!1),s=rn(),o=pn(),{loading:c,error:u}=an(h=>h.auth),d=async h=>{h.preventDefault();try{await s(VY({email:t,password:n})),o("/dashboard")}catch(p){console.error("Login failed:",p)}};return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:S.jsxs(rI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-gray-100",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),S.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Welcome Back"}),S.jsx("p",{className:"text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),S.jsxs("form",{onSubmit:d,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),S.jsx("div",{className:"relative",children:S.jsx("input",{type:"email",id:"email",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"you@example.com",value:t,onChange:h=>e(h.target.value),required:!0})})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:i?"text":"password",id:"password",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 pr-12",placeholder:"••••••••",value:n,onChange:h=>r(h.target.value),required:!0}),S.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>a(!i),children:i?S.jsx(OJ,{className:"h-5 w-5"}):S.jsx(RJ,{className:"h-5 w-5"})})]})]}),u&&S.jsx(rI.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0",children:S.jsx("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),S.jsx("div",{className:"ml-3",children:S.jsx("p",{className:"text-sm text-red-700",children:u.message||"Invalid credentials. Please try again."})})]})}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),S.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),S.jsx("div",{className:"text-sm",children:S.jsx("a",{href:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot password?"})})]}),S.jsx("div",{children:S.jsx("button",{type:"submit",disabled:c,className:`w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 ${c?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:c?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"animate-spin h-5 w-5 mr-2"}),"Signing in..."]}):"Sign in"})})]}),S.jsxs("div",{className:"mt-6",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-300"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),S.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[S.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:S.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0110 4.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.933.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.14 18.163 20 14.418 20 10c0-5.523-4.477-10-10-10z",clipRule:"evenodd"})})}),S.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:S.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10c0 5.523 4.477 10 10 10 5.523 0 10-4.477 10-10 0-5.523-4.477-10-10-10zm5 10a5 5 0 11-10 0 5 5 0 0110 0z",clipRule:"evenodd"})})})]})]})]})})},LJ=()=>an(e=>e.auth.isAuthenticated)?S.jsx(mz,{}):S.jsx(hz,{to:"/login",replace:!0}),DJ=async(t="week")=>{var e,n;try{return(await Je.get(`/overview?time_range=${t}`)).data}catch(r){throw console.error("Error fetching overview data:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},IJ=t=>async e=>{e({type:wF});try{const n=await DJ(t);e({type:_F,payload:n})}catch(n){e({type:RF,payload:n})}},PJ=t=>({type:OF,payload:t});function b4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=b4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function et(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=b4(t))&&(r&&(r+=" "),r+=e);return r}var Ev,iI;function Zn(){if(iI)return Ev;iI=1;var t=Array.isArray;return Ev=t,Ev}var Tv,aI;function x4(){if(aI)return Tv;aI=1;var t=typeof xh=="object"&&xh&&xh.Object===Object&&xh;return Tv=t,Tv}var Av,sI;function _i(){if(sI)return Av;sI=1;var t=x4(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Av=n,Av}var wv,oI;function Yf(){if(oI)return wv;oI=1;var t=_i(),e=t.Symbol;return wv=e,wv}var _v,lI;function NJ(){if(lI)return _v;lI=1;var t=Yf(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(s){var o=n.call(s,i),c=s[i];try{s[i]=void 0;var u=!0}catch{}var d=r.call(s);return u&&(o?s[i]=c:delete s[i]),d}return _v=a,_v}var Rv,uI;function MJ(){if(uI)return Rv;uI=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return Rv=n,Rv}var Ov,cI;function fa(){if(cI)return Ov;cI=1;var t=Yf(),e=NJ(),n=MJ(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?e(o):n(o)}return Ov=s,Ov}var Cv,fI;function da(){if(fI)return Cv;fI=1;function t(e){return e!=null&&typeof e=="object"}return Cv=t,Cv}var Lv,dI;function Zl(){if(dI)return Lv;dI=1;var t=fa(),e=da(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return Lv=r,Lv}var Dv,hI;function q1(){if(hI)return Dv;hI=1;var t=Zn(),e=Zl(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(t(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return Dv=i,Dv}var Iv,mI;function ts(){if(mI)return Iv;mI=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return Iv=t,Iv}var Pv,pI;function H1(){if(pI)return Pv;pI=1;var t=fa(),e=ts(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var c=t(o);return c==r||c==i||c==n||c==a}return Pv=s,Pv}var Nv,gI;function kJ(){if(gI)return Nv;gI=1;var t=_i(),e=t["__core-js_shared__"];return Nv=e,Nv}var Mv,yI;function jJ(){if(yI)return Mv;yI=1;var t=kJ(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return Mv=n,Mv}var kv,vI;function S4(){if(vI)return kv;vI=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return kv=n,kv}var jv,bI;function UJ(){if(bI)return jv;bI=1;var t=H1(),e=jJ(),n=ts(),r=S4(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,c=s.toString,u=o.hasOwnProperty,d=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!n(p)||e(p))return!1;var y=t(p)?d:a;return y.test(r(p))}return jv=h,jv}var Uv,xI;function BJ(){if(xI)return Uv;xI=1;function t(e,n){return e==null?void 0:e[n]}return Uv=t,Uv}var Bv,SI;function to(){if(SI)return Bv;SI=1;var t=UJ(),e=BJ();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return Bv=n,Bv}var Fv,EI;function Jp(){if(EI)return Fv;EI=1;var t=to(),e=t(Object,"create");return Fv=e,Fv}var $v,TI;function FJ(){if(TI)return $v;TI=1;var t=Jp();function e(){this.__data__=t?t(null):{},this.size=0}return $v=e,$v}var Gv,AI;function $J(){if(AI)return Gv;AI=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Gv=t,Gv}var Vv,wI;function GJ(){if(wI)return Vv;wI=1;var t=Jp(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(t){var o=s[a];return o===e?void 0:o}return r.call(s,a)?s[a]:void 0}return Vv=i,Vv}var qv,_I;function VJ(){if(_I)return qv;_I=1;var t=Jp(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return qv=r,qv}var Hv,RI;function qJ(){if(RI)return Hv;RI=1;var t=Jp(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return Hv=n,Hv}var zv,OI;function HJ(){if(OI)return zv;OI=1;var t=FJ(),e=$J(),n=GJ(),r=VJ(),i=qJ();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,zv=a,zv}var Kv,CI;function zJ(){if(CI)return Kv;CI=1;function t(){this.__data__=[],this.size=0}return Kv=t,Kv}var Yv,LI;function z1(){if(LI)return Yv;LI=1;function t(e,n){return e===n||e!==e&&n!==n}return Yv=t,Yv}var Wv,DI;function eg(){if(DI)return Wv;DI=1;var t=z1();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return Wv=e,Wv}var Xv,II;function KJ(){if(II)return Xv;II=1;var t=eg(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return Xv=r,Xv}var Qv,PI;function YJ(){if(PI)return Qv;PI=1;var t=eg();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return Qv=e,Qv}var Zv,NI;function WJ(){if(NI)return Zv;NI=1;var t=eg();function e(n){return t(this.__data__,n)>-1}return Zv=e,Zv}var Jv,MI;function XJ(){if(MI)return Jv;MI=1;var t=eg();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return Jv=e,Jv}var eb,kI;function tg(){if(kI)return eb;kI=1;var t=zJ(),e=KJ(),n=YJ(),r=WJ(),i=XJ();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,eb=a,eb}var tb,jI;function K1(){if(jI)return tb;jI=1;var t=to(),e=_i(),n=t(e,"Map");return tb=n,tb}var nb,UI;function QJ(){if(UI)return nb;UI=1;var t=HJ(),e=tg(),n=K1();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return nb=r,nb}var rb,BI;function ZJ(){if(BI)return rb;BI=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return rb=t,rb}var ib,FI;function ng(){if(FI)return ib;FI=1;var t=ZJ();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return ib=e,ib}var ab,$I;function JJ(){if($I)return ab;$I=1;var t=ng();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return ab=e,ab}var sb,GI;function eee(){if(GI)return sb;GI=1;var t=ng();function e(n){return t(this,n).get(n)}return sb=e,sb}var ob,VI;function tee(){if(VI)return ob;VI=1;var t=ng();function e(n){return t(this,n).has(n)}return ob=e,ob}var lb,qI;function nee(){if(qI)return lb;qI=1;var t=ng();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return lb=e,lb}var ub,HI;function Y1(){if(HI)return ub;HI=1;var t=QJ(),e=JJ(),n=eee(),r=tee(),i=nee();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ub=a,ub}var cb,zI;function E4(){if(zI)return cb;zI=1;var t=Y1(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],c=a.cache;if(c.has(o))return c.get(o);var u=r.apply(this,s);return a.cache=c.set(o,u)||c,u};return a.cache=new(n.Cache||t),a}return n.Cache=t,cb=n,cb}var fb,KI;function ree(){if(KI)return fb;KI=1;var t=E4(),e=500;function n(r){var i=t(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return fb=n,fb}var db,YI;function iee(){if(YI)return db;YI=1;var t=ree(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,c,u){a.push(c?u.replace(n,"$1"):o||s)}),a});return db=r,db}var hb,WI;function W1(){if(WI)return hb;WI=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return hb=t,hb}var mb,XI;function aee(){if(XI)return mb;XI=1;var t=Yf(),e=W1(),n=Zn(),r=Zl(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return e(o,s)+"";if(r(o))return a?a.call(o):"";var c=o+"";return c=="0"&&1/o==-1/0?"-0":c}return mb=s,mb}var pb,QI;function T4(){if(QI)return pb;QI=1;var t=aee();function e(n){return n==null?"":t(n)}return pb=e,pb}var gb,ZI;function A4(){if(ZI)return gb;ZI=1;var t=Zn(),e=q1(),n=iee(),r=T4();function i(a,s){return t(a)?a:e(a,s)?[a]:n(r(a))}return gb=i,gb}var yb,JI;function rg(){if(JI)return yb;JI=1;var t=Zl();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return yb=e,yb}var vb,eP;function X1(){if(eP)return vb;eP=1;var t=A4(),e=rg();function n(r,i){i=t(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return vb=n,vb}var bb,tP;function w4(){if(tP)return bb;tP=1;var t=X1();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return bb=e,bb}var see=w4();const Ir=vt(see);var xb,nP;function oee(){if(nP)return xb;nP=1;function t(e){return e==null}return xb=t,xb}var lee=oee();const Ye=vt(lee);var Sb,rP;function uee(){if(rP)return Sb;rP=1;var t=fa(),e=Zn(),n=da(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return Sb=i,Sb}var cee=uee();const Ws=vt(cee);var fee=H1();const Ge=vt(fee);var dee=ts();const Jl=vt(dee);var Eb={exports:{}},it={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iP;function hee(){if(iP)return it;iP=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function x(b){if(typeof b=="object"&&b!==null){var T=b.$$typeof;switch(T){case t:switch(b=b.type,b){case n:case i:case r:case u:case d:return b;default:switch(b=b&&b.$$typeof,b){case o:case s:case c:case p:case h:case a:return b;default:return T}}case e:return T}}}return it.ContextConsumer=s,it.ContextProvider=a,it.Element=t,it.ForwardRef=c,it.Fragment=n,it.Lazy=p,it.Memo=h,it.Portal=e,it.Profiler=i,it.StrictMode=r,it.Suspense=u,it.SuspenseList=d,it.isAsyncMode=function(){return!1},it.isConcurrentMode=function(){return!1},it.isContextConsumer=function(b){return x(b)===s},it.isContextProvider=function(b){return x(b)===a},it.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},it.isForwardRef=function(b){return x(b)===c},it.isFragment=function(b){return x(b)===n},it.isLazy=function(b){return x(b)===p},it.isMemo=function(b){return x(b)===h},it.isPortal=function(b){return x(b)===e},it.isProfiler=function(b){return x(b)===i},it.isStrictMode=function(b){return x(b)===r},it.isSuspense=function(b){return x(b)===u},it.isSuspenseList=function(b){return x(b)===d},it.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===u||b===d||b===y||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===h||b.$$typeof===a||b.$$typeof===s||b.$$typeof===c||b.$$typeof===v||b.getModuleId!==void 0)},it.typeOf=x,it}var aP;function mee(){return aP||(aP=1,Eb.exports=hee()),Eb.exports}var pee=mee(),Tb,sP;function _4(){if(sP)return Tb;sP=1;var t=fa(),e=da(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return Tb=r,Tb}var Ab,oP;function gee(){if(oP)return Ab;oP=1;var t=_4();function e(n){return t(n)&&n!=+n}return Ab=e,Ab}var yee=gee();const Wf=vt(yee);var vee=_4();const bee=vt(vee);var Qr=function(e){return e===0?0:e>0?1:-1},Us=function(e){return Ws(e)&&e.indexOf("%")===e.length-1},ve=function(e){return bee(e)&&!Wf(e)},tn=function(e){return ve(e)||Ws(e)},xee=0,Xf=function(e){var n=++xee;return"".concat(e||"").concat(n)},Xs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ve(e)&&!Ws(e))return r;var a;if(Us(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Wf(a)&&(a=r),i&&a>n&&(a=n),a},qa=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},See=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Wr=function(e,n){return ve(e)&&ve(n)?function(r){return e+r*(n-e)}:function(){return n}};function Pm(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ir(r,e))===n})}var Eee=function(e,n){return ve(e)&&ve(n)?e-n:Ws(e)&&Ws(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function cl(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function gT(t){"@babel/helpers - typeof";return gT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gT(t)}var Tee=["viewBox","children"],Aee=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],lP=["points","pathLength"],wb={svg:Tee,polygon:lP,polyline:lP},Q1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Nm=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(F.isValidElement(e)&&(r=e.props),!Jl(r))return null;var i={};return Object.keys(r).forEach(function(a){Q1.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},wee=function(e,n,r){return function(i){return e(n,r,i),null}},Mm=function(e,n,r){if(!Jl(e)||gT(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];Q1.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=wee(s,n,r))}),i},_ee=["children"],Ree=["children"];function uP(t,e){if(t==null)return{};var n=Oee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Oee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yT(t){"@babel/helpers - typeof";return yT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yT(t)}var cP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ea=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},fP=null,_b=null,Z1=function t(e){if(e===fP&&Array.isArray(_b))return _b;var n=[];return F.Children.forEach(e,function(r){Ye(r)||(pee.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),_b=n,fP=e,n};function Pr(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return ea(i)}):r=[ea(e)],Z1(t).forEach(function(i){var a=Ir(i,"type.displayName")||Ir(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function lr(t,e){var n=Pr(t,e);return n&&n[0]}var dP=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!ve(r)||r<=0||!ve(i)||i<=0)},Cee=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Lee=function(e){return e&&e.type&&Ws(e.type)&&Cee.indexOf(e.type)>=0},Dee=function(e){return e&&yT(e)==="object"&&"clipDot"in e},Iee=function(e,n,r,i){var a,s=(a=wb==null?void 0:wb[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Ge(e)&&(i&&s.includes(n)||Aee.includes(n))||r&&Q1.includes(n)},We=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(F.isValidElement(e)&&(i=e.props),!Jl(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;Iee((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},vT=function t(e,n){if(e===n)return!0;var r=F.Children.count(e);if(r!==F.Children.count(n))return!1;if(r===0)return!0;if(r===1)return hP(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!hP(a,s))return!1}return!0},hP=function(e,n){if(Ye(e)&&Ye(n))return!0;if(!Ye(e)&&!Ye(n)){var r=e.props||{},i=r.children,a=uP(r,_ee),s=n.props||{},o=s.children,c=uP(s,Ree);return i&&o?cl(a,c)&&vT(i,o):!i&&!o?cl(a,c):!1}return!1},mP=function(e,n){var r=[],i={};return Z1(e).forEach(function(a,s){if(Lee(a))r.push(a);else if(a){var o=ea(a.type),c=n[o]||{},u=c.handler,d=c.once;if(u&&(!d||!i[o])){var h=u(a,o,s);r.push(h),i[o]=!0}}}),r},Pee=function(e){var n=e&&e.type;return n&&cP[n]?cP[n]:null},Nee=function(e,n){return Z1(n).indexOf(e)},Mee=["children","width","height","viewBox","className","style","title","desc"];function bT(){return bT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bT.apply(this,arguments)}function kee(t,e){if(t==null)return{};var n=jee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xT(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,c=t.desc,u=kee(t,Mee),d=i||{width:n,height:r,x:0,y:0},h=et("recharts-surface",a);return Q.createElement("svg",bT({},We(u,!0,"svg"),{className:h,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Q.createElement("title",null,o),Q.createElement("desc",null,c),e)}var Uee=["children","className"];function ST(){return ST=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ST.apply(this,arguments)}function Bee(t,e){if(t==null)return{};var n=Fee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var $t=Q.forwardRef(function(t,e){var n=t.children,r=t.className,i=Bee(t,Uee),a=et("recharts-layer",r);return Q.createElement("g",ST({className:a},We(i,!0),{ref:e}),n)}),ta=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},Rb,pP;function $ee(){if(pP)return Rb;pP=1;function t(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+n];return s}return Rb=t,Rb}var Ob,gP;function Gee(){if(gP)return Ob;gP=1;var t=$ee();function e(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:t(n,r,i)}return Ob=e,Ob}var Cb,yP;function R4(){if(yP)return Cb;yP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+i+a+"]");function c(u){return o.test(u)}return Cb=c,Cb}var Lb,vP;function Vee(){if(vP)return Lb;vP=1;function t(e){return e.split("")}return Lb=t,Lb}var Db,bP;function qee(){if(bP)return Db;bP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="["+t+"]",o="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+c+")",d="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",v=u+"?",x="["+a+"]?",b="(?:"+y+"(?:"+[d,h,p].join("|")+")"+x+v+")*",T=x+v+b,_="(?:"+[d+o+"?",o,h,p,s].join("|")+")",w=RegExp(c+"(?="+c+")|"+_+T,"g");function O(R){return R.match(w)||[]}return Db=O,Db}var Ib,xP;function Hee(){if(xP)return Ib;xP=1;var t=Vee(),e=R4(),n=qee();function r(i){return e(i)?n(i):t(i)}return Ib=r,Ib}var Pb,SP;function zee(){if(SP)return Pb;SP=1;var t=Gee(),e=R4(),n=Hee(),r=T4();function i(a){return function(s){s=r(s);var o=e(s)?n(s):void 0,c=o?o[0]:s.charAt(0),u=o?t(o,1).join(""):s.slice(1);return c[a]()+u}}return Pb=i,Pb}var Nb,EP;function Kee(){if(EP)return Nb;EP=1;var t=zee(),e=t("toUpperCase");return Nb=e,Nb}var Yee=Kee();const ig=vt(Yee);function xt(t){return function(){return t}}const O4=Math.cos,km=Math.sin,ni=Math.sqrt,jm=Math.PI,ag=2*jm,ET=Math.PI,TT=2*ET,Ds=1e-6,Wee=TT-Ds;function C4(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Xee(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return C4;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Qee{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?C4:Xee(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,d=s-e,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Ds)if(!(Math.abs(h*c-u*d)>Ds)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-s,v=i-o,x=c*c+u*u,b=y*y+v*v,T=Math.sqrt(x),_=Math.sqrt(p),w=a*Math.tan((ET-Math.acos((x+p-b)/(2*T*_)))/2),O=w/_,R=w/T;Math.abs(O-1)>Ds&&this._append`L${e+O*d},${n+O*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=e+R*c},${this._y1=n+R*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,d=n+c,h=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ds||Math.abs(this._y1-d)>Ds)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%TT+TT),p>Wee?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:p>Ds&&this._append`A${r},${r},0,${+(p>=ET)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function J1(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Qee(e)}function ew(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function L4(t){this._context=t}L4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function sg(t){return new L4(t)}function D4(t){return t[0]}function I4(t){return t[1]}function P4(t,e){var n=xt(!0),r=null,i=sg,a=null,s=J1(o);t=typeof t=="function"?t:t===void 0?D4:xt(t),e=typeof e=="function"?e:e===void 0?I4:xt(e);function o(c){var u,d=(c=ew(c)).length,h,p=!1,y;for(r==null&&(a=i(y=s())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(h,u,c),+e(h,u,c));if(y)return a=null,y+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:xt(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:xt(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:xt(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function _h(t,e,n){var r=null,i=xt(!0),a=null,s=sg,o=null,c=J1(u);t=typeof t=="function"?t:t===void 0?D4:xt(+t),e=typeof e=="function"?e:xt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?I4:xt(+n);function u(h){var p,y,v,x=(h=ew(h)).length,b,T=!1,_,w=new Array(x),O=new Array(x);for(a==null&&(o=s(_=c())),p=0;p<=x;++p){if(!(p<x&&i(b=h[p],p,h))===T)if(T=!T)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(w[v],O[v]);o.lineEnd(),o.areaEnd()}T&&(w[p]=+t(b,p,h),O[p]=+e(b,p,h),o.point(r?+r(b,p,h):w[p],n?+n(b,p,h):O[p]))}if(_)return o=null,_+""||null}function d(){return P4().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:xt(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:xt(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:xt(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:xt(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:xt(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:xt(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:xt(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class N4{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Zee(t){return new N4(t,!0)}function Jee(t){return new N4(t,!1)}const tw={draw(t,e){const n=ni(e/jm);t.moveTo(n,0),t.arc(0,0,n,0,ag)}},ete={draw(t,e){const n=ni(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},M4=ni(1/3),tte=M4*2,nte={draw(t,e){const n=ni(e/tte),r=n*M4;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},rte={draw(t,e){const n=ni(e),r=-n/2;t.rect(r,r,n,n)}},ite=.8908130915292852,k4=km(jm/10)/km(7*jm/10),ate=km(ag/10)*k4,ste=-O4(ag/10)*k4,ote={draw(t,e){const n=ni(e*ite),r=ate*n,i=ste*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=ag*a/5,o=O4(s),c=km(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},Mb=ni(3),lte={draw(t,e){const n=-ni(e/(Mb*3));t.moveTo(0,n*2),t.lineTo(-Mb*n,-n),t.lineTo(Mb*n,-n),t.closePath()}},Tr=-.5,Ar=ni(3)/2,AT=1/ni(12),ute=(AT/2+1)*3,cte={draw(t,e){const n=ni(e/ute),r=n/2,i=n*AT,a=r,s=n*AT+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Tr*r-Ar*i,Ar*r+Tr*i),t.lineTo(Tr*a-Ar*s,Ar*a+Tr*s),t.lineTo(Tr*o-Ar*c,Ar*o+Tr*c),t.lineTo(Tr*r+Ar*i,Tr*i-Ar*r),t.lineTo(Tr*a+Ar*s,Tr*s-Ar*a),t.lineTo(Tr*o+Ar*c,Tr*c-Ar*o),t.closePath()}};function fte(t,e){let n=null,r=J1(i);t=typeof t=="function"?t:xt(t||tw),e=typeof e=="function"?e:xt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:xt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:xt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Um(){}function Bm(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function j4(t){this._context=t}j4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dte(t){return new j4(t)}function U4(t){this._context=t}U4.prototype={areaStart:Um,areaEnd:Um,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Bm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function hte(t){return new U4(t)}function B4(t){this._context=t}B4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Bm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mte(t){return new B4(t)}function F4(t){this._context=t}F4.prototype={areaStart:Um,areaEnd:Um,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function pte(t){return new F4(t)}function TP(t){return t<0?-1:1}function AP(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(TP(a)+TP(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function wP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kb(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function Fm(t){this._context=t}Fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kb(this,this._t0,wP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kb(this,wP(this,n=AP(this,t,e)),n);break;default:kb(this,this._t0,n=AP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function $4(t){this._context=new G4(t)}($4.prototype=Object.create(Fm.prototype)).point=function(t,e){Fm.prototype.point.call(this,e,t)};function G4(t){this._context=t}G4.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function gte(t){return new Fm(t)}function yte(t){return new $4(t)}function V4(t){this._context=t}V4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=_P(t),i=_P(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function _P(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function vte(t){return new V4(t)}function og(t,e){this._context=t,this._t=e}og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function bte(t){return new og(t,.5)}function xte(t){return new og(t,0)}function Ste(t){return new og(t,1)}function bl(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function wT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ete(t,e){return t[e]}function Tte(t){const e=[];return e.key=t,e}function Ate(){var t=xt([]),e=wT,n=bl,r=Ete;function i(a){var s=Array.from(t.apply(this,arguments),Tte),o,c=s.length,u=-1,d;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,d=ew(e(s));o<c;++o)s[d[o]].index=o;return n(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:xt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:xt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?wT:typeof a=="function"?a:xt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??bl,i):n},i}function wte(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}bl(t,e)}}function _te(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}bl(t,e)}}function Rte(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var d=t[e[o]],h=d[r][1]||0,p=d[r-1][1]||0,y=(h-p)/2,v=0;v<o;++v){var x=t[e[v]],b=x[r][1]||0,T=x[r-1][1]||0;y+=b-T}c+=h,u+=y*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,bl(t,e)}}function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}var Ote=["type","size","sizeType"];function _T(){return _T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_T.apply(this,arguments)}function RP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RP(Object(n),!0).forEach(function(r){Cte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cte(t,e,n){return e=Lte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lte(t){var e=Dte(t,"string");return Wc(e)=="symbol"?e:e+""}function Dte(t,e){if(Wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ite(t,e){if(t==null)return{};var n=Pte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var q4={symbolCircle:tw,symbolCross:ete,symbolDiamond:nte,symbolSquare:rte,symbolStar:ote,symbolTriangle:lte,symbolWye:cte},Nte=Math.PI/180,Mte=function(e){var n="symbol".concat(ig(e));return q4[n]||tw},kte=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Nte;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},jte=function(e,n){q4["symbol".concat(ig(e))]=n},nw=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,c=Ite(e,Ote),u=OP(OP({},c),{},{type:r,size:a,sizeType:o}),d=function(){var b=Mte(r),T=fte().type(b).size(kte(a,o,r));return T()},h=u.className,p=u.cx,y=u.cy,v=We(u,!0);return p===+p&&y===+y&&a===+a?Q.createElement("path",_T({},v,{className:et("recharts-symbols",h),transform:"translate(".concat(p,", ").concat(y,")"),d:d()})):null};nw.registerSymbol=jte;function xl(t){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xl(t)}function RT(){return RT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RT.apply(this,arguments)}function CP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ute(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(n),!0).forEach(function(r){Xc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fte(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z4(r.key),r)}}function $te(t,e,n){return e&&Fte(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gte(t,e,n){return e=$m(e),Vte(t,H4()?Reflect.construct(e,n||[],$m(t).constructor):e.apply(t,n))}function Vte(t,e){if(e&&(xl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qte(t)}function qte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H4=function(){return!!t})()}function $m(t){return $m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$m(t)}function Hte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OT(t,e)}function OT(t,e){return OT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OT(t,e)}function Xc(t,e,n){return e=z4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z4(t){var e=zte(t,"string");return xl(e)=="symbol"?e:e+""}function zte(t,e){if(xl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wr=32,rw=function(t){function e(){return Bte(this,e),Gte(this,e,arguments)}return Hte(e,t),$te(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=wr/2,s=wr/6,o=wr/3,c=r.inactive?i:r.color;if(r.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:wr,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(wr,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return Q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(wr/8,"h").concat(wr,"v").concat(wr*3/4,"h").concat(-wr,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(r.legendIcon)){var u=Ute({},r);return delete u.legendIcon,Q.cloneElement(r.legendIcon,u)}return Q.createElement(nw,{fill:c,cx:a,cy:a,size:wr,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:wr,height:wr},h={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(y,v){var x=y.formatter||c,b=et(Xc(Xc({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",y.inactive));if(y.type==="none")return null;var T=Ge(y.value)?null:y.value;ta(!Ge(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=y.inactive?u:y.color;return Q.createElement("li",RT({className:b,style:h,key:"legend-item-".concat(v)},Mm(r.props,y,v)),Q.createElement(xT,{width:s,height:s,viewBox:d,style:p},r.renderIcon(y)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},x?x(T,y,v):T))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(F.PureComponent);Xc(rw,"displayName","Legend");Xc(rw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var jb,LP;function Kte(){if(LP)return jb;LP=1;var t=tg();function e(){this.__data__=new t,this.size=0}return jb=e,jb}var Ub,DP;function Yte(){if(DP)return Ub;DP=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Ub=t,Ub}var Bb,IP;function Wte(){if(IP)return Bb;IP=1;function t(e){return this.__data__.get(e)}return Bb=t,Bb}var Fb,PP;function Xte(){if(PP)return Fb;PP=1;function t(e){return this.__data__.has(e)}return Fb=t,Fb}var $b,NP;function Qte(){if(NP)return $b;NP=1;var t=tg(),e=K1(),n=Y1(),r=200;function i(a,s){var o=this.__data__;if(o instanceof t){var c=o.__data__;if(!e||c.length<r-1)return c.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(c)}return o.set(a,s),this.size=o.size,this}return $b=i,$b}var Gb,MP;function K4(){if(MP)return Gb;MP=1;var t=tg(),e=Kte(),n=Yte(),r=Wte(),i=Xte(),a=Qte();function s(o){var c=this.__data__=new t(o);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Gb=s,Gb}var Vb,kP;function Zte(){if(kP)return Vb;kP=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Vb=e,Vb}var qb,jP;function Jte(){if(jP)return qb;jP=1;function t(e){return this.__data__.has(e)}return qb=t,qb}var Hb,UP;function Y4(){if(UP)return Hb;UP=1;var t=Y1(),e=Zte(),n=Jte();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,Hb=r,Hb}var zb,BP;function W4(){if(BP)return zb;BP=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return zb=t,zb}var Kb,FP;function X4(){if(FP)return Kb;FP=1;function t(e,n){return e.has(n)}return Kb=t,Kb}var Yb,$P;function Q4(){if($P)return Yb;$P=1;var t=Y4(),e=W4(),n=X4(),r=1,i=2;function a(s,o,c,u,d,h){var p=c&r,y=s.length,v=o.length;if(y!=v&&!(p&&v>y))return!1;var x=h.get(s),b=h.get(o);if(x&&b)return x==o&&b==s;var T=-1,_=!0,w=c&i?new t:void 0;for(h.set(s,o),h.set(o,s);++T<y;){var O=s[T],R=o[T];if(u)var C=p?u(R,O,T,o,s,h):u(O,R,T,s,o,h);if(C!==void 0){if(C)continue;_=!1;break}if(w){if(!e(o,function(L,P){if(!n(w,P)&&(O===L||d(O,L,c,u,h)))return w.push(P)})){_=!1;break}}else if(!(O===R||d(O,R,c,u,h))){_=!1;break}}return h.delete(s),h.delete(o),_}return Yb=a,Yb}var Wb,GP;function ene(){if(GP)return Wb;GP=1;var t=_i(),e=t.Uint8Array;return Wb=e,Wb}var Xb,VP;function tne(){if(VP)return Xb;VP=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return Xb=t,Xb}var Qb,qP;function iw(){if(qP)return Qb;qP=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return Qb=t,Qb}var Zb,HP;function nne(){if(HP)return Zb;HP=1;var t=Yf(),e=ene(),n=z1(),r=Q4(),i=tne(),a=iw(),s=1,o=2,c="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Map]",p="[object Number]",y="[object RegExp]",v="[object Set]",x="[object String]",b="[object Symbol]",T="[object ArrayBuffer]",_="[object DataView]",w=t?t.prototype:void 0,O=w?w.valueOf:void 0;function R(C,L,P,N,k,M,$){switch(P){case _:if(C.byteLength!=L.byteLength||C.byteOffset!=L.byteOffset)return!1;C=C.buffer,L=L.buffer;case T:return!(C.byteLength!=L.byteLength||!M(new e(C),new e(L)));case c:case u:case p:return n(+C,+L);case d:return C.name==L.name&&C.message==L.message;case y:case x:return C==L+"";case h:var K=i;case v:var W=N&s;if(K||(K=a),C.size!=L.size&&!W)return!1;var Y=$.get(C);if(Y)return Y==L;N|=o,$.set(C,L);var j=r(K(C),K(L),N,k,M,$);return $.delete(C),j;case b:if(O)return O.call(C)==O.call(L)}return!1}return Zb=R,Zb}var Jb,zP;function Z4(){if(zP)return Jb;zP=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return Jb=t,Jb}var ex,KP;function rne(){if(KP)return ex;KP=1;var t=Z4(),e=Zn();function n(r,i,a){var s=i(r);return e(r)?s:t(s,a(r))}return ex=n,ex}var tx,YP;function ine(){if(YP)return tx;YP=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];n(o,r,e)&&(s[a++]=o)}return s}return tx=t,tx}var nx,WP;function ane(){if(WP)return nx;WP=1;function t(){return[]}return nx=t,nx}var rx,XP;function sne(){if(XP)return rx;XP=1;var t=ine(),e=ane(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(o){return r.call(s,o)}))}:e;return rx=a,rx}var ix,QP;function one(){if(QP)return ix;QP=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return ix=t,ix}var ax,ZP;function lne(){if(ZP)return ax;ZP=1;var t=fa(),e=da(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return ax=r,ax}var sx,JP;function aw(){if(JP)return sx;JP=1;var t=lne(),e=da(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return sx=a,sx}var Ec={exports:{}},ox,eN;function une(){if(eN)return ox;eN=1;function t(){return!1}return ox=t,ox}Ec.exports;var tN;function J4(){return tN||(tN=1,function(t,e){var n=_i(),r=une(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;t.exports=u}(Ec,Ec.exports)),Ec.exports}var lx,nN;function sw(){if(nN)return lx;nN=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return lx=n,lx}var ux,rN;function ow(){if(rN)return ux;rN=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return ux=e,ux}var cx,iN;function cne(){if(iN)return cx;iN=1;var t=fa(),e=ow(),n=da(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",h="[object Object]",p="[object RegExp]",y="[object Set]",v="[object String]",x="[object WeakMap]",b="[object ArrayBuffer]",T="[object DataView]",_="[object Float32Array]",w="[object Float64Array]",O="[object Int8Array]",R="[object Int16Array]",C="[object Int32Array]",L="[object Uint8Array]",P="[object Uint8ClampedArray]",N="[object Uint16Array]",k="[object Uint32Array]",M={};M[_]=M[w]=M[O]=M[R]=M[C]=M[L]=M[P]=M[N]=M[k]=!0,M[r]=M[i]=M[b]=M[a]=M[T]=M[s]=M[o]=M[c]=M[u]=M[d]=M[h]=M[p]=M[y]=M[v]=M[x]=!1;function $(K){return n(K)&&e(K.length)&&!!M[t(K)]}return cx=$,cx}var fx,aN;function e6(){if(aN)return fx;aN=1;function t(e){return function(n){return e(n)}}return fx=t,fx}var Tc={exports:{}};Tc.exports;var sN;function fne(){return sN||(sN=1,function(t,e){var n=x4(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o}(Tc,Tc.exports)),Tc.exports}var dx,oN;function t6(){if(oN)return dx;oN=1;var t=cne(),e=e6(),n=fne(),r=n&&n.isTypedArray,i=r?e(r):t;return dx=i,dx}var hx,lN;function dne(){if(lN)return hx;lN=1;var t=one(),e=aw(),n=Zn(),r=J4(),i=sw(),a=t6(),s=Object.prototype,o=s.hasOwnProperty;function c(u,d){var h=n(u),p=!h&&e(u),y=!h&&!p&&r(u),v=!h&&!p&&!y&&a(u),x=h||p||y||v,b=x?t(u.length,String):[],T=b.length;for(var _ in u)(d||o.call(u,_))&&!(x&&(_=="length"||y&&(_=="offset"||_=="parent")||v&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,T)))&&b.push(_);return b}return hx=c,hx}var mx,uN;function hne(){if(uN)return mx;uN=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return mx=e,mx}var px,cN;function n6(){if(cN)return px;cN=1;function t(e,n){return function(r){return e(n(r))}}return px=t,px}var gx,fN;function mne(){if(fN)return gx;fN=1;var t=n6(),e=t(Object.keys,Object);return gx=e,gx}var yx,dN;function pne(){if(dN)return yx;dN=1;var t=hne(),e=mne(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return yx=i,yx}var vx,hN;function Qf(){if(hN)return vx;hN=1;var t=H1(),e=ow();function n(r){return r!=null&&e(r.length)&&!t(r)}return vx=n,vx}var bx,mN;function lg(){if(mN)return bx;mN=1;var t=dne(),e=pne(),n=Qf();function r(i){return n(i)?t(i):e(i)}return bx=r,bx}var xx,pN;function gne(){if(pN)return xx;pN=1;var t=rne(),e=sne(),n=lg();function r(i){return t(i,n,e)}return xx=r,xx}var Sx,gN;function yne(){if(gN)return Sx;gN=1;var t=gne(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,c,u,d){var h=o&e,p=t(a),y=p.length,v=t(s),x=v.length;if(y!=x&&!h)return!1;for(var b=y;b--;){var T=p[b];if(!(h?T in s:r.call(s,T)))return!1}var _=d.get(a),w=d.get(s);if(_&&w)return _==s&&w==a;var O=!0;d.set(a,s),d.set(s,a);for(var R=h;++b<y;){T=p[b];var C=a[T],L=s[T];if(c)var P=h?c(L,C,T,s,a,d):c(C,L,T,a,s,d);if(!(P===void 0?C===L||u(C,L,o,c,d):P)){O=!1;break}R||(R=T=="constructor")}if(O&&!R){var N=a.constructor,k=s.constructor;N!=k&&"constructor"in a&&"constructor"in s&&!(typeof N=="function"&&N instanceof N&&typeof k=="function"&&k instanceof k)&&(O=!1)}return d.delete(a),d.delete(s),O}return Sx=i,Sx}var Ex,yN;function vne(){if(yN)return Ex;yN=1;var t=to(),e=_i(),n=t(e,"DataView");return Ex=n,Ex}var Tx,vN;function bne(){if(vN)return Tx;vN=1;var t=to(),e=_i(),n=t(e,"Promise");return Tx=n,Tx}var Ax,bN;function r6(){if(bN)return Ax;bN=1;var t=to(),e=_i(),n=t(e,"Set");return Ax=n,Ax}var wx,xN;function xne(){if(xN)return wx;xN=1;var t=to(),e=_i(),n=t(e,"WeakMap");return wx=n,wx}var _x,SN;function Sne(){if(SN)return _x;SN=1;var t=vne(),e=K1(),n=bne(),r=r6(),i=xne(),a=fa(),s=S4(),o="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",y=s(t),v=s(e),x=s(n),b=s(r),T=s(i),_=a;return(t&&_(new t(new ArrayBuffer(1)))!=p||e&&_(new e)!=o||n&&_(n.resolve())!=u||r&&_(new r)!=d||i&&_(new i)!=h)&&(_=function(w){var O=a(w),R=O==c?w.constructor:void 0,C=R?s(R):"";if(C)switch(C){case y:return p;case v:return o;case x:return u;case b:return d;case T:return h}return O}),_x=_,_x}var Rx,EN;function Ene(){if(EN)return Rx;EN=1;var t=K4(),e=Q4(),n=nne(),r=yne(),i=Sne(),a=Zn(),s=J4(),o=t6(),c=1,u="[object Arguments]",d="[object Array]",h="[object Object]",p=Object.prototype,y=p.hasOwnProperty;function v(x,b,T,_,w,O){var R=a(x),C=a(b),L=R?d:i(x),P=C?d:i(b);L=L==u?h:L,P=P==u?h:P;var N=L==h,k=P==h,M=L==P;if(M&&s(x)){if(!s(b))return!1;R=!0,N=!1}if(M&&!N)return O||(O=new t),R||o(x)?e(x,b,T,_,w,O):n(x,b,L,T,_,w,O);if(!(T&c)){var $=N&&y.call(x,"__wrapped__"),K=k&&y.call(b,"__wrapped__");if($||K){var W=$?x.value():x,Y=K?b.value():b;return O||(O=new t),w(W,Y,T,_,O)}}return M?(O||(O=new t),r(x,b,T,_,w,O)):!1}return Rx=v,Rx}var Ox,TN;function lw(){if(TN)return Ox;TN=1;var t=Ene(),e=da();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,s,n,o)}return Ox=n,Ox}var Cx,AN;function Tne(){if(AN)return Cx;AN=1;var t=K4(),e=lw(),n=1,r=2;function i(a,s,o,c){var u=o.length,d=u,h=!c;if(a==null)return!d;for(a=Object(a);u--;){var p=o[u];if(h&&p[2]?p[1]!==a[p[0]]:!(p[0]in a))return!1}for(;++u<d;){p=o[u];var y=p[0],v=a[y],x=p[1];if(h&&p[2]){if(v===void 0&&!(y in a))return!1}else{var b=new t;if(c)var T=c(v,x,y,a,s,b);if(!(T===void 0?e(x,v,n|r,c,b):T))return!1}}return!0}return Cx=i,Cx}var Lx,wN;function i6(){if(wN)return Lx;wN=1;var t=ts();function e(n){return n===n&&!t(n)}return Lx=e,Lx}var Dx,_N;function Ane(){if(_N)return Dx;_N=1;var t=i6(),e=lg();function n(r){for(var i=e(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,t(o)]}return i}return Dx=n,Dx}var Ix,RN;function a6(){if(RN)return Ix;RN=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return Ix=t,Ix}var Px,ON;function wne(){if(ON)return Px;ON=1;var t=Tne(),e=Ane(),n=a6();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return Px=r,Px}var Nx,CN;function _ne(){if(CN)return Nx;CN=1;function t(e,n){return e!=null&&n in Object(e)}return Nx=t,Nx}var Mx,LN;function Rne(){if(LN)return Mx;LN=1;var t=A4(),e=aw(),n=Zn(),r=sw(),i=ow(),a=rg();function s(o,c,u){c=t(c,o);for(var d=-1,h=c.length,p=!1;++d<h;){var y=a(c[d]);if(!(p=o!=null&&u(o,y)))break;o=o[y]}return p||++d!=h?p:(h=o==null?0:o.length,!!h&&i(h)&&r(y,h)&&(n(o)||e(o)))}return Mx=s,Mx}var kx,DN;function One(){if(DN)return kx;DN=1;var t=_ne(),e=Rne();function n(r,i){return r!=null&&e(r,i,t)}return kx=n,kx}var jx,IN;function Cne(){if(IN)return jx;IN=1;var t=lw(),e=w4(),n=One(),r=q1(),i=i6(),a=a6(),s=rg(),o=1,c=2;function u(d,h){return r(d)&&i(h)?a(s(d),h):function(p){var y=e(p,d);return y===void 0&&y===h?n(p,d):t(h,y,o|c)}}return jx=u,jx}var Ux,PN;function eu(){if(PN)return Ux;PN=1;function t(e){return e}return Ux=t,Ux}var Bx,NN;function Lne(){if(NN)return Bx;NN=1;function t(e){return function(n){return n==null?void 0:n[e]}}return Bx=t,Bx}var Fx,MN;function Dne(){if(MN)return Fx;MN=1;var t=X1();function e(n){return function(r){return t(r,n)}}return Fx=e,Fx}var $x,kN;function Ine(){if(kN)return $x;kN=1;var t=Lne(),e=Dne(),n=q1(),r=rg();function i(a){return n(a)?t(r(a)):e(a)}return $x=i,$x}var Gx,jN;function ns(){if(jN)return Gx;jN=1;var t=wne(),e=Cne(),n=eu(),r=Zn(),i=Ine();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?e(s[0],s[1]):t(s):i(s)}return Gx=a,Gx}var Vx,UN;function s6(){if(UN)return Vx;UN=1;function t(e,n,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(e[s],s,e))return s;return-1}return Vx=t,Vx}var qx,BN;function Pne(){if(BN)return qx;BN=1;function t(e){return e!==e}return qx=t,qx}var Hx,FN;function Nne(){if(FN)return Hx;FN=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return Hx=t,Hx}var zx,$N;function Mne(){if($N)return zx;$N=1;var t=s6(),e=Pne(),n=Nne();function r(i,a,s){return a===a?n(i,a,s):t(i,e,s)}return zx=r,zx}var Kx,GN;function kne(){if(GN)return Kx;GN=1;var t=Mne();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return Kx=e,Kx}var Yx,VN;function jne(){if(VN)return Yx;VN=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return Yx=t,Yx}var Wx,qN;function Une(){if(qN)return Wx;qN=1;function t(){}return Wx=t,Wx}var Xx,HN;function Bne(){if(HN)return Xx;HN=1;var t=r6(),e=Une(),n=iw(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return Xx=i,Xx}var Qx,zN;function Fne(){if(zN)return Qx;zN=1;var t=Y4(),e=kne(),n=jne(),r=X4(),i=Bne(),a=iw(),s=200;function o(c,u,d){var h=-1,p=e,y=c.length,v=!0,x=[],b=x;if(d)v=!1,p=n;else if(y>=s){var T=u?null:i(c);if(T)return a(T);v=!1,p=r,b=new t}else b=u?[]:x;e:for(;++h<y;){var _=c[h],w=u?u(_):_;if(_=d||_!==0?_:0,v&&w===w){for(var O=b.length;O--;)if(b[O]===w)continue e;u&&b.push(w),x.push(_)}else p(b,w,d)||(b!==x&&b.push(w),x.push(_))}return x}return Qx=o,Qx}var Zx,KN;function $ne(){if(KN)return Zx;KN=1;var t=ns(),e=Fne();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return Zx=n,Zx}var Gne=$ne();const YN=vt(Gne);function o6(t,e,n){return e===!0?YN(t,n):Ge(e)?YN(t,e):t}function Sl(t){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sl(t)}var Vne=["ref"];function WN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WN(Object(n),!0).forEach(function(r){ug(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u6(r.key),r)}}function Hne(t,e,n){return e&&XN(t.prototype,e),n&&XN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zne(t,e,n){return e=Gm(e),Kne(t,l6()?Reflect.construct(e,n||[],Gm(t).constructor):e.apply(t,n))}function Kne(t,e){if(e&&(Sl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yne(t)}function Yne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l6=function(){return!!t})()}function Gm(t){return Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gm(t)}function Wne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CT(t,e)}function CT(t,e){return CT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CT(t,e)}function ug(t,e,n){return e=u6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u6(t){var e=Xne(t,"string");return Sl(e)=="symbol"?e:e+""}function Xne(t,e){if(Sl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Qne(t,e){if(t==null)return{};var n=Zne(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Jne(t){return t.value}function ere(t,e){if(Q.isValidElement(t))return Q.cloneElement(t,e);if(typeof t=="function")return Q.createElement(t,e);e.ref;var n=Qne(e,Vne);return Q.createElement(rw,n)}var QN=1,fl=function(t){function e(){var n;qne(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=zne(this,e,[].concat(i)),ug(n,"lastBoundingBox",{width:-1,height:-1}),n}return Wne(e,t),Hne(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>QN||Math.abs(i.height-this.lastBoundingBox.height)>QN)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?qi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,h,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var y=this.getBBoxSnapshot();h={left:((u||0)-y.width)/2}}else h=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var v=this.getBBoxSnapshot();p={top:((d||0)-v.height)/2}}else p=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return qi(qi({},h),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=qi(qi({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return Q.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(y){r.wrapperNode=y}},ere(a,qi(qi({},this.props),{},{payload:o6(d,u,Jne)})))}}],[{key:"getWithHeight",value:function(r,i){var a=qi(qi({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&ve(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(F.PureComponent);ug(fl,"displayName","Legend");ug(fl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Jx,ZN;function tre(){if(ZN)return Jx;ZN=1;var t=Yf(),e=aw(),n=Zn(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return Jx=i,Jx}var eS,JN;function c6(){if(JN)return eS;JN=1;var t=Z4(),e=tre();function n(r,i,a,s,o){var c=-1,u=r.length;for(a||(a=e),o||(o=[]);++c<u;){var d=r[c];i>0&&a(d)?i>1?n(d,i-1,a,s,o):t(o,d):s||(o[o.length]=d)}return o}return eS=n,eS}var tS,eM;function nre(){if(eM)return tS;eM=1;function t(e){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),c=o.length;c--;){var u=o[e?c:++a];if(r(s[u],u,s)===!1)break}return n}}return tS=t,tS}var nS,tM;function rre(){if(tM)return nS;tM=1;var t=nre(),e=t();return nS=e,nS}var rS,nM;function f6(){if(nM)return rS;nM=1;var t=rre(),e=lg();function n(r,i){return r&&t(r,i,e)}return rS=n,rS}var iS,rM;function ire(){if(rM)return iS;rM=1;var t=Qf();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var s=i.length,o=r?s:-1,c=Object(i);(r?o--:++o<s)&&a(c[o],o,c)!==!1;);return i}}return iS=e,iS}var aS,iM;function uw(){if(iM)return aS;iM=1;var t=f6(),e=ire(),n=e(t);return aS=n,aS}var sS,aM;function d6(){if(aM)return sS;aM=1;var t=uw(),e=Qf();function n(r,i){var a=-1,s=e(r)?Array(r.length):[];return t(r,function(o,c,u){s[++a]=i(o,c,u)}),s}return sS=n,sS}var oS,sM;function are(){if(sM)return oS;sM=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return oS=t,oS}var lS,oM;function sre(){if(oM)return lS;oM=1;var t=Zl();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=t(n),c=r!==void 0,u=r===null,d=r===r,h=t(r);if(!u&&!h&&!o&&n>r||o&&c&&d&&!u&&!h||a&&c&&d||!i&&d||!s)return 1;if(!a&&!o&&!h&&n<r||h&&i&&s&&!a&&!o||u&&i&&s||!c&&s||!d)return-1}return 0}return lS=e,lS}var uS,lM;function ore(){if(lM)return uS;lM=1;var t=sre();function e(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,c=s.length,u=i.length;++a<c;){var d=t(s[a],o[a]);if(d){if(a>=u)return d;var h=i[a];return d*(h=="desc"?-1:1)}}return n.index-r.index}return uS=e,uS}var cS,uM;function lre(){if(uM)return cS;uM=1;var t=W1(),e=X1(),n=ns(),r=d6(),i=are(),a=e6(),s=ore(),o=eu(),c=Zn();function u(d,h,p){h.length?h=t(h,function(x){return c(x)?function(b){return e(b,x.length===1?x[0]:x)}:x}):h=[o];var y=-1;h=t(h,a(n));var v=r(d,function(x,b,T){var _=t(h,function(w){return w(x)});return{criteria:_,index:++y,value:x}});return i(v,function(x,b){return s(x,b,p)})}return cS=u,cS}var fS,cM;function ure(){if(cM)return fS;cM=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return fS=t,fS}var dS,fM;function cre(){if(fM)return dS;fM=1;var t=ure(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,c=e(s.length-i,0),u=Array(c);++o<c;)u[o]=s[i+o];o=-1;for(var d=Array(i+1);++o<i;)d[o]=s[o];return d[i]=a(u),t(r,this,d)}}return dS=n,dS}var hS,dM;function fre(){if(dM)return hS;dM=1;function t(e){return function(){return e}}return hS=t,hS}var mS,hM;function h6(){if(hM)return mS;hM=1;var t=to(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return mS=e,mS}var pS,mM;function dre(){if(mM)return pS;mM=1;var t=fre(),e=h6(),n=eu(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return pS=r,pS}var gS,pM;function hre(){if(pM)return gS;pM=1;var t=800,e=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),c=e-(o-s);if(s=o,c>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return gS=r,gS}var yS,gM;function mre(){if(gM)return yS;gM=1;var t=dre(),e=hre(),n=e(t);return yS=n,yS}var vS,yM;function pre(){if(yM)return vS;yM=1;var t=eu(),e=cre(),n=mre();function r(i,a){return n(e(i,a,t),i+"")}return vS=r,vS}var bS,vM;function cg(){if(vM)return bS;vM=1;var t=z1(),e=Qf(),n=sw(),r=ts();function i(a,s,o){if(!r(o))return!1;var c=typeof s;return(c=="number"?e(o)&&n(s,o.length):c=="string"&&s in o)?t(o[s],a):!1}return bS=i,bS}var xS,bM;function gre(){if(bM)return xS;bM=1;var t=c6(),e=lre(),n=pre(),r=cg(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return xS=i,xS}var yre=gre();const cw=vt(yre);function Qc(t){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(t)}function LT(){return LT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LT.apply(this,arguments)}function vre(t,e){return Ere(t)||Sre(t,e)||xre(t,e)||bre()}function bre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xre(t,e){if(t){if(typeof t=="string")return xM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xM(t,e)}}function xM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Ere(t){if(Array.isArray(t))return t}function SM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SM(Object(n),!0).forEach(function(r){Tre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tre(t,e,n){return e=Are(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Are(t){var e=wre(t,"string");return Qc(e)=="symbol"?e:e+""}function wre(t,e){if(Qc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _re(t){return Array.isArray(t)&&tn(t[0])&&tn(t[1])?t.join(" ~ "):t}var Rre=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,p=e.itemSorter,y=e.wrapperClassName,v=e.labelClassName,x=e.label,b=e.labelFormatter,T=e.accessibilityLayer,_=T===void 0?!1:T,w=function(){if(d&&d.length){var $={padding:0,margin:0},K=(p?cw(d,p):d).map(function(W,Y){if(W.type==="none")return null;var j=SS({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},o),G=W.formatter||h||_re,q=W.value,Z=W.name,B=q,V=Z;if(G&&B!=null&&V!=null){var H=G(q,Z,W,Y,d);if(Array.isArray(H)){var te=vre(H,2);B=te[0],V=te[1]}else B=H}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:j},tn(V)?Q.createElement("span",{className:"recharts-tooltip-item-name"},V):null,tn(V)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},B),Q.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:$},K)}return null},O=SS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),R=SS({margin:0},u),C=!Ye(x),L=C?x:"",P=et("recharts-default-tooltip",y),N=et("recharts-tooltip-label",v);C&&b&&d!==void 0&&d!==null&&(L=b(x,d));var k=_?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",LT({className:P,style:O},k),Q.createElement("p",{className:N,style:R},Q.isValidElement(L)?L:"".concat(L)),w())};function Zc(t){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(t)}function Rh(t,e,n){return e=Ore(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ore(t){var e=Cre(t,"string");return Zc(e)=="symbol"?e:e+""}function Cre(t,e){if(Zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cc="recharts-tooltip-wrapper",Lre={visibility:"hidden"};function Dre(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return et(cc,Rh(Rh(Rh(Rh({},"".concat(cc,"-right"),ve(n)&&e&&ve(e.x)&&n>=e.x),"".concat(cc,"-left"),ve(n)&&e&&ve(e.x)&&n<e.x),"".concat(cc,"-bottom"),ve(r)&&e&&ve(e.y)&&r>=e.y),"".concat(cc,"-top"),ve(r)&&e&&ve(e.y)&&r<e.y))}function EM(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&ve(a[r]))return a[r];var d=n[r]-o-i,h=n[r]+i;if(e[r])return s[r]?d:h;if(s[r]){var p=d,y=c[r];return p<y?Math.max(h,c[r]):Math.max(d,c[r])}var v=h+o,x=c[r]+u;return v>x?Math.max(d,c[r]):Math.max(h,c[r])}function Ire(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Pre(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,u,d,h;return s.height>0&&s.width>0&&n?(d=EM({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=EM({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Ire({translateX:d,translateY:h,useTranslate3d:o})):u=Lre,{cssProperties:u,cssClasses:Dre({translateX:d,translateY:h,coordinate:n})}}function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function TM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TM(Object(n),!0).forEach(function(r){IT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mre(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p6(r.key),r)}}function kre(t,e,n){return e&&Mre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jre(t,e,n){return e=Vm(e),Ure(t,m6()?Reflect.construct(e,n||[],Vm(t).constructor):e.apply(t,n))}function Ure(t,e){if(e&&(El(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bre(t)}function Bre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m6=function(){return!!t})()}function Vm(t){return Vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vm(t)}function Fre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DT(t,e)}function DT(t,e){return DT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DT(t,e)}function IT(t,e,n){return e=p6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p6(t){var e=$re(t,"string");return El(e)=="symbol"?e:e+""}function $re(t,e){if(El(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(El(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wM=1,Gre=function(t){function e(){var n;Nre(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=jre(this,e,[].concat(i)),IT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),IT(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return Fre(e,t),kre(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>wM||Math.abs(r.height-this.state.lastBoundingBox.height)>wM)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,p=i.isAnimationActive,y=i.offset,v=i.position,x=i.reverseDirection,b=i.useTranslate3d,T=i.viewBox,_=i.wrapperStyle,w=Pre({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:y,position:v,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:T}),O=w.cssClasses,R=w.cssProperties,C=AM(AM({transition:p&&a?"transform ".concat(o,"ms ").concat(c):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},_);return Q.createElement("div",{tabIndex:-1,className:O,style:C,ref:function(P){r.wrapperNode=P}},u)}}])}(F.PureComponent),Vre=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},tu={isSsr:Vre()};function Tl(t){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tl(t)}function _M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_M(Object(n),!0).forEach(function(r){fw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hre(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y6(r.key),r)}}function zre(t,e,n){return e&&Hre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kre(t,e,n){return e=qm(e),Yre(t,g6()?Reflect.construct(e,n||[],qm(t).constructor):e.apply(t,n))}function Yre(t,e){if(e&&(Tl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wre(t)}function Wre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g6=function(){return!!t})()}function qm(t){return qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qm(t)}function Xre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PT(t,e)}function PT(t,e){return PT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PT(t,e)}function fw(t,e,n){return e=y6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y6(t){var e=Qre(t,"string");return Tl(e)=="symbol"?e:e+""}function Qre(t,e){if(Tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Zre(t){return t.dataKey}function Jre(t,e){return Q.isValidElement(t)?Q.cloneElement(t,e):typeof t=="function"?Q.createElement(t,e):Q.createElement(Rre,e)}var mi=function(t){function e(){return qre(this,e),Kre(this,e,arguments)}return Xre(e,t),zre(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,p=i.isAnimationActive,y=i.offset,v=i.payload,x=i.payloadUniqBy,b=i.position,T=i.reverseDirection,_=i.useTranslate3d,w=i.viewBox,O=i.wrapperStyle,R=v??[];h&&R.length&&(R=o6(v.filter(function(L){return L.value!=null&&(L.hide!==!0||r.props.includeHidden)}),x,Zre));var C=R.length>0;return Q.createElement(Gre,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:p,active:a,coordinate:d,hasPayload:C,offset:y,position:b,reverseDirection:T,useTranslate3d:_,viewBox:w,wrapperStyle:O},Jre(u,RM(RM({},this.props),{},{payload:R})))}}])}(F.PureComponent);fw(mi,"displayName","Tooltip");fw(mi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!tu.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ES,OM;function eie(){if(OM)return ES;OM=1;var t=_i(),e=function(){return t.Date.now()};return ES=e,ES}var TS,CM;function tie(){if(CM)return TS;CM=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return TS=e,TS}var AS,LM;function nie(){if(LM)return AS;LM=1;var t=tie(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return AS=n,AS}var wS,DM;function v6(){if(DM)return wS;DM=1;var t=nie(),e=ts(),n=Zl(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=t(u);var h=a.test(u);return h||s.test(u)?o(u.slice(2),h?2:8):i.test(u)?r:+u}return wS=c,wS}var _S,IM;function rie(){if(IM)return _S;IM=1;var t=ts(),e=eie(),n=v6(),r="Expected a function",i=Math.max,a=Math.min;function s(o,c,u){var d,h,p,y,v,x,b=0,T=!1,_=!1,w=!0;if(typeof o!="function")throw new TypeError(r);c=n(c)||0,t(u)&&(T=!!u.leading,_="maxWait"in u,p=_?i(n(u.maxWait)||0,c):p,w="trailing"in u?!!u.trailing:w);function O(K){var W=d,Y=h;return d=h=void 0,b=K,y=o.apply(Y,W),y}function R(K){return b=K,v=setTimeout(P,c),T?O(K):y}function C(K){var W=K-x,Y=K-b,j=c-W;return _?a(j,p-Y):j}function L(K){var W=K-x,Y=K-b;return x===void 0||W>=c||W<0||_&&Y>=p}function P(){var K=e();if(L(K))return N(K);v=setTimeout(P,C(K))}function N(K){return v=void 0,w&&d?O(K):(d=h=void 0,y)}function k(){v!==void 0&&clearTimeout(v),b=0,d=x=h=v=void 0}function M(){return v===void 0?y:N(e())}function $(){var K=e(),W=L(K);if(d=arguments,h=this,x=K,W){if(v===void 0)return R(x);if(_)return clearTimeout(v),v=setTimeout(P,c),O(x)}return v===void 0&&(v=setTimeout(P,c)),y}return $.cancel=k,$.flush=M,$}return _S=s,_S}var RS,PM;function iie(){if(PM)return RS;PM=1;var t=rie(),e=ts(),n="Expected a function";function r(i,a,s){var o=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(s)&&(o="leading"in s?!!s.leading:o,c="trailing"in s?!!s.trailing:c),t(i,a,{leading:o,maxWait:a,trailing:c})}return RS=r,RS}var aie=iie();const b6=vt(aie);function Jc(t){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(t)}function NM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NM(Object(n),!0).forEach(function(r){sie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sie(t,e,n){return e=oie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oie(t){var e=lie(t,"string");return Jc(e)=="symbol"?e:e+""}function lie(t,e){if(Jc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uie(t,e){return hie(t)||die(t,e)||fie(t,e)||cie()}function cie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fie(t,e){if(t){if(typeof t=="string")return MM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MM(t,e)}}function MM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function die(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function hie(t){if(Array.isArray(t))return t}var mie=F.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,c=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,p=t.maxHeight,y=t.children,v=t.debounce,x=v===void 0?0:v,b=t.id,T=t.className,_=t.onResize,w=t.style,O=w===void 0?{}:w,R=F.useRef(null),C=F.useRef();C.current=_,F.useImperativeHandle(e,function(){return Object.defineProperty(R.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),R.current},configurable:!0})});var L=F.useState({containerWidth:i.width,containerHeight:i.height}),P=uie(L,2),N=P[0],k=P[1],M=F.useCallback(function(K,W){k(function(Y){var j=Math.round(K),G=Math.round(W);return Y.containerWidth===j&&Y.containerHeight===G?Y:{containerWidth:j,containerHeight:G}})},[]);F.useEffect(function(){var K=function(Z){var B,V=Z[0].contentRect,H=V.width,te=V.height;M(H,te),(B=C.current)===null||B===void 0||B.call(C,H,te)};x>0&&(K=b6(K,x,{trailing:!0,leading:!1}));var W=new ResizeObserver(K),Y=R.current.getBoundingClientRect(),j=Y.width,G=Y.height;return M(j,G),W.observe(R.current),function(){W.disconnect()}},[M,x]);var $=F.useMemo(function(){var K=N.containerWidth,W=N.containerHeight;if(K<0||W<0)return null;ta(Us(s)||Us(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),ta(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Y=Us(s)?K:s,j=Us(c)?W:c;n&&n>0&&(Y?j=Y/n:j&&(Y=j*n),p&&j>p&&(j=p)),ta(Y>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,j,s,c,d,h,n);var G=!Array.isArray(y)&&ea(y.type).endsWith("Chart");return Q.Children.map(y,function(q){return Q.isValidElement(q)?F.cloneElement(q,Oh({width:Y,height:j},G?{style:Oh({height:"100%",width:"100%",maxHeight:j,maxWidth:Y},q.props.style)}:{})):q})},[n,y,c,p,h,d,N,s]);return Q.createElement("div",{id:b?"".concat(b):void 0,className:et("recharts-responsive-container",T),style:Oh(Oh({},O),{},{width:s,height:c,minWidth:d,minHeight:h,maxHeight:p}),ref:R},$)}),x6=function(e){return null};x6.displayName="Cell";function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function kM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kM(Object(n),!0).forEach(function(r){pie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pie(t,e,n){return e=gie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gie(t){var e=yie(t,"string");return ef(e)=="symbol"?e:e+""}function yie(t,e){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zo={widthCache:{},cacheCount:0},vie=2e3,bie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},jM="recharts_measurement_span";function xie(t){var e=NT({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Dc=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||tu.isSsr)return{width:0,height:0};var r=xie(n),i=JSON.stringify({text:e,copyStyle:r});if(zo.widthCache[i])return zo.widthCache[i];try{var a=document.getElementById(jM);a||(a=document.createElement("span"),a.setAttribute("id",jM),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=NT(NT({},bie),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),c={width:o.width,height:o.height};return zo.widthCache[i]=c,++zo.cacheCount>vie&&(zo.cacheCount=0,zo.widthCache={}),c}catch{return{width:0,height:0}}},Sie=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function Hm(t,e){return wie(t)||Aie(t,e)||Tie(t,e)||Eie()}function Eie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tie(t,e){if(t){if(typeof t=="string")return UM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UM(t,e)}}function UM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function wie(t){if(Array.isArray(t))return t}function _ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oie(r.key),r)}}function Rie(t,e,n){return e&&BM(t.prototype,e),n&&BM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oie(t){var e=Cie(t,"string");return tf(e)=="symbol"?e:e+""}function Cie(t,e){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var FM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$M=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Lie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Die=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,S6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Iie=Object.keys(S6),sl="NaN";function Pie(t,e){return t*S6[e]}var Ch=function(){function t(e,n){_ie(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Lie.test(n)&&(this.num=NaN,this.unit=""),Iie.includes(n)&&(this.num=Pie(e,n),this.unit="px")}return Rie(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Die.exec(n))!==null&&r!==void 0?r:[],a=Hm(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function E6(t){if(t.includes(sl))return sl;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=FM.exec(e))!==null&&n!==void 0?n:[],i=Hm(r,4),a=i[1],s=i[2],o=i[3],c=Ch.parse(a??""),u=Ch.parse(o??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return sl;e=e.replace(FM,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,p=(h=$M.exec(e))!==null&&h!==void 0?h:[],y=Hm(p,4),v=y[1],x=y[2],b=y[3],T=Ch.parse(v??""),_=Ch.parse(b??""),w=x==="+"?T.add(_):T.subtract(_);if(w.isNaN())return sl;e=e.replace($M,w.toString())}return e}var GM=/\(([^()]*)\)/;function Nie(t){for(var e=t;e.includes("(");){var n=GM.exec(e),r=Hm(n,2),i=r[1];e=e.replace(GM,E6(i))}return e}function Mie(t){var e=t.replace(/\s+/g,"");return e=Nie(e),e=E6(e),e}function kie(t){try{return Mie(t)}catch{return sl}}function OS(t){var e=kie(t.slice(5,-1));return e===sl?"":e}var jie=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Uie=["dx","dy","angle","className","breakAll"];function MT(){return MT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MT.apply(this,arguments)}function VM(t,e){if(t==null)return{};var n=Bie(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function qM(t,e){return Vie(t)||Gie(t,e)||$ie(t,e)||Fie()}function Fie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ie(t,e){if(t){if(typeof t=="string")return HM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HM(t,e)}}function HM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Vie(t){if(Array.isArray(t))return t}var T6=/[ \f\n\r\t\v\u2028\u2029]+/,A6=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];Ye(n)||(r?a=n.toString().split(""):a=n.toString().split(T6));var s=a.map(function(c){return{word:c,width:Dc(c,i).width}}),o=r?0:Dc(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},qie=function(e,n,r,i,a){var s=e.maxLines,o=e.children,c=e.style,u=e.breakAll,d=ve(s),h=o,p=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(j,G){var q=G.word,Z=G.width,B=j[j.length-1];if(B&&(i==null||a||B.width+Z+r<Number(i)))B.words.push(q),B.width+=Z+r;else{var V={words:[q],width:Z};j.push(V)}return j},[])},y=p(n),v=function(Y){return Y.reduce(function(j,G){return j.width>G.width?j:G})};if(!d)return y;for(var x="…",b=function(Y){var j=h.slice(0,Y),G=A6({breakAll:u,style:c,children:j+x}).wordsWithComputedWidth,q=p(G),Z=q.length>s||v(q).width>Number(i);return[Z,q]},T=0,_=h.length-1,w=0,O;T<=_&&w<=h.length-1;){var R=Math.floor((T+_)/2),C=R-1,L=b(C),P=qM(L,2),N=P[0],k=P[1],M=b(R),$=qM(M,1),K=$[0];if(!N&&!K&&(T=R+1),N&&K&&(_=R-1),!N&&K){O=k;break}w++}return O||y},zM=function(e){var n=Ye(e)?[]:e.toString().split(T6);return[{words:n}]},Hie=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!tu.isSsr){var c,u,d=A6({breakAll:s,children:i,style:a});if(d){var h=d.wordsWithComputedWidth,p=d.spaceWidth;c=h,u=p}else return zM(i);return qie({breakAll:s,children:i,maxLines:o,style:a},c,u,n,r)}return zM(i)},KM="#808080",zm=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,p=e.textAnchor,y=p===void 0?"start":p,v=e.verticalAnchor,x=v===void 0?"end":v,b=e.fill,T=b===void 0?KM:b,_=VM(e,jie),w=F.useMemo(function(){return Hie({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:h,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,h,_.style,_.width]),O=_.dx,R=_.dy,C=_.angle,L=_.className,P=_.breakAll,N=VM(_,Uie);if(!tn(r)||!tn(a))return null;var k=r+(ve(O)?O:0),M=a+(ve(R)?R:0),$;switch(x){case"start":$=OS("calc(".concat(u,")"));break;case"middle":$=OS("calc(".concat((w.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:$=OS("calc(".concat(w.length-1," * -").concat(o,")"));break}var K=[];if(h){var W=w[0].width,Y=_.width;K.push("scale(".concat((ve(Y)?Y/W:1)/W,")"))}return C&&K.push("rotate(".concat(C,", ").concat(k,", ").concat(M,")")),K.length&&(N.transform=K.join(" ")),Q.createElement("text",MT({},We(N,!0),{x:k,y:M,className:et("recharts-text",L),textAnchor:y,fill:T.includes("url")?KM:T}),w.map(function(j,G){var q=j.words.join(P?"":" ");return Q.createElement("tspan",{x:k,dy:G===0?$:o,key:"".concat(q,"-").concat(G)},q)}))};function za(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zie(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dw(t){let e,n,r;t.length!==2?(e=za,n=(o,c)=>za(t(o),c),r=(o,c)=>t(o)-c):(e=t===za||t===zie?t:Kie,n=t,r=t);function i(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(o[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(o[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function s(o,c,u=0,d=o.length){const h=i(o,c,u,d-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function Kie(){return 0}function w6(t){return t===null?NaN:+t}function*Yie(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Wie=dw(za),Zf=Wie.right;dw(w6).center;class YM extends Map{constructor(e,n=Zie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(WM(this,e))}has(e){return super.has(WM(this,e))}set(e,n){return super.set(Xie(this,e),n)}delete(e){return super.delete(Qie(this,e))}}function WM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Xie({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Qie({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Zie(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Jie(t=za){if(t===za)return _6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function _6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const eae=Math.sqrt(50),tae=Math.sqrt(10),nae=Math.sqrt(2);function Km(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=eae?10:a>=tae?5:a>=nae?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?Km(t,e,n*2):[o,c,u]}function kT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Km(e,t,n):Km(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function jT(t,e,n){return e=+e,t=+t,n=+n,Km(t,e,n)[2]}function UT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?jT(e,t,n):jT(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function XM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function QM(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function R6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?_6:Jie(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),y=Math.max(n,Math.floor(e-u*h/c+p)),v=Math.min(r,Math.floor(e+(c-u)*h/c+p));R6(t,e,y,v,i)}const a=t[e];let s=n,o=r;for(fc(t,n,e),i(t[r],a)>0&&fc(t,n,r);s<o;){for(fc(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?fc(t,n,o):(++o,fc(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function fc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function rae(t,e,n){if(t=Float64Array.from(Yie(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return QM(t);if(e>=1)return XM(t);var r,i=(r-1)*e,a=Math.floor(i),s=XM(R6(t,a).subarray(0,a+1)),o=QM(t.subarray(a+1));return s+(o-s)*(i-a)}}function iae(t,e,n=w6){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function aae(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Ur(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ha(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const BT=Symbol("implicit");function hw(){var t=new YM,e=[],n=[],r=BT;function i(a){let s=t.get(a);if(s===void 0){if(r!==BT)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new YM;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return hw(e,n).unknown(r)},Ur.apply(i,arguments),i}function nf(){var t=hw().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var p=e().length,y=i<r,v=y?i:r,x=y?r:i;a=(x-v)/Math.max(1,p-c+u*2),o&&(a=Math.floor(a)),v+=(x-v-a*(p-c))*d,s=a*(1-c),o&&(v=Math.round(v),s=Math.round(s));var b=aae(p).map(function(T){return v+a*T});return n(y?b.reverse():b)}return t.domain=function(p){return arguments.length?(e(p),h()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(p){return arguments.length?(o=!!p,h()):o},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),h()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),h()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,h()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),h()):d},t.copy=function(){return nf(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},Ur.apply(h(),arguments)}function O6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return O6(e())},t}function Ic(){return O6(nf.apply(null,arguments).paddingInner(1))}function mw(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function C6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Jf(){}var rf=.7,Ym=1/rf,dl="\\s*([+-]?\\d+)\\s*",af="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sae=/^#([0-9a-f]{3,8})$/,oae=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),lae=new RegExp(`^rgb\\(${Ei},${Ei},${Ei}\\)$`),uae=new RegExp(`^rgba\\(${dl},${dl},${dl},${af}\\)$`),cae=new RegExp(`^rgba\\(${Ei},${Ei},${Ei},${af}\\)$`),fae=new RegExp(`^hsl\\(${af},${Ei},${Ei}\\)$`),dae=new RegExp(`^hsla\\(${af},${Ei},${Ei},${af}\\)$`),ZM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mw(Jf,sf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:JM,formatHex:JM,formatHex8:hae,formatHsl:mae,formatRgb:ek,toString:ek});function JM(){return this.rgb().formatHex()}function hae(){return this.rgb().formatHex8()}function mae(){return L6(this).formatHsl()}function ek(){return this.rgb().formatRgb()}function sf(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sae.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?tk(e):n===3?new Wn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Lh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Lh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=oae.exec(t))?new Wn(e[1],e[2],e[3],1):(e=lae.exec(t))?new Wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uae.exec(t))?Lh(e[1],e[2],e[3],e[4]):(e=cae.exec(t))?Lh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fae.exec(t))?ik(e[1],e[2]/100,e[3]/100,1):(e=dae.exec(t))?ik(e[1],e[2]/100,e[3]/100,e[4]):ZM.hasOwnProperty(t)?tk(ZM[t]):t==="transparent"?new Wn(NaN,NaN,NaN,0):null}function tk(t){return new Wn(t>>16&255,t>>8&255,t&255,1)}function Lh(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wn(t,e,n,r)}function pae(t){return t instanceof Jf||(t=sf(t)),t?(t=t.rgb(),new Wn(t.r,t.g,t.b,t.opacity)):new Wn}function FT(t,e,n,r){return arguments.length===1?pae(t):new Wn(t,e,n,r??1)}function Wn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}mw(Wn,FT,C6(Jf,{brighter(t){return t=t==null?Ym:Math.pow(Ym,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?rf:Math.pow(rf,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wn(Hs(this.r),Hs(this.g),Hs(this.b),Wm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nk,formatHex:nk,formatHex8:gae,formatRgb:rk,toString:rk}));function nk(){return`#${Bs(this.r)}${Bs(this.g)}${Bs(this.b)}`}function gae(){return`#${Bs(this.r)}${Bs(this.g)}${Bs(this.b)}${Bs((isNaN(this.opacity)?1:this.opacity)*255)}`}function rk(){const t=Wm(this.opacity);return`${t===1?"rgb(":"rgba("}${Hs(this.r)}, ${Hs(this.g)}, ${Hs(this.b)}${t===1?")":`, ${t})`}`}function Wm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Hs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Bs(t){return t=Hs(t),(t<16?"0":"")+t.toString(16)}function ik(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Xr(t,e,n,r)}function L6(t){if(t instanceof Xr)return new Xr(t.h,t.s,t.l,t.opacity);if(t instanceof Jf||(t=sf(t)),!t)return new Xr;if(t instanceof Xr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Xr(s,o,c,t.opacity)}function yae(t,e,n,r){return arguments.length===1?L6(t):new Xr(t,e,n,r??1)}function Xr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}mw(Xr,yae,C6(Jf,{brighter(t){return t=t==null?Ym:Math.pow(Ym,t),new Xr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?rf:Math.pow(rf,t),new Xr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wn(CS(t>=240?t-240:t+120,i,r),CS(t,i,r),CS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Xr(ak(this.h),Dh(this.s),Dh(this.l),Wm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wm(this.opacity);return`${t===1?"hsl(":"hsla("}${ak(this.h)}, ${Dh(this.s)*100}%, ${Dh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ak(t){return t=(t||0)%360,t<0?t+360:t}function Dh(t){return Math.max(0,Math.min(1,t||0))}function CS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const pw=t=>()=>t;function vae(t,e){return function(n){return t+n*e}}function bae(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xae(t){return(t=+t)==1?D6:function(e,n){return n-e?bae(e,n,t):pw(isNaN(e)?n:e)}}function D6(t,e){var n=e-t;return n?vae(t,n):pw(isNaN(t)?e:t)}const sk=function t(e){var n=xae(e);function r(i,a){var s=n((i=FT(i)).r,(a=FT(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=D6(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Sae(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Eae(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Tae(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=nu(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Aae(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xm(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function wae(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=nu(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var $T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,LS=new RegExp($T.source,"g");function _ae(t){return function(){return t}}function Rae(t){return function(e){return t(e)+""}}function Oae(t,e){var n=$T.lastIndex=LS.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=$T.exec(t))&&(i=LS.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Xm(r,i)})),n=LS.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?Rae(c[0].x):_ae(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)o[(h=c[d]).i]=h.x(u);return o.join("")})}function nu(t,e){var n=typeof e,r;return e==null||n==="boolean"?pw(e):(n==="number"?Xm:n==="string"?(r=sf(e))?(e=r,sk):Oae:e instanceof sf?sk:e instanceof Date?Aae:Eae(e)?Sae:Array.isArray(e)?Tae:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?wae:Xm)(t,e)}function gw(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Cae(t,e){e===void 0&&(e=t,t=nu);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function Lae(t){return function(){return t}}function Qm(t){return+t}var ok=[0,1];function Fn(t){return t}function GT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Lae(isNaN(e)?NaN:.5)}function Dae(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Iae(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=GT(i,r),a=n(s,a)):(r=GT(r,i),a=n(a,s)),function(o){return a(r(o))}}function Pae(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=GT(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=Zf(t,o,1,r)-1;return a[c](i[c](o))}}function ed(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fg(){var t=ok,e=ok,n=nu,r,i,a,s=Fn,o,c,u;function d(){var p=Math.min(t.length,e.length);return s!==Fn&&(s=Dae(t[0],t[p-1])),o=p>2?Pae:Iae,c=u=null,h}function h(p){return p==null||isNaN(p=+p)?a:(c||(c=o(t.map(r),e,n)))(r(s(p)))}return h.invert=function(p){return s(i((u||(u=o(e,t.map(r),Xm)))(p)))},h.domain=function(p){return arguments.length?(t=Array.from(p,Qm),d()):t.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),n=gw,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Fn,d()):s!==Fn},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return r=p,i=y,d()}}function yw(){return fg()(Fn,Fn)}function Nae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Zm(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Al(t){return t=Zm(Math.abs(t)),t?t[1]:NaN}function Mae(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function kae(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var jae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function of(t){if(!(e=jae.exec(t)))throw new Error("invalid format: "+t);var e;return new vw({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}of.prototype=vw.prototype;function vw(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}vw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Uae(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var I6;function Bae(t,e){var n=Zm(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(I6=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zm(t,Math.max(0,e+a-1))[0]}function lk(t,e){var n=Zm(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const uk={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Nae,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>lk(t*100,e),r:lk,s:Bae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ck(t){return t}var fk=Array.prototype.map,dk=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fae(t){var e=t.grouping===void 0||t.thousands===void 0?ck:Mae(fk.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ck:kae(fk.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=of(h);var p=h.fill,y=h.align,v=h.sign,x=h.symbol,b=h.zero,T=h.width,_=h.comma,w=h.precision,O=h.trim,R=h.type;R==="n"?(_=!0,R="g"):uk[R]||(w===void 0&&(w=12),O=!0,R="g"),(b||p==="0"&&y==="=")&&(b=!0,p="0",y="=");var C=x==="$"?n:x==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",L=x==="$"?r:/[%p]/.test(R)?s:"",P=uk[R],N=/[defgprs%]/.test(R);w=w===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function k(M){var $=C,K=L,W,Y,j;if(R==="c")K=P(M)+K,M="";else{M=+M;var G=M<0||1/M<0;if(M=isNaN(M)?c:P(Math.abs(M),w),O&&(M=Uae(M)),G&&+M==0&&v!=="+"&&(G=!1),$=(G?v==="("?v:o:v==="-"||v==="("?"":v)+$,K=(R==="s"?dk[8+I6/3]:"")+K+(G&&v==="("?")":""),N){for(W=-1,Y=M.length;++W<Y;)if(j=M.charCodeAt(W),48>j||j>57){K=(j===46?i+M.slice(W+1):M.slice(W))+K,M=M.slice(0,W);break}}}_&&!b&&(M=e(M,1/0));var q=$.length+M.length+K.length,Z=q<T?new Array(T-q+1).join(p):"";switch(_&&b&&(M=e(Z+M,Z.length?T-K.length:1/0),Z=""),y){case"<":M=$+M+K+Z;break;case"=":M=$+Z+M+K;break;case"^":M=Z.slice(0,q=Z.length>>1)+$+M+K+Z.slice(q);break;default:M=Z+$+M+K;break}return a(M)}return k.toString=function(){return h+""},k}function d(h,p){var y=u((h=of(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Al(p)/3)))*3,x=Math.pow(10,-v),b=dk[8+v/3];return function(T){return y(x*T)+b}}return{format:u,formatPrefix:d}}var Ih,bw,P6;$ae({thousands:",",grouping:[3],currency:["$",""]});function $ae(t){return Ih=Fae(t),bw=Ih.format,P6=Ih.formatPrefix,Ih}function Gae(t){return Math.max(0,-Al(Math.abs(t)))}function Vae(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Al(e)/3)))*3-Al(Math.abs(t)))}function qae(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Al(e)-Al(t))+1}function N6(t,e,n,r){var i=UT(t,e,n),a;switch(r=of(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Vae(i,s))&&(r.precision=a),P6(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=qae(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Gae(i))&&(r.precision=a-(r.type==="%")*2);break}}return bw(r)}function rs(t){var e=t.domain;return t.ticks=function(n){var r=e();return kT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return N6(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=jT(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function Jm(){var t=yw();return t.copy=function(){return ed(t,Jm())},Ur.apply(t,arguments),rs(t)}function M6(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Qm),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return M6(t).unknown(e)},t=arguments.length?Array.from(t,Qm):[0,1],rs(n)}function k6(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function hk(t){return Math.log(t)}function mk(t){return Math.exp(t)}function Hae(t){return-Math.log(-t)}function zae(t){return-Math.exp(-t)}function Kae(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Yae(t){return t===10?Kae:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Wae(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function pk(t){return(e,n)=>-t(-e,n)}function xw(t){const e=t(hk,mk),n=e.domain;let r=10,i,a;function s(){return i=Wae(r),a=Yae(r),n()[0]<0?(i=pk(i),a=pk(a),t(Hae,zae)):t(hk,mk),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let p=i(u),y=i(d),v,x;const b=o==null?10:+o;let T=[];if(!(r%1)&&y-p<b){if(p=Math.floor(p),y=Math.ceil(y),u>0){for(;p<=y;++p)for(v=1;v<r;++v)if(x=p<0?v/a(-p):v*a(p),!(x<u)){if(x>d)break;T.push(x)}}else for(;p<=y;++p)for(v=r-1;v>=1;--v)if(x=p>0?v/a(-p):v*a(p),!(x<u)){if(x>d)break;T.push(x)}T.length*2<b&&(T=kT(u,d,b))}else T=kT(p,y,Math.min(y-p,b)).map(a);return h?T.reverse():T},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=of(c)).precision==null&&(c.trim=!0),c=bw(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return d=>{let h=d/a(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>n(k6(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function j6(){const t=xw(fg()).domain([1,10]);return t.copy=()=>ed(t,j6()).base(t.base()),Ur.apply(t,arguments),t}function gk(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function yk(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Sw(t){var e=1,n=t(gk(e),yk(e));return n.constant=function(r){return arguments.length?t(gk(e=+r),yk(e)):e},rs(n)}function U6(){var t=Sw(fg());return t.copy=function(){return ed(t,U6()).constant(t.constant())},Ur.apply(t,arguments)}function vk(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Xae(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Qae(t){return t<0?-t*t:t*t}function Ew(t){var e=t(Fn,Fn),n=1;function r(){return n===1?t(Fn,Fn):n===.5?t(Xae,Qae):t(vk(n),vk(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},rs(e)}function Tw(){var t=Ew(fg());return t.copy=function(){return ed(t,Tw()).exponent(t.exponent())},Ur.apply(t,arguments),t}function Zae(){return Tw.apply(null,arguments).exponent(.5)}function bk(t){return Math.sign(t)*t*t}function Jae(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function B6(){var t=yw(),e=[0,1],n=!1,r;function i(a){var s=Jae(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(bk(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Qm)).map(bk)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return B6(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ur.apply(i,arguments),rs(i)}function F6(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=iae(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Zf(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(za),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return F6().domain(t).range(e).unknown(r)},Ur.apply(a,arguments)}function $6(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Zf(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return $6().domain([t,e]).range(i).unknown(a)},Ur.apply(rs(s),arguments)}function G6(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Zf(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return G6().domain(t).range(e).unknown(n)},Ur.apply(i,arguments)}const DS=new Date,IS=new Date;function sn(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>sn(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(DS.setTime(+a),IS.setTime(+s),t(DS),t(IS),Math.floor(n(DS,IS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const ep=sn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ep.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?sn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ep);ep.range;const Xi=1e3,Cr=Xi*60,Qi=Cr*60,sa=Qi*24,Aw=sa*7,xk=sa*30,PS=sa*365,Fs=sn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Xi)},(t,e)=>(e-t)/Xi,t=>t.getUTCSeconds());Fs.range;const ww=sn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xi)},(t,e)=>{t.setTime(+t+e*Cr)},(t,e)=>(e-t)/Cr,t=>t.getMinutes());ww.range;const _w=sn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Cr)},(t,e)=>(e-t)/Cr,t=>t.getUTCMinutes());_w.range;const Rw=sn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xi-t.getMinutes()*Cr)},(t,e)=>{t.setTime(+t+e*Qi)},(t,e)=>(e-t)/Qi,t=>t.getHours());Rw.range;const Ow=sn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Qi)},(t,e)=>(e-t)/Qi,t=>t.getUTCHours());Ow.range;const td=sn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Cr)/sa,t=>t.getDate()-1);td.range;const dg=sn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sa,t=>t.getUTCDate()-1);dg.range;const V6=sn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sa,t=>Math.floor(t/sa));V6.range;function no(t){return sn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Cr)/Aw)}const hg=no(0),tp=no(1),ese=no(2),tse=no(3),wl=no(4),nse=no(5),rse=no(6);hg.range;tp.range;ese.range;tse.range;wl.range;nse.range;rse.range;function ro(t){return sn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Aw)}const mg=ro(0),np=ro(1),ise=ro(2),ase=ro(3),_l=ro(4),sse=ro(5),ose=ro(6);mg.range;np.range;ise.range;ase.range;_l.range;sse.range;ose.range;const Cw=sn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Cw.range;const Lw=sn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Lw.range;const oa=sn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:sn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});oa.range;const la=sn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());la.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:sn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});la.range;function q6(t,e,n,r,i,a){const s=[[Fs,1,Xi],[Fs,5,5*Xi],[Fs,15,15*Xi],[Fs,30,30*Xi],[a,1,Cr],[a,5,5*Cr],[a,15,15*Cr],[a,30,30*Cr],[i,1,Qi],[i,3,3*Qi],[i,6,6*Qi],[i,12,12*Qi],[r,1,sa],[r,2,2*sa],[n,1,Aw],[e,1,xk],[e,3,3*xk],[t,1,PS]];function o(u,d,h){const p=d<u;p&&([u,d]=[d,u]);const y=h&&typeof h.range=="function"?h:c(u,d,h),v=y?y.range(u,+d+1):[];return p?v.reverse():v}function c(u,d,h){const p=Math.abs(d-u)/h,y=dw(([,,b])=>b).right(s,p);if(y===s.length)return t.every(UT(u/PS,d/PS,h));if(y===0)return ep.every(Math.max(UT(u,d,h),1));const[v,x]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(x)}return[o,c]}const[lse,use]=q6(la,Lw,mg,V6,Ow,_w),[cse,fse]=q6(oa,Cw,hg,td,Rw,ww);function NS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function MS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function dc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function dse(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=hc(i),d=mc(i),h=hc(a),p=mc(a),y=hc(s),v=mc(s),x=hc(o),b=mc(o),T=hc(c),_=mc(c),w={a:G,A:q,b:Z,B,c:null,d:_k,e:_k,f:Mse,g:Hse,G:Kse,H:Ise,I:Pse,j:Nse,L:H6,m:kse,M:jse,p:V,q:H,Q:Ck,s:Lk,S:Use,u:Bse,U:Fse,V:$se,w:Gse,W:Vse,x:null,X:null,y:qse,Y:zse,Z:Yse,"%":Ok},O={a:te,A:ce,b:ye,B:ge,c:null,d:Rk,e:Rk,f:Zse,g:loe,G:coe,H:Wse,I:Xse,j:Qse,L:K6,m:Jse,M:eoe,p:Me,q:Re,Q:Ck,s:Lk,S:toe,u:noe,U:roe,V:ioe,w:aoe,W:soe,x:null,X:null,y:ooe,Y:uoe,Z:foe,"%":Ok},R={a:k,A:M,b:$,B:K,c:W,d:Ak,e:Ak,f:Ose,g:Tk,G:Ek,H:wk,I:wk,j:Ase,L:Rse,m:Tse,M:wse,p:N,q:Ese,Q:Lse,s:Dse,S:_se,u:yse,U:vse,V:bse,w:gse,W:xse,x:Y,X:j,y:Tk,Y:Ek,Z:Sse,"%":Cse};w.x=C(n,w),w.X=C(r,w),w.c=C(e,w),O.x=C(n,O),O.X=C(r,O),O.c=C(e,O);function C(pe,Ae){return function(Oe){var me=[],rt=-1,Be=0,It=pe.length,_e,je,Rt;for(Oe instanceof Date||(Oe=new Date(+Oe));++rt<It;)pe.charCodeAt(rt)===37&&(me.push(pe.slice(Be,rt)),(je=Sk[_e=pe.charAt(++rt)])!=null?_e=pe.charAt(++rt):je=_e==="e"?" ":"0",(Rt=Ae[_e])&&(_e=Rt(Oe,je)),me.push(_e),Be=rt+1);return me.push(pe.slice(Be,rt)),me.join("")}}function L(pe,Ae){return function(Oe){var me=dc(1900,void 0,1),rt=P(me,pe,Oe+="",0),Be,It;if(rt!=Oe.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Ae&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Be=MS(dc(me.y,0,1)),It=Be.getUTCDay(),Be=It>4||It===0?np.ceil(Be):np(Be),Be=dg.offset(Be,(me.V-1)*7),me.y=Be.getUTCFullYear(),me.m=Be.getUTCMonth(),me.d=Be.getUTCDate()+(me.w+6)%7):(Be=NS(dc(me.y,0,1)),It=Be.getDay(),Be=It>4||It===0?tp.ceil(Be):tp(Be),Be=td.offset(Be,(me.V-1)*7),me.y=Be.getFullYear(),me.m=Be.getMonth(),me.d=Be.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),It="Z"in me?MS(dc(me.y,0,1)).getUTCDay():NS(dc(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(It+5)%7:me.w+me.U*7-(It+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,MS(me)):NS(me)}}function P(pe,Ae,Oe,me){for(var rt=0,Be=Ae.length,It=Oe.length,_e,je;rt<Be;){if(me>=It)return-1;if(_e=Ae.charCodeAt(rt++),_e===37){if(_e=Ae.charAt(rt++),je=R[_e in Sk?Ae.charAt(rt++):_e],!je||(me=je(pe,Oe,me))<0)return-1}else if(_e!=Oe.charCodeAt(me++))return-1}return me}function N(pe,Ae,Oe){var me=u.exec(Ae.slice(Oe));return me?(pe.p=d.get(me[0].toLowerCase()),Oe+me[0].length):-1}function k(pe,Ae,Oe){var me=y.exec(Ae.slice(Oe));return me?(pe.w=v.get(me[0].toLowerCase()),Oe+me[0].length):-1}function M(pe,Ae,Oe){var me=h.exec(Ae.slice(Oe));return me?(pe.w=p.get(me[0].toLowerCase()),Oe+me[0].length):-1}function $(pe,Ae,Oe){var me=T.exec(Ae.slice(Oe));return me?(pe.m=_.get(me[0].toLowerCase()),Oe+me[0].length):-1}function K(pe,Ae,Oe){var me=x.exec(Ae.slice(Oe));return me?(pe.m=b.get(me[0].toLowerCase()),Oe+me[0].length):-1}function W(pe,Ae,Oe){return P(pe,e,Ae,Oe)}function Y(pe,Ae,Oe){return P(pe,n,Ae,Oe)}function j(pe,Ae,Oe){return P(pe,r,Ae,Oe)}function G(pe){return s[pe.getDay()]}function q(pe){return a[pe.getDay()]}function Z(pe){return c[pe.getMonth()]}function B(pe){return o[pe.getMonth()]}function V(pe){return i[+(pe.getHours()>=12)]}function H(pe){return 1+~~(pe.getMonth()/3)}function te(pe){return s[pe.getUTCDay()]}function ce(pe){return a[pe.getUTCDay()]}function ye(pe){return c[pe.getUTCMonth()]}function ge(pe){return o[pe.getUTCMonth()]}function Me(pe){return i[+(pe.getUTCHours()>=12)]}function Re(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Ae=C(pe+="",w);return Ae.toString=function(){return pe},Ae},parse:function(pe){var Ae=L(pe+="",!1);return Ae.toString=function(){return pe},Ae},utcFormat:function(pe){var Ae=C(pe+="",O);return Ae.toString=function(){return pe},Ae},utcParse:function(pe){var Ae=L(pe+="",!0);return Ae.toString=function(){return pe},Ae}}}var Sk={"-":"",_:" ",0:"0"},gn=/^\s*\d+/,hse=/^%/,mse=/[\\^$*+?|[\]().{}]/g;function tt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function pse(t){return t.replace(mse,"\\$&")}function hc(t){return new RegExp("^(?:"+t.map(pse).join("|")+")","i")}function mc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function gse(t,e,n){var r=gn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function yse(t,e,n){var r=gn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function vse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function bse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function xse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ek(t,e,n){var r=gn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Tk(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Sse(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ese(t,e,n){var r=gn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Tse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ak(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ase(t,e,n){var r=gn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wk(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function wse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function _se(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Rse(t,e,n){var r=gn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ose(t,e,n){var r=gn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Cse(t,e,n){var r=hse.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Lse(t,e,n){var r=gn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Dse(t,e,n){var r=gn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _k(t,e){return tt(t.getDate(),e,2)}function Ise(t,e){return tt(t.getHours(),e,2)}function Pse(t,e){return tt(t.getHours()%12||12,e,2)}function Nse(t,e){return tt(1+td.count(oa(t),t),e,3)}function H6(t,e){return tt(t.getMilliseconds(),e,3)}function Mse(t,e){return H6(t,e)+"000"}function kse(t,e){return tt(t.getMonth()+1,e,2)}function jse(t,e){return tt(t.getMinutes(),e,2)}function Use(t,e){return tt(t.getSeconds(),e,2)}function Bse(t){var e=t.getDay();return e===0?7:e}function Fse(t,e){return tt(hg.count(oa(t)-1,t),e,2)}function z6(t){var e=t.getDay();return e>=4||e===0?wl(t):wl.ceil(t)}function $se(t,e){return t=z6(t),tt(wl.count(oa(t),t)+(oa(t).getDay()===4),e,2)}function Gse(t){return t.getDay()}function Vse(t,e){return tt(tp.count(oa(t)-1,t),e,2)}function qse(t,e){return tt(t.getFullYear()%100,e,2)}function Hse(t,e){return t=z6(t),tt(t.getFullYear()%100,e,2)}function zse(t,e){return tt(t.getFullYear()%1e4,e,4)}function Kse(t,e){var n=t.getDay();return t=n>=4||n===0?wl(t):wl.ceil(t),tt(t.getFullYear()%1e4,e,4)}function Yse(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function Rk(t,e){return tt(t.getUTCDate(),e,2)}function Wse(t,e){return tt(t.getUTCHours(),e,2)}function Xse(t,e){return tt(t.getUTCHours()%12||12,e,2)}function Qse(t,e){return tt(1+dg.count(la(t),t),e,3)}function K6(t,e){return tt(t.getUTCMilliseconds(),e,3)}function Zse(t,e){return K6(t,e)+"000"}function Jse(t,e){return tt(t.getUTCMonth()+1,e,2)}function eoe(t,e){return tt(t.getUTCMinutes(),e,2)}function toe(t,e){return tt(t.getUTCSeconds(),e,2)}function noe(t){var e=t.getUTCDay();return e===0?7:e}function roe(t,e){return tt(mg.count(la(t)-1,t),e,2)}function Y6(t){var e=t.getUTCDay();return e>=4||e===0?_l(t):_l.ceil(t)}function ioe(t,e){return t=Y6(t),tt(_l.count(la(t),t)+(la(t).getUTCDay()===4),e,2)}function aoe(t){return t.getUTCDay()}function soe(t,e){return tt(np.count(la(t)-1,t),e,2)}function ooe(t,e){return tt(t.getUTCFullYear()%100,e,2)}function loe(t,e){return t=Y6(t),tt(t.getUTCFullYear()%100,e,2)}function uoe(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function coe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?_l(t):_l.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function foe(){return"+0000"}function Ok(){return"%"}function Ck(t){return+t}function Lk(t){return Math.floor(+t/1e3)}var Ko,W6,X6;doe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function doe(t){return Ko=dse(t),W6=Ko.format,Ko.parse,X6=Ko.utcFormat,Ko.utcParse,Ko}function hoe(t){return new Date(t)}function moe(t){return t instanceof Date?+t:+new Date(+t)}function Dw(t,e,n,r,i,a,s,o,c,u){var d=yw(),h=d.invert,p=d.domain,y=u(".%L"),v=u(":%S"),x=u("%I:%M"),b=u("%I %p"),T=u("%a %d"),_=u("%b %d"),w=u("%B"),O=u("%Y");function R(C){return(c(C)<C?y:o(C)<C?v:s(C)<C?x:a(C)<C?b:r(C)<C?i(C)<C?T:_:n(C)<C?w:O)(C)}return d.invert=function(C){return new Date(h(C))},d.domain=function(C){return arguments.length?p(Array.from(C,moe)):p().map(hoe)},d.ticks=function(C){var L=p();return t(L[0],L[L.length-1],C??10)},d.tickFormat=function(C,L){return L==null?R:u(L)},d.nice=function(C){var L=p();return(!C||typeof C.range!="function")&&(C=e(L[0],L[L.length-1],C??10)),C?p(k6(L,C)):d},d.copy=function(){return ed(d,Dw(t,e,n,r,i,a,s,o,c,u))},d}function poe(){return Ur.apply(Dw(cse,fse,oa,Cw,hg,td,Rw,ww,Fs,W6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function goe(){return Ur.apply(Dw(lse,use,la,Lw,mg,dg,Ow,_w,Fs,X6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pg(){var t=0,e=1,n,r,i,a,s=Fn,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),u):[s(0),s(1)]}}return u.range=d(nu),u.rangeRound=d(gw),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function is(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Q6(){var t=rs(pg()(Fn));return t.copy=function(){return is(t,Q6())},ha.apply(t,arguments)}function Z6(){var t=xw(pg()).domain([1,10]);return t.copy=function(){return is(t,Z6()).base(t.base())},ha.apply(t,arguments)}function J6(){var t=Sw(pg());return t.copy=function(){return is(t,J6()).constant(t.constant())},ha.apply(t,arguments)}function Iw(){var t=Ew(pg());return t.copy=function(){return is(t,Iw()).exponent(t.exponent())},ha.apply(t,arguments)}function yoe(){return Iw.apply(null,arguments).exponent(.5)}function e5(){var t=[],e=Fn;function n(r){if(r!=null&&!isNaN(r=+r))return e((Zf(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(za),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>rae(t,a/r))},n.copy=function(){return e5(e).domain(t)},ha.apply(n,arguments)}function gg(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Fn,d,h=!1,p;function y(x){return isNaN(x=+x)?p:(x=.5+((x=+d(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}y.domain=function(x){return arguments.length?([t,e,n]=x,i=d(t=+t),a=d(e=+e),s=d(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y):[t,e,n]},y.clamp=function(x){return arguments.length?(h=!!x,y):h},y.interpolator=function(x){return arguments.length?(u=x,y):u};function v(x){return function(b){var T,_,w;return arguments.length?([T,_,w]=b,u=Cae(x,[T,_,w]),y):[u(0),u(.5),u(1)]}}return y.range=v(nu),y.rangeRound=v(gw),y.unknown=function(x){return arguments.length?(p=x,y):p},function(x){return d=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y}}function t5(){var t=rs(gg()(Fn));return t.copy=function(){return is(t,t5())},ha.apply(t,arguments)}function n5(){var t=xw(gg()).domain([.1,1,10]);return t.copy=function(){return is(t,n5()).base(t.base())},ha.apply(t,arguments)}function r5(){var t=Sw(gg());return t.copy=function(){return is(t,r5()).constant(t.constant())},ha.apply(t,arguments)}function Pw(){var t=Ew(gg());return t.copy=function(){return is(t,Pw()).exponent(t.exponent())},ha.apply(t,arguments)}function voe(){return Pw.apply(null,arguments).exponent(.5)}const Dk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nf,scaleDiverging:t5,scaleDivergingLog:n5,scaleDivergingPow:Pw,scaleDivergingSqrt:voe,scaleDivergingSymlog:r5,scaleIdentity:M6,scaleImplicit:BT,scaleLinear:Jm,scaleLog:j6,scaleOrdinal:hw,scalePoint:Ic,scalePow:Tw,scaleQuantile:F6,scaleQuantize:$6,scaleRadial:B6,scaleSequential:Q6,scaleSequentialLog:Z6,scaleSequentialPow:Iw,scaleSequentialQuantile:e5,scaleSequentialSqrt:yoe,scaleSequentialSymlog:J6,scaleSqrt:Zae,scaleSymlog:U6,scaleThreshold:G6,scaleTime:poe,scaleUtc:goe,tickFormat:N6},Symbol.toStringTag,{value:"Module"}));var kS,Ik;function i5(){if(Ik)return kS;Ik=1;var t=Zl();function e(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],c=r(o);if(c!=null&&(u===void 0?c===c&&!t(c):i(c,u)))var u=c,d=o}return d}return kS=e,kS}var jS,Pk;function boe(){if(Pk)return jS;Pk=1;function t(e,n){return e>n}return jS=t,jS}var US,Nk;function xoe(){if(Nk)return US;Nk=1;var t=i5(),e=boe(),n=eu();function r(i){return i&&i.length?t(i,n,e):void 0}return US=r,US}var Soe=xoe();const yg=vt(Soe);var BS,Mk;function Eoe(){if(Mk)return BS;Mk=1;function t(e,n){return e<n}return BS=t,BS}var FS,kk;function Toe(){if(kk)return FS;kk=1;var t=i5(),e=Eoe(),n=eu();function r(i){return i&&i.length?t(i,n,e):void 0}return FS=r,FS}var Aoe=Toe();const vg=vt(Aoe);var $S,jk;function woe(){if(jk)return $S;jk=1;var t=W1(),e=ns(),n=d6(),r=Zn();function i(a,s){var o=r(a)?t:n;return o(a,e(s,3))}return $S=i,$S}var GS,Uk;function _oe(){if(Uk)return GS;Uk=1;var t=c6(),e=woe();function n(r,i){return t(e(r,i),1)}return GS=n,GS}var Roe=_oe();const Ooe=vt(Roe);var VS,Bk;function Coe(){if(Bk)return VS;Bk=1;var t=lw();function e(n,r){return t(n,r)}return VS=e,VS}var Loe=Coe();const bg=vt(Loe);var ru=1e9,Doe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Mw,wt=!0,Mr="[DecimalError] ",zs=Mr+"Invalid argument: ",Nw=Mr+"Exponent out of range: ",iu=Math.floor,Is=Math.pow,Ioe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,cr,hn=1e7,St=7,a5=9007199254740991,rp=iu(a5/St),xe={};xe.absoluteValue=xe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};xe.comparedTo=xe.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};xe.decimalPlaces=xe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*St;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};xe.dividedBy=xe.div=function(t){return na(this,new this.constructor(t))};xe.dividedToIntegerBy=xe.idiv=function(t){var e=this,n=e.constructor;return yt(na(e,new n(t),0,1),n.precision)};xe.equals=xe.eq=function(t){return!this.cmp(t)};xe.exponent=function(){return Yt(this)};xe.greaterThan=xe.gt=function(t){return this.cmp(t)>0};xe.greaterThanOrEqualTo=xe.gte=function(t){return this.cmp(t)>=0};xe.isInteger=xe.isint=function(){return this.e>this.d.length-2};xe.isNegative=xe.isneg=function(){return this.s<0};xe.isPositive=xe.ispos=function(){return this.s>0};xe.isZero=function(){return this.s===0};xe.lessThan=xe.lt=function(t){return this.cmp(t)<0};xe.lessThanOrEqualTo=xe.lte=function(t){return this.cmp(t)<1};xe.logarithm=xe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(cr))throw Error(Mr+"NaN");if(n.s<1)throw Error(Mr+(n.s?"NaN":"-Infinity"));return n.eq(cr)?new r(0):(wt=!1,e=na(lf(n,a),lf(t,a),a),wt=!0,yt(e,i))};xe.minus=xe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?l5(e,t):s5(e,(t.s=-t.s,t))};xe.modulo=xe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Mr+"NaN");return n.s?(wt=!1,e=na(n,t,0,1).times(t),wt=!0,n.minus(e)):yt(new r(n),i)};xe.naturalExponential=xe.exp=function(){return o5(this)};xe.naturalLogarithm=xe.ln=function(){return lf(this)};xe.negated=xe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};xe.plus=xe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?s5(e,t):l5(e,(t.s=-t.s,t))};xe.precision=xe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(zs+t);if(e=Yt(i)+1,r=i.d.length-1,n=r*St+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};xe.squareRoot=xe.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Mr+"NaN")}for(t=Yt(o),wt=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=gi(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=iu((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(na(o,a,s+2)).times(.5),gi(a.d).slice(0,s)===(e=gi(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(yt(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return wt=!0,yt(r,n)};xe.times=xe.mul=function(t){var e,n,r,i,a,s,o,c,u,d=this,h=d.constructor,p=d.d,y=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,c=p.length,u=y.length,c<u&&(a=p,p=y,y=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+y[r]*p[i-r-1]+e,a[i--]=o%hn|0,e=o/hn|0;a[i]=(a[i]+e)%hn|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,wt?yt(t,h.precision):t};xe.toDecimalPlaces=xe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ai(t,0,ru),e===void 0?e=r.rounding:Ai(e,0,8),yt(n,t+Yt(n)+1,e))};xe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Qs(r,!0):(Ai(t,0,ru),e===void 0?e=i.rounding:Ai(e,0,8),r=yt(new i(r),t+1,e),n=Qs(r,!0,t+1)),n};xe.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Qs(i):(Ai(t,0,ru),e===void 0?e=a.rounding:Ai(e,0,8),r=yt(new a(i),t+Yt(i)+1,e),n=Qs(r.abs(),!1,t+Yt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};xe.toInteger=xe.toint=function(){var t=this,e=t.constructor;return yt(new e(t),Yt(t)+1,e.rounding)};xe.toNumber=function(){return+this};xe.toPower=xe.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(cr);if(o=new c(o),!o.s){if(t.s<1)throw Error(Mr+"Infinity");return o}if(o.eq(cr))return o;if(r=c.precision,t.eq(cr))return yt(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=d<0?-d:d)<=a5){for(i=new c(cr),e=Math.ceil(r/St+4),wt=!1;n%2&&(i=i.times(o),$k(i.d,e)),n=iu(n/2),n!==0;)o=o.times(o),$k(o.d,e);return wt=!0,t.s<0?new c(cr).div(i):yt(i,r)}}else if(a<0)throw Error(Mr+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,wt=!1,i=t.times(lf(o,r+u)),wt=!0,i=o5(i),i.s=a,i};xe.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Yt(i),r=Qs(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ai(t,1,ru),e===void 0?e=a.rounding:Ai(e,0,8),i=yt(new a(i),t,e),n=Yt(i),r=Qs(i,t<=n||n<=a.toExpNeg,t)),r};xe.toSignificantDigits=xe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ai(t,1,ru),e===void 0?e=r.rounding:Ai(e,0,8)),yt(new r(n),t,e)};xe.toString=xe.valueOf=xe.val=xe.toJSON=xe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Yt(t),n=t.constructor;return Qs(t,e<=n.toExpNeg||e>=n.toExpPos)};function s5(t,e){var n,r,i,a,s,o,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),wt?yt(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/St),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/hn|0,c[a]%=hn;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,wt?yt(e,h):e}function Ai(t,e,n){if(t!==~~t||t<e||t>n)throw Error(zs+t)}function gi(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=St-r.length,n&&(a+=$a(n)),a+=r;s=t[e],r=s+"",n=St-r.length,n&&(a+=$a(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var na=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%hn|0,s=a/hn|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*hn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,d,h,p,y,v,x,b,T,_,w,O,R,C,L,P,N=r.constructor,k=r.s==i.s?1:-1,M=r.d,$=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(Mr+"Division by zero");for(c=r.e-i.e,L=$.length,R=M.length,y=new N(k),v=y.d=[],u=0;$[u]==(M[u]||0);)++u;if($[u]>(M[u]||0)&&--c,a==null?_=a=N.precision:s?_=a+(Yt(r)-Yt(i))+1:_=a,_<0)return new N(0);if(_=_/St+2|0,u=0,L==1)for(d=0,$=$[0],_++;(u<R||d)&&_--;u++)w=d*hn+(M[u]||0),v[u]=w/$|0,d=w%$|0;else{for(d=hn/($[0]+1)|0,d>1&&($=t($,d),M=t(M,d),L=$.length,R=M.length),O=L,x=M.slice(0,L),b=x.length;b<L;)x[b++]=0;P=$.slice(),P.unshift(0),C=$[0],$[1]>=hn/2&&++C;do d=0,o=e($,x,L,b),o<0?(T=x[0],L!=b&&(T=T*hn+(x[1]||0)),d=T/C|0,d>1?(d>=hn&&(d=hn-1),h=t($,d),p=h.length,b=x.length,o=e(h,x,p,b),o==1&&(d--,n(h,L<p?P:$,p))):(d==0&&(o=d=1),h=$.slice()),p=h.length,p<b&&h.unshift(0),n(x,h,b),o==-1&&(b=x.length,o=e($,x,L,b),o<1&&(d++,n(x,L<b?P:$,b))),b=x.length):o===0&&(d++,x=[0]),v[u++]=d,o&&x[0]?x[b++]=M[O]||0:(x=[M[O]],b=1);while((O++<R||x[0]!==void 0)&&_--)}return v[0]||v.shift(),y.e=c,yt(y,s?a+Yt(y)+1:a)}}();function o5(t,e){var n,r,i,a,s,o,c=0,u=0,d=t.constructor,h=d.precision;if(Yt(t)>16)throw Error(Nw+Yt(t));if(!t.s)return new d(cr);for(wt=!1,o=h,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(Is(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new d(cr),d.precision=o;;){if(i=yt(i.times(t),o),n=n.times(++c),s=a.plus(na(i,n,o)),gi(s.d).slice(0,o)===gi(a.d).slice(0,o)){for(;u--;)a=yt(a.times(a),o);return d.precision=h,e==null?(wt=!0,yt(a,h)):a}a=s}}function Yt(t){for(var e=t.e*St,n=t.d[0];n>=10;n/=10)e++;return e}function qS(t,e,n){if(e>t.LN10.sd())throw wt=!0,n&&(t.precision=n),Error(Mr+"LN10 precision limit exceeded");return yt(new t(t.LN10),e)}function $a(t){for(var e="";t--;)e+="0";return e}function lf(t,e){var n,r,i,a,s,o,c,u,d,h=1,p=10,y=t,v=y.d,x=y.constructor,b=x.precision;if(y.s<1)throw Error(Mr+(y.s?"NaN":"-Infinity"));if(y.eq(cr))return new x(0);if(e==null?(wt=!1,u=b):u=e,y.eq(10))return e==null&&(wt=!0),qS(x,u);if(u+=p,x.precision=u,n=gi(v),r=n.charAt(0),a=Yt(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(t),n=gi(y.d),r=n.charAt(0),h++;a=Yt(y),r>1?(y=new x("0."+n),a++):y=new x(r+"."+n.slice(1))}else return c=qS(x,u+2,b).times(a+""),y=lf(new x(r+"."+n.slice(1)),u-p).plus(c),x.precision=b,e==null?(wt=!0,yt(y,b)):y;for(o=s=y=na(y.minus(cr),y.plus(cr),u),d=yt(y.times(y),u),i=3;;){if(s=yt(s.times(d),u),c=o.plus(na(s,new x(i),u)),gi(c.d).slice(0,u)===gi(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(qS(x,u+2,b).times(a+""))),o=na(o,new x(h),u),x.precision=b,e==null?(wt=!0,yt(o,b)):o;o=c,i+=2}}function Fk(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=iu(n/St),t.d=[],r=(n+1)%St,n<0&&(r+=St),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=St;r<i;)t.d.push(+e.slice(r,r+=St));e=e.slice(r),r=St-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),wt&&(t.e>rp||t.e<-rp))throw Error(Nw+n)}else t.s=0,t.e=0,t.d=[0];return t}function yt(t,e,n){var r,i,a,s,o,c,u,d,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=St,i=e,u=h[d=0];else{if(d=Math.ceil((r+1)/St),a=h.length,d>=a)return t;for(u=a=h[d],s=1;a>=10;a/=10)s++;r%=St,i=r-St+s}if(n!==void 0&&(a=Is(10,s-i-1),o=u/a%10|0,c=e<0||h[d+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/Is(10,s-i):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=Yt(t),h.length=1,e=e-a-1,h[0]=Is(10,(St-e%St)%St),t.e=iu(-e/St)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=Is(10,St-r),h[d]=i>0?(u/Is(10,s-i)%Is(10,i)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==hn&&(h[0]=1,++t.e);break}else{if(h[d]+=a,h[d]!=hn)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(wt&&(t.e>rp||t.e<-rp))throw Error(Nw+Yt(t));return t}function l5(t,e){var n,r,i,a,s,o,c,u,d,h,p=t.constructor,y=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),wt?yt(e,y):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(d=s<0,d?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(y/St),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}s=0}for(d&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=hn-1;--c[a],c[i]+=hn}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,wt?yt(e,y):e):new p(0)}function Qs(t,e,n){var r,i=Yt(t),a=gi(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+$a(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+$a(-i-1)+a,n&&(r=n-s)>0&&(a+=$a(r))):i>=s?(a+=$a(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+$a(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=$a(r))),t.s<0?"-"+a:a}function $k(t,e){if(t.length>e)return t.length=e,!0}function u5(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(zs+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return Fk(s,a.toString())}else if(typeof a!="string")throw Error(zs+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Ioe.test(a))Fk(s,a);else throw Error(zs+a)}if(i.prototype=xe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=u5,i.config=i.set=Poe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Poe(t){if(!t||typeof t!="object")throw Error(Mr+"Object expected");var e,n,r,i=["precision",1,ru,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(iu(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(zs+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(zs+n+": "+r);return this}var Mw=u5(Doe);cr=new Mw(1);const mt=Mw;function Noe(t){return Uoe(t)||joe(t)||koe(t)||Moe()}function Moe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function koe(t,e){if(t){if(typeof t=="string")return VT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VT(t,e)}}function joe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Uoe(t){if(Array.isArray(t))return VT(t)}function VT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Boe=function(e){return e},c5={},f5=function(e){return e===c5},Gk=function(e){return function n(){return arguments.length===0||arguments.length===1&&f5(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Foe=function t(e,n){return e===1?n:Gk(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==c5}).length;return s>=e?n.apply(void 0,i):t(e-s,Gk(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=i.map(function(h){return f5(h)?c.shift():h});return n.apply(void 0,Noe(d).concat(c))}))})},xg=function(e){return Foe(e.length,e)},qT=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},$oe=xg(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Goe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Boe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,c){return c(o)},a.apply(void 0,arguments))}},HT=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},d5=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,c){return o===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function Voe(t){var e;return t===0?e=1:e=Math.floor(new mt(t).abs().log(10).toNumber())+1,e}function qoe(t,e,n){for(var r=new mt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Hoe=xg(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),zoe=xg(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Koe=xg(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Sg={rangeStep:qoe,getDigitCount:Voe,interpolateNumber:Hoe,uninterpolateNumber:zoe,uninterpolateTruncation:Koe};function zT(t){return Xoe(t)||Woe(t)||h5(t)||Yoe()}function Yoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Woe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Xoe(t){if(Array.isArray(t))return KT(t)}function uf(t,e){return Joe(t)||Zoe(t,e)||h5(t,e)||Qoe()}function Qoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h5(t,e){if(t){if(typeof t=="string")return KT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KT(t,e)}}function KT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zoe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function Joe(t){if(Array.isArray(t))return t}function m5(t){var e=uf(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function p5(t,e,n){if(t.lte(0))return new mt(0);var r=Sg.getDigitCount(t.toNumber()),i=new mt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new mt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?c:new mt(Math.ceil(c))}function ele(t,e,n){var r=1,i=new mt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new mt(10).pow(Sg.getDigitCount(t)-1),i=new mt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new mt(Math.floor(t)))}else t===0?i=new mt(Math.floor((e-1)/2)):n||(i=new mt(Math.floor(t)));var s=Math.floor((e-1)/2),o=Goe($oe(function(c){return i.add(new mt(c-s).mul(r)).toNumber()}),qT);return o(0,e)}function g5(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var a=p5(new mt(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new mt(0):(s=new mt(t).add(e).div(2),s=s.sub(new mt(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),c=Math.ceil(new mt(e).sub(s).div(a).toNumber()),u=o+c+1;return u>n?g5(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new mt(o).mul(a)),tickMax:s.add(new mt(c).mul(a))})}function tle(t){var e=uf(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=m5([n,r]),c=uf(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(zT(qT(0,i-1).map(function(){return 1/0}))):[].concat(zT(qT(0,i-1).map(function(){return-1/0})),[d]);return n>r?HT(h):h}if(u===d)return ele(u,i,a);var p=g5(u,d,s,a),y=p.step,v=p.tickMin,x=p.tickMax,b=Sg.rangeStep(v,x.add(new mt(.1).mul(y)),y);return n>r?HT(b):b}function nle(t,e){var n=uf(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=m5([r,i]),o=uf(s,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),h=p5(new mt(u).sub(c).div(d-1),a,0),p=[].concat(zT(Sg.rangeStep(new mt(c),new mt(u).sub(new mt(.99).mul(h)),h)),[u]);return r>i?HT(p):p}var rle=d5(tle),ile=d5(nle),ale="Invariant failed";function Zs(t,e){throw new Error(ale)}var sle=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ip.apply(this,arguments)}function ole(t,e){return fle(t)||cle(t,e)||ule(t,e)||lle()}function lle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ule(t,e){if(t){if(typeof t=="string")return Vk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vk(t,e)}}function Vk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function fle(t){if(Array.isArray(t))return t}function dle(t,e){if(t==null)return{};var n=hle(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ple(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b5(r.key),r)}}function gle(t,e,n){return e&&ple(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yle(t,e,n){return e=ap(e),vle(t,y5()?Reflect.construct(e,n||[],ap(t).constructor):e.apply(t,n))}function vle(t,e){if(e&&(Rl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ble(t)}function ble(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y5=function(){return!!t})()}function ap(t){return ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ap(t)}function xle(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YT(t,e)}function YT(t,e){return YT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YT(t,e)}function v5(t,e,n){return e=b5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b5(t){var e=Sle(t,"string");return Rl(e)=="symbol"?e:e+""}function Sle(t,e){if(Rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nd=function(t){function e(){return mle(this,e),yle(this,e,arguments)}return xle(e,t),gle(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,p=dle(r,sle),y=We(p,!1);this.props.direction==="x"&&d.type!=="number"&&Zs();var v=c.map(function(x){var b=u(x,o),T=b.x,_=b.y,w=b.value,O=b.errorVal;if(!O)return null;var R=[],C,L;if(Array.isArray(O)){var P=ole(O,2);C=P[0],L=P[1]}else C=L=O;if(a==="vertical"){var N=d.scale,k=_+i,M=k+s,$=k-s,K=N(w-C),W=N(w+L);R.push({x1:W,y1:M,x2:W,y2:$}),R.push({x1:K,y1:k,x2:W,y2:k}),R.push({x1:K,y1:M,x2:K,y2:$})}else if(a==="horizontal"){var Y=h.scale,j=T+i,G=j-s,q=j+s,Z=Y(w-C),B=Y(w+L);R.push({x1:G,y1:B,x2:q,y2:B}),R.push({x1:j,y1:Z,x2:j,y2:B}),R.push({x1:G,y1:Z,x2:q,y2:Z})}return Q.createElement($t,ip({className:"recharts-errorBar",key:"bar-".concat(R.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},y),R.map(function(V){return Q.createElement("line",ip({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return Q.createElement($t,{className:"recharts-errorBars"},v)}}])}(Q.Component);v5(nd,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});v5(nd,"displayName","ErrorBar");function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qk(Object(n),!0).forEach(function(r){Ele(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ele(t,e,n){return e=Tle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tle(t){var e=Ale(t,"string");return cf(e)=="symbol"?e:e+""}function Ale(t,e){if(cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x5=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=lr(n,fl);if(!s)return null;var o=fl.defaultProps,c=o!==void 0?Rs(Rs({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var p=h.item,y=h.props,v=y.sectors||y.data||[];return d.concat(v.map(function(x){return{type:s.props.iconType||p.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(r||[]).map(function(d){var h=d.item,p=h.type.defaultProps,y=p!==void 0?Rs(Rs({},p),h.props):{},v=y.dataKey,x=y.name,b=y.legendType,T=y.hide;return{inactive:T,dataKey:v,type:c.iconType||b||"square",color:kw(h),value:x||v,payload:y}}),Rs(Rs(Rs({},c),fl.getWithHeight(s,i)),{},{payload:u,item:s})};function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function Hk(t){return Ole(t)||Rle(t)||_le(t)||wle()}function wle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _le(t,e){if(t){if(typeof t=="string")return WT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WT(t,e)}}function Rle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ole(t){if(Array.isArray(t))return WT(t)}function WT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){hl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hl(t,e,n){return e=Cle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cle(t){var e=Lle(t,"string");return ff(e)=="symbol"?e:e+""}function Lle(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dr(t,e,n){return Ye(t)||Ye(e)?n:tn(e)?Ir(t,e,n):Ge(e)?e(t):n}function Pc(t,e,n,r){var i=Ooe(t,function(o){return dr(o,e)});if(n==="number"){var a=i.filter(function(o){return ve(o)||parseFloat(o)});return a.length?[vg(a),yg(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!Ye(o)}):i;return s.map(function(o){return tn(o)||o instanceof Date?o:""})}var Dle=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,h=i[u].coordinate,p=u>=o-1?i[0].coordinate:i[u+1].coordinate,y=void 0;if(Qr(h-d)!==Qr(p-h)){var v=[];if(Qr(p-h)===Qr(c[1]-c[0])){y=p;var x=h+c[1]-c[0];v[0]=Math.min(x,(x+d)/2),v[1]=Math.max(x,(x+d)/2)}else{y=d;var b=p+c[1]-c[0];v[0]=Math.min(h,(b+h)/2),v[1]=Math.max(h,(b+h)/2)}var T=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>T[0]&&e<=T[1]||e>=v[0]&&e<=v[1]){s=i[u].index;break}}else{var _=Math.min(d,p),w=Math.max(d,p);if(e>(_+h)/2&&e<=(w+h)/2){s=i[u].index;break}}}else for(var O=0;O<o;O++)if(O===0&&e<=(r[O].coordinate+r[O+1].coordinate)/2||O>0&&O<o-1&&e>(r[O].coordinate+r[O-1].coordinate)/2&&e<=(r[O].coordinate+r[O+1].coordinate)/2||O===o-1&&e>(r[O].coordinate+r[O-1].coordinate)/2){s=r[O].index;break}return s},kw=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},Ile=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),c=0,u=o.length;c<u;c++)for(var d=a[o[c]].stackGroups,h=Object.keys(d),p=0,y=h.length;p<y;p++){var v=d[h[p]],x=v.items,b=v.cateAxisId,T=x.filter(function(L){return ea(L.type).indexOf("Bar")>=0});if(T&&T.length){var _=T[0].type.defaultProps,w=_!==void 0?kt(kt({},_),T[0].props):T[0].props,O=w.barSize,R=w[b];s[R]||(s[R]=[]);var C=Ye(O)?n:O;s[R].push({item:T[0],stackList:T.slice(1),barSize:Ye(C)?void 0:Xs(C,r,0)})}}return s},Ple=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,c=s.length;if(c<1)return null;var u=Xs(n,i,0,!0),d,h=[];if(s[0].barSize===+s[0].barSize){var p=!1,y=i/c,v=s.reduce(function(O,R){return O+R.barSize||0},0);v+=(c-1)*u,v>=i&&(v-=(c-1)*u,u=0),v>=i&&y>0&&(p=!0,y*=.9,v=c*y);var x=(i-v)/2>>0,b={offset:x-u,size:0};d=s.reduce(function(O,R){var C={item:R.item,position:{offset:b.offset+b.size+u,size:p?y:R.barSize}},L=[].concat(Hk(O),[C]);return b=L[L.length-1].position,R.stackList&&R.stackList.length&&R.stackList.forEach(function(P){L.push({item:P,position:b})}),L},h)}else{var T=Xs(r,i,0,!0);i-2*T-(c-1)*u<=0&&(u=0);var _=(i-2*T-(c-1)*u)/c;_>1&&(_>>=0);var w=o===+o?Math.min(_,o):_;d=s.reduce(function(O,R,C){var L=[].concat(Hk(O),[{item:R.item,position:{offset:T+(_+u)*C+(_-w)/2,size:w}}]);return R.stackList&&R.stackList.length&&R.stackList.forEach(function(P){L.push({item:P,position:L[L.length-1].position})}),L},h)}return d},Nle=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,c=s-(o.left||0)-(o.right||0),u=x5({children:a,legendWidth:c});if(u){var d=i||{},h=d.width,p=d.height,y=u.align,v=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&v==="middle")&&y!=="center"&&ve(e[y]))return kt(kt({},e),{},hl({},y,e[y]+(h||0)));if((x==="horizontal"||x==="vertical"&&y==="center")&&v!=="middle"&&ve(e[v]))return kt(kt({},e),{},hl({},v,e[v]+(p||0)))}return e},Mle=function(e,n,r){return Ye(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},S5=function(e,n,r,i,a){var s=n.props.children,o=Pr(s,nd).filter(function(u){return Mle(i,a,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=dr(d,r);if(Ye(h))return u;var p=Array.isArray(h)?[vg(h),yg(h)]:[h,h],y=c.reduce(function(v,x){var b=dr(d,x,0),T=p[0]-Math.abs(Array.isArray(b)?b[0]:b),_=p[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(T,v[0]),Math.max(_,v[1])]},[1/0,-1/0]);return[Math.min(y[0],u[0]),Math.max(y[1],u[1])]},[1/0,-1/0])}return null},kle=function(e,n,r,i,a){var s=n.map(function(o){return S5(e,o,r,a,i)}).filter(function(o){return!Ye(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},E5=function(e,n,r,i,a){var s=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&S5(e,c,u,i)||Pc(e,u,r,a)});if(r==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},T5=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},A5=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var a,s,o=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(s=!0),c.coordinate});return a||o.push(n),s||o.push(r),o},Zi=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Qr(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var p=a?a.indexOf(h):h;return{coordinate:i(p)+u,value:h,offset:u}});return d.filter(function(h){return!Wf(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,p){return{coordinate:i(h)+u,value:h,index:p,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,p){return{coordinate:i(h)+u,value:a?a[h]:h,index:p,offset:u}})},HS=new WeakMap,Ph=function(e,n){if(typeof n!="function")return e;HS.has(e)||HS.set(e,new WeakMap);var r=HS.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},jle=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:nf(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Jm(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ic(),realScaleType:"point"}:a==="category"?{scale:nf(),realScaleType:"band"}:{scale:Jm(),realScaleType:"linear"};if(Ws(i)){var c="scale".concat(ig(i));return{scale:(Dk[c]||Ic)(),realScaleType:Dk[c]?c:"point"}}return Ge(i)?{scale:i}:{scale:Ic(),realScaleType:"point"}},Kk=1e-4,Ule=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-Kk,s=Math.max(i[0],i[1])+Kk,o=e(n[0]),c=e(n[r-1]);(o<a||o>s||c<a||c>s)&&e.domain([n[0],n[r-1]])}},Ble=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Fle=function(e,n){if(!n||n.length!==2||!ve(n[0])||!ve(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!ve(e[0])||e[0]<r)&&(a[0]=r),(!ve(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},$le=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var c=Wf(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1])}},Gle=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=Wf(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Vle={sign:$le,expand:wte,none:bl,silhouette:_te,wiggle:Rte,positive:Gle},qle=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=Vle[r],s=Ate().keys(i).value(function(o,c){return+dr(o,c,0)}).order(wT).offset(a);return s(e)},Hle=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,c={},u=o.reduce(function(h,p){var y,v=(y=p.type)!==null&&y!==void 0&&y.defaultProps?kt(kt({},p.type.defaultProps),p.props):p.props,x=v.stackId,b=v.hide;if(b)return h;var T=v[r],_=h[T]||{hasStack:!1,stackGroups:{}};if(tn(x)){var w=_.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};w.items.push(p),_.hasStack=!0,_.stackGroups[x]=w}else _.stackGroups[Xf("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return kt(kt({},h),{},hl({},T,_))},c),d={};return Object.keys(u).reduce(function(h,p){var y=u[p];if(y.hasStack){var v={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(x,b){var T=y.stackGroups[b];return kt(kt({},x),{},hl({},b,{numericAxisId:r,cateAxisId:i,items:T.items,stackedData:qle(e,T.items,a)}))},v)}return kt(kt({},h),{},hl({},p,y))},d)},zle=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=rle(u,a,o);return e.domain([vg(d),yg(d)]),{niceTicks:d}}if(a&&i==="number"){var h=e.domain(),p=ile(h,a,o);return{niceTicks:p}}return null};function Yk(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ye(i[e.dataKey])){var o=Pm(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=dr(i,Ye(s)?e.dataKey:s);return Ye(c)?null:e.scale(c)}var Wk=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var c=dr(s,n.dataKey,n.domain[o]);return Ye(c)?null:n.scale(c)-a/2+i},Kle=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Yle=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(tn(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},Wle=function(e){return e.reduce(function(n,r){return[vg(r.concat([n[0]]).filter(ve)),yg(r.concat([n[1]]).filter(ve))]},[1/0,-1/0])},w5=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,c=o.reduce(function(u,d){var h=Wle(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Xk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XT=function(e,n,r){if(Ge(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(ve(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(Xk.test(e[0])){var a=+Xk.exec(e[0])[1];i[0]=n[0]-a}else Ge(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(ve(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(Qk.test(e[1])){var s=+Qk.exec(e[1])[1];i[1]=n[1]+s}else Ge(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},sp=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=cw(n,function(h){return h.coordinate}),s=1/0,o=1,c=a.length;o<c;o++){var u=a[o],d=a[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},Zk=function(e,n,r){return!e||!e.length||bg(e,Ir(r,"type.defaultProps.domain"))?n:e},_5=function(e,n){var r=e.type.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return kt(kt({},We(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:kw(e),value:dr(n,i),type:c,payload:n,chartType:u,hide:d})};function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function Jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function e2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jk(Object(n),!0).forEach(function(r){Xle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xle(t,e,n){return e=Qle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qle(t){var e=Zle(t,"string");return df(e)=="symbol"?e:e+""}function Zle(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var op=Math.PI/180,Jle=function(e){return e*180/Math.PI},wn=function(e,n,r,i){return{x:e+Math.cos(-op*i)*r,y:n+Math.sin(-op*i)*r}},eue=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},tue=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=eue({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var c=(r-a)/o,u=Math.acos(c);return i>s&&(u=2*Math.PI-u),{radius:o,angle:Jle(u),angleInRadian:u}},nue=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},rue=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},t2=function(e,n){var r=e.x,i=e.y,a=tue({x:r,y:i},n),s=a.radius,o=a.angle,c=n.innerRadius,u=n.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=nue(n),h=d.startAngle,p=d.endAngle,y=o,v;if(h<=p){for(;y>p;)y-=360;for(;y<h;)y+=360;v=y>=h&&y<=p}else{for(;y>h;)y-=360;for(;y<p;)y+=360;v=y>=p&&y<=h}return v?e2(e2({},n),{},{radius:s,angle:rue(y,n)}):null};function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}var iue=["offset"];function aue(t){return uue(t)||lue(t)||oue(t)||sue()}function sue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oue(t,e){if(t){if(typeof t=="string")return QT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QT(t,e)}}function lue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uue(t){if(Array.isArray(t))return QT(t)}function QT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cue(t,e){if(t==null)return{};var n=fue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function n2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n2(Object(n),!0).forEach(function(r){due(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function due(t,e,n){return e=hue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hue(t){var e=mue(t,"string");return hf(e)=="symbol"?e:e+""}function mue(t,e){if(hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mf(){return mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mf.apply(this,arguments)}var pue=function(e){var n=e.value,r=e.formatter,i=Ye(e.children)?n:e.children;return Ge(r)?r(i):i},gue=function(e,n){var r=Qr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},yue=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,p=c.outerRadius,y=c.startAngle,v=c.endAngle,x=c.clockWise,b=(h+p)/2,T=gue(y,v),_=T>=0?1:-1,w,O;i==="insideStart"?(w=y+_*s,O=x):i==="insideEnd"?(w=v-_*s,O=!x):i==="end"&&(w=v+_*s,O=x),O=T<=0?O:!O;var R=wn(u,d,b,w),C=wn(u,d,b,w+(O?1:-1)*359),L="M".concat(R.x,",").concat(R.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(O?0:1,`,
    `).concat(C.x,",").concat(C.y),P=Ye(e.id)?Xf("recharts-radial-line-"):e.id;return Q.createElement("text",mf({},r,{dominantBaseline:"central",className:et("recharts-radial-bar-label",o)}),Q.createElement("defs",null,Q.createElement("path",{id:P,d:L})),Q.createElement("textPath",{xlinkHref:"#".concat(P)},n))},vue=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,p=(d+h)/2;if(i==="outside"){var y=wn(s,o,u+r,p),v=y.x,x=y.y;return{x:v,y:x,textAnchor:v>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(c+u)/2,T=wn(s,o,b,p),_=T.x,w=T.y;return{x:_,y:w,textAnchor:"middle",verticalAnchor:"middle"}},bue=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,c=s.y,u=s.width,d=s.height,h=d>=0?1:-1,p=h*i,y=h>0?"end":"start",v=h>0?"start":"end",x=u>=0?1:-1,b=x*i,T=x>0?"end":"start",_=x>0?"start":"end";if(a==="top"){var w={x:o+u/2,y:c-h*i,textAnchor:"middle",verticalAnchor:y};return Jt(Jt({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var O={x:o+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:v};return Jt(Jt({},O),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var R={x:o-b,y:c+d/2,textAnchor:T,verticalAnchor:"middle"};return Jt(Jt({},R),r?{width:Math.max(R.x-r.x,0),height:d}:{})}if(a==="right"){var C={x:o+u+b,y:c+d/2,textAnchor:_,verticalAnchor:"middle"};return Jt(Jt({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:d}:{})}var L=r?{width:u,height:d}:{};return a==="insideLeft"?Jt({x:o+b,y:c+d/2,textAnchor:_,verticalAnchor:"middle"},L):a==="insideRight"?Jt({x:o+u-b,y:c+d/2,textAnchor:T,verticalAnchor:"middle"},L):a==="insideTop"?Jt({x:o+u/2,y:c+p,textAnchor:"middle",verticalAnchor:v},L):a==="insideBottom"?Jt({x:o+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:y},L):a==="insideTopLeft"?Jt({x:o+b,y:c+p,textAnchor:_,verticalAnchor:v},L):a==="insideTopRight"?Jt({x:o+u-b,y:c+p,textAnchor:T,verticalAnchor:v},L):a==="insideBottomLeft"?Jt({x:o+b,y:c+d-p,textAnchor:_,verticalAnchor:y},L):a==="insideBottomRight"?Jt({x:o+u-b,y:c+d-p,textAnchor:T,verticalAnchor:y},L):Jl(a)&&(ve(a.x)||Us(a.x))&&(ve(a.y)||Us(a.y))?Jt({x:o+Xs(a.x,u),y:c+Xs(a.y,d),textAnchor:"end",verticalAnchor:"end"},L):Jt({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},L)},xue=function(e){return"cx"in e&&ve(e.cx)};function Pn(t){var e=t.offset,n=e===void 0?5:e,r=cue(t,iue),i=Jt({offset:n},r),a=i.viewBox,s=i.position,o=i.value,c=i.children,u=i.content,d=i.className,h=d===void 0?"":d,p=i.textBreakAll;if(!a||Ye(o)&&Ye(c)&&!F.isValidElement(u)&&!Ge(u))return null;if(F.isValidElement(u))return F.cloneElement(u,i);var y;if(Ge(u)){if(y=F.createElement(u,i),F.isValidElement(y))return y}else y=pue(i);var v=xue(a),x=We(i,!0);if(v&&(s==="insideStart"||s==="insideEnd"||s==="end"))return yue(i,y,x);var b=v?vue(i):bue(i);return Q.createElement(zm,mf({className:et("recharts-label",h)},x,b,{breakAll:p}),y)}Pn.displayName="Label";var R5=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,p=e.y,y=e.top,v=e.left,x=e.width,b=e.height,T=e.clockWise,_=e.labelViewBox;if(_)return _;if(ve(x)&&ve(b)){if(ve(h)&&ve(p))return{x:h,y:p,width:x,height:b};if(ve(y)&&ve(v))return{x:y,y:v,width:x,height:b}}return ve(h)&&ve(p)?{x:h,y:p,width:0,height:0}:ve(n)&&ve(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:T}:e.viewBox?e.viewBox:{}},Sue=function(e,n){return e?e===!0?Q.createElement(Pn,{key:"label-implicit",viewBox:n}):tn(e)?Q.createElement(Pn,{key:"label-implicit",viewBox:n,value:e}):F.isValidElement(e)?e.type===Pn?F.cloneElement(e,{key:"label-implicit",viewBox:n}):Q.createElement(Pn,{key:"label-implicit",content:e,viewBox:n}):Ge(e)?Q.createElement(Pn,{key:"label-implicit",content:e,viewBox:n}):Jl(e)?Q.createElement(Pn,mf({viewBox:n},e,{key:"label-implicit"})):null:null},Eue=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=R5(e),s=Pr(i,Pn).map(function(c,u){return F.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=Sue(e.label,n||a);return[o].concat(aue(s))};Pn.parseViewBox=R5;Pn.renderCallByParent=Eue;var zS,r2;function Tue(){if(r2)return zS;r2=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return zS=t,zS}var Aue=Tue();const wue=vt(Aue);function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}var _ue=["valueAccessor"],Rue=["data","dataKey","clockWise","id","textBreakAll"];function Oue(t){return Iue(t)||Due(t)||Lue(t)||Cue()}function Cue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lue(t,e){if(t){if(typeof t=="string")return ZT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZT(t,e)}}function Due(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Iue(t){if(Array.isArray(t))return ZT(t)}function ZT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lp.apply(this,arguments)}function i2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i2(Object(n),!0).forEach(function(r){Pue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pue(t,e,n){return e=Nue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nue(t){var e=Mue(t,"string");return pf(e)=="symbol"?e:e+""}function Mue(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s2(t,e){if(t==null)return{};var n=kue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var jue=function(e){return Array.isArray(e.value)?wue(e.value):e.value};function Ka(t){var e=t.valueAccessor,n=e===void 0?jue:e,r=s2(t,_ue),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,c=r.textBreakAll,u=s2(r,Rue);return!i||!i.length?null:Q.createElement($t,{className:"recharts-label-list"},i.map(function(d,h){var p=Ye(a)?n(d,h):dr(d&&d.payload,a),y=Ye(o)?{}:{id:"".concat(o,"-").concat(h)};return Q.createElement(Pn,lp({},We(d,!0),u,y,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:Pn.parseViewBox(Ye(s)?d:a2(a2({},d),{},{clockWise:s})),key:"label-".concat(h),index:h}))}))}Ka.displayName="LabelList";function Uue(t,e){return t?t===!0?Q.createElement(Ka,{key:"labelList-implicit",data:e}):Q.isValidElement(t)||Ge(t)?Q.createElement(Ka,{key:"labelList-implicit",data:e,content:t}):Jl(t)?Q.createElement(Ka,lp({data:e},t,{key:"labelList-implicit"})):null:null}function Bue(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Pr(r,Ka).map(function(s,o){return F.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=Uue(t.label,e);return[a].concat(Oue(i))}Ka.renderCallByParent=Bue;function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function JT(){return JT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JT.apply(this,arguments)}function o2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o2(Object(n),!0).forEach(function(r){Fue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fue(t,e,n){return e=$ue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ue(t){var e=Gue(t,"string");return gf(e)=="symbol"?e:e+""}function Gue(t,e){if(gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vue=function(e,n){var r=Qr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Nh=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(o?1:-1)+i,h=Math.asin(c/d)/op,p=u?a:a+s*h,y=wn(n,r,d,p),v=wn(n,r,i,p),x=u?a-s*h:a,b=wn(n,r,d*Math.cos(h*op),x);return{center:y,circleTangency:v,lineTangency:b,theta:h}},O5=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,c=Vue(s,o),u=s+c,d=wn(n,r,a,s),h=wn(n,r,a,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var y=wn(n,r,i,s),v=wn(n,r,i,u);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},que=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Qr(d-u),p=Nh({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:s,cornerIsExternal:c}),y=p.circleTangency,v=p.lineTangency,x=p.theta,b=Nh({cx:n,cy:r,radius:a,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:c}),T=b.circleTangency,_=b.lineTangency,w=b.theta,O=c?Math.abs(u-d):Math.abs(u-d)-x-w;if(O<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):O5({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var R="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(h<0),",").concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var C=Nh({cx:n,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),L=C.circleTangency,P=C.lineTangency,N=C.theta,k=Nh({cx:n,cy:r,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),M=k.circleTangency,$=k.lineTangency,K=k.theta,W=c?Math.abs(u-d):Math.abs(u-d)-N-K;if(W<0&&s===0)return"".concat(R,"L").concat(n,",").concat(r,"Z");R+="L".concat($.x,",").concat($.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(W>180),",").concat(+(h>0),",").concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,"Z")}else R+="L".concat(n,",").concat(r,"Z");return R},Hue={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},C5=function(e){var n=l2(l2({},Hue),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,p=n.className;if(s<a||d===h)return null;var y=et("recharts-sector",p),v=s-a,x=Xs(o,v,0,!0),b;return x>0&&Math.abs(d-h)<360?b=que({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(x,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):b=O5({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:h}),Q.createElement("path",JT({},We(n,!0),{className:y,d:b,role:"img"}))};function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function eA(){return eA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eA.apply(this,arguments)}function u2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u2(Object(n),!0).forEach(function(r){zue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zue(t,e,n){return e=Kue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kue(t){var e=Yue(t,"string");return yf(e)=="symbol"?e:e+""}function Yue(t,e){if(yf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f2={curveBasisClosed:hte,curveBasisOpen:mte,curveBasis:dte,curveBumpX:Zee,curveBumpY:Jee,curveLinearClosed:pte,curveLinear:sg,curveMonotoneX:gte,curveMonotoneY:yte,curveNatural:vte,curveStep:bte,curveStepAfter:Ste,curveStepBefore:xte},Mh=function(e){return e.x===+e.x&&e.y===+e.y},pc=function(e){return e.x},gc=function(e){return e.y},Wue=function(e,n){if(Ge(e))return e;var r="curve".concat(ig(e));return(r==="curveMonotone"||r==="curveBump")&&n?f2["".concat(r).concat(n==="vertical"?"Y":"X")]:f2[r]||sg},Xue=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=Wue(r,o),h=u?a.filter(function(x){return Mh(x)}):a,p;if(Array.isArray(s)){var y=u?s.filter(function(x){return Mh(x)}):s,v=h.map(function(x,b){return c2(c2({},x),{},{base:y[b]})});return o==="vertical"?p=_h().y(gc).x1(pc).x0(function(x){return x.base.x}):p=_h().x(pc).y1(gc).y0(function(x){return x.base.y}),p.defined(Mh).curve(d),p(v)}return o==="vertical"&&ve(s)?p=_h().y(gc).x1(pc).x0(s):ve(s)?p=_h().x(pc).y1(gc).y0(s):p=P4().x(pc).y(gc),p.defined(Mh).curve(d),p(h)},tA=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?Xue(e):i;return Q.createElement("path",eA({},We(e,!1),Nm(e),{className:et("recharts-curve",n),d:s,ref:a}))},KS={exports:{}},YS,d2;function Que(){if(d2)return YS;d2=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return YS=t,YS}var WS,h2;function Zue(){if(h2)return WS;h2=1;var t=Que();function e(){}function n(){}return n.resetWarningCache=e,WS=function(){function r(s,o,c,u,d,h){if(h!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},WS}var m2;function Jue(){return m2||(m2=1,KS.exports=Zue()()),KS.exports}var ece=Jue();const at=vt(ece);var tce=Object.getOwnPropertyNames,nce=Object.getOwnPropertySymbols,rce=Object.prototype.hasOwnProperty;function p2(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function kh(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var c=t(n,r,i);return a.delete(n),a.delete(r),c}}function g2(t){return tce(t).concat(nce(t))}var ice=Object.hasOwn||function(t,e){return rce.call(t,e)};function io(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var ace="__v",sce="__o",oce="_owner",y2=Object.getOwnPropertyDescriptor,v2=Object.keys;function lce(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function uce(t,e){return io(t.getTime(),e.getTime())}function cce(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function fce(t,e){return t===e}function b2(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),s,o,c=0;(s=a.next())&&!s.done;){for(var u=e.entries(),d=!1,h=0;(o=u.next())&&!o.done;){if(i[h]){h++;continue}var p=s.value,y=o.value;if(n.equals(p[0],y[0],c,h,t,e,n)&&n.equals(p[1],y[1],p[0],y[0],t,e,n)){d=i[h]=!0;break}h++}if(!d)return!1;c++}return!0}var dce=io;function hce(t,e,n){var r=v2(t),i=r.length;if(v2(e).length!==i)return!1;for(;i-- >0;)if(!L5(t,e,n,r[i]))return!1;return!0}function yc(t,e,n){var r=g2(t),i=r.length;if(g2(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!L5(t,e,n,a)||(s=y2(t,a),o=y2(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function mce(t,e){return io(t.valueOf(),e.valueOf())}function pce(t,e){return t.source===e.source&&t.flags===e.flags}function x2(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var c=e.values(),u=!1,d=0;(o=c.next())&&!o.done;){if(!i[d]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function gce(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function yce(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function L5(t,e,n,r){return(r===oce||r===sce||r===ace)&&(t.$$typeof||e.$$typeof)?!0:ice(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var vce="[object Arguments]",bce="[object Boolean]",xce="[object Date]",Sce="[object Error]",Ece="[object Map]",Tce="[object Number]",Ace="[object Object]",wce="[object RegExp]",_ce="[object Set]",Rce="[object String]",Oce="[object URL]",Cce=Array.isArray,S2=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,E2=Object.assign,Lce=Object.prototype.toString.call.bind(Object.prototype.toString);function Dce(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,h=t.areTypedArraysEqual,p=t.areUrlsEqual;return function(v,x,b){if(v===x)return!0;if(v==null||x==null)return!1;var T=typeof v;if(T!==typeof x)return!1;if(T!=="object")return T==="number"?s(v,x,b):T==="function"?i(v,x,b):!1;var _=v.constructor;if(_!==x.constructor)return!1;if(_===Object)return o(v,x,b);if(Cce(v))return e(v,x,b);if(S2!=null&&S2(v))return h(v,x,b);if(_===Date)return n(v,x,b);if(_===RegExp)return u(v,x,b);if(_===Map)return a(v,x,b);if(_===Set)return d(v,x,b);var w=Lce(v);return w===xce?n(v,x,b):w===wce?u(v,x,b):w===Ece?a(v,x,b):w===_ce?d(v,x,b):w===Ace?typeof v.then!="function"&&typeof x.then!="function"&&o(v,x,b):w===Oce?p(v,x,b):w===Sce?r(v,x,b):w===vce?o(v,x,b):w===bce||w===Tce||w===Rce?c(v,x,b):!1}}function Ice(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?yc:lce,areDatesEqual:uce,areErrorsEqual:cce,areFunctionsEqual:fce,areMapsEqual:r?p2(b2,yc):b2,areNumbersEqual:dce,areObjectsEqual:r?yc:hce,arePrimitiveWrappersEqual:mce,areRegExpsEqual:pce,areSetsEqual:r?p2(x2,yc):x2,areTypedArraysEqual:r?yc:gce,areUrlsEqual:yce};if(n&&(i=E2({},i,n(i))),e){var a=kh(i.areArraysEqual),s=kh(i.areMapsEqual),o=kh(i.areObjectsEqual),c=kh(i.areSetsEqual);i=E2({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:c})}return i}function Pce(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function Nce(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(c,u){var d=r(),h=d.cache,p=h===void 0?e?new WeakMap:void 0:h,y=d.meta;return n(c,u,{cache:p,equals:i,meta:y,strict:a})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,u){return n(c,u,s)}}var Mce=as();as({strict:!0});as({circular:!0});as({circular:!0,strict:!0});as({createInternalComparator:function(){return io}});as({strict:!0,createInternalComparator:function(){return io}});as({circular:!0,createInternalComparator:function(){return io}});as({circular:!0,createInternalComparator:function(){return io},strict:!0});function as(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=Ice(t),c=Dce(o),u=r?r(c):Pce(c);return Nce({circular:n,comparator:c,createState:i,equals:u,strict:s})}function kce(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function T2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):kce(i)};requestAnimationFrame(r)}function nA(t){"@babel/helpers - typeof";return nA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nA(t)}function jce(t){return $ce(t)||Fce(t)||Bce(t)||Uce()}function Uce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bce(t,e){if(t){if(typeof t=="string")return A2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A2(t,e)}}function A2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ce(t){if(Array.isArray(t))return t}function Gce(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=jce(s),c=o[0],u=o.slice(1);if(typeof c=="number"){T2(i.bind(null,u),c);return}i(c),T2(i.bind(null,u));return}nA(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function w2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(n),!0).forEach(function(r){D5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D5(t,e,n){return e=Vce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vce(t){var e=qce(t,"string");return vf(e)==="symbol"?e:String(e)}function qce(t,e){if(vf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hce=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},zce=function(e){return e},Kce=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Nc=function(e,n){return Object.keys(n).reduce(function(r,i){return _2(_2({},r),{},D5({},i,e(i,n[i])))},{})},R2=function(e,n,r){return e.map(function(i){return"".concat(Kce(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Yce(t,e){return Qce(t)||Xce(t,e)||I5(t,e)||Wce()}function Wce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xce(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Qce(t){if(Array.isArray(t))return t}function Zce(t){return tfe(t)||efe(t)||I5(t)||Jce()}function Jce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I5(t,e){if(t){if(typeof t=="string")return rA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rA(t,e)}}function efe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tfe(t){if(Array.isArray(t))return rA(t)}function rA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var up=1e-4,P5=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},N5=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},O2=function(e,n){return function(r){var i=P5(e,n);return N5(i,r)}},nfe=function(e,n){return function(r){var i=P5(e,n),a=[].concat(Zce(i.map(function(s,o){return s*o}).slice(1)),[0]);return N5(a,r)}},C2=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),d=Yce(u,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var h=O2(i,s),p=O2(a,o),y=nfe(i,s),v=function(T){return T>1?1:T<0?0:T},x=function(T){for(var _=T>1?1:T,w=_,O=0;O<8;++O){var R=h(w)-_,C=y(w);if(Math.abs(R-_)<up||C<up)return p(w);w=v(w-R/C)}return p(w)};return x.isStepper=!1,x},rfe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,c=function(d,h,p){var y=-(d-h)*r,v=p*a,x=p+(y-v)*o/1e3,b=p*o/1e3+d;return Math.abs(b-h)<up&&Math.abs(x)<up?[h,0]:[b,x]};return c.isStepper=!0,c.dt=o,c},ife=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return C2(i);case"spring":return rfe();default:if(i.split("(")[0]==="cubic-bezier")return C2(i)}return typeof i=="function"?i:null};function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function L2(t){return ofe(t)||sfe(t)||M5(t)||afe()}function afe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ofe(t){if(Array.isArray(t))return aA(t)}function D2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D2(Object(n),!0).forEach(function(r){iA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iA(t,e,n){return e=lfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lfe(t){var e=ufe(t,"string");return bf(e)==="symbol"?e:String(e)}function ufe(t,e){if(bf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cfe(t,e){return hfe(t)||dfe(t,e)||M5(t,e)||ffe()}function ffe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M5(t,e){if(t){if(typeof t=="string")return aA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aA(t,e)}}function aA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function hfe(t){if(Array.isArray(t))return t}var cp=function(e,n,r){return e+(n-e)*r},sA=function(e){var n=e.from,r=e.to;return n!==r},mfe=function t(e,n,r){var i=Nc(function(a,s){if(sA(s)){var o=e(s.from,s.to,s.velocity),c=cfe(o,2),u=c[0],d=c[1];return Tn(Tn({},s),{},{from:u,velocity:d})}return s},n);return r<1?Nc(function(a,s){return sA(s)?Tn(Tn({},s),{},{velocity:cp(s.velocity,i[a].velocity,r),from:cp(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const pfe=function(t,e,n,r,i){var a=Hce(t,e),s=a.reduce(function(b,T){return Tn(Tn({},b),{},iA({},T,[t[T],e[T]]))},{}),o=a.reduce(function(b,T){return Tn(Tn({},b),{},iA({},T,{from:t[T],velocity:0,to:e[T]}))},{}),c=-1,u,d,h=function(){return null},p=function(){return Nc(function(T,_){return _.from},o)},y=function(){return!Object.values(o).filter(sA).length},v=function(T){u||(u=T);var _=T-u,w=_/n.dt;o=mfe(n,o,w),i(Tn(Tn(Tn({},t),e),p())),u=T,y()||(c=requestAnimationFrame(h))},x=function(T){d||(d=T);var _=(T-d)/r,w=Nc(function(R,C){return cp.apply(void 0,L2(C).concat([n(_)]))},s);if(i(Tn(Tn(Tn({},t),e),w)),_<1)c=requestAnimationFrame(h);else{var O=Nc(function(R,C){return cp.apply(void 0,L2(C).concat([n(1)]))},s);i(Tn(Tn(Tn({},t),e),O))}};return h=n.isStepper?v:x,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Ol(t){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(t)}var gfe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function yfe(t,e){if(t==null)return{};var n=vfe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vfe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function XS(t){return Efe(t)||Sfe(t)||xfe(t)||bfe()}function bfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xfe(t,e){if(t){if(typeof t=="string")return oA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oA(t,e)}}function Sfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Efe(t){if(Array.isArray(t))return oA(t)}function oA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I2(Object(n),!0).forEach(function(r){Ac(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ac(t,e,n){return e=k5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Afe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k5(r.key),r)}}function wfe(t,e,n){return e&&Afe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function k5(t){var e=_fe(t,"string");return Ol(e)==="symbol"?e:String(e)}function _fe(t,e){if(Ol(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ol(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lA(t,e)}function lA(t,e){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lA(t,e)}function Ofe(t){var e=Cfe();return function(){var r=fp(t),i;if(e){var a=fp(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return uA(this,i)}}function uA(t,e){if(e&&(Ol(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cA(t)}function cA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fp(t){return fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fp(t)}var ua=function(t){Rfe(n,t);var e=Ofe(n);function n(r,i){var a;Tfe(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,c=s.attributeName,u=s.from,d=s.to,h=s.steps,p=s.children,y=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(cA(a)),a.changeStyle=a.changeStyle.bind(cA(a)),!o||y<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:d}),uA(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof p=="function")return a.state={style:u},uA(a);a.state={style:c?Ac({},c,u):u}}else a.state={style:{}};return a}return wfe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,p=this.state.style;if(o){if(!s){var y={style:c?Ac({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(y);return}if(!(Mce(i.to,d)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=v||u?h:i.to;if(this.state&&p){var b={style:c?Ac({},c,x):x};(c&&p[c]!==x||!c&&p!==x)&&this.setState(b)}this.runAnimation(Vr(Vr({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,c=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,p=i.onAnimationStart,y=pfe(s,o,ife(u),c,this.changeStyle),v=function(){a.stopJSAnimation=y()};this.manager.start([p,d,v,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,c=i.onAnimationStart,u=s[0],d=u.style,h=u.duration,p=h===void 0?0:h,y=function(x,b,T){if(T===0)return x;var _=b.duration,w=b.easing,O=w===void 0?"ease":w,R=b.style,C=b.properties,L=b.onAnimationEnd,P=T>0?s[T-1]:b,N=C||Object.keys(R);if(typeof O=="function"||O==="spring")return[].concat(XS(x),[a.runJSAnimation.bind(a,{from:P.style,to:R,duration:_,easing:O}),_]);var k=R2(N,_,O),M=Vr(Vr(Vr({},P.style),R),{},{transition:k});return[].concat(XS(x),[M,_,L]).filter(zce)};return this.manager.start([c].concat(XS(s.reduce(y,[d,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Gce());var a=i.begin,s=i.duration,o=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,p=i.steps,y=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof y=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var x=o?Ac({},o,c):c,b=R2(Object.keys(x),s,u);v.start([d,a,Vr(Vr({},x),{},{transition:b}),s,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=yfe(i,gfe),u=F.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||s<=0)return a;var h=function(y){var v=y.props,x=v.style,b=x===void 0?{}:x,T=v.className,_=F.cloneElement(y,Vr(Vr({},c),{},{style:Vr(Vr({},b),d),className:T}));return _};return u===1?h(F.Children.only(a)):Q.createElement("div",null,F.Children.map(a,function(p){return h(p)}))}}]),n}(F.PureComponent);ua.displayName="Animate";ua.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ua.propTypes={from:at.oneOfType([at.object,at.string]),to:at.oneOfType([at.object,at.string]),attributeName:at.string,duration:at.number,begin:at.number,easing:at.oneOfType([at.string,at.func]),steps:at.arrayOf(at.shape({duration:at.number.isRequired,style:at.object.isRequired,easing:at.oneOfType([at.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),at.func]),properties:at.arrayOf("string"),onAnimationEnd:at.func})),children:at.oneOfType([at.node,at.func]),isActive:at.bool,canBegin:at.bool,onAnimationEnd:at.func,shouldReAnimate:at.bool,onAnimationStart:at.func,onAnimationReStart:at.func};function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dp.apply(this,arguments)}function Lfe(t,e){return Nfe(t)||Pfe(t,e)||Ife(t,e)||Dfe()}function Dfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ife(t,e){if(t){if(typeof t=="string")return P2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P2(t,e)}}function P2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Nfe(t){if(Array.isArray(t))return t}function N2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N2(Object(n),!0).forEach(function(r){Mfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mfe(t,e,n){return e=kfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kfe(t){var e=jfe(t,"string");return xf(e)=="symbol"?e:e+""}function jfe(t,e){if(xf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k2=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var h=[0,0,0,0],p=0,y=4;p<y;p++)h[p]=a[p]>s?s:a[p];d="M".concat(e,",").concat(n+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(n)),d+="L ".concat(e+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*h[1])),d+="L ".concat(e+r,",").concat(n+i-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(n+i)),d+="L ".concat(e+c*h[3],",").concat(n+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*h[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var v=Math.min(s,a);d="M ".concat(e,",").concat(n+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+c*v,",").concat(n,`
            L `).concat(e+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*v,`
            L `).concat(e+r,",").concat(n+i-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-c*v,",").concat(n+i,`
            L `).concat(e+c*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*v," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},Ufe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),h=Math.min(s,s+c),p=Math.max(s,s+c);return r>=u&&r<=d&&i>=h&&i<=p}return!1},Bfe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jw=function(e){var n=M2(M2({},Bfe),e),r=F.useRef(),i=F.useState(-1),a=Lfe(i,2),s=a[0],o=a[1];F.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var O=r.current.getTotalLength();O&&o(O)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,p=n.radius,y=n.className,v=n.animationEasing,x=n.animationDuration,b=n.animationBegin,T=n.isAnimationActive,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var w=et("recharts-rectangle",y);return _?Q.createElement(ua,{canBegin:s>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:x,animationEasing:v,isActive:_},function(O){var R=O.width,C=O.height,L=O.x,P=O.y;return Q.createElement(ua,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,isActive:T,easing:v},Q.createElement("path",dp({},We(n,!0),{className:w,d:k2(L,P,R,C,p),ref:r})))}):Q.createElement("path",dp({},We(n,!0),{className:w,d:k2(c,u,d,h,p)}))};function fA(){return fA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fA.apply(this,arguments)}var Uw=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=et("recharts-dot",a);return n===+n&&r===+r&&i===+i?Q.createElement("circle",fA({},We(e,!1),Nm(e),{className:s,cx:n,cy:r,r:i})):null};function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}var Ffe=["x","y","top","left","width","height","className"];function dA(){return dA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dA.apply(this,arguments)}function j2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j2(Object(n),!0).forEach(function(r){Gfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gfe(t,e,n){return e=Vfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vfe(t){var e=qfe(t,"string");return Sf(e)=="symbol"?e:e+""}function qfe(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hfe(t,e){if(t==null)return{};var n=zfe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Kfe=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},Yfe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,p=e.height,y=p===void 0?0:p,v=e.className,x=Hfe(e,Ffe),b=$fe({x:r,y:a,top:o,left:u,width:h,height:y},x);return!ve(r)||!ve(a)||!ve(h)||!ve(y)||!ve(o)||!ve(u)?null:Q.createElement("path",dA({},We(b,!0),{className:et("recharts-cross",v),d:Kfe(r,a,h,y,o,u)}))},QS,U2;function Wfe(){if(U2)return QS;U2=1;var t=n6(),e=t(Object.getPrototypeOf,Object);return QS=e,QS}var ZS,B2;function Xfe(){if(B2)return ZS;B2=1;var t=fa(),e=Wfe(),n=da(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,c=s.call(Object);function u(d){if(!n(d)||t(d)!=r)return!1;var h=e(d);if(h===null)return!0;var p=o.call(h,"constructor")&&h.constructor;return typeof p=="function"&&p instanceof p&&s.call(p)==c}return ZS=u,ZS}var Qfe=Xfe();const Zfe=vt(Qfe);var JS,F2;function Jfe(){if(F2)return JS;F2=1;var t=fa(),e=da(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return JS=r,JS}var ede=Jfe();const tde=vt(ede);function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function hp(){return hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hp.apply(this,arguments)}function nde(t,e){return sde(t)||ade(t,e)||ide(t,e)||rde()}function rde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ide(t,e){if(t){if(typeof t=="string")return $2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $2(t,e)}}function $2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ade(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function sde(t){if(Array.isArray(t))return t}function G2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G2(Object(n),!0).forEach(function(r){ode(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ode(t,e,n){return e=lde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lde(t){var e=ude(t,"string");return Ef(e)=="symbol"?e:e+""}function ude(t,e){if(Ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q2=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},cde={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fde=function(e){var n=V2(V2({},cde),e),r=F.useRef(),i=F.useState(-1),a=nde(i,2),s=a[0],o=a[1];F.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&o(w)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,p=n.height,y=n.className,v=n.animationEasing,x=n.animationDuration,b=n.animationBegin,T=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||p!==+p||d===0&&h===0||p===0)return null;var _=et("recharts-trapezoid",y);return T?Q.createElement(ua,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:p,x:c,y:u},duration:x,animationEasing:v,isActive:T},function(w){var O=w.upperWidth,R=w.lowerWidth,C=w.height,L=w.x,P=w.y;return Q.createElement(ua,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,easing:v},Q.createElement("path",hp({},We(n,!0),{className:_,d:q2(L,P,O,R,C),ref:r})))}):Q.createElement("g",null,Q.createElement("path",hp({},We(n,!0),{className:_,d:q2(c,u,d,h,p)})))},dde=["option","shapeType","propTransformer","activeClassName","isActive"];function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function hde(t,e){if(t==null)return{};var n=mde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function H2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H2(Object(n),!0).forEach(function(r){pde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pde(t,e,n){return e=gde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gde(t){var e=yde(t,"string");return Tf(e)=="symbol"?e:e+""}function yde(t,e){if(Tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vde(t,e){return mp(mp({},e),t)}function bde(t,e){return t==="symbols"}function z2(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Q.createElement(jw,n);case"trapezoid":return Q.createElement(fde,n);case"sector":return Q.createElement(C5,n);case"symbols":if(bde(e))return Q.createElement(nw,n);break;default:return null}}function xde(t){return F.isValidElement(t)?t.props:t}function Sde(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?vde:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,c=hde(t,dde),u;if(F.isValidElement(e))u=F.cloneElement(e,mp(mp({},c),xde(e)));else if(Ge(e))u=e(c);else if(Zfe(e)&&!tde(e)){var d=i(e,c);u=Q.createElement(z2,{shapeType:n,elementProps:d})}else{var h=c;u=Q.createElement(z2,{shapeType:n,elementProps:h})}return o?Q.createElement($t,{className:s},u):u}function Eg(t,e){return e!=null&&"trapezoids"in t.props}function Tg(t,e){return e!=null&&"sectors"in t.props}function Af(t,e){return e!=null&&"points"in t.props}function Ede(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function Tde(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Ade(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function wde(t,e){var n;return Eg(t,e)?n=Ede:Tg(t,e)?n=Tde:Af(t,e)&&(n=Ade),n}function _de(t,e){var n;return Eg(t,e)?n="trapezoids":Tg(t,e)?n="sectors":Af(t,e)&&(n="points"),n}function Rde(t,e){if(Eg(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Tg(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Af(t,e)?e.payload:{}}function Ode(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=_de(n,e),a=Rde(n,e),s=r.filter(function(c,u){var d=bg(a,c),h=n.props[i].filter(function(v){var x=wde(n,e);return x(v,e)}),p=n.props[i].indexOf(h[h.length-1]),y=u===p;return d&&y}),o=r.indexOf(s[s.length-1]);return o}var eE,K2;function Cde(){if(K2)return eE;K2=1;var t=Math.ceil,e=Math.max;function n(r,i,a,s){for(var o=-1,c=e(t((i-r)/(a||1)),0),u=Array(c);c--;)u[s?c:++o]=r,r+=a;return u}return eE=n,eE}var tE,Y2;function j5(){if(Y2)return tE;Y2=1;var t=v6(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return tE=r,tE}var nE,W2;function Lde(){if(W2)return nE;W2=1;var t=Cde(),e=cg(),n=j5();function r(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),t(a,s,o,i)}}return nE=r,nE}var rE,X2;function Dde(){if(X2)return rE;X2=1;var t=Lde(),e=t();return rE=e,rE}var Ide=Dde();const pp=vt(Ide);function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function Q2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q2(Object(n),!0).forEach(function(r){U5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U5(t,e,n){return e=Pde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pde(t){var e=Nde(t,"string");return wf(e)=="symbol"?e:e+""}function Nde(t,e){if(wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mde=["Webkit","Moz","O","ms"],kde=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Mde.reduce(function(a,s){return Z2(Z2({},a),{},U5({},s+r,n))},{});return i[e]=n,i};function Cl(t){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(t)}function gp(){return gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gp.apply(this,arguments)}function J2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J2(Object(n),!0).forEach(function(r){or(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ej(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F5(r.key),r)}}function Ude(t,e,n){return e&&ej(t.prototype,e),n&&ej(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bde(t,e,n){return e=yp(e),Fde(t,B5()?Reflect.construct(e,n||[],yp(t).constructor):e.apply(t,n))}function Fde(t,e){if(e&&(Cl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $de(t)}function $de(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B5=function(){return!!t})()}function yp(t){return yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yp(t)}function Gde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hA(t,e)}function hA(t,e){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hA(t,e)}function or(t,e,n){return e=F5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F5(t){var e=Vde(t,"string");return Cl(e)=="symbol"?e:e+""}function Vde(t,e){if(Cl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qde=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Ic().domain(pp(0,c)).range([a,a+s-o]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},tj=function(e){return e.changedTouches&&!!e.changedTouches.length},Ll=function(t){function e(n){var r;return jde(this,e),r=Bde(this,e,[n]),or(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),or(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),or(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),or(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),or(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),or(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),or(r,"handleSlideDragStart",function(i){var a=tj(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Gde(e,t),Ude(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,h=Math.min(i,a),p=Math.max(i,a),y=e.getIndexInRange(s,h),v=e.getIndexInRange(s,p);return{startIndex:y-y%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,c=dr(a[r],o,r);return Ge(s)?s(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,p=c.startIndex,y=c.endIndex,v=c.onChange,x=r.pageX-a;x>0?x=Math.min(x,u+d-h-o,u+d-h-s):x<0&&(x=Math.max(x,u-s,u-o));var b=this.getIndex({startX:s+x,endX:o+x});(b.startIndex!==p||b.endIndex!==y)&&v&&v(b),this.setState({startX:s+x,endX:o+x,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=tj(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,c=i.startX,u=this.state[s],d=this.props,h=d.x,p=d.width,y=d.travellerWidth,v=d.onChange,x=d.gap,b=d.data,T={startX:this.state.startX,endX:this.state.endX},_=r.pageX-a;_>0?_=Math.min(_,h+p-y-u):_<0&&(_=Math.max(_,h-u)),T[s]=u+_;var w=this.getIndex(T),O=w.startIndex,R=w.endIndex,C=function(){var P=b.length-1;return s==="startX"&&(o>c?O%x===0:R%x===0)||o<c&&R===P||s==="endX"&&(o>c?R%x===0:O%x===0)||o>c&&R===P};this.setState(or(or({},s,u+_),"brushMoveStartX",r.pageX),function(){v&&C()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,c=s.startX,u=s.endX,d=this.state[i],h=o.indexOf(d);if(h!==-1){var p=h+r;if(!(p===-1||p>=o.length)){var y=o[p];i==="startX"&&y>=u||i==="endX"&&y<=c||this.setState(or({},i,y),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.fill,u=r.stroke;return Q.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.data,u=r.children,d=r.padding,h=F.Children.only(u);return h?Q.cloneElement(h,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,p=c.traveller,y=c.ariaLabel,v=c.data,x=c.startIndex,b=c.endIndex,T=Math.max(r,this.props.x),_=iE(iE({},We(this.props,!1)),{},{x:T,y:u,width:d,height:h}),w=y||"Min value: ".concat((a=v[x])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=v[b])===null||s===void 0?void 0:s.name);return Q.createElement($t,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(R){["ArrowLeft","ArrowRight"].includes(R.key)&&(R.preventDefault(),R.stopPropagation(),o.handleTravellerMoveKeyboard(R.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,_))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:h,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,p=d.endX,y=5,v={pointerEvents:"none",fill:u};return Q.createElement($t,{className:"recharts-brush-texts"},Q.createElement(zm,gp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,p)-y,y:s+o/2},v),this.getTextOfTick(i)),Q.createElement(zm,gp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,p)+c+y,y:s+o/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,p=this.state,y=p.startX,v=p.endX,x=p.isTextActive,b=p.isSlideMoving,T=p.isTravellerMoving,_=p.isTravellerFocused;if(!i||!i.length||!ve(o)||!ve(c)||!ve(u)||!ve(d)||u<=0||d<=0)return null;var w=et("recharts-brush",a),O=Q.Children.count(s)===1,R=kde("userSelect","none");return Q.createElement($t,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:R},this.renderBackground(),O&&this.renderPanorama(),this.renderSlide(y,v),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(v,"endX"),(x||b||T||_||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,c=r.stroke,u=Math.floor(a+o/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:i,y:a,width:s,height:o,fill:c,stroke:"none"}),Q.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return Q.isValidElement(r)?a=Q.cloneElement(r,i):Ge(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return iE({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?qde({data:a,width:s,x:o,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([o,o+s-c]);var p=i.scale.domain().map(function(y){return i.scale(y)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var c=Math.floor((s+o)/2);r[c]>i?o=c:s=c}return i>=r[o]?o:s}}])}(F.PureComponent);or(Ll,"displayName","Brush");or(Ll,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var aE,nj;function Hde(){if(nj)return aE;nj=1;var t=uw();function e(n,r){var i;return t(n,function(a,s,o){return i=r(a,s,o),!i}),!!i}return aE=e,aE}var sE,rj;function zde(){if(rj)return sE;rj=1;var t=W4(),e=ns(),n=Hde(),r=Zn(),i=cg();function a(s,o,c){var u=r(s)?t:n;return c&&i(s,o,c)&&(o=void 0),u(s,e(o,3))}return sE=a,sE}var Kde=zde();const Yde=vt(Kde);var Ti=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},oE,ij;function Wde(){if(ij)return oE;ij=1;var t=h6();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return oE=e,oE}var lE,aj;function Xde(){if(aj)return lE;aj=1;var t=Wde(),e=f6(),n=ns();function r(i,a){var s={};return a=n(a,3),e(i,function(o,c,u){t(s,c,a(o,c,u))}),s}return lE=r,lE}var Qde=Xde();const Zde=vt(Qde);var uE,sj;function Jde(){if(sj)return uE;sj=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return uE=t,uE}var cE,oj;function ehe(){if(oj)return cE;oj=1;var t=uw();function e(n,r){var i=!0;return t(n,function(a,s,o){return i=!!r(a,s,o),i}),i}return cE=e,cE}var fE,lj;function the(){if(lj)return fE;lj=1;var t=Jde(),e=ehe(),n=ns(),r=Zn(),i=cg();function a(s,o,c){var u=r(s)?t:e;return c&&i(s,o,c)&&(o=void 0),u(s,n(o,3))}return fE=a,fE}var nhe=the();const $5=vt(nhe);var rhe=["x","y"];function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function mA(){return mA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mA.apply(this,arguments)}function uj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uj(Object(n),!0).forEach(function(r){ihe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ihe(t,e,n){return e=ahe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ahe(t){var e=she(t,"string");return _f(e)=="symbol"?e:e+""}function she(t,e){if(_f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ohe(t,e){if(t==null)return{};var n=lhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uhe(t,e){var n=t.x,r=t.y,i=ohe(t,rhe),a="".concat(n),s=parseInt(a,10),o="".concat(r),c=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),h="".concat(e.width||i.width),p=parseInt(h,10);return vc(vc(vc(vc(vc({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function cj(t){return Q.createElement(Sde,mA({shapeType:"rectangle",propTransformer:uhe,activeClassName:"recharts-active-bar"},t))}var che=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||Zs(),n)}},fhe=["value","background"],G5;function Dl(t){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(t)}function dhe(t,e){if(t==null)return{};var n=hhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vp(){return vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vp.apply(this,arguments)}function fj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fj(Object(n),!0).forEach(function(r){Ha(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q5(r.key),r)}}function phe(t,e,n){return e&&dj(t.prototype,e),n&&dj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ghe(t,e,n){return e=bp(e),yhe(t,V5()?Reflect.construct(e,n||[],bp(t).constructor):e.apply(t,n))}function yhe(t,e){if(e&&(Dl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vhe(t)}function vhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V5=function(){return!!t})()}function bp(t){return bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bp(t)}function bhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pA(t,e)}function pA(t,e){return pA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pA(t,e)}function Ha(t,e,n){return e=q5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q5(t){var e=xhe(t,"string");return Dl(e)=="symbol"?e:e+""}function xhe(t,e){if(Dl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rd=function(t){function e(){var n;mhe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=ghe(this,e,[].concat(i)),Ha(n,"state",{isAnimationFinished:!1}),Ha(n,"id",Xf("recharts-bar-")),Ha(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Ha(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return bhe(e,t),phe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,c=a.activeIndex,u=a.activeBar,d=We(this.props,!1);return r&&r.map(function(h,p){var y=p===c,v=y?u:s,x=Ht(Ht(Ht({},d),h),{},{isActive:y,option:v,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Q.createElement($t,vp({className:"recharts-bar-rectangle"},Mm(i.props,h,p),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(p)}),Q.createElement(cj,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,p=this.state.prevData;return Q.createElement(ua,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var v=y.t,x=a.map(function(b,T){var _=p&&p[T];if(_){var w=Wr(_.x,b.x),O=Wr(_.y,b.y),R=Wr(_.width,b.width),C=Wr(_.height,b.height);return Ht(Ht({},b),{},{x:w(v),y:O(v),width:R(v),height:C(v)})}if(s==="horizontal"){var L=Wr(0,b.height),P=L(v);return Ht(Ht({},b),{},{y:b.y+b.height-P,height:P})}var N=Wr(0,b.width),k=N(v);return Ht(Ht({},b),{},{width:k})});return Q.createElement($t,null,r.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!bg(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,c=We(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,p=dhe(u,fhe);if(!h)return null;var y=Ht(Ht(Ht(Ht(Ht({},p),{},{fill:"#eee"},h),c),Mm(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return Q.createElement(cj,vp({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},y))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=Pr(d,nd);if(!h)return null;var p=u==="vertical"?s[0].height/2:s[0].width/2,y=function(b,T){var _=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:_,errorVal:dr(b,T)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement($t,v,h.map(function(x){return Q.cloneElement(x,{key:"error-bar-".concat(i,"-").concat(x.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,offset:p,dataPointFormatter:y})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,p=r.height,y=r.isAnimationActive,v=r.background,x=r.id;if(i||!a||!a.length)return null;var b=this.state.isAnimationFinished,T=et("recharts-bar",s),_=o&&o.allowDataOverflow,w=c&&c.allowDataOverflow,O=_||w,R=Ye(x)?this.id:x;return Q.createElement($t,{className:T},_||w?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(R)},Q.createElement("rect",{x:_?u:u-h/2,y:w?d:d-p/2,width:_?h:h*2,height:w?p:p*2}))):null,Q.createElement($t,{className:"recharts-bar-rectangles",clipPath:O?"url(#clipPath-".concat(R,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(O,R),(!y||b)&&Ka.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(F.PureComponent);G5=rd;Ha(rd,"displayName","Bar");Ha(rd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!tu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ha(rd,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,p=t.offset,y=Ble(r,n);if(!y)return null;var v=e.layout,x=n.type.defaultProps,b=x!==void 0?Ht(Ht({},x),n.props):n.props,T=b.dataKey,_=b.children,w=b.minPointSize,O=v==="horizontal"?s:a,R=u?O.scale.domain():null,C=Kle({numericAxis:O}),L=Pr(_,x6),P=h.map(function(N,k){var M,$,K,W,Y,j;u?M=Fle(u[d+k],R):(M=dr(N,T),Array.isArray(M)||(M=[C,M]));var G=che(w,G5.defaultProps.minPointSize)(M[1],k);if(v==="horizontal"){var q,Z=[s.scale(M[0]),s.scale(M[1])],B=Z[0],V=Z[1];$=Wk({axis:a,ticks:o,bandSize:i,offset:y.offset,entry:N,index:k}),K=(q=V??B)!==null&&q!==void 0?q:void 0,W=y.size;var H=B-V;if(Y=Number.isNaN(H)?0:H,j={x:$,y:s.y,width:W,height:s.height},Math.abs(G)>0&&Math.abs(Y)<Math.abs(G)){var te=Qr(Y||G)*(Math.abs(G)-Math.abs(Y));K-=te,Y+=te}}else{var ce=[a.scale(M[0]),a.scale(M[1])],ye=ce[0],ge=ce[1];if($=ye,K=Wk({axis:s,ticks:c,bandSize:i,offset:y.offset,entry:N,index:k}),W=ge-ye,Y=y.size,j={x:a.x,y:K,width:a.width,height:Y},Math.abs(G)>0&&Math.abs(W)<Math.abs(G)){var Me=Qr(W||G)*(Math.abs(G)-Math.abs(W));W+=Me}}return Ht(Ht(Ht({},N),{},{x:$,y:K,width:W,height:Y,value:u?M:M[1],payload:N,background:j},L&&L[k]&&L[k].props),{},{tooltipPayload:[_5(n,N)],tooltipPosition:{x:$+W/2,y:K+Y/2}})});return Ht({data:P,layout:v},p)});function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function She(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H5(r.key),r)}}function Ehe(t,e,n){return e&&hj(t.prototype,e),n&&hj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mj(Object(n),!0).forEach(function(r){Ag(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ag(t,e,n){return e=H5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H5(t){var e=The(t,"string");return Rf(e)=="symbol"?e:e+""}function The(t,e){if(Rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ahe=function(e,n,r,i,a){var s=e.width,o=e.height,c=e.layout,u=e.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!lr(u,rd);return d.reduce(function(y,v){var x=n[v],b=x.orientation,T=x.domain,_=x.padding,w=_===void 0?{}:_,O=x.mirror,R=x.reversed,C="".concat(b).concat(O?"Mirror":""),L,P,N,k,M;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var $=T[1]-T[0],K=1/0,W=x.categoricalDomain.sort(Eee);if(W.forEach(function(ce,ye){ye>0&&(K=Math.min((ce||0)-(W[ye-1]||0),K))}),Number.isFinite(K)){var Y=K/$,j=x.layout==="vertical"?r.height:r.width;if(x.padding==="gap"&&(L=Y*j/2),x.padding==="no-gap"){var G=Xs(e.barCategoryGap,Y*j),q=Y*j/2;L=q-G-(q-G)/j*G}}}i==="xAxis"?P=[r.left+(w.left||0)+(L||0),r.left+r.width-(w.right||0)-(L||0)]:i==="yAxis"?P=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(L||0),r.top+r.height-(w.bottom||0)-(L||0)]:P=x.range,R&&(P=[P[1],P[0]]);var Z=jle(x,a,p),B=Z.scale,V=Z.realScaleType;B.domain(T).range(P),Ule(B);var H=zle(B,Kr(Kr({},x),{},{realScaleType:V}));i==="xAxis"?(M=b==="top"&&!O||b==="bottom"&&O,N=r.left,k=h[C]-M*x.height):i==="yAxis"&&(M=b==="left"&&!O||b==="right"&&O,N=h[C]-M*x.width,k=r.top);var te=Kr(Kr(Kr({},x),H),{},{realScaleType:V,x:N,y:k,scale:B,width:i==="xAxis"?r.width:x.width,height:i==="yAxis"?r.height:x.height});return te.bandSize=sp(te,H),!x.hide&&i==="xAxis"?h[C]+=(M?-1:1)*te.height:x.hide||(h[C]+=(M?-1:1)*te.width),Kr(Kr({},y),{},Ag({},v,te))},{})},z5=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},whe=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return z5({x:n,y:r},{x:i,y:a})},K5=function(){function t(e){She(this,t),this.scale=e}return Ehe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Ag(K5,"EPS",1e-4);var Bw=function(e){var n=Object.keys(e).reduce(function(r,i){return Kr(Kr({},r),{},Ag({},i,K5.create(e[i])))},{});return Kr(Kr({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return Zde(i,function(c,u){return n[u].apply(c,{bandAware:s,position:o})})},isInRange:function(i){return $5(i,function(a,s){return n[s].isInRange(a)})}})};function _he(t){return(t%180+180)%180}var Rhe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=_he(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},dE,pj;function Ohe(){if(pj)return dE;pj=1;var t=ns(),e=Qf(),n=lg();function r(i){return function(a,s,o){var c=Object(a);if(!e(a)){var u=t(s,3);a=n(a),s=function(h){return u(c[h],h,c)}}var d=i(a,s,o);return d>-1?c[u?a[d]:d]:void 0}}return dE=r,dE}var hE,gj;function Che(){if(gj)return hE;gj=1;var t=j5();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return hE=e,hE}var mE,yj;function Lhe(){if(yj)return mE;yj=1;var t=s6(),e=ns(),n=Che(),r=Math.max;function i(a,s,o){var c=a==null?0:a.length;if(!c)return-1;var u=o==null?0:n(o);return u<0&&(u=r(c+u,0)),t(a,e(s,3),u)}return mE=i,mE}var pE,vj;function Dhe(){if(vj)return pE;vj=1;var t=Ohe(),e=Lhe(),n=t(e);return pE=n,pE}var Ihe=Dhe();const Phe=vt(Ihe);var Nhe=E4();const Mhe=vt(Nhe);var khe=Mhe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),Fw=F.createContext(void 0),$w=F.createContext(void 0),Y5=F.createContext(void 0),W5=F.createContext({}),X5=F.createContext(void 0),Q5=F.createContext(0),Z5=F.createContext(0),bj=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,c=e.width,u=e.height,d=khe(a);return Q.createElement(Fw.Provider,{value:r},Q.createElement($w.Provider,{value:i},Q.createElement(W5.Provider,{value:a},Q.createElement(Y5.Provider,{value:d},Q.createElement(X5.Provider,{value:s},Q.createElement(Q5.Provider,{value:u},Q.createElement(Z5.Provider,{value:c},o)))))))},jhe=function(){return F.useContext(X5)},J5=function(e){var n=F.useContext(Fw);n==null&&Zs();var r=n[e];return r==null&&Zs(),r},Uhe=function(){var e=F.useContext(Fw);return qa(e)},Bhe=function(){var e=F.useContext($w),n=Phe(e,function(r){return $5(r.domain,Number.isFinite)});return n||qa(e)},e8=function(e){var n=F.useContext($w);n==null&&Zs();var r=n[e];return r==null&&Zs(),r},Fhe=function(){var e=F.useContext(Y5);return e},$he=function(){return F.useContext(W5)},Gw=function(){return F.useContext(Z5)},Vw=function(){return F.useContext(Q5)};function Il(t){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Il(t)}function Ghe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vhe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n8(r.key),r)}}function qhe(t,e,n){return e&&Vhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hhe(t,e,n){return e=xp(e),zhe(t,t8()?Reflect.construct(e,n||[],xp(t).constructor):e.apply(t,n))}function zhe(t,e){if(e&&(Il(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Khe(t)}function Khe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t8=function(){return!!t})()}function xp(t){return xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xp(t)}function Yhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gA(t,e)}function gA(t,e){return gA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gA(t,e)}function xj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xj(Object(n),!0).forEach(function(r){qw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qw(t,e,n){return e=n8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n8(t){var e=Whe(t,"string");return Il(e)=="symbol"?e:e+""}function Whe(t,e){if(Il(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Il(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Xhe(t,e){return eme(t)||Jhe(t,e)||Zhe(t,e)||Qhe()}function Qhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zhe(t,e){if(t){if(typeof t=="string")return Ej(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ej(t,e)}}function Ej(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function eme(t){if(Array.isArray(t))return t}function yA(){return yA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yA.apply(this,arguments)}var tme=function(e,n){var r;return Q.isValidElement(e)?r=Q.cloneElement(e,n):Ge(e)?r=e(n):r=Q.createElement("line",yA({},n,{className:"recharts-reference-line-line"})),r},nme=function(e,n,r,i,a,s,o,c,u){var d=a.x,h=a.y,p=a.width,y=a.height;if(r){var v=u.y,x=e.y.apply(v,{position:s});if(Ti(u,"discard")&&!e.y.isInRange(x))return null;var b=[{x:d+p,y:x},{x:d,y:x}];return c==="left"?b.reverse():b}if(n){var T=u.x,_=e.x.apply(T,{position:s});if(Ti(u,"discard")&&!e.x.isInRange(_))return null;var w=[{x:_,y:h+y},{x:_,y:h}];return o==="top"?w.reverse():w}if(i){var O=u.segment,R=O.map(function(C){return e.apply(C,{position:s})});return Ti(u,"discard")&&Yde(R,function(C){return!e.isInRange(C)})?null:R}return null};function rme(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,c=t.alwaysShow,u=jhe(),d=J5(i),h=e8(a),p=Fhe();if(!u||!p)return null;ta(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=Bw({x:d.scale,y:h.scale}),v=tn(e),x=tn(n),b=r&&r.length===2,T=nme(y,v,x,b,p,t.position,d.orientation,h.orientation,t);if(!T)return null;var _=Xhe(T,2),w=_[0],O=w.x,R=w.y,C=_[1],L=C.x,P=C.y,N=Ti(t,"hidden")?"url(#".concat(u,")"):void 0,k=Sj(Sj({clipPath:N},We(t,!0)),{},{x1:O,y1:R,x2:L,y2:P});return Q.createElement($t,{className:et("recharts-reference-line",o)},tme(s,k),Pn.renderCallByParent(t,whe({x1:O,y1:R,x2:L,y2:P})))}var Hw=function(t){function e(){return Ghe(this,e),Hhe(this,e,arguments)}return Yhe(e,t),qhe(e,[{key:"render",value:function(){return Q.createElement(rme,this.props)}}])}(Q.Component);qw(Hw,"displayName","ReferenceLine");qw(Hw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function vA(){return vA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vA.apply(this,arguments)}function Pl(t){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(t)}function Tj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Aj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tj(Object(n),!0).forEach(function(r){wg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ime(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ame(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i8(r.key),r)}}function sme(t,e,n){return e&&ame(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ome(t,e,n){return e=Sp(e),lme(t,r8()?Reflect.construct(e,n||[],Sp(t).constructor):e.apply(t,n))}function lme(t,e){if(e&&(Pl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ume(t)}function ume(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r8=function(){return!!t})()}function Sp(t){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sp(t)}function cme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bA(t,e)}function bA(t,e){return bA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bA(t,e)}function wg(t,e,n){return e=i8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i8(t){var e=fme(t,"string");return Pl(e)=="symbol"?e:e+""}function fme(t,e){if(Pl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dme=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=Bw({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return Ti(e,"discard")&&!s.isInRange(o)?null:o},_g=function(t){function e(){return ime(this,e),ome(this,e,arguments)}return cme(e,t),sme(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,c=r.clipPathId,u=tn(i),d=tn(a);if(ta(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=dme(this.props);if(!h)return null;var p=h.x,y=h.y,v=this.props,x=v.shape,b=v.className,T=Ti(this.props,"hidden")?"url(#".concat(c,")"):void 0,_=Aj(Aj({clipPath:T},We(this.props,!0)),{},{cx:p,cy:y});return Q.createElement($t,{className:et("recharts-reference-dot",b)},e.renderDot(x,_),Pn.renderCallByParent(this.props,{x:p-s,y:y-s,width:2*s,height:2*s}))}}])}(Q.Component);wg(_g,"displayName","ReferenceDot");wg(_g,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});wg(_g,"renderDot",function(t,e){var n;return Q.isValidElement(t)?n=Q.cloneElement(t,e):Ge(t)?n=t(e):n=Q.createElement(Uw,vA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function xA(){return xA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xA.apply(this,arguments)}function Nl(t){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nl(t)}function wj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _j(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wj(Object(n),!0).forEach(function(r){Rg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mme(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s8(r.key),r)}}function pme(t,e,n){return e&&mme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gme(t,e,n){return e=Ep(e),yme(t,a8()?Reflect.construct(e,n||[],Ep(t).constructor):e.apply(t,n))}function yme(t,e){if(e&&(Nl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vme(t)}function vme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a8=function(){return!!t})()}function Ep(t){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ep(t)}function bme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SA(t,e)}function SA(t,e){return SA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SA(t,e)}function Rg(t,e,n){return e=s8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s8(t){var e=xme(t,"string");return Nl(e)=="symbol"?e:e+""}function xme(t,e){if(Nl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sme=function(e,n,r,i,a){var s=a.x1,o=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var p=Bw({x:d.scale,y:h.scale}),y={x:e?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(c,{position:"start"}):p.y.rangeMin},v={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return Ti(a,"discard")&&(!p.isInRange(y)||!p.isInRange(v))?null:z5(y,v)},Og=function(t){function e(){return hme(this,e),gme(this,e,arguments)}return bme(e,t),pme(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;ta(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=tn(i),p=tn(a),y=tn(s),v=tn(o),x=this.props.shape;if(!h&&!p&&!y&&!v&&!x)return null;var b=Sme(h,p,y,v,this.props);if(!b&&!x)return null;var T=Ti(this.props,"hidden")?"url(#".concat(d,")"):void 0;return Q.createElement($t,{className:et("recharts-reference-area",c)},e.renderRect(x,_j(_j({clipPath:T},We(this.props,!0)),b)),Pn.renderCallByParent(this.props,b))}}])}(Q.Component);Rg(Og,"displayName","ReferenceArea");Rg(Og,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Rg(Og,"renderRect",function(t,e){var n;return Q.isValidElement(t)?n=Q.cloneElement(t,e):Ge(t)?n=t(e):n=Q.createElement(jw,xA({},e,{className:"recharts-reference-area-rect"})),n});function o8(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Eme(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Rhe(r,n)}function Tme(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Tp(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Ame(t,e){return o8(t,e+1)}function wme(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,c=0,u=1,d=s,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:o8(r,u)};var x=c,b,T=function(){return b===void 0&&(b=n(v,x)),b},_=v.coordinate,w=c===0||Tp(t,_,T,d,o);w||(c=0,d=s,u+=1),w&&(d=_+t*(T()/2+i),c+=u)},p;u<=a.length;)if(p=h(),p)return p.v;return[]}function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function Rj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rj(Object(n),!0).forEach(function(r){_me(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _me(t,e,n){return e=Rme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rme(t){var e=Ome(t,"string");return Of(e)=="symbol"?e:e+""}function Ome(t,e){if(Of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cme(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,c=e.end,u=function(p){var y=a[p],v,x=function(){return v===void 0&&(v=n(y,p)),v};if(p===s-1){var b=t*(y.coordinate+t*x()/2-c);a[p]=y=Dn(Dn({},y),{},{tickCoord:b>0?y.coordinate-b*t:y.coordinate})}else a[p]=y=Dn(Dn({},y),{},{tickCoord:y.coordinate});var T=Tp(t,y.tickCoord,x,o,c);T&&(c=y.tickCoord-t*(x()/2+i),a[p]=Dn(Dn({},y),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function Lme(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,c=e.start,u=e.end;if(a){var d=r[o-1],h=n(d,o-1),p=t*(d.coordinate+t*h/2-u);s[o-1]=d=Dn(Dn({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var y=Tp(t,d.tickCoord,function(){return h},c,u);y&&(u=d.tickCoord-t*(h/2+i),s[o-1]=Dn(Dn({},d),{},{isShow:!0}))}for(var v=a?o-1:o,x=function(_){var w=s[_],O,R=function(){return O===void 0&&(O=n(w,_)),O};if(_===0){var C=t*(w.coordinate-t*R()/2-c);s[_]=w=Dn(Dn({},w),{},{tickCoord:C<0?w.coordinate-C*t:w.coordinate})}else s[_]=w=Dn(Dn({},w),{},{tickCoord:w.coordinate});var L=Tp(t,w.tickCoord,R,c,u);L&&(c=w.tickCoord+t*(R()/2+i),s[_]=Dn(Dn({},w),{},{isShow:!0}))},b=0;b<v;b++)x(b);return s}function zw(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(ve(c)||tu.isSsr)return Ame(i,typeof c=="number"&&ve(c)?c:0);var p=[],y=o==="top"||o==="bottom"?"width":"height",v=d&&y==="width"?Dc(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=function(w,O){var R=Ge(u)?u(w.value,O):w.value;return y==="width"?Eme(Dc(R,{fontSize:e,letterSpacing:n}),v,h):Dc(R,{fontSize:e,letterSpacing:n})[y]},b=i.length>=2?Qr(i[1].coordinate-i[0].coordinate):1,T=Tme(a,b,y);return c==="equidistantPreserveStart"?wme(b,T,x,i,s):(c==="preserveStart"||c==="preserveStartEnd"?p=Lme(b,T,x,i,s,c==="preserveStartEnd"):p=Cme(b,T,x,i,s),p.filter(function(_){return _.isShow}))}var Dme=["viewBox"],Ime=["viewBox"],Pme=["ticks"];function Ml(t){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(t)}function ol(){return ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ol.apply(this,arguments)}function Oj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oj(Object(n),!0).forEach(function(r){Kw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gE(t,e){if(t==null)return{};var n=Nme(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Nme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Mme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u8(r.key),r)}}function kme(t,e,n){return e&&Cj(t.prototype,e),n&&Cj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jme(t,e,n){return e=Ap(e),Ume(t,l8()?Reflect.construct(e,n||[],Ap(t).constructor):e.apply(t,n))}function Ume(t,e){if(e&&(Ml(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bme(t)}function Bme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l8=function(){return!!t})()}function Ap(t){return Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ap(t)}function Fme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EA(t,e)}function EA(t,e){return EA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EA(t,e)}function Kw(t,e,n){return e=u8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u8(t){var e=$me(t,"string");return Ml(e)=="symbol"?e:e+""}function $me(t,e){if(Ml(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var au=function(t){function e(n){var r;return Mme(this,e),r=jme(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Fme(e,t),kme(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=gE(r,Dme),o=this.props,c=o.viewBox,u=gE(o,Ime);return!cl(a,c)||!cl(s,u)||!cl(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,c=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,p=i.tickMargin,y,v,x,b,T,_,w=h?-1:1,O=r.tickSize||d,R=ve(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":y=v=r.coordinate,b=s+ +!h*c,x=b-w*O,_=x-w*p,T=R;break;case"left":x=b=r.coordinate,v=a+ +!h*o,y=v-w*O,T=y-w*p,_=R;break;case"right":x=b=r.coordinate,v=a+ +h*o,y=v+w*O,T=y+w*p,_=R;break;default:y=v=r.coordinate,b=s+ +h*c,x=b+w*O,_=x+w*p,T=R;break}return{line:{x1:y,y1:x,x2:v,y2:b},tick:{x:T,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Un(Un(Un({},We(this.props,!1)),We(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);h=Un(Un({},h),{},{x1:i,y1:a+p*o,x2:i+s,y2:a+p*o})}else{var y=+(c==="left"&&!u||c==="right"&&u);h=Un(Un({},h),{},{x1:i+y*s,y1:a,x2:i+y*s,y2:a+o})}return Q.createElement("line",ol({},h,{className:et("recharts-cartesian-axis-line",Ir(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,h=o.tickFormatter,p=o.unit,y=zw(Un(Un({},this.props),{},{ticks:r}),i,a),v=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),b=We(this.props,!1),T=We(d,!1),_=Un(Un({},b),{},{fill:"none"},We(c,!1)),w=y.map(function(O,R){var C=s.getTickLineCoord(O),L=C.line,P=C.tick,N=Un(Un(Un(Un({textAnchor:v,verticalAnchor:x},b),{},{stroke:"none",fill:u},T),P),{},{index:R,payload:O,visibleTicksCount:y.length,tickFormatter:h});return Q.createElement($t,ol({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Mm(s.props,O,R)),c&&Q.createElement("line",ol({},_,L,{className:et("recharts-cartesian-axis-tick-line",Ir(c,"className"))})),d&&e.renderTickItem(d,N,"".concat(Ge(h)?h(O.value,R):O.value).concat(p||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,p=h.ticks,y=gE(h,Pme),v=p;return Ge(c)&&(v=p&&p.length>0?c(this.props):c(y)),s<=0||o<=0||!v||!v.length?null:Q.createElement($t,{className:et("recharts-cartesian-axis",u),ref:function(b){r.layerReference=b}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Pn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return Q.isValidElement(r)?s=Q.cloneElement(r,i):Ge(r)?s=r(i):s=Q.createElement(zm,ol({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(F.Component);Kw(au,"displayName","CartesianAxis");Kw(au,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Gme=["x1","y1","x2","y2","key"],Vme=["offset"];function Js(t){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(t)}function Lj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lj(Object(n),!0).forEach(function(r){qme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qme(t,e,n){return e=Hme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hme(t){var e=zme(t,"string");return Js(e)=="symbol"?e:e+""}function zme(t,e){if(Js(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Js(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $s(){return $s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$s.apply(this,arguments)}function Dj(t,e){if(t==null)return{};var n=Kme(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Yme=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,c=e.ry;return Q.createElement("rect",{x:i,y:a,ry:c,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function c8(t,e){var n;if(Q.isValidElement(t))n=Q.cloneElement(t,e);else if(Ge(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,c=Dj(e,Gme),u=We(c,!1);u.offset;var d=Dj(u,Vme);n=Q.createElement("line",$s({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function Wme(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Nn(Nn({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(c),index:c});return c8(i,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Xme(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Nn(Nn({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(c),index:c});return c8(i,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Qme(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,y){return p-y});i!==d[0]&&d.unshift(0);var h=d.map(function(p,y){var v=!d[y+1],x=v?i+s-p:d[y+1]-p;if(x<=0)return null;var b=y%e.length;return Q.createElement("rect",{key:"react-".concat(y),y:p,x:r,height:x,width:a,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Zme(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(p){return Math.round(p+a-a)}).sort(function(p,y){return p-y});a!==d[0]&&d.unshift(0);var h=d.map(function(p,y){var v=!d[y+1],x=v?a+o-p:d[y+1]-p;if(x<=0)return null;var b=y%r.length;return Q.createElement("rect",{key:"react-".concat(y),x:p,y:s,width:x,height:c,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Jme=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return A5(zw(Nn(Nn(Nn({},au.defaultProps),r),{},{ticks:Zi(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},epe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return A5(zw(Nn(Nn(Nn({},au.defaultProps),r),{},{ticks:Zi(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Yo={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function f8(t){var e,n,r,i,a,s,o=Gw(),c=Vw(),u=$he(),d=Nn(Nn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Yo.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Yo.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Yo.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Yo.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Yo.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Yo.verticalFill,x:ve(t.x)?t.x:u.left,y:ve(t.y)?t.y:u.top,width:ve(t.width)?t.width:u.width,height:ve(t.height)?t.height:u.height}),h=d.x,p=d.y,y=d.width,v=d.height,x=d.syncWithTicks,b=d.horizontalValues,T=d.verticalValues,_=Uhe(),w=Bhe();if(!ve(y)||y<=0||!ve(v)||v<=0||!ve(h)||h!==+h||!ve(p)||p!==+p)return null;var O=d.verticalCoordinatesGenerator||Jme,R=d.horizontalCoordinatesGenerator||epe,C=d.horizontalPoints,L=d.verticalPoints;if((!C||!C.length)&&Ge(R)){var P=b&&b.length,N=R({yAxis:w?Nn(Nn({},w),{},{ticks:P?b:w.ticks}):void 0,width:o,height:c,offset:u},P?!0:x);ta(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Js(N),"]")),Array.isArray(N)&&(C=N)}if((!L||!L.length)&&Ge(O)){var k=T&&T.length,M=O({xAxis:_?Nn(Nn({},_),{},{ticks:k?T:_.ticks}):void 0,width:o,height:c,offset:u},k?!0:x);ta(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Js(M),"]")),Array.isArray(M)&&(L=M)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(Yme,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),Q.createElement(Wme,$s({},d,{offset:u,horizontalPoints:C,xAxis:_,yAxis:w})),Q.createElement(Xme,$s({},d,{offset:u,verticalPoints:L,xAxis:_,yAxis:w})),Q.createElement(Qme,$s({},d,{horizontalPoints:C})),Q.createElement(Zme,$s({},d,{verticalPoints:L})))}f8.displayName="CartesianGrid";var tpe=["type","layout","connectNulls","ref"],npe=["key"];function kl(t){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kl(t)}function Ij(t,e){if(t==null)return{};var n=rpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Mc(){return Mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mc.apply(this,arguments)}function Pj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pj(Object(n),!0).forEach(function(r){Yr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wo(t){return ope(t)||spe(t)||ape(t)||ipe()}function ipe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ape(t,e){if(t){if(typeof t=="string")return TA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TA(t,e)}}function spe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ope(t){if(Array.isArray(t))return TA(t)}function TA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h8(r.key),r)}}function upe(t,e,n){return e&&Nj(t.prototype,e),n&&Nj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cpe(t,e,n){return e=wp(e),fpe(t,d8()?Reflect.construct(e,n||[],wp(t).constructor):e.apply(t,n))}function fpe(t,e){if(e&&(kl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dpe(t)}function dpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d8=function(){return!!t})()}function wp(t){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wp(t)}function hpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AA(t,e)}function AA(t,e){return AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AA(t,e)}function Yr(t,e,n){return e=h8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h8(t){var e=mpe(t,"string");return kl(e)=="symbol"?e:e+""}function mpe(t,e){if(kl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var id=function(t){function e(){var n;lpe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=cpe(this,e,[].concat(i)),Yr(n,"state",{isAnimationFinished:!0,totalLength:0}),Yr(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),Yr(n,"getStrokeDasharray",function(s,o,c){var u=c.reduce(function(T,_){return T+_});if(!u)return n.generateSimpleStrokeDasharray(o,s);for(var d=Math.floor(s/u),h=s%u,p=o-s,y=[],v=0,x=0;v<c.length;x+=c[v],++v)if(x+c[v]>h){y=[].concat(Wo(c.slice(0,v)),[h-x]);break}var b=y.length%2===0?[0,p]:[p];return[].concat(Wo(e.repeat(c,d)),Wo(y),b).map(function(T){return"".concat(T,"px")}).join(", ")}),Yr(n,"id",Xf("recharts-line-")),Yr(n,"pathRef",function(s){n.mainCurve=s}),Yr(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Yr(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return hpe(e,t),upe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=Pr(d,nd);if(!h)return null;var p=function(x,b){return{x:x.x,y:x.y,value:x.value,errorVal:dr(x.payload,b)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement($t,y,h.map(function(v){return Q.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,u=o.points,d=o.dataKey,h=We(this.props,!1),p=We(c,!0),y=u.map(function(x,b){var T=sr(sr(sr({key:"dot-".concat(b),r:3},h),p),{},{index:b,cx:x.x,cy:x.y,value:x.value,dataKey:d,payload:x.payload,points:u});return e.renderDotItem(c,T)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Q.createElement($t,Mc({className:"recharts-line-dots",key:"dots"},v),y)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,c=o.type,u=o.layout,d=o.connectNulls;o.ref;var h=Ij(o,tpe),p=sr(sr(sr({},We(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:c,layout:u,connectNulls:d});return Q.createElement(tA,Mc({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,c=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,h=s.animationDuration,p=s.animationEasing,y=s.animationId,v=s.animateNewValues,x=s.width,b=s.height,T=this.state,_=T.prevPoints,w=T.totalLength;return Q.createElement(ua,{begin:d,duration:h,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var R=O.t;if(_){var C=_.length/o.length,L=o.map(function($,K){var W=Math.floor(K*C);if(_[W]){var Y=_[W],j=Wr(Y.x,$.x),G=Wr(Y.y,$.y);return sr(sr({},$),{},{x:j(R),y:G(R)})}if(v){var q=Wr(x*2,$.x),Z=Wr(b/2,$.y);return sr(sr({},$),{},{x:q(R),y:Z(R)})}return sr(sr({},$),{},{x:$.x,y:$.y})});return a.renderCurveStatically(L,r,i)}var P=Wr(0,w),N=P(R),k;if(c){var M="".concat(c).split(/[,\s]+/gim).map(function($){return parseFloat($)});k=a.getStrokeDasharray(N,w,M)}else k=a.generateSimpleStrokeDasharray(w,N);return a.renderCurveStatically(o,r,i,{strokeDasharray:k})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return o&&s&&s.length&&(!u&&d>0||!bg(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,c=i.className,u=i.xAxis,d=i.yAxis,h=i.top,p=i.left,y=i.width,v=i.height,x=i.isAnimationActive,b=i.id;if(a||!o||!o.length)return null;var T=this.state.isAnimationFinished,_=o.length===1,w=et("recharts-line",c),O=u&&u.allowDataOverflow,R=d&&d.allowDataOverflow,C=O||R,L=Ye(b)?this.id:b,P=(r=We(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},N=P.r,k=N===void 0?3:N,M=P.strokeWidth,$=M===void 0?2:M,K=Dee(s)?s:{},W=K.clipDot,Y=W===void 0?!0:W,j=k*2+$;return Q.createElement($t,{className:w},O||R?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(L)},Q.createElement("rect",{x:O?p:p-y/2,y:R?h:h-v/2,width:O?y:y*2,height:R?v:v*2})),!Y&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(L)},Q.createElement("rect",{x:p-j/2,y:h-j/2,width:y+j,height:v+j}))):null,!_&&this.renderCurve(C,L),this.renderErrorBar(C,L),(_||s)&&this.renderDots(C,Y,L),(!x||T)&&Ka.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Wo(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Wo(s),Wo(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(Q.isValidElement(r))a=Q.cloneElement(r,i);else if(Ge(r))a=r(i);else{var s=i.key,o=Ij(i,npe),c=et("recharts-line-dot",typeof r!="boolean"?r.className:"");a=Q.createElement(Uw,Mc({key:s},o,{className:c}))}return a}}])}(F.PureComponent);Yr(id,"displayName","Line");Yr(id,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!tu.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Yr(id,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,h=c.map(function(p,y){var v=dr(p,s);return d==="horizontal"?{x:Yk({axis:n,ticks:i,bandSize:o,entry:p,index:y}),y:Ye(v)?null:r.scale(v),value:v,payload:p}:{x:Ye(v)?null:n.scale(v),y:Yk({axis:r,ticks:a,bandSize:o,entry:p,index:y}),value:v,payload:p}});return sr({points:h,layout:d},u)});function jl(t){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(t)}function ppe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g8(r.key),r)}}function ype(t,e,n){return e&&gpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vpe(t,e,n){return e=_p(e),bpe(t,m8()?Reflect.construct(e,n||[],_p(t).constructor):e.apply(t,n))}function bpe(t,e){if(e&&(jl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xpe(t)}function xpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m8=function(){return!!t})()}function _p(t){return _p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_p(t)}function Spe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wA(t,e)}function wA(t,e){return wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wA(t,e)}function p8(t,e,n){return e=g8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g8(t){var e=Epe(t,"string");return jl(e)=="symbol"?e:e+""}function Epe(t,e){if(jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _A(){return _A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_A.apply(this,arguments)}function Tpe(t){var e=t.xAxisId,n=Gw(),r=Vw(),i=J5(e);return i==null?null:Q.createElement(au,_A({},i,{className:et("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Zi(s,!0)}}))}var Cg=function(t){function e(){return ppe(this,e),vpe(this,e,arguments)}return Spe(e,t),ype(e,[{key:"render",value:function(){return Q.createElement(Tpe,this.props)}}])}(Q.Component);p8(Cg,"displayName","XAxis");p8(Cg,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ul(t){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(t)}function Ape(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b8(r.key),r)}}function _pe(t,e,n){return e&&wpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rpe(t,e,n){return e=Rp(e),Ope(t,y8()?Reflect.construct(e,n||[],Rp(t).constructor):e.apply(t,n))}function Ope(t,e){if(e&&(Ul(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cpe(t)}function Cpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y8=function(){return!!t})()}function Rp(t){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rp(t)}function Lpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RA(t,e)}function RA(t,e){return RA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RA(t,e)}function v8(t,e,n){return e=b8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b8(t){var e=Dpe(t,"string");return Ul(e)=="symbol"?e:e+""}function Dpe(t,e){if(Ul(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ul(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function OA(){return OA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OA.apply(this,arguments)}var Ipe=function(e){var n=e.yAxisId,r=Gw(),i=Vw(),a=e8(n);return a==null?null:Q.createElement(au,OA({},a,{className:et("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Zi(o,!0)}}))},Lg=function(t){function e(){return Ape(this,e),Rpe(this,e,arguments)}return Lpe(e,t),_pe(e,[{key:"render",value:function(){return Q.createElement(Ipe,this.props)}}])}(Q.Component);v8(Lg,"displayName","YAxis");v8(Lg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Mj(t){return kpe(t)||Mpe(t)||Npe(t)||Ppe()}function Ppe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Npe(t,e){if(t){if(typeof t=="string")return CA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CA(t,e)}}function Mpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kpe(t){if(Array.isArray(t))return CA(t)}function CA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var LA=function(e,n,r,i,a){var s=Pr(e,Hw),o=Pr(e,_g),c=[].concat(Mj(s),Mj(o)),u=Pr(e,Og),d="".concat(i,"Id"),h=i[0],p=n;if(c.length&&(p=c.reduce(function(x,b){if(b.props[d]===r&&Ti(b.props,"extendDomain")&&ve(b.props[h])){var T=b.props[h];return[Math.min(x[0],T),Math.max(x[1],T)]}return x},p)),u.length){var y="".concat(h,"1"),v="".concat(h,"2");p=u.reduce(function(x,b){if(b.props[d]===r&&Ti(b.props,"extendDomain")&&ve(b.props[y])&&ve(b.props[v])){var T=b.props[y],_=b.props[v];return[Math.min(x[0],T,_),Math.max(x[1],T,_)]}return x},p)}return a&&a.length&&(p=a.reduce(function(x,b){return ve(b)?[Math.min(x[0],b),Math.max(x[1],b)]:x},p)),p},yE={exports:{}},kj;function jpe(){return kj||(kj=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,h||c,p),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],y]:c._events[v].push(y):(c._events[v]=y,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,y=h.length,v=new Array(y);p<y;p++)v[p]=h[p].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,p,y,v){var x=n?n+u:u;if(!this._events[x])return!1;var b=this._events[x],T=arguments.length,_,w;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),T){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,p),!0;case 5:return b.fn.call(b.context,d,h,p,y),!0;case 6:return b.fn.call(b.context,d,h,p,y,v),!0}for(w=1,_=new Array(T-1);w<T;w++)_[w-1]=arguments[w];b.fn.apply(b.context,_)}else{var O=b.length,R;for(w=0;w<O;w++)switch(b[w].once&&this.removeListener(u,b[w].fn,void 0,!0),T){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,d);break;case 3:b[w].fn.call(b[w].context,d,h);break;case 4:b[w].fn.call(b[w].context,d,h,p);break;default:if(!_)for(R=1,_=new Array(T-1);R<T;R++)_[R-1]=arguments[R];b[w].fn.apply(b[w].context,_)}}return!0},o.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,p){var y=n?n+u:u;if(!this._events[y])return this;if(!d)return s(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&s(this,y);else{for(var x=0,b=[],T=v.length;x<T;x++)(v[x].fn!==d||p&&!v[x].once||h&&v[x].context!==h)&&b.push(v[x]);b.length?this._events[y]=b.length===1?b[0]:b:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(yE)),yE.exports}var Upe=jpe();const Bpe=vt(Upe);var vE=new Bpe,bE="recharts.syncMouseEvents";function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function Fpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x8(r.key),r)}}function Gpe(t,e,n){return e&&$pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xE(t,e,n){return e=x8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x8(t){var e=Vpe(t,"string");return Cf(e)=="symbol"?e:e+""}function Vpe(t,e){if(Cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qpe=function(){function t(){Fpe(this,t),xE(this,"activeIndex",0),xE(this,"coordinateList",[]),xE(this,"layout","horizontal")}return Gpe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,p=n.mouseHandlerCallback,y=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+c+u,p=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:h,pageY:p})}}}])}();function Hpe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&ve(r)&&ve(i))return!0}return!1}function zpe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function S8(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=wn(e,n,r,i),o=wn(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function Kpe(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,p=wn(o,c,u,h),y=wn(o,c,d,h);r=p.x,i=p.y,a=y.x,s=y.y}else return S8(e);return[{x:r,y:i},{x:a,y:s}]}function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function jj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jj(Object(n),!0).forEach(function(r){Ype(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ype(t,e,n){return e=Wpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wpe(t){var e=Xpe(t,"string");return Lf(e)=="symbol"?e:e+""}function Xpe(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qpe(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,p=t.chartName,y=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!y||!a||!s||p!=="ScatterChart"&&i!=="axis")return null;var v,x=tA;if(p==="ScatterChart")v=s,x=Yfe;else if(p==="BarChart")v=zpe(h,s,c,d),x=jw;else if(h==="radial"){var b=S8(s),T=b.cx,_=b.cy,w=b.radius,O=b.startAngle,R=b.endAngle;v={cx:T,cy:_,startAngle:O,endAngle:R,innerRadius:w,outerRadius:w},x=C5}else v={points:Kpe(h,s,c)},x=tA;var C=jh(jh(jh(jh({stroke:"#ccc",pointerEvents:"none"},c),v),We(y,!1)),{},{payload:o,payloadIndex:u,className:et("recharts-tooltip-cursor",y.className)});return F.isValidElement(y)?F.cloneElement(y,C):F.createElement(x,C)}var Zpe=["item"],Jpe=["children","className","width","height","style","compact","title","desc"];function Bl(t){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(t)}function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ll.apply(this,arguments)}function Uj(t,e){return nge(t)||tge(t,e)||T8(t,e)||ege()}function ege(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function nge(t){if(Array.isArray(t))return t}function Bj(t,e){if(t==null)return{};var n=rge(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ige(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function age(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A8(r.key),r)}}function sge(t,e,n){return e&&age(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oge(t,e,n){return e=Op(e),lge(t,E8()?Reflect.construct(e,n||[],Op(t).constructor):e.apply(t,n))}function lge(t,e){if(e&&(Bl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uge(t)}function uge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E8=function(){return!!t})()}function Op(t){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Op(t)}function cge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DA(t,e)}function DA(t,e){return DA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DA(t,e)}function Fl(t){return hge(t)||dge(t)||T8(t)||fge()}function fge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T8(t,e){if(t){if(typeof t=="string")return IA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IA(t,e)}}function dge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hge(t){if(Array.isArray(t))return IA(t)}function IA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fj(Object(n),!0).forEach(function(r){De(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function De(t,e,n){return e=A8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A8(t){var e=mge(t,"string");return Bl(e)=="symbol"?e:e+""}function mge(t,e){if(Bl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pge={xAxis:["bottom","top"],yAxis:["left","right"]},gge={width:"100%",height:"100%"},w8={x:0,y:0};function Uh(t){return t}var yge=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},vge=function(e,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return le(le(le({},i),wn(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var c=a.coordinate,u=i.angle;return le(le(le({},i),wn(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return w8},Dg=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(Fl(o),Fl(u)):o},[]);return s.length>0?s:e&&e.length&&ve(i)&&ve(a)?e.slice(i,a+1):[]};function _8(t){return t==="number"?[0,"auto"]:void 0}var PA=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=Dg(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var y=h===void 0?o:h;p=Pm(y,s.dataKey,i)}else p=h&&h[r]||o[r];return p?[].concat(Fl(c),[_5(u,p)]):c},[])},$j=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=yge(a,r),o=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=Dle(s,o,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,p=PA(e,n,d,h),y=vge(r,o,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:p,activeCoordinate:y}}return null},bge=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,p=e.stackOffset,y=T5(d,a);return r.reduce(function(v,x){var b,T=x.type.defaultProps!==void 0?le(le({},x.type.defaultProps),x.props):x.props,_=T.type,w=T.dataKey,O=T.allowDataOverflow,R=T.allowDuplicatedCategory,C=T.scale,L=T.ticks,P=T.includeHidden,N=T[s];if(v[N])return v;var k=Dg(e.data,{graphicalItems:i.filter(function(H){var te,ce=s in H.props?H.props[s]:(te=H.type.defaultProps)===null||te===void 0?void 0:te[s];return ce===N}),dataStartIndex:c,dataEndIndex:u}),M=k.length,$,K,W;Hpe(T.domain,O,_)&&($=XT(T.domain,null,O),y&&(_==="number"||C!=="auto")&&(W=Pc(k,w,"category")));var Y=_8(_);if(!$||$.length===0){var j,G=(j=T.domain)!==null&&j!==void 0?j:Y;if(w){if($=Pc(k,w,_),_==="category"&&y){var q=See($);R&&q?(K=$,$=pp(0,M)):R||($=Zk(G,$,x).reduce(function(H,te){return H.indexOf(te)>=0?H:[].concat(Fl(H),[te])},[]))}else if(_==="category")R?$=$.filter(function(H){return H!==""&&!Ye(H)}):$=Zk(G,$,x).reduce(function(H,te){return H.indexOf(te)>=0||te===""||Ye(te)?H:[].concat(Fl(H),[te])},[]);else if(_==="number"){var Z=kle(k,i.filter(function(H){var te,ce,ye=s in H.props?H.props[s]:(te=H.type.defaultProps)===null||te===void 0?void 0:te[s],ge="hide"in H.props?H.props.hide:(ce=H.type.defaultProps)===null||ce===void 0?void 0:ce.hide;return ye===N&&(P||!ge)}),w,a,d);Z&&($=Z)}y&&(_==="number"||C!=="auto")&&(W=Pc(k,w,"category"))}else y?$=pp(0,M):o&&o[N]&&o[N].hasStack&&_==="number"?$=p==="expand"?[0,1]:w5(o[N].stackGroups,c,u):$=E5(k,i.filter(function(H){var te=s in H.props?H.props[s]:H.type.defaultProps[s],ce="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return te===N&&(P||!ce)}),_,d,!0);if(_==="number")$=LA(h,$,N,a,L),G&&($=XT(G,$,O));else if(_==="category"&&G){var B=G,V=$.every(function(H){return B.indexOf(H)>=0});V&&($=B)}}return le(le({},v),{},De({},N,le(le({},T),{},{axisType:a,domain:$,categoricalDomain:W,duplicateDomain:K,originalDomain:(b=T.domain)!==null&&b!==void 0?b:Y,isCategorical:y,layout:d})))},{})},xge=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,p=Dg(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),y=p.length,v=T5(d,a),x=-1;return r.reduce(function(b,T){var _=T.type.defaultProps!==void 0?le(le({},T.type.defaultProps),T.props):T.props,w=_[s],O=_8("number");if(!b[w]){x++;var R;return v?R=pp(0,y):o&&o[w]&&o[w].hasStack?(R=w5(o[w].stackGroups,c,u),R=LA(h,R,w,a)):(R=XT(O,E5(p,r.filter(function(C){var L,P,N=s in C.props?C.props[s]:(L=C.type.defaultProps)===null||L===void 0?void 0:L[s],k="hide"in C.props?C.props.hide:(P=C.type.defaultProps)===null||P===void 0?void 0:P.hide;return N===w&&!k}),"number",d),i.defaultProps.allowDataOverflow),R=LA(h,R,w,a)),le(le({},b),{},De({},w,le(le({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ir(pge,"".concat(a,".").concat(x%2),null),domain:R,originalDomain:O,isCategorical:v,layout:d})))}return b},{})},Sge=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,h="".concat(i,"Id"),p=Pr(d,a),y={};return p&&p.length?y=bge(e,{axes:p,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(y=xge(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),y},Ege=function(e){var n=qa(e),r=Zi(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:cw(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:sp(n,r)}},Gj=function(e){var n=e.children,r=e.defaultShowTooltip,i=lr(n,Ll),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Tge=function(e){return!e||!e.length?!1:e.some(function(n){var r=ea(n&&n.type);return r&&r.indexOf("Bar")>=0})},Vj=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Age=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,c=o===void 0?{}:o,u=r.width,d=r.height,h=r.children,p=r.margin||{},y=lr(h,Ll),v=lr(h,fl),x=Object.keys(c).reduce(function(R,C){var L=c[C],P=L.orientation;return!L.mirror&&!L.hide?le(le({},R),{},De({},P,R[P]+L.width)):R},{left:p.left||0,right:p.right||0}),b=Object.keys(s).reduce(function(R,C){var L=s[C],P=L.orientation;return!L.mirror&&!L.hide?le(le({},R),{},De({},P,Ir(R,"".concat(P))+L.height)):R},{top:p.top||0,bottom:p.bottom||0}),T=le(le({},b),x),_=T.bottom;y&&(T.bottom+=y.props.height||Ll.defaultProps.height),v&&n&&(T=Nle(T,i,r,n));var w=u-T.left-T.right,O=d-T.top-T.bottom;return le(le({brushBottom:_},T),{},{width:Math.max(w,0),height:Math.max(O,0)})},wge=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},_ge=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,p=function(T,_){var w=_.graphicalItems,O=_.stackGroups,R=_.offset,C=_.updateId,L=_.dataStartIndex,P=_.dataEndIndex,N=T.barSize,k=T.layout,M=T.barGap,$=T.barCategoryGap,K=T.maxBarSize,W=Vj(k),Y=W.numericAxisName,j=W.cateAxisName,G=Tge(w),q=[];return w.forEach(function(Z,B){var V=Dg(T.data,{graphicalItems:[Z],dataStartIndex:L,dataEndIndex:P}),H=Z.type.defaultProps!==void 0?le(le({},Z.type.defaultProps),Z.props):Z.props,te=H.dataKey,ce=H.maxBarSize,ye=H["".concat(Y,"Id")],ge=H["".concat(j,"Id")],Me={},Re=c.reduce(function(Xt,vn){var Ri=_["".concat(vn.axisType,"Map")],Oi=H["".concat(vn.axisType,"Id")];Ri&&Ri[Oi]||vn.axisType==="zAxis"||Zs();var ss=Ri[Oi];return le(le({},Xt),{},De(De({},vn.axisType,ss),"".concat(vn.axisType,"Ticks"),Zi(ss)))},Me),pe=Re[j],Ae=Re["".concat(j,"Ticks")],Oe=O&&O[ye]&&O[ye].hasStack&&Yle(Z,O[ye].stackGroups),me=ea(Z.type).indexOf("Bar")>=0,rt=sp(pe,Ae),Be=[],It=G&&Ile({barSize:N,stackGroups:O,totalSize:wge(Re,j)});if(me){var _e,je,Rt=Ye(ce)?K:ce,yn=(_e=(je=sp(pe,Ae,!0))!==null&&je!==void 0?je:Rt)!==null&&_e!==void 0?_e:0;Be=Ple({barGap:M,barCategoryGap:$,bandSize:yn!==rt?yn:rt,sizeList:It[ge],maxBarSize:Rt}),yn!==rt&&(Be=Be.map(function(Xt){return le(le({},Xt),{},{position:le(le({},Xt.position),{},{offset:Xt.position.offset-yn/2})})}))}var Wt=Z&&Z.type&&Z.type.getComposedData;Wt&&q.push({props:le(le({},Wt(le(le({},Re),{},{displayedData:V,props:T,dataKey:te,item:Z,bandSize:rt,barPosition:Be,offset:R,stackedData:Oe,layout:k,dataStartIndex:L,dataEndIndex:P}))),{},De(De(De({key:Z.key||"item-".concat(B)},Y,Re[Y]),j,Re[j]),"animationId",C)),childIndex:Nee(Z,T.children),item:Z})}),q},y=function(T,_){var w=T.props,O=T.dataStartIndex,R=T.dataEndIndex,C=T.updateId;if(!dP({props:w}))return null;var L=w.children,P=w.layout,N=w.stackOffset,k=w.data,M=w.reverseStackOrder,$=Vj(P),K=$.numericAxisName,W=$.cateAxisName,Y=Pr(L,r),j=Hle(k,Y,"".concat(K,"Id"),"".concat(W,"Id"),N,M),G=c.reduce(function(H,te){var ce="".concat(te.axisType,"Map");return le(le({},H),{},De({},ce,Sge(w,le(le({},te),{},{graphicalItems:Y,stackGroups:te.axisType===K&&j,dataStartIndex:O,dataEndIndex:R}))))},{}),q=Age(le(le({},G),{},{props:w,graphicalItems:Y}),_==null?void 0:_.legendBBox);Object.keys(G).forEach(function(H){G[H]=d(w,G[H],q,H.replace("Map",""),n)});var Z=G["".concat(W,"Map")],B=Ege(Z),V=p(w,le(le({},G),{},{dataStartIndex:O,dataEndIndex:R,updateId:C,graphicalItems:Y,stackGroups:j,offset:q}));return le(le({formattedGraphicalItems:V,graphicalItems:Y,offset:q,stackGroups:j},B),G)},v=function(b){function T(_){var w,O,R;return ige(this,T),R=oge(this,T,[_]),De(R,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),De(R,"accessibilityManager",new qpe),De(R,"handleLegendBBoxUpdate",function(C){if(C){var L=R.state,P=L.dataStartIndex,N=L.dataEndIndex,k=L.updateId;R.setState(le({legendBBox:C},y({props:R.props,dataStartIndex:P,dataEndIndex:N,updateId:k},le(le({},R.state),{},{legendBBox:C}))))}}),De(R,"handleReceiveSyncEvent",function(C,L,P){if(R.props.syncId===C){if(P===R.eventEmitterSymbol&&typeof R.props.syncMethod!="function")return;R.applySyncEvent(L)}}),De(R,"handleBrushChange",function(C){var L=C.startIndex,P=C.endIndex;if(L!==R.state.dataStartIndex||P!==R.state.dataEndIndex){var N=R.state.updateId;R.setState(function(){return le({dataStartIndex:L,dataEndIndex:P},y({props:R.props,dataStartIndex:L,dataEndIndex:P,updateId:N},R.state))}),R.triggerSyncEvent({dataStartIndex:L,dataEndIndex:P})}}),De(R,"handleMouseEnter",function(C){var L=R.getMouseInfo(C);if(L){var P=le(le({},L),{},{isTooltipActive:!0});R.setState(P),R.triggerSyncEvent(P);var N=R.props.onMouseEnter;Ge(N)&&N(P,C)}}),De(R,"triggeredAfterMouseMove",function(C){var L=R.getMouseInfo(C),P=L?le(le({},L),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(P),R.triggerSyncEvent(P);var N=R.props.onMouseMove;Ge(N)&&N(P,C)}),De(R,"handleItemMouseEnter",function(C){R.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),De(R,"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),De(R,"handleMouseMove",function(C){C.persist(),R.throttleTriggeredAfterMouseMove(C)}),De(R,"handleMouseLeave",function(C){R.throttleTriggeredAfterMouseMove.cancel();var L={isTooltipActive:!1};R.setState(L),R.triggerSyncEvent(L);var P=R.props.onMouseLeave;Ge(P)&&P(L,C)}),De(R,"handleOuterEvent",function(C){var L=Pee(C),P=Ir(R.props,"".concat(L));if(L&&Ge(P)){var N,k;/.*touch.*/i.test(L)?k=R.getMouseInfo(C.changedTouches[0]):k=R.getMouseInfo(C),P((N=k)!==null&&N!==void 0?N:{},C)}}),De(R,"handleClick",function(C){var L=R.getMouseInfo(C);if(L){var P=le(le({},L),{},{isTooltipActive:!0});R.setState(P),R.triggerSyncEvent(P);var N=R.props.onClick;Ge(N)&&N(P,C)}}),De(R,"handleMouseDown",function(C){var L=R.props.onMouseDown;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"handleMouseUp",function(C){var L=R.props.onMouseUp;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),De(R,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.handleMouseDown(C.changedTouches[0])}),De(R,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.handleMouseUp(C.changedTouches[0])}),De(R,"handleDoubleClick",function(C){var L=R.props.onDoubleClick;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"handleContextMenu",function(C){var L=R.props.onContextMenu;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"triggerSyncEvent",function(C){R.props.syncId!==void 0&&vE.emit(bE,R.props.syncId,C,R.eventEmitterSymbol)}),De(R,"applySyncEvent",function(C){var L=R.props,P=L.layout,N=L.syncMethod,k=R.state.updateId,M=C.dataStartIndex,$=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)R.setState(le({dataStartIndex:M,dataEndIndex:$},y({props:R.props,dataStartIndex:M,dataEndIndex:$,updateId:k},R.state)));else if(C.activeTooltipIndex!==void 0){var K=C.chartX,W=C.chartY,Y=C.activeTooltipIndex,j=R.state,G=j.offset,q=j.tooltipTicks;if(!G)return;if(typeof N=="function")Y=N(q,C);else if(N==="value"){Y=-1;for(var Z=0;Z<q.length;Z++)if(q[Z].value===C.activeLabel){Y=Z;break}}var B=le(le({},G),{},{x:G.left,y:G.top}),V=Math.min(K,B.x+B.width),H=Math.min(W,B.y+B.height),te=q[Y]&&q[Y].value,ce=PA(R.state,R.props.data,Y),ye=q[Y]?{x:P==="horizontal"?q[Y].coordinate:V,y:P==="horizontal"?H:q[Y].coordinate}:w8;R.setState(le(le({},C),{},{activeLabel:te,activeCoordinate:ye,activePayload:ce,activeTooltipIndex:Y}))}else R.setState(C)}),De(R,"renderCursor",function(C){var L,P=R.state,N=P.isTooltipActive,k=P.activeCoordinate,M=P.activePayload,$=P.offset,K=P.activeTooltipIndex,W=P.tooltipAxisBandSize,Y=R.getTooltipEventType(),j=(L=C.props.active)!==null&&L!==void 0?L:N,G=R.props.layout,q=C.key||"_recharts-cursor";return Q.createElement(Qpe,{key:q,activeCoordinate:k,activePayload:M,activeTooltipIndex:K,chartName:n,element:C,isActive:j,layout:G,offset:$,tooltipAxisBandSize:W,tooltipEventType:Y})}),De(R,"renderPolarAxis",function(C,L,P){var N=Ir(C,"type.axisType"),k=Ir(R.state,"".concat(N,"Map")),M=C.type.defaultProps,$=M!==void 0?le(le({},M),C.props):C.props,K=k&&k[$["".concat(N,"Id")]];return F.cloneElement(C,le(le({},K),{},{className:et(N,K.className),key:C.key||"".concat(L,"-").concat(P),ticks:Zi(K,!0)}))}),De(R,"renderPolarGrid",function(C){var L=C.props,P=L.radialLines,N=L.polarAngles,k=L.polarRadius,M=R.state,$=M.radiusAxisMap,K=M.angleAxisMap,W=qa($),Y=qa(K),j=Y.cx,G=Y.cy,q=Y.innerRadius,Z=Y.outerRadius;return F.cloneElement(C,{polarAngles:Array.isArray(N)?N:Zi(Y,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(k)?k:Zi(W,!0).map(function(B){return B.coordinate}),cx:j,cy:G,innerRadius:q,outerRadius:Z,key:C.key||"polar-grid",radialLines:P})}),De(R,"renderLegend",function(){var C=R.state.formattedGraphicalItems,L=R.props,P=L.children,N=L.width,k=L.height,M=R.props.margin||{},$=N-(M.left||0)-(M.right||0),K=x5({children:P,formattedGraphicalItems:C,legendWidth:$,legendContent:u});if(!K)return null;var W=K.item,Y=Bj(K,Zpe);return F.cloneElement(W,le(le({},Y),{},{chartWidth:N,chartHeight:k,margin:M,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),De(R,"renderTooltip",function(){var C,L=R.props,P=L.children,N=L.accessibilityLayer,k=lr(P,mi);if(!k)return null;var M=R.state,$=M.isTooltipActive,K=M.activeCoordinate,W=M.activePayload,Y=M.activeLabel,j=M.offset,G=(C=k.props.active)!==null&&C!==void 0?C:$;return F.cloneElement(k,{viewBox:le(le({},j),{},{x:j.left,y:j.top}),active:G,label:Y,payload:G?W:[],coordinate:K,accessibilityLayer:N})}),De(R,"renderBrush",function(C){var L=R.props,P=L.margin,N=L.data,k=R.state,M=k.offset,$=k.dataStartIndex,K=k.dataEndIndex,W=k.updateId;return F.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Ph(R.handleBrushChange,C.props.onChange),data:N,x:ve(C.props.x)?C.props.x:M.left,y:ve(C.props.y)?C.props.y:M.top+M.height+M.brushBottom-(P.bottom||0),width:ve(C.props.width)?C.props.width:M.width,startIndex:$,endIndex:K,updateId:"brush-".concat(W)})}),De(R,"renderReferenceElement",function(C,L,P){if(!C)return null;var N=R,k=N.clipPathId,M=R.state,$=M.xAxisMap,K=M.yAxisMap,W=M.offset,Y=C.type.defaultProps||{},j=C.props,G=j.xAxisId,q=G===void 0?Y.xAxisId:G,Z=j.yAxisId,B=Z===void 0?Y.yAxisId:Z;return F.cloneElement(C,{key:C.key||"".concat(L,"-").concat(P),xAxis:$[q],yAxis:K[B],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:k})}),De(R,"renderActivePoints",function(C){var L=C.item,P=C.activePoint,N=C.basePoint,k=C.childIndex,M=C.isRange,$=[],K=L.props.key,W=L.item.type.defaultProps!==void 0?le(le({},L.item.type.defaultProps),L.item.props):L.item.props,Y=W.activeDot,j=W.dataKey,G=le(le({index:k,dataKey:j,cx:P.x,cy:P.y,r:4,fill:kw(L.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},We(Y,!1)),Nm(Y));return $.push(T.renderActiveDot(Y,G,"".concat(K,"-activePoint-").concat(k))),N?$.push(T.renderActiveDot(Y,le(le({},G),{},{cx:N.x,cy:N.y}),"".concat(K,"-basePoint-").concat(k))):M&&$.push(null),$}),De(R,"renderGraphicChild",function(C,L,P){var N=R.filterFormatItem(C,L,P);if(!N)return null;var k=R.getTooltipEventType(),M=R.state,$=M.isTooltipActive,K=M.tooltipAxis,W=M.activeTooltipIndex,Y=M.activeLabel,j=R.props.children,G=lr(j,mi),q=N.props,Z=q.points,B=q.isRange,V=q.baseLine,H=N.item.type.defaultProps!==void 0?le(le({},N.item.type.defaultProps),N.item.props):N.item.props,te=H.activeDot,ce=H.hide,ye=H.activeBar,ge=H.activeShape,Me=!!(!ce&&$&&G&&(te||ye||ge)),Re={};k!=="axis"&&G&&G.props.trigger==="click"?Re={onClick:Ph(R.handleItemMouseEnter,C.props.onClick)}:k!=="axis"&&(Re={onMouseLeave:Ph(R.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Ph(R.handleItemMouseEnter,C.props.onMouseEnter)});var pe=F.cloneElement(C,le(le({},N.props),Re));function Ae(vn){return typeof K.dataKey=="function"?K.dataKey(vn.payload):null}if(Me)if(W>=0){var Oe,me;if(K.dataKey&&!K.allowDuplicatedCategory){var rt=typeof K.dataKey=="function"?Ae:"payload.".concat(K.dataKey.toString());Oe=Pm(Z,rt,Y),me=B&&V&&Pm(V,rt,Y)}else Oe=Z==null?void 0:Z[W],me=B&&V&&V[W];if(ge||ye){var Be=C.props.activeIndex!==void 0?C.props.activeIndex:W;return[F.cloneElement(C,le(le(le({},N.props),Re),{},{activeIndex:Be})),null,null]}if(!Ye(Oe))return[pe].concat(Fl(R.renderActivePoints({item:N,activePoint:Oe,basePoint:me,childIndex:W,isRange:B})))}else{var It,_e=(It=R.getItemByXY(R.state.activeCoordinate))!==null&&It!==void 0?It:{graphicalItem:pe},je=_e.graphicalItem,Rt=je.item,yn=Rt===void 0?C:Rt,Wt=je.childIndex,Xt=le(le(le({},N.props),Re),{},{activeIndex:Wt});return[F.cloneElement(yn,Xt),null,null]}return B?[pe,null,null]:[pe,null]}),De(R,"renderCustomized",function(C,L,P){return F.cloneElement(C,le(le({key:"recharts-customized-".concat(P)},R.props),R.state))}),De(R,"renderMap",{CartesianGrid:{handler:Uh,once:!0},ReferenceArea:{handler:R.renderReferenceElement},ReferenceLine:{handler:Uh},ReferenceDot:{handler:R.renderReferenceElement},XAxis:{handler:Uh},YAxis:{handler:Uh},Brush:{handler:R.renderBrush,once:!0},Bar:{handler:R.renderGraphicChild},Line:{handler:R.renderGraphicChild},Area:{handler:R.renderGraphicChild},Radar:{handler:R.renderGraphicChild},RadialBar:{handler:R.renderGraphicChild},Scatter:{handler:R.renderGraphicChild},Pie:{handler:R.renderGraphicChild},Funnel:{handler:R.renderGraphicChild},Tooltip:{handler:R.renderCursor,once:!0},PolarGrid:{handler:R.renderPolarGrid,once:!0},PolarAngleAxis:{handler:R.renderPolarAxis},PolarRadiusAxis:{handler:R.renderPolarAxis},Customized:{handler:R.renderCustomized}}),R.clipPathId="".concat((w=_.id)!==null&&w!==void 0?w:Xf("recharts"),"-clip"),R.throttleTriggeredAfterMouseMove=b6(R.triggeredAfterMouseMove,(O=_.throttleDelay)!==null&&O!==void 0?O:1e3/60),R.state={},R}return cge(T,b),sge(T,[{key:"componentDidMount",value:function(){var w,O;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,O=w.children,R=w.data,C=w.height,L=w.layout,P=lr(O,mi);if(P){var N=P.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,M=PA(this.state,R,N,k),$=this.state.tooltipTicks[N].coordinate,K=(this.state.offset.top+C)/2,W=L==="horizontal",Y=W?{x:$,y:K}:{y:$,x:K},j=this.state.formattedGraphicalItems.find(function(q){var Z=q.item;return Z.type.name==="Scatter"});j&&(Y=le(le({},Y),j.props.points[N].tooltipPosition),M=j.props.points[N].tooltipPayload);var G={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:k,activePayload:M,activeCoordinate:Y};this.setState(G),this.renderCursor(P),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,O){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==O.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var R,C;this.accessibilityManager.setDetails({offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(w){vT([lr(w.children,mi)],[lr(this.props.children,mi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=lr(this.props.children,mi);if(w&&typeof w.props.shared=="boolean"){var O=w.props.shared?"axis":"item";return o.indexOf(O)>=0?O:a}return a}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var O=this.container,R=O.getBoundingClientRect(),C=Sie(R),L={chartX:Math.round(w.pageX-C.left),chartY:Math.round(w.pageY-C.top)},P=R.width/O.offsetWidth||1,N=this.inRange(L.chartX,L.chartY,P);if(!N)return null;var k=this.state,M=k.xAxisMap,$=k.yAxisMap,K=this.getTooltipEventType(),W=$j(this.state,this.props.data,this.props.layout,N);if(K!=="axis"&&M&&$){var Y=qa(M).scale,j=qa($).scale,G=Y&&Y.invert?Y.invert(L.chartX):null,q=j&&j.invert?j.invert(L.chartY):null;return le(le({},L),{},{xValue:G,yValue:q},W)}return W?le(le({},L),W):null}},{key:"inRange",value:function(w,O){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,L=w/R,P=O/R;if(C==="horizontal"||C==="vertical"){var N=this.state.offset,k=L>=N.left&&L<=N.left+N.width&&P>=N.top&&P<=N.top+N.height;return k?{x:L,y:P}:null}var M=this.state,$=M.angleAxisMap,K=M.radiusAxisMap;if($&&K){var W=qa($);return t2({x:L,y:P},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,O=this.getTooltipEventType(),R=lr(w,mi),C={};R&&O==="axis"&&(R.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var L=Nm(this.props,this.handleOuterEvent);return le(le({},L),C)}},{key:"addListener",value:function(){vE.on(bE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vE.removeListener(bE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,O,R){for(var C=this.state.formattedGraphicalItems,L=0,P=C.length;L<P;L++){var N=C[L];if(N.item===w||N.props.key===w.key||O===ea(N.item.type)&&R===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,O=this.state.offset,R=O.left,C=O.top,L=O.height,P=O.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:w},Q.createElement("rect",{x:R,y:C,height:L,width:P})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(O,R){var C=Uj(R,2),L=C[0],P=C[1];return le(le({},O),{},De({},L,P.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(O,R){var C=Uj(R,2),L=C[0],P=C[1];return le(le({},O),{},De({},L,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var O;return(O=this.state.xAxisMap)===null||O===void 0||(O=O[w])===null||O===void 0?void 0:O.scale}},{key:"getYScaleByAxisId",value:function(w){var O;return(O=this.state.yAxisMap)===null||O===void 0||(O=O[w])===null||O===void 0?void 0:O.scale}},{key:"getItemByXY",value:function(w){var O=this.state,R=O.formattedGraphicalItems,C=O.activeItem;if(R&&R.length)for(var L=0,P=R.length;L<P;L++){var N=R[L],k=N.props,M=N.item,$=M.type.defaultProps!==void 0?le(le({},M.type.defaultProps),M.props):M.props,K=ea(M.type);if(K==="Bar"){var W=(k.data||[]).find(function(q){return Ufe(w,q)});if(W)return{graphicalItem:N,payload:W}}else if(K==="RadialBar"){var Y=(k.data||[]).find(function(q){return t2(w,q)});if(Y)return{graphicalItem:N,payload:Y}}else if(Eg(N,C)||Tg(N,C)||Af(N,C)){var j=Ode({graphicalItem:N,activeTooltipItem:C,itemData:$.data}),G=$.activeIndex===void 0?j:$.activeIndex;return{graphicalItem:le(le({},N),{},{childIndex:G}),payload:Af(N,C)?$.data[j]:N.props.data[j]}}}return null}},{key:"render",value:function(){var w=this;if(!dP(this))return null;var O=this.props,R=O.children,C=O.className,L=O.width,P=O.height,N=O.style,k=O.compact,M=O.title,$=O.desc,K=Bj(O,Jpe),W=We(K,!1);if(k)return Q.createElement(bj,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(xT,ll({},W,{width:L,height:P,title:M,desc:$}),this.renderClipPath(),mP(R,this.renderMap)));if(this.props.accessibilityLayer){var Y,j;W.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,W.role=(j=this.props.role)!==null&&j!==void 0?j:"application",W.onKeyDown=function(q){w.accessibilityManager.keyboardEvent(q)},W.onFocus=function(){w.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return Q.createElement(bj,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",ll({className:et("recharts-wrapper",C),style:le({position:"relative",cursor:"default",width:L,height:P},N)},G,{ref:function(Z){w.container=Z}}),Q.createElement(xT,ll({},W,{width:L,height:P,title:M,desc:$,style:gge}),this.renderClipPath(),mP(R,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(F.Component);De(v,"displayName",n),De(v,"defaultProps",le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),De(v,"getDerivedStateFromProps",function(b,T){var _=b.dataKey,w=b.data,O=b.children,R=b.width,C=b.height,L=b.layout,P=b.stackOffset,N=b.margin,k=T.dataStartIndex,M=T.dataEndIndex;if(T.updateId===void 0){var $=Gj(b);return le(le(le({},$),{},{updateId:0},y(le(le({props:b},$),{},{updateId:0}),T)),{},{prevDataKey:_,prevData:w,prevWidth:R,prevHeight:C,prevLayout:L,prevStackOffset:P,prevMargin:N,prevChildren:O})}if(_!==T.prevDataKey||w!==T.prevData||R!==T.prevWidth||C!==T.prevHeight||L!==T.prevLayout||P!==T.prevStackOffset||!cl(N,T.prevMargin)){var K=Gj(b),W={chartX:T.chartX,chartY:T.chartY,isTooltipActive:T.isTooltipActive},Y=le(le({},$j(T,w,L)),{},{updateId:T.updateId+1}),j=le(le(le({},K),W),Y);return le(le(le({},j),y(le({props:b},j),T)),{},{prevDataKey:_,prevData:w,prevWidth:R,prevHeight:C,prevLayout:L,prevStackOffset:P,prevMargin:N,prevChildren:O})}if(!vT(O,T.prevChildren)){var G,q,Z,B,V=lr(O,Ll),H=V&&(G=(q=V.props)===null||q===void 0?void 0:q.startIndex)!==null&&G!==void 0?G:k,te=V&&(Z=(B=V.props)===null||B===void 0?void 0:B.endIndex)!==null&&Z!==void 0?Z:M,ce=H!==k||te!==M,ye=!Ye(w),ge=ye&&!ce?T.updateId:T.updateId+1;return le(le({updateId:ge},y(le(le({props:b},T),{},{updateId:ge,dataStartIndex:H,dataEndIndex:te}),T)),{},{prevChildren:O,dataStartIndex:H,dataEndIndex:te})}return null}),De(v,"renderActiveDot",function(b,T,_){var w;return F.isValidElement(b)?w=F.cloneElement(b,T):Ge(b)?w=b(T):w=Q.createElement(Uw,T),Q.createElement($t,{className:"recharts-active-dot",key:_},w)});var x=F.forwardRef(function(T,_){return Q.createElement(v,ll({},T,{ref:_}))});return x.displayName=v.displayName,x},Rge=_ge({chartName:"LineChart",GraphicalChild:id,axisComponents:[{axisType:"xAxis",AxisComp:Cg},{axisType:"yAxis",AxisComp:Lg}],formatAxisMap:Ahe});const Bh=(t,e)=>{if(!t||t.length<2)return null;const n=t[0][e],r=t[t.length-1][e];if(n===0)return null;const i=(r-n)/Math.abs(n)*100;return console.log(`Change from ${n} to ${r}: ${i.toFixed(2)}%`),Number(i.toFixed(2))},qj=()=>{const t=rn(),e=pn(),{data:n,timeRange:r,loading:i,error:a}=an(x=>x.dashboard);F.useEffect(()=>{t(IJ(r))},[t,r]);const s=x=>{t(PJ(x))},o={"Total Users":S.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a4 4 0 00-3-3.87M9 20h6M3 20h5v-2a4 4 0 013-3.87M16 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Total Devices":S.jsxs("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[S.jsx("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 21h8"})]}),"Total Content":S.jsx("svg",{className:"w-8 h-8 text-purple-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 19V5a2 2 0 012-2h8a2 2 0 012 2v14M16 7h2a2 2 0 012 2v10a2 2 0 01-2 2h-2"})}),"Total Subscriptions":S.jsx("svg",{className:"w-8 h-8 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},c=(x,b,T,_=!1)=>{const w=T>0?"text-green-500":T<0?"text-red-500":"text-gray-500",O=T>0?"▲":T<0?"▼":"";return S.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 rounded-xl shadow-lg flex-1 min-w-[200px] flex flex-col items-start gap-2 hover:shadow-xl transition-shadow duration-200",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o[x],S.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:x})]}),S.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:_?`$${b}`:b}),T!==void 0&&S.jsxs("p",{className:`text-sm mt-1 ${w}`,children:[O," ",Math.abs(T),"%"," ",S.jsx("span",{className:"text-gray-500",children:"vs last period"})]})]})},u=(x,b,T)=>!x||x.length===0?S.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 rounded-xl shadow-lg col-span-full md:col-span-1 transition-shadow duration-200 hover:shadow-xl",children:[S.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[T," Trend"]}),S.jsx("div",{className:"flex items-center justify-center h-48 text-gray-500",children:"No chart data available for this period."})]}):S.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 rounded-xl shadow-lg col-span-full md:col-span-1 transition-shadow duration-200 hover:shadow-xl",children:[S.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[T," Trend"]}),S.jsx(mie,{width:"100%",height:200,children:S.jsxs(Rge,{data:x,margin:{top:5,right:20,left:10,bottom:5},children:[S.jsx(f8,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),S.jsx(Cg,{dataKey:"date",tickLine:!1}),S.jsx(Lg,{tickLine:!1}),S.jsx(mi,{}),S.jsx(id,{type:"monotone",dataKey:b,stroke:"#8884d8",strokeWidth:2,activeDot:{r:8}})]})})]});if(i)return S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading dashboard data..."})]});if(a)return S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Dashboard"}),S.jsx("p",{children:a.message||"An unexpected error occurred."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]});if(!n)return S.jsx("div",{className:"text-center p-6 text-gray-600",children:"No dashboard data available. Please select a time range."});const{users:d,devices:h,content:p,subscriptions:y,last_updated:v}=n;return S.jsxs("div",{className:"p-6 bg-gray-50 min-h-full",children:[S.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start mb-6 gap-4",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Overview"}),S.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 lg:mt-0",role:"group","aria-label":"Select dashboard time range",children:[S.jsx("button",{onClick:()=>s("week"),className:`px-4 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 ${r==="week"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,"aria-pressed":r==="week",children:"Week"}),S.jsx("button",{onClick:()=>s("month"),className:`px-4 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 ${r==="month"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,"aria-pressed":r==="month",children:"Month"}),S.jsx("button",{onClick:()=>s("year"),className:`px-4 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 ${r==="year"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,"aria-pressed":r==="year",children:"Year"})]})]}),S.jsxs("p",{className:"text-center lg:text-right text-sm text-gray-500 mb-6",children:["Last Updated: ",v||"N/A"]}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c("Total Users",d.total,Bh(d.chart,"count")),c("Total Devices",h.total,Bh(h.chart,"count")),c("Total Content",p.total,Bh(p.chart,"count")),c("Total Subscriptions",y.total,Bh(y.chart,"count"))]}),S.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Trends"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u(d.chart,"count","Users"),u(h.chart,"total","Devices"),u(p.views_chart,"views","Content Views"),u(y.chart,"count","Subscriptions")]}),S.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Popular Content"}),p.popular_content&&p.popular_content.length>0?S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:p.popular_content.map(x=>S.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50 to-gray-50 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 flex flex-col",children:[S.jsx("img",{src:x.coverImg||`https://placehold.co/400x200/cccccc/333333?text=${x.title}`,alt:x.title,className:"w-full h-40 object-cover rounded-t-xl border-b border-blue-100"}),S.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate mb-1",children:x.title}),S.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:x.content}),S.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:x.tags.map((b,T)=>S.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full shadow-sm font-medium",children:["#",b]},T))}),S.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[S.jsx("span",{className:"font-semibold text-blue-600",children:"Views:"})," ",x.views_count||0]}),S.jsx("button",{onClick:()=>e(`/contents/details/${x.id}`),className:"mt-auto px-4 py-2 bg-blue-600 text-white rounded-md shadow hover:bg-blue-700 transition duration-200 text-sm font-semibold w-full","aria-label":`View details for ${x.title}`,children:"View Details →"})]})]},x.id))}):S.jsx("p",{className:"text-gray-600 text-center py-8",children:"No popular content to display for this period."})]})},Oge=async t=>{var e,n;try{return(await Je.post("/contents",t)).data}catch(r){throw console.error("Error creating content:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Cge=async t=>{var e;try{return(await Je.get(`/contents?page=${t}`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},Lge=async t=>{var e;try{return(await Je.get(`/contents/${t}`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},Dge=async(t,e)=>{var n;try{return(await Je.put(`/contents/${t}`,e)).data}catch(r){throw((n=r.response)==null?void 0:n.data)||r.message}},Ige=async t=>{var e;try{return(await Je.delete(`/contents/${t}`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},Pge=t=>async e=>{e({type:gF});try{const n=await Oge(t);return e({type:yF,payload:n}),Promise.resolve(n)}catch(n){return e({type:vF,payload:n}),Promise.reject(n)}},Hj=t=>async e=>{e({type:cF});try{const n=await Cge(t);e({type:fF,payload:n})}catch(n){e({type:dF,payload:n})}},R8=t=>async e=>{e({type:hF});try{const n=await Lge(t);e({type:mF,payload:n})}catch(n){e({type:pF,payload:n})}},Nge=(t,e)=>async n=>{n({type:bF});try{const r=await Dge(t,e);return n({type:xF,payload:r}),Promise.resolve(r)}catch(r){return n({type:SF,payload:r}),Promise.reject(r)}},Mge=t=>async e=>{e({type:EF});try{return await Ige(t),e({type:TF,payload:t}),Promise.resolve()}catch(n){return e({type:AF,payload:n}),Promise.reject(n)}},kge=({path:t})=>S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:t})}),jge=()=>{const t=rn(),e=pn(),{contents:n,pagination:r,loading:i,error:a}=an(h=>h.contents);F.useEffect(()=>{t(Hj(1))},[t]);const s=async h=>{if(window.confirm("Are you sure you want to delete this content?"))try{await t(Mge(h)),alert("Content deleted successfully!")}catch(p){alert(`Error deleting content: ${p.message||JSON.stringify(p)}`)}},o=h=>{h&&t(Hj(h))},c={"&laquo;":"«","&raquo;":"»","&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'","&nbsp;":" "};function u(h){return h.replace(/&[a-zA-Z0-9#]+;/g,p=>c[p]||"")}const d=h=>({__html:u(h)});return i&&n.length===0?S.jsx("div",{className:"flex justify-center items-center h-screen",children:S.jsx("div",{className:"text-lg font-semibold text-gray-600",children:"Loading..."})}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:["Error loading contents: ",a.message]}):S.jsx("div",{className:"p-2 sm:p-6 lg:p-8 bg-gray-50 min-h-screen",children:S.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4 sm:mb-0",children:"Content Management"}),S.jsxs("button",{onClick:()=>e("/contents/new"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75",children:[S.jsx(kge,{path:"M12 4v16m8-8H4"}),S.jsx("span",{children:"Create New Content"})]})]}),S.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-x-auto",children:n.length===0?S.jsxs("div",{className:"text-center py-20",children:[S.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"No Content Found"}),S.jsx("p",{className:"text-gray-500 mt-2",children:"Start by creating new content to see it listed here."})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"overflow-x-auto w-full",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"VIP"}),S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-right text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-700",children:h.id}),S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:S.jsx("img",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full object-cover",src:h.profileImg,alt:""})}),S.jsx("div",{className:"ml-4",children:S.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:h.title})})]})}),S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-700",children:h.category}),S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:S.jsx("span",{className:`px-1 sm:px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${h.isvip?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.isvip?"Yes":"No"})}),S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-right text-xs sm:text-sm font-medium",children:S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-0 sm:justify-end items-end sm:items-center",children:[S.jsx("button",{onClick:()=>e(`/contents/details/${h.id}`),className:"text-gray-500 hover:text-blue-600 sm:mr-3 font-semibold",children:"View"}),S.jsx("button",{onClick:()=>e(`/contents/edit/${h.id}`),className:"text-indigo-600 hover:text-indigo-900 sm:mr-3 font-semibold",children:"Edit"}),S.jsx("button",{onClick:()=>s(h.id),className:"text-red-600 hover:text-red-900 font-semibold",children:"Delete"})]})})]},h.id))})]})}),S.jsxs("div",{className:"px-2 sm:px-6 py-2 sm:py-4 border-t border-gray-200 flex flex-col gap-2 sm:flex-row items-center justify-between",children:[S.jsxs("div",{className:"text-xs sm:text-sm text-gray-700 mb-2 sm:mb-0",children:["Showing ",S.jsx("span",{className:"font-medium",children:r.from})," ","to ",S.jsx("span",{className:"font-medium",children:r.to})," of"," ",S.jsx("span",{className:"font-medium",children:r.total})," ","results"]}),S.jsx("div",{className:"flex flex-wrap gap-1 sm:inline-flex rounded-md shadow-sm -space-x-px w-full sm:w-auto justify-center sm:justify-start",children:r.links.map((h,p)=>{const y=h.url?new URL(h.url).searchParams.get("page"):null;return S.jsx("button",{onClick:()=>o(y),disabled:!h.url||i,className:`relative inline-flex items-center px-2 sm:px-4 py-1 sm:py-2 border text-xs sm:text-sm font-medium
                                    ${h.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}
                                    ${p===0?"rounded-l-md":""}
                                    ${p===r.links.length-1?"rounded-r-md":""}
                                    disabled:opacity-50 disabled:cursor-not-allowed`,dangerouslySetInnerHTML:d(h.label)},p)})})]})]})})]})})},ad=t=>{const[e,n]=F.useState(!1),[r,i]=F.useState(!1),[a,s]=F.useState(null);return F.useEffect(()=>{if(!t){n(!1),s(null);return}if(!/^https?:\/\/.+/.test(t)){n(!1),s("Invalid URL format");return}i(!0);const o=new Image;return o.onload=()=>{n(!0),i(!1),s(null)},o.onerror=()=>{n(!1),i(!1),s("Image failed to load")},o.src=t,()=>{o.src=""}},[t]),{isValid:e,isLoading:r,error:a}},zj=()=>{const t=rn(),e=pn(),{id:n}=ca(),[r,i]=F.useState(""),{loading:a,error:s,selectedContent:o}=an(j=>j.contents),c=F.useMemo(()=>{var G,q,Z;if(!o||!o.content)return null;const j=o.content;try{return{...j,casts:Array.isArray(j.casts)?j.casts:j.casts?JSON.parse(j.casts):[],files:{trailer:((G=o.content.files)==null?void 0:G.trailer)||{url:"",quality:"",size:""},stream:((q=o.content.files)==null?void 0:q.stream)||[],download:((Z=o.content.files)==null?void 0:Z.download)||[]}}}catch(B){return console.error("Error parsing content data:",B),null}},[o]),[u,d]=F.useState(1),[h,p]=F.useState({title:"",profileImg:"",coverImg:"",duration:"",links:[],content:"",tags:[],category:"",casts:[],files:{trailer:{url:"",quality:"",size:""},stream:[],download:[]},isvip:!1}),[y,v]=F.useState({});F.useEffect(()=>{n&&t(R8(n))},[t,n]),F.useEffect(()=>{var j,G,q;n&&c&&c.id.toString()===n&&p({title:c.title||"",profileImg:c.profileImg||"",coverImg:c.coverImg||"",duration:c.duration||"",links:c.links||[],content:c.content||"",tags:c.tags||[],category:c.category||"",casts:c.casts||[],files:{trailer:((j=c.files)==null?void 0:j.trailer)||{url:"",quality:"",size:""},stream:((G=c.files)==null?void 0:G.stream)||[],download:((q=c.files)==null?void 0:q.download)||[]},isvip:c.isvip||!1})},[n,c]);const x=j=>{const{name:G,value:q,type:Z,checked:B}=j.target;if(G.includes(".")){const[V,H,te]=G.split(".");p(te?ce=>{var ye;return{...ce,[V]:{...ce[V],[H]:{...((ye=ce[V])==null?void 0:ye[H])||{},[te]:q}}}}:ce=>({...ce,[V]:{...ce[V],[H]:q}}))}else p(V=>({...V,[G]:Z==="checkbox"?B:q}))},b=(j,G)=>{const q=j.target.value;p(Z=>({...Z,[G]:q.split(",").map(B=>B.trim()).filter(Boolean)}))},T=()=>{const j=r.trim();j&&!h.links.includes(j)&&p({...h,links:[...h.links,j]}),i("")},_=j=>{const G=h.links.filter((q,Z)=>Z!==j);p({...h,links:G})},w=j=>{p(G=>j&&!G.tags.includes(j)?{...G,tags:[...G.tags,j]}:G)},O=j=>{p(G=>({...G,tags:G.tags.filter((q,Z)=>Z!==j)}))},R=(j,G,q)=>{const Z=[...h.casts];Z[j][G]=q,p(B=>({...B,casts:Z}))},C=()=>{p(j=>({...j,casts:[...j.casts,{name:"",role:""}]}))},L=j=>{p(G=>({...G,casts:G.casts.filter((q,Z)=>Z!==j)}))},P=(j,G,q,Z)=>{const B=[...h.files[Z]];B[j]||(B[j]={}),B[j][G]=q,p(V=>({...V,files:{...V.files,[Z]:B}}))},N=j=>{p(G=>({...G,files:{...G.files,[j]:[...G.files[j],{url:"",quality:"",size:""}]}}))},k=(j,G)=>{p(q=>({...q,files:{...q.files,[G]:q.files[G].filter((Z,B)=>B!==j)}}))},M=j=>{var Z,B;const G={};let q=!0;if(v(V=>{const H={...V};return j===1?(delete H.title,delete H.duration,delete H.content,delete H.category):j===2&&(delete H.profileImg,delete H.coverImg,delete H.trailerUrl),H}),console.log(j),j===1)h.title||(G.title="Title is required"),h.duration||(G.duration="Duration is required"),h.content||(G.content="Content description is required"),h.category||(G.category="Category is required");else if(j===2)h.profileImg||(G.profileImg="Profile Image URL is required"),h.profileImg&&!/^https?:\/\/.+/.test(h.profileImg)&&(G.profileImg="Invalid URL format"),h.coverImg||(G.coverImg="Cover Image URL is required"),h.coverImg&&!/^https?:\/\/.+/.test(h.coverImg)&&(G.coverImg="Invalid URL format"),(B=(Z=h.files)==null?void 0:Z.trailer)!=null&&B.url?/^https?:\/\/.+/.test(h.files.trailer.url)||(G.trailerUrl="Invalid URL format"):G.trailerUrl="Trailer URL is required",h.files.stream.length===0?G.download="At least one stream file is required":h.files.stream.forEach((V,H)=>{V.url?/^https?:\/\/.+/.test(V.url)||(G[`downloadUrl${H}`]=`Invalid URL format for file ${H+1}`):G[`downloadUrl${H}`]=`Download URL is required for file ${H+1}`});else if(j==3)h.files.download.length===0?G.download="At least one download file is required":h.files.download.forEach((V,H)=>{V.url?/^https?:\/\/.+/.test(V.url)||(G[`downloadUrl${H}`]=`Invalid URL format for file ${H+1}`):G[`downloadUrl${H}`]=`Download URL is required for file ${H+1}`});else if(j===4)return v(V=>({...V,...G})),q=Object.keys(G).length===0,q;return u==3&&n?(d(u+1),!1):(v(V=>({...V,...G})),q=Object.keys(G).length===0,q)},$=()=>{M(u)&&d(j=>j+1)},K=()=>{d(j=>j-1),v({})},W=async j=>{if(j.preventDefault(),!!M(u))try{n?(await t(Nge(n,h)),alert("Content updated successfully!")):(await t(Pge(h)),alert("Content created successfully!")),e("/contents")}catch(G){console.error("Failed to save content:",G),alert(`Error: ${G.message||(G.errors?JSON.stringify(G.errors):JSON.stringify(G))}`)}};if(n&&a&&!o)return S.jsx("div",{className:"text-center p-6",children:"Loading content..."});if(n&&s)return S.jsxs("div",{className:"text-center p-6 text-red-500",children:["Error loading content: ",s.message]});const Y=()=>{switch(console.log("Current Step:",u),u){case 1:return S.jsx(Uge,{formData:h,handleChange:x,formErrors:y,addTag:w,removeTag:O});case 2:return S.jsx(Fge,{formData:h,handleChange:x,handleFileArrayChange:P,addFileEntry:N,removeFileEntry:k,formErrors:y});case 3:return S.jsx(Kj,{newLink:r,addImageLink:T,setNewLink:i,removeImage:_,formData:h,handleChange:x,handleArrayChange:b,handleCastChange:R,addCast:C,removeCast:L,addFileEntry:N,removeFileEntry:k,handleFileArrayChange:P});case 4:return S.jsx(Kj,{formData:h,newLink:r,addImageLink:T,setNewLink:i,removeImage:_,handleChange:x,handleArrayChange:b,handleCastChange:R,addCast:C,removeCast:L,addFileEntry:N,removeFileEntry:k,handleFileArrayChange:P});default:return null}};return S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-4xl mx-auto",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:n?"Edit Content":"Create New Content"}),S.jsxs("div",{className:"flex justify-center mb-8",children:[S.jsxs("div",{className:`w-1/3 text-center ${u>=1?"text-blue-600 font-bold":"text-gray-400"}`,children:[S.jsx("div",{className:`p-2 rounded-full mx-auto mb-2 ${u>=1?"bg-blue-100":"bg-gray-100"} w-10 h-10 flex items-center justify-center`,children:"1"}),"Basic Info"]}),S.jsx("div",{className:"flex-1 border-t-2 border-gray-200 mt-5"}),S.jsxs("div",{className:`w-1/3 text-center ${u>=2?"text-blue-600 font-bold":"text-gray-400"}`,children:[S.jsx("div",{className:`p-2 rounded-full mx-auto mb-2 ${u>=2?"bg-blue-100":"bg-gray-100"} w-10 h-10 flex items-center justify-center`,children:"2"}),"Media & Files"]}),S.jsx("div",{className:"flex-1 border-t-2 border-gray-200 mt-5"}),S.jsxs("div",{className:`w-1/3 text-center ${u>=3?"text-blue-600 font-bold":"text-gray-400"}`,children:[S.jsx("div",{className:`p-2 rounded-full mx-auto mb-2 ${u>=3?"bg-blue-100":"bg-gray-100"} w-10 h-10 flex items-center justify-center`,children:"3"}),"Advanced Details"]})]}),S.jsxs("form",{onSubmit:W,className:"space-y-6",children:[Y(),S.jsxs("div",{className:"flex justify-between mt-8",children:[u==1&&S.jsx("button",{type:"button",onClick:()=>e("/contents"),className:"px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),u>1&&S.jsx("button",{type:"button",onClick:K,className:"px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Previous"}),u<3?S.jsx("button",{type:"button",onClick:$,className:`inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u===1?"ml-auto":""}`,children:"Next"}):S.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 ml-auto",disabled:a,children:a?n?"Updating...":"Creating...":n?"Update Content":"Create Content"})]}),s&&S.jsxs("p",{className:"text-red-500 text-sm mt-4 text-center",children:["Error: ",s.message||JSON.stringify(s)]})]})]})},Uge=({formData:t,handleChange:e,formErrors:n,addTag:r,removeTag:i})=>S.jsxs("div",{className:"space-y-6",children:[S.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 1: Basic Information"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),S.jsx("input",{type:"text",name:"title",id:"title",value:t.title,onChange:e,className:`mt-1 block w-full border ${n.title?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Example Movie Title",required:!0}),n.title&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.title})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700",children:"Duration (e.g., HH:MM:SS)"}),S.jsx("input",{type:"text",name:"duration",id:"duration",value:t.duration,onChange:e,className:`mt-1 block w-full border ${n.duration?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"2:15:00",required:!0}),n.duration&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.duration})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content Description"}),S.jsx("textarea",{name:"content",id:"content",rows:"4",value:t.content,onChange:e,className:`mt-1 block w-full border ${n.content?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Full movie description here...",required:!0}),n.content&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.content})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),S.jsx("input",{type:"text",name:"category",id:"category",value:t.category,onChange:e,className:`mt-1 block w-full border ${n.category?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Engsub, Dubbed, etc.",required:!0}),n.category&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.category})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"tagInput",className:"block text-sm font-medium text-gray-700",children:"Tags"}),S.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[S.jsx("input",{type:"text",id:"tagInput",onKeyDown:a=>{a.key==="Enter"&&a.target.value.trim()!==""&&(a.preventDefault(),r(a.target.value.trim()),a.target.value="")},className:"block flex-1 border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add a tag and press Enter"}),S.jsx("button",{type:"button",onClick:()=>{const a=document.getElementById("tagInput");a.value.trim()!==""&&(r(a.value.trim()),a.value="")},className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm",children:"Add"})]}),S.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.tags.map((a,s)=>S.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-800",children:[a,S.jsx("button",{type:"button",onClick:()=>i(s),className:"ml-2 -mr-0.5 h-4 w-4 flex-shrink-0 text-gray-500 hover:text-gray-700 focus:outline-none",children:"×"})]},s))})]})]}),Bge=({url:t})=>{const{isValid:e,isLoading:n,error:r}=ad(t);return t?n?S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})}):e?S.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Profile Image Preview:"}),S.jsx("img",{src:t,alt:"Profile Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md",onError:i=>{i.target.src="https://via.placeholder.com/150?text=Invalid+Image"}})]}):S.jsx("div",{className:"mt-2 p-2 border border-red-200 rounded-md bg-red-50 text-center",children:S.jsx("p",{className:"text-sm text-red-600",children:r||"Invalid image URL"})}):null},O8=({url:t})=>{const{isValid:e,isLoading:n,error:r}=ad(t);return t?n?S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})}):e?S.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cover Image Preview:"}),S.jsx("img",{src:t,alt:"Cover Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md",onError:i=>{i.target.src="https://via.placeholder.com/300x150?text=Invalid+Image"}})]}):S.jsx("div",{className:"mt-2 p-2 border border-red-200 rounded-md bg-red-50 text-center",children:S.jsx("p",{className:"text-sm text-red-600",children:r||"Invalid image URL"})}):null},Fge=({formData:t,handleChange:e,handleFileArrayChange:n,addFileEntry:r,removeFileEntry:i,formErrors:a})=>{var s,o,c;return S.jsxs("div",{className:"space-y-6",children:[S.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 2: Media and Files"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"profileImg",className:"block text-sm font-medium text-gray-700",children:"Profile Image URL"}),S.jsx("input",{type:"url",name:"profileImg",id:"profileImg",value:t.profileImg,onChange:e,className:`mt-1 block w-full border ${a.profileImg?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"https://example.com/images/profile.jpg",required:!0}),a.profileImg&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.profileImg}),t.profileImg&&S.jsx(Bge,{url:t.profileImg})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"coverImg",className:"block text-sm font-medium text-gray-700",children:"Cover Image URL"}),S.jsx("input",{type:"url",name:"coverImg",id:"coverImg",value:t.coverImg,onChange:e,className:`mt-1 block w-full border ${a.coverImg?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"https://example.com/covers/cover.jpg",required:!0}),a.coverImg&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.coverImg}),t.coverImg&&S.jsx(O8,{url:t.coverImg})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trailer File"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"trailerUrl",className:"block text-xs font-medium text-gray-500",children:"URL"}),S.jsx("input",{type:"url",name:"files.trailer.url",id:"trailerUrl",value:((s=t.files.trailer)==null?void 0:s.url)||"",onChange:e,className:`mt-1 block w-full border ${a.trailerUrl?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2`,placeholder:"https://example.com/trailer.mp4"}),a.trailerUrl&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.trailerUrl})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"trailerQuality",className:"block text-xs font-medium text-gray-500",children:"Quality"}),S.jsx("input",{type:"text",name:"files.trailer.quality",id:"trailerQuality",value:((o=t.files.trailer)==null?void 0:o.quality)||"",onChange:e,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"1080p"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"trailerSize",className:"block text-xs font-medium text-gray-500",children:"Size"}),S.jsx("input",{type:"text",name:"files.trailer.size",id:"trailerSize",value:((c=t.files.trailer)==null?void 0:c.size)||"",onChange:e,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"250MB"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stream Files"}),t.files.stream.map((u,d)=>S.jsxs("div",{className:"flex space-x-2 mb-2 items-end",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{htmlFor:`streamUrl${d}`,className:"block text-xs font-medium text-gray-500",children:"URL"}),S.jsx("input",{type:"url",id:`streamUrl${d}`,value:u.url,onChange:h=>n(d,"url",h.target.value,"stream"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"https://stream.com/v1.mp4"})]}),S.jsxs("div",{className:"w-1/4",children:[S.jsx("label",{htmlFor:`streamQuality${d}`,className:"block text-xs font-medium text-gray-500",children:"Quality"}),S.jsx("input",{type:"text",id:`streamQuality${d}`,value:u.quality,onChange:h=>n(d,"quality",h.target.value,"stream"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"720p"})]}),S.jsxs("div",{className:"w-1/4",children:[S.jsx("label",{htmlFor:`streamSize${d}`,className:"block text-xs font-medium text-gray-500",children:"Size"}),S.jsx("input",{type:"text",id:`streamSize${d}`,value:u.size,onChange:h=>n(d,"size",h.target.value,"stream"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"1.2GB"})]}),S.jsx("button",{type:"button",onClick:()=>i(d,"stream"),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 mb-1",children:"Remove"})]},d)),S.jsx("button",{type:"button",onClick:()=>r("stream"),className:"mt-2 px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600",children:"Add Stream File"}),a.stream&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.stream}),t.files.stream.map((u,d)=>a[`streamUrl${d}`]&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a[`streamUrl${d}`]},`error-${d}`))]})]})},Kj=({newLink:t,addImageLink:e,setNewLink:n,removeImage:r,formData:i,handleChange:a,handleArrayChange:s,handleCastChange:o,addCast:c,removeCast:u,addFileEntry:d,removeFileEntry:h,handleFileArrayChange:p})=>S.jsxs("div",{className:"space-y-6",children:[S.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 3: Advanced Details"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"newLink",className:"block text-sm font-medium text-gray-700",children:"Add Image URL"}),S.jsxs("div",{className:"flex gap-2 mt-1",children:[S.jsx("input",{type:"text",id:"newLink",name:"newLink",value:t,onChange:y=>n(y.target.value),className:"flex-1 block border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/image.jpg"}),S.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add"})]})]}),i.links.length>0&&S.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4",children:i.links.map((y,v)=>S.jsxs("div",{className:"border p-2 rounded shadow relative group bg-white",children:[S.jsx(O8,{url:y}),S.jsx("p",{className:"mt-1 text-xs text-gray-500 truncate",children:y}),S.jsx("button",{onClick:()=>r(v),className:"absolute top-1 right-1 text-red-600 bg-white border rounded-full px-1 text-xs opacity-0 group-hover:opacity-100 transition",title:"Remove",children:"✕"})]},v))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Casts"}),i.casts.map((y,v)=>S.jsxs("div",{className:"flex space-x-2 mb-2 items-end",children:[S.jsx("input",{type:"text",value:y.name,onChange:x=>o(v,"name",x.target.value),className:"block w-full flex-1 border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Actor Name"}),S.jsx("input",{type:"text",value:y.role,onChange:x=>o(v,"role",x.target.value),className:"block w-full flex-1 border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Role (e.g., Actor, Director)"}),S.jsx("button",{type:"button",onClick:()=>u(v),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Remove"})]},v)),S.jsx("button",{type:"button",onClick:c,className:"mt-2 px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600",children:"Add Cast"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Download Files"}),i.files.download.map((y,v)=>S.jsxs("div",{className:"flex space-x-2 mb-2 items-end",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{htmlFor:`downloadUrl${v}`,className:"block text-xs font-medium text-gray-500",children:"URL"}),S.jsx("input",{type:"url",id:`downloadUrl${v}`,value:y.url,onChange:x=>p(v,"url",x.target.value,"download"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"https://download.com/file1.mp4"})]}),S.jsxs("div",{className:"w-1/4",children:[S.jsx("label",{htmlFor:`downloadQuality${v}`,className:"block text-xs font-medium text-gray-500",children:"Quality"}),S.jsx("input",{type:"text",id:`downloadQuality${v}`,value:y.quality,onChange:x=>p(v,"quality",x.target.value,"download"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"1080p"})]}),S.jsxs("div",{className:"w-1/4",children:[S.jsx("label",{htmlFor:`downloadSize${v}`,className:"block text-xs font-medium text-gray-500",children:"Size"}),S.jsx("input",{type:"text",id:`downloadSize${v}`,value:y.size,onChange:x=>p(v,"size",x.target.value,"download"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"2.5GB"})]}),S.jsx("button",{type:"button",onClick:()=>h(v,"download"),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 mb-1",children:"Remove"})]},v)),S.jsx("button",{type:"button",onClick:()=>d("download"),className:"mt-2 px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600",children:"Add Download File"})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{type:"checkbox",name:"isvip",id:"isvip",checked:i.isvip,onChange:a,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),S.jsx("label",{htmlFor:"isvip",className:"ml-2 block text-sm font-medium text-gray-700",children:"Is VIP Content?"})]})]}),$ge=()=>S.jsxs("div",{className:"min-h-full flex flex-col items-center justify-center bg-gray-50 p-6 text-center",children:[S.jsx("h1",{className:"text-9xl font-extrabold text-gray-800 mb-4",children:"404"}),S.jsx("p",{className:"text-2xl font-semibold text-gray-600 mb-6",children:"Page Not Found"}),S.jsx("p",{className:"text-lg text-gray-500 mb-8 max-w-lg",children:"Oops! The page you're looking for doesn't exist. It might have been moved or deleted."}),S.jsx(hi,{to:"/dashboard",className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition duration-300 ease-in-out",children:"Go to Dashboard"})]}),Gge=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})}),Vge=({toggleSidebar:t})=>{const e=rn(),n=pn(),r=an(a=>a.auth.user),i=()=>{e($$()),n("/login")};return S.jsxs("header",{className:"top-0 left-0 right-0 z-40 bg-gradient-to-r from-gray-800 to-gray-900 text-white shadow-lg p-4 flex items-center justify-between h-16",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("button",{className:"md:hidden p-2 text-white bg-gray-700 rounded-md mr-3",onClick:t,children:S.jsx(Gge,{})}),S.jsx("span",{className:"text-2xl font-extrabold tracking-tight cursor-pointer hover:text-blue-300 transition-colors duration-200",onClick:()=>n("/"),children:"AdminPanel"})]}),S.jsxs("div",{className:"flex items-center space-x-4",children:[r&&S.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden md:inline",children:["Welcome, ",r.name||r.email||"Admin","!"]}),S.jsx("button",{onClick:i,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm font-semibold transition-all duration-300 ease-in-out transform hover:scale-105 shadow-md",children:"Logout"})]})]})},qge=({className:t="w-6 h-6 ",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),Hge=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),zge=({className:t="w-6 h-6",...e})=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-table-of-contents-icon lucide-table-of-contents",children:[S.jsx("path",{d:"M16 12H3"}),S.jsx("path",{d:"M16 18H3"}),S.jsx("path",{d:"M16 6H3"}),S.jsx("path",{d:"M21 12h.01"}),S.jsx("path",{d:"M21 18h.01"}),S.jsx("path",{d:"M21 6h.01"})]}),Yj=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"})}),Wj=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#e3e3e3",children:S.jsx("path",{d:"m380-340 280-180-280-180v360Zm-60 220v-80H160q-33 0-56.5-23.5T80-280v-480q0-33 23.5-56.5T160-840h640q33 0 56.5 23.5T880-760v480q0 33-23.5 56.5T800-200H640v80H320ZM160-280h640v-480H160v480Zm0 0v-480 480Z"})}),Kge=({isOpen:t,setIsOpen:e})=>S.jsxs(S.Fragment,{children:[S.jsxs("aside",{className:`
          fixed inset-y-0 left-0 bg-gray-900 text-white w-64 p-4
          transform ${t?"translate-x-0":"-translate-x-full"}
          md:translate-x-0 md:relative md:flex-shrink-0
          transition-transform duration-300 ease-in-out z-40
        `,children:[S.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Menu"}),S.jsx("nav",{children:S.jsxs("ul",{children:[S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/dashboard",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(qge,{})," ",S.jsx("span",{className:"ml-2",children:"Dashboard"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/devices",className:"flex items-center px-4 py-2 pr-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(Hge,{className:"pr-21 mr-5"}),S.jsx("span",{className:"ml-2",children:"Devices"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/contents",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(zge,{})," ",S.jsx("span",{className:"ml-2",children:"Contents"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/subscriptions",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(Yj,{})," ",S.jsx("span",{className:"ml-2",children:"Subscriptions"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/sport",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(Wj,{})," ",S.jsx("span",{className:"ml-2",children:"Sport"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/suggestions",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(Yj,{})," ",S.jsx("span",{className:"ml-2",children:"Suggestions"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/livesports",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(Wj,{})," ",S.jsx("span",{className:"ml-2",children:"Live and Sport"})]})})]})})]}),t&&S.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 md:hidden",onClick:()=>e(!1)})]}),Yge=()=>{var w,O,R,C,L,P;const{id:t}=ca(),e=rn(),n=pn(),{selectedContent:r,loading:i,error:a}=an(N=>N.contents);F.useEffect(()=>{t&&e(R8(t))},[e,t]);const s=F.useMemo(()=>{var k,M,$;if(!r||!r.content)return null;const N=r.content;try{return{...N,casts:Array.isArray(N.casts)?N.casts:N.casts?JSON.parse(N.casts):[],files:{trailer:((k=r.content.files)==null?void 0:k.trailer)||{url:"",quality:"",size:""},stream:((M=r.content.files)==null?void 0:M.stream)||[],download:(($=r.content.files)==null?void 0:$.download)||[]}}}catch(K){return console.error("Error parsing content data:",K),null}},[r]);if(i)return S.jsx("div",{className:"text-center p-6 text-gray-700",children:"Loading content details..."});if(a)return S.jsxs("div",{className:"text-center p-6 text-red-500",children:["Error: ",a.message||"Could not load content details."]});if(!s)return S.jsx("div",{className:"text-center p-6 text-gray-700",children:"Content not found."});const{title:o,profileImg:c,coverImg:u,duration:d,links:h,content:p,tags:y,category:v,casts:x,files:b,isvip:T,views_count:_}=s;return S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg max-w-5xl mx-auto my-8",children:[S.jsx("button",{onClick:()=>n("/contents"),className:"mb-6 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to Contents List"}),S.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 mb-4",children:o}),u&&S.jsx("div",{className:"mb-6",children:S.jsx("img",{src:u,alt:`${o} Cover`,className:"w-full h-96 object-cover rounded-lg shadow-md",onError:N=>N.target.src=""})}),c&&S.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[S.jsx("img",{src:c,alt:`${o} Profile`,className:"w-24 h-24 object-cover rounded-full border-4 border-white shadow-md",onError:N=>N.target.src=""}),S.jsxs("div",{children:[S.jsxs("p",{className:"text-sm text-gray-500",children:["Duration: ",d]}),S.jsxs("p",{className:"text-sm text-gray-500",children:["Category:"," ",S.jsx("span",{className:"font-medium text-gray-700",children:v})]}),S.jsxs("p",{className:"text-sm text-gray-500",children:["Views: ",_]}),S.jsx("p",{className:`text-sm font-semibold ${T?"text-green-600":"text-blue-600"}`,children:T?"VIP Content":"Free Content"})]})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Description"}),S.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:p})]}),y&&y.length>0&&S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Tags"}),S.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((N,k)=>S.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:N},k))})]}),x&&x.length>0&&S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Casts"}),S.jsx("ul",{className:"list-disc list-inside text-gray-700",children:x.map((N,k)=>S.jsxs("li",{children:[N.name," (",N.role,")"]},k))})]}),h&&h.length>0&&S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Related Links"}),S.jsx("ul",{className:"list-disc list-inside text-blue-600",children:h.map((N,k)=>S.jsx("li",{children:S.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:N})},k))})]}),b&&(((w=b.trailer)==null?void 0:w.url)||((O=b.stream)==null?void 0:O.length)>0||((R=b.download)==null?void 0:R.length)>0)&&S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Files"}),((C=b.trailer)==null?void 0:C.url)&&S.jsxs("div",{className:"mb-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:"Trailer"}),S.jsxs("p",{className:"text-gray-700",children:["URL:"," ",S.jsx("a",{href:b.trailer.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:b.trailer.url})]}),S.jsxs("p",{className:"text-gray-700",children:["Quality: ",b.trailer.quality||"N/A",", Size:"," ",b.trailer.size||"N/A"]})]}),((L=b.stream)==null?void 0:L.length)>0&&S.jsxs("div",{className:"mb-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:"Stream Options"}),S.jsx("ul",{className:"list-disc list-inside text-gray-700",children:b.stream.map((N,k)=>S.jsxs("li",{children:["URL:"," ",S.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:N.url})," ","(Quality: ",N.quality||"N/A",", Size:"," ",N.size||"N/A",")"]},k))})]}),((P=b.download)==null?void 0:P.length)>0&&S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:"Download Options"}),S.jsx("ul",{className:"list-disc list-inside text-gray-700",children:b.download.map((N,k)=>S.jsxs("li",{children:["URL:"," ",S.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:N.url})," ","(Quality: ",N.quality||"N/A",", Size:"," ",N.size||"N/A",")"]},k))})]})]}),r.related_content&&r.related_content.length>0&&S.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Related Content"}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.related_content.map(N=>S.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[S.jsx("img",{src:N.coverImg||"https://via.placeholder.com/1280x720?text=Related+Content",alt:N.title,className:"w-full h-48 object-cover"}),S.jsxs("div",{className:"p-4",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:N.title}),S.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:N.short_description}),S.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:N.tags.map((k,M)=>S.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:k},M))}),S.jsx("button",{onClick:()=>n(`/contents/details/${N.id}`),className:"mt-2 px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"View Details"})]})]},N.id))})]})]})},Wge=({children:t})=>{const[e,n]=F.useState(!1),r=()=>{n(!e)};return S.jsxs("div",{className:"flex flex-col min-h-screen",children:[S.jsx(Vge,{toggleSidebar:r}),S.jsxs("div",{className:"flex flex-1",children:[S.jsx(Kge,{isOpen:e,setIsOpen:n}),S.jsxs("main",{className:"flex-1 bg-gray-50 overflow-auto",children:[t," "]})]})]})},Xge=async(t=1,e=20)=>{var n,r;try{return(await Je.get("/devices",{params:{page:t,per_page:e}})).data}catch(i){throw console.error("Error fetching devices:",((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},Qge=async t=>{var e,n;try{return(await Je.get(`/devices/${t}`)).data}catch(r){throw console.error(`Error fetching device with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Zge=async t=>{var e,n;try{return(await Je.post("/devices",t)).data}catch(r){throw console.error("Error creating device:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Jge=async(t,e)=>{var n,r;try{return(await Je.put(`/devices/${t}`,e)).data}catch(i){throw console.error(`Error updating device with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},e0e=async t=>{var e,n;try{return await Je.delete(`/devices/${t}`),t}catch(r){throw console.error(`Error deleting device with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Fh=(t=1,e=20)=>async n=>{n({type:CF});try{const r=await Xge(t,e);n({type:LF,payload:r})}catch(r){n({type:DF,payload:r})}},C8=t=>async e=>{e({type:IF});try{const n=await Qge(t);e({type:PF,payload:n})}catch(n){e({type:NF,payload:n})}},t0e=t=>async e=>{e({type:MF});try{const n=await Zge(t);return e({type:kF,payload:n}),Promise.resolve(n)}catch(n){return e({type:jF,payload:n}),Promise.reject(n)}},n0e=(t,e)=>async n=>{n({type:UF});try{const r=await Jge(t,e);return n({type:BF,payload:r}),Promise.resolve(r)}catch(r){return n({type:FF,payload:r}),Promise.reject(r)}},r0e=t=>async e=>{e({type:$F});try{return await e0e(t),e({type:GF,payload:t}),Promise.resolve(t)}catch(n){return e({type:VF,payload:n}),Promise.reject(n)}},i0e=()=>{const t=rn(),e=pn(),{devices:n,pagination:r,loading:i,error:a}=an(u=>u.devices);F.useEffect(()=>{t(Fh(r.current_page,r.per_page))},[t,r.current_page,r.per_page]);const s=u=>{u>=1&&u<=r.last_page&&t(Fh(u,r.per_page))},o=u=>{t(Fh(1,parseInt(u.target.value,10)))},c=async(u,d)=>{if(window.confirm(`Are you sure you want to delete device "${d}"? This action cannot be undone.`))try{await t(r0e(d)),alert("Device deleted successfully!"),t(Fh(r.current_page,r.per_page))}catch(h){alert(`Failed to delete device: ${h.message||JSON.stringify(h)}`),console.error("Delete failed:",h)}};return i&&n.length===0?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading devices..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Devices"}),S.jsx("p",{children:a.message||"An unexpected error occurred while fetching devices."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):S.jsxs("div",{className:"p-4 sm:p-6 bg-white rounded-lg shadow-md max-w-full sm:max-w-5xl mx-auto",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 sm:gap-0",children:[S.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 leading-tight",children:"Device Management"}),S.jsx("button",{onClick:()=>e("/devices/new"),className:"w-full sm:w-auto px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-md shadow hover:from-blue-600 hover:to-blue-800 transition duration-200 font-semibold text-base sm:text-lg",children:"+ Add New Device"})]}),n.length===0&&!i?S.jsx("p",{className:"text-gray-600 text-center py-8 text-base sm:text-lg font-medium bg-gray-50 rounded-md shadow-inner",children:"No devices found."}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:S.jsxs("table",{className:"min-w-[700px] w-full divide-y divide-gray-200 text-sm sm:text-base",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"ID"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Device ID"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Platform"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"OS/App Version"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Last Active"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"VIP Status"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"VIP Expires"}),S.jsx("th",{scope:"col",className:"relative px-2 sm:px-4 py-2 sm:py-3 text-center whitespace-nowrap",children:"Actions"})]})}),S.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(u=>S.jsxs("tr",{className:"device-row",children:[S.jsx("td",{className:"device-cell",children:u.id}),S.jsx("td",{className:"device-cell",children:u.device_id}),S.jsx("td",{className:"device-cell",children:u.platform||"N/A"}),S.jsxs("td",{className:"device-cell",children:[u.osversion||"N/A"," / ",u.appversion||"N/A"]}),S.jsx("td",{className:"device-cell",children:u.last_active_at?S.jsx("span",{title:mn(new Date(u.last_active_at),"MMM dd, yyyy HH:mm"),className:"cursor-help",children:_Y(new Date(u.last_active_at),{addSuffix:!0})}):"N/A"}),S.jsx("td",{className:"device-cell",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u.is_vip?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.is_vip?"VIP":"Free"})}),S.jsx("td",{className:"device-cell",children:u.vip_expires_at?mn(new Date(u.vip_expires_at),"MMM dd, yyyy"):"N/A"}),S.jsx("td",{className:"device-cell text-center",children:S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2 justify-center items-center",children:[S.jsx("button",{onClick:()=>e(`/devices/details/${u.device_id}`),className:"w-full sm:w-auto px-3 py-2 text-blue-600 hover:text-white hover:bg-blue-600 rounded-md shadow-sm transition-colors duration-200 font-semibold text-xs sm:text-sm",title:"View Details","aria-label":`View details for device ${u.device_id}`,children:"View"}),S.jsx("button",{onClick:()=>e(`/devices/edit/${u.device_id}`),className:"w-full sm:w-auto px-3 py-2 text-yellow-600 hover:text-white hover:bg-yellow-500 rounded-md shadow-sm transition-colors duration-200 font-semibold text-xs sm:text-sm",title:"Edit Device","aria-label":`Edit device ${u.device_id}`,children:"Edit"}),S.jsx("button",{onClick:()=>c(u.id,u.device_id),className:"w-full sm:w-auto px-3 py-2 text-red-600 hover:text-white hover:bg-red-600 rounded-md shadow-sm transition-colors duration-200 font-semibold text-xs sm:text-sm",title:"Delete Device","aria-label":`Delete device ${u.device_id}`,children:"Delete"})]})})]},u.id)),i&&n.length>0&&S.jsx("tr",{children:S.jsx("td",{colSpan:"8",className:"px-2 sm:px-4 py-4 text-center text-blue-500 bg-blue-50",children:S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-400 mr-3"}),"Loading more devices..."]})})})]})]})}),S.jsxs("div",{className:"mt-6 flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[S.jsxs("div",{className:"flex flex-row sm:flex-row items-center gap-2",children:[S.jsx("label",{htmlFor:"perPage",className:"text-sm text-gray-700",children:"Show:"}),S.jsx("select",{id:"perPage",value:r.per_page,onChange:o,className:"block w-20 sm:w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 text-sm",children:[10,20,50,100].map(u=>S.jsx("option",{value:u,children:u},u))}),S.jsx("span",{className:"text-sm text-gray-700",children:"entries"})]}),S.jsxs("div",{className:"flex flex-wrap gap-2 justify-center items-center",children:[S.jsx("button",{onClick:()=>s(r.current_page-1),disabled:r.current_page===1,className:"px-3 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm",children:"Previous"}),Array.from({length:r.last_page},(u,d)=>d+1).map(u=>S.jsx("button",{onClick:()=>s(u),className:`px-3 py-2 rounded-md text-xs sm:text-sm font-semibold ${r.current_page===u?"bg-blue-600 text-white shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:u},u)),S.jsx("button",{onClick:()=>s(r.current_page+1),disabled:r.current_page===r.last_page,className:"px-3 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm",children:"Next"})]}),S.jsxs("div",{className:"text-sm text-gray-700 text-center sm:text-right",children:["Page ",r.current_page," of ",r.last_page," ",S.jsxs("span",{className:"hidden sm:inline",children:["(Total ",r.total," devices)"]}),S.jsxs("span",{className:"block sm:hidden mt-1",children:["Total: ",r.total," devices"]})]})]})]})]})},a0e=()=>{const{id:t}=ca(),e=pn(),n=rn(),{selectedDevice:r,loading:i,error:a}=an(s=>s.devices);return F.useEffect(()=>{t&&n(C8(t))},[n,t]),console.log("DeviceDetailsPage",r,i,a),i?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading device details..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Device Details"}),S.jsx("p",{children:a.message||"An unexpected error occurred."}),S.jsx("button",{onClick:()=>e("/devices"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Device List"})]}):r?S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Device Details"}),S.jsx("button",{onClick:()=>e("/devices"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"ID:"}),S.jsx("span",{className:"text-gray-900",children:r.device.id})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Device ID:"}),S.jsx("span",{className:"text-gray-900",children:r.device.device_id})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Platform:"}),S.jsx("span",{className:"text-gray-900",children:r.device.platform||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"OS Version:"}),S.jsx("span",{className:"text-gray-900",children:r.device.osversion||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"App Version:"}),S.jsx("span",{className:"text-gray-900",children:r.device.appversion||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Last Active:"}),S.jsx("span",{className:"text-gray-900",children:r.device.last_active_at?mn(new Date(r.device.last_active_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"VIP Status:"}),S.jsx("span",{className:`font-semibold ${r.device.is_vip?"text-green-600":"text-red-600"}`,children:r.device.is_vip?"VIP":"Free"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"VIP Expires At:"}),S.jsx("span",{className:"text-gray-900",children:r.device.vip_expires_at?mn(new Date(r.device.vip_expires_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),S.jsx("span",{className:"text-gray-900",children:r.device.created_at?mn(new Date(r.device.created_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Updated At:"}),S.jsx("span",{className:"text-gray-900",children:r.device.updated_at?mn(new Date(r.device.updated_at),"MMM dd, yyyy HH:mm"):"N/A"})]})]}),S.jsx("div",{className:"mt-8 flex justify-end space-x-3",children:S.jsx("button",{onClick:()=>e(`/devices/edit/${r.device.device_id}`),className:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Edit Device"})})]}):S.jsxs("div",{className:"text-center p-6 text-gray-600",children:[S.jsxs("p",{children:["No device found with ID: ",t,"."]}),S.jsx("button",{onClick:()=>e("/devices"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Device List"})]})},s0e=()=>{const{id:t}=ca(),e=pn(),n=rn(),{selectedDevice:r,loading:i,error:a}=an(b=>b.devices),s=!!t,[o,c]=F.useState({device_id:"",is_vip:!1,osversion:"",appversion:"",platform:"",vip_expires_at:""}),[u,d]=F.useState({}),[h,p]=F.useState(!1);F.useEffect(()=>(s&&n(C8(t)),()=>{}),[n,t,s]),F.useEffect(()=>{s&&r?c({device_id:r.device.device_id||"",is_vip:r.device.is_vip,osversion:r.device.osversion||"",appversion:r.device.appversion||"",platform:r.device.platform||"",vip_expires_at:r.device.vip_expires_at?mn(new Date(r.device.vip_expires_at),"yyyy-MM-dd'T'HH:mm"):""}):s||c({device_id:"",is_vip:!1,osversion:"",appversion:"",platform:"",vip_expires_at:""})},[s,r,t]);const y=b=>{const{name:T,value:_,type:w,checked:O}=b.target;c(R=>({...R,[T]:w==="checkbox"?O:_}))},v=()=>{const b={};return o.device_id.trim()||(b.device_id="Device ID is required."),o.platform.trim()||(b.platform="Platform is required."),d(b),Object.keys(b).length===0},x=async b=>{if(b.preventDefault(),!!v()){p(!0);try{const T={...o,vip_expires_at:o.vip_expires_at?new Date(o.vip_expires_at).toISOString():null};s?(await n(n0e(t,T)),alert("Device updated successfully!")):(await n(t0e(T)),alert("Device created successfully!")),e("/devices")}catch(T){const _=T.message||JSON.stringify(T);alert(`Operation failed: ${_}`),console.error("Form submission error:",T)}finally{p(!1)}}};return s&&i&&!r?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading device for editing..."})]}):a&&s?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Device"}),S.jsx("p",{children:a.message||"An unexpected error occurred while fetching device details."}),S.jsx("button",{onClick:()=>e("/devices"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Device List"})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:s?"Edit Device":"Create New Device"}),S.jsx("button",{onClick:()=>e("/devices"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("form",{onSubmit:x,className:"space-y-5",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"device_id",className:"block text-sm font-medium text-gray-700",children:"Device ID"}),S.jsx("input",{type:"text",id:"device_id",name:"device_id",value:o.device_id,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),u.device_id&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.device_id})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-700",children:"Platform"}),S.jsx("input",{type:"text",id:"platform",name:"platform",value:o.platform,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),u.platform&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.platform})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"osversion",className:"block text-sm font-medium text-gray-700",children:"OS Version"}),S.jsx("input",{type:"text",id:"osversion",name:"osversion",value:o.osversion,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"appversion",className:"block text-sm font-medium text-gray-700",children:"App Version"}),S.jsx("input",{type:"text",id:"appversion",name:"appversion",value:o.appversion,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{id:"is_vip",name:"is_vip",type:"checkbox",checked:o.is_vip,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),S.jsx("label",{htmlFor:"is_vip",className:"ml-2 block text-sm text-gray-900",children:"Is VIP Device?"})]}),o.is_vip&&S.jsxs("div",{children:[S.jsx("label",{htmlFor:"vip_expires_at",className:"block text-sm font-medium text-gray-700",children:"VIP Expires At"}),S.jsx("input",{type:"datetime-local",id:"vip_expires_at",name:"vip_expires_at",value:o.vip_expires_at,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsx("div",{className:"flex justify-end space-x-3",children:S.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Saving...":s?"Update Device":"Create Device"})})]})]})},o0e=async()=>{var t,e;try{return(await Je.get("/subscription-keys")).data}catch(n){throw console.error("Error fetching subscription keys:",((t=n.response)==null?void 0:t.data)||n.message),((e=n.response)==null?void 0:e.data)||n.message}},l0e=async(t,e)=>{var n,r;try{return(await Je.post("/create-key",{type:t,max_devices:e})).data}catch(i){throw console.error("Error generating subscription key:",((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},u0e=async t=>{var e,n;try{return(await Je.put(`/subscriptions/${t}/deactivate`)).data.subscription}catch(r){throw console.error(`Error deactivating key ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},c0e=()=>async t=>{t({type:XF});try{const e=await o0e();t({type:QF,payload:e.subscription_keys})}catch(e){t({type:ZF,payload:e})}},f0e=(t,e)=>async n=>{n({type:JF});try{const r=await l0e(t,e);return n({type:e$,payload:r}),Promise.resolve(r)}catch(r){return n({type:t$,payload:r}),Promise.reject(r)}},d0e=t=>async e=>{e({type:n$});try{const n=await u0e(t);return e({type:r$,payload:n}),Promise.resolve(n)}catch(n){return e({type:i$,payload:n}),Promise.reject(n)}},h0e=()=>{const t=rn(),{subscriptionKeys:e,loading:n,error:r}=an(v=>v.subscriptions),[i,a]=F.useState(!1),[s,o]=F.useState("1month"),[c,u]=F.useState(1),[d,h]=F.useState(!1);F.useEffect(()=>{t(c0e())},[t]);const p=async()=>{if(!s||c<1){alert("Please select a key type and specify maximum devices.");return}h(!0);try{await t(f0e(s,c)),alert("Subscription key generated successfully!"),a(!1),o("1month"),u(1)}catch(v){alert(`Failed to generate key: ${v.message||JSON.stringify(v)}`),console.error("Generate key failed:",v)}finally{h(!1)}},y=async v=>{if(window.confirm(`Are you sure you want to deactivate key "${v}"? This will make it unusable.`))try{await t(d0e(v)),alert("Subscription key deactivated successfully!")}catch(x){alert(`Failed to deactivate key: ${x.message||JSON.stringify(x)}`),console.error("Deactivate key failed:",x)}};return n&&e.length===0?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading subscription keys..."})]}):r?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Subscriptions"}),S.jsx("p",{children:r.message||"An unexpected error occurred while fetching subscription keys."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Subscription Keys"}),S.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md shadow-sm hover:bg-green-700 transition duration-200",children:"Generate New Key"})]}),e.length===0&&!n?S.jsx("p",{className:"text-gray-600 text-center py-8",children:"No subscription keys found. Generate one to start!"}):S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Key"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Max Devices"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Devices Used"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires At"}),S.jsx("th",{scope:"col",className:"relative px-6 py-3 text-center",children:"Actions"})]})}),S.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.map(v=>S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S.jsx("span",{className:"font-mono bg-gray-100 p-1 rounded-md text-xs",children:v.key})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.type}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.max_devices}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.devices_used}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${v.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.is_active?"Active":"Inactive"})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.expires_at?mn(new Date(v.expires_at),"MMM dd, yyyy HH:mm"):"Lifetime"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:v.is_active&&S.jsx("button",{onClick:()=>y(v.key),className:"text-red-600 hover:text-red-900 px-3 py-1 rounded-md hover:bg-red-100 transition-colors duration-200",children:"Deactivate"})})]},v.key)),n&&e.length>0&&S.jsx("tr",{children:S.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400 mr-3"}),"Loading more keys..."]})})})]})]})}),i&&S.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex justify-center items-center",children:S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[S.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Generate New Subscription Key"}),S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{htmlFor:"keyType",className:"block text-sm font-medium text-gray-700",children:"Key Type"}),S.jsxs("select",{id:"keyType",name:"keyType",value:s,onChange:v=>o(v.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[S.jsx("option",{value:"1month",children:"1 Month"}),S.jsx("option",{value:"3months",children:"3 Months"}),S.jsx("option",{value:"lifetime",children:"Lifetime"})]})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("label",{htmlFor:"maxDevices",className:"block text-sm font-medium text-gray-700",children:"Max Devices"}),S.jsx("input",{type:"number",id:"maxDevices",name:"maxDevices",value:c,onChange:v=>u(Math.max(2,parseInt(v.target.value,10)||2)),min:"2",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsxs("div",{className:"flex justify-end space-x-3",children:[S.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition duration-200",disabled:d,children:"Cancel"}),S.jsx("button",{onClick:p,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:d,children:d?"Generating...":"Generate Key"})]})]})})]})},m0e=async()=>{var t,e;try{return(await Je.get("/suggestions")).data}catch(n){throw console.error("Error fetching suggestions:",((t=n.response)==null?void 0:t.data)||n.message),((e=n.response)==null?void 0:e.data)||n.message}},p0e=async t=>{var e,n;try{return(await Je.get(`/suggestions/${t}`)).data}catch(r){throw console.error(`Error fetching suggestion with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},g0e=async t=>{var e,n;try{return(await Je.post("/suggestions",t)).data}catch(r){throw console.error("Error creating suggestion:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},y0e=async(t,e)=>{var n,r;try{return(await Je.put(`/suggestions/${t}`,e)).data}catch(i){throw console.error(`Error updating suggestion with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},v0e=async t=>{var e,n;try{return await Je.delete(`/suggestions/${t}`),t}catch(r){throw console.error(`Error deleting suggestion with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Xj=()=>async t=>{t({type:a$});try{const e=await m0e();t({type:s$,payload:e})}catch(e){t({type:o$,payload:e})}},L8=t=>async e=>{e({type:l$});try{const n=await p0e(t);e({type:u$,payload:n})}catch(n){e({type:c$,payload:n})}},b0e=t=>async e=>{e({type:f$});try{const n=await g0e(t);return e({type:d$,payload:n}),Promise.resolve(n)}catch(n){return e({type:h$,payload:n}),Promise.reject(n)}},x0e=(t,e)=>async n=>{n({type:m$});try{const r=await y0e(t,e);return n({type:p$,payload:r}),Promise.resolve(r)}catch(r){return n({type:g$,payload:r}),Promise.reject(r)}},S0e=t=>async e=>{e({type:y$});try{return await v0e(t),e({type:v$,payload:t}),Promise.resolve(t)}catch(n){return e({type:b$,payload:n}),Promise.reject(n)}},E0e=()=>{const t=rn(),e=pn(),{suggestions:n,loading:r,error:i}=an(o=>o.suggestions),a=({url:o})=>{const{isLoading:c}=ad(o);if(!o)return null;if(c)return S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})})};F.useEffect(()=>{t(Xj())},[t]);const s=async o=>{if(window.confirm(`Are you sure you want to delete this suggestion (ID: ${o})? This action cannot be undone.`))try{await t(S0e(o)),alert("Suggestion deleted successfully!"),t(Xj())}catch(c){alert(`Failed to delete suggestion: ${c.message||JSON.stringify(c)}`),console.error("Delete failed:",c)}};return r&&n.length===0?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading suggestions..."})]}):i?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestions"}),S.jsx("p",{children:i.message||"An unexpected error occurred while fetching suggestions."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Feature Suggestions"}),S.jsx("button",{onClick:()=>e("/suggestions/new"),className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Add New Suggestion"})]}),n.length===0&&!r?S.jsx("p",{className:"text-gray-600 text-center py-8",children:"No suggestions found. Add one to get started!"}):S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content ID"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Link"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Is Ad?"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),S.jsx("th",{scope:"col",className:"relative px-6 py-3 text-center",children:"Actions"})]})}),S.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(o=>S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.id}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.contentId||"N/A"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.imgUrl&&S.jsx(a,{url:o.imgUrl})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.link?S.jsx("a",{href:o.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate max-w-[150px] block",children:o.link.length>30?o.link.substring(0,27)+"...":o.link}):"N/A"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.is_ads?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:o.is_ads?"Yes":"No"})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.created_at?mn(new Date(o.created_at),"MMM dd,yyyy HH:mm"):"N/A"}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[S.jsx("button",{onClick:()=>e(`/suggestions/details/${o.id}`),className:"text-blue-600 hover:text-blue-900 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors duration-200",title:"View Details",children:"View"}),S.jsx("button",{onClick:()=>e(`/suggestions/edit/${o.id}`),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded-md hover:bg-yellow-100 transition-colors duration-200",title:"Edit Suggestion",children:"Edit"}),S.jsx("button",{onClick:()=>s(o.id),className:"text-red-600 hover:text-red-900 px-2 py-1 rounded-md hover:bg-red-100 transition-colors duration-200",title:"Delete Suggestion",children:"Delete"})]})]},o.id)),r&&n.length>0&&S.jsx("tr",{children:S.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400 mr-3"}),"Loading more suggestions..."]})})})]})]})})]})},T0e=()=>{const{id:t}=ca(),e=pn(),n=rn(),{selectedSuggestion:r,loading:i,error:a}=an(o=>o.suggestions),s=({url:o})=>{const{isLoading:c}=ad(o);if(!o)return null;if(c)return S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})})};return F.useEffect(()=>{t&&n(L8(t))},[n,t]),i?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading suggestion details..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestion Details"}),S.jsx("p",{children:a.message||"An unexpected error occurred."}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Suggestions List"})]}):r?S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Suggestion Details"}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"ID:"}),S.jsx("span",{className:"text-gray-900",children:r.id})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Content ID:"}),S.jsx("span",{className:"text-gray-900",children:r.contentId||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Image URL:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.imgUrl?S.jsx("a",{href:r.imgUrl,target:"_blank",rel:"noopener noreferrer",children:r.imgUrl}):"N/A"})]}),r.imgUrl&&S.jsx(s,{url:r.imgUrl}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Link:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.link?S.jsx("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",children:r.link}):"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Is Ad?:"}),S.jsx("span",{className:`font-semibold ${r.is_ads?"text-purple-600":"text-gray-600"}`,children:r.is_ads?"Yes":"No"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),S.jsx("span",{className:"text-gray-900",children:r.created_at?mn(new Date(r.created_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Updated At:"}),S.jsx("span",{className:"text-gray-900",children:r.updated_at?mn(new Date(r.updated_at),"MMM dd, yyyy HH:mm"):"N/A"})]})]}),S.jsx("div",{className:"mt-8 flex justify-end space-x-3",children:S.jsx("button",{onClick:()=>e(`/suggestions/edit/${r.id}`),className:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Edit Suggestion"})})]}):S.jsxs("div",{className:"text-center p-6 text-gray-600",children:[S.jsxs("p",{children:["No suggestion found with ID: ",t,"."]}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Suggestions List"})]})},Qj=()=>{const{id:t}=ca(),e=pn(),n=rn(),{selectedSuggestion:r,loading:i,error:a}=an(T=>T.suggestions),s=({url:T})=>{const{isLoading:_}=ad(T);if(!T)return null;if(_)return S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})})},o=!!t,[c,u]=F.useState({contentId:"",imgUrl:"",link:"",is_ads:!1}),[d,h]=F.useState({}),[p,y]=F.useState(!1);F.useEffect(()=>{o&&n(L8(t))},[n,t,o]),F.useEffect(()=>{o&&r&&r.id===parseInt(t)?u({contentId:r.contentId||"",imgUrl:r.imgUrl||"",link:r.link||"",is_ads:r.is_ads}):o||u({contentId:"",imgUrl:"",link:"",is_ads:!1})},[o,r,t]);const v=T=>{const{name:_,value:w,type:O,checked:R}=T.target;u(C=>({...C,[_]:O==="checkbox"?R:w}))},x=()=>{const T={};return c.contentId.trim()||(T.contentId="Content ID is required."),c.imgUrl.trim()?/^https?:\/\/.+/.test(c.imgUrl)||(T.imgUrl="Invalid Image URL format."):T.imgUrl="Image URL is required.",c.link.trim()?/^https?:\/\/.+/.test(c.link)||(T.link="Invalid Link URL format."):T.link="Link is required.",h(T),Object.keys(T).length===0},b=async T=>{if(T.preventDefault(),!!x()){y(!0);try{o?(await n(x0e(t,c)),alert("Suggestion updated successfully!")):(await n(b0e(c)),alert("Suggestion created successfully!")),e("/suggestions")}catch(_){const w=_.message||JSON.stringify(_);alert(`Operation failed: ${w}`),console.error("Form submission error:",_)}finally{y(!1)}}};return o&&i&&!r?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading suggestion for editing..."})]}):a&&o?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestion"}),S.jsx("p",{children:a.message||"An unexpected error occurred while fetching suggestion details."}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Suggestion List"})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:o?"Edit Suggestion":"Create New Suggestion"}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("form",{onSubmit:b,className:"space-y-5",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"contentId",className:"block text-sm font-medium text-gray-700",children:"Content ID"}),S.jsx("input",{type:"text",id:"contentId",name:"contentId",value:c.contentId,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),d.contentId&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.contentId})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"imgUrl",className:"block text-sm font-medium text-gray-700",children:"Image URL"}),S.jsx("input",{type:"url",id:"imgUrl",name:"imgUrl",value:c.imgUrl,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),d.imgUrl&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.imgUrl}),c.imgUrl&&S.jsx(s,{url:c.imgUrl})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"link",className:"block text-sm font-medium text-gray-700",children:"Link URL"}),S.jsx("input",{type:"url",id:"link",name:"link",value:c.link,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),d.link&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.link})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{id:"is_ads",name:"is_ads",type:"checkbox",checked:c.is_ads,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),S.jsx("label",{htmlFor:"is_ads",className:"ml-2 block text-sm text-gray-900",children:"Is this an Ad?"})]}),S.jsx("div",{className:"flex justify-end space-x-3",children:S.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving...":o?"Update Suggestion":"Create Suggestion"})})]})]})},A0e=async(t=1,e=15)=>{var n,r;try{return(await Je.get("/contents/live-sport",{params:{page:t,per_page:e}})).data}catch(i){throw console.error("Error fetching live sports:",((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},w0e=async t=>{var e,n;try{return(await Je.get(`/contents/${t}`)).data.content}catch(r){throw console.error(`Error fetching live sport with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},_0e=async t=>{var e,n;try{return(await Je.post("/contents",t)).data}catch(r){throw console.error("Error creating live sport:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},R0e=async(t,e)=>{var n,r;try{return(await Je.put(`/contents/${t}`,e)).data}catch(i){throw console.error(`Error updating live sport with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},O0e=async t=>{var e,n;try{return await Je.delete(`/contents/${t}`),t}catch(r){throw console.error(`Error deleting live sport with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},$h=(t=1,e=15)=>async n=>{n({type:x$});try{const r=await A0e(t,e);n({type:S$,payload:r})}catch(r){n({type:E$,payload:r})}},D8=t=>async e=>{e({type:T$});try{const n=await w0e(t);e({type:A$,payload:n})}catch(n){e({type:w$,payload:n})}},C0e=t=>async e=>{e({type:_$});try{const n=await _0e(t);return e({type:R$,payload:n}),Promise.resolve(n)}catch(n){return e({type:O$,payload:n}),Promise.reject(n)}},L0e=(t,e)=>async n=>{n({type:C$});try{const r=await R0e(t,e);return n({type:L$,payload:r}),Promise.resolve(r)}catch(r){return n({type:D$,payload:r}),Promise.reject(r)}},D0e=t=>async e=>{e({type:I$});try{return await O0e(t),e({type:P$,payload:t}),Promise.resolve(t)}catch(n){return e({type:N$,payload:n}),Promise.reject(n)}},I0e=()=>{const t=rn(),e=pn(),{livesports:n,pagination:r,loading:i,error:a}=an(u=>u.livesports);F.useEffect(()=>{t($h(r.current_page,r.per_page))},[t,r.current_page,r.per_page]);const s=u=>{u>=1&&u<=r.last_page&&t($h(u,r.per_page))},o=u=>{t($h(1,parseInt(u.target.value,10)))},c=async(u,d)=>{if(window.confirm(`Are you sure you want to delete "${d}" (ID: ${u})? This action cannot be undone.`))try{await t(D0e(u)),alert("Live Sport content deleted successfully!"),t($h(r.current_page,r.per_page))}catch(h){alert(`Failed to delete content: ${h.message||JSON.stringify(h)}`),console.error("Delete failed:",h)}};return i&&n.length===0?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading live sports content..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Live Sports Content"}),S.jsx("p",{children:a.message||"An unexpected error occurred while fetching live sports content."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[S.jsxs("div",{className:"lg:flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Live Sports Content"}),S.jsxs("div",{className:"space-x-2 mt-3",children:[S.jsx("button",{onClick:()=>e("/livesports/new/live"),className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Add New Live TV"}),S.jsx("button",{onClick:()=>e("/livesports/new/sport"),className:"px-4 py-2 bg-purple-600 text-white rounded-md shadow-sm hover:bg-purple-700 transition duration-200",children:"Add New Sport Event"})]})]}),n.length===0&&!i?S.jsx("p",{className:"text-gray-600 text-center py-8",children:"No live sports content found."}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thumbnail"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content URL / Streams"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),S.jsx("th",{scope:"col",className:"relative px-6 py-3 text-center",children:"Actions"})]})}),S.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(u=>S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.id}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.title}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u.category==="Live"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:u.category})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.profileImg&&S.jsx("img",{src:u.profileImg,alt:"Thumbnail",className:"w-16 h-16 object-cover rounded-md",onError:d=>{}})}),S.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:u.content&&u.category==="Live"?S.jsx("a",{href:u.content,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:u.content.length>50?`${u.content.substring(0,47)}...`:u.content}):u.category==="Sport"&&u.files&&u.files.stream_list?S.jsx("ul",{className:"list-disc list-inside text-xs",children:u.files.stream_list.map((d,h)=>S.jsx("li",{className:"truncate",children:S.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:underline",children:[d.quality,":"," ",d.url.length>30?`${d.url.substring(0,27)}...`:d.url]})},h))}):"N/A"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.tags&&u.tags.length>0?u.tags.join(", "):"N/A"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.created_at?mn(new Date(u.created_at),"MMM dd,yyyy HH:mm"):"N/A"}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[S.jsx("button",{onClick:()=>e(`/livesports/details/${u.id}`),className:"text-blue-600 hover:text-blue-900 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors duration-200",title:"View Details",children:"View"}),S.jsx("button",{onClick:()=>e(`/livesports/edit/${u.id}`),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded-md hover:bg-yellow-100 transition-colors duration-200",title:"Edit Content",children:"Edit"}),S.jsx("button",{onClick:()=>c(u.id,u.title),className:"text-red-600 hover:text-red-900 px-2 py-1 rounded-md hover:bg-red-100 transition-colors duration-200",title:"Delete Content",children:"Delete"})]})]},u.id)),i&&n.length>0&&S.jsx("tr",{children:S.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400 mr-3"}),"Loading more content..."]})})})]})]})}),S.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("label",{htmlFor:"perPage",className:"text-sm text-gray-700",children:"Show:"}),S.jsx("select",{id:"perPage",value:r.per_page,onChange:o,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm",children:[10,15,20,50].map(u=>S.jsx("option",{value:u,children:u},u))}),S.jsx("span",{className:"text-sm text-gray-700",children:"entries"})]}),S.jsxs("div",{className:"flex items-center space-x-1",children:[S.jsx("button",{onClick:()=>s(r.current_page-1),disabled:r.current_page===1,className:"px-3 py-1 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:r.last_page},(u,d)=>d+1).map(u=>S.jsx("button",{onClick:()=>s(u),className:`px-3 py-1 rounded-md ${r.current_page===u?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:u},u)),S.jsx("button",{onClick:()=>s(r.current_page+1),disabled:r.current_page===r.last_page,className:"px-3 py-1 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),S.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",r.current_page," of ",r.last_page," (Total"," ",r.total," items)"]})]})]})]})},Zj=()=>{const{id:t,type:e}=ca(),n=pn(),r=rn(),{selectedLiveSport:i,loading:a,error:s}=an(M=>M.livesports),o=!!t,c=e||(o&&i?i.category==="Live"?"live":"sport":"live"),u={title:"",profileImg:"",coverImg:"",content:"Long content here",tags:[],category:c==="live"?"Live":"Sport",duration:"unknow",isvip:!1,files:{trailer:{url:"https://telegram.org",quality:"",size:""},stream:[{url:"",quality:"",size:""}],download:[{url:"https://telegram.org",quality:"",size:""}]}},[d,h]=F.useState(u),[p,y]=F.useState({}),[v,x]=F.useState(!1),[b,T]=F.useState("");F.useEffect(()=>{o&&r(D8(t))},[r,t,o]),F.useEffect(()=>{o&&i&&i.id===parseInt(t)?(h({title:i.title||"",profileImg:i.profileImg||"",coverImg:i.coverImg||"",content:i.content||"",tags:i.tags||[],category:i.category||"Live",duration:i.duration||"unknow",isvip:i.isvip||!1,files:i.files||{stream:[]}}),T("")):o||h({...u,category:c==="live"?"Live":"Sport"})},[o,i,t,c]);const _=M=>{const{name:$,value:K,type:W,checked:Y}=M.target;h(j=>({...j,[$]:W==="checkbox"?Y:K}))},w=M=>{T(M.target.value)},O=()=>{b.trim()!==""&&!d.tags.includes(b.trim())&&(h(M=>({...M,tags:[...M.tags,b.trim()]})),T(""))},R=M=>{h($=>({...$,tags:$.tags.filter(K=>K!==M)}))},C=(M,$,K)=>{const W=d.files.stream.map((Y,j)=>j===M?{...Y,[$]:K}:Y);h(Y=>({...Y,files:{...Y.files,stream:W}}))},L=()=>{h(M=>({...M,files:{...M.files,stream:[...M.files.stream,{quality:"",url:"",size:""}]}}))},P=M=>{h($=>({...$,files:{...$.files,stream:$.files.stream.filter((K,W)=>W!==M)}}))},N=()=>{const M={};return d.title.trim()||(M.title="Title is required."),d.profileImg.trim()?/^https?:\/\/.+/.test(d.profileImg)||(M.profileImg="Invalid Profile Image URL."):M.profileImg="Profile Image URL is required.",d.coverImg.trim()?/^https?:\/\/.+/.test(d.coverImg)||(M.coverImg="Invalid Cover Image URL."):M.coverImg="Cover Image URL is required.",c==="live"?d.content.trim()?/^https?:\/\/.+\.m3u8/.test(d.content)||(M.content="Content URL must be a valid .m3u8 URL."):M.content="Content URL is required for Live TV.":c==="sport"&&(!d.files.stream||d.files.stream.length===0?M.stream="At least one stream is required for Sport events.":d.files.stream.forEach(($,K)=>{$.quality.trim()||(M[`stream_quality_${K}`]="Quality is required."),$.url.trim()?/^https?:\/\/.+/.test($.url)||(M[`stream_url_${K}`]="Invalid URL format."):M[`stream_url_${K}`]="URL is required."})),y(M),Object.keys(M).length===0},k=async M=>{if(M.preventDefault(),!!N()){x(!0);try{const $={...d,category:d.category};c==="live"&&delete $.files,o?(await r(L0e(t,$)),alert("Live Sport content updated successfully!")):(await r(C0e($)),alert("Live Sport content created successfully!")),n("/livesports")}catch($){const K=$.message||JSON.stringify($);alert(`Operation failed: ${K}`),console.error("Form submission error:",$)}finally{x(!1)}}};return o&&a&&!i?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading content for editing..."})]}):s&&o?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Content"}),S.jsx("p",{children:s.message||"An unexpected error occurred while fetching content details."}),S.jsx("button",{onClick:()=>n("/livesports"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Live Sports List"})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[o?"Edit":"Create New"," ",c==="live"?"Live TV":"Sport Event"]}),S.jsx("button",{onClick:()=>n("/livesports"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("form",{onSubmit:k,className:"space-y-5",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),S.jsx("input",{type:"text",id:"title",name:"title",value:d.title,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.title&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.title})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"profileImg",className:"block text-sm font-medium text-gray-700",children:"Profile Image URL (Thumbnail)"}),S.jsx("input",{type:"url",id:"profileImg",name:"profileImg",value:d.profileImg,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.profileImg&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.profileImg}),d.profileImg&&S.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preview:"}),S.jsx("img",{src:d.profileImg,alt:"Profile Img Preview",className:"max-w-full h-auto max-h-32 object-contain mx-auto rounded-md",onError:M=>{}})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"coverImg",className:"block text-sm font-medium text-gray-700",children:"Cover Image URL"}),S.jsx("input",{type:"url",id:"coverImg",name:"coverImg",value:d.coverImg,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.coverImg&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.coverImg}),d.coverImg&&S.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preview:"}),S.jsx("img",{src:d.coverImg,alt:"Cover Img Preview",className:"max-w-full h-auto max-h-32 object-contain mx-auto rounded-md",onError:M=>{}})]})]}),c==="live"&&S.jsxs("div",{children:[S.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Live Stream Content URL (.m3u8)"}),S.jsx("input",{type:"url",id:"content",name:"content",value:d.content,onChange:_,placeholder:"e.g., https://example.com/live/stream.m3u8",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.content&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.content})]}),c==="sport"&&S.jsxs("div",{className:"border border-gray-200 p-4 rounded-md",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Stream List for Sport Event"}),d.files.stream.map((M,$)=>S.jsxs("div",{className:"flex space-x-2 mb-3 items-end",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{htmlFor:`quality-${$}`,className:"block text-xs font-medium text-gray-700",children:"Quality"}),S.jsx("input",{type:"text",id:`quality-${$}`,value:M.quality,onChange:K=>C($,"quality",K.target.value),placeholder:"e.g., SD, HD, FHD",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p[`stream_quality_${$}`]&&S.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`stream_quality_${$}`]})]}),S.jsxs("div",{className:"flex-2",children:[S.jsx("label",{htmlFor:`url-${$}`,className:"block text-xs font-medium text-gray-700",children:"Stream URL"}),S.jsx("input",{type:"url",id:`url-${$}`,value:M.url,onChange:K=>C($,"url",K.target.value),placeholder:"e.g., https://example.com/sport/event.m3u8",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p[`stream_url_${$}`]&&S.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`stream_url_${$}`]})]}),S.jsx("button",{type:"button",onClick:()=>P($),className:"p-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition duration-200",children:"Remove"})]},$)),S.jsx("button",{type:"button",onClick:L,className:"mt-2 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition duration-200",children:"Add Stream"}),p.stream&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.stream})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:"Tags (press Enter to add)"}),S.jsxs("div",{className:"flex items-center mt-1",children:[S.jsx("input",{type:"text",id:"tagInput",value:b,onChange:w,onKeyDown:M=>{M.key==="Enter"&&(M.preventDefault(),O())},placeholder:"e.g., football, premier league",className:"block w-full border border-gray-300 rounded-l-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),S.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-r-md hover:bg-gray-300 transition duration-200",children:"Add"})]}),S.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:d.tags.map(M=>S.jsxs("span",{className:"flex items-center bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[M,S.jsx("button",{type:"button",onClick:()=>R(M),className:"ml-1 text-blue-800 hover:text-blue-900",children:"×"})]},M))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700",children:"Duration (e.g., 1h 30m, unknown)"}),S.jsx("input",{type:"text",id:"duration",name:"duration",value:d.duration,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{id:"isvip",name:"isvip",type:"checkbox",checked:d.isvip,onChange:_,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),S.jsx("label",{htmlFor:"isvip",className:"ml-2 block text-sm text-gray-900",children:"Is VIP Content?"})]}),S.jsx("div",{className:"flex justify-end space-x-3",children:S.jsx("button",{type:"submit",disabled:v,className:"px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Saving...":o?"Update Content":"Create Content"})})]})]})},P0e=()=>{var s;const{id:t}=ca(),e=pn(),n=rn(),{selectedLiveSport:r,loading:i,error:a}=an(o=>o.livesports);return F.useEffect(()=>{t&&n(D8(t))},[n,t]),i?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading content details..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Content Details"}),S.jsx("p",{children:a.message||"An unexpected error occurred."}),S.jsx("button",{onClick:()=>e("/livesports"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Live Sports List"})]}):r?S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Live Sports Details"}),S.jsx("button",{onClick:()=>e("/livesports"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"ID:"}),S.jsx("span",{className:"text-gray-900",children:r.id})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Title:"}),S.jsx("span",{className:"text-gray-900",children:r.title||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Category:"}),S.jsx("span",{className:`font-semibold ${r.category==="Live"?"text-blue-600":"text-orange-600"}`,children:r.category||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Profile Image URL:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.profileImg?S.jsx("a",{href:r.profileImg,target:"_blank",rel:"noopener noreferrer",children:r.profileImg}):"N/A"})]}),r.profileImg&&S.jsx("div",{className:"text-center mt-2",children:S.jsx("img",{src:r.profileImg,alt:"Profile Image Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md border border-gray-200",onError:o=>{o.target.src="https://via.placeholder.com/300x200?text=Image+Not+Available"}})}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Cover Image URL:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.coverImg?S.jsx("a",{href:r.coverImg,target:"_blank",rel:"noopener noreferrer",children:r.coverImg}):"N/A"})]}),r.coverImg&&S.jsx("div",{className:"text-center mt-2",children:S.jsx("img",{src:r.coverImg,alt:"Cover Image Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md border border-gray-200",onError:o=>{o.target.src="https://via.placeholder.com/300x200?text=Image+Not+Available"}})}),r.category==="Live"&&S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Content URL:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.content?S.jsx("a",{href:r.content,target:"_blank",rel:"noopener noreferrer",children:r.content}):"N/A"})]}),r.category==="Sport"&&((s=r.files)==null?void 0:s.stream_list)&&S.jsxs("div",{children:[S.jsx("span",{className:"font-semibold text-gray-700 block mb-2",children:"Stream List:"}),S.jsx("ul",{className:"list-disc list-inside space-y-1",children:r.files.stream_list.map((o,c)=>S.jsxs("li",{className:"text-gray-900 break-words",children:[S.jsxs("span",{className:"font-medium",children:[o.quality||"N/A",":"]})," ",S.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:o.url||"N/A"})]},c))})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Tags:"}),S.jsx("span",{className:"text-gray-900",children:r.tags&&r.tags.length>0?r.tags.join(", "):"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Duration:"}),S.jsx("span",{className:"text-gray-900",children:r.duration||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Is VIP:"}),S.jsx("span",{className:`font-semibold ${r.isvip?"text-green-600":"text-red-600"}`,children:r.isvip?"Yes":"No"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),S.jsx("span",{className:"text-gray-900",children:r.created_at?mn(new Date(r.created_at),"MMM dd,yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Updated At:"}),S.jsx("span",{className:"text-gray-900",children:r.updated_at?mn(new Date(r.updated_at),"MMM dd,yyyy HH:mm"):"N/A"})]})]}),S.jsx("div",{className:"mt-8 flex justify-end space-x-3",children:S.jsx("button",{onClick:()=>e(`/livesports/edit/${r.id}`),className:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Edit Content"})})]}):S.jsxs("div",{className:"text-center p-6 text-gray-600",children:[S.jsxs("p",{children:["No live sports content found with ID: ",t,"."]}),S.jsx("button",{onClick:()=>e("/livesports"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Live Sports List"})]})},N0e=async()=>{var t;try{return(await Je.get("/matches")).data}catch(e){throw((t=e.response)==null?void 0:t.data)||{message:"Failed to fetch matches."}}},M0e=async t=>{var e;try{return(await Je.get(`/matches/${t}/servers`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||{message:"Failed to fetch match details."}}},k0e=()=>async t=>{t({type:M$});try{const e=await N0e();t({type:k$,payload:e})}catch(e){t({type:j$,payload:e})}},j0e=t=>async e=>{e({type:U$});try{const n=await M0e(t);e({type:B$,payload:n})}catch(n){e({type:F$,payload:n})}},U0e=["live","upcoming","finished"],B0e=()=>{var c;const t=rn(),e=pn(),{matches:n,loading:r,error:i}=an(u=>u.sport),[a,s]=F.useState("live");F.useEffect(()=>{t(k0e())},[t]);const o=((c=n.football)==null?void 0:c[a])||[];return S.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 via-white to-gray-100 rounded-2xl shadow-xl max-w-full sm:max-w-6xl mx-auto",children:[S.jsx("h1",{className:"text-4xl font-extrabold text-blue-700 mb-8 text-center tracking-tight drop-shadow",children:"Football Matches"}),S.jsx("div",{className:"flex justify-center gap-3 mb-8",children:U0e.map(u=>S.jsx("button",{onClick:()=>s(u),className:`px-6 py-2 rounded-full text-base font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 ${a===u?"bg-blue-600 text-white scale-105 shadow-lg":"bg-white text-blue-700 border border-blue-200 hover:bg-blue-100"}`,children:u.charAt(0).toUpperCase()+u.slice(1)},u))}),r?S.jsxs("div",{className:"flex flex-col justify-center items-center h-40",children:[S.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"}),S.jsx("span",{className:"text-xl text-blue-700 font-semibold",children:"Loading matches..."})]}):i?S.jsx("div",{className:"text-center text-red-500 text-lg font-semibold py-8",children:i.message||"Failed to load matches."}):o.length===0?S.jsx("div",{className:"text-center text-gray-500 py-12 text-lg font-medium",children:"No matches found."}):S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((u,d)=>S.jsxs("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-shadow duration-300 flex flex-col border border-blue-100 overflow-hidden group",children:[S.jsxs("div",{className:"flex flex-row items-center justify-between p-4 sm:p-6 bg-gradient-to-r from-blue-50 via-white to-gray-50 gap-2 sm:gap-4 w-full overflow-x-auto",children:[S.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 min-w-0",children:[S.jsx("img",{src:u.home_team_logo,alt:u.home_team_name,className:"w-14 h-14 object-contain rounded-full border-2 border-blue-200 group-hover:border-blue-400 transition"}),S.jsx("span",{className:"font-bold text-gray-800 text-sm sm:text-base text-center overflow-hidden text-ellipsis whitespace-nowrap max-w-[100px] sm:max-w-[140px]",children:u.home_team_name})]}),S.jsx("span",{className:"text-base text-blue-500 font-bold mx-2 sm:mx-4 my-2 sm:my-0",children:"vs"}),S.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 min-w-0",children:[S.jsx("img",{src:u.away_team_logo,alt:u.away_team_name,className:"w-14 h-14 object-contain rounded-full border-2 border-blue-200 group-hover:border-blue-400 transition"}),S.jsx("span",{className:"font-bold text-gray-800 text-sm sm:text-base text-center overflow-hidden text-ellipsis whitespace-nowrap max-w-[100px] sm:max-w-[140px]",children:u.away_team_name})]})]}),S.jsxs("div",{className:"px-6 pb-6 flex flex-col gap-2",children:[S.jsx("span",{className:"text-sm text-blue-600 font-semibold tracking-wide",children:u.league_name}),S.jsx("span",{className:"text-xs text-gray-500 font-medium",children:(()=>{let h;return typeof u.match_time=="string"&&u.match_time.includes("MMT")?h=new Date(u.match_time.replace(" MMT","").replace(/-/g,"/")):h=new Date(u.match_time),RY(h)?`Today ${mn(h,"HH:mm")} MMT`:LY(h)?`Yesterday ${mn(h,"HH:mm")} MMT`:OY(h)?`Tomorrow ${mn(h,"HH:mm")} MMT`:`${mn(h,"yyyy-MM-dd HH:mm")} MMT`})()}),S.jsx("button",{onClick:()=>e(`/sport/match/${u.room_num}`),className:"mt-4 px-5 py-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition duration-200 text-base font-bold w-full group-hover:scale-105 group-hover:shadow-lg",children:"View Details"})]})]},d))})]})},be=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},F0e=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=$0e},$0e=Number.MAX_SAFE_INTEGER||9007199254740991;let Te=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),re=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t}({}),D=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t}({});var He={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Se={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Xo{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class G0e{constructor(e,n,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Xo(e),this.fast_=new Xo(n),this.defaultTTFB_=i,this.ttfb_=new Xo(e)}update(e,n){const{slow_:r,fast_:i,ttfb_:a}=this;r.halfLife!==e&&(this.slow_=new Xo(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==n&&(this.fast_=new Xo(n,i.getEstimate(),i.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new Xo(e,a.getEstimate(),a.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,i=e/1e3,a=r/i;this.fast_.sample(i,a),this.slow_.sample(i,a)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function V0e(t,e,n){return(e=H0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ut(){return ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ut.apply(null,arguments)}function Jj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jj(Object(n),!0).forEach(function(r){V0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H0e(t){var e=q0e(t,"string");return typeof e=="symbol"?e:e+""}class ri{constructor(e,n){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=Ga,this.debug=n.debug.bind(null,r),this.log=n.log.bind(null,r),this.warn=n.warn.bind(null,r),this.info=n.info.bind(null,r),this.error=n.error.bind(null,r)}}const Ga=function(){},z0e={trace:Ga,debug:Ga,log:Ga,warn:Ga,info:Ga,error:Ga};function NA(){return ut({},z0e)}function K0e(t,e){const n=self.console[t];return n?n.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):Ga}function eU(t,e,n){return e[t]?e[t].bind(e):K0e(t,n)}const MA=NA();function Y0e(t,e,n){const r=NA();if(typeof console=="object"&&t===!0||typeof t=="object"){const i=["debug","log","info","warn","error"];i.forEach(a=>{r[a]=eU(a,t,n)});try{r.log(`Debug logs enabled for "${e}" in hls.js version 1.6.7`)}catch{return NA()}i.forEach(a=>{MA[a]=eU(a,t)})}else ut(MA,r);return r}const Ze=MA;function Qa(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function W0e(t){return typeof self<"u"&&t===self.ManagedMediaSource}function I8(t,e){const n=Object.keys(t),r=Object.keys(e),i=n.length,a=r.length;return!i||!a||i===a&&!n.some(s=>r.indexOf(s)===-1)}function fr(t,e=!1){if(typeof TextDecoder<"u"){const u=new TextDecoder("utf-8").decode(t);if(e){const d=u.indexOf("\0");return d!==-1?u.substring(0,d):u}return u.replace(/\0/g,"")}const n=t.length;let r,i,a,s="",o=0;for(;o<n;){if(r=t[o++],r===0&&e)return s;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:i=t[o++],s+=String.fromCharCode((r&31)<<6|i&63);break;case 14:i=t[o++],a=t[o++],s+=String.fromCharCode((r&15)<<12|(i&63)<<6|(a&63)<<0);break}}return s}const Ns={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}};function P8(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function X0e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SE={exports:{}},tU;function Q0e(){return tU||(tU=1,function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(c,u,d){if(d=d||{},c=c.trim(),u=u.trim(),!u){if(!d.alwaysNormalize)return c;var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var p=o.parseURL(u);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return d.alwaysNormalize?(p.path=o.normalizePath(p.path),o.buildURLFromParts(p)):u;var y=o.parseURL(c);if(!y)throw new Error("Error trying to parse base URL.");if(!y.netLoc&&y.path&&y.path[0]!=="/"){var v=i.exec(y.path);y.netLoc=v[1],y.path=v[2]}y.netLoc&&!y.path&&(y.path="/");var x={scheme:y.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(x.netLoc=y.netLoc,p.path[0]!=="/"))if(!p.path)x.path=y.path,p.params||(x.params=y.params,p.query||(x.query=y.query));else{var b=y.path,T=b.substring(0,b.lastIndexOf("/")+1)+p.path;x.path=o.normalizePath(T)}return x.path===null&&(x.path=d.alwaysNormalize?o.normalizePath(p.path):p.path),o.buildURLFromParts(x)},parseURL:function(c){var u=r.exec(c);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(a,"");c.length!==(c=c.replace(s,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}};t.exports=o})()}(SE)),SE.exports}var Yw=Q0e();class Ww{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var gt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class N8{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,J0e(this,"stats")}setByteRange(e,n){const r=e.split("@",2);let i;r.length===1?i=(n==null?void 0:n.byteRangeEndOffset)||0:i=parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[gt.AUDIO]:null,[gt.VIDEO]:null,[gt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Ww),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Yw.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[gt.AUDIO]=null,e[gt.VIDEO]=null,e[gt.AUDIOVIDEO]=null}}function Kt(t){return t.sn!=="initSegment"}class EE extends N8{constructor(e,n){super(n),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],n=this.byteRange[1];if(be(e)&&be(n))return n-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=be(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!be(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Kt(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,r,i,a,s=!1){const{elementaryStreams:o}=this,c=o[e];if(!c){o[e]={startPTS:n,endPTS:r,startDTS:i,endDTS:a,partial:s};return}c.startPTS=Math.min(c.startPTS,n),c.endPTS=Math.max(c.endPTS,r),c.startDTS=Math.min(c.startDTS,i),c.endDTS=Math.max(c.endDTS,a)}}class Z0e extends N8{constructor(e,n,r,i,a){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=i;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function M8(t,e){const n=Object.getPrototypeOf(t);if(n){const r=Object.getOwnPropertyDescriptor(n,e);return r||M8(n,e)}}function J0e(t,e){const n=M8(t,e);n&&(n.enumerable=!0,Object.defineProperty(t,e,n))}const nU=Math.pow(2,32)-1,eye=[].push,k8={video:1,audio:2,id3:3,text:4};function dn(t){return String.fromCharCode.apply(null,t)}function j8(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function Ne(t,e){const n=U8(t,e);return n<0?4294967296+n:n}function rU(t,e){let n=Ne(t,e);return n*=Math.pow(2,32),n+=Ne(t,e+4),n}function U8(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function tye(t){const e=t.byteLength;for(let n=0;n<e;){const r=Ne(t,n);if(r>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=r>1?n+r:e}return!1}function Ve(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let i=0;i<r;){const a=Ne(t,i),s=dn(t.subarray(i+4,i+8)),o=a>1?i+a:r;if(s===e[0])if(e.length===1)n.push(t.subarray(i+8,o));else{const c=Ve(t.subarray(i+8,o),e.slice(1));c.length&&eye.apply(n,c)}i=o}return n}function nye(t){const e=[],n=t[0];let r=8;const i=Ne(t,r);r+=4;let a=0,s=0;n===0?(a=Ne(t,r),s=Ne(t,r+4),r+=8):(a=rU(t,r),s=rU(t,r+8),r+=16),r+=2;let o=t.length+s;const c=j8(t,r);r+=2;for(let u=0;u<c;u++){let d=r;const h=Ne(t,d);d+=4;const p=h&2147483647;if((h&2147483648)>>>31===1)return Ze.warn("SIDX has hierarchical references (not supported)"),null;const v=Ne(t,d);d+=4,e.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/i,start:o,end:o+p-1}}),o+=p,d+=4,r=d}return{earliestPresentationTime:a,timescale:i,version:n,referencesCount:c,references:e}}function B8(t){const e=[],n=Ve(t,["moov","trak"]);for(let i=0;i<n.length;i++){const a=n[i],s=Ve(a,["tkhd"])[0];if(s){let o=s[0];const c=Ne(s,o===0?12:20),u=Ve(a,["mdia","mdhd"])[0];if(u){o=u[0];const d=Ne(u,o===0?12:20),h=Ve(a,["mdia","hdlr"])[0];if(h){const p=dn(h.subarray(8,12)),y={soun:gt.AUDIO,vide:gt.VIDEO}[p],v=Ve(a,["mdia","minf","stbl","stsd"])[0],x=rye(v);y?(e[c]={timescale:d,type:y,stsd:x},e[y]=ht({timescale:d,id:c},x)):e[c]={timescale:d,type:p,stsd:x}}}}}return Ve(t,["moov","mvex","trex"]).forEach(i=>{const a=Ne(i,4),s=e[a];s&&(s.default={duration:Ne(i,12),flags:Ne(i,20)})}),e}function rye(t){const e=t.subarray(8),n=e.subarray(86),r=dn(e.subarray(4,8));let i=r,a;const s=r==="enca"||r==="encv";if(s){const u=Ve(e,[r])[0].subarray(r==="enca"?28:78);Ve(u,["sinf"]).forEach(h=>{const p=Ve(h,["schm"])[0];if(p){const y=dn(p.subarray(4,8));if(y==="cbcs"||y==="cenc"){const v=Ve(h,["frma"])[0];v&&(i=dn(v))}}})}const o=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const c=Ve(n,["avcC"])[0];c&&c.length>3&&(i+="."+Vh(c[1])+Vh(c[2])+Vh(c[3]),a=Gh(o==="avc1"?"dva1":"dvav",n));break}case"mp4a":{const c=Ve(e,[r])[0],u=Ve(c.subarray(28),["esds"])[0];if(u&&u.length>7){let d=4;if(u[d++]!==3)break;d=TE(u,d),d+=2;const h=u[d++];if(h&128&&(d+=2),h&64&&(d+=u[d++]),u[d++]!==4)break;d=TE(u,d);const p=u[d++];if(p===64)i+="."+Vh(p);else break;if(d+=12,u[d++]!==5)break;d=TE(u,d);const y=u[d++];let v=(y&248)>>3;v===31&&(v+=1+((y&7)<<3)+((u[d]&224)>>5)),i+="."+v}break}case"hvc1":case"hev1":{const c=Ve(n,["hvcC"])[0];if(c&&c.length>12){const u=c[1],d=["","A","B","C"][u>>6],h=u&31,p=Ne(c,2),y=(u&32)>>5?"H":"L",v=c[12],x=c.subarray(6,12);i+="."+d+h,i+="."+iye(p).toString(16).toUpperCase(),i+="."+y+v;let b="";for(let T=x.length;T--;){const _=x[T];(_||b)&&(b="."+_.toString(16).toUpperCase()+b)}i+=b}a=Gh(o=="hev1"?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=Gh(i,n)||i;break}case"vp09":{const c=Ve(n,["vpcC"])[0];if(c&&c.length>6){const u=c[4],d=c[5],h=c[6]>>4&15;i+="."+di(u)+"."+di(d)+"."+di(h)}break}case"av01":{const c=Ve(n,["av1C"])[0];if(c&&c.length>2){const u=c[1]>>>5,d=c[1]&31,h=c[2]>>>7?"H":"M",p=(c[2]&64)>>6,y=(c[2]&32)>>5,v=u===2&&p?y?12:10:p?10:8,x=(c[2]&16)>>4,b=(c[2]&8)>>3,T=(c[2]&4)>>2,_=c[2]&3;i+="."+u+"."+di(d)+h+"."+di(v)+"."+x+"."+b+T+_+"."+di(1)+"."+di(1)+"."+di(1)+"."+0,a=Gh("dav1",n)}break}}return{codec:i,encrypted:s,supplemental:a}}function Gh(t,e){const n=Ve(e,["dvvC"]),r=n.length?n[0]:Ve(e,["dvcC"])[0];if(r){const i=r[2]>>1&127,a=r[2]<<5&32|r[3]>>3&31;return t+"."+di(i)+"."+di(a)}}function iye(t){let e=0;for(let n=0;n<32;n++)e|=(t>>n&1)<<31-n;return e>>>0}function TE(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function Vh(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function di(t){return(t<10?"0":"")+t}function aye(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&Ve(t,["moov","trak"]).forEach(i=>{const s=Ve(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=Ve(s,["enca"]);const c=o.length>0;c||(o=Ve(s,["encv"])),o.forEach(u=>{const d=c?u.subarray(28):u.subarray(78);Ve(d,["sinf"]).forEach(p=>{const y=sye(p);if(y){const v=y.subarray(8,24);v.some(x=>x!==0)||(Ze.log(`[eme] Patching keyId in 'enc${c?"a":"v"}>sinf>>tenc' box: ${Ns.hexDump(v)} -> ${Ns.hexDump(n)}`),y.set(n,8))}})})}),t}function sye(t){const e=Ve(t,["schm"])[0];if(e){const n=dn(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return Ve(t,["schi","tenc"])[0]}return null}function oye(t,e,n){const r={},i=Ve(t,["moof","traf"]);for(let a=0;a<i.length;a++){const s=i[a],o=Ve(s,["tfhd"])[0],c=Ne(o,4),u=e[c];if(!u)continue;const d=r[c]||(r[c]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type}),h=Ve(s,["tfdt"])[0];if(h){const w=h[0];let O=Ne(h,4);w===1&&(O===nU?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(O*=nU+1,O+=Ne(h,8))),be(O)&&(!be(d.start)||O<d.start)&&(d.start=O)}const p=u.default,y=Ne(o,0)|(p==null?void 0:p.flags);let v=(p==null?void 0:p.duration)||0;y&8&&(y&2?v=Ne(o,12):v=Ne(o,8));const x=Ve(s,["trun"]);let b=d.start||0,T=0,_=v;for(let w=0;w<x.length;w++){const O=x[w],R=Ne(O,4),C=d.sampleCount;d.sampleCount+=R;const L=O[3]&1,P=O[3]&4,N=O[2]&1,k=O[2]&2,M=O[2]&4,$=O[2]&8;let K=8,W=R;for(L&&(K+=4),P&&R&&(!(O[K+1]&1)&&d.keyFrameIndex===void 0&&(d.keyFrameIndex=C),K+=4,N?(_=Ne(O,K),K+=4):_=v,k&&(K+=4),$&&(K+=4),b+=_,T+=_,W--);W--;)N?(_=Ne(O,K),K+=4):_=v,k&&(K+=4),M&&(O[K+1]&1||d.keyFrameIndex===void 0&&(d.keyFrameIndex=d.sampleCount-(W+1),d.keyFrameStart=b),K+=4),$&&(K+=4),b+=_,T+=_;!T&&v&&(T+=v*R)}d.duration+=T}if(!Object.keys(r).some(a=>r[a].duration)){let a=1/0,s=0;const o=Ve(t,["sidx"]);for(let c=0;c<o.length;c++){const u=nye(o[c]);if(u!=null&&u.references){a=Math.min(a,u.earliestPresentationTime/u.timescale);const d=u.references.reduce((h,p)=>h+p.info.duration||0,0);s=Math.max(s,d+u.earliestPresentationTime/u.timescale)}}s&&be(s)&&Object.keys(r).forEach(c=>{r[c].duration||(r[c].duration=s*r[c].timescale-r[c].start)})}return r}function lye(t){const e={valid:null,remainder:null},n=Ve(t,["moof"]);if(n.length<2)return e.remainder=t,e;const r=n[n.length-1];return e.valid=t.slice(0,r.byteOffset-8),e.remainder=t.slice(r.byteOffset-8),e}function kr(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function iU(t,e){const n=[],r=e.samples,i=e.timescale,a=e.id;let s=!1;return Ve(r,["moof"]).map(c=>{const u=c.byteOffset-8;Ve(c,["traf"]).map(h=>{const p=Ve(h,["tfdt"]).map(y=>{const v=y[0];let x=Ne(y,4);return v===1&&(x*=Math.pow(2,32),x+=Ne(y,8)),x/i})[0];return p!==void 0&&(t=p),Ve(h,["tfhd"]).map(y=>{const v=Ne(y,4),x=Ne(y,0)&16777215,b=(x&1)!==0,T=(x&2)!==0,_=(x&8)!==0;let w=0;const O=(x&16)!==0;let R=0;const C=(x&32)!==0;let L=8;v===a&&(b&&(L+=8),T&&(L+=4),_&&(w=Ne(y,L),L+=4),O&&(R=Ne(y,L),L+=4),C&&(L+=4),e.type==="video"&&(s=Ig(e.codec)),Ve(h,["trun"]).map(P=>{const N=P[0],k=Ne(P,0)&16777215,M=(k&1)!==0;let $=0;const K=(k&4)!==0,W=(k&256)!==0;let Y=0;const j=(k&512)!==0;let G=0;const q=(k&1024)!==0,Z=(k&2048)!==0;let B=0;const V=Ne(P,4);let H=8;M&&($=Ne(P,H),H+=4),K&&(H+=4);let te=$+u;for(let ce=0;ce<V;ce++){if(W?(Y=Ne(P,H),H+=4):Y=w,j?(G=Ne(P,H),H+=4):G=R,q&&(H+=4),Z&&(N===0?B=Ne(P,H):B=U8(P,H),H+=4),e.type===gt.VIDEO){let ye=0;for(;ye<G;){const ge=Ne(r,te);if(te+=4,uye(s,r[te])){const Me=r.subarray(te,te+ge);Xw(Me,s?2:1,t+B/i,n)}te+=ge,ye+=ge+4}}t+=Y/i}}))})})}),n}function Ig(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function uye(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function Xw(t,e,n,r){const i=F8(t);let a=0;a+=e;let s=0,o=0,c=0;for(;a<i.length;){s=0;do{if(a>=i.length)break;c=i[a++],s+=c}while(c===255);o=0;do{if(a>=i.length)break;c=i[a++],o+=c}while(c===255);const u=i.length-a;let d=a;if(o<u)a+=o;else if(o>u){Ze.error(`Malformed SEI payload. ${o} is too small, only ${u} bytes left to parse.`);break}if(s===4){if(i[d++]===181){const p=j8(i,d);if(d+=2,p===49){const y=Ne(i,d);if(d+=4,y===1195456820){const v=i[d++];if(v===3){const x=i[d++],b=31&x,T=64&x,_=T?2+b*3:0,w=new Uint8Array(_);if(T){w[0]=x;for(let O=1;O<_;O++)w[O]=i[d++]}r.push({type:v,payloadType:s,pts:n,bytes:w})}}}}}else if(s===5&&o>16){const h=[];for(let v=0;v<16;v++){const x=i[d++].toString(16);h.push(x.length==1?"0"+x:x),(v===3||v===5||v===7||v===9)&&h.push("-")}const p=o-16,y=new Uint8Array(p);for(let v=0;v<p;v++)y[v]=i[d++];r.push({payloadType:s,pts:n,uuid:h.join(""),userData:fr(y),userDataBytes:y})}}}function F8(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const i=e-n.length,a=new Uint8Array(i);let s=0;for(r=0;r<i;s++,r++)s===n[0]&&(s++,n.shift()),a[r]=t[s];return a}function cye(t){const e=t[0];let n="",r="",i=0,a=0,s=0,o=0,c=0,u=0;if(e===0){for(;dn(t.subarray(u,u+1))!=="\0";)n+=dn(t.subarray(u,u+1)),u+=1;for(n+=dn(t.subarray(u,u+1)),u+=1;dn(t.subarray(u,u+1))!=="\0";)r+=dn(t.subarray(u,u+1)),u+=1;r+=dn(t.subarray(u,u+1)),u+=1,i=Ne(t,12),a=Ne(t,16),o=Ne(t,20),c=Ne(t,24),u=28}else if(e===1){u+=4,i=Ne(t,u),u+=4;const h=Ne(t,u);u+=4;const p=Ne(t,u);for(u+=4,s=2**32*h+p,F0e(s)||(s=Number.MAX_SAFE_INTEGER,Ze.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Ne(t,u),u+=4,c=Ne(t,u),u+=4;dn(t.subarray(u,u+1))!=="\0";)n+=dn(t.subarray(u,u+1)),u+=1;for(n+=dn(t.subarray(u,u+1)),u+=1;dn(t.subarray(u,u+1))!=="\0";)r+=dn(t.subarray(u,u+1)),u+=1;r+=dn(t.subarray(u,u+1)),u+=1}const d=t.subarray(u,t.byteLength);return{schemeIdUri:n,value:r,timeScale:i,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:c,payload:d}}function fye(t,...e){const n=e.length;let r=8,i=n;for(;i--;)r+=e[i].byteLength;const a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=r&255,a.set(t,4),i=0,r=8;i<n;i++)a.set(e[i],r),r+=e[i].byteLength;return a}function dye(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,i;r=0,i=new Uint8Array;let a;r>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;const s=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(s.buffer).setUint32(0,n.byteLength,!1),fye([112,115,115,104],new Uint8Array([r,0,0,0]),t,a,i,s,n||new Uint8Array)}const $8=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),$l={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Qw(t,e){const n=$l[e];return!!n&&!!n[t.slice(0,4)]}function kA(t,e,n=!0){return!t.split(",").some(r=>!Zw(r,e,n))}function Zw(t,e,n=!0){var r;const i=Qa(n);return(r=i==null?void 0:i.isTypeSupported(Df(t,e)))!=null?r:!1}function Df(t,e){return`${e}/mp4;codecs=${t}`}function aU(t){if(t){const e=t.substring(0,4);return $l.video[e]}return 2}function Cp(t){const e=$8();return t.split(",").reduce((n,r)=>{const a=e&&Ig(r)?9:$l.video[r];return a?(a*2+n)/(n?3:2):($l.audio[r]+n)/(n?2:1)},0)}const AE={};function hye(t,e=!0){if(AE[t])return AE[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let i=0;i<n.length;i++){var r;if(Zw(n[i],"audio",e))return AE[t]=n[i],n[i];if(n[i]==="mp3"&&(r=Qa(e))!=null&&r.isTypeSupported("audio/mpeg"))return""}return t}const mye=/flac|opus|mp4a\.40\.34/i;function Lp(t,e=!0){return t.replace(mye,n=>hye(n.toLowerCase(),e))}function pye(t,e){const n=[];if(t){const r=t.split(",");for(let i=0;i<r.length;i++)Qw(r[i],"video")||n.push(r[i])}return e&&n.push(e),n.join(",")}function fm(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(sU(t,"audio")||sU(t,"video")))return t;if(e){const n=e.split(",");if(n.length>1){if(t){for(let r=n.length;r--;)if(n[r].substring(0,4)===t.substring(0,4))return n[r]}return n[0]}}return e||t}function sU(t,e){return Qw(t,e)&&Zw(t,e)}function gye(t){const e=t.split(",");for(let n=0;n<e.length;n++){const r=e[n].split(".");r.length>2&&r[0]==="avc1"&&(e[n]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return e.join(",")}function yye(t){if(t.startsWith("av01.")){const e=t.split("."),n=["0","111","01","01","01","0"];for(let r=e.length;r>4&&r<10;r++)e[r]=n[r-4];return e.join(".")}return t}function oU(t){const e=Qa(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function jA(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const G8={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function V8(t,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:t}}function vye(t,e,n,r,i,a){const s=t.videoCodec,o=t.audioCodec?t.audioGroups:null,c=a==null?void 0:a.audioCodec,u=a==null?void 0:a.channels,d=u?parseInt(u):c?1/0:2;let h=null;if(o!=null&&o.length)try{o.length===1&&o[0]?h=e.groups[o[0]].channels:h=o.reduce((p,y)=>{if(y){const v=e.groups[y];if(!v)throw new Error(`Audio track group ${y} not found`);Object.keys(v.channels).forEach(x=>{p[x]=(p[x]||0)+v.channels[x]})}return p},{2:0})}catch{return!0}return s!==void 0&&(s.split(",").some(p=>Ig(p))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(r,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(i,8e6))||!!h&&be(d)&&Object.keys(h).some(p=>parseInt(p)>d)}function q8(t,e,n,r={}){const i=t.videoCodec;if(!i&&!t.audioCodec||!n)return Promise.resolve(G8);const a=[],s=bye(t),o=s.length,c=xye(t,e,o>0),u=c.length;for(let d=o||1*u||1;d--;){const h={type:"media-source"};if(o&&(h.video=s[d%o]),u){h.audio=c[d%u];const p=h.audio.bitrate;h.video&&p&&(h.video.bitrate-=p)}a.push(h)}if(i){const d=navigator.userAgent;if(i.split(",").some(h=>Ig(h))&&$8())return Promise.resolve(V8(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${d})`),a))}return Promise.all(a.map(d=>{const h=Eye(d);return r[h]||(r[h]=n.decodingInfo(d))})).then(d=>({supported:!d.some(h=>!h.supported),configurations:a,decodingInfoResults:d})).catch(d=>({supported:!1,configurations:a,decodingInfoResults:[],error:d}))}function bye(t){var e;const n=(e=t.videoCodec)==null?void 0:e.split(","),r=H8(t),i=t.width||640,a=t.height||480,s=t.frameRate||30,o=t.videoRange.toLowerCase();return n?n.map(c=>{const u={contentType:Df(yye(c),"video"),width:i,height:a,bitrate:r,framerate:s};return o!=="sdr"&&(u.transferFunction=o),u}):[]}function xye(t,e,n){var r;const i=(r=t.audioCodec)==null?void 0:r.split(","),a=H8(t);return i&&t.audioGroups?t.audioGroups.reduce((s,o)=>{var c;const u=o?(c=e.groups[o])==null?void 0:c.tracks:null;return u?u.reduce((d,h)=>{if(h.groupId===o){const p=parseFloat(h.channels||"");i.forEach(y=>{const v={contentType:Df(y,"audio"),bitrate:n?Sye(y,a):a};p&&(v.channels=""+p),d.push(v)})}return d},s):s},[]):[]}function Sye(t,e){if(e<=1)return 1;let n=128e3;return t==="ec-3"?n=768e3:t==="ac-3"&&(n=64e4),Math.min(e/2,n)}function H8(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function Eye(t){let e="";const{audio:n,video:r}=t;if(r){const i=jA(r.contentType);e+=`${i}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(n){const i=jA(n.contentType);e+=`${r?"_":""}${i}_c${n.channels}`}return e}const UA=["NONE","TYPE-0","TYPE-1",null];function Tye(t){return UA.indexOf(t)>-1}const Dp=["SDR","PQ","HLG"];function Aye(t){return!!t&&Dp.indexOf(t)>-1}var dm={No:"",Yes:"YES",v2:"v2"};function lU(t){const{canSkipUntil:e,canSkipDateRanges:n,age:r}=t,i=r<e/2;return e&&i?n?dm.v2:dm.Yes:dm.No}class uU{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class If{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in e){var n;this.supplemental=e.supplemental;const r=(n=e.supplemental)==null?void 0:n.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return cU(this._audioGroups,e)}hasSubtitleGroup(e){return cU(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function cU(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function wye(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function _ye(t,e){let n=!1,r=[];if(t&&(n=t!=="SDR",r=[t]),e){r=e.allowedVideoRanges||Dp.slice(0);const i=r.join("")!=="SDR"&&!e.videoCodec;n=e.preferHDR!==void 0?e.preferHDR:i&&wye(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const Rye=t=>{const e=new WeakSet;return(n,r)=>{if(t&&(r=t(n,r)),typeof r=="object"&&r!==null){if(e.has(r))return;e.add(r)}return r}},Et=(t,e)=>JSON.stringify(t,Rye(e));function Oye(t,e,n,r,i){const a=Object.keys(t),s=r==null?void 0:r.channels,o=r==null?void 0:r.audioCodec,c=i==null?void 0:i.videoCodec,u=s&&parseInt(s)===2;let d=!1,h=!1,p=1/0,y=1/0,v=1/0,x=1/0,b=0,T=[];const{preferHDR:_,allowedVideoRanges:w}=_ye(e,i);for(let P=a.length;P--;){const N=t[a[P]];d||(d=N.channels[2]>0),p=Math.min(p,N.minHeight),y=Math.min(y,N.minFramerate),v=Math.min(v,N.minBitrate),w.filter(M=>N.videoRanges[M]>0).length>0&&(h=!0)}p=be(p)?p:0,y=be(y)?y:0;const O=Math.max(1080,p),R=Math.max(30,y);v=be(v)?v:n,n=Math.max(v,n),h||(e=void 0);const C=a.length>1;return{codecSet:a.reduce((P,N)=>{const k=t[N];if(N===P)return P;if(T=h?w.filter(M=>k.videoRanges[M]>0):[],C){if(k.minBitrate>n)return fi(N,`min bitrate of ${k.minBitrate} > current estimate of ${n}`),P;if(!k.hasDefaultAudio)return fi(N,"no renditions with default or auto-select sound found"),P;if(o&&N.indexOf(o.substring(0,4))%5!==0)return fi(N,`audio codec preference "${o}" not found`),P;if(s&&!u){if(!k.channels[s])return fi(N,`no renditions with ${s} channel sound found (channels options: ${Object.keys(k.channels)})`),P}else if((!o||u)&&d&&k.channels[2]===0)return fi(N,"no renditions with stereo sound found"),P;if(k.minHeight>O)return fi(N,`min resolution of ${k.minHeight} > maximum of ${O}`),P;if(k.minFramerate>R)return fi(N,`min framerate of ${k.minFramerate} > maximum of ${R}`),P;if(!T.some(M=>k.videoRanges[M]>0))return fi(N,`no variants with VIDEO-RANGE of ${Et(T)} found`),P;if(c&&N.indexOf(c.substring(0,4))%5!==0)return fi(N,`video codec preference "${c}" not found`),P;if(k.maxScore<b)return fi(N,`max score of ${k.maxScore} < selected max of ${b}`),P}return P&&(Cp(N)>=Cp(P)||k.fragmentError>t[P].fragmentError)?P:(x=k.minIndex,b=k.maxScore,N)},void 0),videoRanges:T,preferHDR:_,minFramerate:y,minBitrate:v,minIndex:x}}function fi(t,e){Ze.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function z8(t){return t.reduce((e,n)=>{let r=e.groups[n.groupId];r||(r=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const i=n.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Cye(t,e,n,r){return t.slice(n,r+1).reduce((i,a,s)=>{if(!a.codecSet)return i;const o=a.audioGroups;let c=i[a.codecSet];c||(i[a.codecSet]=c={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:s,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),c.minBitrate=Math.min(c.minBitrate,a.bitrate);const u=Math.min(a.height,a.width);return c.minHeight=Math.min(c.minHeight,u),c.minFramerate=Math.min(c.minFramerate,a.frameRate),c.minIndex=Math.min(c.minIndex,s),c.maxScore=Math.max(c.maxScore,a.score),c.fragmentError+=a.fragmentError,c.videoRanges[a.videoRange]=(c.videoRanges[a.videoRange]||0)+1,o&&o.forEach(d=>{if(!d)return;const h=e.groups[d];h&&(c.hasDefaultAudio=c.hasDefaultAudio||e.hasDefaultAudio?h.hasDefault:h.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(h.channels).forEach(p=>{c.channels[p]=(c.channels[p]||0)+h.channels[p]}))}),i},{})}function fU(t){if(!t)return t;const{lang:e,assocLang:n,characteristics:r,channels:i,audioCodec:a}=t;return{lang:e,assocLang:n,characteristics:r,channels:i,audioCodec:a}}function yi(t,e,n){if("attrs"in t){const r=e.indexOf(t);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(Ks(t,i,n))return r}return-1}function Ks(t,e,n){const{groupId:r,name:i,lang:a,assocLang:s,default:o}=t,c=t.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(a===void 0||Lye(a,e.lang))&&(a===void 0||e.assocLang===s)&&(o===void 0||e.default===o)&&(c===void 0||e.forced===c)&&(!("characteristics"in t)||Dye(t.characteristics||"",e.characteristics))&&(n===void 0||n(t,e))}function Lye(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function Dye(t,e=""){const n=t.split(","),r=e.split(",");return n.length===r.length&&!n.some(i=>r.indexOf(i)===-1)}function Ps(t,e){const{audioCodec:n,channels:r}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function Iye(t,e,n,r,i){const a=e[r],o=e.reduce((p,y,v)=>{const x=y.uri;return(p[x]||(p[x]=[])).push(v),p},{})[a.uri];o.length>1&&(r=Math.max.apply(Math,o));const c=a.videoRange,u=a.frameRate,d=a.codecSet.substring(0,4),h=dU(e,r,p=>{if(p.videoRange!==c||p.frameRate!==u||p.codecSet.substring(0,4)!==d)return!1;const y=p.audioGroups,v=n.filter(x=>!y||y.indexOf(x.groupId)!==-1);return yi(t,v,i)>-1});return h>-1?h:dU(e,r,p=>{const y=p.audioGroups,v=n.filter(x=>!y||y.indexOf(x.groupId)!==-1);return yi(t,v,i)>-1})}function dU(t,e,n){for(let r=e;r>-1;r--)if(n(t[r]))return r;for(let r=e+1;r<t.length;r++)if(n(t[r]))return r;return-1}function Ip(t,e){var n;return!!t&&t!==((n=e.loadLevelObj)==null?void 0:n.uri)}class Pye extends ri{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=n=>{var r;const{fragCurrent:i,partCurrent:a,hls:s}=this,{autoLevelEnabled:o,media:c}=s;if(!i||!c)return;const u=performance.now(),d=a?a.stats:i.stats,h=a?a.duration:i.duration,p=u-d.loading.start,y=s.minAutoLevel,v=i.level,x=this._nextAutoLevel;if(d.aborted||d.loaded&&d.loaded===d.total||v<=y){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const b=x>-1&&x!==v,T=!!n||b;if(!T&&(c.paused||!c.playbackRate||!c.readyState))return;const _=s.mainForwardBufferInfo;if(!T&&_===null)return;const w=this.bwEstimator.getEstimateTTFB(),O=Math.abs(c.playbackRate);if(p<=Math.max(w,1e3*(h/(O*2))))return;const R=_?_.len/O:0,C=d.loading.first?d.loading.first-d.loading.start:-1,L=d.loaded&&C>-1,P=this.getBwEstimate(),N=s.levels,k=N[v],M=Math.max(d.loaded,Math.round(h*(i.bitrate||k.averageBitrate)/8));let $=L?p-C:p;$<1&&L&&($=Math.min(p,d.loaded*8/P));const K=L?d.loaded*1e3/$:0,W=w/1e3,Y=K?(M-d.loaded)/K:M*8/P+W;if(Y<=R)return;const j=K?K*8:P,G=((r=(n==null?void 0:n.details)||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,q=this.hls.config.abrBandWidthUpFactor;let Z=Number.POSITIVE_INFINITY,B;for(B=v-1;B>y;B--){const ce=N[B].maxBitrate,ye=!N[B].details||G;if(Z=this.getTimeToLoadFrag(W,j,h*ce,ye),Z<Math.min(R,h+W))break}if(Z>=Y||Z>h*10)return;L?this.bwEstimator.sample(p-Math.min(w,C),d.loaded):this.bwEstimator.sampleTTFB(p);const V=N[B].maxBitrate;this.getBwEstimate()*q>V&&this.resetEstimator(V);const H=this.findBestLevel(V,y,B,0,R,1,1);H>-1&&(B=H),this.warn(`Fragment ${i.sn}${a?" part "+a.index:""} of level ${v} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${R.toFixed(3)} s
      Estimated load time for current fragment: ${Y.toFixed(3)} s
      Estimated load time for down switch fragment: ${Z.toFixed(3)} s
      TTFB estimate: ${C|0} ms
      Current BW estimate: ${be(P)?P|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${B} @ ${V|0} bps`),s.nextLoadLevel=s.nextAutoLevel=B,this.clearTimer();const te=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===B&&B>0){const ce=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${B>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${ce.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,B>y){let ye=this.findBestLevel(this.hls.levels[y].bitrate,y,B,0,ce,1,1);ye===-1&&(ye=y),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ye,this.resetEstimator(this.hls.levels[ye].bitrate)}}};b||Y>Z*2?te():this.timer=self.setInterval(te,Z*1e3),s.trigger(D.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:a,stats:d})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new G0e(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(D.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=n.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case re.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:i,partCurrent:a}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const s=performance.now(),o=a?a.stats:r.stats,c=s-o.loading.start,u=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&u>-1){const h=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(c-Math.min(h,u),o.loaded)}else this.bwEstimator.sampleTTFB(c)}break}}}getTimeToLoadFrag(e,n,r,i){const a=e+r/n,s=i?e+this.lastLevelLoadSec:0;return a+s}onLevelLoaded(e,n){const r=this.hls.config,{loading:i}=n.stats,a=i.end-i.first;be(a)&&(this.lastLevelLoadSec=a/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(n.levelInfo)}onFragLoaded(e,{frag:n,part:r}){const i=r?r.stats:n.stats;if(n.type===Se.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const a=r?r.duration:n.duration,s=this.hls.levels[n.level],o=(s.loaded?s.loaded.bytes:0)+i.loaded,c=(s.loaded?s.loaded.duration:0)+a;s.loaded={bytes:o,duration:c},s.realBitrate=Math.round(8*o/c)}if(n.bitrateTest){const a={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(D.FRAG_BUFFERED,a),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:r,part:i}=n,a=i!=null&&i.stats.loaded?i.stats:r.stats;if(a.aborted||this.ignoreFragment(r))return;const s=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,a.loaded),a.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Se.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,a=this.findBestLevel(r,n,e,0,i,1,1);if(a>-1)return a;const s=this.hls.firstLevel,o=Math.min(Math.max(s,n),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const a=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const s=this.hls.levels;if(s.length>Math.max(e,a)&&s[e].loadError<=s[a].loadError)return e}return this._nextAutoLevel=a,this.nextAutoLevelKey=this.getAutoLevelKey(),a}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:i,config:a,minAutoLevel:s}=r,o=n?n.duration:e?e.duration:0,c=this.getBwEstimate(),u=this.getStarvationDelay();let d=a.abrBandWidthFactor,h=a.abrBandWidthUpFactor;if(u){const b=this.findBestLevel(c,s,i,u,0,d,h);if(b>=0)return this.rebufferNotice=-1,b}let p=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay;if(!u){const b=this.bitrateTestDelay;b&&(p=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-b,this.info(`bitrate test took ${Math.round(1e3*b)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),d=h=1)}const y=this.findBestLevel(c,s,i,u,p,d,h);if(this.rebufferNotice!==y&&(this.rebufferNotice=y,this.info(`${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${y}`)),y>-1)return y;const v=r.levels[s],x=r.loadLevelObj;return x&&(v==null?void 0:v.bitrate)<x.bitrate?s:r.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,r,i,a,s,o){var c;const u=i+a,d=this.lastLoadedFragLevel,h=d===-1?this.hls.firstLevel:d,{fragCurrent:p,partCurrent:y}=this,{levels:v,allAudioTracks:x,loadLevel:b,config:T}=this.hls;if(v.length===1)return 0;const _=v[h],w=!!((c=this.hls.latestLevelDetails)!=null&&c.live),O=b===-1||d===-1;let R,C="SDR",L=(_==null?void 0:_.frameRate)||0;const{audioPreference:P,videoPreference:N}=T,k=this.audioTracksByGroup||(this.audioTracksByGroup=z8(x));let M=-1;if(O){if(this.firstSelection!==-1)return this.firstSelection;const G=this.codecTiers||(this.codecTiers=Cye(v,k,n,r)),q=Oye(G,C,e,P,N),{codecSet:Z,videoRanges:B,minFramerate:V,minBitrate:H,minIndex:te,preferHDR:ce}=q;M=te,R=Z,C=ce?B[B.length-1]:B[0],L=V,e=Math.max(e,H),this.log(`picked start tier ${Et(q)}`)}else R=_==null?void 0:_.codecSet,C=_==null?void 0:_.videoRange;const $=y?y.duration:p?p.duration:0,K=this.bwEstimator.getEstimateTTFB()/1e3,W=[];for(let G=r;G>=n;G--){var Y,j;const q=v[G],Z=G>h;if(!q)continue;if(T.useMediaCapabilities&&!q.supportedResult&&!q.supportedPromise){const ge=navigator.mediaCapabilities;typeof(ge==null?void 0:ge.decodingInfo)=="function"&&vye(q,k,C,L,e,P)?(q.supportedPromise=q8(q,k,ge,this.supportedCache),q.supportedPromise.then(Me=>{if(!this.hls)return;q.supportedResult=Me;const Re=this.hls.levels,pe=Re.indexOf(q);Me.error?this.warn(`MediaCapabilities decodingInfo error: "${Me.error}" for level ${pe} ${Et(Me)}`):Me.supported?Me.decodingInfoResults.some(Ae=>Ae.smooth===!1||Ae.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${pe} not smooth or powerEfficient: ${Et(Me)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${pe} ${Et(Me)}`),pe>-1&&Re.length>1&&(this.log(`Removing unsupported level ${pe}`),this.hls.removeLevel(pe),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):q.supportedResult=G8}if((R&&q.codecSet!==R||C&&q.videoRange!==C||Z&&L>q.frameRate||!Z&&L>0&&L<q.frameRate||(Y=q.supportedResult)!=null&&(j=Y.decodingInfoResults)!=null&&j.some(ge=>ge.smooth===!1))&&(!O||G!==M)){W.push(G);continue}const B=q.details,V=(y?B==null?void 0:B.partTarget:B==null?void 0:B.averagetargetduration)||$;let H;Z?H=o*e:H=s*e;const te=$&&i>=$*2&&a===0?q.averageBitrate:q.maxBitrate,ce=this.getTimeToLoadFrag(K,H,te*V,B===void 0);if(H>=te&&(G===d||q.loadError===0&&q.fragmentError===0)&&(ce<=K||!be(ce)||w&&!this.bitrateTestDelay||ce<u)){const ge=this.forcedAutoLevel;return G!==b&&(ge===-1||ge!==b)&&(W.length&&this.trace(`Skipped level(s) ${W.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${v[W[0]].codecs}" ${v[W[0]].videoRange}; not compatible with "${R}" ${C}`),this.info(`switch candidate:${h}->${G} adjustedbw(${Math.round(H)})-bitrate=${Math.round(H-te)} ttfb:${K.toFixed(1)} avgDuration:${V.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${ce.toFixed(1)} firstSelection:${O} codecSet:${q.codecSet} videoRange:${q.videoRange} hls.loadLevel:${b}`)),O&&(this.firstSelection=G),G}}return-1}set nextAutoLevel(e){const n=this.deriveNextAutoLevel(e);this._nextAutoLevel!==n&&(this.nextAutoLevelKey="",this._nextAutoLevel=n)}deriveNextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),n)}}const K8={search:function(t,e){let n=0,r=t.length-1,i=null,a=null;for(;n<=r;){i=(n+r)/2|0,a=t[i];const s=e(a);if(s>0)n=i+1;else if(s<0)r=i-1;else return a}return null}};function Nye(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!be(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let a=0;a<t.length;++a){const s=t[a];if(kye(e,n,s))return s}return null}function eo(t,e,n=0,r=0,i=.005){let a=null;if(t){a=e[1+t.sn-e[0].sn]||null;const o=t.endDTS-n;o>0&&o<15e-7&&(n+=15e-7),a&&t.level!==a.level&&a.end<=t.end&&(a=e[2+t.sn-e[0].sn]||null)}else n===0&&e[0].start===0&&(a=e[0]);if(a&&((!t||t.level===a.level)&&hU(n,r,a)===0||Mye(a,t,Math.min(i,r))))return a;const s=K8.search(e,hU.bind(null,n,r));return s&&(s!==t||!a)?s:a}function Mye(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((i,a)=>(a[0]==="INF"&&(i+=parseFloat(a[1])),i),n);return t.start<=r}return!1}function hU(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function kye(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function Y8(t,e,n){if(t&&t.startCC<=e&&t.endCC>=e){let r=t.fragments;const{fragmentHint:i}=t;i&&(r=r.concat(i));let a;return K8.search(r,s=>s.cc<e?1:s.cc>e?-1:(a=s,s.end<=n?1:s.start>n?-1:0)),a||null}return null}function Pp(t){switch(t.details){case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_TIMEOUT:case re.LEVEL_LOAD_TIMEOUT:case re.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function mU(t,e){const n=Pp(e);return t.default[`${n?"timeout":"error"}Retry`]}function Jw(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function pU(t){return ht(ht({},t),{errorRetry:null,timeoutRetry:null})}function Np(t,e,n,r){if(!t)return!1;const i=r==null?void 0:r.code,a=e<t.maxNumRetry&&(jye(i)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,r,a):a}function jye(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}var In={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},zr={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class Uye extends ri{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.ERROR,this.onError,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.ERROR,this.onError,this),e.off(D.ERROR,this.onErrorOut,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Se.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var r;if(n.fatal)return;const i=this.hls,a=n.context;switch(n.details){case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case re.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction=Pf();return}case re.FRAG_GAP:case re.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=In.SendAlternateToPenaltyBox;return}case re.LEVEL_EMPTY_ERROR:case re.LEVEL_PARSING_ERROR:{var s,o;const u=n.parent===Se.MAIN?n.level:i.loadLevel;n.details===re.LEVEL_EMPTY_ERROR&&((s=n.context)!=null&&(o=s.levelDetails)!=null&&o.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,u):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,u))}return;case re.LEVEL_LOAD_ERROR:case re.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,a.level));return;case re.AUDIO_TRACK_LOAD_ERROR:case re.AUDIO_TRACK_LOAD_TIMEOUT:case re.SUBTITLE_LOAD_ERROR:case re.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const u=i.loadLevelObj;if(u&&(a.type===He.AUDIO_TRACK&&u.hasAudioGroup(a.groupId)||a.type===He.SUBTITLE_TRACK&&u.hasSubtitleGroup(a.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,i.loadLevel),n.errorAction.action=In.SendAlternateToPenaltyBox,n.errorAction.flags=zr.MoveAllAlternatesMatchingHost;return}}return;case re.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const u=i.loadLevelObj,d=u==null?void 0:u.attrs["HDCP-LEVEL"];d?n.errorAction={action:In.SendAlternateToPenaltyBox,flags:zr.MoveAllAlternatesMatchingHDCP,hdcpLevel:d}:this.keySystemError(n)}return;case re.BUFFER_ADD_CODEC_ERROR:case re.REMUX_ALLOC_ERROR:case re.BUFFER_APPEND_ERROR:if(!n.errorAction){var c;n.errorAction=this.getLevelSwitchAction(n,(c=n.level)!=null?c:i.loadLevel)}return;case re.INTERNAL_EXCEPTION:case re.BUFFER_APPENDING_ERROR:case re.BUFFER_FULL_ERROR:case re.LEVEL_SWITCH_ERROR:case re.BUFFER_STALLED_ERROR:case re.BUFFER_SEEK_OVER_HOLE:case re.BUFFER_NUDGE_ON_STALL:n.errorAction=Pf();return}n.type===Te.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const r=this.hls,i=mU(r.config.playlistLoadPolicy,e),a=this.playlistError++;if(Np(i,a,Pp(e),e.response))return{action:In.RetryRequest,flags:zr.None,retryConfig:i,retryCount:a};const o=this.getLevelSwitchAction(e,n);return i&&(o.retryConfig=i,o.retryCount=a),o}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),i=n.levels[r],{fragLoadPolicy:a,keyLoadPolicy:s}=n.config,o=mU(e.details.startsWith("key")?s:a,e),c=n.levels.reduce((d,h)=>d+h.fragmentError,0);if(i&&(e.details!==re.FRAG_GAP&&i.fragmentError++,Np(o,c,Pp(e),e.response)))return{action:In.RetryRequest,flags:zr.None,retryConfig:o,retryCount:c};const u=this.getLevelSwitchAction(e,r);return o&&(u.retryConfig=o,u.retryCount=c),u}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const i=this.hls.levels[n];if(i){var a,s;const u=e.details;i.loadError++,u===re.BUFFER_APPEND_ERROR&&i.fragmentError++;let d=-1;const{levels:h,loadLevel:p,minAutoLevel:y,maxAutoLevel:v}=r;!r.autoLevelEnabled&&!r.config.preserveManualLevelOnError&&(r.loadLevel=-1);const x=(a=e.frag)==null?void 0:a.type,T=(x===Se.AUDIO&&u===re.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===re.BUFFER_ADD_CODEC_ERROR||u===re.BUFFER_APPEND_ERROR))&&h.some(({audioCodec:C})=>i.audioCodec!==C),w=e.sourceBufferName==="video"&&(u===re.BUFFER_ADD_CODEC_ERROR||u===re.BUFFER_APPEND_ERROR)&&h.some(({codecSet:C,audioCodec:L})=>i.codecSet!==C&&i.audioCodec===L),{type:O,groupId:R}=(s=e.context)!=null?s:{};for(let C=h.length;C--;){const L=(C+p)%h.length;if(L!==p&&L>=y&&L<=v&&h[L].loadError===0){var o,c;const P=h[L];if(u===re.FRAG_GAP&&x===Se.MAIN&&e.frag){const N=h[L].details;if(N){const k=eo(e.frag,N.fragments,e.frag.start);if(k!=null&&k.gap)continue}}else{if(O===He.AUDIO_TRACK&&P.hasAudioGroup(R)||O===He.SUBTITLE_TRACK&&P.hasSubtitleGroup(R))continue;if(x===Se.AUDIO&&(o=i.audioGroups)!=null&&o.some(N=>P.hasAudioGroup(N))||x===Se.SUBTITLE&&(c=i.subtitleGroups)!=null&&c.some(N=>P.hasSubtitleGroup(N))||T&&i.audioCodec===P.audioCodec||!T&&i.audioCodec!==P.audioCodec||w&&i.codecSet===P.codecSet)continue}d=L;break}}if(d>-1&&r.loadLevel!==d)return e.levelRetry=!0,this.playlistError=0,{action:In.SendAlternateToPenaltyBox,flags:zr.None,nextAutoLevel:d}}return{action:In.SendAlternateToPenaltyBox,flags:zr.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case In.DoNothing:break;case In.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==re.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:i,hdcpLevel:a,nextAutoLevel:s}=r;switch(i){case zr.None:this.switchLevel(e,s);break;case zr.MoveAllAlternatesMatchingHDCP:a&&(n.maxHdcpLevel=UA[UA.indexOf(a)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,s)}switchLevel(e,n){if(n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===re.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const r=jA(e.mimeType),i=this.hls.levels;for(let a=i.length;a--;)i[a][`${e.sourceBufferName}Codec`]===r&&this.hls.removeLevel(a)}}}function Pf(t){const e={action:In.DoNothing,flags:zr.None};return t&&(e.resolved=!0),e}var en={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Bye{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const r=this.activePartLists[n];if(r)for(let i=r.length;i--;){const a=r[i];if(!a)break;const s=a.end;if(a.start<=e&&s!==null&&e<=s)return a}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){return this.getFragAtPos(e,n,!0)}getFragAtPos(e,n,r){const{fragments:i}=this,a=Object.keys(i);for(let s=a.length;s--;){const o=i[a[s]];if((o==null?void 0:o.body.type)===n&&(!r||o.buffered)){const c=o.body;if(c.start<=e&&e<=c.end)return c}}return null}detectEvictedFragments(e,n,r,i,a){this.timeRanges&&(this.timeRanges[e]=n);const s=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const c=this.fragments[o];if(!c||s>=c.body.sn)return;if(!c.buffered&&(!c.loaded||a)){c.body.type===r&&this.removeFragment(c.body);return}const u=c.range[e];if(u){if(u.time.length===0){this.removeFragment(c.body);return}u.time.some(d=>{const h=!this.isTimeBuffered(d.startPTS,d.endPTS,n);return h&&this.removeFragment(c.body),h})}})}detectPartialFragments(e){const n=this.timeRanges;if(!n||e.frag.sn==="initSegment")return;const r=e.frag,i=Qo(r),a=this.fragments[i];if(!a||a.buffered&&r.gap)return;const s=!r.relurl;Object.keys(n).forEach(o=>{const c=r.elementaryStreams[o];if(!c)return;const u=n[o],d=s||c.partial===!0;a.range[o]=this.getBufferedTimes(r,e.part,d,u)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=r.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),qh(a)||this.removeParts(r.sn-1,r.type)):this.removeFragment(a.body)}removeParts(e,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=gU(r,i=>i.fragment.sn>=e))}fragBuffered(e,n){const r=Qo(e);let i=this.fragments[r];!i&&n&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,n,r,i){const a={time:[],partial:r},s=e.start,o=e.end,c=e.minEndPTS||o,u=e.maxStartPTS||s;for(let d=0;d<i.length;d++){const h=i.start(d)-this.bufferPadding,p=i.end(d)+this.bufferPadding;if(u>=h&&c<=p){a.time.push({startPTS:Math.max(s,i.start(d)),endPTS:Math.min(o,i.end(d))});break}else if(s<p&&o>h){const y=Math.max(s,i.start(d)),v=Math.min(o,i.end(d));v>y&&(a.partial=!0,a.time.push({startPTS:y,endPTS:v}))}else if(o<=h)break}return a}getPartialFragment(e){let n=null,r,i,a,s=0;const{bufferPadding:o,fragments:c}=this;return Object.keys(c).forEach(u=>{const d=c[u];d&&qh(d)&&(i=d.body.start-o,a=d.body.end+o,e>=i&&e<=a&&(r=Math.min(e-i,a-e),s<=r&&(n=d.body,s=r)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||qh(n))}getState(e){const n=Qo(e),r=this.fragments[n];return r?r.buffered?qh(r)?en.PARTIAL:en.OK:en.APPENDING:en.NOT_LOADED}isTimeBuffered(e,n,r){let i,a;for(let s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,a=r.end(s)+this.bufferPadding,e>=i&&n<=a)return!0;if(n<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,n){if(n.frag.sn==="initSegment"||n.frag.bitrateTest)return;const r=n.frag,i=n.part?null:n,a=Qo(r);this.fragments[a]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:r,part:i,timeRanges:a,type:s}=n;if(r.sn==="initSegment")return;const o=r.type;if(i){let u=this.activePartLists[o];u||(this.activePartLists[o]=u=[]),u.push(i)}this.timeRanges=a;const c=a[s];this.detectEvictedFragments(s,c,o,i)}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=Qo(e);return!!this.fragments[n]}hasFragments(e){const{fragments:n}=this,r=Object.keys(n);if(!e)return r.length>0;for(let i=r.length;i--;){const a=n[r[i]];if((a==null?void 0:a.body.type)===e)return!0}return!1}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,r,i,a){i&&!this.hasGaps||Object.keys(this.fragments).forEach(s=>{const o=this.fragments[s];if(!o)return;const c=o.body;c.type!==r||i&&!c.gap||c.start<n&&c.end>e&&(o.buffered||a)&&this.removeFragment(c)})}removeFragment(e){const n=Qo(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const i=e.sn;this.activePartLists[e.type]=gU(r,a=>a.fragment.sn!==i)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,n;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(e=this.hls)==null||(n=e.latestLevelDetails)==null?void 0:n.partList;r&&r.forEach(i=>i.clearElementaryStreamInfo())}}function qh(t){var e,n,r;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((r=t.range.audiovideo)==null?void 0:r.partial))}function Qo(t){return`${t.type}_${t.level}_${t.sn}`}function gU(t,e){return t.filter(n=>{const r=e(n);return r||n.clearElementaryStreamInfo(),r})}var Za={cbc:0,ctr:1};class Fye{constructor(e,n,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=n,this.aesMode=r}decrypt(e,n){switch(this.aesMode){case Za.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e);case Za.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},n,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function $ye(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?t.slice(0,e-n):t}class Gye{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=n.getUint32(i*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,i=r[0],a=r[1],s=r[2],o=r[3],c=this.invSubMix,u=c[0],d=c[1],h=c[2],p=c[3],y=new Uint32Array(256);let v=0,x=0,b=0;for(b=0;b<256;b++)b<128?y[b]=b<<1:y[b]=b<<1^283;for(b=0;b<256;b++){let T=x^x<<1^x<<2^x<<3^x<<4;T=T>>>8^T&255^99,e[v]=T,n[T]=v;const _=y[v],w=y[_],O=y[w];let R=y[T]*257^T*16843008;i[v]=R<<24|R>>>8,a[v]=R<<16|R>>>16,s[v]=R<<8|R>>>24,o[v]=R,R=O*16843009^w*65537^_*257^v*16843008,u[T]=R<<24|R>>>8,d[T]=R<<16|R>>>16,h[T]=R<<8|R>>>24,p[T]=R,v?(v=_^y[y[y[O^_]]],x^=y[y[x]]):v=x=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<n.length&&r;)r=n[i]===this.key[i],i++;if(r)return;this.key=n;const a=this.keySize=n.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const s=this.ksRows=(a+6+1)*4;let o,c;const u=this.keySchedule=new Uint32Array(s),d=this.invKeySchedule=new Uint32Array(s),h=this.sBox,p=this.rcon,y=this.invSubMix,v=y[0],x=y[1],b=y[2],T=y[3];let _,w;for(o=0;o<s;o++){if(o<a){_=u[o]=n[o];continue}w=_,o%a===0?(w=w<<8|w>>>24,w=h[w>>>24]<<24|h[w>>>16&255]<<16|h[w>>>8&255]<<8|h[w&255],w^=p[o/a|0]<<24):a>6&&o%a===4&&(w=h[w>>>24]<<24|h[w>>>16&255]<<16|h[w>>>8&255]<<8|h[w&255]),u[o]=_=(u[o-a]^w)>>>0}for(c=0;c<s;c++)o=s-c,c&3?w=u[o]:w=u[o-4],c<4||o<=4?d[c]=w:d[c]=v[h[w>>>24]]^x[h[w>>>16&255]]^b[h[w>>>8&255]]^T[h[w&255]],d[c]=d[c]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const i=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,o=this.invSubMix,c=o[0],u=o[1],d=o[2],h=o[3],p=this.uint8ArrayToUint32Array_(r);let y=p[0],v=p[1],x=p[2],b=p[3];const T=new Int32Array(e),_=new Int32Array(T.length);let w,O,R,C,L,P,N,k,M,$,K,W,Y,j;const G=this.networkToHostOrderSwap;for(;n<T.length;){for(M=G(T[n]),$=G(T[n+1]),K=G(T[n+2]),W=G(T[n+3]),L=M^a[0],P=W^a[1],N=K^a[2],k=$^a[3],Y=4,j=1;j<i;j++)w=c[L>>>24]^u[P>>16&255]^d[N>>8&255]^h[k&255]^a[Y],O=c[P>>>24]^u[N>>16&255]^d[k>>8&255]^h[L&255]^a[Y+1],R=c[N>>>24]^u[k>>16&255]^d[L>>8&255]^h[P&255]^a[Y+2],C=c[k>>>24]^u[L>>16&255]^d[P>>8&255]^h[N&255]^a[Y+3],L=w,P=O,N=R,k=C,Y=Y+4;w=s[L>>>24]<<24^s[P>>16&255]<<16^s[N>>8&255]<<8^s[k&255]^a[Y],O=s[P>>>24]<<24^s[N>>16&255]<<16^s[k>>8&255]<<8^s[L&255]^a[Y+1],R=s[N>>>24]<<24^s[k>>16&255]<<16^s[L>>8&255]<<8^s[P&255]^a[Y+2],C=s[k>>>24]<<24^s[L>>16&255]<<16^s[P>>8&255]<<8^s[N&255]^a[Y+3],_[n]=G(w^y),_[n+1]=G(C^v),_[n+2]=G(R^x),_[n+3]=G(O^b),y=M,v=$,x=K,b=W,n=n+4}return _.buffer}}class Vye{constructor(e,n,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=n,this.aesMode=r}expandKey(){const e=qye(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function qye(t){switch(t){case Za.cbc:return"AES-CBC";case Za.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const Hye=16;class e_{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?$ye(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r,i){return this.useSoftware?new Promise((a,s)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,n,r,i);const c=this.flush();c?a(c.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r,i)}softwareDecrypt(e,n,r,i){const{currentIV:a,currentResult:s,remainderData:o}=this;if(i!==Za.cbc||n.byteLength!==16)return Ze.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=kr(o,e),this.remainderData=null);const c=this.getValidChunk(e);if(!c.length)return null;a&&(r=a);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new Gye),u.expandKey(n);const d=s;return this.currentResult=u.decrypt(c.buffer,0,r),this.currentIV=c.slice(-16).buffer,d||null}webCryptoDecrypt(e,n,r,i){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,r,i));this.key=n,this.fastAesKey=new Vye(this.subtle,n,i)}return this.fastAesKey.expandKey().then(a=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Fye(this.subtle,new Uint8Array(r),i).decrypt(e.buffer,a)):Promise.reject(new Error("web crypto not initialized"))).catch(a=>(Ze.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${a.name}: ${a.message}`),this.onWebCryptoError(e,n,r,i)))}onWebCryptoError(e,n,r,i){const a=this.enableSoftwareAES;if(a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r,i);const s=this.flush();if(s)return s.buffer}throw new Error("WebCrypto"+(a?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%Hye;return r!==e.length&&(n=e.slice(0,r),this.remainderData=e.slice(r)),n}logOnce(e){this.logEnabled&&(Ze.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const yU=Math.pow(2,17);class zye{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(v=>v[0]==="GAP")){c(bU(e));return}else e.gap=!1;const u=this.loader=a?new a(i):new s(i),d=vU(e);e.loader=u;const h=pU(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:yU};e.stats=u.stats;const y={onSuccess:(v,x,b,T)=>{this.resetLoader(e,u);let _=v.data;b.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(_.slice(0,16)),_=_.slice(16)),o({frag:e,part:null,payload:_,networkDetails:T})},onError:(v,x,b,T)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ht({url:r,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:b,stats:T}))},onAbort:(v,x,b)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:b,stats:v}))},onTimeout:(v,x,b)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:b,stats:v}))}};n&&(y.onProgress=(v,x,b,T)=>n({frag:e,part:null,payload:b,networkDetails:T})),u.load(d,p,y)})}loadPart(e,n,r){this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){c(bU(e,n));return}const u=this.loader=a?new a(i):new s(i),d=vU(e,n);e.loader=u;const h=pU(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:yU};n.stats=u.stats,u.load(d,p,{onSuccess:(y,v,x,b)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,n);const T={frag:e,part:n,payload:y.data,networkDetails:b};r(T),o(T)},onError:(y,v,x,b)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:ht({url:d.url,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:x,stats:b}))},onAbort:(y,v,x)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:x,stats:y}))},onTimeout:(y,v,x)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:x,stats:y}))}})})}updateStatsFromPart(e,n){const r=e.stats,i=n.stats,a=i.total;if(r.loaded+=i.loaded,a){const c=Math.round(e.duration/n.duration),u=Math.min(Math.round(r.loaded/a),c),h=(c-u)*Math.round(r.loaded/u);r.total=r.loaded+h}else r.total=Math.max(r.loaded,r.total);const s=r.loading,o=i.loading;s.start?s.first+=o.first-o.start:(s.start=o.start,s.first=o.first),s.end=o.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function vU(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,a=n.byteRangeEndOffset;if(be(i)&&be(a)){var s;let o=i,c=a;if(t.sn==="initSegment"&&Kye((s=t.decryptdata)==null?void 0:s.method)){const u=a-i;u%16&&(c=a+(16-u%16)),i!==0&&(r.resetIV=!0,o=i-16)}r.rangeStart=o,r.rangeEnd=c}return r}function bU(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:Te.MEDIA_ERROR,details:re.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new Ki(r)}function Kye(t){return t==="AES-128"||t==="AES-256"}class Ki extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class W8 extends ri{constructor(e,n){super(e,n),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class t_{constructor(e,n,r,i=0,a=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Hh(),this.buffering={audio:Hh(),video:Hh(),audiovideo:Hh()},this.level=e,this.sn=n,this.id=r,this.size=i,this.part=a,this.partial=s}}function Hh(){return{start:0,executeStart:0,executeEnd:0,end:0}}const xU={length:0,start:()=>0,end:()=>0};class ke{static isBuffered(e,n){if(e){const r=ke.getBuffered(e);for(let i=r.length;i--;)if(n>=r.start(i)&&n<=r.end(i))return!0}return!1}static bufferedRanges(e){if(e){const n=ke.getBuffered(e);return ke.timeRangesToArray(n)}return[]}static timeRangesToArray(e){const n=[];for(let r=0;r<e.length;r++)n.push({start:e.start(r),end:e.end(r)});return n}static bufferInfo(e,n,r){if(e){const i=ke.bufferedRanges(e);if(i.length)return ke.bufferedInfo(i,n,r)}return{len:0,start:n,end:n,bufferedIndex:-1}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.length>1&&e.sort((d,h)=>d.start-h.start||h.end-d.end);let i=-1,a=[];if(r)for(let d=0;d<e.length;d++){n>=e[d].start&&n<=e[d].end&&(i=d);const h=a.length;if(h){const p=a[h-1].end;e[d].start-p<r?e[d].end>p&&(a[h-1].end=e[d].end):a.push(e[d])}else a.push(e[d])}else a=e;let s=0,o,c=n,u=n;for(let d=0;d<a.length;d++){const h=a[d].start,p=a[d].end;if(i===-1&&n>=h&&n<=p&&(i=d),n+r>=h&&n<p)c=h,u=p,s=u-n;else if(n+r<h){o=h;break}}return{len:s,start:c||0,end:u||0,nextStart:o,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||xU}catch(n){return Ze.log("failed to get media.buffered",n),xU}}}const X8=/\{\$([a-zA-Z0-9-_]+)\}/g;function SU(t){return X8.test(t)}function BA(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(X8,r=>{const i=r.substring(2,r.length-1),a=n==null?void 0:n[i];return a===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),r):a})}return e}function EU(t,e,n){let r=t.variableList;r||(t.variableList=r={});let i,a;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const s=new self.URL(n).searchParams;if(s.has(i))a=s.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${n}"`)}catch(s){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${s.message}`))}}else i=e.NAME,a=e.VALUE;i in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):r[i]=a||""}function Yye(t,e,n){const r=e.IMPORT;if(n&&r in n){let i=t.variableList;i||(t.variableList=i={}),i[r]=n[r]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const Wye=/^(\d+)x(\d+)$/,TU=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Ct{constructor(e,n){typeof e=="string"&&(e=Ct.parseAttrList(e,n)),ut(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let i=0;i<n.length/2;i++)r[i]=parseInt(n.slice(i*2,i*2+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}enumeratedStringList(e,n){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((i,a)=>(i[a.toLowerCase()]=!0,i),n)}bool(e){return this[e]==="YES"}decimalResolution(e){const n=Wye.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e,n){let r;const i={},a='"';for(TU.lastIndex=0;(r=TU.exec(e))!==null;){const s=r[1].trim();let o=r[2];const c=o.indexOf(a)===0&&o.lastIndexOf(a)===o.length-1;let u=!1;if(c)o=o.slice(1,-1);else switch(s){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":u=!0}if(n&&(c||u))o=BA(n,o);else if(!u&&!c)switch(s){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Ze.warn(`${e}: attribute ${s} is missing quotes`)}i[s]=o}return i}}const Xye="com.apple.hls.interstitial";function Qye(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function Zye(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class Q8{constructor(e,n,r=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(n==null?void 0:n.tagAnchor)||null,this.tagOrder=(i=n==null?void 0:n.tagOrder)!=null?i:r,n){const a=n.attr;for(const s in a)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==a[s]){Ze.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=ut(new Ct({}),a,e)}if(this.attr=e,n?(this._startDate=n._startDate,this._cue=n._cue,this._endDate=n._endDate,this._dateAtEnd=n._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const a=(n==null?void 0:n.endDate)||new Date(this.attr["END-DATE"]);be(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Ze.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const n=this.duration;return n!==null?this._dateAtEnd=new Date(this._startDate.getTime()+n*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(be(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Xye}get isValid(){return!!this.id&&!this._badValueForSameId&&be(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Jye=10;class eve{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?be(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Jye}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const n=this.lastPartIndex;if(n!==-1){for(let r=e.length;r--;)if(e[r].index>n)return e[r].index;return n}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function ml(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function n_(t){switch(t){case"AES-128":case"AES-256":return Za.cbc;case"AES-256-CTR":return Za.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function Z8(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function FA(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function tve(t){const e=FA(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function nve(t){const e=function(r,i,a){const s=r[i];r[i]=r[a],r[a]=s};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function rve(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const a=i[0]==="base64",s=i[1];a?(r.splice(-1,1),n=Z8(s)):n=tve(s)}}return n}const Mp=typeof self<"u"?self:void 0;var Ft={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Kn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function $A(t){switch(t){case Kn.FAIRPLAY:return Ft.FAIRPLAY;case Kn.PLAYREADY:return Ft.PLAYREADY;case Kn.WIDEVINE:return Ft.WIDEVINE;case Kn.CLEARKEY:return Ft.CLEARKEY}}function AU(t){switch(t){case Ft.FAIRPLAY:return Kn.FAIRPLAY;case Ft.PLAYREADY:return Kn.PLAYREADY;case Ft.WIDEVINE:return Kn.WIDEVINE;case Ft.CLEARKEY:return Kn.CLEARKEY}}function hm(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[Ft.FAIRPLAY,Ft.WIDEVINE,Ft.PLAYREADY,Ft.CLEARKEY].filter(i=>!!e[i]):[];return!r[Ft.WIDEVINE]&&n&&r.push(Ft.WIDEVINE),r}const J8=function(t){return Mp!=null&&(t=Mp.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function ive(t,e,n,r){let i;switch(t){case Ft.FAIRPLAY:i=["cenc","sinf"];break;case Ft.WIDEVINE:case Ft.PLAYREADY:i=["cenc"];break;case Ft.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return ave(i,e,n,r)}function ave(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(a=>({contentType:`audio/mp4; codecs=${a}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(a=>({contentType:`video/mp4; codecs=${a}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function sve(t){var e;return t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(n=>n==="persistent-license"))}function ove(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(e)),r=n.substring(n.indexOf("<"),n.length),s=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(s){const o=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(o){const c=Z8(o).subarray(0,16);return nve(c),c}}return null}let zh={};class Pg{static clearKeyUriToKeyIdMap(){zh={}}constructor(e,n,r,i=[1],a=null,s){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=i,this.iv=a,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!ml(e),s!=null&&s.startsWith("0x")&&(this.keyId=new Uint8Array(P8(s)))}matches(e){var n,r;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&((n=e.iv)==null?void 0:n.join(","))===((r=this.iv)==null?void 0:r.join(","))}isSupported(){if(this.method){if(ml(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Kn.FAIRPLAY:case Kn.WIDEVINE:case Kn.PLAYREADY:case Kn.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(ml(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(Ze.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=lve(e);return new Pg(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.pssh&&this.keyId)return this;const n=rve(this.uri);if(n)switch(this.keyFormat){case Kn.WIDEVINE:if(this.pssh=n,!this.keyId&&n.length>=22){const r=n.length-22;this.keyId=n.subarray(r,r+16)}break;case Kn.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=dye(r,null,n),this.keyId=ove(n);break}default:{let r=n.subarray(0,16);if(r.length!==16){const i=new Uint8Array(16);i.set(r,16-r.length),r=i}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=zh[this.uri];if(!r){const i=Object.keys(zh).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,i),zh[this.uri]=r}this.keyId=r}return this}}function lve(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const wU=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,_U=/#EXT-X-MEDIA:(.*)/g,uve=/^#EXT(?:INF|-X-TARGETDURATION):/m,wE=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),cve=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class vi{static findGroup(e,n){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===n)return i}}static resolve(e,n){return Yw.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return uve.test(e)}static parseMasterPlaylist(e,n){const r=SU(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},a=[];wU.lastIndex=0;let s;for(;(s=wU.exec(e))!=null;)if(s[1]){var o;const u=new Ct(s[1],i),d=BA(i,s[2]),h={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:vi.resolve(d,n)},p=u.decimalResolution("RESOLUTION");p&&(h.width=p.width,h.height=p.height),CU(u.CODECS,h);const y=u["SUPPLEMENTAL-CODECS"];y&&(h.supplemental={},CU(y,h.supplemental)),(o=h.unknownCodecs)!=null&&o.length||a.push(h),i.levels.push(h)}else if(s[3]){const u=s[3],d=s[4];switch(u){case"SESSION-DATA":{const h=new Ct(d,i),p=h["DATA-ID"];p&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[p]=h);break}case"SESSION-KEY":{const h=RU(d,n,i);h.encrypted&&h.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(h)):Ze.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${d}"`);break}case"DEFINE":{{const h=new Ct(d,i);EU(i,h,n)}break}case"CONTENT-STEERING":{const h=new Ct(d,i);i.contentSteering={uri:vi.resolve(h["SERVER-URI"],n),pathwayId:h["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=OU(d);break}}}const c=a.length>0&&a.length<i.levels.length;return i.levels=c?a:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,n,r){let i;const a={},s=r.levels,o={AUDIO:s.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:s.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let c=0;for(_U.lastIndex=0;(i=_U.exec(e))!==null;){const u=new Ct(i[1],r),d=u.TYPE;if(d){const h=o[d],p=a[d]||[];a[d]=p;const y=u.LANGUAGE,v=u["ASSOC-LANGUAGE"],x=u.CHANNELS,b=u.CHARACTERISTICS,T=u["INSTREAM-ID"],_={attrs:u,bitrate:0,id:c++,groupId:u["GROUP-ID"]||"",name:u.NAME||y||"",type:d,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:y,url:u.URI?vi.resolve(u.URI,n):""};if(v&&(_.assocLang=v),x&&(_.channels=x),b&&(_.characteristics=b),T&&(_.instreamId=T),h!=null&&h.length){const w=vi.findGroup(h,_.groupId)||h[0];LU(_,w,"audioCodec"),LU(_,w,"textCodec")}p.push(_)}}return a}static parseLevelPlaylist(e,n,r,i,a,s){var o;const c={url:n},u=new eve(n),d=u.fragments,h=[];let p=null,y=0,v=0,x=0,b=0,T=0,_=null,w=new EE(i,c),O,R,C,L=-1,P=!1,N=null,k;if(wE.lastIndex=0,u.m3u8=e,u.hasVariableRefs=SU(e),((o=wE.exec(e))==null?void 0:o[0])!=="#EXTM3U")return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;(O=wE.exec(e))!==null;){P&&(P=!1,w=new EE(i,c),w.playlistOffset=x,w.start=x,w.sn=y,w.cc=b,T&&(w.bitrate=T),w.level=r,p&&(w.initSegment=p,p.rawProgramDateTime&&(w.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),N&&(w.setByteRange(N),N=null)));const W=O[1];if(W){w.duration=parseFloat(W);const Y=(" "+O[2]).slice(1);w.title=Y||null,w.tagList.push(Y?["INF",W,Y]:["INF",W])}else if(O[3]){if(be(w.duration)){w.playlistOffset=x,w.start=x,C&&IU(w,C,u),w.sn=y,w.level=r,w.cc=b,d.push(w);const Y=(" "+O[3]).slice(1);w.relurl=BA(u,Y),GA(w,_,h),_=w,x+=w.duration,y++,v=0,P=!0}}else{if(O=O[0].match(cve),!O){Ze.warn("No matches on slow regex match for level playlist!");continue}for(R=1;R<O.length&&O[R]===void 0;R++);const Y=(" "+O[R]).slice(1),j=(" "+O[R+1]).slice(1),G=O[R+2]?(" "+O[R+2]).slice(1):null;switch(Y){case"BYTERANGE":_?w.setByteRange(j,_):w.setByteRange(j);break;case"PROGRAM-DATE-TIME":w.rawProgramDateTime=j,w.tagList.push(["PROGRAM-DATE-TIME",j]),L===-1&&(L=d.length);break;case"PLAYLIST-TYPE":u.type&&Hi(u,Y,O),u.type=j.toUpperCase();break;case"MEDIA-SEQUENCE":u.startSN!==0?Hi(u,Y,O):d.length>0&&PU(u,Y,O),y=u.startSN=parseInt(j);break;case"SKIP":{u.skippedSegments&&Hi(u,Y,O);const q=new Ct(j,u),Z=q.decimalInteger("SKIPPED-SEGMENTS");if(be(Z)){u.skippedSegments+=Z;for(let V=Z;V--;)d.push(null);y+=Z}const B=q.enumeratedString("RECENTLY-REMOVED-DATERANGES");B&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(B.split("	")));break}case"TARGETDURATION":u.targetduration!==0&&Hi(u,Y,O),u.targetduration=Math.max(parseInt(j),1);break;case"VERSION":u.version!==null&&Hi(u,Y,O),u.version=parseInt(j);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||Hi(u,Y,O),u.live=!1;break;case"#":(j||G)&&w.tagList.push(G?[j,G]:[j]);break;case"DISCONTINUITY":b++,w.tagList.push(["DIS"]);break;case"GAP":w.gap=!0,w.tagList.push([Y]);break;case"BITRATE":w.tagList.push([Y,j]),T=parseInt(j)*1e3,be(T)?w.bitrate=T:T=0;break;case"DATERANGE":{const q=new Ct(j,u),Z=new Q8(q,u.dateRanges[q.ID],u.dateRangeTagCount);u.dateRangeTagCount++,Z.isValid||u.skippedSegments?u.dateRanges[Z.id]=Z:Ze.warn(`Ignoring invalid DATERANGE tag: "${j}"`),w.tagList.push(["EXT-X-DATERANGE",j]);break}case"DEFINE":{{const q=new Ct(j,u);"IMPORT"in q?Yye(u,q,s):EU(u,q,n)}break}case"DISCONTINUITY-SEQUENCE":u.startCC!==0?Hi(u,Y,O):d.length>0&&PU(u,Y,O),u.startCC=b=parseInt(j);break;case"KEY":{const q=RU(j,n,u);if(q.isSupported()){if(q.method==="NONE"){C=void 0;break}C||(C={});const Z=C[q.keyFormat];Z!=null&&Z.matches(q)||(Z&&(C=ut({},C)),C[q.keyFormat]=q)}else Ze.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${j}"`);break}case"START":u.startTimeOffset=OU(j);break;case"MAP":{const q=new Ct(j,u);if(w.duration){const Z=new EE(i,c);DU(Z,q,r,C),p=Z,w.initSegment=p,p.rawProgramDateTime&&!w.rawProgramDateTime&&(w.rawProgramDateTime=p.rawProgramDateTime)}else{const Z=w.byteRangeEndOffset;if(Z){const B=w.byteRangeStartOffset;N=`${Z-B}@${B}`}else N=null;DU(w,q,r,C),p=w,P=!0}p.cc=b;break}case"SERVER-CONTROL":{k&&Hi(u,Y,O),k=new Ct(j),u.canBlockReload=k.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=k.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&k.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=k.optionalFloat("PART-HOLD-BACK",0),u.holdBack=k.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{u.partTarget&&Hi(u,Y,O);const q=new Ct(j);u.partTarget=q.decimalFloatingPoint("PART-TARGET");break}case"PART":{let q=u.partList;q||(q=u.partList=[]);const Z=v>0?q[q.length-1]:void 0,B=v++,V=new Ct(j,u),H=new Z0e(V,w,c,B,Z);q.push(H),w.duration+=H.duration;break}case"PRELOAD-HINT":{const q=new Ct(j,u);u.preloadHint=q;break}case"RENDITION-REPORT":{const q=new Ct(j,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(q);break}default:Ze.warn(`line parsed but not handled: ${O}`);break}}}_&&!_.relurl?(d.pop(),x-=_.duration,u.partList&&(u.fragmentHint=_)):u.partList&&(GA(w,_,h),w.cc=b,u.fragmentHint=w,C&&IU(w,C,u)),u.targetduration||(u.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const M=d.length,$=d[0],K=d[M-1];if(x+=u.skippedSegments*u.targetduration,x>0&&M&&K){u.averagetargetduration=x/M;const W=K.sn;u.endSN=W!=="initSegment"?W:0,u.live||(K.endList=!0),$&&u.startCC===void 0&&(u.startCC=$.cc),L>0&&(dve(d,L),$&&h.unshift($))}else u.endSN=0,u.startCC=0;return u.fragmentHint&&(x+=u.fragmentHint.duration),u.totalduration=x,h.length&&u.dateRangeTagCount&&$&&eG(h,u),u.endCC=b,u}}function eG(t,e){const n=t.length;if(!n)return;const r=t[n-1],i=e.live?1/0:e.totalduration,a=Object.keys(e.dateRanges);for(let s=a.length;s--;){const o=e.dateRanges[a[s]],c=o.startDate.getTime();o.tagAnchor=r.ref;for(let u=n;u--;){const d=fve(e,c,t,u,i);if(d!==-1){o.tagAnchor=e.fragments[d].ref;break}}}}function fve(t,e,n,r,i){const a=n[r];if(a){const o=a.programDateTime;if(e>=o||r===0){var s;const c=(((s=n[r+1])==null?void 0:s.start)||i)-a.start;if(e<=o+c*1e3){const u=n[r].sn-t.startSN,d=t.fragments;if(d.length>n.length){const p=(n[r+1]||d[d.length-1]).sn-t.startSN;for(let y=p;y>u;y--){const v=d[y].programDateTime;if(e>=v&&e<v+d[y].duration*1e3)return y}}return u}}}return-1}function RU(t,e,n){var r,i;const a=new Ct(t,n),s=(r=a.METHOD)!=null?r:"",o=a.URI,c=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,d=(i=a.KEYFORMAT)!=null?i:"identity";o&&a.IV&&!c&&Ze.error(`Invalid IV: ${a.IV}`);const h=o?vi.resolve(o,e):"",p=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Pg(s,h,d,p,c,a.KEYID)}function OU(t){const n=new Ct(t).decimalFloatingPoint("TIME-OFFSET");return be(n)?n:null}function CU(t,e){let n=(t||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const i=n.filter(a=>Qw(a,r));i.length&&(e[`${r}Codec`]=i.map(a=>a.split("/")[0]).join(","),n=n.filter(a=>i.indexOf(a)===-1))}),e.unknownCodecs=n}function LU(t,e,n){const r=e[n];r&&(t[n]=r)}function dve(t,e){let n=t[e];for(let r=e;r--;){const i=t[r];if(!i)return;i.programDateTime=n.programDateTime-i.duration*1e3,n=i}}function GA(t,e,n){t.rawProgramDateTime?n.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function DU(t,e,n,r){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",r&&(t.levelkeys=r),t.initSegment=null}function IU(t,e,n){t.levelkeys=e;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&r.push(t)}function Hi(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${n[0]})`)}function PU(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${n[0]})`)}function _E(t,e){const n=e.startPTS;if(be(n)){let r=0,i;e.sn>t.sn?(r=n-t.start,i=t):(r=t.start-n,i=e),i.duration!==r&&i.setDuration(r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function tG(t,e,n,r,i,a){r-n<=0&&(Ze.warn("Fragment should have a positive duration",e),r=n+e.duration,a=i+e.duration);let o=n,c=r;const u=e.startPTS,d=e.endPTS;if(be(u)){const b=Math.abs(u-n);be(e.deltaPTS)?e.deltaPTS=Math.max(b,e.deltaPTS):e.deltaPTS=b,o=Math.max(n,u),n=Math.min(n,u),i=Math.min(i,e.startDTS),c=Math.min(r,d),r=Math.max(r,d),a=Math.max(a,e.endDTS)}const h=n-e.start;e.start!==0&&e.setStart(n),e.setDuration(r-e.start),e.startPTS=n,e.maxStartPTS=o,e.startDTS=i,e.endPTS=r,e.minEndPTS=c,e.endDTS=a;const p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;let y;const v=p-t.startSN,x=t.fragments;for(x[v]=e,y=v;y>0;y--)_E(x[y],x[y-1]);for(y=v;y<x.length-1;y++)_E(x[y],x[y+1]);return t.fragmentHint&&_E(x[x.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,h}function hve(t,e){if(t===e)return;let n=null;const r=t.fragments;for(let u=r.length-1;u>=0;u--){const d=r[u].initSegment;if(d){n=d;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let i;gve(t,e,(u,d,h,p)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==u.cc){const y=u.cc-d.cc;for(let v=h;v<p.length;v++)p[v].cc+=y;e.endCC=p[p.length-1].cc}be(u.startPTS)&&be(u.endPTS)&&(d.setStart(d.startPTS=u.startPTS),d.startDTS=u.startDTS,d.maxStartPTS=u.maxStartPTS,d.endPTS=u.endPTS,d.endDTS=u.endDTS,d.minEndPTS=u.minEndPTS,d.setDuration(u.endPTS-u.startPTS),d.duration&&(i=d),e.PTSKnown=e.alignedSliding=!0),u.hasStreams&&(d.elementaryStreams=u.elementaryStreams),d.loader=u.loader,u.hasStats&&(d.stats=u.stats),u.initSegment&&(d.initSegment=u.initSegment,n=u.initSegment)});const a=e.fragments,s=e.fragmentHint?a.concat(e.fragmentHint):a;if(n&&s.forEach(u=>{var d;u&&(!u.initSegment||u.initSegment.relurl===((d=n)==null?void 0:d.relurl))&&(u.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(u=>!u),e.deltaUpdateFailed){Ze.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=e.skippedSegments;u--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=mve(t.dateRanges,e));const u=t.fragments.filter(d=>d.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<s.length;d++)s[d].programDateTime===null&&GA(s[d],s[d-1],u);eG(u,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var o;const u=iG(t,e.startSN-1);e.startCC=(o=u==null?void 0:u.cc)!=null?o:a[0].cc}pve(t.partList,e.partList,(u,d)=>{d.elementaryStreams=u.elementaryStreams,d.stats=u.stats}),i?tG(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):nG(t,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const u=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=u),e.driftEndTime=c,e.driftEnd=u}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function mve(t,e){const{dateRanges:n,recentlyRemovedDateranges:r}=e,i=ut({},t);r&&r.forEach(o=>{delete i[o]});const s=Object.keys(i).length;return s&&Object.keys(n).forEach(o=>{const c=i[o],u=new Q8(n[o].attr,c);u.isValid?(i[o]=u,c||(u.tagOrder+=s)):Ze.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Et(n[o].attr)}"`)}),i}function pve(t,e,n){if(t&&e){let r=0;for(let i=0,a=t.length;i<=a;i++){const s=t[i],o=e[i+r];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?n(s,o):r--}}}function gve(t,e,n){const r=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,c=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=i;u<=a;u++){const d=c[s+u];let h=o[u];if(r&&!h&&d&&(h=e.fragments[u]=d),d&&h){if(n(d,h,u,o),d.url&&d.url!==h.url){e.playlistParsingError=NU(`media sequence mismatch ${h.sn}:`,t,e,d,h);return}else if(d.cc!==h.cc){e.playlistParsingError=NU(`discontinuity sequence mismatch (${d.cc}!=${h.cc})`,t,e,d,h);return}}}}function NU(t,e,n,r,i){return new Error(`${t} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${n.startSN}
${n.m3u8}`)}function nG(t,e,n=!0){const r=e.startSN+e.skippedSegments-t.startSN,i=t.fragments,a=r>=0;let s=0;if(a&&r<i.length)s=i[r].start;else if(a&&e.startSN===t.endSN+1)s=t.fragmentEnd;else if(a&&n)s=t.fragmentStart+r*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)s=t.fragmentStart;else return;VA(e,s)}function VA(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function rG(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments;if(r.length&&n*4>e){const a=r[r.length-1].duration*1e3;a<n&&(n=a)}}else n/=2;return Math.round(n)}function iG(t,e,n){if(!t)return null;let r=t.fragments[e-t.startSN];return r||(r=t.fragmentHint,r&&r.sn===e)?r:e<t.startSN&&n&&n.sn===e?n:null}function MU(t,e,n){return t?aG(t.partList,e,n):null}function aG(t,e,n){if(t)for(let r=t.length;r--;){const i=t[r];if(i.index===n&&i.fragment.sn===e)return i}return null}function sG(t){t.forEach((e,n)=>{var r;(r=e.details)==null||r.fragments.forEach(i=>{i.level=n,i.initSegment&&(i.initSegment.level=n)})})}function kc(t,e){for(let r=0,i=t.length;r<i;r++){var n;if(((n=t[r])==null?void 0:n.cc)===e)return t[r]}return null}function yve(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function kU(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function oG(t,e){const n=e.fragments;for(let r=0,i=n.length;r<i;r++)kU(n[r],t);e.fragmentHint&&kU(e.fragmentHint,t),e.alignedSliding=!0}function vve(t,e){t&&(lG(e,t),!e.alignedSliding&&t&&kp(e,t),!e.alignedSliding&&t&&!e.skippedSegments&&nG(t,e,!1))}function lG(t,e){if(!yve(e,t))return;const n=Math.min(e.endCC,t.endCC),r=kc(e.fragments,n),i=kc(t.fragments,n);if(!r||!i)return;Ze.log(`Aligning playlist at start of dicontinuity sequence ${n}`);const a=r.start-i.start;oG(a,t)}function kp(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;let i,a;const s=Math.min(e.endCC,t.endCC);e.startCC<s&&t.startCC<s&&(i=kc(r,s),a=kc(n,s)),(!i||!a)&&(i=r[Math.floor(r.length/2)],a=kc(n,i.cc)||n[Math.floor(n.length/2)]);const o=i.programDateTime,c=a.programDateTime;if(!o||!c)return;const u=(c-o)/1e3-(a.start-i.start);oG(u,t)}const bve={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},fe={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class r_ extends W8{constructor(e,n,r,i,a){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=fe.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:s,fragCurrent:o,media:c,mediaBuffer:u,state:d}=this,h=c?c.currentTime:0,p=ke.bufferInfo(u||c,h,s.maxBufferHole),y=!p.len;if(this.log(`Media seeking to ${be(h)?h.toFixed(3):h}, state: ${d}, ${y?"out of":"in"} buffer`),this.state===fe.ENDED)this.resetLoadingState();else if(o){const v=s.maxFragLookUpTolerance,x=o.start-v,b=o.start+o.duration+v;if(y||b<p.start||x>p.end){const T=h>b;(h<x||T)&&(T&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(c){this.fragmentTracker.removeFragmentsInRange(h,1/0,this.playlistType,!0);const v=this.lastCurrentTime;if(h>v&&(this.lastCurrentTime=h),!this.loadingParts){const x=Math.max(p.end,h),b=this.shouldLoadParts(this.getLevelDetails(),x);b&&(this.log(`LL-Part loading ON after seeking to ${h.toFixed(2)} with buffer @${x.toFixed(2)}`),this.loadingParts=b)}}this.hls.hasEnoughToStart||(this.log(`Setting ${y?"startPosition":"nextLoadPosition"} to ${h} for seek without enough to start`),this.nextLoadPosition=h,y&&(this.startPosition=h)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new zye(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new e_(e.config)}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===fe.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=fe.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:n}=this;return n===-1&&e?e:n}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,n){if(n.live||!this.media)return!1;const r=e.end||0,i=this.config.timelineOffset||0;if(r<=i)return!1;const a=e.buffered;this.config.maxBufferHole&&a&&a.length>1&&(e=ke.bufferedInfo(a,e.start,0));const s=e.nextStart;if(s&&s>i&&s<n.edge||this.media.currentTime<e.start)return!1;const c=n.partList;if(c!=null&&c.length){const d=c[c.length-1];return ke.isBuffered(this.media,d.start+d.duration/2)}const u=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(u)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var n;return((n=this.getLevelDetails())==null?void 0:n.appliedTimelineOffset)||e}return 0}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===fe.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,n){const r=!!n.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,n){}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=fe.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this.startFragRequested=!0,this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const i=a=>{const s=a.frag;if(this.fragContextChanged(s)){this.warn(`${s.type} sn: ${s.sn}${a.part?" part: "+a.part.index:""} of ${this.fragInfo(s,!1,a.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(s);return}s.stats.chunkCount++,this._handleFragmentLoadProgress(a)};this._doFragLoad(e,n,r,i).then(a=>{if(!a)return;const s=this.state,o=a.frag;if(this.fragContextChanged(o)){(s===fe.FRAG_LOADING||!this.fragCurrent&&s===fe.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=fe.IDLE);return}"payload"in a&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(D.FRAG_LOADED,a)),this._handleFragmentLoadComplete(a)}).catch(a=>{this.state===fe.STOPPED||this.state===fe.ERROR||(this.warn(`Frag error: ${(a==null?void 0:a.message)||a}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===en.APPENDING){const a=e.type,s=this.getFwdBufferInfo(this.mediaBuffer,a),o=Math.max(e.duration,s?s.len:this.config.maxBufferLength),c=this.backtrackFragment;((c?e.sn-c.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===en.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const n=e.details;return(n==null?void 0:n.live)&&n.type!=="EVENT"&&(this.levelLastLoaded!==e||n.expired)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const i={startOffset:e,endOffset:n,type:r};this.hls.trigger(D.BUFFER_FLUSHING,i)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{const i=r==null?void 0:r.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{frag:a,payload:s}=r,o=a.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&ml(o.method)){const c=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer,n_(o.method)).catch(u=>{throw i.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:a}),u}).then(u=>{const d=self.performance.now();return i.trigger(D.FRAG_DECRYPTED,{frag:a,payload:u,stats:{tstart:c,tdecrypt:d}}),r.payload=u,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===fe.STOPPED||this.state===fe.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==fe.STOPPED&&(this.state=fe.IDLE),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)} > buffer:${r?bve.toString(ke.getBuffered(r)):"(detached)"})`),Kt(e)){var i;if(e.type!==Se.SUBTITLE){const s=e.elementaryStreams;if(!Object.keys(s).some(o=>!!s[o])){this.state=fe.IDLE;return}}const a=(i=this.levels)==null?void 0:i[e.level];a!=null&&a.fragmentError&&(this.log(`Resetting level fragment error count of ${a.fragmentError} on frag buffered`),a.fragmentError=0)}this.state=fe.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:i,partsLoaded:a}=e,s=!a||a.length===0||a.some(c=>!c),o=new t_(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!s);n.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,i){var a;this.fragCurrent=e;const s=n==null?void 0:n.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let o=null;e.encrypted&&!((a=e.decryptdata)!=null&&a.key)?(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=fe.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(D.KEY_LOADED,h),this.state===fe.KEY_LOADING&&(this.state=fe.IDLE),h}),this.hls.trigger(D.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):e.encrypted||(o=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const c=this.fragPrevious;if(Kt(e)&&(!c||e.sn!==c.sn)){const h=this.shouldLoadParts(n.details,e.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} loading sn ${c==null?void 0:c.sn}->${e.sn}`),this.loadingParts=h)}if(r=Math.max(e.start,r||0),this.loadingParts&&Kt(e)){const h=s.partList;if(h&&i){r>e.end&&s.fragmentHint&&(e=s.fragmentHint);const p=this.getNextPart(h,e,r);if(p>-1){const y=h[p];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${p}/${h.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=fe.FRAG_LOADING;let v;return o?v=o.then(x=>!x||this.fragContextChanged(x.frag)?null:this.doFragPartsLoad(e,y,n,i)).catch(x=>this.handleFragLoadError(x)):v=this.doFragPartsLoad(e,y,n,i).catch(x=>this.handleFragLoadError(x)),this.hls.trigger(D.FRAG_LOADING,{frag:e,part:y,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):v}else if(!e.url||this.loadedEndOfParts(h,r))return Promise.resolve(null)}}if(Kt(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${s?"["+s.startSN+"-"+s.endSN+"]":""}, target: ${parseFloat(r.toFixed(3))}`),be(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=fe.FRAG_LOADING;const u=this.config.progressive;let d;return u&&o?d=o.then(h=>!h||this.fragContextChanged(h==null?void 0:h.frag)?null:this.fragmentLoader.load(e,i)).catch(h=>this.handleFragLoadError(h)):d=Promise.all([this.fragmentLoader.load(e,u?i:void 0),o]).then(([h])=>(!u&&h&&i&&i(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(D.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,n,r,i){return new Promise((a,s)=>{var o;const c=[],u=(o=r.details)==null?void 0:o.partList,d=h=>{this.fragmentLoader.loadPart(e,h,i).then(p=>{c[h.index]=p;const y=p.part;this.hls.trigger(D.FRAG_LOADED,p);const v=MU(r.details,e.sn,h.index+1)||aG(u,e.sn,h.index+1);if(v)d(v);else return a({frag:e,part:y,partsLoaded:c})}).catch(s)};d(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===re.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(D.ERROR,n)}else this.hls.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==fe.PARSING){!this.fragCurrent&&this.state!==fe.STOPPED&&this.state!==fe.ERROR&&(this.state=fe.IDLE);return}const{frag:r,part:i,level:a}=n,s=self.performance.now();r.stats.parsing.end=s,i&&(i.stats.parsing.end=s);const o=this.getLevelDetails(),u=o&&r.sn>o.endSN||this.shouldLoadParts(o,r.end);u!==this.loadingParts&&(this.log(`LL-Part loading ${u?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=u),this.updateLevelTiming(r,i,a,e.partial)}shouldLoadParts(e,n){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var r;const a=e.partList[0],s=a.end+(((r=e.fragmentHint)==null?void 0:r.duration)||0);if(n>=s){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>a.start-a.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:i,sn:a,part:s}=e;if(!(n!=null&&n[i]))return this.warn(`Levels object was unset while buffering fragment ${a} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const o=n[i],c=o.details,u=s>-1?MU(c,a,s):null,d=u?u.fragment:iG(c,a,r);return d?(r&&r!==d&&(d.stats=r.stats),{frag:d,part:u,level:o}):null}bufferFragmentData(e,n,r,i,a){var s;if(!e||this.state!==fe.PARSING)return;const{data1:o,data2:c}=e;let u=o;if(o&&c&&(u=kr(o,c)),!((s=u)!=null&&s.length))return;const d=this.initPTS[n.cc],h=d?-d.baseTime/d.timescale:void 0,p={type:e.type,frag:n,part:r,chunkMeta:i,offset:h,parent:n.type,data:u};if(this.hls.trigger(D.BUFFER_APPENDING,p),e.dropped&&e.independent&&!r){if(a)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!ke.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,i=ke.bufferInfo(n,r,0),a=e.duration,s=Math.min(this.config.maxFragLookUpTolerance*2,a*.25),o=Math.max(Math.min(e.start-s,i.end-s),r+s);e.start-o>s&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,n){var r;const i=this.getLoadPosition();if(!be(i))return null;const s=this.lastCurrentTime>i||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,n,s)}getFwdBufferInfoAtPos(e,n,r,i){const a=ke.bufferInfo(e,n,i);if(a.len===0&&a.nextStart!==void 0){const s=this.fragmentTracker.getBufferedFrag(n,r);if(s&&(a.nextStart<=s.end||s.gap)){const o=Math.max(Math.min(a.nextStart,s.end)-n,i);return ke.bufferInfo(e,n,o)}}return a}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const r=this.config,i=Math.max(Math.min(e-n,r.maxBufferLength),n),a=Math.max(e-n*3,r.maxMaxBufferLength/2,i);return a>=i?(r.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0):!1}getAppendedFrag(e,n=Se.MAIN){var r;const i=(r=this.fragmentTracker)==null?void 0:r.getAppendedFrag(e,n);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,n){const r=n.fragments,i=r.length;if(!i)return null;const{config:a}=this,s=r[0].start,o=a.lowLatencyMode&&!!n.partList;let c=null;if(n.live){const h=a.initialLiveManifestSize;if(i<h)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${h})`),null;if(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<s){var u;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),c=this.getInitialLiveFragment(n);const p=this.hls.startPosition,y=this.hls.liveSyncPosition,v=c?(p!==-1&&p>=s?p:y)||c.start:e;this.log(`Setting startPosition to ${v} to match start frag at live edge. mainStart: ${p} liveSyncPosition: ${y} frag.start: ${(u=c)==null?void 0:u.start}`),this.startPosition=this.nextLoadPosition=v}}else e<=s&&(c=r[0]);if(!c){const h=this.loadingParts?n.partEnd:n.fragmentEnd;c=this.getFragmentAtPosition(e,h,n)}let d=this.filterReplacedPrimary(c,n);if(!d&&c){const h=c.sn-n.startSN;d=this.filterReplacedPrimary(r[h+1]||null,n)}return this.mapToInitFragWhenRequired(d)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===en.OK||r===en.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,i,a){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,n),s&&!s.gap&&r.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i,0);if(o!==null&&r.len+o.len>=a){const c=s.sn;return this.loopSn!==c&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${c}`),this.loopSn=c),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(jU(this.hls.config)){var e,n;if((e=this.hls.interstitialsManager)==null||(n=e.playingItem)==null?void 0:n.event)return!0}return!1}filterReplacedPrimary(e,n){if(!e)return e;if(jU(this.hls.config)&&e.type!==Se.SUBTITLE){const r=this.hls.interstitialsManager,i=r==null?void 0:r.bufferingItem;if(i){const s=i.event;if(s){if(s.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&(n==null?void 0:n.live)===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const a=r==null?void 0:r.playerQueue;if(a)for(let s=a.length;s--;){const o=a[s].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let i=-1,a=!1,s=!0;for(let o=0,c=e.length;o<c;o++){const u=e[o];if(s=s&&!u.independent,i>-1&&r<u.start)break;const d=u.loaded;d?i=-1:(a||u.independent||s)&&u.fragment===n&&(i=o),a=d}return i}loadedEndOfParts(e,n){const r=e[e.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(e){const n=e.fragments,r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=Nye(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const a=r.sn+1;if(a>=e.startSN&&a<=e.endSN){const s=n[a-e.startSN];r.cc===s.cc&&(i=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=Y8(e,r.cc,r.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const a=this.hls.liveSyncPosition;a!==null&&(i=this.getFragmentAtPosition(a,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,n,r){const{config:i}=this;let{fragPrevious:a}=this,{fragments:s,endSN:o}=r;const{fragmentHint:c}=r,{maxFragLookUpTolerance:u}=i,d=r.partList,h=!!(this.loadingParts&&d!=null&&d.length&&c);h&&c&&!this.bitrateTest&&d[d.length-1].fragment.sn===c.sn&&(s=s.concat(c),o=c.sn);let p;if(e<n){var y;const x=e<this.lastCurrentTime||e>n-u||(y=this.media)!=null&&y.paused||!this.startFragRequested?0:u;p=eo(a,s,e,x)}else p=s[s.length-1];if(p){const v=p.sn-r.startSN,x=this.fragmentTracker.getState(p);if((x===en.OK||x===en.PARTIAL&&p.gap)&&(a=p),a&&p.sn===a.sn&&(!h||d[0].fragment.sn>p.sn||!r.live&&!h)&&a&&p.level===a.level){const T=s[v+1];p.sn<o&&this.fragmentTracker.getState(T)!==en.OK?p=T:p=null}}return p}alignPlaylists(e,n,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,s=!n,o=e.alignedSliding&&be(a);if(s||!o&&!a){vve(r,e);const c=e.fragmentStart;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} fragments: ${i}`),c}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;r<n&&(r=-1);const i=this.timelineOffset;if(r===-1){const a=this.startTimeOffset!==null,s=a?this.startTimeOffset:e.startTimeOffset;s!==null&&be(s)?(r=n+s,s<0&&(r+=e.edge),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${s} found in ${a?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||n,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+i}this.nextLoadPosition=r+i}getLoadPosition(){var e;const{media:n}=this;let r=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&n?r=n.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,n){this.transmuxer&&e.type===this.playlistType&&Kt(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${n?" part "+n.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==fe.FRAG_LOADING_WAITING_RETRY)&&(this.state=fe.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const v=this.getCurrentContext(n.chunkMeta);v&&(n.frag=v.frag)}const r=n.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const a=n.details===re.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(r,!0);const s=n.errorAction,{action:o,flags:c,retryCount:u=0,retryConfig:d}=s||{},h=!!s&&!!d,p=h&&o===In.RetryRequest,y=h&&!s.resolved&&c===zr.MoveAllAlternatesMatchingHost;if(!p&&y&&Kt(r)&&!r.endList)this.resetFragmentErrors(e),this.treatAsGap(r),s.resolved=!0;else if((p||y)&&u<d.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const v=Jw(d,u);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${n.details}, retrying loading ${u+1}/${d.maxNumRetry} in ${v}ms`),s.resolved=!0,this.retryDate=self.performance.now()+v,this.state=fe.FRAG_LOADING_WAITING_RETRY}else if(d&&s)if(this.resetFragmentErrors(e),u<d.maxNumRetry)!a&&o!==In.RemoveAlternatePermanently&&(s.resolved=!0);else{this.warn(`${n.details} reached or exceeded max retry (${u})`);return}else o===In.SendAlternateToPenaltyBox?this.state=fe.WAITING_LEVEL:this.state=fe.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===fe.PARSING||this.state===fe.PARSED){const n=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),a=i&&i.len>.5;a&&this.reduceMaxBufferLength(i.len,(n==null?void 0:n.duration)||10);const s=!a;return s&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===Se.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==fe.STOPPED&&(this.state=fe.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const i=ke.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,i,r),this.state===fe.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==fe.STOPPED&&(this.state=fe.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(n,n.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,i){const a=r.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((c,u)=>{const d=e.elementaryStreams[u];if(d){const h=d.endPTS-d.startPTS;if(h<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${h})`),c||!1;const p=i?0:tG(a,e,d.startPTS,d.endPTS,d.startDTS,d.endDTS);return this.hls.trigger(D.LEVEL_PTS_UPDATED,{details:a,level:r,drift:p,type:u,frag:e,start:d.startPTS,end:d.endPTS}),!0}return c},!1)){var o;if(r.fragmentError===0&&this.treatAsGap(e,r),((o=this.transmuxer)==null?void 0:o.error)===null){const c=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=fe.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)})`),this.hls.trigger(D.FRAG_PARSED,{frag:e,part:n})}playlistLabel(){return this.playlistType===Se.MAIN?"level":"track"}fragInfo(e,n=!0,r){var i,a;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${((i=n&&!r?e.startPTS:(r||e).start)!=null?i:NaN).toFixed(3)}-${((a=n&&!r?e.endPTS:(r||e).end)!=null?a:NaN).toFixed(3)}]${r&&e.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,n){n&&n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}function jU(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class uG{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=xve(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function xve(t,e){const n=new Uint8Array(e);let r=0;for(let i=0;i<t.length;i++){const a=t[i];n.set(a,r),r+=a.length}return n}var RE={exports:{}},UU;function Sve(){return UU||(UU=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,h||c,p),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],y]:c._events[v].push(y):(c._events[v]=y,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,y=h.length,v=new Array(y);p<y;p++)v[p]=h[p].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,p,y,v){var x=n?n+u:u;if(!this._events[x])return!1;var b=this._events[x],T=arguments.length,_,w;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),T){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,p),!0;case 5:return b.fn.call(b.context,d,h,p,y),!0;case 6:return b.fn.call(b.context,d,h,p,y,v),!0}for(w=1,_=new Array(T-1);w<T;w++)_[w-1]=arguments[w];b.fn.apply(b.context,_)}else{var O=b.length,R;for(w=0;w<O;w++)switch(b[w].once&&this.removeListener(u,b[w].fn,void 0,!0),T){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,d);break;case 3:b[w].fn.call(b[w].context,d,h);break;case 4:b[w].fn.call(b[w].context,d,h,p);break;default:if(!_)for(R=1,_=new Array(T-1);R<T;R++)_[R-1]=arguments[R];b[w].fn.apply(b[w].context,_)}}return!0},o.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,p){var y=n?n+u:u;if(!this._events[y])return this;if(!d)return s(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&s(this,y);else{for(var x=0,b=[],T=v.length;x<T;x++)(v[x].fn!==d||p&&!v[x].once||h&&v[x].context!==h)&&b.push(v[x]);b.length?this._events[y]=b.length===1?b[0]:b:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(RE)),RE.exports}var Eve=Sve(),i_=X0e(Eve);const Nf="1.6.7",Gl={};function Tve(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Ave(){const t=Gl[Nf];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(e),i={worker:new self.Worker(n),objectURL:n,clientCount:1};return Gl[Nf]=i,i}function wve(t){const e=Gl[t];if(e)return e.clientCount++,e;const n=new self.URL(t,self.location.href).href,i={worker:new self.Worker(n),scriptURL:n,clientCount:1};return Gl[t]=i,i}function _ve(t){const e=Gl[t||Nf];if(e&&e.clientCount--===1){const{worker:r,objectURL:i}=e;delete Gl[t||Nf],i&&self.URL.revokeObjectURL(i),r.terminate()}}function cG(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function a_(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function Ng(t,e){let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n}function Mf(t,e){const n=e;let r=0;for(;a_(t,e);){r+=10;const i=Ng(t,e+6);r+=i,cG(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)}function Rve(t,e,n,r){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=e[n+2],s=a>>2&15;if(s>12){const y=new Error(`invalid ADTS sampling index:${s}`);t.emit(D.ERROR,D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!0,error:y,reason:y.message});return}const o=(a>>6&3)+1,c=e[n+3]>>6&3|(a&1)<<2,u="mp4a.40."+o,d=i[s];let h=s;(o===5||o===29)&&(h-=3);const p=[o<<3|(h&14)>>1,(h&1)<<7|c<<3];return Ze.log(`manifest codec:${r}, parsed codec:${u}, channels:${c}, rate:${d} (ADTS object type:${o} sampling index:${s})`),{config:p,samplerate:d,channelCount:c,codec:u,parsedCodec:u,manifestCodec:r}}function fG(t,e){return t[e]===255&&(t[e+1]&246)===240}function dG(t,e){return t[e+1]&1?7:9}function s_(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function Ove(t,e){return e+5<t.length}function jp(t,e){return e+1<t.length&&fG(t,e)}function Cve(t,e){return Ove(t,e)&&fG(t,e)&&s_(t,e)<=t.length-e}function Lve(t,e){if(jp(t,e)){const n=dG(t,e);if(e+n>=t.length)return!1;const r=s_(t,e);if(r<=n)return!1;const i=e+r;return i===t.length||jp(t,i)}return!1}function hG(t,e,n,r,i){if(!t.samplerate){const a=Rve(e,n,r,i);if(!a)return;ut(t,a)}}function mG(t){return 1024*9e4/t}function Dve(t,e){const n=dG(t,e);if(e+n<=t.length){const r=s_(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function pG(t,e,n,r,i){const a=mG(t.samplerate),s=r+i*a,o=Dve(e,n);let c;if(o){const{frameLength:h,headerLength:p}=o,y=p+h,v=Math.max(0,n+y-e.length);v?(c=new Uint8Array(y-p),c.set(e.subarray(n+p,e.length),0)):c=e.subarray(n+p,n+y);const x={unit:c,pts:s};return v||t.samples.push(x),{sample:x,length:y,missing:v}}const u=e.length-n;return c=new Uint8Array(u),c.set(e.subarray(n,e.length),0),{sample:{unit:c,pts:s},length:u,missing:-1}}function Ive(t,e){return a_(t,e)&&Ng(t,e+6)+10<=t.length-e}function Pve(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function OE(t,e=0,n=1/0){return Nve(t,e,n,Uint8Array)}function Nve(t,e,n,r){const i=Mve(t);let a=1;"BYTES_PER_ELEMENT"in r&&(a=r.BYTES_PER_ELEMENT);const s=kve(t)?t.byteOffset:0,o=(s+t.byteLength)/a,c=(s+e)/a,u=Math.floor(Math.max(0,Math.min(c,o))),d=Math.floor(Math.min(u+Math.max(n,0),o));return new r(i,u,d-u)}function Mve(t){return t instanceof ArrayBuffer?t:t.buffer}function kve(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function jve(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},n=3;if(t.size<2)return;if(t.data[0]!==n){console.log("Ignore frame with unrecognized character encoding");return}const r=t.data.subarray(1).indexOf(0);if(r===-1)return;const i=fr(OE(t.data,1,r)),a=t.data[2+r],s=t.data.subarray(3+r).indexOf(0);if(s===-1)return;const o=fr(OE(t.data,3+r,s));let c;return i==="-->"?c=fr(OE(t.data,4+r+s)):c=Pve(t.data.subarray(4+r+s)),e.mimeType=i,e.pictureType=a,e.description=o,e.data=c,e}function Uve(t){if(t.size<2)return;const e=fr(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}function Bve(t){if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=fr(t.data.subarray(n),!0);n+=r.length+1;const i=fr(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=fr(t.data.subarray(1));return{key:t.type,info:"",data:e}}function Fve(t){if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=fr(t.data.subarray(n),!0);n+=r.length+1;const i=fr(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=fr(t.data);return{key:t.type,info:"",data:e}}function $ve(t){return t.type==="PRIV"?Uve(t):t.type[0]==="W"?Fve(t):t.type==="APIC"?jve(t):Bve(t)}function Gve(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=Ng(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}}const Kh=10,Vve=10;function gG(t){let e=0;const n=[];for(;a_(t,e);){const r=Ng(t,e+6);t[e+5]>>6&1&&(e+=Kh),e+=Kh;const i=e+r;for(;e+Vve<i;){const a=Gve(t.subarray(e)),s=$ve(a);s&&n.push(s),e+=a.size+Kh}cG(t,e)&&(e+=Kh)}return n}function yG(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function qve(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}}function o_(t){const e=gG(t);for(let n=0;n<e.length;n++){const r=e[n];if(yG(r))return qve(r)}}let ur=function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t}({});function pi(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class l_{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=kr(this.cachedData,e),this.cachedData=null);let r=Mf(e,0),i=r?r.length:0,a;const s=this._audioTrack,o=this._id3Track,c=r?o_(r):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&be(c))&&(this.basePTS=Hve(c,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ur.audioId3,duration:Number.POSITIVE_INFINITY});i<u;){if(this.canParse(e,i)){const d=this.appendFrame(s,e,i);d?(this.frameIndex++,this.lastPTS=d.sample.pts,i+=d.length,a=i):i=u}else Ive(e,i)?(r=Mf(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ur.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,a=i):i++;if(i===u&&a!==u){const d=e.slice(a);this.cachedData?this.cachedData=kr(this.cachedData,d):this.cachedData=d}}return{audioTrack:s,videoTrack:pi(),id3Track:o,textTrack:pi()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:pi(),id3Track:this._id3Track,textTrack:pi()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Hve=(t,e,n)=>{if(be(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};let Yh=null;const zve=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Kve=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Yve=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Wve=[0,1,1,4];function vG(t,e,n,r,i){if(n+24>e.length)return;const a=bG(e,n);if(a&&n+a.frameLength<=e.length){const s=a.samplesPerFrame*9e4/a.sampleRate,o=r+i*s,c={unit:e.subarray(n,n+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(c),{sample:c,length:a.frameLength,missing:0}}}function bG(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,a=t[e+2]>>2&3;if(n!==1&&i!==0&&i!==15&&a!==3){const s=t[e+2]>>1&1,o=t[e+3]>>6,c=n===3?3-r:r===3?3:4,u=zve[c*14+i-1]*1e3,h=Kve[(n===3?0:n===2?1:2)*3+a],p=o===3?1:2,y=Yve[n][r],v=Wve[r],x=y*8*v,b=Math.floor(y*u/h+s)*v;if(Yh===null){const w=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Yh=w?parseInt(w[1]):0}return!!Yh&&Yh<=87&&r===2&&u>=224e3&&o===0&&(t[e+3]=t[e+3]|128),{sampleRate:h,channelCount:p,frameLength:b,samplesPerFrame:x}}}function u_(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function xG(t,e){return e+1<t.length&&u_(t,e)}function Xve(t,e){return u_(t,e)&&4<=t.length-e}function SG(t,e){if(e+1<t.length&&u_(t,e)){const r=bG(t,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const a=e+i;return a===t.length||xG(t,a)}return!1}class Qve extends l_{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,n){if(!e)return!1;const r=Mf(e,0);let i=(r==null?void 0:r.length)||0;if(SG(e,i))return!1;for(let a=e.length;i<a;i++)if(Lve(e,i))return n.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return Cve(e,n)}appendFrame(e,n,r){hG(e,this.observer,n,r,e.manifestCodec);const i=pG(e,n,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const EG=(t,e)=>{let n=0,r=5;e+=r;const i=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);for(;r>0;){s[0]=t[e];const o=Math.min(r,8),c=8-o;a[0]=4278190080>>>24+c<<c,i[0]=(s[0]&a[0])>>c,n=n?n<<o|i[0]:i[0],e+=1,r-=o}return n};class Zve extends l_{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,r){const i=TG(e,n,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const n=Mf(e,0);if(!n)return!1;const r=n.length;return e[r]===11&&e[r+1]===119&&o_(n)!==void 0&&EG(e,r)<16}}function TG(t,e,n,r,i){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const a=e[n+4]>>6;if(a>=3)return-1;const o=[48e3,44100,32e3][a],c=e[n+4]&63,d=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][c*3+a]*2;if(n+d>e.length)return-1;const h=e[n+6]>>5;let p=0;h===2?p+=2:(h&1&&h!==1&&(p+=2),h&4&&(p+=2));const y=(e[n+6]<<8|e[n+7])>>12-p&1,x=[2,1,2,3,3,4,4,5][h]+y,b=e[n+5]>>3,T=e[n+5]&7,_=new Uint8Array([a<<6|b<<1|T>>2,(T&3)<<6|h<<3|y<<2|c>>4,c<<4&224]),w=1536/o*9e4,O=r+i*w,R=e.subarray(n,n+d);return t.config=_,t.channelCount=x,t.samplerate=o,t.samples.push({unit:R,pts:O}),d}class Jve extends l_{resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Mf(e,0);let r=(n==null?void 0:n.length)||0;if(n&&e[r]===11&&e[r+1]===119&&o_(n)!==void 0&&EG(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(SG(e,r))return Ze.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return Xve(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return vG(e,n,r,this.basePTS,this.frameIndex)}}const ebe=/\/emsg[-/]ID3/i;class tbe{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,i){const a=this.videoTrack=pi("video",1),s=this.audioTrack=pi("audio",1),o=this.txtTrack=pi("text",1);if(this.id3Track=pi("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const c=B8(e);if(c.video){const{id:u,timescale:d,codec:h,supplemental:p}=c.video;a.id=u,a.timescale=o.timescale=d,a.codec=h,a.supplemental=p}if(c.audio){const{id:u,timescale:d,codec:h}=c.audio;s.id=u,s.timescale=d,s.codec=h}o.id=k8.text,a.sampleDuration=0,a.duration=s.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return tye(e)}demux(e,n){this.timeOffset=n;let r=e;const i=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=kr(this.remainderData,e));const o=lye(r);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=r;const s=this.extractID3Track(i,n);return a.samples=iU(n,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(n,this.timeOffset);return r.samples=iU(e,n),{videoTrack:n,audioTrack:pi(),id3Track:i,textTrack:pi()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const i=Ve(e.samples,["emsg"]);i&&i.forEach(a=>{const s=cye(a);if(ebe.test(s.schemeIdUri)){const o=BU(s,n);let c=s.eventDuration===4294967295?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;c<=.001&&(c=Number.POSITIVE_INFINITY);const u=s.payload;r.samples.push({data:u,len:u.byteLength,dts:o,pts:o,type:ur.emsg,duration:c})}else if(this.config.enableEmsgKLVMetadata&&s.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=BU(s,n);r.samples.push({data:s.payload,len:s.payload.byteLength,dts:o,pts:o,type:ur.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function BU(t,e){return be(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class nbe{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new e_(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Za.cbc)}decryptAacSample(e,n,r){const i=e[n].unit;if(i.length<=16)return;const a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then(o=>{const c=new Uint8Array(o);i.set(c,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)})}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)r.set(e.subarray(a,a+16),i);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)e.set(r.subarray(i,i+16),a);return e}decryptAvcSample(e,n,r,i,a){const s=F8(a.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then(c=>{a.data=this.getAvcDecryptedUnit(s,c),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,i)})}decryptAvcSamples(e,n,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){i();return}const a=e[n].units;for(;!(r>=a.length);r++){const s=a[r];if(!(s.data.length<=48||s.type!==1&&s.type!==5)&&(this.decryptAvcSample(e,n,r,i,s),!this.decrypter.isSync()))return}}}}class AG{constructor(){this.VideoSample=null}createVideoSample(e,n,r){return{key:e,frame:!1,pts:n,dts:r,units:[],length:0}}getLastNalUnit(e){var n;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const a=r.units;i=a[a.length-1]}return i}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const r=n.samples,i=r.length;if(i){const a=r[i-1];e.pts=a.pts,e.dts=a.dts}else{n.dropped++;return}}n.samples.push(e)}}parseNALu(e,n,r){const i=n.byteLength;let a=e.naluState||0;const s=a,o=[];let c=0,u,d,h,p=-1,y=0;for(a===-1&&(p=0,y=this.getNALuType(n,0),a=0,c=1);c<i;){if(u=n[c++],!a){a=u?0:1;continue}if(a===1){a=u?0:2;continue}if(!u)a=3;else if(u===1){if(d=c-a-1,p>=0){const v={data:n.subarray(p,d),type:y};o.push(v)}else{const v=this.getLastNalUnit(e.samples);v&&(s&&c<=4-s&&v.state&&(v.data=v.data.subarray(0,v.data.byteLength-s)),d>0&&(v.data=kr(v.data,n.subarray(0,d)),v.state=0))}c<i?(h=this.getNALuType(n,c),p=c,y=h,a=0):a=-1}else a=0}if(p>=0&&a>=0){const v={data:n.subarray(p,i),type:y,state:a};o.push(v)}if(o.length===0){const v=this.getLastNalUnit(e.samples);v&&(v.data=kr(v.data,n))}return e.naluState=a,o}}class jc{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,i=new Uint8Array(4),a=Math.min(4,n);if(a===0)throw new Error("no bytes available");i.set(e.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&Ze.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class FU extends AG{parsePES(e,n,r,i){const a=this.parseNALu(e,r.data,i);let s=this.VideoSample,o,c=!1;r.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),a.forEach(u=>{var d,h;switch(u.type){case 1:{let x=!1;o=!0;const b=u.data;if(c&&b.length>4){const T=this.readSliceType(b);(T===2||T===4||T===7||T===9)&&(x=!0)}if(x){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.frame=!0,s.key=x;break}case 5:o=!0,(d=s)!=null&&d.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 6:{o=!0,Xw(u.data,1,r.pts,n.samples);break}case 7:{var y,v;o=!0,c=!0;const x=u.data,b=this.readSPS(x);if(!e.sps||e.width!==b.width||e.height!==b.height||((y=e.pixelRatio)==null?void 0:y[0])!==b.pixelRatio[0]||((v=e.pixelRatio)==null?void 0:v[1])!==b.pixelRatio[1]){e.width=b.width,e.height=b.height,e.pixelRatio=b.pixelRatio,e.sps=[x];const T=x.subarray(1,4);let _="avc1.";for(let w=0;w<3;w++){let O=T[w].toString(16);O.length<2&&(O="0"+O),_+=O}e.codec=_}break}case 8:o=!0,e.pps=[u.data];break;case 9:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:o=!0;break;default:o=!1;break}s&&o&&s.units.push(u)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}getNALuType(e,n){return e[n]&31}readSliceType(e){const n=new jc(e);return n.readUByte(),n.readUEG(),n.readUEG()}skipScalingList(e,n){let r=8,i=8,a;for(let s=0;s<e;s++)i!==0&&(a=n.readEG(),i=(r+a+256)%256),r=i===0?r:i}readSPS(e){const n=new jc(e);let r=0,i=0,a=0,s=0,o,c,u;const d=n.readUByte.bind(n),h=n.readBits.bind(n),p=n.readUEG.bind(n),y=n.readBoolean.bind(n),v=n.skipBits.bind(n),x=n.skipEG.bind(n),b=n.skipUEG.bind(n),T=this.skipScalingList.bind(this);d();const _=d();if(h(5),v(3),d(),b(),_===100||_===110||_===122||_===244||_===44||_===83||_===86||_===118||_===128){const P=p();if(P===3&&v(1),b(),b(),v(1),y())for(c=P!==3?8:12,u=0;u<c;u++)y()&&(u<6?T(16,n):T(64,n))}b();const w=p();if(w===0)p();else if(w===1)for(v(1),x(),x(),o=p(),u=0;u<o;u++)x();b(),v(1);const O=p(),R=p(),C=h(1);C===0&&v(1),v(1),y()&&(r=p(),i=p(),a=p(),s=p());let L=[1,1];if(y()&&y())switch(d()){case 1:L=[1,1];break;case 2:L=[12,11];break;case 3:L=[10,11];break;case 4:L=[16,11];break;case 5:L=[40,33];break;case 6:L=[24,11];break;case 7:L=[20,11];break;case 8:L=[32,11];break;case 9:L=[80,33];break;case 10:L=[18,11];break;case 11:L=[15,11];break;case 12:L=[64,33];break;case 13:L=[160,99];break;case 14:L=[4,3];break;case 15:L=[3,2];break;case 16:L=[2,1];break;case 255:{L=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil((O+1)*16-r*2-i*2),height:(2-C)*(R+1)*16-(C?2:4)*(a+s),pixelRatio:L}}}class $U extends AG{constructor(...e){super(...e),this.initVPS=null}parsePES(e,n,r,i){const a=this.parseNALu(e,r.data,i);let s=this.VideoSample,o,c=!1;r.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),a.forEach(u=>{var d,h;switch(u.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),s.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,c){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 19:case 20:o=!0,(d=s)!=null&&d.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 39:o=!0,Xw(u.data,2,r.pts,n.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=ut(e.params,this.readVPS(u.data)),this.initVPS=u.data),e.vps=[u.data];break;case 33:if(o=!0,c=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],u.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const y=this.readSPS(u.data);e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.codec=y.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const v in y.params)e.params[v]=y.params[v]}this.pushParameterSet(e.sps,u.data,e.vps),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const y=this.readPPS(u.data);for(const v in y)e.params[v]=y[v]}this.pushParameterSet(e.pps,u.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:o=!1;break}s&&o&&s.units.push(u)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}pushParameterSet(e,n,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(n)}getNALuType(e,n){return(e[n]&126)>>>1}ebsp2rbsp(e){const n=new Uint8Array(e.byteLength);let r=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(n[r]=e[i],r++);return new Uint8Array(n.buffer,0,r)}pushAccessUnit(e,n){super.pushAccessUnit(e,n),this.initVPS&&(this.initVPS=null)}readVPS(e){const n=new jc(e);n.readUByte(),n.readUByte(),n.readBits(4),n.skipBits(2),n.readBits(6);const r=n.readBits(3),i=n.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:i}}readSPS(e){const n=new jc(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.readBits(4);const r=n.readBits(3);n.readBoolean();const i=n.readBits(2),a=n.readBoolean(),s=n.readBits(5),o=n.readUByte(),c=n.readUByte(),u=n.readUByte(),d=n.readUByte(),h=n.readUByte(),p=n.readUByte(),y=n.readUByte(),v=n.readUByte(),x=n.readUByte(),b=n.readUByte(),T=n.readUByte(),_=[],w=[];for(let _e=0;_e<r;_e++)_.push(n.readBoolean()),w.push(n.readBoolean());if(r>0)for(let _e=r;_e<8;_e++)n.readBits(2);for(let _e=0;_e<r;_e++)_[_e]&&(n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte()),w[_e]&&n.readUByte();n.readUEG();const O=n.readUEG();O==3&&n.skipBits(1);const R=n.readUEG(),C=n.readUEG(),L=n.readBoolean();let P=0,N=0,k=0,M=0;L&&(P+=n.readUEG(),N+=n.readUEG(),k+=n.readUEG(),M+=n.readUEG());const $=n.readUEG(),K=n.readUEG(),W=n.readUEG(),Y=n.readBoolean();for(let _e=Y?0:r;_e<=r;_e++)n.skipUEG(),n.skipUEG(),n.skipUEG();if(n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.readBoolean()&&n.readBoolean())for(let je=0;je<4;je++)for(let Rt=0;Rt<(je===3?2:6);Rt++)if(!n.readBoolean())n.readUEG();else{const Wt=Math.min(64,1<<4+(je<<1));je>1&&n.readEG();for(let Xt=0;Xt<Wt;Xt++)n.readEG()}n.readBoolean(),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.skipUEG(),n.skipUEG(),n.readBoolean());const q=n.readUEG();let Z=0;for(let _e=0;_e<q;_e++){let je=!1;if(_e!==0&&(je=n.readBoolean()),je){_e===q&&n.readUEG(),n.readBoolean(),n.readUEG();let Rt=0;for(let yn=0;yn<=Z;yn++){const Wt=n.readBoolean();let Xt=!1;Wt||(Xt=n.readBoolean()),(Wt||Xt)&&Rt++}Z=Rt}else{const Rt=n.readUEG(),yn=n.readUEG();Z=Rt+yn;for(let Wt=0;Wt<Rt;Wt++)n.readUEG(),n.readBoolean();for(let Wt=0;Wt<yn;Wt++)n.readUEG(),n.readBoolean()}}if(n.readBoolean()){const _e=n.readUEG();for(let je=0;je<_e;je++){for(let Rt=0;Rt<W+4;Rt++)n.readBits(1);n.readBits(1)}}let V=0,H=1,te=1,ce=!0,ye=1,ge=0;n.readBoolean(),n.readBoolean();let Me=!1;if(n.readBoolean()){if(n.readBoolean()){const vn=n.readUByte(),Ri=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Oi=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];vn>0&&vn<16?(H=Ri[vn-1],te=Oi[vn-1]):vn===255&&(H=n.readBits(16),te=n.readBits(16))}if(n.readBoolean()&&n.readBoolean(),n.readBoolean()&&(n.readBits(3),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.readUByte(),n.readUByte())),n.readBoolean()&&(n.readUEG(),n.readUEG()),n.readBoolean(),n.readBoolean(),n.readBoolean(),Me=n.readBoolean(),Me&&(P+=n.readUEG(),N+=n.readUEG(),k+=n.readUEG(),M+=n.readUEG()),n.readBoolean()&&(ye=n.readBits(32),ge=n.readBits(32),n.readBoolean()&&n.readUEG(),n.readBoolean())){const Oi=n.readBoolean(),ss=n.readBoolean();let Br=!1;(Oi||ss)&&(Br=n.readBoolean(),Br&&(n.readUByte(),n.readBits(5),n.readBoolean(),n.readBits(5)),n.readBits(4),n.readBits(4),Br&&n.readBits(4),n.readBits(5),n.readBits(5),n.readBits(5));for(let _n=0;_n<=r;_n++){ce=n.readBoolean();const ii=ce||n.readBoolean();let Rn=!1;ii?n.readEG():Rn=n.readBoolean();const sd=Rn?1:n.readUEG()+1;if(Oi)for(let os=0;os<sd;os++)n.readUEG(),n.readUEG(),Br&&(n.readUEG(),n.readUEG()),n.skipBits(1);if(ss)for(let os=0;os<sd;os++)n.readUEG(),n.readUEG(),Br&&(n.readUEG(),n.readUEG()),n.skipBits(1)}}n.readBoolean()&&(n.readBoolean(),n.readBoolean(),n.readBoolean(),V=n.readUEG())}let pe=R,Ae=C;if(L||Me){let _e=1,je=1;O===1?_e=je=2:O==2&&(_e=2),pe=R-_e*N-_e*P,Ae=C-je*M-je*k}const Oe=i?["A","B","C"][i]:"",me=o<<24|c<<16|u<<8|d;let rt=0;for(let _e=0;_e<32;_e++)rt=(rt|(me>>_e&1)<<31-_e)>>>0;let Be=rt.toString(16);return s===1&&Be==="2"&&(Be="6"),{codecString:`hvc1.${Oe}${s}.${Be}.${a?"H":"L"}${T}.B0`,params:{general_tier_flag:a,general_profile_idc:s,general_profile_space:i,general_profile_compatibility_flags:[o,c,u,d],general_constraint_indicator_flags:[h,p,y,v,x,b],general_level_idc:T,bit_depth:$+8,bit_depth_luma_minus8:$,bit_depth_chroma_minus8:K,min_spatial_segmentation_idc:V,chroma_format_idc:O,frame_rate:{fixed:ce,fps:ge/ye}},width:pe,height:Ae,pixelRatio:[H,te]}}readPPS(e){const n=new jc(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.skipUEG(),n.skipUEG(),n.skipBits(2),n.skipBits(3),n.skipBits(2),n.skipUEG(),n.skipUEG(),n.skipEG(),n.skipBits(2),n.readBoolean()&&n.skipUEG(),n.skipEG(),n.skipEG(),n.skipBits(4);const i=n.readBoolean(),a=n.readBoolean();let s=1;return a&&i?s=0:a?s=3:i&&(s=2),{parallelismType:s}}matchSPS(e,n){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,n).substr(3)}}const fn=188;class Va{constructor(e,n,r,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.logger=i,this.videoParser=null}static probe(e,n){const r=Va.syncOffset(e);return r>0&&n.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const n=e.length;let r=Math.min(fn*5,n-fn)+1,i=0;for(;i<r;){let a=!1,s=-1,o=0;for(let c=i;c<n;c+=fn)if(e[c]===71&&(n-c===fn||e[c+fn]===71)){if(o++,s===-1&&(s=c,s!==0&&(r=Math.min(s+fn*99,e.length-fn)+1)),a||(a=qA(e,c)===0),a&&o>1&&(s===0&&o>2||c+fn>r))return s}else{if(o)return-1;break}i++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:k8[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Va.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=Va.createTrack("audio",i),this._id3Track=Va.createTrack("id3"),this._txtTrack=Va.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,r=!1,i=!1){r||(this.sampleAes=null);let a;const s=this._videoTrack,o=this._audioTrack,c=this._id3Track,u=this._txtTrack;let d=s.pid,h=s.pesData,p=o.pid,y=c.pid,v=o.pesData,x=c.pesData,b=null,T=this.pmtParsed,_=this._pmtId,w=e.length;if(this.remainderData&&(e=kr(this.remainderData,e),w=e.length,this.remainderData=null),w<fn&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:s,id3Track:c,textTrack:u};const O=Math.max(0,Va.syncOffset(e));w-=(w-O)%fn,w<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,w,e.buffer.byteLength-w));let R=0;for(let L=O;L<w;L+=fn)if(e[L]===71){const P=!!(e[L+1]&64),N=qA(e,L),k=(e[L+3]&48)>>4;let M;if(k>1){if(M=L+5+e[L+4],M===L+fn)continue}else M=L+4;switch(N){case d:if(P){if(h&&(a=Zo(h,this.logger))){if(this.videoParser===null)switch(s.segmentCodec){case"avc":this.videoParser=new FU;break;case"hevc":this.videoParser=new $U;break}this.videoParser!==null&&this.videoParser.parsePES(s,u,a,!1)}h={data:[],size:0}}h&&(h.data.push(e.subarray(M,L+fn)),h.size+=L+fn-M);break;case p:if(P){if(v&&(a=Zo(v,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a);break;case"ac3":this.parseAC3PES(o,a);break}v={data:[],size:0}}v&&(v.data.push(e.subarray(M,L+fn)),v.size+=L+fn-M);break;case y:P&&(x&&(a=Zo(x,this.logger))&&this.parseID3PES(c,a),x={data:[],size:0}),x&&(x.data.push(e.subarray(M,L+fn)),x.size+=L+fn-M);break;case 0:P&&(M+=e[M]+1),_=this._pmtId=rbe(e,M);break;case _:{P&&(M+=e[M]+1);const $=ibe(e,M,this.typeSupported,r,this.observer,this.logger);d=$.videoPid,d>0&&(s.pid=d,s.segmentCodec=$.segmentVideoCodec),p=$.audioPid,p>0&&(o.pid=p,o.segmentCodec=$.segmentAudioCodec),y=$.id3Pid,y>0&&(c.pid=y),b!==null&&!T&&(this.logger.warn(`MPEG-TS PMT found at ${L} after unknown PID '${b}'. Backtracking to sync byte @${O} to parse all TS packets.`),b=null,L=O-188),T=this.pmtParsed=!0;break}case 17:case 8191:break;default:b=N;break}}else R++;R>0&&HA(this.observer,new Error(`Found ${R} TS packet/s that do not start with 0x47`),void 0,this.logger),s.pesData=h,o.pesData=v,c.pesData=x;const C={audioTrack:o,videoTrack:s,id3Track:c,textTrack:u};return i&&this.extractRemainingSamples(C),C}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:i,textTrack:a}=e,s=r.pesData,o=n.pesData,c=i.pesData;let u;if(s&&(u=Zo(s,this.logger))){if(this.videoParser===null)switch(r.segmentCodec){case"avc":this.videoParser=new FU;break;case"hevc":this.videoParser=new $U;break}this.videoParser!==null&&(this.videoParser.parsePES(r,a,u,!0),r.pesData=null)}else r.pesData=s;if(o&&(u=Zo(o,this.logger))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,u);break;case"mp3":this.parseMPEGPES(n,u);break;case"ac3":this.parseAC3PES(n,u);break}n.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o;c&&(u=Zo(c,this.logger))?(this.parseID3PES(i,u),i.pesData=null):i.pesData=c}demuxSampleAes(e,n,r){const i=this.demux(e,r,!0,!this.config.progressive),a=this.sampleAes=new nbe(this.observer,this.config,n);return this.decrypt(i,a)}decrypt(e,n){return new Promise(r=>{const{audioTrack:i,videoTrack:a}=e;i.samples&&i.segmentCodec==="aac"?n.decryptAacSamples(i.samples,0,()=>{a.samples?n.decryptAvcSamples(a.samples,0,0,()=>{r(e)}):r(e)}):a.samples&&n.decryptAvcSamples(a.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,n){let r=0;const i=this.aacOverFlow;let a=n.data;if(i){this.aacOverFlow=null;const h=i.missing,p=i.sample.unit.byteLength;if(h===-1)a=kr(i.sample.unit,a);else{const y=p-h;i.sample.unit.set(a.subarray(0,h),y),e.samples.push(i.sample),r=i.missing}}let s,o;for(s=r,o=a.length;s<o-1&&!jp(a,s);s++);if(s!==r){let h;const p=s<o-1;if(p?h=`AAC PES did not start with ADTS header,offset:${s}`:h="No ADTS header found in AAC PES",HA(this.observer,new Error(h),p,this.logger),!p)return}hG(e,this.observer,a,s,this.audioCodec);let c;if(n.pts!==void 0)c=n.pts;else if(i){const h=mG(e.samplerate);c=i.sample.pts+h}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,d;for(;s<o;)if(d=pG(e,a,s,c,u),s+=d.length,d.missing){this.aacOverFlow=d;break}else for(u++;s<o-1&&!jp(a,s);s++);}parseMPEGPES(e,n){const r=n.data,i=r.length;let a=0,s=0;const o=n.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;s<i;)if(xG(r,s)){const c=vG(e,r,s,o,a);if(c)s+=c.length,a++;else break}else s++}parseAC3PES(e,n){{const r=n.data,i=n.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const a=r.length;let s=0,o=0,c;for(;o<a&&(c=TG(e,r,o,i,s++))>0;)o+=c}}parseID3PES(e,n){if(n.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=ut({},n,{type:this._videoTrack?ur.emsg:ur.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function qA(t,e){return((t[e+1]&31)<<8)+t[e+2]}function rbe(t,e){return(t[e+10]&31)<<8|t[e+11]}function ibe(t,e,n,r,i,a){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(t[e+1]&15)<<8|t[e+2],c=e+3+o-4,u=(t[e+10]&15)<<8|t[e+11];for(e+=12+u;e<c;){const d=qA(t,e),h=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!r){CE("ADTS AAC",a);break}case 15:s.audioPid===-1&&(s.audioPid=d);break;case 21:s.id3Pid===-1&&(s.id3Pid=d);break;case 219:if(!r){CE("H.264",a);break}case 27:s.videoPid===-1&&(s.videoPid=d);break;case 3:case 4:!n.mpeg&&!n.mp3?a.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=d,s.segmentAudioCodec="mp3");break;case 193:if(!r){CE("AC-3",a);break}case 129:n.ac3?s.audioPid===-1&&(s.audioPid=d,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&h>0){let p=e+5,y=h;for(;y>2;){switch(t[p]){case 106:n.ac3!==!0?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=d,s.segmentAudioCodec="ac3");break}const x=t[p+1]+2;p+=x,y-=x}}break;case 194:case 135:return HA(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:s.videoPid===-1&&(s.videoPid=d,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));break}e+=h+5}return s}function HA(t,e,n,r){r.warn(`parsing error: ${e.message}`),t.emit(D.ERROR,D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function CE(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function Zo(t,e){let n=0,r,i,a,s,o;const c=t.data;if(!t||t.size===0)return null;for(;c[0].length<19&&c.length>1;)c[0]=kr(c[0],c[1]),c.splice(1,1);if(r=c[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(i=(r[4]<<8)+r[5],i&&i>t.size-6)return null;const d=r[7];d&192&&(s=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,d&64?(o=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,s-o>60*9e4&&(e.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),a=r[8];let h=a+9;if(t.size<=h)return null;t.size-=h;const p=new Uint8Array(t.size);for(let y=0,v=c.length;y<v;y++){r=c[y];let x=r.byteLength;if(h)if(h>x){h-=x;continue}else r=r.subarray(h),x-=h,h=0;p.set(r,n),n+=x}return i&&(i-=a+3),{data:p,pts:s,dts:o,len:i}}return null}class abe{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ua=Math.pow(2,32)-1;class ee{static init(){ee.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ee.types)ee.types.hasOwnProperty(e)&&(ee.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ee.HDLR_TYPES={video:n,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);ee.STTS=ee.STSC=ee.STCO=a,ee.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ee.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ee.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ee.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);ee.FTYP=ee.box(ee.types.ftyp,s,c,s,o),ee.DINF=ee.box(ee.types.dinf,ee.box(ee.types.dref,i))}static box(e,...n){let r=8,i=n.length;const a=i;for(;i--;)r+=n[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=r&255,s.set(e,4),i=0,r=8;i<a;i++)s.set(n[i],r),r+=n[i].byteLength;return s}static hdlr(e){return ee.box(ee.types.hdlr,ee.HDLR_TYPES[e])}static mdat(e){return ee.box(ee.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(Ua+1)),i=Math.floor(n%(Ua+1));return ee.box(ee.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return ee.box(ee.types.mdia,ee.mdhd(e.timescale||0,e.duration||0),ee.hdlr(e.type),ee.minf(e))}static mfhd(e){return ee.box(ee.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ee.box(ee.types.minf,ee.box(ee.types.smhd,ee.SMHD),ee.DINF,ee.stbl(e)):ee.box(ee.types.minf,ee.box(ee.types.vmhd,ee.VMHD),ee.DINF,ee.stbl(e))}static moof(e,n,r){return ee.box(ee.types.moof,ee.mfhd(e),ee.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=ee.trak(e[n]);return ee.box.apply(null,[ee.types.moov,ee.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(ee.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=ee.trex(e[n]);return ee.box.apply(null,[ee.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(Ua+1)),i=Math.floor(n%(Ua+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ee.box(ee.types.mvhd,a)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let i,a;for(i=0;i<n.length;i++)a=n[i].flags,r[i+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return ee.box(ee.types.sdtp,r)}static stbl(e){return ee.box(ee.types.stbl,ee.stsd(e),ee.box(ee.types.stts,ee.STTS),ee.box(ee.types.stsc,ee.STSC),ee.box(ee.types.stsz,ee.STSZ),ee.box(ee.types.stco,ee.STCO))}static avc1(e){let n=[],r=[],i,a,s;for(i=0;i<e.sps.length;i++)a=e.sps[i],s=a.byteLength,n.push(s>>>8&255),n.push(s&255),n=n.concat(Array.prototype.slice.call(a));for(i=0;i<e.pps.length;i++)a=e.pps[i],s=a.byteLength,r.push(s>>>8&255),r.push(s&255),r=r.concat(Array.prototype.slice.call(a));const o=ee.box(ee.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),c=e.width,u=e.height,d=e.pixelRatio[0],h=e.pixelRatio[1];return ee.box(ee.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,ee.box(ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ee.box(ee.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,d&255,h>>24,h>>16&255,h>>8&255,h&255])))}static esds(e){const n=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...n,6,1,2])}static audioStsd(e){const n=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return ee.box(ee.types.mp4a,ee.audioStsd(e),ee.box(ee.types.esds,ee.esds(e)))}static mp3(e){return ee.box(ee.types[".mp3"],ee.audioStsd(e))}static ac3(e){return ee.box(ee.types["ac-3"],ee.audioStsd(e),ee.box(ee.types.dac3,e.config))}static stsd(e){const{segmentCodec:n}=e;if(e.type==="audio"){if(n==="aac")return ee.box(ee.types.stsd,ee.STSD,ee.mp4a(e));if(n==="ac3"&&e.config)return ee.box(ee.types.stsd,ee.STSD,ee.ac3(e));if(n==="mp3"&&e.codec==="mp3")return ee.box(ee.types.stsd,ee.STSD,ee.mp3(e))}else if(e.pps&&e.sps){if(n==="avc")return ee.box(ee.types.stsd,ee.STSD,ee.avc1(e));if(n==="hevc"&&e.vps)return ee.box(ee.types.stsd,ee.STSD,ee.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${n}/${e.codec})`)}static tkhd(e){const n=e.id,r=(e.duration||0)*(e.timescale||0),i=e.width||0,a=e.height||0,s=Math.floor(r/(Ua+1)),o=Math.floor(r%(Ua+1));return ee.box(ee.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,a>>8&255,a&255,0,0]))}static traf(e,n){const r=ee.sdtp(e),i=e.id,a=Math.floor(n/(Ua+1)),s=Math.floor(n%(Ua+1));return ee.box(ee.types.traf,ee.box(ee.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),ee.box(ee.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,s>>24,s>>16&255,s>>8&255,s&255])),ee.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,ee.box(ee.types.trak,ee.tkhd(e),ee.mdia(e))}static trex(e){const n=e.id;return ee.box(ee.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],i=r.length,a=12+16*i,s=new Uint8Array(a);let o,c,u,d,h,p;for(n+=8+a,s.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),o=0;o<i;o++)c=r[o],u=c.duration,d=c.size,h=c.flags,p=c.cts,s.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&61440,h.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*o);return ee.box(ee.types.trun,s)}static initSegment(e){ee.types||ee.init();const n=ee.moov(e);return kr(ee.FTYP,n)}static hvc1(e){const n=e.params,r=[e.vps,e.sps,e.pps],i=4,a=new Uint8Array([1,n.general_profile_space<<6|(n.general_tier_flag?32:0)|n.general_profile_idc,n.general_profile_compatibility_flags[0],n.general_profile_compatibility_flags[1],n.general_profile_compatibility_flags[2],n.general_profile_compatibility_flags[3],n.general_constraint_indicator_flags[0],n.general_constraint_indicator_flags[1],n.general_constraint_indicator_flags[2],n.general_constraint_indicator_flags[3],n.general_constraint_indicator_flags[4],n.general_constraint_indicator_flags[5],n.general_level_idc,240|n.min_spatial_segmentation_idc>>8,255&n.min_spatial_segmentation_idc,252|n.parallelismType,252|n.chroma_format_idc,248|n.bit_depth_luma_minus8,248|n.bit_depth_chroma_minus8,0,parseInt(n.frame_rate.fps),i-1|n.temporal_id_nested<<2|n.num_temporal_layers<<3|(n.frame_rate.fixed?64:0),r.length]);let s=a.length;for(let v=0;v<r.length;v+=1){s+=3;for(let x=0;x<r[v].length;x+=1)s+=2+r[v][x].length}const o=new Uint8Array(s);o.set(a,0),s=a.length;const c=r.length-1;for(let v=0;v<r.length;v+=1){o.set(new Uint8Array([32+v|(v===c?128:0),0,r[v].length]),s),s+=3;for(let x=0;x<r[v].length;x+=1)o.set(new Uint8Array([r[v][x].length>>8,r[v][x].length&255]),s),s+=2,o.set(r[v][x],s),s+=r[v][x].length}const u=ee.box(ee.types.hvcC,o),d=e.width,h=e.height,p=e.pixelRatio[0],y=e.pixelRatio[1];return ee.box(ee.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,ee.box(ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ee.box(ee.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,y>>24,y>>16&255,y>>8&255,y&255])))}}ee.types=void 0;ee.HDLR_TYPES=void 0;ee.STTS=void 0;ee.STSC=void 0;ee.STCO=void 0;ee.STSZ=void 0;ee.VMHD=void 0;ee.SMHD=void 0;ee.STSD=void 0;ee.FTYP=void 0;ee.DINF=void 0;const wG=9e4;function c_(t,e,n=1,r=!1){const i=t*e*n;return r?Math.round(i):i}function sbe(t,e,n=1,r=!1){return c_(t,e,1/n,r)}function bc(t,e=!1){return c_(t,1e3,1/wG,e)}function obe(t,e=1){return c_(t,wG,1/e)}const lbe=10*1e3,ube=1024,cbe=1152,fbe=1536;let Jo=null,LE=null;function GU(t,e,n,r){return{duration:e,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class mm extends ri{constructor(e,n,r,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.ISGenerated=!1,Jo===null){const s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Jo=s?parseInt(s[1]):0}if(LE===null){const a=navigator.userAgent.match(/Safari\/(\d+)/i);LE=a?parseInt(a[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const r=e[0].pts,i=e.reduce((a,s)=>{let o=s.pts,c=o-a;return c<-4294967296&&(n=!0,o=Or(o,r),c=o-a),c>0?a:o},r);return n&&this.debug("PTS rollover detected"),i}remux(e,n,r,i,a,s,o,c){let u,d,h,p,y,v,x=a,b=a;const T=e.pid>-1,_=n.pid>-1,w=n.samples.length,O=e.samples.length>0,R=o&&w>0||w>1;if((!T||O)&&(!_||R)||this.ISGenerated||o){if(this.ISGenerated){var L,P,N,k;const W=this.videoTrackConfig;(W&&(n.width!==W.width||n.height!==W.height||((L=n.pixelRatio)==null?void 0:L[0])!==((P=W.pixelRatio)==null?void 0:P[0])||((N=n.pixelRatio)==null?void 0:N[1])!==((k=W.pixelRatio)==null?void 0:k[1]))||!W&&R||this.nextAudioTs===null&&O)&&this.resetInitSegment()}this.ISGenerated||(h=this.generateIS(e,n,a,s));const M=this.isVideoContiguous;let $=-1,K;if(R&&($=dbe(n.samples),!M&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,$>0){this.warn(`Dropped ${$} out of ${w} video samples due to a missing keyframe`);const W=this.getVideoStartPts(n.samples);n.samples=n.samples.slice($),n.dropped+=$,b+=(n.samples[0].pts-W)/n.inputTimeScale,K=b}else $===-1&&(this.warn(`No keyframe found out of ${w} video samples`),v=!1);if(this.ISGenerated){if(O&&R){const W=this.getVideoStartPts(n.samples),j=(Or(e.samples[0].pts,W)-W)/n.inputTimeScale;x+=Math.max(0,j),b+=Math.max(0,-j)}if(O){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),h=this.generateIS(e,n,a,s)),d=this.remuxAudio(e,x,this.isAudioContiguous,s,_||R||c===Se.AUDIO?b:void 0),R){const W=d?d.endPTS-d.startPTS:0;n.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),h=this.generateIS(e,n,a,s)),u=this.remuxVideo(n,b,M,W)}}else R&&(u=this.remuxVideo(n,b,M,0));u&&(u.firstKeyFrame=$,u.independent=$!==-1,u.firstKeyFramePTS=K)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(y=_G(r,a,this._initPTS,this._initDTS)),i.samples.length&&(p=RG(i,a,this._initPTS))),{audio:d,video:u,initSegment:h,independent:v,text:p,id3:y}}generateIS(e,n,r,i){const a=e.samples,s=n.samples,o=this.typeSupported,c={},u=this._initPTS;let d=!u||i,h="audio/mp4",p,y,v,x;if(d&&(p=y=1/0),e.config&&a.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(h="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}c.audio={id:"audio",container:h,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):ee.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(x=e.id,v=e.inputTimeScale,!u||v!==u.timescale?p=y=a[0].pts-Math.round(v*r):d=!1)}if(n.sps&&n.pps&&s.length){if(n.timescale=n.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:ee.initSegment([n]),metadata:{width:n.width,height:n.height}},d)if(x=n.id,v=n.inputTimeScale,!u||v!==u.timescale){const b=this.getVideoStartPts(s),T=Math.round(v*r);y=Math.min(y,Or(s[0].dts,b)-T),p=Math.min(p,b-T)}else d=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(c).length)return this.ISGenerated=!0,d?(this._initPTS={baseTime:p,timescale:v},this._initDTS={baseTime:y,timescale:v}):p=v=void 0,{tracks:c,initPTS:p,timescale:v,trackId:x}}remuxVideo(e,n,r,i){const a=e.inputTimeScale,s=e.samples,o=[],c=s.length,u=this._initPTS,d=u.baseTime*a/u.timescale;let h=this.nextVideoTs,p=8,y=this.videoSampleDuration,v,x,b=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY,_=!1;if(!r||h===null){const V=d+n*a,H=s[0].pts-Or(s[0].dts,s[0].pts);Jo&&h!==null&&Math.abs(V-H-(h+d))<15e3?r=!0:h=V-H-d}const w=h+d;for(let V=0;V<c;V++){const H=s[V];H.pts=Or(H.pts,w),H.dts=Or(H.dts,w),H.dts<s[V>0?V-1:V].dts&&(_=!0)}_&&s.sort(function(V,H){const te=V.dts-H.dts,ce=V.pts-H.pts;return te||ce}),v=s[0].dts,x=s[s.length-1].dts;const O=x-v,R=O?Math.round(O/(c-1)):y||e.inputTimeScale/30;if(r){const V=v-w,H=V>R,te=V<-1;if((H||te)&&(H?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${bc(V,!0)} ms (${V}dts) hole between fragments detected at ${n.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${bc(-V,!0)} ms (${V}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!te||w>=s[0].pts||Jo)){v=w;const ce=s[0].pts-V;if(H)s[0].dts=v,s[0].pts=ce;else{let ye=!0;for(let ge=0;ge<s.length&&!(s[ge].dts>ce&&ye);ge++){const Me=s[ge].pts;if(s[ge].dts-=V,s[ge].pts-=V,ge<s.length-1){const Re=s[ge+1].pts,pe=s[ge].pts,Ae=Re<=pe,Oe=Re<=Me;ye=Ae==Oe}}}this.log(`Video: Initial PTS/DTS adjusted: ${bc(ce,!0)}/${bc(v,!0)}, delta: ${bc(V,!0)} ms`)}}v=Math.max(0,v);let C=0,L=0,P=v;for(let V=0;V<c;V++){const H=s[V],te=H.units,ce=te.length;let ye=0;for(let ge=0;ge<ce;ge++)ye+=te[ge].data.length;L+=ye,C+=ce,H.length=ye,H.dts<P?(H.dts=P,P+=R/4|0||1):P=H.dts,b=Math.min(H.pts,b),T=Math.max(H.pts,T)}x=s[c-1].dts;const N=L+4*C+8;let k;try{k=new Uint8Array(N)}catch(V){this.observer.emit(D.ERROR,D.ERROR,{type:Te.MUX_ERROR,details:re.REMUX_ALLOC_ERROR,fatal:!1,error:V,bytes:N,reason:`fail allocating video mdat ${N}`});return}const M=new DataView(k.buffer);M.setUint32(0,N),k.set(ee.types.mdat,4);let $=!1,K=Number.POSITIVE_INFINITY,W=Number.POSITIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,j=Number.NEGATIVE_INFINITY;for(let V=0;V<c;V++){const H=s[V],te=H.units;let ce=0;for(let Me=0,Re=te.length;Me<Re;Me++){const pe=te[Me],Ae=pe.data,Oe=pe.data.byteLength;M.setUint32(p,Oe),p+=4,k.set(Ae,p),p+=Oe,ce+=4+Oe}let ye;if(V<c-1)y=s[V+1].dts-H.dts,ye=s[V+1].pts-H.pts;else{const Me=this.config,Re=V>0?H.dts-s[V-1].dts:R;if(ye=V>0?H.pts-s[V-1].pts:R,Me.stretchShortVideoTrack&&this.nextAudioTs!==null){const pe=Math.floor(Me.maxBufferHole*a),Ae=(i?b+i*a:this.nextAudioTs+d)-H.pts;Ae>pe?(y=Ae-Re,y<0?y=Re:$=!0,this.log(`It is approximately ${Ae/90} ms to the next segment; using duration ${y/90} ms for the last video frame.`)):y=Re}else y=Re}const ge=Math.round(H.pts-H.dts);K=Math.min(K,y),Y=Math.max(Y,y),W=Math.min(W,ye),j=Math.max(j,ye),o.push(GU(H.key,y,ce,ge))}if(o.length){if(Jo){if(Jo<70){const V=o[0].flags;V.dependsOn=2,V.isNonSync=0}}else if(LE&&j-W<Y-K&&R/Y<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let V=v;for(let H=0,te=o.length;H<te;H++){const ce=V+o[H].duration,ye=V+o[H].cts;if(H<te-1){const ge=ce+o[H+1].cts;o[H].duration=ge-ye}else o[H].duration=H?o[H-1].duration:R;o[H].cts=0,V=ce}}}y=$||!y?R:y;const G=x+y;this.nextVideoTs=h=G-d,this.videoSampleDuration=y,this.isVideoContiguous=!0;const B={data1:ee.moof(e.sequenceNumber++,v,ut(e,{samples:o})),data2:k,startPTS:(b-d)/a,endPTS:(T+y-d)/a,startDTS:(v-d)/a,endDTS:h/a,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,B}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return cbe;case"ac3":return fbe;default:return ube}}remuxAudio(e,n,r,i,a){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,c=s/o,u=this.getSamplesPerFrame(e),d=u*c,h=this._initPTS,p=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,y=[],v=a!==void 0;let x=e.samples,b=p?0:8,T=this.nextAudioTs||-1;const _=h.baseTime*s/h.timescale,w=_+n*s;if(this.isAudioContiguous=r=r||x.length&&T>0&&(i&&Math.abs(w-(T+_))<9e3||Math.abs(Or(x[0].pts,w)-(T+_))<20*d),x.forEach(function(j){j.pts=Or(j.pts,w)}),!r||T<0){if(x=x.filter(j=>j.pts>=0),!x.length)return;a===0?T=0:i&&!v?T=Math.max(0,w-_):T=x[0].pts-_}if(e.segmentCodec==="aac"){const j=this.config.maxAudioFramesDrift;for(let G=0,q=T+_;G<x.length;G++){const Z=x[G],B=Z.pts,V=B-q,H=Math.abs(1e3*V/s);if(V<=-j*d&&v)G===0&&(this.warn(`Audio frame @ ${(B/s).toFixed(3)}s overlaps marker by ${Math.round(1e3*V/s)} ms.`),this.nextAudioTs=T=B-_,q=B);else if(V>=j*d&&H<lbe&&v){let te=Math.round(V/d);for(q=B-te*d;q<0&&te&&d;)te--,q+=d;G===0&&(this.nextAudioTs=T=q-_),this.warn(`Injecting ${te} audio frames @ ${((q-_)/s).toFixed(3)}s due to ${Math.round(1e3*V/s)} ms gap.`);for(let ce=0;ce<te;ce++){let ye=abe.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);ye||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ye=Z.unit.subarray()),x.splice(G,0,{unit:ye,pts:q}),q+=d,G++}}Z.pts=q,q+=d}}let O=null,R=null,C,L=0,P=x.length;for(;P--;)L+=x[P].unit.byteLength;for(let j=0,G=x.length;j<G;j++){const q=x[j],Z=q.unit;let B=q.pts;if(R!==null){const H=y[j-1];H.duration=Math.round((B-R)/c)}else if(r&&e.segmentCodec==="aac"&&(B=T+_),O=B,L>0){L+=b;try{C=new Uint8Array(L)}catch(H){this.observer.emit(D.ERROR,D.ERROR,{type:Te.MUX_ERROR,details:re.REMUX_ALLOC_ERROR,fatal:!1,error:H,bytes:L,reason:`fail allocating audio mdat ${L}`});return}p||(new DataView(C.buffer).setUint32(0,L),C.set(ee.types.mdat,4))}else return;C.set(Z,b);const V=Z.byteLength;b+=V,y.push(GU(!0,u,V,0)),R=B}const N=y.length;if(!N)return;const k=y[y.length-1];T=R-_,this.nextAudioTs=T+c*k.duration;const M=p?new Uint8Array(0):ee.moof(e.sequenceNumber++,O/c,ut({},e,{samples:y}));e.samples=[];const $=(O-_)/s,K=T/s,Y={data1:M,data2:C,startPTS:$,endPTS:K,startDTS:$,endDTS:K,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.isAudioContiguous=!0,Y}}function Or(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function dbe(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function _G(t,e,n,r){const i=t.samples.length;if(!i)return;const a=t.inputTimeScale;for(let o=0;o<i;o++){const c=t.samples[o];c.pts=Or(c.pts-n.baseTime*a/n.timescale,e*a)/a,c.dts=Or(c.dts-r.baseTime*a/r.timescale,e*a)/a}const s=t.samples;return t.samples=[],{samples:s}}function RG(t,e,n){const r=t.samples.length;if(!r)return;const i=t.inputTimeScale;for(let s=0;s<r;s++){const o=t.samples[s];o.pts=Or(o.pts-n.baseTime*i/n.timescale,e*i)/i}t.samples.sort((s,o)=>s.pts-o.pts);const a=t.samples;return t.samples=[],{samples:a}}class hbe extends ri{constructor(e,n,r,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const n=this.initPTS;n&&e&&n.baseTime===e.baseTime&&n.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,n,r,i){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(aye(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=B8(e);i.audio&&(n=VU(i.audio,gt.AUDIO,this)),i.video&&(r=VU(i.video,gt.VIDEO,this));const a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:i.video.supplemental,initSegment:e,id:"main"}:i.audio?a.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:i.video?a.video={container:"video/mp4",codec:r,supplemental:i.video.supplemental,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,n,r,i,a,s){var o,c;let{initPTS:u,lastEndTime:d}=this;const h={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};be(d)||(d=this.lastEndTime=a||0);const p=n.samples;if(!(p!=null&&p.length))return h;const y={initPTS:void 0,timescale:void 0,trackId:void 0};let v=this.initData;if((o=v)!=null&&o.length||(this.generateInitSegment(p),v=this.initData),!((c=v)!=null&&c.length))return this.warn("Failed to generate initSegment."),h;this.emitInitSegment&&(y.tracks=this.initTracks,this.emitInitSegment=!1);const x=oye(p,v,this),b=v.audio?x[v.audio.id]:null,T=v.video?x[v.video.id]:null,_=Wh(T,1/0),w=Wh(b,1/0),O=Wh(T,0,!0),R=Wh(b,0,!0);let C,L=a,P=0;if(b&&(!T||!u&&w<_||u&&u.trackId===v.audio.id)?(y.trackId=v.audio.id,C=b,P=R-w):T&&(y.trackId=v.video.id,C=T,P=O-_),C){const j=C.timescale;L=C.start/j,y.initPTS=C.start-a*j,y.timescale=j,u||(this.initPTS=u={baseTime:y.initPTS,timescale:j,trackId:y.trackId})}(s||!u)&&(mbe(u,L,a,P)||y.timescale!==u.timescale)&&(y.initPTS=L-a,y.timescale=1,u&&u.timescale===1&&this.warn(`Adjusting initPTS @${a} from ${u.baseTime/u.timescale} to ${y.initPTS}`),this.initPTS=u={baseTime:y.initPTS,timescale:1});const N=e?L-u.baseTime/u.timescale:d,k=N+P;P>0?this.lastEndTime=k:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const M=!!v.audio,$=!!v.video;let K="";M&&(K+="audio"),$&&(K+="video");const W={data1:p,startPTS:N,startDTS:N,endPTS:k,endDTS:k,type:K,hasAudio:M,hasVideo:$,nb:1,dropped:0};h.audio=M&&!$?W:void 0,h.video=$?W:void 0;const Y=T==null?void 0:T.sampleCount;if(Y){const j=T.keyFrameIndex,G=j!==-1;W.nb=Y,W.dropped=j===0||this.isVideoContiguous?0:G?j:Y,W.independent=G,W.firstKeyFrame=j,G&&T.keyFrameStart&&(W.firstKeyFramePTS=(T.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(h.independent=G),this.isVideoContiguous||(this.isVideoContiguous=G),W.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${j}/${Y} dropped: ${W.dropped} start: ${W.firstKeyFramePTS||"NA"}`)}return h.initSegment=y,h.id3=_G(r,a,u,u),i.samples.length&&(h.text=RG(i,a,u)),h}}function Wh(t,e,n=!1){return(t==null?void 0:t.start)!==void 0?(t.start+(n?t.duration:0))/t.timescale:e}function mbe(t,e,n,r){if(t===null)return!0;const i=Math.max(r,1),a=e-t.baseTime/t.timescale;return Math.abs(a-n)>i}function VU(t,e,n){const r=t==null?void 0:t.codec;return r&&r.length>4?r:e===gt.AUDIO?r==="ec-3"||r==="ac-3"||r==="alac"?r:r==="fLaC"||r==="Opus"?Lp(r,!1):(n.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(n.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}let Yi;try{Yi=self.performance.now.bind(self.performance)}catch{Yi=Date.now}const pm=[{demux:tbe,remux:hbe},{demux:Va,remux:mm},{demux:Qve,remux:mm},{demux:Jve,remux:mm}];pm.splice(2,0,{demux:Zve,remux:mm});class qU{constructor(e,n,r,i,a,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.id=a,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,i){const a=r.transmuxing;a.executeStart=Yi();let s=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:c}=this;i&&(this.currentTransmuxState=i);const{contiguous:u,discontinuity:d,trackSwitch:h,accurateTimeOffset:p,timeOffset:y,initSegmentChange:v}=i||o,{audioCodec:x,videoCodec:b,defaultInitPts:T,duration:_,initSegmentData:w}=c,O=pbe(s,n);if(O&&ml(O.method)){const P=this.getDecrypter(),N=n_(O.method);if(P.isSync()){let k=P.softwareDecrypt(s,O.key.buffer,O.iv.buffer,N);if(r.part>-1){const $=P.flush();k=$&&$.buffer}if(!k)return a.executeEnd=Yi(),DE(r);s=new Uint8Array(k)}else return this.asyncResult=!0,this.decryptionPromise=P.webCryptoDecrypt(s,O.key.buffer,O.iv.buffer,N).then(k=>{const M=this.push(k,null,r);return this.decryptionPromise=null,M}),this.decryptionPromise}const R=this.needsProbing(d,h);if(R){const P=this.configureTransmuxer(s);if(P)return this.logger.warn(`[transmuxer] ${P.message}`),this.observer.emit(D.ERROR,D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,error:P,reason:P.message}),a.executeEnd=Yi(),DE(r)}(d||h||v||R)&&this.resetInitSegment(w,x,b,_,n),(d||v||R)&&this.resetInitialTimestamp(T),u||this.resetContiguity();const C=this.transmux(s,O,y,p,r);this.asyncResult=kf(C);const L=this.currentTransmuxState;return L.contiguous=!0,L.discontinuity=!1,L.trackSwitch=!1,a.executeEnd=Yi(),C}flush(e){const n=e.transmuxing;n.executeStart=Yi();const{decrypter:r,currentTransmuxState:i,decryptionPromise:a}=this;if(a)return this.asyncResult=!0,a.then(()=>this.flush(e));const s=[],{timeOffset:o}=i;if(r){const h=r.flush();h&&s.push(this.push(h.buffer,null,e))}const{demuxer:c,remuxer:u}=this;if(!c||!u){n.executeEnd=Yi();const h=[DE(e)];return this.asyncResult?Promise.resolve(h):h}const d=c.flush(o);return kf(d)?(this.asyncResult=!0,d.then(h=>(this.flushRemux(s,h,e),s))):(this.flushRemux(s,d,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,n,r){const{audioTrack:i,videoTrack:a,id3Track:s,textTrack:o}=n,{accurateTimeOffset:c,timeOffset:u}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===Se.MAIN?"level":"track"} ${r.level}`);const d=this.remuxer.remux(i,a,s,o,u,c,!0,this.id);e.push({remuxResult:d,chunkMeta:r}),r.transmuxing.executeEnd=Yi()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,i,a){const{demuxer:s,remuxer:o}=this;!s||!o||(s.resetInitSegment(e,n,r,i),o.resetInitSegment(e,n,r,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,i,a){let s;return n&&n.method==="SAMPLE-AES"?s=this.transmuxSampleAes(e,n,r,i,a):s=this.transmuxUnencrypted(e,r,i,a),s}transmuxUnencrypted(e,n,r,i){const{audioTrack:a,videoTrack:s,id3Track:o,textTrack:c}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,s,o,c,n,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,n,r,i,a){return this.demuxer.demuxSampleAes(e,n,r).then(s=>({remuxResult:this.remuxer.remux(s.audioTrack,s.videoTrack,s.id3Track,s.textTrack,r,i,!1,this.id),chunkMeta:a}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:i}=this;let a;for(let h=0,p=pm.length;h<p;h++){var s;if((s=pm[h].demux)!=null&&s.probe(e,this.logger)){a=pm[h];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,c=this.remuxer,u=a.remux,d=a.demux;(!c||!(c instanceof u))&&(this.remuxer=new u(r,n,i,this.logger)),(!o||!(o instanceof d))&&(this.demuxer=new d(r,n,i,this.logger),this.probe=d.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new e_(this.config)),e}}function pbe(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const DE=t=>({remuxResult:{},chunkMeta:t});function kf(t){return"then"in t&&t.then instanceof Function}class gbe{constructor(e,n,r,i,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=i,this.defaultInitPts=a||null}}class ybe{constructor(e,n,r,i,a,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=a,this.initSegmentChange=s}}let HU=0;class OG{constructor(e,n,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=HU++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=c=>{const u=c.data,d=this.hls;if(!(!d||!(u!=null&&u.event)||u.instanceNo!==this.instanceNo))switch(u.event){case"init":{var h;const p=(h=this.workerContext)==null?void 0:h.objectURL;p&&self.URL.revokeObjectURL(p);break}case"transmuxComplete":{this.handleTransmuxComplete(u.data);break}case"flush":{this.onFlush(u.data);break}case"workerLog":{d.logger[u.data.logType]&&d.logger[u.data.logType](u.data.message);break}default:{u.data=u.data||{},u.data.frag=this.frag,u.data.part=this.part,u.data.id=this.id,d.trigger(u.event,u.data);break}}},this.onWorkerError=c=>{if(!this.hls)return;const u=new Error(`${c.message}  (${c.filename}:${c.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:u})};const a=e.config;this.hls=e,this.id=n,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const s=(c,u)=>{u=u||{},u.frag=this.frag||void 0,c===D.ERROR&&(u=u,u.parent=this.id,u.part=this.part,this.error=u.error),this.hls.trigger(c,u)};this.observer=new i_,this.observer.on(D.FRAG_DECRYPTED,s),this.observer.on(D.ERROR,s);const o=oU(a.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const c=this.hls.logger;if(a.workerPath||Tve()){try{a.workerPath?(c.log(`loading Web Worker ${a.workerPath} for "${n}"`),this.workerContext=wve(a.workerPath)):(c.log(`injecting Web Worker for "${n}"`),this.workerContext=Ave());const{worker:d}=this.workerContext;d.addEventListener("message",this.onWorkerMessage),d.addEventListener("error",this.onWorkerError),d.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:n,config:Et(a)})}catch(d){c.warn(`Error setting up "${n}" Web Worker, fallback to inline`,d),this.terminateWorker(),this.error=null,this.transmuxer=new qU(this.observer,o,a,"",n,e.logger)}return}}this.transmuxer=new qU(this.observer,o,a,"",n,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=HU++;const n=this.hls.config,r=oU(n.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:Et(n)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),_ve(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,n,r,i,a,s,o,c,u,d){var h,p;u.transmuxing.start=self.performance.now();const{instanceNo:y,transmuxer:v}=this,x=s?s.start:a.start,b=a.decryptdata,T=this.frag,_=!(T&&a.cc===T.cc),w=!(T&&u.level===T.level),O=T?u.sn-T.sn:-1,R=this.part?u.part-this.part.index:-1,C=O===0&&u.id>1&&u.id===(T==null?void 0:T.stats.chunkCount),L=!w&&(O===1||O===0&&(R===1||C&&R<=0)),P=self.performance.now();(w||O||a.stats.parsing.start===0)&&(a.stats.parsing.start=P),s&&(R||!L)&&(s.stats.parsing.start=P);const N=!(T&&((h=a.initSegment)==null?void 0:h.url)===((p=T.initSegment)==null?void 0:p.url)),k=new ybe(_,L,c,w,x,N);if(!L||_||N){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${a.type} sn: ${u.sn}${u.part>-1?" part: "+u.part:""} ${this.id===Se.MAIN?"level":"track"}: ${u.level} id: ${u.id}
        discontinuity: ${_}
        trackSwitch: ${w}
        contiguous: ${L}
        accurateTimeOffset: ${c}
        timeOffset: ${x}
        initSegmentChange: ${N}`);const M=new gbe(r,i,n,o,d);this.configureTransmuxer(M)}if(this.frag=a,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:y,cmd:"demux",data:e,decryptdata:b,chunkMeta:u,state:k},e instanceof ArrayBuffer?[e]:[]);else if(v){const M=v.push(e,b,u,k);kf(M)?M.then($=>{this.handleTransmuxComplete($)}).catch($=>{this.transmuxerError($,u,"transmuxer-interface push error")}):this.handleTransmuxComplete(M)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:n,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:n,cmd:"flush",chunkMeta:e});else if(r){const i=r.flush(e);kf(i)?i.then(a=>{this.handleFlushResult(a,e)}).catch(a=>{this.transmuxerError(a,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}configureTransmuxer(e){const{instanceNo:n,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:n,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const zU=100;class vbe extends r_{constructor(e,n,r){super(e,n,r,"audio-stream-controller",Se.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:a}){if(r===Se.MAIN){const s=n.cc,o=this.fragCurrent;if(this.initPTS[s]={baseTime:i,timescale:a},this.log(`InitPTS for cc: ${s} found from main: ${i}/${a}`),this.mainAnchor=n,this.state===fe.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==s)&&this.syncWithAnchor(n,c==null?void 0:c.frag)}else!this.hls.hasEnoughToStart&&o&&o.cc!==s?(o.abortRequests(),this.syncWithAnchor(n,o)):this.state===fe.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,n){var r;const i=((r=this.mainFragLoading)==null?void 0:r.frag)||null;if(n&&(i==null?void 0:i.cc)===n.cc)return;const a=(i||e).cc,s=this.getLevelDetails(),o=this.getLoadPosition(),c=Y8(s,a,o);c&&(this.log(`Syncing with main frag at ${c.start} cc ${c.cc}`),this.startFragRequested=!1,this.nextLoadPosition=c.start,this.resetLoadingState(),this.state===fe.IDLE&&this.doTickIdle())}startLoad(e,n){if(!this.levels){this.startPosition=e,this.state=fe.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(zU),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=fe.IDLE):this.state=fe.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}doTick(){switch(this.state){case fe.IDLE:this.doTickIdle();break;case fe.WAITING_TRACK:{const{levels:n,trackId:r}=this,i=n==null?void 0:n[r],a=i==null?void 0:i.details;if(a&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(a))break;this.state=fe.WAITING_INIT_PTS}break}case fe.FRAG_LOADING_WAITING_RETRY:{var e;const n=performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:i,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((i==null?void 0:i[a])||null),this.state=fe.IDLE}break}case fe.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:r,part:i,cache:a,complete:s}=n,o=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=fe.FRAG_LOADING;const c=a.flush().buffer,u={frag:r,part:i,payload:c,networkDetails:null};this._handleFragmentLoadProgress(u),s&&super._handleFragmentLoadComplete(u)}else o&&o.cc!==n.frag.cc&&this.syncWithAnchor(o,n.frag)}else this.state=fe.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:n,levels:r,media:i,trackId:a}=this,s=n.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||!(r!=null&&r[a]))return;const o=r[a],c=o.details;if(!c||this.waitForLive(o)||this.waitForCdnTuneIn(c)){this.state=fe.WAITING_TRACK,this.startFragRequested=!1;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,gt.AUDIO,Se.AUDIO));const d=this.getFwdBufferInfo(u,Se.AUDIO);if(d===null)return;if(!this.switchingTrack&&this._streamEnded(d,c)){n.trigger(D.BUFFER_EOS,{type:"audio"}),this.state=fe.ENDED;return}const h=d.len,p=n.maxBufferLength,y=c.fragments,v=y[0].start,x=this.getLoadPosition(),b=this.flushing?x:d.end;if(this.switchingTrack&&i){const w=x;c.PTSKnown&&w<v&&(d.end>v||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=v+.05)}if(h>=p&&!this.switchingTrack&&b<y[y.length-1].start)return;let T=this.getNextFragment(b,c);if(T&&this.isLoopLoading(T,b)&&(T=this.getNextFragmentLoopLoading(T,c,d,Se.MAIN,p)),!T){this.bufferFlushed=!0;return}let _=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&_&&Kt(T)&&!T.endList&&(!c.live||!this.loadingParts&&b<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(_)===en.OK&&(this.mainFragLoading=_=null),_&&Kt(_))){if(T.start>_.end){const O=this.fragmentTracker.getFragAtPos(b,Se.MAIN);O&&O.end>_.end&&(_=O,this.mainFragLoading={frag:O,targetBufferTime:null})}if(T.start>_.end)return}this.loadFragment(T,o,b)}onMediaDetaching(e,n){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,n)}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new If(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?(this.switchingTrack=n,this.flushAudioIfNeeded(n),this.state!==fe.STOPPED&&(this.setInterval(zU),this.state=fe.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=n,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,n){this.mainDetails=n.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(D.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,n){var r;const{levels:i}=this,{details:a,id:s,groupId:o,track:c}=n;if(!i){this.warn(`Audio tracks reset while loading track ${s} "${c.name}" of "${o}"`);return}const u=this.mainDetails;if(!u||a.endCC>u.endCC||u.expired){this.cachedTrackLoadedData=n,this.state!==fe.STOPPED&&(this.state=fe.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${s} "${c.name}" of "${o}" loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const d=i[s];let h=0;if(a.live||(r=d.details)!=null&&r.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;if(d.details){var p;h=this.alignPlaylists(a,d.details,(p=this.levelLastLoaded)==null?void 0:p.details)}a.alignedSliding||(lG(a,u),a.alignedSliding||kp(a,u),h=a.fragmentStart)}d.details=a,this.levelLastLoaded=d,this.startFragRequested||this.setStartPosition(u,h),this.hls.trigger(D.AUDIO_TRACK_UPDATED,{details:a,id:s,groupId:n.groupId}),this.state===fe.WAITING_TRACK&&!this.waitForCdnTuneIn(a)&&(this.state=fe.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:i,payload:a}=e,{config:s,trackId:o,levels:c}=this;if(!c){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const u=c[o];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const d=u.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const h=s.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let p=this.transmuxer;p||(p=this.transmuxer=new OG(this.hls,Se.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const y=this.initPTS[r.cc],v=(n=r.initSegment)==null?void 0:n.data;if(y!==void 0){const b=i?i.index:-1,T=b!==-1,_=new t_(r.level,r.sn,r.stats.chunkCount,a.byteLength,b,T);p.push(a,v,h,"",r,i,d.totalduration,!1,_,y)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${d.startSN} ,${d.endSN}],track ${o}`);const{cache:x}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new uG,complete:!1};x.push(new Uint8Array(a)),this.state!==fe.STOPPED&&(this.state=fe.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,n){this.bufferFlushed=this.flushing=!1;const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,n){!this.audioOnly&&n.frag.type===Se.MAIN&&Kt(n.frag)&&(this.mainFragLoading=n,this.state===fe.IDLE&&this.tick())}onFragBuffered(e,n){const{frag:r,part:i}=n;if(r.type!==Se.AUDIO){!this.audioOnly&&r.type===Se.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Kt(r)){this.fragPrevious=r;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(D.AUDIO_TRACK_SWITCHED,ht({},a)))}this.fragBufferedComplete(r,i),this.media&&this.tick()}onError(e,n){var r;if(n.fatal){this.state=fe.ERROR;return}switch(n.details){case re.FRAG_GAP:case re.FRAG_PARSING_ERROR:case re.FRAG_DECRYPT_ERROR:case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Se.AUDIO,n);break;case re.AUDIO_TRACK_LOAD_ERROR:case re.AUDIO_TRACK_LOAD_TIMEOUT:case re.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===fe.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===He.AUDIO_TRACK&&(this.state=fe.IDLE);break;case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)||this.resetLoadingState();break;case re.BUFFER_FULL_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case re.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==gt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==gt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===fe.ENDED&&(this.state=fe.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,Se.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const r="audio",{hls:i}=this,{remuxResult:a,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:c,part:u,level:d}=o,{details:h}=d,{audio:p,text:y,id3:v,initSegment:x}=a;if(this.fragContextChanged(c)||!h){this.fragmentTracker.removeFragment(c);return}if(this.state=fe.PARSING,this.switchingTrack&&p&&this.completeAudioSwitch(this.switchingTrack),x!=null&&x.tracks){const b=c.initSegment||c;this._bufferInitSegment(d,x.tracks,b,s),i.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:b,id:r,tracks:x.tracks})}if(p){const{startPTS:b,endPTS:T,startDTS:_,endDTS:w}=p;u&&(u.elementaryStreams[gt.AUDIO]={startPTS:b,endPTS:T,startDTS:_,endDTS:w}),c.setElementaryStreamInfo(gt.AUDIO,b,T,_,w),this.bufferFragmentData(p,c,u,s)}if(v!=null&&(n=v.samples)!=null&&n.length){const b=ut({id:r,frag:c,details:h},v);i.trigger(D.FRAG_PARSING_METADATA,b)}if(y){const b=ut({id:r,frag:c,details:h},y);i.trigger(D.FRAG_PARSING_USERDATA,b)}}_bufferInitSegment(e,n,r,i){if(this.state!==fe.PARSING||(n.video&&delete n.video,n.audiovideo&&delete n.audiovideo,!n.audio))return;const a=n.audio;a.id=Se.AUDIO;const s=e.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${s}/${a.codec}]`),s&&s.split(",").length===1&&(a.levelCodec=s),this.hls.trigger(D.BUFFER_CODECS,n);const o=a.initSegment;if(o!=null&&o.byteLength){const c={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:o};this.hls.trigger(D.BUFFER_APPENDING,c)}this.tickImmediate()}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===en.NOT_LOADED||i===en.PARTIAL){var a;if(!Kt(e))this._loadInitSegment(e,n);else if((a=n.details)!=null&&a.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=fe.WAITING_INIT_PTS;const s=this.mainDetails;s&&s.fragmentStart!==n.details.fragmentStart&&kp(n.details,s)}else super.loadFragment(e,n,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o}=this.bufferedTrack;Ks({name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o},e,Ps)||(Ip(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(D.AUDIO_TRACK_SWITCHED,ht({},e))}}class f_ extends ri{constructor(e,n){super(n,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,r){const i=n==null?void 0:n.renditionReports;if(i){let a=-1;for(let s=0;s<i.length;s++){const o=i[s];let c;try{c=new self.URL(o.URI,n.url).href}catch(u){this.warn(`Could not construct new URL for Rendition Report: ${u}`),c=o.URI||""}if(c===e){a=s;break}else c===e.substring(0,c.length)&&(a=s)}if(a!==-1){const s=i[a],o=parseInt(s["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let c=parseInt(s["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const d=Math.min(n.age-n.partTarget,n.targetduration);c>=0&&d>n.partTarget&&(c+=1)}const u=r&&lU(r);return new uU(o,c>=0?c:void 0,u)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,n){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,n){if(n)try{return n.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,n,r){const{details:i,stats:a}=n,s=self.performance.now(),o=a.loading.first?Math.max(0,s-a.loading.first):0;i.advancedDateTime=Date.now()-o;const c=this.hls.config.timelineOffset;if(c!==i.appliedTimelineOffset){const d=Math.max(c||0,0);i.appliedTimelineOffset=d,i.fragments.forEach(h=>{h.start=h.playlistOffset+d})}if(i.live||r!=null&&r.live){const d="levelInfo"in n?n.levelInfo:n.track;if(i.reloaded(r),r&&i.fragments.length>0){hve(r,i);const _=i.playlistParsingError;if(_){this.warn(_);const w=this.hls;if(!w.config.ignorePlaylistParsingErrors){var u;const{networkDetails:O}=n;w.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:_,reason:_.message,level:n.level||void 0,parent:(u=i.fragments[0])==null?void 0:u.type,networkDetails:O,stats:a});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=a.loading.start);const h=this.hls.mainForwardBufferInfo,p=h?h.end-h.len:0,y=(i.edge-p)*1e3,v=rG(i,y);if(i.requestScheduled+v<s?i.requestScheduled=s:i.requestScheduled+=v,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let x,b,T;if(i.canBlockReload&&i.endSN&&i.advanced){const _=this.hls.config.lowLatencyMode,w=i.lastPartSn,O=i.endSN,R=i.lastPartIndex,C=R!==-1,L=w===O;C?L?(b=O+1,T=_?0:R):(b=w,T=_?R+1:i.maxPartIndex):b=O+1;const P=i.age,N=P+i.ageHeader;let k=Math.min(N-i.partTarget,i.targetduration*1.5);if(k>0){if(N>i.targetduration*3)this.log(`Playlist last advanced ${P.toFixed(2)}s ago. Omitting segment and part directives.`),b=void 0,T=void 0;else if(r!=null&&r.tuneInGoal&&N-i.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${k} with playlist age: ${i.age}`),k=0;else{const M=Math.floor(k/i.targetduration);if(b+=M,T!==void 0){const $=Math.round(k%i.targetduration/i.partTarget);T+=$}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${P.toFixed(2)}s goal: ${k} skip sn ${M} to part ${T}`)}i.tuneInGoal=k}if(x=this.getDeliveryDirectives(i,n.deliveryDirectives,b,T),_||!L){i.requestScheduled=s,this.loadingPlaylist(d,x);return}}else(i.canBlockReload||i.canSkipUntil)&&(x=this.getDeliveryDirectives(i,n.deliveryDirectives,b,T));x&&b!==void 0&&i.canBlockReload&&(i.requestScheduled=a.loading.first+Math.max(v-o*2,v/2)),this.scheduleLoading(d,x,i)}else this.clearTimer()}scheduleLoading(e,n,r){const i=r||e.details;if(!i){this.loadingPlaylist(e,n);return}const a=self.performance.now(),s=i.requestScheduled;if(a>=s){this.loadingPlaylist(e,n);return}const o=s-a;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,n),o)}getDeliveryDirectives(e,n,r,i){let a=lU(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,i=n.part,a=dm.No),new uU(r,i,a)}checkRetry(e){const n=e.details,r=Pp(e),i=e.errorAction,{action:a,retryCount:s=0,retryConfig:o}=i||{},c=!!i&&!!o&&(a===In.RetryRequest||!i.resolved&&a===In.SendAlternateToPenaltyBox);if(c){var u;if(s>=o.maxNumRetry)return!1;if(r&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const d=Jw(o,s);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),d),this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${n}" in ${d}ms`)}e.levelRetry=!0,i.resolved=!0}return c}}function CG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!jf(t[n].attrs,e[n].attrs))return!1;return!0}function jf(t,e,n){const r=t["STABLE-RENDITION-ID"];return r&&!n?r===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function zA(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class bbe extends f_{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:i,details:a}=n,s=this.tracksInGroup[r];if(!s||s.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${s==null?void 0:s.groupId}`);return}const o=s.details;s.details=n.details,this.log(`Audio track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,o)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.audioGroups||null,i=this.groupIds;let a=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(o=>(i==null?void 0:i.indexOf(o))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(p=>!r||r.indexOf(p.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(p=>p.default)&&(this.selectDefaultTrack=!1),o.forEach((p,y)=>{p.id=y});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const c=this.hls.config.audioPreference;if(!a&&c){const p=yi(c,o,Ps);if(p>-1)a=o[p];else{const y=yi(c,this.tracks);a=this.tracks[y]}}let u=this.findTrackId(a);u===-1&&a&&(u=this.findTrackId(null));const d={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(D.AUDIO_TRACKS_UPDATED,d);const h=this.trackId;if(u!==-1&&h===-1)this.setAudioTrack(u);else if(o.length&&h===-1){var s;const p=new Error(`No audio track selected for current audio group-ID(s): ${(s=this.groupIds)==null?void 0:s.join(",")} track count: ${o.length}`);this.warn(p.message),this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:p})}}}onError(e,n){n.fatal||!n.context||n.context.type===He.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&Ks(e,i,Ps))return i;const a=yi(e,this.tracksInGroup,Ps);if(a>-1){const s=this.tracksInGroup[a];return this.setAudioTrack(a),s}else if(i){let s=n.loadLevel;s===-1&&(s=n.firstAutoLevel);const o=Iye(e,n.levels,r,s,Ps);if(o===-1)return null;n.nextLoadLevel=o}if(e.channels||e.audioCodec){const s=yi(e,r);if(s>-1)return r[s]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e],a=i.details&&!i.details.live;if(e===this.trackId&&i===r&&a||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(D.AUDIO_TRACK_SWITCHING,ht({},i)),a))return;const s=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(s)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Ks(e,i,Ps)))return r}if(e){const{name:r,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:c}=e;for(let u=0;u<n.length;u++){const d=n[u];if(Ks({name:r,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:c},d,Ps))return u}for(let u=0;u<n.length;u++){const d=n[u];if(jf(e.attrs,d.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<n.length;u++){const d=n[u];if(jf(e.attrs,d.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;this.shouldLoadPlaylist(n)&&Ip(n.url,this.hls)&&this.scheduleLoading(n,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,n),s=e.details,o=s==null?void 0:s.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger(D.AUDIO_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:n||null,track:e})}}class xbe{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,n,r){if(this.queues===null||this.tracks===null)return;const i=this.queues[n];i.push(e),i.length===1&&!r&&this.executeNext(n)}appendBlocker(e){return new Promise(n=>{const r={label:"async-blocker",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(n=>{if(this.queues){const r={label:"async-blocker-prepend",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var n;const r=(n=e[0])==null?void 0:n.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const n=this.queues[e];if(n.length){const i=n[0];try{i.execute()}catch(a){var r;if(i.onError(a),this.queues===null||this.tracks===null)return;const s=(r=this.tracks[e])==null?void 0:r.buffer;s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var n;return((n=this.queues)==null?void 0:n[e][0])||null}toString(){const{queues:e,tracks:n}=this;return e===null||n===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var n,r;return(n=this.queues)!=null&&n[e]||(r=this.tracks)!=null&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var n;const r=(n=this.tracks)==null?void 0:n[e],i=r==null?void 0:r.buffer;return i?`SourceBuffer${i.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var n;return((n=this.queues)==null?void 0:n[e].map(r=>r.label).join(", "))||""}}const KU=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,LG="HlsJsTrackRemovedError";class Sbe extends Error{constructor(e){super(e),this.name=LG}}class Ebe extends ri{constructor(e,n){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:i,mediaSource:a}=this;r&&this.log("Media source opened"),!(!i||!a)&&(a.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(D.MEDIA_ATTACHED,{media:i,mediaSource:a}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e,this.fragmentTracker=n,this.appendSource=W0e(Qa(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_APPENDING,this.onBufferAppending,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.BUFFER_EOS,this.onBufferEos,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.FRAG_PARSED,this.onFragParsed,this),e.on(D.FRAG_CHANGED,this.onFragChanged,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_APPENDING,this.onBufferAppending,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.BUFFER_EOS,this.onBufferEos,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.FRAG_PARSED,this.onFragParsed,this),e.off(D.FRAG_CHANGED,this.onFragChanged,this),e.off(D.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:n}=this;if(!e)return null;const r={};if(this.operationQueue){const a=this.isUpdating();a||this.operationQueue.removeBlockers();const s=this.isQueued();(a||s)&&this.warn(`Transfering MediaSource with${s?" operations in queue":""}${a?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===n?ut(r,i.tracks):this.sourceBuffers.forEach(a=>{const[s]=a;s&&(r[s]=ut({},this.tracks[s]),this.removeBuffer(s)),a[0]=a[1]=null}),{media:e,mediaSource:n,tracks:r}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){var r;let i=2;(n.audio&&!n.video||!n.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,n){const r=this.media=n.media,i=Qa(this.appendSource);if(this.transferData=this.overrides=void 0,r&&i){const a=!!n.mediaSource;(a||n.overrides)&&(this.transferData=n,this.overrides=n.overrides);const s=this.mediaSource=n.mediaSource||new i;if(this.assignMediaSource(s),a)this._objectUrl=r.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{r.removeAttribute("src");const c=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||c&&s instanceof c,YU(r),Tbe(r,o),r.load()}catch{r.src=o}else r.src=o}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var n,r;this.log(`${((n=this.transferData)==null?void 0:n.mediaSource)===e?"transferred":"created"} media source: ${(r=e.constructor)==null?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,n=this.transferData;if(!n||!e)return;const r=this.tracks,i=n.tracks,a=i?Object.keys(i):null,s=a?a.length:0,o=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(i&&a&&s){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Et(r,(c,u)=>c==="initSegment"?void 0:u)};
transfer tracks: ${Et(i,(c,u)=>c==="initSegment"?void 0:u)}}`),!I8(i,r)){n.mediaSource=null,n.tracks=void 0;const c=e.currentTime,u=this.details,d=Math.max(c,(u==null?void 0:u.fragments[0].start)||0);if(d-c>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${c} -> ${d}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(r)}") start time: ${d} currentTime: ${c}`),this.onMediaDetaching(D.MEDIA_DETACHING,{}),this.onMediaAttaching(D.MEDIA_ATTACHING,n),e.currentTime=d;return}this.transferData=void 0,a.forEach(c=>{const u=c,d=i[u];if(d){const h=d.buffer;if(h){const p=this.fragmentTracker,y=d.id;if(p.hasFragments(y)||p.hasParts(y)){const b=ke.getBuffered(h);p.detectEvictedFragments(u,b,y,null,!0)}const v=IE(u),x=[u,h];this.sourceBuffers[v]=x,h.updating&&this.operationQueue&&this.operationQueue.prependBlocker(u),this.trackSourceBuffer(u,d)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const n=(e=this.mediaSource)==null?void 0:e.readyState;return n==="open"||n==="ended"}onMediaDetaching(e,n){const r=!!n.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:a,_objectUrl:s}=this;if(a){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=a.readyState==="open";try{const c=a.sourceBuffers;for(let u=c.length;u--;)o&&c[u].abort(),a.removeSourceBuffer(c[u]);o&&a.endOfStream()}catch(c){this.warn(`onMediaDetaching: ${c.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),r||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(i.removeAttribute("src"),this.appendSource&&YU(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(D.MEDIA_DETACHED,n)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var n;const r=(n=this.tracks[e])==null?void 0:n.buffer;if(this.removeBuffer(e),r)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(a){this.warn(`onBufferReset ${e}`,a)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[IE(e)]=[null,null];const n=this.tracks[e];n&&(n.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new xbe(this.tracks)}onBufferCodecs(e,n){const r=this.tracks,i=Object.keys(n);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in n&&(r.audio||r.video)||r.audiovideo&&("audio"in n||"video"in n),s=!a&&this.sourceBufferCount&&this.media&&i.some(o=>!r[o]);if(a||s){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${i}" SourceBuffers`);return}i.forEach(o=>{var c,u,d;const h=n[o],{id:p,codec:y,levelCodec:v,container:x,metadata:b,supplemental:T}=h;let _=r[o];const w=(c=this.transferData)==null||(u=c.tracks)==null?void 0:u[o],O=w!=null&&w.buffer?w:_,R=(O==null?void 0:O.pendingCodec)||(O==null?void 0:O.codec),C=O==null?void 0:O.levelCodec;_||(_=r[o]={buffer:void 0,listeners:[],codec:y,supplemental:T,container:x,levelCodec:v,metadata:b,id:p});const L=fm(R,C),P=L==null?void 0:L.replace(KU,"$1");let N=fm(y,v);const k=(d=N)==null?void 0:d.replace(KU,"$1");N&&L&&P!==k&&(o.slice(0,5)==="audio"&&(N=Lp(N,this.appendSource)),this.log(`switching codec ${R} to ${N}`),N!==(_.pendingCodec||_.codec)&&(_.pendingCodec=N),_.container=x,this.appendChangeType(o,x,N))}),(this.tracksReady||this.sourceBufferCount)&&(n.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,n)=>{const r=this.tracks[n];return e[n]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,n,r){const i=`${n};codecs=${r}`,a={label:`change-type=${i}`,execute:()=>{const s=this.tracks[e];if(s){const o=s.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),o.changeType(i),s.codec=r,s.container=n)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};this.append(a,e,this.isPending(this.tracks[e]))}blockAudio(e){var n;const r=e.start,i=r+e.duration*.05;if(((n=this.fragmentTracker.getAppendedFrag(r,Se.MAIN))==null?void 0:n.gap)===!0)return;const s={label:"block-audio",execute:()=>{var o;const c=this.tracks.video;(this.lastVideoAppendEnd>i||c!=null&&c.buffer&&ke.isBuffered(c.buffer,i)||((o=this.fragmentTracker.getAppendedFrag(i,Se.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:s,frag:e},this.append(s,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:n}=this;e&&n&&(this.blockedAudioAppend=null,n.unblockAudio(e.op))}onBufferAppending(e,n){const{tracks:r}=this,{data:i,type:a,parent:s,frag:o,part:c,chunkMeta:u,offset:d}=n,h=u.buffering[a],{sn:p,cc:y}=o,v=self.performance.now();h.start=v;const x=o.stats.buffering,b=c?c.stats.buffering:null;x.start===0&&(x.start=v),b&&b.start===0&&(b.start=v);const T=r.audio;let _=!1;a==="audio"&&(T==null?void 0:T.container)==="audio/mpeg"&&(_=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const w=r.video,O=w==null?void 0:w.buffer;if(O&&p!=="initSegment"){const L=c||o,P=this.blockedAudioAppend;if(a==="audio"&&s!=="main"&&!this.blockedAudioAppend){const k=L.start+L.duration*.05,M=O.buffered,$=this.currentOp("video");!M.length&&!$?this.blockAudio(L):!$&&!ke.isBuffered(O,k)&&this.lastVideoAppendEnd<k&&this.blockAudio(L)}else if(a==="video"){const N=L.end;if(P){const k=P.frag.start;(N>k||N<this.lastVideoAppendEnd||ke.isBuffered(O,k))&&this.unblockAudio()}this.lastVideoAppendEnd=N}}const R=(c||o).start,C={label:`append-${a}`,execute:()=>{var L;h.executeStart=self.performance.now();const P=(L=this.tracks[a])==null?void 0:L.buffer;P&&(_?this.updateTimestampOffset(P,R,.1,a,p,y):d!==void 0&&be(d)&&this.updateTimestampOffset(P,d,1e-6,a,p,y)),this.appendExecutor(i,a)},onStart:()=>{},onComplete:()=>{const L=self.performance.now();h.executeEnd=h.end=L,x.first===0&&(x.first=L),b&&b.first===0&&(b.first=L);const P={};this.sourceBuffers.forEach(([N,k])=>{N&&(P[N]=ke.getBuffered(k))}),this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(D.BUFFER_APPENDED,{type:a,frag:o,part:c,chunkMeta:u,parent:o.type,timeRanges:P})},onError:L=>{var P;const N={type:Te.MEDIA_ERROR,parent:o.type,details:re.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:c,chunkMeta:u,error:L,err:L,fatal:!1},k=(P=this.media)==null?void 0:P.error;if(L.code===DOMException.QUOTA_EXCEEDED_ERR||L.name=="QuotaExceededError"||"quota"in L)N.details=re.BUFFER_FULL_ERROR;else if(L.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!k)N.errorAction=Pf(!0);else if(L.name===LG&&this.sourceBufferCount===0)N.errorAction=Pf(!0);else{const M=++this.appendErrors[a];this.warn(`Failed ${M}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${k||"no media error"})`),(M>=this.hls.config.appendErrorMaxRetry||k)&&(N.fatal=!0)}this.hls.trigger(D.ERROR,N)}};this.append(C,a,this.isPending(this.tracks[a]))}getFlushOp(e,n,r){return this.log(`queuing "${e}" remove ${n}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,n,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(D.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${n}-${r} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,n){const{type:r,startOffset:i,endOffset:a}=n;r?this.append(this.getFlushOp(r,i,a),r):this.sourceBuffers.forEach(([s])=>{s&&this.append(this.getFlushOp(s,i,a),s)})}onFragParsed(e,n){const{frag:r,part:i}=n,a=[],s=i?i.elementaryStreams:r.elementaryStreams;s[gt.AUDIOVIDEO]?a.push("audiovideo"):(s[gt.AUDIO]&&a.push("audio"),s[gt.VIDEO]&&a.push("video"));const o=()=>{const c=self.performance.now();r.stats.buffering.end=c,i&&(i.stats.buffering.end=c);const u=i?i.stats:r.stats;this.hls.trigger(D.FRAG_BUFFERED,{frag:r,part:i,stats:u,id:r.type})};a.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(o,a).catch(c=>{this.warn(`Fragment buffered callback ${c}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,n){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var n,r;return e&&(!((n=this.tracks[e])!=null&&n.ended)||((r=this.tracks[e])==null?void 0:r.ending))})}onBufferEos(e,n){var r;this.sourceBuffers.forEach(([s])=>{if(s){const o=this.tracks[s];(!n.type||n.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} buffer reached EOS`)))}});const i=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([s])=>{var o;return s&&!((o=this.tracks[s])!=null&&o.ended)})&&(i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream(),this.hls.trigger(D.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(D.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const n=this.tracks[e];n&&(n.ending=!1)}})}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,n){if(n.details===re.BUFFER_APPEND_ERROR&&n.frag){var r;const i=(r=n.errorAction)==null?void 0:r.nextAutoLevel;be(i)&&i!==n.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:n,media:r}=this;if(!r||n===null||!this.sourceBufferCount)return;const i=e.config,a=r.currentTime,s=n.levelTargetDuration,o=n.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(be(o)&&o>=0){const c=Math.max(o,s),u=Math.floor(a/s)*s-c;this.flushBackBuffer(a,s,u)}if(be(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){const c=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),u=Math.max(c,s),d=Math.floor(a/s)*s+u;this.flushFrontBuffer(a,s,d)}}flushBackBuffer(e,n,r){this.sourceBuffers.forEach(([i,a])=>{if(a){const o=ke.getBuffered(a);if(o.length>0&&r>o.start(0)){var s;this.hls.trigger(D.BACK_BUFFER_REACHED,{bufferEnd:r});const c=this.tracks[i];if((s=this.details)!=null&&s.live)this.hls.trigger(D.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(c!=null&&c.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:i})}}})}flushFrontBuffer(e,n,r){this.sourceBuffers.forEach(([i,a])=>{if(a){const s=ke.getBuffered(a),o=s.length;if(o<2)return;const c=s.start(o-1),u=s.end(o-1);if(r>c||e>=c&&e<=u)return;this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:n,mediaSource:r}=this;if(!n||!this.media||(r==null?void 0:r.readyState)!=="open")return null;const i=n.edge;if(n.live&&this.hls.config.liveDurationInfinity){if(n.fragments.length&&n.live&&r.setLiveSeekableRange){const u=Math.max(0,n.fragmentStart),d=Math.max(u,i);return{duration:1/0,start:u,end:d}}return{duration:1/0}}const a=(e=this.overrides)==null?void 0:e.duration;if(a)return be(a)?{duration:a}:null;const s=this.media.duration,o=be(r.duration)?r.duration:0;return i>o&&i>s||!be(s)?{duration:i}:null}updateMediaSource({duration:e,start:n,end:r}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(be(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),n!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${n}-${r}.`),i.setLiveSeekableRange(n,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:n,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${n} codec events expected: ${e}) ${Et(r)}`),this.tracksReady){var i;const a=(i=this.transferData)==null?void 0:i.tracks;a&&Object.keys(a).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([n,r])=>{if(n){const i=this.tracks[n];e[n]={buffer:r,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(D.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([n])=>{this.executeNext(n)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:n,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in e){const s=a,o=e[s];if(this.isPending(o)){const c=this.getTrackCodec(o,s),u=`${o.container};codecs=${c}`;o.codec=c,this.log(`creating sourceBuffer(${u})${this.currentOp(s)?" Queued":""} ${Et(o)}`);try{const d=r.addSourceBuffer(u),h=IE(s),p=[s,d];n[h]=p,o.buffer=d}catch(d){var i;this.error(`error while trying to add sourceBuffer: ${d.message}`),this.shiftAndExecuteNext(s),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[s],this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:d,sourceBufferName:s,mimeType:u,parent:o.id});return}this.trackSourceBuffer(s,o)}}this.bufferCreated()}getTrackCodec(e,n){const r=e.supplemental;let i=e.codec;r&&(n==="video"||n==="audiovideo")&&kA(r,"video")&&(i=pye(i,r));const a=fm(i,e.levelCodec);return a?n.slice(0,5)==="audio"?Lp(a,this.appendSource):a:""}trackSourceBuffer(e,n){const r=n.buffer;if(!r)return;const i=this.getTrackCodec(n,e);this.tracks[e]={buffer:r,codec:i,container:n.container,levelCodec:n.levelCodec,supplemental:n.supplemental,metadata:n.metadata,id:n.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(a,s)=>{const o=s.removedRanges;o!=null&&o.length&&this.hls.trigger(D.BUFFER_FLUSHED,{type:a})})}get mediaSrc(){var e,n;const r=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return r==null?void 0:r.src}onSBUpdateStart(e){const n=this.currentOp(e);n&&n.onStart()}onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,n){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,n),this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const a=this.currentOp(e);a&&a.onError(i)}updateTimestampOffset(e,n,r,i,a,s){const o=n-e.timestampOffset;Math.abs(o)>=r&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${n} (sn: ${a} cc: ${s})`),e.timestampOffset=n)}removeExecutor(e,n,r){const{media:i,mediaSource:a}=this,s=this.tracks[e],o=s==null?void 0:s.buffer;if(!i||!a||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const c=be(i.duration)?i.duration:1/0,u=be(a.duration)?a.duration:1/0,d=Math.max(0,n),h=Math.min(r,c,u);h>d&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${d},${h}] from the ${e} SourceBuffer`),o.remove(d,h)):this.shiftAndExecuteNext(e)}appendExecutor(e,n){const r=this.tracks[n],i=r==null?void 0:r.buffer;if(!i)throw new Sbe(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(n=>{this.warn(`SourceBuffer blocked callback ${n}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(n){this.warn(`Callback run without blocking ${this.operationQueue} ${n}`)}}isUpdating(){return this.sourceBuffers.some(([e,n])=>e&&n.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,n=this.sourceBufferTypes){if(!n.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,i=n.map(s=>this.appendBlocker(s));return n.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(s=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(n=>{var r;const i=(r=this.tracks[n])==null?void 0:r.buffer;!i||i.updating||this.shiftAndExecuteNext(n)})}append(e,n,r){this.operationQueue&&this.operationQueue.append(e,n,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,n)=>e+(this.isPending(this.tracks[n])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[n])=>e+(n?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,n,r){const i=this.tracks[e];if(!i)return;const a=i.buffer;if(!a)return;const s=r.bind(this,e);i.listeners.push({event:n,listener:s}),a.addEventListener(n,s)}removeBufferListeners(e){const n=this.tracks[e];if(!n)return;const r=n.buffer;r&&(n.listeners.forEach(i=>{r.removeEventListener(i.event,i.listener)}),n.listeners.length=0)}}function YU(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function Tbe(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}function IE(t){return t==="audio"?1:0}class d_{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&be(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&n.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelEnabled&&n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((i,a)=>this.isLevelAllowed(i)&&a<=e);return this.clientRect=null,d_.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const i=(o,c)=>c?o.width!==c.width||o.height!==c.height:!0;let a=e.length-1;const s=Math.max(n,r);for(let o=0;o<e.length;o+=1){const c=e[o];if((c.width>=s||c.height>=s)&&i(c,e[o+1])){a=o;break}}return a}}const Abe={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},zn=Abe,wbe={HLS:"h"},_be=wbe,Rbe="CMCD-Object",Obe="CMCD-Request",Cbe="CMCD-Session",Lbe="CMCD-Status",wc={OBJECT:Rbe,REQUEST:Obe,SESSION:Cbe,STATUS:Lbe},Dbe={[wc.OBJECT]:["br","ab","d","ot","tb","tpb","lb","tab","lab","url"],[wc.REQUEST]:["pb","bl","tbl","dl","ltc","mtp","nor","nrr","rc","sn","sta","su","ttfb","ttfbb","ttlb","cmsdd","cmsds","smrt","df","cs"],[wc.SESSION]:["cid","pr","sf","sid","st","v","msd"],[wc.STATUS]:["bs","bsd","cdn","rtp","bg","pt","ec","e"]};class Vl{constructor(e,n){Array.isArray(e)&&(e=e.map(r=>r instanceof Vl?r:new Vl(r))),this.value=e,this.params=n}}const Ibe="Dict";function Pbe(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function Nbe(t,e,n,r){return new Error(`failed to ${t} "${Pbe(e)}" as ${n}`,{cause:r})}function wi(t,e,n){return Nbe("serialize",t,e,n)}class DG{constructor(e){this.description=e}}const WU="Bare Item",Mbe="Boolean";function kbe(t){if(typeof t!="boolean")throw wi(t,Mbe);return t?"?1":"?0"}function jbe(t){return btoa(String.fromCharCode(...t))}const Ube="Byte Sequence";function Bbe(t){if(ArrayBuffer.isView(t)===!1)throw wi(t,Ube);return`:${jbe(t)}:`}const Fbe="Integer";function $be(t){return t<-999999999999999||999999999999999<t}function IG(t){if($be(t))throw wi(t,Fbe);return t.toString()}function Gbe(t){return`@${IG(t.getTime()/1e3)}`}function PG(t,e){if(t<0)return-PG(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const i=Math.floor(t*n);return(i%2===0?i:i+1)/n}else return Math.round(t*n)/n}const Vbe="Decimal";function qbe(t){const e=PG(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw wi(t,Vbe);const n=e.toString();return n.includes(".")?n:`${n}.0`}const Hbe="String",zbe=/[\x00-\x1f\x7f]+/;function Kbe(t){if(zbe.test(t))throw wi(t,Hbe);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Ybe(t){return t.description||t.toString().slice(7,-1)}const Wbe="Token";function XU(t){const e=Ybe(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw wi(e,Wbe);return e}function KA(t){switch(typeof t){case"number":if(!be(t))throw wi(t,WU);return Number.isInteger(t)?IG(t):qbe(t);case"string":return Kbe(t);case"symbol":return XU(t);case"boolean":return kbe(t);case"object":if(t instanceof Date)return Gbe(t);if(t instanceof Uint8Array)return Bbe(t);if(t instanceof DG)return XU(t);default:throw wi(t,WU)}}const Xbe="Key";function YA(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw wi(t,Xbe);return t}function h_(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${YA(e)}`:`;${YA(e)}=${KA(n)}`).join("")}function NG(t){return t instanceof Vl?`${KA(t.value)}${h_(t.params)}`:KA(t)}function Qbe(t){return`(${t.value.map(NG).join(" ")})${h_(t.params)}`}function Zbe(t,e={whitespace:!0}){if(typeof t!="object")throw wi(t,Ibe);const n=t instanceof Map?t.entries():Object.entries(t),r=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([i,a])=>{a instanceof Vl||(a=new Vl(a));let s=YA(i);return a.value===!0?s+=h_(a.params):(s+="=",Array.isArray(a.value)?s+=Qbe(a):s+=NG(a)),s}).join(`,${r}`)}function Jbe(t,e){return Zbe(t,e)}function exe(t){return["ot","sf","st","e","sta"].includes(t)}function txe(t){return typeof t=="number"?be(t):t!=null&&t!==""&&t!==!1}function nxe(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const i=n.pathname.split("/").slice(1),a=r.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")}const gm=t=>Math.round(t),rxe=(t,e)=>(e!=null&&e.baseUrl&&(t=nxe(t,e.baseUrl)),encodeURIComponent(t)),Xh=t=>gm(t/100)*100,ixe={br:gm,d:gm,bl:Xh,dl:Xh,mtp:Xh,nor:rxe,rtp:Xh,tb:gm};function axe(t,e){const n={};if(t==null||typeof t!="object")return n;const r=Object.keys(t).sort(),i=ut({},ixe,e==null?void 0:e.formatters),a=e==null?void 0:e.filter;return r.forEach(s=>{if((a==null?void 0:a(s))===!1)return;let o=t[s];const c=i[s];c&&(o=c(o,e)),!(s==="v"&&o===1)&&(s=="pr"&&o===1||txe(o)&&(exe(s)&&typeof o=="string"&&(o=new DG(o)),n[s]=o))}),n}function MG(t,e={}){return t?Jbe(axe(t,e),ut({whitespace:!1},e)):""}function sxe(t,e={}){const n={};if(!t)return n;const r=Object.entries(t),i=Object.entries(Dbe).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),a=r.reduce((s,o)=>{var c,u;const[d,h]=o,p=((c=i.find(y=>y[1].includes(d)))===null||c===void 0?void 0:c[0])||wc.REQUEST;return(u=s[p])!==null&&u!==void 0||(s[p]={}),s[p][d]=h,s},{});return Object.entries(a).reduce((s,[o,c])=>(s[o]=MG(c,e),s),n)}function oxe(t,e,n){return ut(t,sxe(e,n))}const lxe="CMCD";function uxe(t,e={}){if(!t)return"";const n=MG(t,e);return`${lxe}=${encodeURIComponent(n)}`}const QU=/CMCD=[^&#]+/;function cxe(t,e,n){const r=uxe(e,n);if(!r)return t;if(QU.test(t))return t.replace(QU,r);const i=t.includes("?")?"&":"?";return`${t}${i}${r}`}class fxe{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:zn.MANIFEST,su:!this.initialized})}catch(a){this.hls.logger.warn("Could not generate manifest CMCD data.",a)}},this.applyFragmentData=i=>{try{const{frag:a,part:s}=i,o=this.hls.levels[a.level],c=this.getObjectType(a),u={d:(s||a).duration*1e3,ot:c};(c===zn.VIDEO||c===zn.AUDIO||c==zn.MUXED)&&(u.br=o.bitrate/1e3,u.tb=this.getTopBandwidth(c)/1e3,u.bl=this.getBufferLength(c));const d=s?this.getNextPart(s):this.getNextFrag(a);d!=null&&d.url&&d.url!==a.url&&(u.nor=d.url),this.apply(i,u)}catch(a){this.hls.logger.warn("Could not generate segment CMCD data.",a)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHED,this.onMediaDetached,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHED,this.onMediaDetached,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,i;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=n.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:_be.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){ut(n,this.createData());const r=n.ot===zn.INIT||n.ot===zn.VIDEO||n.ot===zn.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:i}=this;i&&(n=Object.keys(n).reduce((s,o)=>(i.includes(o)&&(s[o]=n[o]),s),{}));const a={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),oxe(e.headers,n,a)):e.url=cxe(e.url,n,a)}getNextFrag(e){var n;const r=(n=this.hls.levels[e.level])==null?void 0:n.details;if(r){const i=e.sn-r.startSN;return r.fragments[i+1]}}getNextPart(e){var n,r;const{index:i,fragment:a}=e,s=(n=this.hls.levels[a.level])==null||(r=n.details)==null?void 0:r.partList;if(s){const{sn:o}=a;for(let c=s.length-1;c>=0;c--){const u=s[c];if(u.index===i&&u.fragment.sn===o)return s[c+1]}}}getObjectType(e){const{type:n}=e;if(n==="subtitle")return zn.TIMED_TEXT;if(e.sn==="initSegment")return zn.INIT;if(n==="audio")return zn.AUDIO;if(n==="main")return this.hls.audioTracks.length?zn.VIDEO:zn.MUXED}getTopBandwidth(e){let n=0,r;const i=this.hls;if(e===zn.AUDIO)r=i.audioTracks;else{const a=i.maxAutoLevel,s=a>-1?a+1:i.levels.length;r=i.levels.slice(0,s)}return r.forEach(a=>{a.bitrate>n&&(n=a.bitrate)}),n>0?n:NaN}getBufferLength(e){const n=this.media,r=e===zn.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:ke.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new r(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){n(a),this.loader.load(a,s,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new r(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){n(a),this.loader.load(a,s,o)}}}}const dxe=3e5;class hxe extends ri{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,n)=>(e.indexOf(n.pathwayId)===-1&&e.push(n.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===In.SendAlternateToPenaltyBox&&r.flags===zr.MoveAllAlternatesMatchingHost){const i=this.levels;let a=this._pathwayPriority,s=this.pathwayId;if(n.context){const{groupId:o,pathwayId:c,type:u}=n.context;o&&i?s=this.getPathwayForGroupId(o,u,s):c&&(s=c)}s in this.penalizedPathways||(this.penalizedPathways[s]=performance.now()),!a&&i&&(a=this.pathways()),a&&a.length>1&&(this.updatePathwayPriority(a),r.resolved=this.pathwayId!==s),n.details===re.BUFFER_APPEND_ERROR&&!n.fatal?r.resolved=!0:r.resolved||this.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${s} levels: ${i&&i.length} priorities: ${Et(a)} penalized: ${Et(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length&&this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let n;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(a=>{i-r[a]>dxe&&delete r[a]});for(let a=0;a<e.length;a++){const s=e[a];if(s in r)continue;if(s===this.pathwayId)return;const o=this.hls.nextLoadLevel,c=this.hls.levels[o];if(n=this.getLevelsForPathway(s),n.length>0){this.log(`Setting Pathway to "${s}"`),this.pathwayId=s,sG(n),this.hls.trigger(D.LEVELS_UPDATED,{levels:n});const u=this.hls.levels[o];c&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==c.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==c.bitrate&&this.log(`Unstable Pathways change from bitrate ${c.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,n,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let a=0;a<i.length;a++)if(n===He.AUDIO_TRACK&&i[a].hasAudioGroup(e)||n===He.SUBTITLE_TRACK&&i[a].hasSubtitleGroup(e))return i[a].pathwayId;return r}clonePathways(e){const n=this.levels;if(!n)return;const r={},i={};e.forEach(a=>{const{ID:s,"BASE-ID":o,"URI-REPLACEMENT":c}=a;if(n.some(d=>d.pathwayId===s))return;const u=this.getLevelsForPathway(o).map(d=>{const h=new Ct(d.attrs);h["PATHWAY-ID"]=s;const p=h.AUDIO&&`${h.AUDIO}_clone_${s}`,y=h.SUBTITLES&&`${h.SUBTITLES}_clone_${s}`;p&&(r[h.AUDIO]=p,h.AUDIO=p),y&&(i[h.SUBTITLES]=y,h.SUBTITLES=y);const v=kG(d.uri,h["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",c),x=new If({attrs:h,audioCodec:d.audioCodec,bitrate:d.bitrate,height:d.height,name:d.name,url:v,videoCodec:d.videoCodec,width:d.width});if(d.audioGroups)for(let b=1;b<d.audioGroups.length;b++)x.addGroupId("audio",`${d.audioGroups[b]}_clone_${s}`);if(d.subtitleGroups)for(let b=1;b<d.subtitleGroups.length;b++)x.addGroupId("text",`${d.subtitleGroups[b]}_clone_${s}`);return x});n.push(...u),ZU(this.audioTracks,r,c,s),ZU(this.subtitleTracks,i,c,s)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const d=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+d)}const a={responseType:"json",url:i.href},s=n.steeringManifestLoadPolicy.default,o=s.errorRetry||s.timeoutRetry||{},c={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(d,h,p,y)=>{this.log(`Loaded steering manifest: "${i}"`);const v=d.data;if((v==null?void 0:v.VERSION)!==1){this.log(`Steering VERSION ${v.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=v.TTL;const{"RELOAD-URI":x,"PATHWAY-CLONES":b,"PATHWAY-PRIORITY":T}=v;if(x)try{this.uri=new self.URL(x,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${x}`);return}this.scheduleRefresh(this.uri||p.url),b&&this.clonePathways(b);const _={steeringManifest:v,url:i.toString()};this.hls.trigger(D.STEERING_MANIFEST_LOADED,_),T&&this.updatePathwayPriority(T)},onError:(d,h,p,y)=>{if(this.log(`Error loading steering manifest: ${d.code} ${d.text} (${h.url})`),this.stopLoad(),d.code===410){this.enabled=!1,this.log(`Steering manifest ${h.url} no longer available`);return}let v=this.timeToLoad*1e3;if(d.code===429){const x=this.loader;if(typeof(x==null?void 0:x.getResponseHeader)=="function"){const b=x.getResponseHeader("Retry-After");b&&(v=parseFloat(b)*1e3)}this.log(`Steering manifest ${h.url} rate limited`);return}this.scheduleRefresh(this.uri||h.url,v)},onTimeout:(d,h,p)=>{this.log(`Timeout loading steering manifest (${h.url})`),this.scheduleRefresh(this.uri||h.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(a,c,u)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function ZU(t,e,n,r){t&&Object.keys(e).forEach(i=>{const a=t.filter(s=>s.groupId===i).map(s=>{const o=ut({},s);return o.details=void 0,o.attrs=new Ct(o.attrs),o.url=o.attrs.URI=kG(s.url,s.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=r,o});t.push(...a)})}function kG(t,e,n,r){const{HOST:i,PARAMS:a,[n]:s}=r;let o;e&&(o=s==null?void 0:s[e],o&&(t=o));const c=new self.URL(t);return i&&!o&&(c.host=i),a&&Object.keys(a).sort().forEach(u=>{u&&c.searchParams.set(u,a[u])}),c.href}function Lr(t,e,n){Zr(t,e,n),t.addEventListener(e,n)}function Zr(t,e,n){t.removeEventListener(e,n)}class pl extends ri{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=pl.CDMCleanupPromise?[pl.CDMCleanupPromise]:[],this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(D.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(D.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,i=n[e];if(i)return i.licenseUrl;if(e===Ft.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const n=this.getLicenseServerUrl(e);if(n===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return n}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(s,o,c)=>!!s&&c.indexOf(s)===o,i=n.map(s=>s.audioCodec).filter(r),a=n.map(s=>s.videoCodec).filter(r);return i.length+a.length===0&&a.push("avc1.42e01e"),new Promise((s,o)=>{const c=u=>{const d=u.shift();this.getMediaKeysPromise(d,i,a).then(h=>s({keySystem:d,mediaKeys:h})).catch(h=>{u.length?c(u):h instanceof _r?o(h):o(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_ACCESS,error:h,fatal:!0},h.message))})};c(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return J8===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,n)}getMediaKeysPromise(e,n,r){const i=ive(e,n,r,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e];let s=a==null?void 0:a.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Et(i)}`),s=this.requestMediaKeySystemAccess(e,i);const o=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),s.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const u=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=c.createMediaKeys().then(d=>(this.log(`Media-keys created for "${e}"`),o.hasMediaKeys=!0,u.then(h=>h?this.setMediaKeysServerCertificate(d,e,h):d))),o.mediaKeys.catch(d=>{this.error(`Failed to create media-keys for "${e}"}: ${d}`)}),o.mediaKeys})}return s.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${Ns.hexDump(e.keyId||[])}`);const i=r.createSession(),a={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(n),a="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,a,n.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Ns.hexDump(e.keyId)}updateKeySession(e,n){var r;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${Ns.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),i.update(n)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>AU(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:n,mediaKeys:r})=>this.attemptSetMediaKeys(n,r))}selectKeySystem(e){return new Promise((n,r)=>this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const a=AU(i);a?n(a):r(new Error(`Unable to find format for key-system "${i}"`))}).catch(r))}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){const n=hm(this.config),r=e.map($A).filter(i=>!!i&&n.indexOf(i)!==-1);return this.selectKeySystem(r)}loadKey(e){const n=e.keyInfo.decryptdata,r=this.getKeyIdString(n),i=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${i}`);let a=this.keyIdToKeySessionPromise[r];return a||(a=this.getKeySystemForKeyPromise(n).then(({keySystem:o,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(o,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:o,mediaKeys:c,decryptdata:n}))))),(this.keyIdToKeySessionPromise[r]=a.then(o=>{const c="cenc",u=n.pssh?n.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(o,c,u,"playlist-key")})).catch(o=>this.handleError(o))),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof _r?this.hls.trigger(D.ERROR,e.data):this.hls.trigger(D.ERROR,{type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[n];if(!r){const i=$A(e.keyFormat),a=i?[i]:hm(this.config);return this.attemptKeySystemAccess(a)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=hm(this.config)),e.length===0)throw new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Et({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,n){if(this.mediaKeys===n)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.mediaKeys=n,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(a=>r.indexOf(a)===-1)})}generateRequestWithPreferredKeySession(e,n,r,i){var a,s;const o=(a=this.config.drmSystems)==null||(s=a[e.keySystem])==null?void 0:s.generateRequest;if(o)try{const v=o.call(this.hls,n,r,e);if(!v)throw new Error("Invalid response from configured generateRequest filter");n=v.initDataType,r=v.initData?v.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(v){var c;if(this.warn(v.message),(c=this.hls)!=null&&c.config.debug)throw v}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const u=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${u} (init data type: ${n} length: ${r?r.byteLength:null})`);const d=new i_,h=e._onmessage=v=>{const x=e.mediaKeysSession;if(!x){d.emit("error",new Error("invalid state"));return}const{messageType:b,message:T}=v;this.log(`"${b}" message event for session "${x.sessionId}" message size: ${T.byteLength}`),b==="license-request"||b==="license-renewal"?this.renewLicense(e,T).catch(_=>{d.eventNames().length?d.emit("error",_):this.handleError(_)}):b==="license-release"?e.keySystem===Ft.FAIRPLAY&&(this.updateKeySession(e,FA("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${b}"`)},p=e._onkeystatuseschange=v=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const b=e.keyStatus;d.emit("keyStatus",b),b==="expired"&&(this.warn(`${e.keySystem} expired for key ${u}`),this.renewKeySession(e))};Lr(e.mediaKeysSession,"message",h),Lr(e.mediaKeysSession,"keystatuseschange",p);const y=new Promise((v,x)=>{d.on("error",x),d.on("keyStatus",b=>{b.startsWith("usable")?v():b==="output-restricted"?x(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):b==="internal-error"?x(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${b}"`)):b==="expired"?x(new Error("key expired while generating request")):this.warn(`unhandled key status change "${b}"`)})});return e.mediaKeysSession.generateRequest(n,r).then(()=>{var v;this.log(`Request generated for key-session "${(v=e.mediaKeysSession)==null?void 0:v.sessionId}" keyId: ${u}`)}).catch(v=>{throw new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_SESSION,error:v,fatal:!1},`Error generating key-session request: ${v}`)}).then(()=>y).catch(v=>{throw d.removeAllListeners(),this.removeSession(e),v}).then(()=>(d.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,r)=>{if(typeof r=="string"&&typeof n=="object"){const i=r;r=n,n=i}this.log(`key status change "${n}" for keyStatuses keyId: ${Ns.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${Ns.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,r=n.loader,i=new r(n),a=this.getServerCertificateUrl(e);return a?(this.log(`Fetching server certificate for "${e}"`),new Promise((s,o)=>{const c={responseType:"arraybuffer",url:a},u=n.certLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,y,v,x)=>{s(p.data)},onError:(p,y,v,x)=>{o(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:ht({url:c.url,data:void 0},p)},`"${e}" certificate request failed (${a}). Status: ${p.code} (${p.text})`))},onTimeout:(p,y,v)=>{o(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:c.url,data:void 0}},`"${e}" certificate request timed out (${a})`))},onAbort:(p,y,v)=>{o(new Error("aborted"))}};i.load(c,d,h)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((i,a)=>{e.setServerCertificate(r).then(s=>{this.log(`setServerCertificate ${s?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),i(e)}).catch(s=>{a(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:s,fatal:!0},s.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const i=new DOMParser().parseFromString(r,"application/xml"),a=i.querySelectorAll("HttpHeader");if(a.length>0){let d;for(let h=0,p=a.length;h<p;h++){var s,o;d=a[h];const y=(s=d.querySelector("name"))==null?void 0:s.textContent,v=(o=d.querySelector("value"))==null?void 0:o.textContent;y&&v&&e.setRequestHeader(y,v)}}const c=i.querySelector("Challenge"),u=c==null?void 0:c.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return FA(atob(u))}setupLicenseXHR(e,n,r,i){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return a.call(this.hls,e,n,r,i)}).catch(s=>{if(!r.decryptdata)throw s;return e.open("POST",n,!0),a.call(this.hls,e,n,r,i)}).then(s=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:s||i})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((i,a)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${s}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let c=o.response;this.log(`License received ${c instanceof ArrayBuffer?c.byteLength:c}`);const u=this.config.licenseResponseCallback;if(u)try{c=u.call(this.hls,o,s,e)}catch(d){this.error(d)}i(c)}else{const c=r.errorRetry,u=c?c.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||o.status>=400&&o.status<500)a(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${s}). Status: ${o.status} (${o.statusText})`));else{const d=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${d} attempts left`),this.requestLicense(e,n).then(i,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,s,e,n).then(({xhr:c,licenseChallenge:u})=>{e.keySystem==Ft.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(c,u)),c.send(u)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,Lr(r,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Zr(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Pg.clearKeyUriToKeyIdMap();const i=r.length;pl.CDMCleanupPromise=Promise.all(r.map(a=>this.removeSession(a)).concat(n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(a=>{var s;this.log(`Could not clear media keys: ${a}`),(s=this.hls)==null||s.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${a}`)})}))).catch(a=>{var s;this.log(`Could not close sessions and clear media keys: ${a}`),(s=this.hls)==null||s.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${a}`)})}).then(()=>{i&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((i,a)=>(i.indexOf(a.keyFormat)===-1&&i.push(a.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{drmSystemOptions:a}=this.config;return(sve(a)?new Promise((o,c)=>{self.setTimeout(()=>c(new Error("MediaKeySession.remove() timeout")),8e3),n.remove().then(o)}):Promise.resolve()).catch(o=>{var c;this.log(`Could not remove session: ${o}`),(c=this.hls)==null||c.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${o}`)})}).then(()=>n.close()).catch(o=>{var c;this.log(`Could not close session: ${o}`),(c=this.hls)==null||c.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${o}`)})})}}}pl.CDMCleanupPromise=void 0;class _r extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}class mxe{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(D.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(D.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,n,r){const i=performance.now();if(n){if(this.lastTime){const a=i-this.lastTime,s=r-this.lastDroppedFrames,o=n-this.lastDecodedFrames,c=1e3*s/a,u=this.hls;if(u.trigger(D.FPS_DROP,{currentDropped:s,currentDecoded:o,totalDroppedFrames:r}),c>0&&s>u.config.fpsDroppedMonitoringThreshold*o){let d=u.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=d)&&(d=d-1,u.trigger(D.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function jG(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function UG(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){Ze.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){Ze.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}n==="disabled"&&(t.mode=n)}function ul(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues)for(let r=t.cues.length;r--;)e&&t.cues[r].removeEventListener("enter",e),t.removeCue(t.cues[r]);n==="disabled"&&(t.mode=n)}function WA(t,e,n,r){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const a=gxe(t.cues,e,n);for(let s=0;s<a.length;s++)(!r||r(a[s]))&&t.removeCue(a[s])}i==="disabled"&&(t.mode=i)}function pxe(t,e){if(e<=t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,i=n,a;for(;r<=i;)if(a=Math.floor((i+r)/2),e<t[a].startTime)i=a-1;else if(e>t[a].startTime&&r<n)r=a+1;else return a;return t[r].startTime-e<e-t[i].startTime?r:i}function gxe(t,e,n){const r=[],i=pxe(t,e);if(i>-1)for(let a=i,s=t.length;a<s;a++){const o=t[a];if(o.startTime>=e&&o.endTime<=n)r.push(o);else if(o.startTime>n)return r}return r}function ym(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}class yxe extends f_{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=ym(this.media.textTracks);for(let a=0;a<r.length;a++)if(r[a].mode==="hidden")n=r[a];else if(r[a].mode==="showing"){n=r[a];break}const i=this.findTrackForTextTrack(n);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,n){const r=this.media;if(!r)return;const i=!!n.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;ym(r.textTracks).forEach(s=>{ul(s)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,groupId:i,details:a}=n,s=this.tracksInGroup[r];if(!s||s.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${s==null?void 0:s.groupId}`);return}const o=s.details;s.details=n.details,this.log(`Subtitle track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,o)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.subtitleGroups||null,i=this.groupIds;let a=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(s=>(i==null?void 0:i.indexOf(s))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const s=this.tracks.filter(d=>!r||r.indexOf(d.groupId)!==-1);if(s.length)this.selectDefaultTrack&&!s.some(d=>d.default)&&(this.selectDefaultTrack=!1),s.forEach((d,h)=>{d.id=h});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=s;const o=this.hls.config.subtitlePreference;if(!a&&o){this.selectDefaultTrack=!1;const d=yi(o,s);if(d>-1)a=s[d];else{const h=yi(o,this.tracks);a=this.tracks[h]}}let c=this.findTrackId(a);c===-1&&a&&(c=this.findTrackId(null));const u={subtitleTracks:s};this.log(`Updating subtitle tracks, ${s.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(D.SUBTITLE_TRACKS_UPDATED,u),c!==-1&&this.trackId===-1&&this.setSubtitleTrack(c)}}findTrackId(e){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<n.length;i++){const a=n[i];if(!(r&&!a.default||!r&&!e)&&(!e||Ks(a,e)))return i}if(e){for(let i=0;i<n.length;i++){const a=n[i];if(jf(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<n.length;i++){const a=n[i];if(jf(e.attrs,a.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(zA(i,e))return r}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===He.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&Ks(e,r))return r;const i=yi(e,this.tracksInGroup);if(i>-1){const a=this.tracksInGroup[i];return this.setSubtitleTrack(i),a}else{if(r)return null;{const a=yi(e,n);if(a>-1)return n[a]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,n),s=e.details,o=s==null?void 0:s.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger(D.SUBTITLE_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:n||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=ym(e.textTracks),r=this.currentTrack;let i;if(r&&(i=n.filter(a=>zA(r,a))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(a=>{a.mode!=="disabled"&&a!==i&&(a.mode="disabled")}),i){const a=this.subtitleDisplay?"showing":"hidden";i.mode!==a&&(i.mode=a)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!be(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:e});return}const a=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&a)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:o="",name:c,type:u,url:d}=i;this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:s,groupId:o,name:c,type:u,url:d});const h=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(h)}}function vxe(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const a=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(i=="x"?a:a&3|8).toString(16)})}}}function Uc(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0).toString()}const gl=.025;let Up=function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t}({});function bxe(t,e,n){return`${t.identifier}-${n+1}-${Uc(e)}`}class xxe{constructor(e,n){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=n,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var n;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return e<=0||isNaN(r)?!1:r===0?!0:(((n=this.assetList[e])==null?void 0:n.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const n=this.dateRange.tagAnchor;if(n)return PE(e,n)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const n=this.dateRange.startTime,r=PE(n,e);return n-r<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,n=be(e)?e:this.duration;return this.cumulativeDuration+n}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const n=this.resumeAnchor;if(n)return PE(e,n)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<gl))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let n;return this._duration!==null?n=this._duration:this.dateRange.duration?n=this.dateRange.duration:n=this.dateRange.plannedDuration||0,!isNaN(e)&&e<n&&(n=e),n}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Up.Range:Up.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return Sxe(this)}}function PE(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<gl)?e.start:e.start+e.duration}function BG(t,e,n){const r=new self.URL(t,n);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",e),r}function NE(t,e){for(;(n=t.assetList[++e])!=null&&n.error;)var n;return e}function Sxe(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function el(t){const e=t.timelineStart,n=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+n).toFixed(2)}]`}class Exe{constructor(e,n,r,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(D.PLAYOUT_LIMIT_REACHED,{})};const a=this.hls=new e(n);this.interstitial=r,this.assetItem=i;let s=i.uri;try{s=BG(s,n.primarySessionId).href}catch{}a.loadSource(s);const o=()=>{this.hasDetails=!0};a.once(D.LEVEL_LOADED,o),a.once(D.AUDIO_TRACK_LOADED,o),a.once(D.SUBTITLE_TRACK_LOADED,o),a.on(D.MEDIA_ATTACHING,(c,{media:u})=>{this.removeMediaListeners(),this.mediaAttached=u,this.interstitial.playoutLimit&&(u.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&a.on(D.BUFFER_APPENDED,()=>{const h=this.bufferedEnd;this.reachedPlayout(h)&&(this._bufferedEosTime=h,a.trigger(D.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var e;return((e=this.interstitial)==null?void 0:e.appendInPlace)||!1}bufferedInPlaceToEnd(e){var n;if(!this.appendInPlace)return!1;if((n=this.hls)!=null&&n.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const r=this.timelineOffset,i=ke.bufferInfo(e,r,0);return this.getAssetTime(i.end)>=this._bufferedEosTime-.02}reachedPlayout(e){const r=this.interstitial.playoutLimit;return this.startOffset+e>=r}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const n=ke.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(n.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const n=this.timelineOffset;if(e!==n){const r=e-n;if(Math.abs(r)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const n=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-n),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const e=this.hls;if(this.hasDetails){e.stopLoad();const n=r=>delete r.details;e.levels.forEach(n),e.allAudioTracks.forEach(n),e.allSubtitleTracks.forEach(n),this.hasDetails=!1}}on(e,n,r){this.hls.on(e,n)}once(e,n,r){this.hls.once(e,n)}off(e,n,r){this.hls.off(e,n)}toString(){var e;return`HlsAssetPlayer: ${el(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const JU=.033;class Txe extends ri{constructor(e,n){super("interstitials-sched",n),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,n){return this.events?this.events.reduce((r,i)=>e<=i.startOffset&&n>i.startOffset?(delete i.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,n){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[r]||(n===void 0&&(n=e.start),r=this.findItemIndexAtTime(n));r>=0&&(a=i[r])!=null&&a.event;){var a;r--}return r}findItemIndexAtTime(e,n){const r=this.items;if(r)for(let i=0;i<r.length;i++){let a=r[i];if(n&&n!=="primary"&&(a=a[n]),e===a.start||e>a.start&&e<a.end)return i}return-1}findJumpRestrictedIndex(e,n){const r=this.items;if(r)for(let i=e;i<=n&&r[i];i++){const a=r[i].event;if(a!=null&&a.restrictions.jump&&!a.appendInPlace)return i}return-1}findEventIndex(e){const n=this.items;if(n)for(let i=n.length;i--;){var r;if(((r=n[i].event)==null?void 0:r.identifier)===e)return i}return-1}findAssetIndex(e,n){const r=e.assetList,i=r.length;if(i>1)for(let a=0;a<i;a++){const s=r[a];if(!s.error){const o=s.timelineStart;if(n===o||n>o&&n<o+(s.duration||0))return a}}return 0}get assetIdAtEnd(){var e,n;const r=(e=this.items)==null||(n=e[this.length-1])==null?void 0:n.event;if(r){const i=r.assetList,a=i[i.length-1];if(a)return a.identifier}return null}parseInterstitialDateRanges(e,n){const r=e.main.details,{dateRanges:i}=r,a=this.events,s=this.parseDateRanges(i,{url:r.url},n),o=Object.keys(i),c=a?a.filter(u=>!o.includes(u.identifier)):[];s.length&&s.sort((u,d)=>{const h=u.cue.pre,p=u.cue.post,y=d.cue.pre,v=d.cue.post;if(h&&!y)return-1;if(y&&!h||p&&!v)return 1;if(v&&!p)return-1;if(!h&&!y&&!p&&!v){const x=u.startTime,b=d.startTime;if(x!==b)return x-b}return u.dateRange.tagOrder-d.dateRange.tagOrder}),this.events=s,c.forEach(u=>{this.removeEvent(u)}),this.updateSchedule(e,c)}updateSchedule(e,n=[]){const r=this.events||[];if(r.length||n.length||this.length<2){const i=this.items,a=this.parseSchedule(r,e);(n.length||(i==null?void 0:i.length)!==a.length||a.some((o,c)=>Math.abs(o.playout.start-i[c].playout.start)>.005||Math.abs(o.playout.end-i[c].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(n,i))}}parseDateRanges(e,n,r){const i=[],a=Object.keys(e);for(let s=0;s<a.length;s++){const o=a[s],c=e[o];if(c.isInterstitial){let u=this.eventMap[o];u?u.setDateRange(c):(u=new xxe(c,n),this.eventMap[o]=u,r===!1&&(u.appendInPlace=r)),i.push(u)}}return i}parseSchedule(e,n){const r=[],i=n.main.details,a=i.live?1/0:i.edge;let s=0;if(e=e.filter(c=>!c.error&&!(c.cue.once&&c.hasPlayed)),e.length){this.resolveOffsets(e,n);let c=0,u=0;if(e.forEach((d,h)=>{const p=d.cue.pre,y=d.cue.post,v=e[h-1]||null,x=d.appendInPlace,b=y?a:d.startOffset,T=d.duration,_=d.timelineOccupancy===Up.Range?T:0,w=d.resumptionOffset,O=(v==null?void 0:v.startTime)===b,R=b+d.cumulativeDuration;let C=x?R+T:b+w;if(p||!y&&b<=0){const P=u;u+=_,d.timelineStart=R;const N=s;s+=T,r.push({event:d,start:R,end:C,playout:{start:N,end:s},integrated:{start:P,end:u}})}else if(b<=a){if(!O){const k=b-c;if(k>JU){const M=c,$=u;u+=k;const K=s;s+=k;const W={previousEvent:e[h-1]||null,nextEvent:d,start:M,end:M+k,playout:{start:K,end:s},integrated:{start:$,end:u}};r.push(W)}else k>0&&v&&(v.cumulativeDuration+=k,r[r.length-1].end=b)}y&&(C=R),d.timelineStart=R;const P=u;u+=_;const N=s;s+=T,r.push({event:d,start:R,end:C,playout:{start:N,end:s},integrated:{start:P,end:u}})}else return;const L=d.resumeTime;y||L>a?c=a:c=L}),c<a){var o;const d=c,h=u,p=a-c;u+=p;const y=s;s+=p,r.push({previousEvent:((o=r[r.length-1])==null?void 0:o.event)||null,nextEvent:null,start:c,end:d+p,playout:{start:y,end:s},integrated:{start:h,end:u}})}this.setDurations(a,s,u)}else r.push({previousEvent:null,nextEvent:null,start:0,end:a,playout:{start:0,end:a},integrated:{start:0,end:a}}),this.setDurations(a,a,a);return r}setDurations(e,n,r){this.durations={primary:e,playout:n,integrated:r}}resolveOffsets(e,n){const r=n.main.details,i=r.live?1/0:r.edge;let a=0,s=-1;e.forEach((o,c)=>{const u=o.cue.pre,d=o.cue.post,h=u?0:d?i:o.startTime;this.updateAssetDurations(o),s===h?o.cumulativeDuration=a:(a=0,s=h),!d&&o.snapOptions.in&&(o.resumeAnchor=eo(null,r.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,n)||(o.appendInPlace=!1)),!o.appendInPlace&&c+1<e.length&&e[c+1].startTime-e[c].resumeTime<JU&&(e[c+1].appendInPlace=!1,e[c+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const y=be(o.resumeOffset)?o.resumeOffset:o.duration;a+=y})}primaryCanResumeInPlaceAt(e,n){const r=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(r-i)>gl?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${i}`),!1):n?!Object.keys(n).some(s=>{const o=n[s].details,c=o.edge;if(r>=c)return this.log(`"${e.identifier}" resumption ${r} past ${s} playlist end ${c}`),!1;const u=eo(null,o.fragments,r);if(!u)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${s} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const d=s==="audio"?.175:0;return Math.abs(u.start-r)<gl+d||Math.abs(u.end-r)<gl+d?!1:(this.log(`"${e.identifier}" resumption ${r} not aligned with ${s} fragment bounds (${u.start}-${u.end} sn: ${u.sn} cc: ${u.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${r} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const n=e.timelineStart;let r=0,i=!1,a=!1;e.assetList.forEach((s,o)=>{const c=n+r;s.startOffset=r,s.timelineStart=c,i||(i=s.duration===null),a||(a=!!s.error);const u=s.error?0:s.duration||0;r+=u}),i&&!a?e.duration=Math.max(r,e.duration):e.duration=r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Ba(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class Axe{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,n){const r=e.assetListUrl;let i;try{i=BG(r,this.hls.sessionId,e.baseUrl)}catch(p){const y=this.assignAssetListError(e,re.ASSET_LIST_LOAD_ERROR,p,r);this.hls.trigger(D.ERROR,y);return}n&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+n);const a=this.hls.config,s=a.loader,o=new s(a),c={responseType:"json",url:i.href},u=a.interstitialAssetListLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,y,v,x)=>{const b=p.data,T=b==null?void 0:b.ASSETS;if(!Array.isArray(T)){const _=this.assignAssetListError(e,re.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),v.url,y,x);this.hls.trigger(D.ERROR,_);return}e.assetListResponse=b,this.hls.trigger(D.ASSET_LIST_LOADED,{event:e,assetListResponse:b,networkDetails:x})},onError:(p,y,v,x)=>{const b=this.assignAssetListError(e,re.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${p.code} ${p.text} (${y.url})`),y.url,x,v);this.hls.trigger(D.ERROR,b)},onTimeout:(p,y,v)=>{const x=this.assignAssetListError(e,re.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${y.url})`),y.url,p,v);this.hls.trigger(D.ERROR,x)}};return o.load(c,d,h),this.hls.trigger(D.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,n,r,i,a,s){return e.error=r,{type:Te.NETWORK_ERROR,details:n,fatal:!1,interstitial:e,url:i,error:r,networkDetails:s,stats:a}}}function eB(t){t==null||t.play().catch(()=>{})}class wxe extends ri{constructor(e,n){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;const i=r-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const s=i<=-.01;this.timelinePos=r,this.bufferedPos=r;const o=this.playingItem;if(!o){this.checkBuffer();return}if(s&&this.schedule.resetErrorsInRange(r,r-i)&&this.updateSchedule(),this.checkBuffer(),s&&r<o.start||r>=o.end){var c;const p=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(o)&&(c=this.media)!=null&&c.paused&&(this.shouldPlay=!1),!s){const y=this.findItemIndex(o);if(p>y){const v=this.schedule.findJumpRestrictedIndex(y+1,p);if(v>y){this.setSchedulePosition(v);return}}}this.setSchedulePosition(p);return}const u=this.playingAsset;if(!u){if(this.playingLastItem&&this.isInterstitial(o)){const p=o.event.assetList[0];p&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,p))}return}const d=u.timelineStart,h=u.duration||0;(s&&r<d||r>=d+h)&&this.setScheduleToAssetAtTime(r,u)},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(r>=i.end){this.timelinePos=i.end;const o=this.findItemIndex(i);this.setSchedulePosition(o+1)}const a=this.playingAsset;if(!a)return;const s=a.timelineStart+(a.duration||0);r>=s&&this.setScheduleToAssetAtTime(r,a)},this.onScheduleUpdate=(r,i)=>{const a=this.schedule,s=this.playingItem,o=a.events||[],c=a.items||[],u=a.durations,d=r.map(v=>v.identifier),h=!!(o.length||d.length);(h||i)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${c.map(v=>Ba(v))} pos: ${this.timelinePos}`),d.length&&this.log(`Removed events ${d}`),this.playerQueue.forEach(v=>{if(v.interstitial.appendInPlace){const x=v.assetItem.timelineStart,b=v.timelineOffset-x;if(b)try{v.timelineOffset=x}catch(T){Math.abs(b)>gl&&this.warn(`${T} ("${v.assetId}" ${v.timelineOffset}->${x})`)}}});let p=null;if(s){const v=this.updateItem(s,this.timelinePos);this.itemsMatch(s,v)&&(this.playingItem=v,this.waitingItem=this.endedItem=null,p=()=>this.trimInPlace(v,s))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y){const v=this.updateItem(y,this.bufferedPos);this.itemsMatch(y,v)?(this.bufferingItem=v,p||(p=()=>this.trimInPlace(v,y))):y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))}if(r.forEach(v=>{v.assetList.forEach(x=>{this.clearAssetPlayer(x.identifier,null)})}),h||i){if(this.hls.trigger(D.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:c.slice(0),durations:u,removedIds:d}),this.isInterstitial(s)&&d.includes(s.event.identifier)){this.warn(`Interstitial "${s.event.identifier}" removed while playing`),this.primaryFallback(s.event);return}p&&p(),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=n,this.assetListLoader=new Axe(e),this.schedule=new Txe(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(D.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(D.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(D.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(D.MEDIA_ENDED,this.onMediaEnded,this),e.on(D.ERROR,this.onError,this),e.on(D.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(D.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(D.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(D.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(D.MEDIA_ENDED,this.onMediaEnded,this),e.off(D.ERROR,this.onError,this),e.off(D.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Zr(e,"play",this.onPlay),Zr(e,"pause",this.onPause),Zr(e,"seeking",this.onSeeking),Zr(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,n){const r=this.media=n.media;Lr(r,"seeking",this.onSeeking),Lr(r,"timeupdate",this.onTimeupdate),Lr(r,"play",this.onPlay),Lr(r,"pause",this.onPause)}onMediaAttached(e,n){const r=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!i){this.clearScheduleState();const a=this.findItemIndex(r);this.setSchedulePosition(a)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,n){const r=!!n.transferMedia,i=this.media;if(this.media=null,!r&&(i&&this.removeMediaListeners(i),this.detachedData)){const a=this.getBufferingPlayer();a&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,a.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,n=()=>e.bufferingItem||e.waitingItem,r=h=>h&&e.getAssetPlayer(h.identifier),i=(h,p,y,v,x)=>{if(h){let b=h[p].start;const T=h.event;if(T){if(p==="playout"||T.timelineOccupancy!==Up.Point){const _=r(y);(_==null?void 0:_.interstitial)===T&&(b+=_.assetItem.startOffset+_[x])}}else{const _=v==="bufferedPos"?s():e[v];b+=_-h.start}return b}return 0},a=(h,p)=>{if(h!==0&&p!=="primary"&&e.schedule.length){var y;const v=e.schedule.findItemIndexAtTime(h),x=(y=e.schedule.items)==null?void 0:y[v];if(x){const b=x[p].start-x.start;return h+b}}return h},s=()=>{const h=e.bufferedPos;return h===Number.MAX_VALUE?o("primary"):Math.max(h,0)},o=h=>{var p;return(p=e.primaryDetails)!=null&&p.live?e.primaryDetails.edge:e.schedule.durations[h]},c=(h,p)=>{var y,v;const x=e.effectivePlayingItem;if(x!=null&&(y=x.event)!=null&&y.restrictions.skip)return;e.log(`seek to ${h} "${p}"`);const b=e.effectivePlayingItem,T=e.schedule.findItemIndexAtTime(h,p),_=(v=e.schedule.items)==null?void 0:v[T],w=e.getBufferingPlayer(),O=w==null?void 0:w.interstitial,R=O==null?void 0:O.appendInPlace,C=b&&e.itemsMatch(b,_);if(b&&(R||C)){const P=r(e.playingAsset),N=(P==null?void 0:P.media)||e.primaryMedia;if(N){const k=p==="primary"?N.currentTime:i(b,p,e.playingAsset,"timelinePos","currentTime"),M=h-k,$=(R?k:N.currentTime)+M;if($>=0&&(!P||R||$<=P.duration)){N.currentTime=$;return}}}if(_){let P=h;if(p!=="primary"){const k=_[p].start,M=h-k;P=_.start+M}const N=!e.isInterstitial(_);if((!e.isInterstitial(b)||b.event.appendInPlace)&&(N||_.event.appendInPlace)){const k=e.media||(R?w==null?void 0:w.media:null);k&&(k.currentTime=P)}else if(b){const k=e.findItemIndex(b);if(T>k){const $=e.schedule.findJumpRestrictedIndex(k+1,T);if($>k){e.setSchedulePosition($);return}}let M=0;if(N)e.timelinePos=P,e.checkBuffer();else{var L;const $=_==null||(L=_.event)==null?void 0:L.assetList;if($){const K=h-(_[p]||_).start;for(let W=$.length;W--;){const Y=$[W];if(Y.duration&&K>=Y.startOffset&&K<Y.startOffset+Y.duration){M=W;break}}}}e.setSchedulePosition(T,M)}}},u=()=>{const h=e.effectivePlayingItem;if(e.isInterstitial(h))return h;const p=n();return e.isInterstitial(p)?p:null},d={get currentTime(){const h=u(),p=e.effectivePlayingItem;return p&&p===h?i(p,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-p.playout.start:0},set currentTime(h){const p=u(),y=e.effectivePlayingItem;y&&y===p&&c(h+y.playout.start,"playout")},get duration(){const h=u();return h?h.playout.end-h.playout.start:0},get assetPlayers(){var h;const p=(h=u())==null?void 0:h.event.assetList;return p?p.map(y=>e.getAssetPlayer(y.identifier)):[]},get playingIndex(){var h;const p=(h=u())==null?void 0:h.event;return p&&e.effectivePlayingAsset?p.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return u()}};this.manager={get events(){var h,p;return((h=e.schedule)==null||(p=h.events)==null?void 0:p.slice(0))||[]},get schedule(){var h,p;return((h=e.schedule)==null||(p=h.items)==null?void 0:p.slice(0))||[]},get interstitialPlayer(){return u()?d:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return n()},get bufferingIndex(){const h=n();return e.findItemIndex(h)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const h=e.effectivePlayingItem;return e.findItemIndex(h)},primary:{get bufferedEnd(){return s()},get currentTime(){const h=e.timelinePos;return h>0?h:0},set currentTime(h){c(h,"primary")},get duration(){return o("primary")},get seekableStart(){var h;return((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(n(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(h){c(h,"integrated")},get duration(){return o("integrated")},get seekableStart(){var h;return a(((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0,"integrated")}},skip:()=>{const h=e.effectivePlayingItem,p=h==null?void 0:h.event;if(p&&!p.restrictions.skip){const y=e.findItemIndex(h);if(p.appendInPlace){const v=h.playout.start+h.event.duration;c(v+.001,"playout")}else e.advanceAfterAssetEnded(p,y,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const n=this.playingItem,r=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!n||!r?!1:this.findItemIndex(n)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,n,r;if(this.mediaSelection===null)return;const i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let a=this.media;!a&&(e=this.bufferingItem)!=null&&(n=e.event)!=null&&n.appendInPlace&&(a=this.primaryMedia);const s=(r=a)==null?void 0:r.currentTime;if(!(s===void 0||!be(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,n){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,n)}transferMediaFromPlayer(e,n){const r=e.interstitial.appendInPlace,i=e.media;if(r&&i===this.primaryMedia){if(this.bufferingAsset=null,(!n||this.isInterstitial(n)&&!n.event.appendInPlace)&&n&&i){this.detachedData={media:i};return}const a=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Et(a)}`),this.detachedData=a}else n&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,n){var r,i;if(e.media===n)return;let a=null;const s=this.hls,o=e!==s,c=o&&e.interstitial.appendInPlace,u=(r=this.detachedData)==null?void 0:r.mediaSource;let d;if(s.media)c&&(a=s.transferMedia(),this.detachedData=a),d="Primary";else if(u){const y=this.getBufferingPlayer();y?(a=y.transferMedia(),d=`${y}`):d="detached MediaSource"}else d="detached media";if(!a){if(u)a=this.detachedData,this.log(`using detachedData: MediaSource ${Et(a)}`);else if(!this.detachedData||s.media===n){const y=this.playerQueue;y.length>1&&y.forEach(v=>{if(o&&v.interstitial.appendInPlace!==c){const x=v.interstitial;this.clearInterstitial(v.interstitial,null),x.appendInPlace=!1,x.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${x}`)}}),this.hls.detachMedia(),this.detachedData={media:n}}}const h=a&&"mediaSource"in a&&((i=a.mediaSource)==null?void 0:i.readyState)!=="closed",p=h&&a?a:n;if(this.log(`${h?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${d}`),p===a){const y=o&&e.assetId===this.schedule.assetIdAtEnd;p.overrides={duration:this.schedule.duration,endOfStream:!o||y,cueRemoval:!o}}e.attachMedia(p)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,n=e.events;if(!n||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,i=this.effectivePlayingItem;if(r===-1){const a=this.hls.startPosition;if(this.timelinePos=a,n.length&&n[0].cue.pre){const s=e.findEventIndex(n[0].identifier);this.setSchedulePosition(s)}else if(a>=0||!this.primaryLive){const s=this.timelinePos=a>0?a:0,o=e.findItemIndexAtTime(s);this.setSchedulePosition(o)}}else if(i&&!this.playingItem){const a=e.findItemIndex(i);this.setSchedulePosition(a)}}advanceAfterAssetEnded(e,n,r){const i=NE(e,r);if(!e.isAssetPastPlayoutLimit(i))this.setSchedulePosition(n,i);else{const a=this.schedule.items;if(a){const s=n+1,o=a.length;if(s>=o){this.setSchedulePosition(-1);return}const c=e.resumeTime;this.timelinePos<c&&(this.timelinePos=c,this.checkBuffer()),this.setSchedulePosition(s)}}}setScheduleToAssetAtTime(e,n){const r=this.schedule,i=n.parentIdentifier,a=r.getEvent(i);if(a){const s=r.findEventIndex(i),o=r.findAssetIndex(a,e);this.advanceAfterAssetEnded(a,s,o-1)}}setSchedulePosition(e,n){const r=this.schedule.items;if(!r||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${n}`);const i=e>=0?r[e]:null,a=this.playingItem,s=this.playingLastItem;if(this.isInterstitial(a)){var o;const u=a.event,d=this.playingAsset,h=d==null?void 0:d.identifier,p=h?this.getAssetPlayer(h):null;if(p&&h&&(!this.eventItemsMatch(a,i)||n!==void 0&&h!==((o=u.assetList)==null?void 0:o[n].identifier))){var c;const y=u.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${u.assetList.length} ${el(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(D.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:y,event:u,schedule:r.slice(0),scheduleIndex:e,player:p}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(u,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(h,i),p.media&&!((c=this.detachedData)!=null&&c.mediaSource)&&p.detachMedia()}if(!this.eventItemsMatch(a,i)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${u} ${Ba(a)}`),u.hasPlayed=!0,this.hls.trigger(D.INTERSTITIAL_ENDED,{event:u,schedule:r.slice(0),scheduleIndex:e}),u.cue.once)){this.updateSchedule();const y=this.schedule.items;if(i&&y){const v=this.findItemIndex(i);this.advanceSchedule(v,y,n,a,s)}return}}this.advanceSchedule(e,r,n,a,s)}advanceSchedule(e,n,r,i,a){const s=e>=0?n[e]:null,o=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(u=>{const d=u.interstitial,h=this.schedule.findEventIndex(d.identifier);(h<e||h>e+1)&&this.clearInterstitial(d,s)}),this.isInterstitial(s)){this.timelinePos=Math.min(Math.max(this.timelinePos,s.start),s.end);const u=s.event;if(r===void 0){r=this.schedule.findAssetIndex(u,this.timelinePos);const y=NE(u,r-1);if(u.isAssetPastPlayoutLimit(y)){this.advanceAfterAssetEnded(u,e,r);return}r=y}const d=this.waitingItem;this.assetsBuffered(s,o)||this.setBufferingItem(s);let h=this.preloadAssets(u,r);if(this.eventItemsMatch(s,d||i)||(this.waitingItem=s,this.log(`INTERSTITIAL_STARTED ${Ba(s)} ${u.appendInPlace?"append in place":""}`),this.hls.trigger(D.INTERSTITIAL_STARTED,{event:u,schedule:n.slice(0),scheduleIndex:e})),!u.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${u}`);return}if(u.assetListLoader&&(u.assetListLoader.destroy(),u.assetListLoader=void 0),!o){this.log(`Waiting for attachMedia to start Interstitial ${u}`);return}this.waitingItem=this.endedItem=null,this.playingItem=s;const p=u.assetList[r];if(!p){const y=n[e+1],v=this.media;y&&v&&!this.isInterstitial(y)&&v.currentTime<y.start&&(v.currentTime=this.timelinePos=y.start),this.advanceAfterAssetEnded(u,e,r||0);return}if(h||(h=this.getAssetPlayer(p.identifier)),h===null||h.destroyed){const y=u.assetList.length;this.warn(`asset ${r+1}/${y} player destroyed ${u}`),h=this.createAssetPlayer(u,p,r)}if(!this.eventItemsMatch(s,this.bufferingItem)&&u.appendInPlace&&this.isAssetBuffered(p))return;this.startAssetPlayer(h,r,n,e,o),this.shouldPlay&&eB(h.media)}else s!==null?(this.resumePrimary(s,e,i),this.shouldPlay&&eB(this.hls.media)):a&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e,n;return(e=this.mediaSelection)==null||(n=e.main)==null?void 0:n.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,n,r){var i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Ba(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let s=this.timelinePos;(s<e.start||s>=e.end)&&(s=this.getPrimaryResumption(e,n),this.timelinePos=s),this.attachPrimary(s,e)}if(!r)return;const a=this.schedule.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Ba(e)}`),this.hls.trigger(D.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:n}),this.checkBuffer())}getPrimaryResumption(e,n){const r=e.start;if(this.primaryLive){const i=this.primaryDetails;if(n===0)return this.hls.startPosition;if(i&&(r<i.fragmentStart||r>i.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const n=this.getAssetPlayer(e.identifier);return n!=null&&n.hls?n.hls.bufferedToEnd:ke.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,n,r){n?this.setBufferingItem(n):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const a=this.hls;a.media?this.checkBuffer():(this.transferMediaTo(a,i),r&&this.startLoadingPrimaryAt(e,r)),r||(this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,n){var r;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((r=i.mainForwardBufferInfo)==null?void 0:r.start)||i.media.currentTime)-e)>.5?i.startLoad(e,n):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(D.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(D.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,n){if(n.level===-1)return;const r=this.hls.levels[n.level],i=ht(ht({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,n){const r=this.hls.audioTracks[n.id],i=this.mediaSelection;if(!i){this.altSelection=ht(ht({},this.altSelection),{},{audio:r});return}const a=ht(ht({},i),{},{audio:r});this.mediaSelection=a}onSubtitleTrackUpdated(e,n){const r=this.hls.subtitleTracks[n.id],i=this.mediaSelection;if(!i){this.altSelection=ht(ht({},this.altSelection),{},{subtitles:r});return}const a=ht(ht({},i),{},{subtitles:r});this.mediaSelection=a}onAudioTrackSwitching(e,n){const r=fU(n);this.playerQueue.forEach(i=>i.hls.setAudioOption(n)||i.hls.setAudioOption(r))}onSubtitleTrackSwitch(e,n){const r=fU(n);this.playerQueue.forEach(i=>i.hls.setSubtitleOption(n)||n.id!==-1&&i.hls.setSubtitleOption(r))}onBufferCodecs(e,n){const r=n.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,n){this.checkBuffer()}onBufferFlushed(e,n){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){const n=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&n){for(let i=0;i<n.length;i++){const a=n[i];if(a.cue.post){var r;const s=this.schedule.findEventIndex(a.identifier),o=(r=this.schedule.items)==null?void 0:r[s];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const n=this.playingItem;if(!this.playingLastItem&&n){const r=this.findItemIndex(n);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(e,n){const r=this.schedule.items;if(e&&r){const i=this.findItemIndex(e,n);return r[i]||null}return null}trimInPlace(e,n){if(this.isInterstitial(e)&&e.event.appendInPlace&&n.end-e.end>.25){e.event.assetList.forEach((a,s)=>{e.event.isAssetPastPlayoutLimit(s)&&this.clearAssetPlayer(a.identifier,null)});const r=e.end+.25,i=ke.bufferInfo(this.primaryMedia,r,0);(i.end>r||(i.nextStart||0)>r)&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}}itemsMatch(e,n){return!!n&&(e===n||e.event&&n.event&&this.eventItemsMatch(e,n)||!e.event&&!n.event&&this.findItemIndex(e)===this.findItemIndex(n))}eventItemsMatch(e,n){var r;return!!n&&(e===n||e.event.identifier===((r=n.event)==null?void 0:r.identifier))}findItemIndex(e,n){return e?this.schedule.findItemIndex(e,n):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const n=this.schedule.items;if(!n)return;const r=ke.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,n,r){const i=this.schedule,a=this.bufferingItem;if(this.bufferedPos>e)return;if(n.length===1&&this.itemsMatch(n[0],a)){this.bufferedPos=e;return}const s=this.playingItem,o=this.findItemIndex(s);let c=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var u,d;const h=this.findItemIndex(a),p=Math.min(h+1,n.length-1),y=n[p];if((c===-1&&a&&e>=a.end||(u=y.event)!=null&&u.appendInPlace&&e+.01>=y.start)&&(c=p),p-o>1&&(a==null||(d=a.event)==null?void 0:d.appendInPlace)===!1)return;if(this.bufferedPos=e,c>h&&c>o)this.bufferedToItem(y);else{const v=this.primaryDetails;this.primaryLive&&v&&e>v.edge-v.targetduration&&y.start<v.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(y)&&this.preloadAssets(y.event,0)}}else r&&s&&!this.itemsMatch(s,a)&&(c===o?this.bufferedToItem(s):c===o+1&&this.bufferedToItem(n[c]))}assetsBuffered(e,n){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const a=this.getAssetPlayer(i.identifier);return!(a!=null&&a.bufferedInPlaceToEnd(n))})}setBufferingItem(e){const n=this.bufferingItem,r=this.schedule;if(this.itemsMatch(e,n))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:i,events:a}=r;if(!i||!a)return n;const s=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const c=o?o.remaining:n?n.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Ba(e)}`+(n?` (${c.toFixed(2)} remaining)`:"")),this.playbackDisabled||(s?e.event.assetList.forEach(u=>{const d=this.getAssetPlayer(u.identifier);d&&d.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(u=>u.pauseBuffering()))),this.hls.trigger(D.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return n}bufferedToItem(e,n=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,n);else if(r!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const n=this.findItemIndex(e),r=this.getPrimaryResumption(e,n);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,n){const r=e.event,i=r.assetList.length===0&&!r.assetListLoader,a=r.cue.once;if(i||!a){const s=this.preloadAssets(r,n);if(s!=null&&s.interstitial.appendInPlace){const o=r.assetList[n],c=this.primaryMedia;o&&c&&this.bufferAssetPlayer(s,c)}}}preloadAssets(e,n){const r=e.assetUrl,i=e.assetList.length,a=i===0&&!e.assetListLoader,s=e.cue.once;if(a){const c=e.timelineStart;if(e.appendInPlace){var o;const p=this.playingItem;!this.isInterstitial(p)&&(p==null||(o=p.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(c+.25)}let u,d=0;if(!this.playingItem&&this.primaryLive&&(d=this.hls.startPosition,d===-1&&(d=this.hls.liveSyncPosition||0)),d&&!(e.cue.pre||e.cue.post)){const p=d-c;p>0&&(u=Math.round(p*1e3)/1e3)}if(this.log(`Load interstitial asset ${n+1}/${r?1:i} ${e}${u?` live-start: ${d} start-offset: ${u}`:""}`),r)return this.createAsset(e,0,0,c,e.duration,r);const h=this.assetListLoader.loadAssetList(e,u);h&&(e.assetListLoader=h)}else if(!s&&i){for(let c=n;c<i;c++){const u=e.assetList[c],d=this.getAssetPlayerQueueIndex(u.identifier);(d===-1||this.playerQueue[d].destroyed)&&!u.error&&this.createAssetPlayer(e,u,c)}return this.getAssetPlayer(e.assetList[n].identifier)}return null}flushFrontBuffer(e){const n=this.requiredTracks;if(!n)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(n).forEach(i=>{this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const n=this.playerQueue;for(let r=0;r<n.length;r++)if(e===n[r].assetId)return r;return-1}getAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);return this.playerQueue[n]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:n}=this;if(n){for(let r=0;r<e.length;r++)if(e[r].media===n)return e[r]}return null}createAsset(e,n,r,i,a,s){const o={parentIdentifier:e.identifier,identifier:bxe(e,s,n),duration:a,startOffset:r,timelineStart:i,uri:s};return this.createAssetPlayer(e,o,n)}createAssetPlayer(e,n,r){const i=this.hls,a=i.userConfig;let s=a.videoPreference;const o=i.loadLevelObj||i.levels[i.currentLevel];(s||o)&&(s=ut({},s),o.videoCodec&&(s.videoCodec=o.videoCodec),o.videoRange&&(s.allowedVideoRanges=[o.videoRange]));const c=i.audioTracks[i.audioTrack],u=i.subtitleTracks[i.subtitleTrack];let d=0;if(this.primaryLive||e.appendInPlace){const w=this.timelinePos-n.timelineStart;if(w>1){const O=n.duration;O&&w<O&&(d=w)}}const h=n.identifier,p=ht(ht({},a),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:h,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:d,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:c||a.audioPreference,subtitlePreference:u||a.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,n.timelineStart&&(p.timelineOffset=n.timelineStart));const y=p.cmcd;y!=null&&y.sessionId&&y.contentId&&(p.cmcd=ut({},y,{contentId:Uc(n.uri)})),this.getAssetPlayer(h)&&this.warn(`Duplicate date range identifier ${e} and asset ${h}`);const v=new Exe(this.HlsPlayerClass,p,e,n);this.playerQueue.push(v),e.assetList[r]=n;const x=w=>{if(w.live){const C=new Error(`Interstitials MUST be VOD assets ${e}`),L={fatal:!0,type:Te.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:C};this.handleAssetItemError(L,e,this.schedule.findEventIndex(e.identifier),r,C.message);return}const O=w.edge-w.fragmentStart,R=n.duration;(R===null||O>R)&&(this.log(`Interstitial asset "${h}" duration change ${R} > ${O}`),n.duration=O,this.updateSchedule())};v.on(D.LEVEL_UPDATED,(w,{details:O})=>x(O)),v.on(D.LEVEL_PTS_UPDATED,(w,{details:O})=>x(O));const b=(w,O)=>{const R=this.getAssetPlayer(h);if(R&&O.tracks){R.off(D.BUFFER_CODECS,b),R.tracks=O.tracks;const C=this.primaryMedia;this.bufferingAsset===R.assetItem&&C&&!R.media&&this.bufferAssetPlayer(R,C)}};v.on(D.BUFFER_CODECS,b);const T=()=>{var w;const O=this.getAssetPlayer(h);if(this.log(`buffered to end of asset ${O}`),!O)return;const R=this.schedule.findEventIndex(e.identifier),C=(w=this.schedule.items)==null?void 0:w[R];if(this.isInterstitial(C)){const P=e.findAssetIndex(n),N=NE(e,P);if(!e.isAssetPastPlayoutLimit(N))this.bufferedToItem(C,N);else{var L;const k=(L=this.schedule.items)==null?void 0:L[R+1];k&&this.bufferedToItem(k)}}};v.on(D.BUFFERED_TO_END,T);const _=w=>()=>{if(!this.getAssetPlayer(h))return;this.shouldPlay=!0;const R=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,R,w)};return v.once(D.MEDIA_ENDED,_(r)),v.once(D.PLAYOUT_LIMIT_REACHED,_(1/0)),v.on(D.ERROR,(w,O)=>{const R=this.getAssetPlayer(h);if(O.details===re.BUFFER_STALLED_ERROR){if(R!=null&&R.media){const C=R.currentTime,L=R.duration-C;C&&e.appendInPlace&&L/R.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${h} ${e} at ${R.media.currentTime}`),T()):(this.warn(`Stalled at ${C} of ${C+L} in asset ${h} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(O,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${O.error} ${e}`)}),v.on(D.DESTROYING,()=>{if(!this.getAssetPlayer(h))return;const O=new Error(`Asset player destroyed unexpectedly ${h}`),R={fatal:!0,type:Te.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:O};this.handleAssetItemError(R,e,this.schedule.findEventIndex(e.identifier),r,O.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${el(n)}`),this.hls.trigger(D.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:n,assetListIndex:r,event:e,player:v}),v}clearInterstitial(e,n){e.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,n)}),e.reset()}resetAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[n];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,n){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`clear asset player "${e}" toSegment: ${n&&Ba(n)}`);const i=this.playerQueue[r];this.transferMediaFromPlayer(i,n),this.playerQueue.splice(r,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,n,r,i,a){const{interstitial:s,assetItem:o,assetId:c}=e,u=s.assetList.length,d=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!d||d.identifier!==c)&&(d&&(this.clearAssetPlayer(d.identifier,r[i]),delete d.error),this.log(`INTERSTITIAL_ASSET_STARTED ${n+1}/${u} ${el(o)}`),this.hls.trigger(D.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:n,event:s,schedule:r.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,a)}bufferAssetPlayer(e,n){var r,i;const{interstitial:a,assetItem:s}=e,o=this.schedule.findEventIndex(a.identifier),c=(r=this.schedule.items)==null?void 0:r[o];if(!c)return;this.setBufferingItem(c),this.bufferingAsset=s;const u=this.getBufferingPlayer();if(u===e)return;const d=a.appendInPlace;if(d&&(u==null?void 0:u.interstitial.appendInPlace)===!1)return;const h=(u==null?void 0:u.tracks)||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(d&&s!==this.playingAsset){if(!e.tracks)return;if(h&&!I8(h,e.tracks)){const p=new Error(`Asset ${el(s)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),y={fatal:!0,type:Te.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:p},v=a.findAssetIndex(s);this.handleAssetItemError(y,a,o,v,p.message);return}}this.transferMediaTo(e,n)}handleAssetItemError(e,n,r,i,a){if(e.details===re.BUFFER_STALLED_ERROR)return;const s=n.assetList[i];this.warn(`INTERSTITIAL_ASSET_ERROR ${s&&el(s)} ${e.error}`);const o=s==null?void 0:s.identifier,c=this.getAssetPlayerQueueIndex(o),u=this.playerQueue[c]||null,d=this.schedule.items,h=ut({},e,{fatal:!1,errorAction:Pf(!0),asset:s,assetListIndex:i,event:n,schedule:d,scheduleIndex:r,player:u});if(this.hls.trigger(D.INTERSTITIAL_ASSET_ERROR,h),!e.fatal)return;const p=this.playingAsset,y=new Error(a);if(s&&(this.clearAssetPlayer(o,null),s.error=y),!n.assetList.some(v=>!v.error))n.error=y;else{for(let v=i;v<n.assetList.length;v++)this.resetAssetPlayer(n.assetList[v].identifier);this.updateSchedule()}n.error?this.primaryFallback(n):p&&p.identifier===o&&this.advanceAfterAssetEnded(n,r,i)}primaryFallback(e){const n=e.timelineStart,r=this.effectivePlayingItem;if(this.updateSchedule(),r){this.log(`Fallback to primary from event "${e.identifier}" start: ${n} pos: ${this.timelinePos} playing: ${r?Ba(r):"<none>"} error: ${e.error}`);let i=this.timelinePos;i===-1&&(i=this.hls.startPosition);const a=this.updateItem(r,i);this.itemsMatch(r,a)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(n,null),this.flushFrontBuffer(n));const s=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(s)}else this.checkStart()}onAssetListLoaded(e,n){var r;const i=n.event,a=i.identifier,s=n.assetListResponse.ASSETS;if(!this.schedule.hasEvent(a))return;const o=i.timelineStart,c=i.duration;let u=0;s.forEach((v,x)=>{const b=parseFloat(v.DURATION);this.createAsset(i,x,u,o+u,b,v.URI),u+=b}),i.duration=u,this.log(`Loaded asset-list with duration: ${u} (was: ${c}) ${i}`);const d=this.waitingItem,h=(d==null?void 0:d.event.identifier)===a;this.updateSchedule();const p=(r=this.bufferingItem)==null?void 0:r.event;if(h){var y;const v=this.schedule.findEventIndex(a),x=(y=this.schedule.items)==null?void 0:y[v];if(x){if(!this.playingItem&&this.timelinePos>x.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==v){i.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${i}`),this.primaryFallback(i);return}this.setBufferingItem(x)}this.setSchedulePosition(v)}else if((p==null?void 0:p.identifier)===a&&p.appendInPlace){const v=i.assetList[0],x=this.getAssetPlayer(v.identifier),b=this.primaryMedia;v&&x&&b&&this.bufferAssetPlayer(x,b)}}onError(e,n){switch(n.details){case re.ASSET_LIST_PARSING_ERROR:case re.ASSET_LIST_LOAD_ERROR:case re.ASSET_LIST_LOAD_TIMEOUT:{const r=n.interstitial;r&&this.primaryFallback(r);break}case re.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const tB=500;class _xe extends r_{constructor(e,n,r){super(e,n,r,"subtitle-stream-controller",Se.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,n){this.stopLoad(),this.state=fe.IDLE,this.setInterval(tB),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,n){this.tracksBuffered=[],super.onMediaDetaching(e,n)}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:i}=n;if(this.fragContextChanged(r)||(Kt(r)&&(this.fragPrevious=r),this.state=fe.IDLE),!i)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let s;const o=r.start;for(let u=0;u<a.length;u++)if(o>=a[u].start&&o<=a[u].end){s=a[u];break}const c=r.start+r.duration;s?s.end=c:(s={start:o,end:c},a.push(s)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,n){const{startOffset:r,endOffset:i}=n;if(r===0&&i!==Number.POSITIVE_INFINITY){const a=i-1;if(a<=0)return;n.endOffsetSubtitles=Math.max(0,a),this.tracksBuffered.forEach(s=>{for(let o=0;o<s.length;){if(s[o].end<=a){s.shift();continue}else if(s[o].start<a)s[o].start=a;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(r,a,Se.SUBTITLE)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===Se.SUBTITLE&&(n.details===re.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==fe.STOPPED&&(this.state=fe.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&CG(this.levels,n)){this.levels=n.map(r=>new If(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const i=new If(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Se.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==fe.STOPPED&&this.setInterval(tB)}onSubtitleTrackLoaded(e,n){var r;const{currentTrackId:i,levels:a}=this,{details:s,id:o}=n;if(!a){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const c=a[o];if(o>=a.length||!c)return;this.log(`Subtitle track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(s.live||(r=c.details)!=null&&r.live){if(s.deltaUpdateFailed)return;const h=this.mainDetails;if(!h){this.startFragRequested=!1;return}const p=h.fragments[0];if(!c.details)s.hasProgramDateTime&&h.hasProgramDateTime?(kp(s,h),u=s.fragmentStart):p&&(u=p.start,VA(s,u));else{var d;u=this.alignPlaylists(s,c.details,(d=this.levelLastLoaded)==null?void 0:d.details),u===0&&p&&(u=p.start,VA(s,u))}h&&!this.startFragRequested&&this.setStartPosition(h,u)}c.details=s,this.levelLastLoaded=c,o===i&&(this.hls.trigger(D.SUBTITLE_TRACK_UPDATED,{details:s,id:o,groupId:n.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===fe.IDLE&&(eo(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),c.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,i=n.decryptdata,a=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&ml(i.method)){const s=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,n_(i.method)).catch(o=>{throw a.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:n}),o}).then(o=>{const c=performance.now();a.trigger(D.FRAG_DECRYPTED,{frag:n,payload:o,stats:{tstart:s,tdecrypt:c}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=fe.IDLE})}}doTick(){if(!this.media){this.state=fe.IDLE;return}if(this.state===fe.IDLE){const{currentTrackId:e,levels:n}=this,r=n==null?void 0:n[e];if(!r||!n.length||!r.details||this.waitForLive(r))return;const{config:i}=this,a=this.getLoadPosition(),s=ke.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,i.maxBufferHole),{end:o,len:c}=s,u=r.details,d=this.hls.maxBufferLength+u.levelTargetDuration;if(c>d)return;const h=u.fragments,p=h.length,y=u.edge;let v=null;const x=this.fragPrevious;if(o<y){const _=i.maxFragLookUpTolerance,w=o>y-_?0:_;v=eo(x,h,Math.max(h[0].start,o),w),!v&&x&&x.start<h[0].start&&(v=h[0])}else v=h[p-1];if(v=this.filterReplacedPrimary(v,r.details),!v)return;const b=v.sn-u.startSN,T=h[b-1];if(T&&T.cc===v.cc&&this.fragmentTracker.getState(T)===en.NOT_LOADED&&(v=T),this.fragmentTracker.getState(v)===en.NOT_LOADED){const _=this.mapToInitFragWhenRequired(v);_&&this.loadFragment(_,r,o)}}}loadFragment(e,n,r){Kt(e)?super.loadFragment(e,n,r):this._loadInitSegment(e,n)}get mediaBufferTimeRanges(){return new Rxe(this.tracksBuffered[this.currentTrackId]||[])}}class Rxe{constructor(e){this.buffered=void 0;const n=(r,i,a)=>{if(i=i>>>0,i>a-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${a})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}const Oxe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},FG=t=>String.fromCharCode(Oxe[t]||t),Hr=15,zi=100,Cxe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Lxe={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Dxe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ixe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Pxe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Nxe{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;Ze.log(`${this.time} [${e}] ${r}`)}}}const Os=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(e[r].toString(16));return n};class $G{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const i=n[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Mxe{constructor(){this.uchar=" ",this.penState=new $G}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class kxe{constructor(e){this.chars=[],this.pos=0,this.currPenState=new $G,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<zi;n++)this.chars.push(new Mxe);this.logger=e}equals(e){for(let n=0;n<zi;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<zi;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<zi;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>zi&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=zi)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=FG(e);if(this.pos>=zi){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<zi;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<zi;r++){const i=this.chars[r].uchar;i!==" "&&(n=!1),e.push(i)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class ME{constructor(e){this.rows=[],this.currRow=Hr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<Hr;n++)this.rows.push(new kxe(e));this.logger=e}reset(){for(let e=0;e<Hr;e++)this.rows[e].clear();this.currRow=Hr-1}equals(e){let n=!0;for(let r=0;r<Hr;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<Hr;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<Hr;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Et(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let o=0;o<Hr;o++)this.rows[o].clear();const a=this.currRow+1-this.nrRollUpRows,s=this.lastOutputScreen;if(s){const o=s.rows[a].cueStartTime,c=this.logger.time;if(o!==null&&c!==null&&o<c)for(let u=0;u<this.nrRollUpRows;u++)this.rows[n-this.nrRollUpRows+u+1].copy(s.rows[a+u])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const a=e.indent,s=Math.max(a-1,0);r.setCursor(e.indent),e.color=r.chars[s].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Et(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",i=-1;for(let a=0;a<Hr;a++){const s=this.rows[a].getTextString();s&&(i=a+1,e?n.push("Row "+i+": '"+s+"'"):n.push(s.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class nB{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new ME(r),this.nonDisplayedMemory=new ME(r),this.lastOutputScreen=new ME(r),this.currRollUpRow=this.displayedMemory.rows[Hr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Hr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=i[r]}this.logger.log(2,"MIDROW: "+Et(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class rB{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Uxe(),this.logger=void 0;const i=this.logger=new Nxe;this.channels=[null,new nB(e,n,i),new nB(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let r=0;r<n.length;r+=2){const i=n[r]&127,a=n[r+1]&127;let s=!1,o=null;if(i===0&&a===0)continue;this.logger.log(3,()=>"["+Os([n[r],n[r+1]])+"] -> ("+Os([i,a])+")");const c=this.cmdHistory;if(i>=16&&i<=31){if(jxe(i,a,c)){Qh(null,null,c),this.logger.log(3,()=>"Repeated command ("+Os([i,a])+") is dropped");continue}Qh(i,a,this.cmdHistory),s=this.parseCmd(i,a),s||(s=this.parseMidrow(i,a)),s||(s=this.parsePAC(i,a)),s||(s=this.parseBackgroundAttributes(i,a))}else Qh(null,null,c);if(!s&&(o=this.parseChars(i,a),o)){const d=this.currentChannel;d&&d>0?this.channels[d].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!s&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Os([i,a])+" orig: "+Os([n[r],n[r+1]]))}}parseCmd(e,n){const r=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=33&&n<=35;if(!(r||i))return!1;const a=e===20||e===21||e===23?1:2,s=this.channels[a];return e===20||e===21||e===28||e===29?n===32?s.ccRCL():n===33?s.ccBS():n===34?s.ccAOF():n===35?s.ccAON():n===36?s.ccDER():n===37?s.ccRU(2):n===38?s.ccRU(3):n===39?s.ccRU(4):n===40?s.ccFON():n===41?s.ccRDC():n===42?s.ccTR():n===43?s.ccRTD():n===44?s.ccEDM():n===45?s.ccCR():n===46?s.ccENM():n===47&&s.ccEOC():s.ccTO(n-32),this.currentChannel=a,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+Os([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const i=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,a=(e===16||e===24)&&n>=64&&n<=95;if(!(i||a))return!1;const s=e<=23?1:2;n>=64&&n<=95?r=s===1?Cxe[e]:Dxe[e]:r=s===1?Lxe[e]:Ixe[e];const o=this.channels[s];return o?(o.setPAC(this.interpretPAC(r,n)),this.currentChannel=s,!0):!1}interpretPAC(e,n){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,n){let r,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19){let s;a===17?s=n+80:a===18?s=n+112:s=n+144,this.logger.log(2,()=>"Special char '"+FG(s)+"' in channel "+r),i=[s]}else e>=32&&e<=127&&(i=n===0?[e]:[e,n]);return i&&this.logger.log(3,()=>"Char codes =  "+Os(i).join(",")),i}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=45&&n<=47;if(!(r||i))return!1;let a;const s={};e===16||e===24?(a=Math.floor((n-32)/2),s.background=Pxe[a],n%2===1&&(s.background=s.background+"_semi")):n===45?s.background="transparent":(s.foreground="black",n===47&&(s.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(s),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}Qh(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function Qh(t,e,n){n.a=t,n.b=e}function jxe(t,e,n){return n.a===t&&n.b===e}function Uxe(){return{a:null,b:null}}var m_=function(){if(Mp!=null&&Mp.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(o,c){if(typeof c!="string"||!Array.isArray(o))return!1;const u=c.toLowerCase();return~o.indexOf(u)?u:!1}function r(o){return n(t,o)}function i(o){return n(e,o)}function a(o,...c){let u=1;for(;u<arguments.length;u++){const d=arguments[u];for(const h in d)o[h]=d[h]}return o}function s(o,c,u){const d=this,h={enumerable:!0};d.hasBeenReset=!1;let p="",y=!1,v=o,x=c,b=u,T=null,_="",w=!0,O="auto",R="start",C=50,L="middle",P=50,N="middle";Object.defineProperty(d,"id",a({},h,{get:function(){return p},set:function(k){p=""+k}})),Object.defineProperty(d,"pauseOnExit",a({},h,{get:function(){return y},set:function(k){y=!!k}})),Object.defineProperty(d,"startTime",a({},h,{get:function(){return v},set:function(k){if(typeof k!="number")throw new TypeError("Start time must be set to a number.");v=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",a({},h,{get:function(){return x},set:function(k){if(typeof k!="number")throw new TypeError("End time must be set to a number.");x=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",a({},h,{get:function(){return b},set:function(k){b=""+k,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",a({},h,{get:function(){return T},set:function(k){T=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",a({},h,{get:function(){return _},set:function(k){const M=r(k);if(M===!1)throw new SyntaxError("An invalid or illegal string was specified.");_=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",a({},h,{get:function(){return w},set:function(k){w=!!k,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",a({},h,{get:function(){return O},set:function(k){if(typeof k!="number"&&k!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");O=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",a({},h,{get:function(){return R},set:function(k){const M=i(k);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");R=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",a({},h,{get:function(){return C},set:function(k){if(k<0||k>100)throw new Error("Position must be between 0 and 100.");C=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",a({},h,{get:function(){return L},set:function(k){const M=i(k);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");L=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",a({},h,{get:function(){return P},set:function(k){if(k<0||k>100)throw new Error("Size must be between 0 and 100.");P=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",a({},h,{get:function(){return N},set:function(k){const M=i(k);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");N=M,this.hasBeenReset=!0}})),d.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class Bxe{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function GG(t){function e(r,i,a,s){return(r|0)*3600+(i|0)*60+(a|0)+parseFloat(s||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class Fxe{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let i=0;i<r.length;++i)if(n===r[i]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function VG(t,e,n,r){const i=r?t.split(r):[t];for(const a in i){if(typeof i[a]!="string")continue;const s=i[a].split(n);if(s.length!==2)continue;const o=s[0],c=s[1];e(o,c)}}const XA=new m_(0,0,""),Zh=XA.align==="middle"?"middle":"center";function $xe(t,e,n){const r=t;function i(){const o=GG(t);if(o===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,c){const u=new Fxe;VG(o,function(p,y){let v;switch(p){case"region":for(let x=n.length-1;x>=0;x--)if(n[x].id===y){u.set(p,n[x].region);break}break;case"vertical":u.alt(p,y,["rl","lr"]);break;case"line":v=y.split(","),u.integer(p,v[0]),u.percent(p,v[0])&&u.set("snapToLines",!1),u.alt(p,v[0],["auto"]),v.length===2&&u.alt("lineAlign",v[1],["start",Zh,"end"]);break;case"position":v=y.split(","),u.percent(p,v[0]),v.length===2&&u.alt("positionAlign",v[1],["start",Zh,"end","line-left","line-right","auto"]);break;case"size":u.percent(p,y);break;case"align":u.alt(p,y,["start",Zh,"end","left","right"]);break}},/:/,/\s/),c.region=u.get("region",null),c.vertical=u.get("vertical","");let d=u.get("line","auto");d==="auto"&&XA.line===-1&&(d=-1),c.line=d,c.lineAlign=u.get("lineAlign","start"),c.snapToLines=u.get("snapToLines",!0),c.size=u.get("size",100),c.align=u.get("align",Zh);let h=u.get("position","auto");h==="auto"&&XA.position===50&&(h=c.align==="start"||c.align==="left"?0:c.align==="end"||c.align==="right"?100:50),c.position=h}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),s(),e.endTime=i(),s(),a(t,e)}function qG(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class Gxe{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Bxe,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let a=n.buffer,s=0;for(a=qG(a);s<a.length&&a[s]!=="\r"&&a[s]!==`
`;)++s;const o=a.slice(0,s);return a[s]==="\r"&&++s,a[s]===`
`&&++s,n.buffer=a.slice(s),o}function i(a){VG(a,function(s,o){},/:/)}try{let a="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;a=r();const o=a.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let s=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(s?s=!1:a=r(),n.state){case"HEADER":/:/.test(a)?i(a):a||(n.state="ID");continue;case"NOTE":a||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){n.state="NOTE";break}if(!a)continue;if(n.cue=new m_(0,0,""),n.state="CUE",a.indexOf("-->")===-1){n.cue.id=a;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{$xe(a,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const o=a.indexOf("-->")!==-1;if(!a||o&&(s=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=a}continue;case"BADCUE":a||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const Vxe=/\r\n|\n\r|\n|\r/g,kE=function(e,n,r=0){return e.slice(r,r+n.length)===n},qxe=function(e){let n=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!be(n)||!be(r)||!be(i)||!be(a))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*r,n+=60*1e3*i,n+=60*60*1e3*a,n};function p_(t,e,n){return Uc(t.toString())+Uc(e.toString())+Uc(n)}const Hxe=function(e,n,r){let i=e[n],a=e[i.prevCC];if(!a||!a.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(s=a)!=null&&s.new;){var s;e.ccOffset+=i.start-a.start,i.new=!1,i=a,a=e[i.prevCC]}e.presentationOffset=r};function zxe(t,e,n,r,i,a,s){const o=new Gxe,c=fr(new Uint8Array(t)).trim().replace(Vxe,`
`).split(`
`),u=[],d=e?obe(e.baseTime,e.timescale):0;let h="00:00.000",p=0,y=0,v,x=!0;o.oncue=function(b){const T=n[r];let _=n.ccOffset;const w=(p-d)/9e4;if(T!=null&&T.new&&(y!==void 0?_=n.ccOffset=T.start:Hxe(n,r,w)),w){if(!e){v=new Error("Missing initPTS for VTT MPEGTS");return}_=w-n.presentationOffset}const O=b.endTime-b.startTime,R=Or((b.startTime+_-y)*9e4,i*9e4)/9e4;b.startTime=Math.max(R,0),b.endTime=Math.max(R+O,0);const C=b.text.trim();b.text=decodeURIComponent(encodeURIComponent(C)),b.id||(b.id=p_(b.startTime,b.endTime,C)),b.endTime>0&&u.push(b)},o.onparsingerror=function(b){v=b},o.onflush=function(){if(v){s(v);return}a(u)},c.forEach(b=>{if(x)if(kE(b,"X-TIMESTAMP-MAP=")){x=!1,b.slice(16).split(",").forEach(T=>{kE(T,"LOCAL:")?h=T.slice(6):kE(T,"MPEGTS:")&&(p=parseInt(T.slice(7)))});try{y=qxe(h)/1e3}catch(T){v=T}return}else b===""&&(x=!1);o.parse(b+`
`)}),o.flush()}const jE="stpp.ttml.im1t",HG=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,zG=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Kxe={left:"start",center:"center",right:"end",start:"start",end:"end"};function iB(t,e,n,r){const i=Ve(new Uint8Array(t),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const a=i.map(o=>fr(o)),s=sbe(e.baseTime,1,e.timescale);try{a.forEach(o=>n(Yxe(o,s)))}catch(o){r(o)}}function Yxe(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(a).reduce((h,p)=>(h[p]=i.getAttribute(`ttp:${p}`)||a[p],h),{}),o=i.getAttribute("xml:space")!=="preserve",c=aB(UE(i,"styling","style")),u=aB(UE(i,"layout","region")),d=UE(i,"body","[begin]");return[].map.call(d,h=>{const p=KG(h,o);if(!p||!h.hasAttribute("begin"))return null;const y=FE(h.getAttribute("begin"),s),v=FE(h.getAttribute("dur"),s);let x=FE(h.getAttribute("end"),s);if(y===null)throw sB(h);if(x===null){if(v===null)throw sB(h);x=y+v}const b=new m_(y-e,x-e,p);b.id=p_(b.startTime,b.endTime,b.text);const T=u[h.getAttribute("region")],_=c[h.getAttribute("style")],w=Wxe(T,_,c),{textAlign:O}=w;if(O){const R=Kxe[O];R&&(b.lineAlign=R),b.align=O}return ut(b,w),b}).filter(h=>h!==null)}function UE(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function aB(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function KG(t,e){return[].slice.call(t.childNodes).reduce((n,r,i)=>{var a;return r.nodeName==="br"&&i?n+`
`:(a=r.childNodes)!=null&&a.length?KG(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function Wxe(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return s&&n.hasOwnProperty(s)&&(i=n[s]),a.reduce((o,c)=>{const u=BE(e,r,c)||BE(t,r,c)||BE(i,r,c);return u&&(o[c]=u),o},{})}function BE(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function sB(t){return new Error(`Could not parse ttml timestamp ${t}`)}function FE(t,e){if(!t)return null;let n=GG(t);return n===null&&(HG.test(t)?n=Xxe(t,e):zG.test(t)&&(n=Qxe(t,e))),n}function Xxe(t,e){const n=HG.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function Qxe(t,e){const n=zG.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class Jh{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class Zxe{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=lB(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Jh(this,"textTrack1"),n=new Jh(this,"textTrack2"),r=new Jh(this,"textTrack3"),i=new Jh(this,"textTrack4");this.cea608Parser1=new rB(1,e,n),this.cea608Parser2=new rB(3,r,i)}addCues(e,n,r,i,a){let s=!1;for(let o=a.length;o--;){const c=a[o],u=Jxe(c[0],c[1],n,r);if(u>=0&&(c[0]=Math.min(c[0],n),c[1]=Math.max(c[1],r),s=!0,u/(r-n)>.5))return}if(s||a.push([n,r]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,n,r,i)}else{const o=this.Cues.newCue(null,n,r,i);this.hls.trigger(D.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:a}){const{unparsedVttFrags:s}=this;r===Se.MAIN&&(this.initPTS[n.cc]={baseTime:i,timescale:a}),s.length&&(this.unparsedVttFrags=[],s.forEach(o=>{this.initPTS[o.frag.cc]?this.onFragLoaded(D.FRAG_LOADED,o):this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,n){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const a=r.textTracks[i];if(oB(a,{name:e,lang:n,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return a}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:i}=this,{label:a,languageCode:s}=n[e],o=this.getExistingTrack(a,s);if(o)r[e]=o,ul(r[e]),jG(r[e],i);else{const c=this.createTextTrack("captions",a,s);c&&(c[e]=!0,r[e]=c)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,i={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,n,r){const i=this.media;if(i)return i.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,n.mediaSource||this._cleanTracks()}onMediaDetaching(e,n){const r=!!n.transferMedia;if(this.media=null,r)return;const{captionsTracks:i}=this;Object.keys(i).forEach(a=>{ul(i[a]),delete i[a]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=lB(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)ul(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],i=r.some(a=>a.textCodec===jE);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(CG(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const s=this.media,o=s?ym(s.textTracks):null;if(this.tracks.forEach((c,u)=>{let d;if(o){let h=null;for(let p=0;p<o.length;p++)if(o[p]&&oB(o[p],c)){h=o[p],o[p]=null;break}h&&(d=h)}if(d)ul(d);else{const h=YG(c);d=this.createTextTrack(h,c.name,c.lang),d&&(d.mode="disabled")}d&&this.textTracks.push(d)}),o!=null&&o.length){const c=o.filter(u=>u!==null).map(u=>u.label);c.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${c.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const s=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const a=`textTrack${i[1]}`,s=this.captionsProperties[a];s&&(s.label=r.name,r.lang&&(s.languageCode=r.lang),s.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===Se.MAIN){var r,i;const{cea608Parser1:a,cea608Parser2:s,lastSn:o}=this,{cc:c,sn:u}=n.frag,d=(r=(i=n.part)==null?void 0:i.index)!=null?r:-1;a&&s&&(u!==o+1||u===o&&d!==this.lastPartIndex+1||c!==this.lastCc)&&(a.reset(),s.reset()),this.lastCc=c,this.lastSn=u,this.lastPartIndex=d}}onFragLoaded(e,n){const{frag:r,payload:i}=n;if(r.type===Se.SUBTITLE)if(i.byteLength){const a=r.decryptdata,s="stats"in n;if(a==null||!a.encrypted||s){const o=this.tracks[r.level],c=this.vttCCs;c[r.cc]||(c[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),o&&o.textCodec===jE?this._parseIMSC1(r,i):this._parseVTTs(n)}}else this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;iB(n,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{r.logger.log(`Failed to parse IMSC1: ${i}`),r.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var n;const{frag:r,payload:i}=e,{initPTS:a,unparsedVttFrags:s}=this,o=a.length-1;if(!a[r.cc]&&o===-1){s.push(e);return}const c=this.hls,u=(n=r.initSegment)!=null&&n.data?kr(r.initSegment.data,new Uint8Array(i)).buffer:i;zxe(u,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,d=>{this._appendCues(d,r.level),c.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},d=>{const h=d.message==="Missing initPTS for VTT MPEGTS";h?s.push(e):this._fallbackToIMSC1(r,i),c.logger.log(`Failed to parse VTT cue: ${d}`),!(h&&o>r.cc)&&c.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:d})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||iB(n,this.initPTS[e.cc],()=>{r.textCodec=jE,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[n];if(!i||i.mode==="disabled")return;e.forEach(a=>UG(i,a))}else{const i=this.tracks[n];if(!i)return;const a=i.default?"default":"subtitles"+n;r.trigger(D.CUES_PARSED,{type:"subtitles",cues:e,track:a})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===Se.SUBTITLE&&this.onFragLoaded(D.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:i}=n;if(!(r.type===Se.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let a=0;a<i.length;a++){const s=i[a].bytes;if(s){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(s);this.cea608Parser1.addData(i[a].pts,o[0]),this.cea608Parser2.addData(i[a].pts,o[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:a}){const{media:s}=this;if(!(!s||s.currentTime<r)){if(!a||a==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(c=>WA(o[c],n,r))}if(this.config.renderTextTracksNatively&&n===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(c=>WA(o[c],n,i))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let i=2;for(let a=0;a<r;a++){const s=e[i++],o=127&e[i++],c=127&e[i++];if(o===0&&c===0)continue;if((4&s)!==0){const d=3&s;(d===0||d===1)&&(n[d].push(o),n[d].push(c))}}return n}}function YG(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function oB(t,e){return!!t&&t.kind===YG(e)&&zA(e,t)}function Jxe(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function lB(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const eSe=/\s/,tSe={newCue(t,e,n,r){const i=[];let a,s,o,c,u;const d=self.VTTCue||self.TextTrackCue;for(let p=0;p<r.rows.length;p++)if(a=r.rows[p],o=!0,c=0,u="",!a.isEmpty()){var h;for(let x=0;x<a.chars.length;x++)eSe.test(a.chars[x].uchar)&&o?c++:(u+=a.chars[x].uchar,o=!1);a.cueStartTime=e,e===n&&(n+=1e-4),c>=16?c--:c++;const y=qG(u.trim()),v=p_(e,n,y);t!=null&&(h=t.cues)!=null&&h.getCueById(v)||(s=new d(e,n,y),s.id=v,s.line=p+1,s.align="left",s.position=10+Math.min(80,Math.floor(c*8/32)*10),i.push(s))}return t&&i.length&&(i.sort((p,y)=>p.line==="auto"||y.line==="auto"?0:p.line>8&&y.line>8?y.line-p.line:p.line-y.line),i.forEach(p=>UG(t,p))),i}};function nSe(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const rSe=/(\d+)-(\d+)\/(\d+)/;class uB{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||oSe,this.controller=new self.AbortController,this.stats=new Ww}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const a=iSe(e,this.controller.signal),s=e.responseType==="arraybuffer",o=s?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=r,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),n.timeout=c&&be(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},n.timeout),(kf(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(h=>{var p;this.response=this.loader=h;const y=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},u-(y-i.loading.start)),!h.ok){const{status:x,statusText:b}=h;throw new lSe(b||"fetch, bad network response",x,h)}i.loading.first=y,i.total=sSe(h.headers)||i.total;const v=(p=this.callbacks)==null?void 0:p.onProgress;return v&&be(n.highWaterMark)?this.loadProgressively(h,i,e,n.highWaterMark,v):s?h.arrayBuffer():e.responseType==="json"?h.json():h.text()}).then(h=>{var p,y;const v=this.response;if(!v)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const x=h[o];x&&(i.loaded=i.total=x);const b={url:v.url,data:h,code:v.status},T=(p=this.callbacks)==null?void 0:p.onProgress;T&&!be(n.highWaterMark)&&T(i,e,h,v),(y=this.callbacks)==null||y.onSuccess(b,i,e,v)}).catch(h=>{var p;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const y=h&&h.code||0,v=h?h.message:null;(p=this.callbacks)==null||p.onError({code:y,text:v},e,h?h.details:null,i)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,r,i=0,a){const s=new uG,o=e.body.getReader(),c=()=>o.read().then(u=>{if(u.done)return s.dataLength&&a(n,r,s.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const d=u.value,h=d.length;return n.loaded+=h,h<i||s.dataLength?(s.push(d),s.dataLength>=i&&a(n,r,s.flush().buffer,e)):a(n,r,d.buffer,e),c()}).catch(()=>Promise.reject());return c()}}function iSe(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(ut({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function aSe(t){const e=rSe.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function sSe(t){const e=t.get("Content-Range");if(e){const r=aSe(e);if(be(r))return r}const n=t.get("Content-Length");if(n)return parseInt(n)}function oSe(t,e){return new self.Request(t.url,e)}class lSe extends Error{constructor(e,n,r){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const uSe=/^age:\s*[\d.]+\s*$/im;class WG{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Ww,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return a(r,n.url)}).catch(s=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",n.url,!0),a(r,n.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(s=>{var o;(o=this.callbacks)==null||o.onError({code:r.status,text:s.message},n,r,i)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const i=n.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:s}=r.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&be(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const i=n.readyState,a=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const u=n.status,d=n.responseType==="text"?n.responseText:null;if(u>=200&&u<300){const v=d??n.response;if(v!=null){var s,o;r.loading.end=Math.max(self.performance.now(),r.loading.first);const x=n.responseType==="arraybuffer"?v.byteLength:v.length;r.loaded=r.total=x,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const b=(s=this.callbacks)==null?void 0:s.onProgress;b&&b(r,e,v,n);const T={url:n.responseURL,data:v,code:u};(o=this.callbacks)==null||o.onSuccess(T,r,e,n);return}}const h=a.loadPolicy.errorRetry,p=r.retry,y={url:e.url,data:void 0,code:u};if(Np(h,p,!1,y))this.retry(h);else{var c;Ze.error(`${u} while loading ${e.url}`),(c=this.callbacks)==null||c.onError({code:u,text:n.statusText},e,n,r)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(Np(e,n,!0))this.retry(e);else{var r;Ze.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=Jw(e,r.retry),r.retry++,Ze.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&uSe.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const cSe={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},fSe=ht(ht({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:WG,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Pye,bufferController:Ebe,capLevelController:d_,errorController:Uye,fpsController:mxe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:J8,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:cSe},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},dSe()),{},{subtitleStreamController:_xe,subtitleTrackController:yxe,timelineController:Zxe,audioStreamController:vbe,audioTrackController:bbe,emeController:pl,cmcdController:fxe,contentSteeringController:hxe,interstitialsController:wxe});function dSe(){return{cueHandler:tSe,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function hSe(t,e,n){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=QA(t),i=["manifest","level","frag"],a=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(s=>{const o=`${s==="level"?"playlist":s}LoadPolicy`,c=e[o]===void 0,u=[];a.forEach(d=>{const h=`${s}Loading${d}`,p=e[h];if(p!==void 0&&c){u.push(h);const y=r[o].default;switch(e[o]={default:y},d){case"TimeOut":y.maxLoadTimeMs=p,y.maxTimeToFirstByteMs=p;break;case"MaxRetry":y.errorRetry.maxNumRetry=p,y.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":y.errorRetry.retryDelayMs=p,y.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":y.errorRetry.maxRetryDelayMs=p,y.timeoutRetry.maxRetryDelayMs=p;break}}}),u.length&&n.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${o}": ${Et(e[o])}`)}),ht(ht({},r),e)}function QA(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(QA):Object.keys(t).reduce((e,n)=>(e[n]=QA(t[n]),e),{}):t}function mSe(t,e){const n=t.loader;n!==uB&&n!==WG?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):nSe()&&(t.loader=uB,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const vm=2,pSe=.1,gSe=.05,ySe=100;class vSe extends W8{constructor(e,n){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=n,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,n){this.setInterval(ySe),this.mediaSource=n.mediaSource;const r=this.media=n.media;Lr(r,"playing",this.onMediaPlaying),Lr(r,"waiting",this.onMediaWaiting),Lr(r,"ended",this.onMediaEnded)}onMediaDetaching(e,n){this.clearInterval();const{media:r}=this;r&&(Zr(r,"playing",this.onMediaPlaying),Zr(r,"waiting",this.onMediaWaiting),Zr(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,n){this.buffered=n.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const n=this.media.currentTime;this.poll(n,this.lastCurrentTime),this.lastCurrentTime=n}poll(e,n){var r,i;const a=(r=this.hls)==null?void 0:r.config;if(!a)return;const s=this.media;if(!s)return;const{seeking:o}=s,c=this.seeking&&!o,u=!this.seeking&&o,d=s.paused&&!o||s.ended||s.playbackRate===0;if(this.seeking=o,e!==n){n&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,a.nudgeOnVideoHole&&!d&&e>n&&this.nudgeOnVideoHole(e,n)),this.waiting===0&&this.stallResolved(e);return}if(u||c){c&&this.stallResolved(e);return}if(d){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&s.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!1}));return}if(!ke.getBuffered(s).length){this.nudgeRetry=0;return}const h=ke.bufferInfo(s,e,0),p=h.nextStart||0,y=this.fragmentTracker;if(o&&y&&this.hls){const C=cB(this.hls.inFlightFragments,e),L=h.len>vm,P=!p||C||p-e>vm&&!y.getPartialFragment(e);if(L||P)return;this.moved=!1}const v=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&y){if(!(h.len>0)&&!p)return;const L=Math.max(p,h.start||0)-e,N=!!(v!=null&&v.live)?v.targetduration*2:vm,k=y.getPartialFragment(e);if(L>0&&(L<=N||k)){s.paused||this._trySkipBufferHole(k);return}}const x=a.detectStallWithCurrentTimeMs,b=self.performance.now(),T=this.waiting;let _=this.stalled;if(_===null)if(T>0&&b-T<x)_=this.stalled=T;else{this.stalled=b;return}const w=b-_;if(!o&&(w>=x||T)&&this.hls){var O;if(((O=this.mediaSource)==null?void 0:O.readyState)==="ended"&&!(v!=null&&v.live)&&Math.abs(e-((v==null?void 0:v.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(h),!this.media||!this.hls)return}const R=ke.bufferInfo(s,e,a.maxBufferHole);this._tryFixBufferStall(R,w,e)}stallResolved(e){const n=this.stalled;if(n&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-n;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(D.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,n){var r;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&i&&i.length>1&&e>i.end(0)){const a=ke.bufferedInfo(ke.timeRangesToArray(this.buffered.audio),e,0);if(a.len>1&&n>=a.start){const s=ke.timeRangesToArray(i),o=ke.bufferedInfo(s,n,0).bufferedIndex;if(o>-1&&o<s.length-1){const c=ke.bufferedInfo(s,e,0).bufferedIndex,u=s[o].end,d=s[o+1].start;if((c===-1||c>o)&&d-u<1&&e-u<2){const h=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${u} -> ${d} buffered index: ${c}`);this.warn(h.message),this.media.currentTime+=1e-6;const p=this.fragmentTracker.getPartialFragment(e)||void 0,y=ke.bufferInfo(this.media,e,0);this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:p,buffer:y.len,bufferInfo:y})}}}}}_tryFixBufferStall(e,n,r){var i,a;const{fragmentTracker:s,media:o}=this,c=(i=this.hls)==null?void 0:i.config;if(!o||!s||!c)return;const u=(a=this.hls)==null?void 0:a.latestLevelDetails,d=s.getPartialFragment(r);if((d||u!=null&&u.live&&r<u.fragmentStart)&&(this._trySkipBufferHole(d)||!this.media))return;const h=e.buffered,p=this.adjacentTraversal(e,r);(h&&h.length>1&&e.len>c.maxBufferHole||e.nextStart&&(e.nextStart-r<c.maxBufferHole||p))&&(n>c.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,n){const r=this.fragmentTracker,i=e.nextStart;if(r&&i){const a=r.getFragAtPos(n,Se.MAIN),s=r.getFragAtPos(i,Se.MAIN);if(a&&s)return s.sn-a.sn<2}return!1}_reportStall(e){const{hls:n,media:r,stallReported:i,stalled:a}=this;if(!i&&a!==null&&r&&n){this.stallReported=!0;const s=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${Et(e)})`);this.warn(s.message),n.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len,bufferInfo:e,stalled:{start:a}})}}_trySkipBufferHole(e){var n;const{fragmentTracker:r,media:i}=this,a=(n=this.hls)==null?void 0:n.config;if(!i||!r||!a)return 0;const s=i.currentTime,o=ke.bufferInfo(i,s,0),c=s<o.start?o.start:o.nextStart;if(c&&this.hls){const d=o.len<=a.maxBufferHole,h=o.len>0&&o.len<1&&i.readyState<3,p=c-s;if(p>0&&(d||h)){if(p>a.maxBufferHole){let v=!1;if(s===0){const x=r.getAppendedFrag(0,Se.MAIN);x&&c<x.end&&(v=!0)}if(!v){const x=e||r.getAppendedFrag(s,Se.MAIN);if(x){var u;if(!((u=this.hls.loadLevelObj)!=null&&u.details)||cB(this.hls.inFlightFragments,c))return 0;let T=!1,_=x.end;for(;_<c;){const w=r.getAppendedFrag(_,Se.MAIN)||r.getPartialFragment(_);if(w)_+=w.duration;else{T=!0;break}}if(T)return 0}}}const y=Math.max(c+gSe,s+pSe);if(this.warn(`skipping hole, adjusting currentTime from ${s} to ${y}`),this.moved=!0,i.currentTime=y,!(e!=null&&e.gap)){const v=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${y}`);this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:v,reason:v.message,frag:e||void 0,buffer:o.len,bufferInfo:o})}return y}}return 0}_tryNudgeBuffer(e){const{hls:n,media:r,nudgeRetry:i}=this,a=n==null?void 0:n.config;if(!r||!a)return 0;const s=r.currentTime;if(this.nudgeRetry++,i<a.nudgeMaxRetry){const o=s+(i+1)*a.nudgeOffset,c=new Error(`Nudging 'currentTime' from ${s} to ${o}`);this.warn(c.message),r.currentTime=o,n.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_NUDGE_ON_STALL,error:c,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${a.nudgeMaxRetry} nudges`);this.error(o.message),n.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function cB(t,e){const n=fB(t.main);if(n&&n.start<=e)return n;const r=fB(t.audio);return r&&r.start<=e?r:null}function fB(t){if(!t)return null;switch(t.state){case fe.IDLE:case fe.STOPPED:case fe.ENDED:case fe.ERROR:return null}return t.frag}const bSe=.25;function ZA(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function dB(t,e,n,r,i){let a=new t(e,n,"");try{a.value=r,i&&(a.type=i)}catch{a=new t(e,n,Et(i?ht({type:i},r):r))}return a}const em=(()=>{const t=ZA();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class xSe{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(D.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,n){var r;this.media=n.media,((r=n.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,n){this.media=null,!n.transferMedia&&(this.id3Track&&(this.removeCues&&ul(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const r=e[n];if(r.kind==="metadata"&&r.label==="id3")return jG(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:i}}}=this;if(!r&&!i)return;const{samples:a}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=ZA();if(s)for(let o=0;o<a.length;o++){const c=a[o].type;if(c===ur.emsg&&!r||!i)continue;const u=gG(a[o].data);if(u){const d=a[o].pts;let h=d+a[o].duration;h>em&&(h=em),h-d<=0&&(h=d+bSe);for(let y=0;y<u.length;y++){const v=u[y];if(!yG(v)){this.updateId3CueEnds(d,c);const x=dB(s,d,h,v,c);x&&this.id3Track.addCue(x)}}}}}updateId3CueEnds(e,n){var r;const i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(let a=i.length;a--;){const s=i[a];s.type===n&&s.startTime<e&&s.endTime===em&&(s.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:r,type:i}){const{id3Track:a,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:c}}=s;if(a&&(o||c)){let u;i==="audio"?u=d=>d.type===ur.audioId3&&c:i==="video"?u=d=>d.type===ur.emsg&&o:u=d=>d.type===ur.audioId3&&c||d.type===ur.emsg&&o,WA(a,n,r,u)}}onLevelUpdated(e,{details:n}){this.updateDateRangeCues(n,!0)}onLevelPtsUpdated(e,n){Math.abs(n.drift)>.01&&this.updateDateRangeCues(n.details)}updateDateRangeCues(e,n){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:r}=this,{dateRanges:i}=e,a=Object.keys(i);let s=this.dateRangeCuesAppended;if(r&&n){var o;if((o=r.cues)!=null&&o.length){const d=Object.keys(s).filter(h=>!a.includes(h));for(let h=d.length;h--;){const p=d[h],y=s[p].cues;delete s[p],Object.keys(y).forEach(v=>{try{const x=y[v];x.removeEventListener("enter",this.onEventCueEnter),r.removeCue(x)}catch{}})}}else s=this.dateRangeCuesAppended={}}const c=e.fragments[e.fragments.length-1];if(a.length===0||!be(c==null?void 0:c.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const u=ZA();for(let d=0;d<a.length;d++){const h=a[d],p=i[h],y=p.startTime,v=s[h],x=(v==null?void 0:v.cues)||{};let b=(v==null?void 0:v.durationKnown)||!1,T=em;const{duration:_,endDate:w}=p;if(w&&_!==null)T=y+_,b=!0;else if(p.endOnNext&&!b){const R=a.reduce((C,L)=>{if(L!==p.id){const P=i[L];if(P.class===p.class&&P.startDate>p.startDate&&(!C||p.startDate<C.startDate))return P}return C},null);R&&(T=R.startTime,b=!0)}const O=Object.keys(p.attr);for(let R=0;R<O.length;R++){const C=O[R];if(!Qye(C))continue;const L=x[C];if(L)b&&!v.durationKnown?L.endTime=T:Math.abs(L.startTime-y)>.01&&(L.startTime=y,L.endTime=T);else if(u){let P=p.attr[C];Zye(C)&&(P=P8(P));const k=dB(u,y,T,{key:C,data:P},ur.dateRange);k&&(k.id=h,this.id3Track.addCue(k),x[C]=k,this.hls.config.interstitialsController&&(C==="X-ASSET-LIST"||C==="X-ASSET-URL")&&k.addEventListener("enter",this.onEventCueEnter))}}s[h]={cues:x,dateRange:p,durationKnown:b}}}}class SSe{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:n}=this,r=this.levelDetails;if(!n||!r)return;this.currentTime=n.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:a,maxLiveSyncPlaybackRate:s}=this.config;if(!a||s===1||!r.live)return;const o=this.targetLatency;if(o===null)return;const c=i-o,u=Math.min(this.maxLatency,o+r.targetduration);if(c<u&&c>.05&&this.forwardBufferLength>1){const h=Math.min(2,Math.max(1,s)),p=Math.round(2/(1+Math.exp(-.75*c-this.edgeStalled))*20)/20,y=Math.min(h,Math.max(1,p));this.changeMediaPlaybackRate(n,y)}else n.playbackRate!==1&&n.playbackRate!==0&&this.changeMediaPlaybackRate(n,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const n=this.levelDetails;return n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:n,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:a,liveSyncDurationCount:s,lowLatencyMode:o}=this.config,c=this.hls.userConfig;let u=o&&r||n;(this._targetLatencyUpdated||c.liveSyncDuration||c.liveSyncDurationCount||u===0)&&(u=a!==void 0?a:s*i);const d=i;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,d)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency;if(e===null||n===null)return null;const r=this.levelDetails;if(r===null)return null;const i=r.edge,a=e-n-this.edgeStalled,s=i-r.totalduration,o=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(s,a),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e}=this,n=this.levelDetails;if(!e||!n)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.ERROR,this.onError,this))}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){n.advanced&&this.onTimeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,n){var r;n.details===re.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,n){var r,i;e.playbackRate!==n&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${n}`),e.playbackRate=n)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class ESe extends f_{constructor(e,n){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const r=this.hls.config.preferManagedMediaSource,i=[],a={},s={};let o=!1,c=!1,u=!1;n.levels.forEach(d=>{const h=d.attrs;let{audioCodec:p,videoCodec:y}=d;p&&(d.audioCodec=p=Lp(p,r)||void 0),y&&(y=d.videoCodec=gye(y));const{width:v,height:x,unknownCodecs:b}=d;let T=b?b.length:0;if(b)for(let k=T;k--;){const M=b[k];this.isAudioSupported(M)?(d.audioCodec=p=p?`${p},${M}`:M,T--,$l.audio[p.substring(0,4)]=2):this.isVideoSupported(M)&&(d.videoCodec=y=y?`${y},${M}`:M,T--,$l.video[y.substring(0,4)]=2)}if(o||(o=!!(v&&x)),c||(c=!!y),u||(u=!!p),T||p&&!this.isAudioSupported(p)||y&&!this.isVideoSupported(y)){this.log(`Some or all CODECS not supported "${h.CODECS}"`);return}const{CODECS:_,"FRAME-RATE":w,"HDCP-LEVEL":O,"PATHWAY-ID":R,RESOLUTION:C,"VIDEO-RANGE":L}=h,N=`${`${R||"."}-`}${d.bitrate}-${C}-${w}-${_}-${L}-${O}`;if(a[N])if(a[N].uri!==d.url&&!d.attrs["PATHWAY-ID"]){const k=s[N]+=1;d.attrs["PATHWAY-ID"]=new Array(k+1).join(".");const M=this.createLevel(d);a[N]=M,i.push(M)}else a[N].addGroupId("audio",h.AUDIO),a[N].addGroupId("text",h.SUBTITLES);else{const k=this.createLevel(d);a[N]=k,s[N]=1,i.push(k)}}),this.filterAndSortMediaOptions(i,n,o,c,u)}createLevel(e){const n=new If(e),r=e.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(i.message),n.supportedResult=V8(i,[])}return n}isAudioSupported(e){return kA(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return kA(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,n,r,i,a){let s=[],o=[],c=e;if((r||i)&&a&&(c=c.filter(({videoCodec:b,videoRange:T,width:_,height:w})=>(!!b||!!(_&&w))&&Aye(T))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let b="no level with compatible codecs found in manifest",T=b;n.levels.length&&(T=`one or more CODECS in variant not supported: ${Et(n.levels.map(w=>w.attrs.CODECS).filter((w,O,R)=>R.indexOf(w)===O))}`,this.warn(T),b+=` (${T})`);const _=new Error(b);this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:_,reason:T})}});return}n.audioTracks&&(s=n.audioTracks.filter(b=>!b.audioCodec||this.isAudioSupported(b.audioCodec)),hB(s)),n.subtitles&&(o=n.subtitles,hB(o));const u=c.slice(0);c.sort((b,T)=>{if(b.attrs["HDCP-LEVEL"]!==T.attrs["HDCP-LEVEL"])return(b.attrs["HDCP-LEVEL"]||"")>(T.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&b.height!==T.height)return b.height-T.height;if(b.frameRate!==T.frameRate)return b.frameRate-T.frameRate;if(b.videoRange!==T.videoRange)return Dp.indexOf(b.videoRange)-Dp.indexOf(T.videoRange);if(b.videoCodec!==T.videoCodec){const _=aU(b.videoCodec),w=aU(T.videoCodec);if(_!==w)return w-_}if(b.uri===T.uri&&b.codecSet!==T.codecSet){const _=Cp(b.codecSet),w=Cp(T.codecSet);if(_!==w)return w-_}return b.averageBitrate!==T.averageBitrate?b.averageBitrate-T.averageBitrate:0});let d=u[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==u.length)){for(let b=0;b<u.length;b++)if(u[b].pathwayId===c[0].pathwayId){d=u[b];break}}this._levels=c;for(let b=0;b<c.length;b++)if(c[b]===d){var h;this._firstLevel=b;const T=d.bitrate,_=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${T}`),((h=this.hls.userConfig)==null?void 0:h.abrEwmaDefaultEstimate)===void 0){const w=Math.min(T,this.hls.config.abrEwmaDefaultEstimateMax);w>_&&_===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=w)}break}const p=a&&!i,y=this.hls.config,v=!!(y.audioStreamController&&y.audioTrackController),x={levels:c,audioTracks:s,subtitleTracks:o,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:a,video:i,altAudio:v&&!p&&s.some(b=>!!b.url)};this.hls.trigger(D.MANIFEST_PARSED,x)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const d=new Error("invalid level idx"),h=e<0;if(this.hls.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.LEVEL_SWITCH_ERROR,level:e,fatal:h,error:d,reason:d.message}),h)return;e=Math.min(e,n.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,a=i?i.attrs["PATHWAY-ID"]:void 0,s=n[e],o=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,r===e&&i&&a===o)return;this.log(`Switching to level ${e} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${o?" with Pathway "+o:""} from level ${r}${a?" with Pathway "+a:""}`);const c={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(D.LEVEL_SWITCHING,c);const u=s.details;if(!u||u.live){const d=this.switchParams(s.uri,i==null?void 0:i.details,u);this.loadPlaylist(d)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const n=this.steering.pathways(),r=e.filter(i=>n.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${n}`);return}this.steering.pathwayPriority=r}}onError(e,n){n.fatal||!n.context||n.context.type===He.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===Se.MAIN){const r=n.elementaryStreams;if(!Object.keys(r).some(a=>!!r[a]))return;const i=this._levels[n.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,n){var r;const{level:i,details:a}=n,s=n.levelInfo;if(!s){var o;this.warn(`Invalid level index ${i}`),(o=n.deliveryDirectives)!=null&&o.skip&&(a.deltaUpdateFailed=!0);return}if(s===this.currentLevel||n.withoutMultiVariant){s.fragmentError===0&&(s.loadError=0);let c=s.details;c===n.details&&c.advanced&&(c=void 0),this.playlistLoaded(i,n,c)}else(r=n.deliveryDirectives)!=null&&r.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=this.getUrlWithDirectives(e.uri,n),i=this.currentLevelIndex,a=e.attrs["PATHWAY-ID"],s=e.details,o=s==null?void 0:s.age;this.log(`Loading level index ${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${a?" Pathway "+a:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${r}`),this.hls.trigger(D.LEVEL_LOADING,{url:r,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:n||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;if(this._levels.length===1)return;const r=this._levels.filter((a,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(a),a===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,a.details&&a.details.fragments.forEach(o=>o.level=-1)),!1));sG(r),this._levels=r,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=r.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(D.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(D.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function hB(t){const e={};t.forEach(n=>{const r=n.groupId||"";n.id=e[r]=e[r]||0,e[r]++})}function XG(){return self.SourceBuffer||self.WebKitSourceBuffer}function QG(){if(!Qa())return!1;const e=XG();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function TSe(){if(!QG())return!1;const t=Qa();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(Df(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(Df(e,"audio"))))}function ASe(){var t;const e=XG();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const wSe=100;class _Se extends r_{constructor(e,n,r){super(e,n,r,"stream-controller",Se.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,a=i?i.currentTime:null;if(a===null||!be(a)||(this.log(`Media seeked to ${a.toFixed(3)}`),!this.getBufferedFrag(a)))return;const s=this.getFwdBufferInfoAtPos(i,a,Se.MAIN,0);if(s===null||s.len===0){this.warn(`Main forward buffer length at ${a} on "seeked" event ${s?s.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,n){if(this.levels){const{lastCurrentTime:r,hls:i}=this;if(this.stopLoad(),this.setInterval(wSe),this.level=-1,!this.startFragRequested){let a=i.startLevel;a===-1&&(i.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=i.firstAutoLevel),i.nextLoadLevel=a,this.level=i.loadLevel,this._hasEnoughToStart=!!n}r>0&&e===-1&&!n&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=fe.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=fe.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case fe.WAITING_LEVEL:{const{levels:n,level:r}=this,i=n==null?void 0:n[r],a=i==null?void 0:i.details;if(a&&(!a.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(a))break;this.state=fe.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=fe.IDLE;break}break}case fe.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:i,level:a}=this,s=i==null?void 0:i[a];this.resetStartWhenNotLoaded(s||null),this.state=fe.IDLE}}break}this.state===fe.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:r,media:i}=this;if(n===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const a=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[a]))return;const s=r[a],o=this.getMainFwdBufferInfo();if(o===null)return;const c=this.getLevelDetails();if(c&&this._streamEnded(o,c)){const x={};this.altAudio===2&&(x.type="video"),this.hls.trigger(D.BUFFER_EOS,x),this.state=fe.ENDED;return}if(!this.buffering)return;e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const u=s.details;if(!u||this.state===fe.WAITING_LEVEL||this.waitForLive(s)){this.level=a,this.state=fe.WAITING_LEVEL,this.startFragRequested=!1;return}const d=o.len,h=this.getMaxBufferLength(s.maxBitrate);if(d>=h)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const p=this.backtrackFragment?this.backtrackFragment.start:o.end;let y=this.getNextFragment(p,u);if(this.couldBacktrack&&!this.fragPrevious&&y&&Kt(y)&&this.fragmentTracker.getState(y)!==en.OK){var v;const b=((v=this.backtrackFragment)!=null?v:y).sn-u.startSN,T=u.fragments[b-1];T&&y.cc===T.cc&&(y=T,this.fragmentTracker.removeFragment(T))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(y&&this.isLoopLoading(y,p)){if(!y.gap){const b=this.audioOnly&&!this.altAudio?gt.AUDIO:gt.VIDEO,T=(b===gt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;T&&this.afterBufferFlushed(T,b,Se.MAIN)}y=this.getNextFragmentLoopLoading(y,u,o,Se.MAIN,h)}y&&(y.initSegment&&!y.initSegment.data&&!this.bitrateTest&&(y=y.initSegment),this.loadFragment(y,s,p))}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);i===en.NOT_LOADED||i===en.PARTIAL?Kt(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):super.loadFragment(e,n,r):this._loadInitSegment(e,n):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Se.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let r;const i=this.getAppendedFrag(n.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const a=this.getLevelDetails();if(a!=null&&a.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<a.targetduration*2)return}if(!n.paused&&e){const o=this.hls.nextLoadLevel,c=e[o],u=this.fragLastKbps;u&&this.fragCurrent?r=this.fragCurrent.duration*c.maxBitrate/(1e3*u)+1:r=0}else r=0;const s=this.getBufferedFrag(n.currentTime+r);if(s){const o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();const c=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,d=Math.max(s.end,c+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case fe.KEY_LOADING:case fe.FRAG_LOADING:case fe.FRAG_LOADING_WAITING_RETRY:case fe.PARSING:case fe.PARSED:this.state=fe.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio===2?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const r=n.media;Lr(r,"playing",this.onMediaPlaying),Lr(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,n){const{media:r}=this;r&&(Zr(r,"playing",this.onMediaPlaying),Zr(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,n),!n.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(D.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,n){let r=!1,i=!1;n.levels.forEach(a=>{const s=a.audioCodec;s&&(r=r||s.indexOf("mp4a.40.2")!==-1,i=i||s.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&i&&!ASe(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:r}=this;if(!r||this.state!==fe.IDLE)return;const i=n.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=fe.WAITING_LEVEL)}onLevelLoaded(e,n){var r;const{levels:i,startFragRequested:a}=this,s=n.level,o=n.details,c=o.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${c}`);const u=n.levelInfo,d=this.fragCurrent;d&&(this.state===fe.FRAG_LOADING||this.state===fe.FRAG_LOADING_WAITING_RETRY)&&d.level!==n.level&&d.loader&&this.abortCurrentFrag();let h=0;if(o.live||(r=u.details)!=null&&r.live){var p;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;h=this.alignPlaylists(o,u.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(u.details=o,this.levelLastLoaded=u,a||this.setStartPosition(o,h),this.hls.trigger(D.LEVEL_UPDATED,{details:o,level:s}),this.state===fe.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=fe.IDLE}a&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,a=this.getLoadPosition(),s=e.fragmentStart,o=e.edge,c=a>=s-n.maxFragLookUpTolerance&&a<=o;if(i!==null&&r.duration>i&&(a<i||!c)){const d=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;if((!c&&r.readyState<4||a<o-d)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),r.readyState))if(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var u;const h=ke.bufferInfo(r,i,0);if(!(h!=null&&(u=h.buffered)!=null&&u.length)){r.currentTime=i;return}if(h.start<=a){r.currentTime=i;return}const{nextStart:y}=ke.bufferedInfo(h.buffered,a,0);y&&(r.currentTime=y)}else r.currentTime=i}}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:i,payload:a}=e,{levels:s}=this;if(!s){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const o=s[r.level];if(!o){this.warn(`Level ${r.level} not found on progress`);return}const c=o.details;if(!c){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const u=o.videoCodec,d=c.PTSKnown||!c.live,h=(n=r.initSegment)==null?void 0:n.data,p=this._getAudioCodec(o),y=this.transmuxer=this.transmuxer||new OG(this.hls,Se.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=i?i.index:-1,x=v!==-1,b=new t_(r.level,r.sn,r.stats.chunkCount,a.byteLength,v,x),T=this.initPTS[r.cc];y.push(a,h,p,u,r,i,c.totalduration,d,b,T)}onAudioTrackSwitching(e,n){const r=this.hls,i=this.altAudio===2;if(Ip(n.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const s=this.fragCurrent;s&&(this.log("Switching to main audio track, cancel main fragment load"),s.abortRequests(),this.fragmentTracker.removeFragment(s)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.fragmentTracker.removeAllFragments(),r.once(D.BUFFER_FLUSHED,()=>{var s;(s=this.hls)==null||s.trigger(D.AUDIO_TRACK_SWITCHED,n)}),r.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(D.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const r=Ip(n.url,this.hls);if(r){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,n){const r=n.tracks;let i,a,s=!1;for(const o in r){const c=r[o];if(c.id==="main"){if(a=o,i=c,o==="video"){const u=r[o];u&&(this.videoBuffer=u.buffer)}}else s=!0}s&&i?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:r,part:i}=n,a=r.type===Se.MAIN;if(a){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===fe.PARSED&&(this.state=fe.IDLE);return}const o=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),Kt(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}const s=this.media;s&&(!this._hasEnoughToStart&&ke.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),a&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,n){var r;if(n.fatal){this.state=fe.ERROR;return}switch(n.details){case re.FRAG_GAP:case re.FRAG_PARSING_ERROR:case re.FRAG_DECRYPT_ERROR:case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Se.MAIN,n);break;case re.LEVEL_LOAD_ERROR:case re.LEVEL_LOAD_TIMEOUT:case re.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===fe.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===He.LEVEL&&(this.state=fe.IDLE);break;case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.resetLoadingState();break;case re.BUFFER_FULL_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case re.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onFragLoadEmergencyAborted(){this.state=fe.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==gt.AUDIO||!this.altAudio){const r=(n===gt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,n,Se.MAIN),this.tick())}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const i=this.timelineOffset;i&&r&&(r+=i);const a=this.getLevelDetails(),s=ke.getBuffered(e),o=s.length?s.start(0):0,c=o-r,u=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||c>0&&(c<u||this.loadingParts&&c<2*((a==null?void 0:a.partTarget)||0)))&&(this.log(`adjusting start position by ${c} to match buffer start`),r+=c,this.startPosition=r),n<r&&(this.log(`seek to target start position ${r} from current time ${n} buffer start ${o}`),e.currentTime=r)}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(r=>{const{hls:i}=this,a=r==null?void 0:r.frag;if(!a||this.fragContextChanged(a))return;n.fragmentError=0,this.state=fe.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=a.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(D.FRAG_LOADED,r),a.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const r=this.playlistType,{hls:i}=this,{remuxResult:a,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:c,part:u,level:d}=o,{video:h,text:p,id3:y,initSegment:v}=a,{details:x}=d,b=this.altAudio?void 0:a.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=fe.PARSING,v){if(v!=null&&v.tracks){const O=c.initSegment||c;this._bufferInitSegment(d,v.tracks,O,s),i.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:O,id:r,tracks:v.tracks})}const T=v.initPTS,_=v.timescale,w=this.initPTS[c.cc];be(T)&&(!w||w.baseTime!==T||w.timescale!==_)&&(this.initPTS[c.cc]={baseTime:T,timescale:_},i.trigger(D.INIT_PTS_FOUND,{frag:c,id:r,initPTS:T,timescale:_}))}if(h&&x){b&&h.type==="audiovideo"&&this.logMuxedErr(c);const T=x.fragments[c.sn-1-x.startSN],_=c.sn===x.startSN,w=!T||c.cc>T.cc;if(a.independent!==!1){const{startPTS:O,endPTS:R,startDTS:C,endDTS:L}=h;if(u)u.elementaryStreams[h.type]={startPTS:O,endPTS:R,startDTS:C,endDTS:L};else if(h.firstKeyFrame&&h.independent&&s.id===1&&!w&&(this.couldBacktrack=!0),h.dropped&&h.independent){const P=this.getMainFwdBufferInfo(),N=(P?P.end:this.getLoadPosition())+this.config.maxBufferHole,k=h.firstKeyFramePTS?h.firstKeyFramePTS:O;if(!_&&N<k-this.config.maxBufferHole&&!w){this.backtrack(c);return}else w&&(c.gap=!0);c.setElementaryStreamInfo(h.type,c.start,R,c.start,L,!0)}else _&&O-(x.appliedTimelineOffset||0)>vm&&(c.gap=!0);c.setElementaryStreamInfo(h.type,O,R,C,L),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(h,c,u,s,_||w)}else if(_||w)c.gap=!0;else{this.backtrack(c);return}}if(b){const{startPTS:T,endPTS:_,startDTS:w,endDTS:O}=b;u&&(u.elementaryStreams[gt.AUDIO]={startPTS:T,endPTS:_,startDTS:w,endDTS:O}),c.setElementaryStreamInfo(gt.AUDIO,T,_,w,O),this.bufferFragmentData(b,c,u,s)}if(x&&y!=null&&(n=y.samples)!=null&&n.length){const T={id:r,frag:c,details:x,samples:y.samples};i.trigger(D.FRAG_PARSING_METADATA,T)}if(x&&p){const T={id:r,frag:c,details:x,samples:p.samples};i.trigger(D.FRAG_PARSING_USERDATA,T)}}logMuxedErr(e){this.warn(`${Kt(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,n,r,i){if(this.state!==fe.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&(delete n.audio,n.audiovideo&&this.logMuxedErr(r));const{audio:a,video:s,audiovideo:o}=n;if(a){const u=e.audioCodec;let d=fm(a.codec,u);d==="mp4a"&&(d="mp4a.40.5");const h=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){d&&(d.indexOf("mp4a.40.5")!==-1?d="mp4a.40.2":d="mp4a.40.5");const p=a.metadata;p&&"channelCount"in p&&(p.channelCount||1)!==1&&h.indexOf("firefox")===-1&&(d="mp4a.40.5")}d&&d.indexOf("mp4a.40.5")!==-1&&h.indexOf("android")!==-1&&a.container!=="audio/mpeg"&&(d="mp4a.40.2",this.log(`Android: force audio codec to ${d}`)),u&&u!==d&&this.log(`Swapping manifest audio codec "${u}" for "${d}"`),a.levelCodec=d,a.id=Se.MAIN,this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${d||""}/${u||""}/${a.codec}]`),delete n.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=Se.MAIN;const u=s.codec;if((u==null?void 0:u.length)===4)switch(u){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${u}]${s.codec!==u?" parsed-corrected="+s.codec:""}${s.supplemental?" supplemental="+s.supplemental:""}`),delete n.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete n.video,delete n.audio);const c=Object.keys(n);if(c.length){if(this.hls.trigger(D.BUFFER_CODECS,n),!this.hls)return;c.forEach(u=>{const h=n[u].initSegment;h!=null&&h.byteLength&&this.hls.trigger(D.BUFFER_APPENDING,{type:u,data:h,frag:r,part:null,chunkMeta:i,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Se.MAIN)}get maxBufferLength(){const{levels:e,level:n}=this,r=e==null?void 0:e[n];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=fe.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(ke.isBuffered(e,r)?n=this.getAppendedFrag(r):ke.isBuffered(e,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const i=this.fragPlaying,a=n.level;(!i||n.sn!==i.sn||i.level!==a)&&(this.fragPlaying=n,this.hls.trigger(D.FRAG_CHANGED,{frag:n}),(!i||i.level!==a)&&this.hls.trigger(D.LEVEL_SWITCHED,{level:a}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return be(n)?this.getAppendedFrag(n):null}get currentProgramDateTime(){var e;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(be(n)){const r=this.getLevelDetails(),i=this.currentFrag||(r?eo(null,r.fragments,n):null);if(i){const a=i.programDateTime;if(a!==null){const s=a+(n-i.start)*1e3;return new Date(s)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class RSe{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[r].loader;if(i){var n;if(e&&e!==((n=i.context)==null?void 0:n.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=re.KEY_LOAD_ERROR,r,i,a){return new Ki({type:Te.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:a,error:r,networkDetails:i})}loadClear(e,n,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(n.length)for(let i=0,a=n.length;i<a;i++){const s=n[i];if(e.cc<=s.cc&&(!Kt(e)||!Kt(s)||e.sn<s.sn)||!r&&i==a-1)return this.emeController.selectKeySystemFormat(s).then(o=>{if(!this.emeController)return;s.setKeyFormat(o);const c=$A(o);if(c)return this.emeController.getKeySystemAccess([c])})}if(this.config.requireKeySystemAccessOnStart){const i=hm(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var r,i;n&&e.setKeyFormat(n);const a=e.decryptdata;if(!a){const u=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,u))}const s=a.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));let o=this.keyUriToKeyInfo[s];if((r=o)!=null&&r.decryptdata.key)return a.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((i=o)!=null&&i.keyLoadPromise){var c;switch((c=o.mediaKeySessionContext)==null?void 0:c.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(u=>(a.key=u.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[s]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(e,n){const r={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(r);if(i)return(e.keyLoadPromise=i.then(a=>(e.mediaKeySessionContext=a,r))).catch(a=>{throw e.keyLoadPromise=null,a})}return Promise.resolve(r)}loadKeyHTTP(e,n){const r=this.config,i=r.loader,a=new i(r);return n.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((s,o)=>{const c={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},u=r.keyLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,y,v,x)=>{const{frag:b,keyInfo:T,url:_}=v;if(!b.decryptdata||T!==this.keyUriToKeyInfo[_])return o(this.createKeyLoadError(b,re.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),x));T.decryptdata.key=b.decryptdata.key=new Uint8Array(p.data),b.keyLoader=null,T.loader=null,s({frag:b,keyInfo:T})},onError:(p,y,v,x)=>{this.resetLoader(y),o(this.createKeyLoadError(n,re.KEY_LOAD_ERROR,new Error(`HTTP Error ${p.code} loading key ${p.text}`),v,ht({url:c.url,data:void 0},p)))},onTimeout:(p,y,v)=>{this.resetLoader(y),o(this.createKeyLoadError(n,re.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),v))},onAbort:(p,y,v)=>{this.resetLoader(y),o(this.createKeyLoadError(n,re.INTERNAL_ABORTED,new Error("key loading aborted"),v))}};a.load(c,d,h)})}resetLoader(e){const{frag:n,keyInfo:r,url:i}=e,a=r.loader;n.keyLoader===a&&(n.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],a&&a.destroy()}}function mB(t){const{type:e}=t;switch(e){case He.AUDIO_TRACK:return Se.AUDIO;case He.SUBTITLE_TRACK:return Se.SUBTITLE;default:return Se.MAIN}}function $E(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class OSe{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const n=this.hls.config,r=n.pLoader,i=n.loader,a=r||i,s=new a(n);return this.loaders[e.type]=s,s}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:He.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,n){const{id:r,level:i,pathwayId:a,url:s,deliveryDirectives:o,levelInfo:c}=n;this.load({id:r,level:i,pathwayId:a,responseType:"text",type:He.LEVEL,url:s,deliveryDirectives:o,levelOrTrack:c})}onAudioTrackLoading(e,n){const{id:r,groupId:i,url:a,deliveryDirectives:s,track:o}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:He.AUDIO_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onSubtitleTrackLoading(e,n){const{id:r,groupId:i,url:a,deliveryDirectives:s,track:o}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:He.SUBTITLE_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onLevelsUpdated(e,n){const r=this.loaders[He.LEVEL];if(r){const i=r.context;i&&!n.levels.some(a=>a===i.levelOrTrack)&&(r.abort(),delete this.loaders[He.LEVEL])}}load(e){var n;const r=this.hls.config;let i=this.getInternalLoader(e);if(i){const u=this.hls.logger,d=i.context;if(d&&d.levelOrTrack===e.levelOrTrack&&(d.url===e.url||d.deliveryDirectives&&!e.deliveryDirectives)){d.url===e.url?u.log(`[playlist-loader]: ignore ${e.url} ongoing request`):u.log(`[playlist-loader]: ignore ${e.url} in favor of ${d.url}`);return}u.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let a;if(e.type===He.MANIFEST?a=r.manifestLoadPolicy.default:a=ut({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),be((n=e.deliveryDirectives)==null?void 0:n.part)){let u;if(e.type===He.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===He.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===He.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const d=u.partTarget,h=u.targetduration;if(d&&h){const p=Math.max(d*3,h*.8)*1e3;a=ut({},a,{maxTimeToFirstByteMs:Math.min(p,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(p,a.maxTimeToFirstByteMs)})}}}const s=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},c={onSuccess:(u,d,h,p)=>{const y=this.getInternalLoader(h);this.resetInternalLoader(h.type);const v=u.data;if(v.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(u,h,new Error("no EXTM3U delimiter"),p||null,d);return}d.parsing.start=performance.now(),vi.isMediaPlaylist(v)||h.type!==He.MANIFEST?this.handleTrackOrLevelPlaylist(u,d,h,p||null,y):this.handleMasterPlaylist(u,d,h,p)},onError:(u,d,h,p)=>{this.handleNetworkError(d,h,!1,u,p)},onTimeout:(u,d,h)=>{this.handleNetworkError(d,h,!0,void 0,u)}};i.load(e,o,c)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:n},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${n}`),this.hls.startLoad(n))}handleMasterPlaylist(e,n,r,i){const a=this.hls,s=e.data,o=$E(e,r),c=vi.parseMasterPlaylist(s,o);if(c.playlistParsingError){this.handleManifestParsingError(e,r,c.playlistParsingError,i,n);return}const{contentSteering:u,levels:d,sessionData:h,sessionKeys:p,startTimeOffset:y,variableList:v}=c;this.variableList=v;const{AUDIO:x=[],SUBTITLES:b,"CLOSED-CAPTIONS":T}=vi.parseMasterPlaylistMedia(s,o,c);x.length&&!x.some(w=>!w.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),x.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Ct({}),bitrate:0,url:""})),a.trigger(D.MANIFEST_LOADED,{levels:d,audioTracks:x,subtitles:b,captions:T,contentSteering:u,url:o,stats:n,networkDetails:i,sessionData:h,sessionKeys:p,startTimeOffset:y,variableList:v})}handleTrackOrLevelPlaylist(e,n,r,i,a){const s=this.hls,{id:o,level:c,type:u}=r,d=$E(e,r),h=be(c)?c:be(o)?o:0,p=mB(r),y=vi.parseLevelPlaylist(e.data,d,h,p,0,this.variableList);if(u===He.MANIFEST){const v={attrs:new Ct({}),bitrate:0,details:y,name:"",url:d};y.requestScheduled=n.loading.start+rG(y,0),s.trigger(D.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:d,stats:n,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=y,this.handlePlaylistLoaded(y,e,n,r,i,a)}handleManifestParsingError(e,n,r,i,a){this.hls.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.MANIFEST_PARSING_ERROR,fatal:n.type===He.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:n,networkDetails:i,stats:a})}handleNetworkError(e,n,r=!1,i,a){let s=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===He.LEVEL?s+=`: ${e.level} id: ${e.id}`:(e.type===He.AUDIO_TRACK||e.type===He.SUBTITLE_TRACK)&&(s+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(s);this.hls.logger.warn(`[playlist-loader]: ${s}`);let c=re.UNKNOWN,u=!1;const d=this.getInternalLoader(e);switch(e.type){case He.MANIFEST:c=r?re.MANIFEST_LOAD_TIMEOUT:re.MANIFEST_LOAD_ERROR,u=!0;break;case He.LEVEL:c=r?re.LEVEL_LOAD_TIMEOUT:re.LEVEL_LOAD_ERROR,u=!1;break;case He.AUDIO_TRACK:c=r?re.AUDIO_TRACK_LOAD_TIMEOUT:re.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case He.SUBTITLE_TRACK:c=r?re.SUBTITLE_TRACK_LOAD_TIMEOUT:re.SUBTITLE_LOAD_ERROR,u=!1;break}d&&this.resetInternalLoader(e.type);const h={type:Te.NETWORK_ERROR,details:c,fatal:u,url:e.url,loader:d,context:e,error:o,networkDetails:n,stats:a};if(i){const p=(n==null?void 0:n.url)||e.url;h.response=ht({url:p,data:void 0},i)}this.hls.trigger(D.ERROR,h)}handlePlaylistLoaded(e,n,r,i,a,s){const o=this.hls,{type:c,level:u,id:d,groupId:h,deliveryDirectives:p}=i,y=$E(n,i),v=mB(i),x=typeof i.level=="number"&&v===Se.MAIN?u:void 0;if(!e.fragments.length){const T=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:T,reason:T.message,response:n,context:i,level:x,parent:v,networkDetails:a,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const b=e.playlistParsingError;if(b){if(this.hls.logger.warn(b),!o.config.ignorePlaylistParsingErrors){o.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:b,reason:b.message,response:n,context:i,level:x,parent:v,networkDetails:a,stats:r});return}e.playlistParsingError=null}switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),(!s.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),c){case He.MANIFEST:case He.LEVEL:o.trigger(D.LEVEL_LOADED,{details:e,levelInfo:i.levelOrTrack||o.levels[0],level:x||0,id:d||0,stats:r,networkDetails:a,deliveryDirectives:p,withoutMultiVariant:c===He.MANIFEST});break;case He.AUDIO_TRACK:o.trigger(D.AUDIO_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:d||0,groupId:h||"",stats:r,networkDetails:a,deliveryDirectives:p});break;case He.SUBTITLE_TRACK:o.trigger(D.SUBTITLE_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:d||0,groupId:h||"",stats:r,networkDetails:a,deliveryDirectives:p});break}}}class Wi{static get version(){return Nf}static isMSESupported(){return QG()}static isSupported(){return TSe()}static getMediaSource(){return Qa()}static get Events(){return D}static get MetadataSchema(){return ur}static get ErrorTypes(){return Te}static get ErrorDetails(){return re}static get DefaultConfig(){return Wi.defaultConfig?Wi.defaultConfig:fSe}static set DefaultConfig(e){Wi.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new i_,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const n=this.logger=Y0e(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=hSe(Wi.DefaultConfig,e,n);this.userConfig=e,r.progressive&&mSe(r,n);const{abrController:i,bufferController:a,capLevelController:s,errorController:o,fpsController:c}=r,u=new o(this),d=this.abrController=new i(this),h=new Bye(this),p=r.interstitialsController,y=p?this.interstitialsController=new p(this,Wi):null,v=this.bufferController=new a(this,h),x=this.capLevelController=new s(this),b=new c(this),T=new OSe(this),_=r.contentSteeringController,w=_?new _(this):null,O=this.levelController=new ESe(this,w),R=new xSe(this),C=new RSe(this.config),L=this.streamController=new _Se(this,h,C),P=this.gapController=new vSe(this,h);x.setStreamController(L),b.setStreamController(L);const N=[T,O,L];y&&N.splice(1,0,y),w&&N.splice(1,0,w),this.networkControllers=N;const k=[d,v,P,x,b,R,h];this.audioTrackController=this.createController(r.audioTrackController,N);const M=r.audioStreamController;M&&N.push(this.audioStreamController=new M(this,h,C)),this.subtitleTrackController=this.createController(r.subtitleTrackController,N);const $=r.subtitleStreamController;$&&N.push(this.subtititleStreamController=new $(this,h,C)),this.createController(r.timelineController,k),C.emeController=this.emeController=this.createController(r.emeController,k),this.cmcdController=this.createController(r.cmcdController,k),this.latencyController=this.createController(SSe,k),this.coreComponents=k,N.push(u);const K=u.onErrorOut;typeof K=="function"&&this.on(D.ERROR,K,u),this.on(D.MANIFEST_LOADED,T.onManifestLoaded,T)}createController(e,n){if(e){const r=new e(this);return n&&n.push(r),r}return null}on(e,n,r=this){this._emitter.on(e,n,r)}once(e,n,r=this){this._emitter.once(e,n,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,r=this,i){this._emitter.off(e,n,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,n,r){return this._emitter.emit(e,n,r)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const i=e===D.ERROR;this.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,fatal:i,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(D.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const a=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.ATTACH_MEDIA_ERROR,fatal:!0,error:a});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const n="media"in e,r=n?e.media:e,i=n?e:{media:r};this._media=r,this.trigger(D.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(D.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(D.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const n=this.media,r=this._url,i=this._url=Yw.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),n&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(D.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,n){this.logger.log(`startLoad(${e+(n?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,n),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Se.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Se.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Se.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,n=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),n&&this.startLoad(n))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=vxe()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Tye(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=n)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:r}=this;let i;if(n===-1&&e!=null&&e.length?i=e.length-1:i=n,r)for(let a=i;a--;){const s=e[a].attrs["HDCP-LEVEL"];if(s&&s<=r)return a}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var n;return((n=this.audioTrackController)==null?void 0:n.setAudioOption(e))||null}setSubtitleOption(e){var n;return((n=this.subtitleTrackController)==null?void 0:n.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,n=this.allAudioTracks){const r=z8(n);return q8(e,r,navigator.mediaCapabilities)}}Wi.defaultConfig=void 0;const CSe=({src:t,...e})=>{const n=F.useRef(null);return F.useEffect(()=>{if(n.current)if(Wi.isSupported()&&t.includes(".m3u8")){const r=new Wi;return r.loadSource(t),r.attachMedia(n.current),()=>{r.destroy()}}else n.current.src=t},[t]),S.jsx("video",{ref:n,controls:!0,autoPlay:!0,className:"w-full h-64 bg-black rounded",...e,children:"Your browser does not support the video tag."})},LSe=()=>{const t=rn(),{roomNum:e}=ca(),{matchDetail:n,loading:r,error:i}=an(h=>h.sport),[a,s]=F.useState(null),[o,c]=F.useState("");F.useEffect(()=>{t(j0e(e))},[t,e]);const u=h=>{s(h)},d=async h=>{try{await navigator.clipboard.writeText(h),c("Copied!"),setTimeout(()=>c(""),1500)}catch{c("Failed to copy"),setTimeout(()=>c(""),1500)}};return S.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-100 to-white rounded-lg shadow-md max-w-full sm:max-w-3xl mx-auto",children:[S.jsx("h1",{className:"text-3xl font-extrabold text-blue-700 mb-8 text-center tracking-tight",children:"Match Streams"}),r?S.jsxs("div",{className:"flex justify-center items-center h-32",children:[S.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),S.jsx("span",{className:"text-lg text-gray-700",children:"Loading streams..."})]}):i?S.jsx("div",{className:"text-center text-red-500",children:i.message||"Failed to load match details."}):n.length===0?S.jsx("div",{className:"text-center text-gray-500 py-8",children:"No streams found for this match."}):S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((h,p)=>S.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg flex flex-col gap-4 border border-blue-100 hover:shadow-2xl transition duration-200",children:[S.jsx("span",{className:"font-bold text-lg text-blue-800 mb-2",children:h.name}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:()=>u(h),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 transition",children:"▶ Watch"}),S.jsx("button",{onClick:()=>d(h.stream_url),className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium shadow hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 transition",title:"Copy link",children:"📋 Copy Link"}),o&&S.jsx("span",{className:"text-green-500 text-xs self-center",children:o})]}),S.jsxs("span",{className:"text-xs text-gray-400 mt-2",children:["Referer: ",h.referer]})]},p))}),a&&S.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:[S.jsx("button",{onClick:()=>s(null),className:"absolute top-6 right-8 text-white bg-black bg-opacity-40 rounded-full p-3 text-3xl hover:bg-opacity-70 focus:outline-none focus:ring-2 focus:ring-white z-50",title:"Close","aria-label":"Close player",children:"×"}),S.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.stream_url.includes(".m3u8")?S.jsx(CSe,{src:a.stream_url,className:"w-[90vw] h-[80vh] bg-black rounded-2xl shadow-2xl"}):S.jsx("video",{src:a.stream_url,controls:!0,autoPlay:!0,className:"w-[90vw] h-[80vh] bg-black rounded-2xl shadow-2xl",children:"Your browser does not support the video tag."})})]})]})},DSe=()=>{const t=rn();return F.useEffect(()=>{t(qY())},[t]),S.jsx(Fz,{children:S.jsx("div",{className:"flex flex-col min-h-screen",children:S.jsx(Wge,{children:S.jsxs(gz,{children:[S.jsx(At,{path:"/login",element:S.jsx(CJ,{})}),S.jsxs(At,{element:S.jsx(LJ,{}),children:[S.jsx(At,{path:"/dashboard",element:S.jsx(qj,{})}),S.jsx(At,{path:"/subscriptions",element:S.jsx(h0e,{})}),S.jsx(At,{path:"/contents",element:S.jsx(jge,{})}),S.jsx(At,{path:"/contents/new",element:S.jsx(zj,{})}),S.jsx(At,{path:"/contents/details/:id",element:S.jsx(Yge,{})}),S.jsx(At,{path:"/contents/edit/:id",element:S.jsx(zj,{})}),S.jsx(At,{path:"/",element:S.jsx(qj,{})})," ",S.jsx(At,{path:"devices",element:S.jsx(i0e,{})}),S.jsx(At,{path:"devices/edit/:id",element:S.jsx(s0e,{})}),S.jsx(At,{path:"devices/details/:id",element:S.jsx(a0e,{})}),S.jsx(At,{path:"/suggestions",element:S.jsx(E0e,{})}),S.jsx(At,{path:"/suggestions/new",element:S.jsx(Qj,{})}),S.jsx(At,{path:"/suggestions/edit/:id",element:S.jsx(Qj,{})}),S.jsx(At,{path:"/suggestions/details/:id",element:S.jsx(T0e,{})}),S.jsx(At,{path:"livesports",element:S.jsx(I0e,{})}),S.jsx(At,{path:"livesports/new/:type",element:S.jsx(Zj,{})}),S.jsx(At,{path:"livesports/edit/:id",element:S.jsx(Zj,{})}),S.jsx(At,{path:"livesports/details/:id",element:S.jsx(P0e,{})}),S.jsx(At,{path:"sport",element:S.jsx(B0e,{})}),S.jsx(At,{path:"sport/match/:roomNum",element:S.jsx(LSe,{})})]}),S.jsx(At,{path:"*",element:S.jsx($ge,{})})]})})})})};SH.createRoot(document.getElementById("root")).render(S.jsx(cK,{store:Rm,children:S.jsx(DSe,{})}));
