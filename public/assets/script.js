(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zy={exports:{}},nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sL;function hH(){if(sL)return nc;sL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return nc.Fragment=e,nc.jsx=n,nc.jsxs=n,nc}var oL;function mH(){return oL||(oL=1,zy.exports=hH()),zy.exports}var S=mH(),Ky={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lL;function pH(){if(lL)return Fe;lL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(B){return B===null||typeof B!="object"?null:(B=h&&B[h]||B["@@iterator"],typeof B=="function"?B:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function x(B,V,H){this.props=B,this.context=V,this.refs=b,this.updater=H||y}x.prototype.isReactComponent={},x.prototype.setState=function(B,V){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,V,"setState")},x.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function T(){}T.prototype=x.prototype;function _(B,V,H){this.props=B,this.context=V,this.refs=b,this.updater=H||y}var A=_.prototype=new T;A.constructor=_,v(A,x.prototype),A.isPureReactComponent=!0;var O=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function L(B,V,H,te,ce,ye){return H=ye.ref,{$$typeof:t,type:B,key:V,ref:H!==void 0?H:null,props:ye}}function P(B,V){return L(B.type,V,void 0,void 0,void 0,B.props)}function N(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function k(B){var V={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(H){return V[H]})}var M=/\/+/g;function G(B,V){return typeof B=="object"&&B!==null&&B.key!=null?k(""+B.key):V.toString(36)}function K(){}function W(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(K,K):(B.status="pending",B.then(function(V){B.status==="pending"&&(B.status="fulfilled",B.value=V)},function(V){B.status==="pending"&&(B.status="rejected",B.reason=V)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Y(B,V,H,te,ce){var ye=typeof B;(ye==="undefined"||ye==="boolean")&&(B=null);var ge=!1;if(B===null)ge=!0;else switch(ye){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(B.$$typeof){case t:case e:ge=!0;break;case d:return ge=B._init,Y(ge(B._payload),V,H,te,ce)}}if(ge)return ce=ce(B),ge=te===""?"."+G(B,0):te,O(ce)?(H="",ge!=null&&(H=ge.replace(M,"$&/")+"/"),Y(ce,V,H,"",function(pe){return pe})):ce!=null&&(N(ce)&&(ce=P(ce,H+(ce.key==null||B&&B.key===ce.key?"":(""+ce.key).replace(M,"$&/")+"/")+ge)),V.push(ce)),1;ge=0;var Me=te===""?".":te+":";if(O(B))for(var Re=0;Re<B.length;Re++)te=B[Re],ye=Me+G(te,Re),ge+=Y(te,V,H,ye,ce);else if(Re=p(B),typeof Re=="function")for(B=Re.call(B),Re=0;!(te=B.next()).done;)te=te.value,ye=Me+G(te,Re++),ge+=Y(te,V,H,ye,ce);else if(ye==="object"){if(typeof B.then=="function")return Y(W(B),V,H,te,ce);throw V=String(B),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ge}function j(B,V,H){if(B==null)return B;var te=[],ce=0;return Y(B,te,"","",function(ye){return V.call(H,ye,ce++)}),te}function $(B){if(B._status===-1){var V=B._result;V=V(),V.then(function(H){(B._status===0||B._status===-1)&&(B._status=1,B._result=H)},function(H){(B._status===0||B._status===-1)&&(B._status=2,B._result=H)}),B._status===-1&&(B._status=0,B._result=V)}if(B._status===1)return B._result.default;throw B._result}var q=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Z(){}return Fe.Children={map:j,forEach:function(B,V,H){j(B,function(){V.apply(this,arguments)},H)},count:function(B){var V=0;return j(B,function(){V++}),V},toArray:function(B){return j(B,function(V){return V})||[]},only:function(B){if(!N(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Fe.Component=x,Fe.Fragment=n,Fe.Profiler=i,Fe.PureComponent=_,Fe.StrictMode=r,Fe.Suspense=c,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return R.H.useMemoCache(B)}},Fe.cache=function(B){return function(){return B.apply(null,arguments)}},Fe.cloneElement=function(B,V,H){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var te=v({},B.props),ce=B.key,ye=void 0;if(V!=null)for(ge in V.ref!==void 0&&(ye=void 0),V.key!==void 0&&(ce=""+V.key),V)!C.call(V,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&V.ref===void 0||(te[ge]=V[ge]);var ge=arguments.length-2;if(ge===1)te.children=H;else if(1<ge){for(var Me=Array(ge),Re=0;Re<ge;Re++)Me[Re]=arguments[Re+2];te.children=Me}return L(B.type,ce,void 0,void 0,ye,te)},Fe.createContext=function(B){return B={$$typeof:s,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},Fe.createElement=function(B,V,H){var te,ce={},ye=null;if(V!=null)for(te in V.key!==void 0&&(ye=""+V.key),V)C.call(V,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ce[te]=V[te]);var ge=arguments.length-2;if(ge===1)ce.children=H;else if(1<ge){for(var Me=Array(ge),Re=0;Re<ge;Re++)Me[Re]=arguments[Re+2];ce.children=Me}if(B&&B.defaultProps)for(te in ge=B.defaultProps,ge)ce[te]===void 0&&(ce[te]=ge[te]);return L(B,ye,void 0,void 0,null,ce)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(B){return{$$typeof:o,render:B}},Fe.isValidElement=N,Fe.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:$}},Fe.memo=function(B,V){return{$$typeof:u,type:B,compare:V===void 0?null:V}},Fe.startTransition=function(B){var V=R.T,H={};R.T=H;try{var te=B(),ce=R.S;ce!==null&&ce(H,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(Z,q)}catch(ye){q(ye)}finally{R.T=V}},Fe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Fe.use=function(B){return R.H.use(B)},Fe.useActionState=function(B,V,H){return R.H.useActionState(B,V,H)},Fe.useCallback=function(B,V){return R.H.useCallback(B,V)},Fe.useContext=function(B){return R.H.useContext(B)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(B,V){return R.H.useDeferredValue(B,V)},Fe.useEffect=function(B,V,H){var te=R.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(B,V)},Fe.useId=function(){return R.H.useId()},Fe.useImperativeHandle=function(B,V,H){return R.H.useImperativeHandle(B,V,H)},Fe.useInsertionEffect=function(B,V){return R.H.useInsertionEffect(B,V)},Fe.useLayoutEffect=function(B,V){return R.H.useLayoutEffect(B,V)},Fe.useMemo=function(B,V){return R.H.useMemo(B,V)},Fe.useOptimistic=function(B,V){return R.H.useOptimistic(B,V)},Fe.useReducer=function(B,V,H){return R.H.useReducer(B,V,H)},Fe.useRef=function(B){return R.H.useRef(B)},Fe.useState=function(B){return R.H.useState(B)},Fe.useSyncExternalStore=function(B,V,H){return R.H.useSyncExternalStore(B,V,H)},Fe.useTransition=function(){return R.H.useTransition()},Fe.version="19.1.0",Fe}var uL;function Bp(){return uL||(uL=1,Ky.exports=pH()),Ky.exports}var F=Bp();const Q=vt(F);var Yy={exports:{}},rc={},Wy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cL;function gH(){return cL||(cL=1,function(t){function e(j,$){var q=j.length;j.push($);e:for(;0<q;){var Z=q-1>>>1,B=j[Z];if(0<i(B,$))j[Z]=$,j[q]=B,q=Z;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var $=j[0],q=j.pop();if(q!==$){j[0]=q;e:for(var Z=0,B=j.length,V=B>>>1;Z<V;){var H=2*(Z+1)-1,te=j[H],ce=H+1,ye=j[ce];if(0>i(te,q))ce<B&&0>i(ye,te)?(j[Z]=ye,j[ce]=q,Z=ce):(j[Z]=te,j[H]=q,Z=H);else if(ce<B&&0>i(ye,q))j[Z]=ye,j[ce]=q,Z=ce;else break e}}return $}function i(j,$){var q=j.sortIndex-$.sortIndex;return q!==0?q:j.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function O(j){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=j)r(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(u)}}function R(j){if(b=!1,O(j),!v)if(n(c)!==null)v=!0,C||(C=!0,G());else{var $=n(u);$!==null&&Y(R,$.startTime-j)}}var C=!1,L=-1,P=5,N=-1;function k(){return x?!0:!(t.unstable_now()-N<P)}function M(){if(x=!1,C){var j=t.unstable_now();N=j;var $=!0;try{e:{v=!1,b&&(b=!1,_(L),L=-1),y=!0;var q=p;try{t:{for(O(j),h=n(c);h!==null&&!(h.expirationTime>j&&k());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,p=h.priorityLevel;var B=Z(h.expirationTime<=j);if(j=t.unstable_now(),typeof B=="function"){h.callback=B,O(j),$=!0;break t}h===n(c)&&r(c),O(j)}else r(c);h=n(c)}if(h!==null)$=!0;else{var V=n(u);V!==null&&Y(R,V.startTime-j),$=!1}}break e}finally{h=null,p=q,y=!1}$=void 0}}finally{$?G():C=!1}}}var G;if(typeof A=="function")G=function(){A(M)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,W=K.port2;K.port1.onmessage=M,G=function(){W.postMessage(null)}}else G=function(){T(M,0)};function Y(j,$){L=T(function(){j(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(j){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var q=p;p=$;try{return j()}finally{p=q}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=p;p=j;try{return $()}finally{p=q}},t.unstable_scheduleCallback=function(j,$,q){var Z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,j){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=q+B,j={id:d++,callback:$,priorityLevel:j,startTime:q,expirationTime:B,sortIndex:-1},q>Z?(j.sortIndex=q,e(u,j),n(c)===null&&j===n(u)&&(b?(_(L),L=-1):b=!0,Y(R,q-Z))):(j.sortIndex=B,e(c,j),v||y||(v=!0,C||(C=!0,G()))),j},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(j){var $=p;return function(){var q=p;p=$;try{return j.apply(this,arguments)}finally{p=q}}}}(Xy)),Xy}var fL;function yH(){return fL||(fL=1,Wy.exports=gH()),Wy.exports}var Qy={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dL;function vH(){if(dL)return Ln;dL=1;var t=Bp();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:d}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,d)},Ln.flushSync=function(c){var u=s.T,d=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=d,r.d.f()}},Ln.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Ln.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ln.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&r.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ln.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Ln.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(c,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ln.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Ln.requestFormReset=function(c){r.d.r(c)},Ln.unstable_batchedUpdates=function(c,u){return c(u)},Ln.useFormState=function(c,u,d){return s.H.useFormState(c,u,d)},Ln.useFormStatus=function(){return s.H.useHostTransitionStatus()},Ln.version="19.1.0",Ln}var hL;function xH(){if(hL)return Qy.exports;hL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qy.exports=vH(),Qy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL;function bH(){if(mL)return rc;mL=1;var t=yH(),e=Bp(),n=xH();function r(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var f=l,m=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(m=f.return),l=f.return;while(l)}return f.tag===3?m:null}function s(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(r(188))}function c(l){var f=l.alternate;if(!f){if(f=a(l),f===null)throw Error(r(188));return f!==l?null:l}for(var m=l,g=f;;){var E=m.return;if(E===null)break;var w=E.alternate;if(w===null){if(g=E.return,g!==null){m=g;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===m)return o(E),l;if(w===g)return o(E),f;w=w.sibling}throw Error(r(188))}if(m.return!==g.return)m=E,g=w;else{for(var I=!1,U=E.child;U;){if(U===m){I=!0,m=E,g=w;break}if(U===g){I=!0,g=E,m=w;break}U=U.sibling}if(!I){for(U=w.child;U;){if(U===m){I=!0,m=w,g=E;break}if(U===g){I=!0,g=w,m=E;break}U=U.sibling}if(!I)throw Error(r(189))}}if(m.alternate!==g)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?l:f}function u(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=u(l),f!==null)return f;l=l.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function G(l){return l===null||typeof l!="object"?null:(l=M&&l[M]||l["@@iterator"],typeof l=="function"?l:null)}var K=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===K?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case x:return"Profiler";case b:return"StrictMode";case R:return"Suspense";case C:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case A:return(l.displayName||"Context")+".Provider";case _:return(l._context.displayName||"Context")+".Consumer";case O:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return f=l.displayName||null,f!==null?f:W(l.type)||"Memo";case P:f=l._payload,l=l._init;try{return W(l(f))}catch{}}return null}var Y=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},Z=[],B=-1;function V(l){return{current:l}}function H(l){0>B||(l.current=Z[B],Z[B]=null,B--)}function te(l,f){B++,Z[B]=l.current,l.current=f}var ce=V(null),ye=V(null),ge=V(null),Me=V(null);function Re(l,f){switch(te(ge,f),te(ye,l),te(ce,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?NC(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=NC(f),l=MC(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}H(ce),te(ce,l)}function pe(){H(ce),H(ye),H(ge)}function Ae(l){l.memoizedState!==null&&te(Me,l);var f=ce.current,m=MC(f,l.type);f!==m&&(te(ye,l),te(ce,m))}function Oe(l){ye.current===l&&(H(ce),H(ye)),Me.current===l&&(H(Me),Qu._currentValue=q)}var me=Object.prototype.hasOwnProperty,rt=t.unstable_scheduleCallback,Be=t.unstable_cancelCallback,It=t.unstable_shouldYield,_e=t.unstable_requestPaint,je=t.unstable_now,Rt=t.unstable_getCurrentPriorityLevel,yn=t.unstable_ImmediatePriority,Wt=t.unstable_UserBlockingPriority,Xt=t.unstable_NormalPriority,vn=t.unstable_LowPriority,Ri=t.unstable_IdlePriority,Oi=t.log,ss=t.unstable_setDisableYieldValue,Fr=null,_n=null;function ii(l){if(typeof Oi=="function"&&ss(l),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(Fr,l)}catch{}}var Rn=Math.clz32?Math.clz32:JG,sd=Math.log,os=Math.LN2;function JG(l){return l>>>=0,l===0?32:31-(sd(l)/os|0)|0}var od=256,ld=4194304;function ls(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ud(l,f,m){var g=l.pendingLanes;if(g===0)return 0;var E=0,w=l.suspendedLanes,I=l.pingedLanes;l=l.warmLanes;var U=g&134217727;return U!==0?(g=U&~w,g!==0?E=ls(g):(I&=U,I!==0?E=ls(I):m||(m=U&~l,m!==0&&(E=ls(m))))):(U=g&~w,U!==0?E=ls(U):I!==0?E=ls(I):m||(m=g&~l,m!==0&&(E=ls(m)))),E===0?0:f!==0&&f!==E&&(f&w)===0&&(w=E&-E,m=f&-f,w>=m||w===32&&(m&4194048)!==0)?f:E}function su(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function eV(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y_(){var l=od;return od<<=1,(od&4194048)===0&&(od=256),l}function v_(){var l=ld;return ld<<=1,(ld&62914560)===0&&(ld=4194304),l}function Mg(l){for(var f=[],m=0;31>m;m++)f.push(l);return f}function ou(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function tV(l,f,m,g,E,w){var I=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var U=l.entanglements,z=l.expirationTimes,ie=l.hiddenUpdates;for(m=I&~m;0<m;){var ue=31-Rn(m),he=1<<ue;U[ue]=0,z[ue]=-1;var ae=ie[ue];if(ae!==null)for(ie[ue]=null,ue=0;ue<ae.length;ue++){var se=ae[ue];se!==null&&(se.lane&=-536870913)}m&=~he}g!==0&&x_(l,g,0),w!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=w&~(I&~f))}function x_(l,f,m){l.pendingLanes|=f,l.suspendedLanes&=~f;var g=31-Rn(f);l.entangledLanes|=f,l.entanglements[g]=l.entanglements[g]|1073741824|m&4194090}function b_(l,f){var m=l.entangledLanes|=f;for(l=l.entanglements;m;){var g=31-Rn(m),E=1<<g;E&f|l[g]&f&&(l[g]|=f),m&=~E}}function kg(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function jg(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function S_(){var l=$.p;return l!==0?l:(l=window.event,l===void 0?32:eL(l.type))}function nV(l,f){var m=$.p;try{return $.p=l,f()}finally{$.p=m}}var pa=Math.random().toString(36).slice(2),On="__reactFiber$"+pa,$n="__reactProps$"+pa,ao="__reactContainer$"+pa,Ug="__reactEvents$"+pa,rV="__reactListeners$"+pa,iV="__reactHandles$"+pa,E_="__reactResources$"+pa,lu="__reactMarker$"+pa;function Bg(l){delete l[On],delete l[$n],delete l[Ug],delete l[rV],delete l[iV]}function so(l){var f=l[On];if(f)return f;for(var m=l.parentNode;m;){if(f=m[ao]||m[On]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(l=BC(l);l!==null;){if(m=l[On])return m;l=BC(l)}return f}l=m,m=l.parentNode}return null}function oo(l){if(l=l[On]||l[ao]){var f=l.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return l}return null}function uu(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(r(33))}function lo(l){var f=l[E_];return f||(f=l[E_]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function ln(l){l[lu]=!0}var T_=new Set,A_={};function us(l,f){uo(l,f),uo(l+"Capture",f)}function uo(l,f){for(A_[l]=f,l=0;l<f.length;l++)T_.add(f[l])}var aV=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),w_={},__={};function sV(l){return me.call(__,l)?!0:me.call(w_,l)?!1:aV.test(l)?__[l]=!0:(w_[l]=!0,!1)}function cd(l,f,m){if(sV(f))if(m===null)l.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var g=f.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+m)}}function fd(l,f,m){if(m===null)l.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+m)}}function Ci(l,f,m,g){if(g===null)l.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(f,m,""+g)}}var Fg,R_;function co(l){if(Fg===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);Fg=f&&f[1]||"",R_=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fg+l+R_}var $g=!1;function Gg(l,f){if(!l||$g)return"";$g=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(f){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var ae=se}Reflect.construct(l,[],he)}else{try{he.call()}catch(se){ae=se}l.call(he.prototype)}}else{try{throw Error()}catch(se){ae=se}(he=l())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&ae&&typeof se.stack=="string")return[se.stack,ae.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),I=w[0],U=w[1];if(I&&U){var z=I.split(`
`),ie=U.split(`
`);for(E=g=0;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;for(;E<ie.length&&!ie[E].includes("DetermineComponentFrameRoot");)E++;if(g===z.length||E===ie.length)for(g=z.length-1,E=ie.length-1;1<=g&&0<=E&&z[g]!==ie[E];)E--;for(;1<=g&&0<=E;g--,E--)if(z[g]!==ie[E]){if(g!==1||E!==1)do if(g--,E--,0>E||z[g]!==ie[E]){var ue=`
`+z[g].replace(" at new "," at ");return l.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",l.displayName)),ue}while(1<=g&&0<=E);break}}}finally{$g=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?co(m):""}function oV(l){switch(l.tag){case 26:case 27:case 5:return co(l.type);case 16:return co("Lazy");case 13:return co("Suspense");case 19:return co("SuspenseList");case 0:case 15:return Gg(l.type,!1);case 11:return Gg(l.type.render,!1);case 1:return Gg(l.type,!0);case 31:return co("Activity");default:return""}}function O_(l){try{var f="";do f+=oV(l),l=l.return;while(l);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function hr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function C_(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function lV(l){var f=C_(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,f),g=""+l[f];if(!l.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,w=m.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return E.call(this)},set:function(I){g=""+I,w.call(this,I)}}),Object.defineProperty(l,f,{enumerable:m.enumerable}),{getValue:function(){return g},setValue:function(I){g=""+I},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function dd(l){l._valueTracker||(l._valueTracker=lV(l))}function L_(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var m=f.getValue(),g="";return l&&(g=C_(l)?l.checked?"true":"false":l.value),l=g,l!==m?(f.setValue(l),!0):!1}function hd(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var uV=/[\n"\\]/g;function mr(l){return l.replace(uV,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Vg(l,f,m,g,E,w,I,U){l.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?l.type=I:l.removeAttribute("type"),f!=null?I==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+hr(f)):l.value!==""+hr(f)&&(l.value=""+hr(f)):I!=="submit"&&I!=="reset"||l.removeAttribute("value"),f!=null?qg(l,I,hr(f)):m!=null?qg(l,I,hr(m)):g!=null&&l.removeAttribute("value"),E==null&&w!=null&&(l.defaultChecked=!!w),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.name=""+hr(U):l.removeAttribute("name")}function D_(l,f,m,g,E,w,I,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(l.type=w),f!=null||m!=null){if(!(w!=="submit"&&w!=="reset"||f!=null))return;m=m!=null?""+hr(m):"",f=f!=null?""+hr(f):m,U||f===l.value||(l.value=f),l.defaultValue=f}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=U?l.checked:!!g,l.defaultChecked=!!g,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(l.name=I)}function qg(l,f,m){f==="number"&&hd(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function fo(l,f,m,g){if(l=l.options,f){f={};for(var E=0;E<m.length;E++)f["$"+m[E]]=!0;for(m=0;m<l.length;m++)E=f.hasOwnProperty("$"+l[m].value),l[m].selected!==E&&(l[m].selected=E),E&&g&&(l[m].defaultSelected=!0)}else{for(m=""+hr(m),f=null,E=0;E<l.length;E++){if(l[E].value===m){l[E].selected=!0,g&&(l[E].defaultSelected=!0);return}f!==null||l[E].disabled||(f=l[E])}f!==null&&(f.selected=!0)}}function I_(l,f,m){if(f!=null&&(f=""+hr(f),f!==l.value&&(l.value=f),m==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=m!=null?""+hr(m):""}function P_(l,f,m,g){if(f==null){if(g!=null){if(m!=null)throw Error(r(92));if(Y(g)){if(1<g.length)throw Error(r(93));g=g[0]}m=g}m==null&&(m=""),f=m}m=hr(f),l.defaultValue=m,g=l.textContent,g===m&&g!==""&&g!==null&&(l.value=g)}function ho(l,f){if(f){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=f;return}}l.textContent=f}var cV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function N_(l,f,m){var g=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?g?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":g?l.setProperty(f,m):typeof m!="number"||m===0||cV.has(f)?f==="float"?l.cssFloat=m:l[f]=(""+m).trim():l[f]=m+"px"}function M_(l,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(l=l.style,m!=null){for(var g in m)!m.hasOwnProperty(g)||f!=null&&f.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var E in f)g=f[E],f.hasOwnProperty(E)&&m[E]!==g&&N_(l,E,g)}else for(var w in f)f.hasOwnProperty(w)&&N_(l,w,f[w])}function Hg(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function md(l){return dV.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var zg=null;function Kg(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var mo=null,po=null;function k_(l){var f=oo(l);if(f&&(l=f.stateNode)){var m=l[$n]||null;e:switch(l=f.stateNode,f.type){case"input":if(Vg(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+mr(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var g=m[f];if(g!==l&&g.form===l.form){var E=g[$n]||null;if(!E)throw Error(r(90));Vg(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(f=0;f<m.length;f++)g=m[f],g.form===l.form&&L_(g)}break e;case"textarea":I_(l,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&fo(l,!!m.multiple,f,!1)}}}var Yg=!1;function j_(l,f,m){if(Yg)return l(f,m);Yg=!0;try{var g=l(f);return g}finally{if(Yg=!1,(mo!==null||po!==null)&&(Jd(),mo&&(f=mo,l=po,po=mo=null,k_(f),l)))for(f=0;f<l.length;f++)k_(l[f])}}function cu(l,f){var m=l.stateNode;if(m===null)return null;var g=m[$n]||null;if(g===null)return null;m=g[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wg=!1;if(Li)try{var fu={};Object.defineProperty(fu,"passive",{get:function(){Wg=!0}}),window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{Wg=!1}var ga=null,Xg=null,pd=null;function U_(){if(pd)return pd;var l,f=Xg,m=f.length,g,E="value"in ga?ga.value:ga.textContent,w=E.length;for(l=0;l<m&&f[l]===E[l];l++);var I=m-l;for(g=1;g<=I&&f[m-g]===E[w-g];g++);return pd=E.slice(l,1<g?1-g:void 0)}function gd(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function yd(){return!0}function B_(){return!1}function Gn(l){function f(m,g,E,w,I){this._reactName=m,this._targetInst=E,this.type=g,this.nativeEvent=w,this.target=I,this.currentTarget=null;for(var U in l)l.hasOwnProperty(U)&&(m=l[U],this[U]=m?m(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?yd:B_,this.isPropagationStopped=B_,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),f}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vd=Gn(cs),du=d({},cs,{view:0,detail:0}),hV=Gn(du),Qg,Zg,hu,xd=d({},du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e0,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==hu&&(hu&&l.type==="mousemove"?(Qg=l.screenX-hu.screenX,Zg=l.screenY-hu.screenY):Zg=Qg=0,hu=l),Qg)},movementY:function(l){return"movementY"in l?l.movementY:Zg}}),F_=Gn(xd),mV=d({},xd,{dataTransfer:0}),pV=Gn(mV),gV=d({},du,{relatedTarget:0}),Jg=Gn(gV),yV=d({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),vV=Gn(yV),xV=d({},cs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),bV=Gn(xV),SV=d({},cs,{data:0}),$_=Gn(SV),EV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wV(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=AV[l])?!!f[l]:!1}function e0(){return wV}var _V=d({},du,{key:function(l){if(l.key){var f=EV[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=gd(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?TV[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e0,charCode:function(l){return l.type==="keypress"?gd(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?gd(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),RV=Gn(_V),OV=d({},xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G_=Gn(OV),CV=d({},du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e0}),LV=Gn(CV),DV=d({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),IV=Gn(DV),PV=d({},xd,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),NV=Gn(PV),MV=d({},cs,{newState:0,oldState:0}),kV=Gn(MV),jV=[9,13,27,32],t0=Li&&"CompositionEvent"in window,mu=null;Li&&"documentMode"in document&&(mu=document.documentMode);var UV=Li&&"TextEvent"in window&&!mu,V_=Li&&(!t0||mu&&8<mu&&11>=mu),q_=" ",H_=!1;function z_(l,f){switch(l){case"keyup":return jV.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K_(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var go=!1;function BV(l,f){switch(l){case"compositionend":return K_(f);case"keypress":return f.which!==32?null:(H_=!0,q_);case"textInput":return l=f.data,l===q_&&H_?null:l;default:return null}}function FV(l,f){if(go)return l==="compositionend"||!t0&&z_(l,f)?(l=U_(),pd=Xg=ga=null,go=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return V_&&f.locale!=="ko"?null:f.data;default:return null}}var $V={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y_(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!$V[l.type]:f==="textarea"}function W_(l,f,m,g){mo?po?po.push(g):po=[g]:mo=g,f=ah(f,"onChange"),0<f.length&&(m=new vd("onChange","change",null,m,g),l.push({event:m,listeners:f}))}var pu=null,gu=null;function GV(l){CC(l,0)}function bd(l){var f=uu(l);if(L_(f))return l}function X_(l,f){if(l==="change")return f}var Q_=!1;if(Li){var n0;if(Li){var r0="oninput"in document;if(!r0){var Z_=document.createElement("div");Z_.setAttribute("oninput","return;"),r0=typeof Z_.oninput=="function"}n0=r0}else n0=!1;Q_=n0&&(!document.documentMode||9<document.documentMode)}function J_(){pu&&(pu.detachEvent("onpropertychange",eR),gu=pu=null)}function eR(l){if(l.propertyName==="value"&&bd(gu)){var f=[];W_(f,gu,l,Kg(l)),j_(GV,f)}}function VV(l,f,m){l==="focusin"?(J_(),pu=f,gu=m,pu.attachEvent("onpropertychange",eR)):l==="focusout"&&J_()}function qV(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return bd(gu)}function HV(l,f){if(l==="click")return bd(f)}function zV(l,f){if(l==="input"||l==="change")return bd(f)}function KV(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var Jn=typeof Object.is=="function"?Object.is:KV;function yu(l,f){if(Jn(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var m=Object.keys(l),g=Object.keys(f);if(m.length!==g.length)return!1;for(g=0;g<m.length;g++){var E=m[g];if(!me.call(f,E)||!Jn(l[E],f[E]))return!1}return!0}function tR(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function nR(l,f){var m=tR(l);l=0;for(var g;m;){if(m.nodeType===3){if(g=l+m.textContent.length,l<=f&&g>=f)return{node:m,offset:f-l};l=g}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=tR(m)}}function rR(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?rR(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function iR(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=hd(l.document);f instanceof l.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)l=f.contentWindow;else break;f=hd(l.document)}return f}function i0(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var YV=Li&&"documentMode"in document&&11>=document.documentMode,yo=null,a0=null,vu=null,s0=!1;function aR(l,f,m){var g=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;s0||yo==null||yo!==hd(g)||(g=yo,"selectionStart"in g&&i0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),vu&&yu(vu,g)||(vu=g,g=ah(a0,"onSelect"),0<g.length&&(f=new vd("onSelect","select",null,f,m),l.push({event:f,listeners:g}),f.target=yo)))}function fs(l,f){var m={};return m[l.toLowerCase()]=f.toLowerCase(),m["Webkit"+l]="webkit"+f,m["Moz"+l]="moz"+f,m}var vo={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},o0={},sR={};Li&&(sR=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function ds(l){if(o0[l])return o0[l];if(!vo[l])return l;var f=vo[l],m;for(m in f)if(f.hasOwnProperty(m)&&m in sR)return o0[l]=f[m];return l}var oR=ds("animationend"),lR=ds("animationiteration"),uR=ds("animationstart"),WV=ds("transitionrun"),XV=ds("transitionstart"),QV=ds("transitioncancel"),cR=ds("transitionend"),fR=new Map,l0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");l0.push("scrollEnd");function $r(l,f){fR.set(l,f),us(f,[l])}var dR=new WeakMap;function pr(l,f){if(typeof l=="object"&&l!==null){var m=dR.get(l);return m!==void 0?m:(f={value:l,source:f,stack:O_(f)},dR.set(l,f),f)}return{value:l,source:f,stack:O_(f)}}var gr=[],xo=0,u0=0;function Sd(){for(var l=xo,f=u0=xo=0;f<l;){var m=gr[f];gr[f++]=null;var g=gr[f];gr[f++]=null;var E=gr[f];gr[f++]=null;var w=gr[f];if(gr[f++]=null,g!==null&&E!==null){var I=g.pending;I===null?E.next=E:(E.next=I.next,I.next=E),g.pending=E}w!==0&&hR(m,E,w)}}function Ed(l,f,m,g){gr[xo++]=l,gr[xo++]=f,gr[xo++]=m,gr[xo++]=g,u0|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function c0(l,f,m,g){return Ed(l,f,m,g),Td(l)}function bo(l,f){return Ed(l,null,null,f),Td(l)}function hR(l,f,m){l.lanes|=m;var g=l.alternate;g!==null&&(g.lanes|=m);for(var E=!1,w=l.return;w!==null;)w.childLanes|=m,g=w.alternate,g!==null&&(g.childLanes|=m),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(E=!0)),l=w,w=w.return;return l.tag===3?(w=l.stateNode,E&&f!==null&&(E=31-Rn(m),l=w.hiddenUpdates,g=l[E],g===null?l[E]=[f]:g.push(f),f.lane=m|536870912),w):null}function Td(l){if(50<Vu)throw Vu=0,gy=null,Error(r(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var So={};function ZV(l,f,m,g){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(l,f,m,g){return new ZV(l,f,m,g)}function f0(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Di(l,f){var m=l.alternate;return m===null?(m=er(l.tag,f,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=f,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,f=l.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function mR(l,f){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,f=m.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function Ad(l,f,m,g,E,w){var I=0;if(g=l,typeof l=="function")f0(l)&&(I=1);else if(typeof l=="string")I=eH(l,m,ce.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=er(31,m,f,E),l.elementType=N,l.lanes=w,l;case v:return hs(m.children,E,w,f);case b:I=8,E|=24;break;case x:return l=er(12,m,f,E|2),l.elementType=x,l.lanes=w,l;case R:return l=er(13,m,f,E),l.elementType=R,l.lanes=w,l;case C:return l=er(19,m,f,E),l.elementType=C,l.lanes=w,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case T:case A:I=10;break e;case _:I=9;break e;case O:I=11;break e;case L:I=14;break e;case P:I=16,g=null;break e}I=29,m=Error(r(130,l===null?"null":typeof l,"")),g=null}return f=er(I,m,f,E),f.elementType=l,f.type=g,f.lanes=w,f}function hs(l,f,m,g){return l=er(7,l,g,f),l.lanes=m,l}function d0(l,f,m){return l=er(6,l,null,f),l.lanes=m,l}function h0(l,f,m){return f=er(4,l.children!==null?l.children:[],l.key,f),f.lanes=m,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var Eo=[],To=0,wd=null,_d=0,yr=[],vr=0,ms=null,Ii=1,Pi="";function ps(l,f){Eo[To++]=_d,Eo[To++]=wd,wd=l,_d=f}function pR(l,f,m){yr[vr++]=Ii,yr[vr++]=Pi,yr[vr++]=ms,ms=l;var g=Ii;l=Pi;var E=32-Rn(g)-1;g&=~(1<<E),m+=1;var w=32-Rn(f)+E;if(30<w){var I=E-E%5;w=(g&(1<<I)-1).toString(32),g>>=I,E-=I,Ii=1<<32-Rn(f)+E|m<<E|g,Pi=w+l}else Ii=1<<w|m<<E|g,Pi=l}function m0(l){l.return!==null&&(ps(l,1),pR(l,1,0))}function p0(l){for(;l===wd;)wd=Eo[--To],Eo[To]=null,_d=Eo[--To],Eo[To]=null;for(;l===ms;)ms=yr[--vr],yr[vr]=null,Pi=yr[--vr],yr[vr]=null,Ii=yr[--vr],yr[vr]=null}var jn=null,Pt=null,nt=!1,gs=null,ai=!1,g0=Error(r(519));function ys(l){var f=Error(r(418,""));throw Su(pr(f,l)),g0}function gR(l){var f=l.stateNode,m=l.type,g=l.memoizedProps;switch(f[On]=l,f[$n]=g,m){case"dialog":Ke("cancel",f),Ke("close",f);break;case"iframe":case"object":case"embed":Ke("load",f);break;case"video":case"audio":for(m=0;m<Hu.length;m++)Ke(Hu[m],f);break;case"source":Ke("error",f);break;case"img":case"image":case"link":Ke("error",f),Ke("load",f);break;case"details":Ke("toggle",f);break;case"input":Ke("invalid",f),D_(f,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),dd(f);break;case"select":Ke("invalid",f);break;case"textarea":Ke("invalid",f),P_(f,g.value,g.defaultValue,g.children),dd(f)}m=g.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||g.suppressHydrationWarning===!0||PC(f.textContent,m)?(g.popover!=null&&(Ke("beforetoggle",f),Ke("toggle",f)),g.onScroll!=null&&Ke("scroll",f),g.onScrollEnd!=null&&Ke("scrollend",f),g.onClick!=null&&(f.onclick=sh),f=!0):f=!1,f||ys(l)}function yR(l){for(jn=l.return;jn;)switch(jn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:jn=jn.return}}function xu(l){if(l!==jn)return!1;if(!nt)return yR(l),nt=!0,!1;var f=l.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||Iy(l.type,l.memoizedProps)),m=!m),m&&Pt&&ys(l),yR(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,f=0;l;){if(l.nodeType===8)if(m=l.data,m==="/$"){if(f===0){Pt=Vr(l.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;l=l.nextSibling}Pt=null}}else f===27?(f=Pt,Ia(l.type)?(l=ky,ky=null,Pt=l):Pt=f):Pt=jn?Vr(l.stateNode.nextSibling):null;return!0}function bu(){Pt=jn=null,nt=!1}function vR(){var l=gs;return l!==null&&(Hn===null?Hn=l:Hn.push.apply(Hn,l),gs=null),l}function Su(l){gs===null?gs=[l]:gs.push(l)}var y0=V(null),vs=null,Ni=null;function ya(l,f,m){te(y0,f._currentValue),f._currentValue=m}function Mi(l){l._currentValue=y0.current,H(y0)}function v0(l,f,m){for(;l!==null;){var g=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,g!==null&&(g.childLanes|=f)):g!==null&&(g.childLanes&f)!==f&&(g.childLanes|=f),l===m)break;l=l.return}}function x0(l,f,m,g){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var w=E.dependencies;if(w!==null){var I=E.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=E;for(var z=0;z<f.length;z++)if(U.context===f[z]){w.lanes|=m,U=w.alternate,U!==null&&(U.lanes|=m),v0(w.return,m,l),g||(I=null);break e}w=U.next}}else if(E.tag===18){if(I=E.return,I===null)throw Error(r(341));I.lanes|=m,w=I.alternate,w!==null&&(w.lanes|=m),v0(I,m,l),I=null}else I=E.child;if(I!==null)I.return=E;else for(I=E;I!==null;){if(I===l){I=null;break}if(E=I.sibling,E!==null){E.return=I.return,I=E;break}I=I.return}E=I}}function Eu(l,f,m,g){l=null;for(var E=f,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var I=E.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var U=E.type;Jn(E.pendingProps.value,I.value)||(l!==null?l.push(U):l=[U])}}else if(E===Me.current){if(I=E.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(Qu):l=[Qu])}E=E.return}l!==null&&x0(f,l,m,g),f.flags|=262144}function Rd(l){for(l=l.firstContext;l!==null;){if(!Jn(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function xs(l){vs=l,Ni=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Cn(l){return xR(vs,l)}function Od(l,f){return vs===null&&xs(l),xR(l,f)}function xR(l,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},Ni===null){if(l===null)throw Error(r(308));Ni=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else Ni=Ni.next=f;return m}var JV=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(m,g){l.push(g)}};this.abort=function(){f.aborted=!0,l.forEach(function(m){return m()})}},eq=t.unstable_scheduleCallback,tq=t.unstable_NormalPriority,Qt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function b0(){return{controller:new JV,data:new Map,refCount:0}}function Tu(l){l.refCount--,l.refCount===0&&eq(tq,function(){l.controller.abort()})}var Au=null,S0=0,Ao=0,wo=null;function nq(l,f){if(Au===null){var m=Au=[];S0=0,Ao=Ty(),wo={status:"pending",value:void 0,then:function(g){m.push(g)}}}return S0++,f.then(bR,bR),f}function bR(){if(--S0===0&&Au!==null){wo!==null&&(wo.status="fulfilled");var l=Au;Au=null,Ao=0,wo=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function rq(l,f){var m=[],g={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return l.then(function(){g.status="fulfilled",g.value=f;for(var E=0;E<m.length;E++)(0,m[E])(f)},function(E){for(g.status="rejected",g.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),g}var SR=j.S;j.S=function(l,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&nq(l,f),SR!==null&&SR(l,f)};var bs=V(null);function E0(){var l=bs.current;return l!==null?l:xt.pooledCache}function Cd(l,f){f===null?te(bs,bs.current):te(bs,f.pool)}function ER(){var l=E0();return l===null?null:{parent:Qt._currentValue,pool:l}}var wu=Error(r(460)),TR=Error(r(474)),Ld=Error(r(542)),T0={then:function(){}};function AR(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Dd(){}function wR(l,f,m){switch(m=l[m],m===void 0?l.push(f):m!==f&&(f.then(Dd,Dd),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,RR(l),l;default:if(typeof f.status=="string")f.then(Dd,Dd);else{if(l=xt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=f,l.status="pending",l.then(function(g){if(f.status==="pending"){var E=f;E.status="fulfilled",E.value=g}},function(g){if(f.status==="pending"){var E=f;E.status="rejected",E.reason=g}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,RR(l),l}throw _u=f,wu}}var _u=null;function _R(){if(_u===null)throw Error(r(459));var l=_u;return _u=null,l}function RR(l){if(l===wu||l===Ld)throw Error(r(483))}var va=!1;function A0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function w0(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function xa(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ba(l,f,m){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(st&2)!==0){var E=g.pending;return E===null?f.next=f:(f.next=E.next,E.next=f),g.pending=f,f=Td(l),hR(l,null,m),f}return Ed(l,g,f,m),Td(l)}function Ru(l,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var g=f.lanes;g&=l.pendingLanes,m|=g,f.lanes=m,b_(l,m)}}function _0(l,f){var m=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,m===g)){var E=null,w=null;if(m=m.firstBaseUpdate,m!==null){do{var I={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};w===null?E=w=I:w=w.next=I,m=m.next}while(m!==null);w===null?E=w=f:w=w.next=f}else E=w=f;m={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=f}var R0=!1;function Ou(){if(R0){var l=wo;if(l!==null)throw l}}function Cu(l,f,m,g){R0=!1;var E=l.updateQueue;va=!1;var w=E.firstBaseUpdate,I=E.lastBaseUpdate,U=E.shared.pending;if(U!==null){E.shared.pending=null;var z=U,ie=z.next;z.next=null,I===null?w=ie:I.next=ie,I=z;var ue=l.alternate;ue!==null&&(ue=ue.updateQueue,U=ue.lastBaseUpdate,U!==I&&(U===null?ue.firstBaseUpdate=ie:U.next=ie,ue.lastBaseUpdate=z))}if(w!==null){var he=E.baseState;I=0,ue=ie=z=null,U=w;do{var ae=U.lane&-536870913,se=ae!==U.lane;if(se?(Xe&ae)===ae:(g&ae)===ae){ae!==0&&ae===Ao&&(R0=!0),ue!==null&&(ue=ue.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ie=l,Ce=U;ae=f;var dt=m;switch(Ce.tag){case 1:if(Ie=Ce.payload,typeof Ie=="function"){he=Ie.call(dt,he,ae);break e}he=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ce.payload,ae=typeof Ie=="function"?Ie.call(dt,he,ae):Ie,ae==null)break e;he=d({},he,ae);break e;case 2:va=!0}}ae=U.callback,ae!==null&&(l.flags|=64,se&&(l.flags|=8192),se=E.callbacks,se===null?E.callbacks=[ae]:se.push(ae))}else se={lane:ae,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ue===null?(ie=ue=se,z=he):ue=ue.next=se,I|=ae;if(U=U.next,U===null){if(U=E.shared.pending,U===null)break;se=U,U=se.next,se.next=null,E.lastBaseUpdate=se,E.shared.pending=null}}while(!0);ue===null&&(z=he),E.baseState=z,E.firstBaseUpdate=ie,E.lastBaseUpdate=ue,w===null&&(E.shared.lanes=0),Oa|=I,l.lanes=I,l.memoizedState=he}}function OR(l,f){if(typeof l!="function")throw Error(r(191,l));l.call(f)}function CR(l,f){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)OR(m[l],f)}var _o=V(null),Id=V(0);function LR(l,f){l=Gi,te(Id,l),te(_o,f),Gi=l|f.baseLanes}function O0(){te(Id,Gi),te(_o,_o.current)}function C0(){Gi=Id.current,H(_o),H(Id)}var Sa=0,$e=null,ct=null,Vt=null,Pd=!1,Ro=!1,Ss=!1,Nd=0,Lu=0,Oo=null,iq=0;function jt(){throw Error(r(321))}function L0(l,f){if(f===null)return!1;for(var m=0;m<f.length&&m<l.length;m++)if(!Jn(l[m],f[m]))return!1;return!0}function D0(l,f,m,g,E,w){return Sa=w,$e=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,j.H=l===null||l.memoizedState===null?hO:mO,Ss=!1,w=m(g,E),Ss=!1,Ro&&(w=IR(f,m,g,E)),DR(l),w}function DR(l){j.H=Fd;var f=ct!==null&&ct.next!==null;if(Sa=0,Vt=ct=$e=null,Pd=!1,Lu=0,Oo=null,f)throw Error(r(300));l===null||un||(l=l.dependencies,l!==null&&Rd(l)&&(un=!0))}function IR(l,f,m,g){$e=l;var E=0;do{if(Ro&&(Oo=null),Lu=0,Ro=!1,25<=E)throw Error(r(301));if(E+=1,Vt=ct=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}j.H=fq,w=f(m,g)}while(Ro);return w}function aq(){var l=j.H,f=l.useState()[0];return f=typeof f.then=="function"?Du(f):f,l=l.useState()[0],(ct!==null?ct.memoizedState:null)!==l&&($e.flags|=1024),f}function I0(){var l=Nd!==0;return Nd=0,l}function P0(l,f,m){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~m}function N0(l){if(Pd){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Pd=!1}Sa=0,Vt=ct=$e=null,Ro=!1,Lu=Nd=0,Oo=null}function Vn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?$e.memoizedState=Vt=l:Vt=Vt.next=l,Vt}function qt(){if(ct===null){var l=$e.alternate;l=l!==null?l.memoizedState:null}else l=ct.next;var f=Vt===null?$e.memoizedState:Vt.next;if(f!==null)Vt=f,ct=l;else{if(l===null)throw $e.alternate===null?Error(r(467)):Error(r(310));ct=l,l={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Vt===null?$e.memoizedState=Vt=l:Vt=Vt.next=l}return Vt}function M0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Du(l){var f=Lu;return Lu+=1,Oo===null&&(Oo=[]),l=wR(Oo,l,f),f=$e,(Vt===null?f.memoizedState:Vt.next)===null&&(f=f.alternate,j.H=f===null||f.memoizedState===null?hO:mO),l}function Md(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Du(l);if(l.$$typeof===A)return Cn(l)}throw Error(r(438,String(l)))}function k0(l){var f=null,m=$e.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var g=$e.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(f={data:g.data.map(function(E){return E.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=M0(),$e.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(l),g=0;g<l;g++)m[g]=k;return f.index++,m}function ki(l,f){return typeof f=="function"?f(l):f}function kd(l){var f=qt();return j0(f,ct,l)}function j0(l,f,m){var g=l.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=m;var E=l.baseQueue,w=g.pending;if(w!==null){if(E!==null){var I=E.next;E.next=w.next,w.next=I}f.baseQueue=E=w,g.pending=null}if(w=l.baseState,E===null)l.memoizedState=w;else{f=E.next;var U=I=null,z=null,ie=f,ue=!1;do{var he=ie.lane&-536870913;if(he!==ie.lane?(Xe&he)===he:(Sa&he)===he){var ae=ie.revertLane;if(ae===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),he===Ao&&(ue=!0);else if((Sa&ae)===ae){ie=ie.next,ae===Ao&&(ue=!0);continue}else he={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},z===null?(U=z=he,I=w):z=z.next=he,$e.lanes|=ae,Oa|=ae;he=ie.action,Ss&&m(w,he),w=ie.hasEagerState?ie.eagerState:m(w,he)}else ae={lane:he,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},z===null?(U=z=ae,I=w):z=z.next=ae,$e.lanes|=he,Oa|=he;ie=ie.next}while(ie!==null&&ie!==f);if(z===null?I=w:z.next=U,!Jn(w,l.memoizedState)&&(un=!0,ue&&(m=wo,m!==null)))throw m;l.memoizedState=w,l.baseState=I,l.baseQueue=z,g.lastRenderedState=w}return E===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function U0(l){var f=qt(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var g=m.dispatch,E=m.pending,w=f.memoizedState;if(E!==null){m.pending=null;var I=E=E.next;do w=l(w,I.action),I=I.next;while(I!==E);Jn(w,f.memoizedState)||(un=!0),f.memoizedState=w,f.baseQueue===null&&(f.baseState=w),m.lastRenderedState=w}return[w,g]}function PR(l,f,m){var g=$e,E=qt(),w=nt;if(w){if(m===void 0)throw Error(r(407));m=m()}else m=f();var I=!Jn((ct||E).memoizedState,m);I&&(E.memoizedState=m,un=!0),E=E.queue;var U=kR.bind(null,g,E,l);if(Iu(2048,8,U,[l]),E.getSnapshot!==f||I||Vt!==null&&Vt.memoizedState.tag&1){if(g.flags|=2048,Co(9,jd(),MR.bind(null,g,E,m,f),null),xt===null)throw Error(r(349));w||(Sa&124)!==0||NR(g,f,m)}return m}function NR(l,f,m){l.flags|=16384,l={getSnapshot:f,value:m},f=$e.updateQueue,f===null?(f=M0(),$e.updateQueue=f,f.stores=[l]):(m=f.stores,m===null?f.stores=[l]:m.push(l))}function MR(l,f,m,g){f.value=m,f.getSnapshot=g,jR(f)&&UR(l)}function kR(l,f,m){return m(function(){jR(f)&&UR(l)})}function jR(l){var f=l.getSnapshot;l=l.value;try{var m=f();return!Jn(l,m)}catch{return!0}}function UR(l){var f=bo(l,2);f!==null&&ar(f,l,2)}function B0(l){var f=Vn();if(typeof l=="function"){var m=l;if(l=m(),Ss){ii(!0);try{m()}finally{ii(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:l},f}function BR(l,f,m,g){return l.baseState=m,j0(l,ct,typeof g=="function"?g:ki)}function sq(l,f,m,g,E){if(Bd(l))throw Error(r(485));if(l=f.action,l!==null){var w={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){w.listeners.push(I)}};j.T!==null?m(!0):w.isTransition=!1,g(w),m=f.pending,m===null?(w.next=f.pending=w,FR(f,w)):(w.next=m.next,f.pending=m.next=w)}}function FR(l,f){var m=f.action,g=f.payload,E=l.state;if(f.isTransition){var w=j.T,I={};j.T=I;try{var U=m(E,g),z=j.S;z!==null&&z(I,U),$R(l,f,U)}catch(ie){F0(l,f,ie)}finally{j.T=w}}else try{w=m(E,g),$R(l,f,w)}catch(ie){F0(l,f,ie)}}function $R(l,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(g){GR(l,f,g)},function(g){return F0(l,f,g)}):GR(l,f,m)}function GR(l,f,m){f.status="fulfilled",f.value=m,VR(f),l.state=m,f=l.pending,f!==null&&(m=f.next,m===f?l.pending=null:(m=m.next,f.next=m,FR(l,m)))}function F0(l,f,m){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do f.status="rejected",f.reason=m,VR(f),f=f.next;while(f!==g)}l.action=null}function VR(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function qR(l,f){return f}function HR(l,f){if(nt){var m=xt.formState;if(m!==null){e:{var g=$e;if(nt){if(Pt){t:{for(var E=Pt,w=ai;E.nodeType!==8;){if(!w){E=null;break t}if(E=Vr(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Pt=Vr(E.nextSibling),g=E.data==="F!";break e}}ys(g)}g=!1}g&&(f=m[0])}}return m=Vn(),m.memoizedState=m.baseState=f,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qR,lastRenderedState:f},m.queue=g,m=cO.bind(null,$e,g),g.dispatch=m,g=B0(!1),w=H0.bind(null,$e,!1,g.queue),g=Vn(),E={state:f,dispatch:null,action:l,pending:null},g.queue=E,m=sq.bind(null,$e,E,w,m),E.dispatch=m,g.memoizedState=l,[f,m,!1]}function zR(l){var f=qt();return KR(f,ct,l)}function KR(l,f,m){if(f=j0(l,f,qR)[0],l=kd(ki)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var g=Du(f)}catch(I){throw I===wu?Ld:I}else g=f;f=qt();var E=f.queue,w=E.dispatch;return m!==f.memoizedState&&($e.flags|=2048,Co(9,jd(),oq.bind(null,E,m),null)),[g,w,l]}function oq(l,f){l.action=f}function YR(l){var f=qt(),m=ct;if(m!==null)return KR(f,m,l);qt(),f=f.memoizedState,m=qt();var g=m.queue.dispatch;return m.memoizedState=l,[f,g,!1]}function Co(l,f,m,g){return l={tag:l,create:m,deps:g,inst:f,next:null},f=$e.updateQueue,f===null&&(f=M0(),$e.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=l.next=l:(g=m.next,m.next=l,l.next=g,f.lastEffect=l),l}function jd(){return{destroy:void 0,resource:void 0}}function WR(){return qt().memoizedState}function Ud(l,f,m,g){var E=Vn();g=g===void 0?null:g,$e.flags|=l,E.memoizedState=Co(1|f,jd(),m,g)}function Iu(l,f,m,g){var E=qt();g=g===void 0?null:g;var w=E.memoizedState.inst;ct!==null&&g!==null&&L0(g,ct.memoizedState.deps)?E.memoizedState=Co(f,w,m,g):($e.flags|=l,E.memoizedState=Co(1|f,w,m,g))}function XR(l,f){Ud(8390656,8,l,f)}function QR(l,f){Iu(2048,8,l,f)}function ZR(l,f){return Iu(4,2,l,f)}function JR(l,f){return Iu(4,4,l,f)}function eO(l,f){if(typeof f=="function"){l=l();var m=f(l);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function tO(l,f,m){m=m!=null?m.concat([l]):null,Iu(4,4,eO.bind(null,f,l),m)}function $0(){}function nO(l,f){var m=qt();f=f===void 0?null:f;var g=m.memoizedState;return f!==null&&L0(f,g[1])?g[0]:(m.memoizedState=[l,f],l)}function rO(l,f){var m=qt();f=f===void 0?null:f;var g=m.memoizedState;if(f!==null&&L0(f,g[1]))return g[0];if(g=l(),Ss){ii(!0);try{l()}finally{ii(!1)}}return m.memoizedState=[g,f],g}function G0(l,f,m){return m===void 0||(Sa&1073741824)!==0?l.memoizedState=f:(l.memoizedState=m,l=sC(),$e.lanes|=l,Oa|=l,m)}function iO(l,f,m,g){return Jn(m,f)?m:_o.current!==null?(l=G0(l,m,g),Jn(l,f)||(un=!0),l):(Sa&42)===0?(un=!0,l.memoizedState=m):(l=sC(),$e.lanes|=l,Oa|=l,f)}function aO(l,f,m,g,E){var w=$.p;$.p=w!==0&&8>w?w:8;var I=j.T,U={};j.T=U,H0(l,!1,f,m);try{var z=E(),ie=j.S;if(ie!==null&&ie(U,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ue=rq(z,g);Pu(l,f,ue,ir(l))}else Pu(l,f,g,ir(l))}catch(he){Pu(l,f,{then:function(){},status:"rejected",reason:he},ir())}finally{$.p=w,j.T=I}}function lq(){}function V0(l,f,m,g){if(l.tag!==5)throw Error(r(476));var E=sO(l).queue;aO(l,E,f,q,m===null?lq:function(){return oO(l),m(g)})}function sO(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:q},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:m},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function oO(l){var f=sO(l).next.queue;Pu(l,f,{},ir())}function q0(){return Cn(Qu)}function lO(){return qt().memoizedState}function uO(){return qt().memoizedState}function uq(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var m=ir();l=xa(m);var g=ba(f,l,m);g!==null&&(ar(g,f,m),Ru(g,f,m)),f={cache:b0()},l.payload=f;return}f=f.return}}function cq(l,f,m){var g=ir();m={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Bd(l)?fO(f,m):(m=c0(l,f,m,g),m!==null&&(ar(m,l,g),dO(m,f,g)))}function cO(l,f,m){var g=ir();Pu(l,f,m,g)}function Pu(l,f,m,g){var E={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Bd(l))fO(f,E);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=f.lastRenderedReducer,w!==null))try{var I=f.lastRenderedState,U=w(I,m);if(E.hasEagerState=!0,E.eagerState=U,Jn(U,I))return Ed(l,f,E,0),xt===null&&Sd(),!1}catch{}finally{}if(m=c0(l,f,E,g),m!==null)return ar(m,l,g),dO(m,f,g),!0}return!1}function H0(l,f,m,g){if(g={lane:2,revertLane:Ty(),action:g,hasEagerState:!1,eagerState:null,next:null},Bd(l)){if(f)throw Error(r(479))}else f=c0(l,m,g,2),f!==null&&ar(f,l,2)}function Bd(l){var f=l.alternate;return l===$e||f!==null&&f===$e}function fO(l,f){Ro=Pd=!0;var m=l.pending;m===null?f.next=f:(f.next=m.next,m.next=f),l.pending=f}function dO(l,f,m){if((m&4194048)!==0){var g=f.lanes;g&=l.pendingLanes,m|=g,f.lanes=m,b_(l,m)}}var Fd={readContext:Cn,use:Md,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},hO={readContext:Cn,use:Md,useCallback:function(l,f){return Vn().memoizedState=[l,f===void 0?null:f],l},useContext:Cn,useEffect:XR,useImperativeHandle:function(l,f,m){m=m!=null?m.concat([l]):null,Ud(4194308,4,eO.bind(null,f,l),m)},useLayoutEffect:function(l,f){return Ud(4194308,4,l,f)},useInsertionEffect:function(l,f){Ud(4,2,l,f)},useMemo:function(l,f){var m=Vn();f=f===void 0?null:f;var g=l();if(Ss){ii(!0);try{l()}finally{ii(!1)}}return m.memoizedState=[g,f],g},useReducer:function(l,f,m){var g=Vn();if(m!==void 0){var E=m(f);if(Ss){ii(!0);try{m(f)}finally{ii(!1)}}}else E=f;return g.memoizedState=g.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},g.queue=l,l=l.dispatch=cq.bind(null,$e,l),[g.memoizedState,l]},useRef:function(l){var f=Vn();return l={current:l},f.memoizedState=l},useState:function(l){l=B0(l);var f=l.queue,m=cO.bind(null,$e,f);return f.dispatch=m,[l.memoizedState,m]},useDebugValue:$0,useDeferredValue:function(l,f){var m=Vn();return G0(m,l,f)},useTransition:function(){var l=B0(!1);return l=aO.bind(null,$e,l.queue,!0,!1),Vn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,m){var g=$e,E=Vn();if(nt){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),xt===null)throw Error(r(349));(Xe&124)!==0||NR(g,f,m)}E.memoizedState=m;var w={value:m,getSnapshot:f};return E.queue=w,XR(kR.bind(null,g,w,l),[l]),g.flags|=2048,Co(9,jd(),MR.bind(null,g,w,m,f),null),m},useId:function(){var l=Vn(),f=xt.identifierPrefix;if(nt){var m=Pi,g=Ii;m=(g&~(1<<32-Rn(g)-1)).toString(32)+m,f="«"+f+"R"+m,m=Nd++,0<m&&(f+="H"+m.toString(32)),f+="»"}else m=iq++,f="«"+f+"r"+m.toString(32)+"»";return l.memoizedState=f},useHostTransitionStatus:q0,useFormState:HR,useActionState:HR,useOptimistic:function(l){var f=Vn();f.memoizedState=f.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=H0.bind(null,$e,!0,m),m.dispatch=f,[l,f]},useMemoCache:k0,useCacheRefresh:function(){return Vn().memoizedState=uq.bind(null,$e)}},mO={readContext:Cn,use:Md,useCallback:nO,useContext:Cn,useEffect:QR,useImperativeHandle:tO,useInsertionEffect:ZR,useLayoutEffect:JR,useMemo:rO,useReducer:kd,useRef:WR,useState:function(){return kd(ki)},useDebugValue:$0,useDeferredValue:function(l,f){var m=qt();return iO(m,ct.memoizedState,l,f)},useTransition:function(){var l=kd(ki)[0],f=qt().memoizedState;return[typeof l=="boolean"?l:Du(l),f]},useSyncExternalStore:PR,useId:lO,useHostTransitionStatus:q0,useFormState:zR,useActionState:zR,useOptimistic:function(l,f){var m=qt();return BR(m,ct,l,f)},useMemoCache:k0,useCacheRefresh:uO},fq={readContext:Cn,use:Md,useCallback:nO,useContext:Cn,useEffect:QR,useImperativeHandle:tO,useInsertionEffect:ZR,useLayoutEffect:JR,useMemo:rO,useReducer:U0,useRef:WR,useState:function(){return U0(ki)},useDebugValue:$0,useDeferredValue:function(l,f){var m=qt();return ct===null?G0(m,l,f):iO(m,ct.memoizedState,l,f)},useTransition:function(){var l=U0(ki)[0],f=qt().memoizedState;return[typeof l=="boolean"?l:Du(l),f]},useSyncExternalStore:PR,useId:lO,useHostTransitionStatus:q0,useFormState:YR,useActionState:YR,useOptimistic:function(l,f){var m=qt();return ct!==null?BR(m,ct,l,f):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:k0,useCacheRefresh:uO},Lo=null,Nu=0;function $d(l){var f=Nu;return Nu+=1,Lo===null&&(Lo=[]),wR(Lo,l,f)}function Mu(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function Gd(l,f){throw f.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(f),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function pO(l){var f=l._init;return f(l._payload)}function gO(l){function f(J,X){if(l){var ne=J.deletions;ne===null?(J.deletions=[X],J.flags|=16):ne.push(X)}}function m(J,X){if(!l)return null;for(;X!==null;)f(J,X),X=X.sibling;return null}function g(J){for(var X=new Map;J!==null;)J.key!==null?X.set(J.key,J):X.set(J.index,J),J=J.sibling;return X}function E(J,X){return J=Di(J,X),J.index=0,J.sibling=null,J}function w(J,X,ne){return J.index=ne,l?(ne=J.alternate,ne!==null?(ne=ne.index,ne<X?(J.flags|=67108866,X):ne):(J.flags|=67108866,X)):(J.flags|=1048576,X)}function I(J){return l&&J.alternate===null&&(J.flags|=67108866),J}function U(J,X,ne,de){return X===null||X.tag!==6?(X=d0(ne,J.mode,de),X.return=J,X):(X=E(X,ne),X.return=J,X)}function z(J,X,ne,de){var Ee=ne.type;return Ee===v?ue(J,X,ne.props.children,de,ne.key):X!==null&&(X.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===P&&pO(Ee)===X.type)?(X=E(X,ne.props),Mu(X,ne),X.return=J,X):(X=Ad(ne.type,ne.key,ne.props,null,J.mode,de),Mu(X,ne),X.return=J,X)}function ie(J,X,ne,de){return X===null||X.tag!==4||X.stateNode.containerInfo!==ne.containerInfo||X.stateNode.implementation!==ne.implementation?(X=h0(ne,J.mode,de),X.return=J,X):(X=E(X,ne.children||[]),X.return=J,X)}function ue(J,X,ne,de,Ee){return X===null||X.tag!==7?(X=hs(ne,J.mode,de,Ee),X.return=J,X):(X=E(X,ne),X.return=J,X)}function he(J,X,ne){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=d0(""+X,J.mode,ne),X.return=J,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case p:return ne=Ad(X.type,X.key,X.props,null,J.mode,ne),Mu(ne,X),ne.return=J,ne;case y:return X=h0(X,J.mode,ne),X.return=J,X;case P:var de=X._init;return X=de(X._payload),he(J,X,ne)}if(Y(X)||G(X))return X=hs(X,J.mode,ne,null),X.return=J,X;if(typeof X.then=="function")return he(J,$d(X),ne);if(X.$$typeof===A)return he(J,Od(J,X),ne);Gd(J,X)}return null}function ae(J,X,ne,de){var Ee=X!==null?X.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ee!==null?null:U(J,X,""+ne,de);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case p:return ne.key===Ee?z(J,X,ne,de):null;case y:return ne.key===Ee?ie(J,X,ne,de):null;case P:return Ee=ne._init,ne=Ee(ne._payload),ae(J,X,ne,de)}if(Y(ne)||G(ne))return Ee!==null?null:ue(J,X,ne,de,null);if(typeof ne.then=="function")return ae(J,X,$d(ne),de);if(ne.$$typeof===A)return ae(J,X,Od(J,ne),de);Gd(J,ne)}return null}function se(J,X,ne,de,Ee){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return J=J.get(ne)||null,U(X,J,""+de,Ee);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case p:return J=J.get(de.key===null?ne:de.key)||null,z(X,J,de,Ee);case y:return J=J.get(de.key===null?ne:de.key)||null,ie(X,J,de,Ee);case P:var qe=de._init;return de=qe(de._payload),se(J,X,ne,de,Ee)}if(Y(de)||G(de))return J=J.get(ne)||null,ue(X,J,de,Ee,null);if(typeof de.then=="function")return se(J,X,ne,$d(de),Ee);if(de.$$typeof===A)return se(J,X,ne,Od(X,de),Ee);Gd(X,de)}return null}function Ie(J,X,ne,de){for(var Ee=null,qe=null,we=X,Le=X=0,fn=null;we!==null&&Le<ne.length;Le++){we.index>Le?(fn=we,we=null):fn=we.sibling;var Qe=ae(J,we,ne[Le],de);if(Qe===null){we===null&&(we=fn);break}l&&we&&Qe.alternate===null&&f(J,we),X=w(Qe,X,Le),qe===null?Ee=Qe:qe.sibling=Qe,qe=Qe,we=fn}if(Le===ne.length)return m(J,we),nt&&ps(J,Le),Ee;if(we===null){for(;Le<ne.length;Le++)we=he(J,ne[Le],de),we!==null&&(X=w(we,X,Le),qe===null?Ee=we:qe.sibling=we,qe=we);return nt&&ps(J,Le),Ee}for(we=g(we);Le<ne.length;Le++)fn=se(we,J,Le,ne[Le],de),fn!==null&&(l&&fn.alternate!==null&&we.delete(fn.key===null?Le:fn.key),X=w(fn,X,Le),qe===null?Ee=fn:qe.sibling=fn,qe=fn);return l&&we.forEach(function(ja){return f(J,ja)}),nt&&ps(J,Le),Ee}function Ce(J,X,ne,de){if(ne==null)throw Error(r(151));for(var Ee=null,qe=null,we=X,Le=X=0,fn=null,Qe=ne.next();we!==null&&!Qe.done;Le++,Qe=ne.next()){we.index>Le?(fn=we,we=null):fn=we.sibling;var ja=ae(J,we,Qe.value,de);if(ja===null){we===null&&(we=fn);break}l&&we&&ja.alternate===null&&f(J,we),X=w(ja,X,Le),qe===null?Ee=ja:qe.sibling=ja,qe=ja,we=fn}if(Qe.done)return m(J,we),nt&&ps(J,Le),Ee;if(we===null){for(;!Qe.done;Le++,Qe=ne.next())Qe=he(J,Qe.value,de),Qe!==null&&(X=w(Qe,X,Le),qe===null?Ee=Qe:qe.sibling=Qe,qe=Qe);return nt&&ps(J,Le),Ee}for(we=g(we);!Qe.done;Le++,Qe=ne.next())Qe=se(we,J,Le,Qe.value,de),Qe!==null&&(l&&Qe.alternate!==null&&we.delete(Qe.key===null?Le:Qe.key),X=w(Qe,X,Le),qe===null?Ee=Qe:qe.sibling=Qe,qe=Qe);return l&&we.forEach(function(dH){return f(J,dH)}),nt&&ps(J,Le),Ee}function dt(J,X,ne,de){if(typeof ne=="object"&&ne!==null&&ne.type===v&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case p:e:{for(var Ee=ne.key;X!==null;){if(X.key===Ee){if(Ee=ne.type,Ee===v){if(X.tag===7){m(J,X.sibling),de=E(X,ne.props.children),de.return=J,J=de;break e}}else if(X.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===P&&pO(Ee)===X.type){m(J,X.sibling),de=E(X,ne.props),Mu(de,ne),de.return=J,J=de;break e}m(J,X);break}else f(J,X);X=X.sibling}ne.type===v?(de=hs(ne.props.children,J.mode,de,ne.key),de.return=J,J=de):(de=Ad(ne.type,ne.key,ne.props,null,J.mode,de),Mu(de,ne),de.return=J,J=de)}return I(J);case y:e:{for(Ee=ne.key;X!==null;){if(X.key===Ee)if(X.tag===4&&X.stateNode.containerInfo===ne.containerInfo&&X.stateNode.implementation===ne.implementation){m(J,X.sibling),de=E(X,ne.children||[]),de.return=J,J=de;break e}else{m(J,X);break}else f(J,X);X=X.sibling}de=h0(ne,J.mode,de),de.return=J,J=de}return I(J);case P:return Ee=ne._init,ne=Ee(ne._payload),dt(J,X,ne,de)}if(Y(ne))return Ie(J,X,ne,de);if(G(ne)){if(Ee=G(ne),typeof Ee!="function")throw Error(r(150));return ne=Ee.call(ne),Ce(J,X,ne,de)}if(typeof ne.then=="function")return dt(J,X,$d(ne),de);if(ne.$$typeof===A)return dt(J,X,Od(J,ne),de);Gd(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,X!==null&&X.tag===6?(m(J,X.sibling),de=E(X,ne),de.return=J,J=de):(m(J,X),de=d0(ne,J.mode,de),de.return=J,J=de),I(J)):m(J,X)}return function(J,X,ne,de){try{Nu=0;var Ee=dt(J,X,ne,de);return Lo=null,Ee}catch(we){if(we===wu||we===Ld)throw we;var qe=er(29,we,null,J.mode);return qe.lanes=de,qe.return=J,qe}finally{}}}var Do=gO(!0),yO=gO(!1),xr=V(null),si=null;function Ea(l){var f=l.alternate;te(Zt,Zt.current&1),te(xr,l),si===null&&(f===null||_o.current!==null||f.memoizedState!==null)&&(si=l)}function vO(l){if(l.tag===22){if(te(Zt,Zt.current),te(xr,l),si===null){var f=l.alternate;f!==null&&f.memoizedState!==null&&(si=l)}}else Ta()}function Ta(){te(Zt,Zt.current),te(xr,xr.current)}function ji(l){H(xr),si===l&&(si=null),H(Zt)}var Zt=V(0);function Vd(l){for(var f=l;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||My(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function z0(l,f,m,g){f=l.memoizedState,m=m(g,f),m=m==null?f:d({},f,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var K0={enqueueSetState:function(l,f,m){l=l._reactInternals;var g=ir(),E=xa(g);E.payload=f,m!=null&&(E.callback=m),f=ba(l,E,g),f!==null&&(ar(f,l,g),Ru(f,l,g))},enqueueReplaceState:function(l,f,m){l=l._reactInternals;var g=ir(),E=xa(g);E.tag=1,E.payload=f,m!=null&&(E.callback=m),f=ba(l,E,g),f!==null&&(ar(f,l,g),Ru(f,l,g))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var m=ir(),g=xa(m);g.tag=2,f!=null&&(g.callback=f),f=ba(l,g,m),f!==null&&(ar(f,l,m),Ru(f,l,m))}};function xO(l,f,m,g,E,w,I){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,w,I):f.prototype&&f.prototype.isPureReactComponent?!yu(m,g)||!yu(E,w):!0}function bO(l,f,m,g){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,g),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,g),f.state!==l&&K0.enqueueReplaceState(f,f.state,null)}function Es(l,f){var m=f;if("ref"in f){m={};for(var g in f)g!=="ref"&&(m[g]=f[g])}if(l=l.defaultProps){m===f&&(m=d({},m));for(var E in l)m[E]===void 0&&(m[E]=l[E])}return m}var qd=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function SO(l){qd(l)}function EO(l){console.error(l)}function TO(l){qd(l)}function Hd(l,f){try{var m=l.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(g){setTimeout(function(){throw g})}}function AO(l,f,m){try{var g=l.onCaughtError;g(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Y0(l,f,m){return m=xa(m),m.tag=3,m.payload={element:null},m.callback=function(){Hd(l,f)},m}function wO(l){return l=xa(l),l.tag=3,l}function _O(l,f,m,g){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var w=g.value;l.payload=function(){return E(w)},l.callback=function(){AO(f,m,g)}}var I=m.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(l.callback=function(){AO(f,m,g),typeof E!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function dq(l,f,m,g,E){if(m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(f=m.alternate,f!==null&&Eu(f,m,E,!0),m=xr.current,m!==null){switch(m.tag){case 13:return si===null?vy():m.alternate===null&&Nt===0&&(Nt=3),m.flags&=-257,m.flags|=65536,m.lanes=E,g===T0?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([g]):f.add(g),by(l,g,E)),!1;case 22:return m.flags|=65536,g===T0?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([g])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([g]):m.add(g)),by(l,g,E)),!1}throw Error(r(435,m.tag))}return by(l,g,E),vy(),!1}if(nt)return f=xr.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=E,g!==g0&&(l=Error(r(422),{cause:g}),Su(pr(l,m)))):(g!==g0&&(f=Error(r(423),{cause:g}),Su(pr(f,m))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,g=pr(g,m),E=Y0(l.stateNode,g,E),_0(l,E),Nt!==4&&(Nt=2)),!1;var w=Error(r(520),{cause:g});if(w=pr(w,m),Gu===null?Gu=[w]:Gu.push(w),Nt!==4&&(Nt=2),f===null)return!0;g=pr(g,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,l=E&-E,m.lanes|=l,l=Y0(m.stateNode,g,l),_0(m,l),!1;case 1:if(f=m.type,w=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ca===null||!Ca.has(w))))return m.flags|=65536,E&=-E,m.lanes|=E,E=wO(E),_O(E,l,m,g),_0(m,E),!1}m=m.return}while(m!==null);return!1}var RO=Error(r(461)),un=!1;function xn(l,f,m,g){f.child=l===null?yO(f,null,m,g):Do(f,l.child,m,g)}function OO(l,f,m,g,E){m=m.render;var w=f.ref;if("ref"in g){var I={};for(var U in g)U!=="ref"&&(I[U]=g[U])}else I=g;return xs(f),g=D0(l,f,m,I,w,E),U=I0(),l!==null&&!un?(P0(l,f,E),Ui(l,f,E)):(nt&&U&&m0(f),f.flags|=1,xn(l,f,g,E),f.child)}function CO(l,f,m,g,E){if(l===null){var w=m.type;return typeof w=="function"&&!f0(w)&&w.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=w,LO(l,f,w,g,E)):(l=Ad(m.type,null,g,f,f.mode,E),l.ref=f.ref,l.return=f,f.child=l)}if(w=l.child,!ny(l,E)){var I=w.memoizedProps;if(m=m.compare,m=m!==null?m:yu,m(I,g)&&l.ref===f.ref)return Ui(l,f,E)}return f.flags|=1,l=Di(w,g),l.ref=f.ref,l.return=f,f.child=l}function LO(l,f,m,g,E){if(l!==null){var w=l.memoizedProps;if(yu(w,g)&&l.ref===f.ref)if(un=!1,f.pendingProps=g=w,ny(l,E))(l.flags&131072)!==0&&(un=!0);else return f.lanes=l.lanes,Ui(l,f,E)}return W0(l,f,m,g,E)}function DO(l,f,m){var g=f.pendingProps,E=g.children,w=l!==null?l.memoizedState:null;if(g.mode==="hidden"){if((f.flags&128)!==0){if(g=w!==null?w.baseLanes|m:m,l!==null){for(E=f.child=l.child,w=0;E!==null;)w=w|E.lanes|E.childLanes,E=E.sibling;f.childLanes=w&~g}else f.childLanes=0,f.child=null;return IO(l,f,g,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&Cd(f,w!==null?w.cachePool:null),w!==null?LR(f,w):O0(),vO(f);else return f.lanes=f.childLanes=536870912,IO(l,f,w!==null?w.baseLanes|m:m,m)}else w!==null?(Cd(f,w.cachePool),LR(f,w),Ta(),f.memoizedState=null):(l!==null&&Cd(f,null),O0(),Ta());return xn(l,f,E,m),f.child}function IO(l,f,m,g){var E=E0();return E=E===null?null:{parent:Qt._currentValue,pool:E},f.memoizedState={baseLanes:m,cachePool:E},l!==null&&Cd(f,null),O0(),vO(f),l!==null&&Eu(l,f,g,!0),null}function zd(l,f){var m=f.ref;if(m===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(l===null||l.ref!==m)&&(f.flags|=4194816)}}function W0(l,f,m,g,E){return xs(f),m=D0(l,f,m,g,void 0,E),g=I0(),l!==null&&!un?(P0(l,f,E),Ui(l,f,E)):(nt&&g&&m0(f),f.flags|=1,xn(l,f,m,E),f.child)}function PO(l,f,m,g,E,w){return xs(f),f.updateQueue=null,m=IR(f,g,m,E),DR(l),g=I0(),l!==null&&!un?(P0(l,f,w),Ui(l,f,w)):(nt&&g&&m0(f),f.flags|=1,xn(l,f,m,w),f.child)}function NO(l,f,m,g,E){if(xs(f),f.stateNode===null){var w=So,I=m.contextType;typeof I=="object"&&I!==null&&(w=Cn(I)),w=new m(g,w),f.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=K0,f.stateNode=w,w._reactInternals=f,w=f.stateNode,w.props=g,w.state=f.memoizedState,w.refs={},A0(f),I=m.contextType,w.context=typeof I=="object"&&I!==null?Cn(I):So,w.state=f.memoizedState,I=m.getDerivedStateFromProps,typeof I=="function"&&(z0(f,m,I,g),w.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(I=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),I!==w.state&&K0.enqueueReplaceState(w,w.state,null),Cu(f,g,w,E),Ou(),w.state=f.memoizedState),typeof w.componentDidMount=="function"&&(f.flags|=4194308),g=!0}else if(l===null){w=f.stateNode;var U=f.memoizedProps,z=Es(m,U);w.props=z;var ie=w.context,ue=m.contextType;I=So,typeof ue=="object"&&ue!==null&&(I=Cn(ue));var he=m.getDerivedStateFromProps;ue=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=f.pendingProps!==U,ue||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||ie!==I)&&bO(f,w,g,I),va=!1;var ae=f.memoizedState;w.state=ae,Cu(f,g,w,E),Ou(),ie=f.memoizedState,U||ae!==ie||va?(typeof he=="function"&&(z0(f,m,he,g),ie=f.memoizedState),(z=va||xO(f,m,z,g,ae,ie,I))?(ue||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(f.flags|=4194308)):(typeof w.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=g,f.memoizedState=ie),w.props=g,w.state=ie,w.context=I,g=z):(typeof w.componentDidMount=="function"&&(f.flags|=4194308),g=!1)}else{w=f.stateNode,w0(l,f),I=f.memoizedProps,ue=Es(m,I),w.props=ue,he=f.pendingProps,ae=w.context,ie=m.contextType,z=So,typeof ie=="object"&&ie!==null&&(z=Cn(ie)),U=m.getDerivedStateFromProps,(ie=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I!==he||ae!==z)&&bO(f,w,g,z),va=!1,ae=f.memoizedState,w.state=ae,Cu(f,g,w,E),Ou();var se=f.memoizedState;I!==he||ae!==se||va||l!==null&&l.dependencies!==null&&Rd(l.dependencies)?(typeof U=="function"&&(z0(f,m,U,g),se=f.memoizedState),(ue=va||xO(f,m,ue,g,ae,se,z)||l!==null&&l.dependencies!==null&&Rd(l.dependencies))?(ie||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,se,z),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,se,z)),typeof w.componentDidUpdate=="function"&&(f.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof w.componentDidUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=1024),f.memoizedProps=g,f.memoizedState=se),w.props=g,w.state=se,w.context=z,g=ue):(typeof w.componentDidUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=1024),g=!1)}return w=g,zd(l,f),g=(f.flags&128)!==0,w||g?(w=f.stateNode,m=g&&typeof m.getDerivedStateFromError!="function"?null:w.render(),f.flags|=1,l!==null&&g?(f.child=Do(f,l.child,null,E),f.child=Do(f,null,m,E)):xn(l,f,m,E),f.memoizedState=w.state,l=f.child):l=Ui(l,f,E),l}function MO(l,f,m,g){return bu(),f.flags|=256,xn(l,f,m,g),f.child}var X0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Q0(l){return{baseLanes:l,cachePool:ER()}}function Z0(l,f,m){return l=l!==null?l.childLanes&~m:0,f&&(l|=br),l}function kO(l,f,m){var g=f.pendingProps,E=!1,w=(f.flags&128)!==0,I;if((I=w)||(I=l!==null&&l.memoizedState===null?!1:(Zt.current&2)!==0),I&&(E=!0,f.flags&=-129),I=(f.flags&32)!==0,f.flags&=-33,l===null){if(nt){if(E?Ea(f):Ta(),nt){var U=Pt,z;if(z=U){e:{for(z=U,U=ai;z.nodeType!==8;){if(!U){U=null;break e}if(z=Vr(z.nextSibling),z===null){U=null;break e}}U=z}U!==null?(f.memoizedState={dehydrated:U,treeContext:ms!==null?{id:Ii,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},z=er(18,null,null,0),z.stateNode=U,z.return=f,f.child=z,jn=f,Pt=null,z=!0):z=!1}z||ys(f)}if(U=f.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return My(U)?f.lanes=32:f.lanes=536870912,null;ji(f)}return U=g.children,g=g.fallback,E?(Ta(),E=f.mode,U=Kd({mode:"hidden",children:U},E),g=hs(g,E,m,null),U.return=f,g.return=f,U.sibling=g,f.child=U,E=f.child,E.memoizedState=Q0(m),E.childLanes=Z0(l,I,m),f.memoizedState=X0,g):(Ea(f),J0(f,U))}if(z=l.memoizedState,z!==null&&(U=z.dehydrated,U!==null)){if(w)f.flags&256?(Ea(f),f.flags&=-257,f=ey(l,f,m)):f.memoizedState!==null?(Ta(),f.child=l.child,f.flags|=128,f=null):(Ta(),E=g.fallback,U=f.mode,g=Kd({mode:"visible",children:g.children},U),E=hs(E,U,m,null),E.flags|=2,g.return=f,E.return=f,g.sibling=E,f.child=g,Do(f,l.child,null,m),g=f.child,g.memoizedState=Q0(m),g.childLanes=Z0(l,I,m),f.memoizedState=X0,f=E);else if(Ea(f),My(U)){if(I=U.nextSibling&&U.nextSibling.dataset,I)var ie=I.dgst;I=ie,g=Error(r(419)),g.stack="",g.digest=I,Su({value:g,source:null,stack:null}),f=ey(l,f,m)}else if(un||Eu(l,f,m,!1),I=(m&l.childLanes)!==0,un||I){if(I=xt,I!==null&&(g=m&-m,g=(g&42)!==0?1:kg(g),g=(g&(I.suspendedLanes|m))!==0?0:g,g!==0&&g!==z.retryLane))throw z.retryLane=g,bo(l,g),ar(I,l,g),RO;U.data==="$?"||vy(),f=ey(l,f,m)}else U.data==="$?"?(f.flags|=192,f.child=l.child,f=null):(l=z.treeContext,Pt=Vr(U.nextSibling),jn=f,nt=!0,gs=null,ai=!1,l!==null&&(yr[vr++]=Ii,yr[vr++]=Pi,yr[vr++]=ms,Ii=l.id,Pi=l.overflow,ms=f),f=J0(f,g.children),f.flags|=4096);return f}return E?(Ta(),E=g.fallback,U=f.mode,z=l.child,ie=z.sibling,g=Di(z,{mode:"hidden",children:g.children}),g.subtreeFlags=z.subtreeFlags&65011712,ie!==null?E=Di(ie,E):(E=hs(E,U,m,null),E.flags|=2),E.return=f,g.return=f,g.sibling=E,f.child=g,g=E,E=f.child,U=l.child.memoizedState,U===null?U=Q0(m):(z=U.cachePool,z!==null?(ie=Qt._currentValue,z=z.parent!==ie?{parent:ie,pool:ie}:z):z=ER(),U={baseLanes:U.baseLanes|m,cachePool:z}),E.memoizedState=U,E.childLanes=Z0(l,I,m),f.memoizedState=X0,g):(Ea(f),m=l.child,l=m.sibling,m=Di(m,{mode:"visible",children:g.children}),m.return=f,m.sibling=null,l!==null&&(I=f.deletions,I===null?(f.deletions=[l],f.flags|=16):I.push(l)),f.child=m,f.memoizedState=null,m)}function J0(l,f){return f=Kd({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Kd(l,f){return l=er(22,l,null,f),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function ey(l,f,m){return Do(f,l.child,null,m),l=J0(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function jO(l,f,m){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f),v0(l.return,f,m)}function ty(l,f,m,g,E){var w=l.memoizedState;w===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:g,tail:m,tailMode:E}:(w.isBackwards=f,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=m,w.tailMode=E)}function UO(l,f,m){var g=f.pendingProps,E=g.revealOrder,w=g.tail;if(xn(l,f,g.children,m),g=Zt.current,(g&2)!==0)g=g&1|2,f.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&jO(l,m,f);else if(l.tag===19)jO(l,m,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}g&=1}switch(te(Zt,g),E){case"forwards":for(m=f.child,E=null;m!==null;)l=m.alternate,l!==null&&Vd(l)===null&&(E=m),m=m.sibling;m=E,m===null?(E=f.child,f.child=null):(E=m.sibling,m.sibling=null),ty(f,!1,E,m,w);break;case"backwards":for(m=null,E=f.child,f.child=null;E!==null;){if(l=E.alternate,l!==null&&Vd(l)===null){f.child=E;break}l=E.sibling,E.sibling=m,m=E,E=l}ty(f,!0,m,null,w);break;case"together":ty(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Ui(l,f,m){if(l!==null&&(f.dependencies=l.dependencies),Oa|=f.lanes,(m&f.childLanes)===0)if(l!==null){if(Eu(l,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(r(153));if(f.child!==null){for(l=f.child,m=Di(l,l.pendingProps),f.child=m,m.return=f;l.sibling!==null;)l=l.sibling,m=m.sibling=Di(l,l.pendingProps),m.return=f;m.sibling=null}return f.child}function ny(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&Rd(l)))}function hq(l,f,m){switch(f.tag){case 3:Re(f,f.stateNode.containerInfo),ya(f,Qt,l.memoizedState.cache),bu();break;case 27:case 5:Ae(f);break;case 4:Re(f,f.stateNode.containerInfo);break;case 10:ya(f,f.type,f.memoizedProps.value);break;case 13:var g=f.memoizedState;if(g!==null)return g.dehydrated!==null?(Ea(f),f.flags|=128,null):(m&f.child.childLanes)!==0?kO(l,f,m):(Ea(f),l=Ui(l,f,m),l!==null?l.sibling:null);Ea(f);break;case 19:var E=(l.flags&128)!==0;if(g=(m&f.childLanes)!==0,g||(Eu(l,f,m,!1),g=(m&f.childLanes)!==0),E){if(g)return UO(l,f,m);f.flags|=128}if(E=f.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),te(Zt,Zt.current),g)break;return null;case 22:case 23:return f.lanes=0,DO(l,f,m);case 24:ya(f,Qt,l.memoizedState.cache)}return Ui(l,f,m)}function BO(l,f,m){if(l!==null)if(l.memoizedProps!==f.pendingProps)un=!0;else{if(!ny(l,m)&&(f.flags&128)===0)return un=!1,hq(l,f,m);un=(l.flags&131072)!==0}else un=!1,nt&&(f.flags&1048576)!==0&&pR(f,_d,f.index);switch(f.lanes=0,f.tag){case 16:e:{l=f.pendingProps;var g=f.elementType,E=g._init;if(g=E(g._payload),f.type=g,typeof g=="function")f0(g)?(l=Es(g,l),f.tag=1,f=NO(null,f,g,l,m)):(f.tag=0,f=W0(null,f,g,l,m));else{if(g!=null){if(E=g.$$typeof,E===O){f.tag=11,f=OO(null,f,g,l,m);break e}else if(E===L){f.tag=14,f=CO(null,f,g,l,m);break e}}throw f=W(g)||g,Error(r(306,f,""))}}return f;case 0:return W0(l,f,f.type,f.pendingProps,m);case 1:return g=f.type,E=Es(g,f.pendingProps),NO(l,f,g,E,m);case 3:e:{if(Re(f,f.stateNode.containerInfo),l===null)throw Error(r(387));g=f.pendingProps;var w=f.memoizedState;E=w.element,w0(l,f),Cu(f,g,null,m);var I=f.memoizedState;if(g=I.cache,ya(f,Qt,g),g!==w.cache&&x0(f,[Qt],m,!0),Ou(),g=I.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:I.cache},f.updateQueue.baseState=w,f.memoizedState=w,f.flags&256){f=MO(l,f,g,m);break e}else if(g!==E){E=pr(Error(r(424)),f),Su(E),f=MO(l,f,g,m);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Pt=Vr(l.firstChild),jn=f,nt=!0,gs=null,ai=!0,m=yO(f,null,g,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(bu(),g===E){f=Ui(l,f,m);break e}xn(l,f,g,m)}f=f.child}return f;case 26:return zd(l,f),l===null?(m=VC(f.type,null,f.pendingProps,null))?f.memoizedState=m:nt||(m=f.type,l=f.pendingProps,g=oh(ge.current).createElement(m),g[On]=f,g[$n]=l,Sn(g,m,l),ln(g),f.stateNode=g):f.memoizedState=VC(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return Ae(f),l===null&&nt&&(g=f.stateNode=FC(f.type,f.pendingProps,ge.current),jn=f,ai=!0,E=Pt,Ia(f.type)?(ky=E,Pt=Vr(g.firstChild)):Pt=E),xn(l,f,f.pendingProps.children,m),zd(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&nt&&((E=g=Pt)&&(g=$q(g,f.type,f.pendingProps,ai),g!==null?(f.stateNode=g,jn=f,Pt=Vr(g.firstChild),ai=!1,E=!0):E=!1),E||ys(f)),Ae(f),E=f.type,w=f.pendingProps,I=l!==null?l.memoizedProps:null,g=w.children,Iy(E,w)?g=null:I!==null&&Iy(E,I)&&(f.flags|=32),f.memoizedState!==null&&(E=D0(l,f,aq,null,null,m),Qu._currentValue=E),zd(l,f),xn(l,f,g,m),f.child;case 6:return l===null&&nt&&((l=m=Pt)&&(m=Gq(m,f.pendingProps,ai),m!==null?(f.stateNode=m,jn=f,Pt=null,l=!0):l=!1),l||ys(f)),null;case 13:return kO(l,f,m);case 4:return Re(f,f.stateNode.containerInfo),g=f.pendingProps,l===null?f.child=Do(f,null,g,m):xn(l,f,g,m),f.child;case 11:return OO(l,f,f.type,f.pendingProps,m);case 7:return xn(l,f,f.pendingProps,m),f.child;case 8:return xn(l,f,f.pendingProps.children,m),f.child;case 12:return xn(l,f,f.pendingProps.children,m),f.child;case 10:return g=f.pendingProps,ya(f,f.type,g.value),xn(l,f,g.children,m),f.child;case 9:return E=f.type._context,g=f.pendingProps.children,xs(f),E=Cn(E),g=g(E),f.flags|=1,xn(l,f,g,m),f.child;case 14:return CO(l,f,f.type,f.pendingProps,m);case 15:return LO(l,f,f.type,f.pendingProps,m);case 19:return UO(l,f,m);case 31:return g=f.pendingProps,m=f.mode,g={mode:g.mode,children:g.children},l===null?(m=Kd(g,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=Di(l.child,g),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return DO(l,f,m);case 24:return xs(f),g=Cn(Qt),l===null?(E=E0(),E===null&&(E=xt,w=b0(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=m),E=w),f.memoizedState={parent:g,cache:E},A0(f),ya(f,Qt,E)):((l.lanes&m)!==0&&(w0(l,f),Cu(f,null,null,m),Ou()),E=l.memoizedState,w=f.memoizedState,E.parent!==g?(E={parent:g,cache:g},f.memoizedState=E,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=E),ya(f,Qt,g)):(g=w.cache,ya(f,Qt,g),g!==E.cache&&x0(f,[Qt],m,!0))),xn(l,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Bi(l){l.flags|=4}function FO(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!YC(f)){if(f=xr.current,f!==null&&((Xe&4194048)===Xe?si!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||f!==si))throw _u=T0,TR;l.flags|=8192}}function Yd(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?v_():536870912,l.lanes|=f,Mo|=f)}function ku(l,f){if(!nt)switch(l.tailMode){case"hidden":f=l.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Ot(l){var f=l.alternate!==null&&l.alternate.child===l.child,m=0,g=0;if(f)for(var E=l.child;E!==null;)m|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)m|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=g,l.childLanes=m,f}function mq(l,f,m){var g=f.pendingProps;switch(p0(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(f),null;case 1:return Ot(f),null;case 3:return m=f.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),Mi(Qt),pe(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(xu(f)?Bi(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,vR())),Ot(f),null;case 26:return m=f.memoizedState,l===null?(Bi(f),m!==null?(Ot(f),FO(f,m)):(Ot(f),f.flags&=-16777217)):m?m!==l.memoizedState?(Bi(f),Ot(f),FO(f,m)):(Ot(f),f.flags&=-16777217):(l.memoizedProps!==g&&Bi(f),Ot(f),f.flags&=-16777217),null;case 27:Oe(f),m=ge.current;var E=f.type;if(l!==null&&f.stateNode!=null)l.memoizedProps!==g&&Bi(f);else{if(!g){if(f.stateNode===null)throw Error(r(166));return Ot(f),null}l=ce.current,xu(f)?gR(f):(l=FC(E,g,m),f.stateNode=l,Bi(f))}return Ot(f),null;case 5:if(Oe(f),m=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==g&&Bi(f);else{if(!g){if(f.stateNode===null)throw Error(r(166));return Ot(f),null}if(l=ce.current,xu(f))gR(f);else{switch(E=oh(ge.current),l){case 1:l=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:l=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":l=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":l=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":l=E.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof g.is=="string"?E.createElement("select",{is:g.is}):E.createElement("select"),g.multiple?l.multiple=!0:g.size&&(l.size=g.size);break;default:l=typeof g.is=="string"?E.createElement(m,{is:g.is}):E.createElement(m)}}l[On]=f,l[$n]=g;e:for(E=f.child;E!==null;){if(E.tag===5||E.tag===6)l.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break e;for(;E.sibling===null;){if(E.return===null||E.return===f)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}f.stateNode=l;e:switch(Sn(l,m,g),m){case"button":case"input":case"select":case"textarea":l=!!g.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bi(f)}}return Ot(f),f.flags&=-16777217,null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==g&&Bi(f);else{if(typeof g!="string"&&f.stateNode===null)throw Error(r(166));if(l=ge.current,xu(f)){if(l=f.stateNode,m=f.memoizedProps,g=null,E=jn,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}l[On]=f,l=!!(l.nodeValue===m||g!==null&&g.suppressHydrationWarning===!0||PC(l.nodeValue,m)),l||ys(f)}else l=oh(l).createTextNode(g),l[On]=f,f.stateNode=l}return Ot(f),null;case 13:if(g=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=xu(f),g!==null&&g.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=f.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[On]=f}else bu(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ot(f),E=!1}else E=vR(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return f.flags&256?(ji(f),f):(ji(f),null)}if(ji(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=g!==null,l=l!==null&&l.memoizedState!==null,m){g=f.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool);var w=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==E&&(g.flags|=2048)}return m!==l&&m&&(f.child.flags|=8192),Yd(f,f.updateQueue),Ot(f),null;case 4:return pe(),l===null&&Ry(f.stateNode.containerInfo),Ot(f),null;case 10:return Mi(f.type),Ot(f),null;case 19:if(H(Zt),E=f.memoizedState,E===null)return Ot(f),null;if(g=(f.flags&128)!==0,w=E.rendering,w===null)if(g)ku(E,!1);else{if(Nt!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(w=Vd(l),w!==null){for(f.flags|=128,ku(E,!1),l=w.updateQueue,f.updateQueue=l,Yd(f,l),f.subtreeFlags=0,l=m,m=f.child;m!==null;)mR(m,l),m=m.sibling;return te(Zt,Zt.current&1|2),f.child}l=l.sibling}E.tail!==null&&je()>Qd&&(f.flags|=128,g=!0,ku(E,!1),f.lanes=4194304)}else{if(!g)if(l=Vd(w),l!==null){if(f.flags|=128,g=!0,l=l.updateQueue,f.updateQueue=l,Yd(f,l),ku(E,!0),E.tail===null&&E.tailMode==="hidden"&&!w.alternate&&!nt)return Ot(f),null}else 2*je()-E.renderingStartTime>Qd&&m!==536870912&&(f.flags|=128,g=!0,ku(E,!1),f.lanes=4194304);E.isBackwards?(w.sibling=f.child,f.child=w):(l=E.last,l!==null?l.sibling=w:f.child=w,E.last=w)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=je(),f.sibling=null,l=Zt.current,te(Zt,g?l&1|2:l&1),f):(Ot(f),null);case 22:case 23:return ji(f),C0(),g=f.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(f.flags|=8192):g&&(f.flags|=8192),g?(m&536870912)!==0&&(f.flags&128)===0&&(Ot(f),f.subtreeFlags&6&&(f.flags|=8192)):Ot(f),m=f.updateQueue,m!==null&&Yd(f,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),g=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(g=f.memoizedState.cachePool.pool),g!==m&&(f.flags|=2048),l!==null&&H(bs),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),Mi(Qt),Ot(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function pq(l,f){switch(p0(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return Mi(Qt),pe(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return Oe(f),null;case 13:if(ji(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(r(340));bu()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return H(Zt),null;case 4:return pe(),null;case 10:return Mi(f.type),null;case 22:case 23:return ji(f),C0(),l!==null&&H(bs),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return Mi(Qt),null;case 25:return null;default:return null}}function $O(l,f){switch(p0(f),f.tag){case 3:Mi(Qt),pe();break;case 26:case 27:case 5:Oe(f);break;case 4:pe();break;case 13:ji(f);break;case 19:H(Zt);break;case 10:Mi(f.type);break;case 22:case 23:ji(f),C0(),l!==null&&H(bs);break;case 24:Mi(Qt)}}function ju(l,f){try{var m=f.updateQueue,g=m!==null?m.lastEffect:null;if(g!==null){var E=g.next;m=E;do{if((m.tag&l)===l){g=void 0;var w=m.create,I=m.inst;g=w(),I.destroy=g}m=m.next}while(m!==E)}}catch(U){pt(f,f.return,U)}}function Aa(l,f,m){try{var g=f.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var w=E.next;g=w;do{if((g.tag&l)===l){var I=g.inst,U=I.destroy;if(U!==void 0){I.destroy=void 0,E=f;var z=m,ie=U;try{ie()}catch(ue){pt(E,z,ue)}}}g=g.next}while(g!==w)}}catch(ue){pt(f,f.return,ue)}}function GO(l){var f=l.updateQueue;if(f!==null){var m=l.stateNode;try{CR(f,m)}catch(g){pt(l,l.return,g)}}}function VO(l,f,m){m.props=Es(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(g){pt(l,f,g)}}function Uu(l,f){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof m=="function"?l.refCleanup=m(g):m.current=g}}catch(E){pt(l,f,E)}}function oi(l,f){var m=l.ref,g=l.refCleanup;if(m!==null)if(typeof g=="function")try{g()}catch(E){pt(l,f,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){pt(l,f,E)}else m.current=null}function qO(l){var f=l.type,m=l.memoizedProps,g=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&g.focus();break e;case"img":m.src?g.src=m.src:m.srcSet&&(g.srcset=m.srcSet)}}catch(E){pt(l,l.return,E)}}function ry(l,f,m){try{var g=l.stateNode;kq(g,l.type,m,f),g[$n]=f}catch(E){pt(l,l.return,E)}}function HO(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ia(l.type)||l.tag===4}function iy(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||HO(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ia(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function ay(l,f,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(l),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=sh));else if(g!==4&&(g===27&&Ia(l.type)&&(m=l.stateNode,f=null),l=l.child,l!==null))for(ay(l,f,m),l=l.sibling;l!==null;)ay(l,f,m),l=l.sibling}function Wd(l,f,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,f?m.insertBefore(l,f):m.appendChild(l);else if(g!==4&&(g===27&&Ia(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(Wd(l,f,m),l=l.sibling;l!==null;)Wd(l,f,m),l=l.sibling}function zO(l){var f=l.stateNode,m=l.memoizedProps;try{for(var g=l.type,E=f.attributes;E.length;)f.removeAttributeNode(E[0]);Sn(f,g,m),f[On]=l,f[$n]=m}catch(w){pt(l,l.return,w)}}var Fi=!1,Ut=!1,sy=!1,KO=typeof WeakSet=="function"?WeakSet:Set,cn=null;function gq(l,f){if(l=l.containerInfo,Ly=hh,l=iR(l),i0(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var g=m.getSelection&&m.getSelection();if(g&&g.rangeCount!==0){m=g.anchorNode;var E=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{m.nodeType,w.nodeType}catch{m=null;break e}var I=0,U=-1,z=-1,ie=0,ue=0,he=l,ae=null;t:for(;;){for(var se;he!==m||E!==0&&he.nodeType!==3||(U=I+E),he!==w||g!==0&&he.nodeType!==3||(z=I+g),he.nodeType===3&&(I+=he.nodeValue.length),(se=he.firstChild)!==null;)ae=he,he=se;for(;;){if(he===l)break t;if(ae===m&&++ie===E&&(U=I),ae===w&&++ue===g&&(z=I),(se=he.nextSibling)!==null)break;he=ae,ae=he.parentNode}he=se}m=U===-1||z===-1?null:{start:U,end:z}}else m=null}m=m||{start:0,end:0}}else m=null;for(Dy={focusedElem:l,selectionRange:m},hh=!1,cn=f;cn!==null;)if(f=cn,l=f.child,(f.subtreeFlags&1024)!==0&&l!==null)l.return=f,cn=l;else for(;cn!==null;){switch(f=cn,w=f.alternate,l=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&w!==null){l=void 0,m=f,E=w.memoizedProps,w=w.memoizedState,g=m.stateNode;try{var Ie=Es(m.type,E,m.elementType===m.type);l=g.getSnapshotBeforeUpdate(Ie,w),g.__reactInternalSnapshotBeforeUpdate=l}catch(Ce){pt(m,m.return,Ce)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,m=l.nodeType,m===9)Ny(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Ny(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=f.sibling,l!==null){l.return=f.return,cn=l;break}cn=f.return}}function YO(l,f,m){var g=m.flags;switch(m.tag){case 0:case 11:case 15:wa(l,m),g&4&&ju(5,m);break;case 1:if(wa(l,m),g&4)if(l=m.stateNode,f===null)try{l.componentDidMount()}catch(I){pt(m,m.return,I)}else{var E=Es(m.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(E,f,l.__reactInternalSnapshotBeforeUpdate)}catch(I){pt(m,m.return,I)}}g&64&&GO(m),g&512&&Uu(m,m.return);break;case 3:if(wa(l,m),g&64&&(l=m.updateQueue,l!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{CR(l,f)}catch(I){pt(m,m.return,I)}}break;case 27:f===null&&g&4&&zO(m);case 26:case 5:wa(l,m),f===null&&g&4&&qO(m),g&512&&Uu(m,m.return);break;case 12:wa(l,m);break;case 13:wa(l,m),g&4&&QO(l,m),g&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=wq.bind(null,m),Vq(l,m))));break;case 22:if(g=m.memoizedState!==null||Fi,!g){f=f!==null&&f.memoizedState!==null||Ut,E=Fi;var w=Ut;Fi=g,(Ut=f)&&!w?_a(l,m,(m.subtreeFlags&8772)!==0):wa(l,m),Fi=E,Ut=w}break;case 30:break;default:wa(l,m)}}function WO(l){var f=l.alternate;f!==null&&(l.alternate=null,WO(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&Bg(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var At=null,qn=!1;function $i(l,f,m){for(m=m.child;m!==null;)XO(l,f,m),m=m.sibling}function XO(l,f,m){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Fr,m)}catch{}switch(m.tag){case 26:Ut||oi(m,f),$i(l,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Ut||oi(m,f);var g=At,E=qn;Ia(m.type)&&(At=m.stateNode,qn=!1),$i(l,f,m),Ku(m.stateNode),At=g,qn=E;break;case 5:Ut||oi(m,f);case 6:if(g=At,E=qn,At=null,$i(l,f,m),At=g,qn=E,At!==null)if(qn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(m.stateNode)}catch(w){pt(m,f,w)}else try{At.removeChild(m.stateNode)}catch(w){pt(m,f,w)}break;case 18:At!==null&&(qn?(l=At,UC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),tc(l)):UC(At,m.stateNode));break;case 4:g=At,E=qn,At=m.stateNode.containerInfo,qn=!0,$i(l,f,m),At=g,qn=E;break;case 0:case 11:case 14:case 15:Ut||Aa(2,m,f),Ut||Aa(4,m,f),$i(l,f,m);break;case 1:Ut||(oi(m,f),g=m.stateNode,typeof g.componentWillUnmount=="function"&&VO(m,f,g)),$i(l,f,m);break;case 21:$i(l,f,m);break;case 22:Ut=(g=Ut)||m.memoizedState!==null,$i(l,f,m),Ut=g;break;default:$i(l,f,m)}}function QO(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{tc(l)}catch(m){pt(f,f.return,m)}}function yq(l){switch(l.tag){case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new KO),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new KO),f;default:throw Error(r(435,l.tag))}}function oy(l,f){var m=yq(l);f.forEach(function(g){var E=_q.bind(null,l,g);m.has(g)||(m.add(g),g.then(E,E))})}function tr(l,f){var m=f.deletions;if(m!==null)for(var g=0;g<m.length;g++){var E=m[g],w=l,I=f,U=I;e:for(;U!==null;){switch(U.tag){case 27:if(Ia(U.type)){At=U.stateNode,qn=!1;break e}break;case 5:At=U.stateNode,qn=!1;break e;case 3:case 4:At=U.stateNode.containerInfo,qn=!0;break e}U=U.return}if(At===null)throw Error(r(160));XO(w,I,E),At=null,qn=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)ZO(f,l),f=f.sibling}var Gr=null;function ZO(l,f){var m=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:tr(f,l),nr(l),g&4&&(Aa(3,l,l.return),ju(3,l),Aa(5,l,l.return));break;case 1:tr(f,l),nr(l),g&512&&(Ut||m===null||oi(m,m.return)),g&64&&Fi&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?g:m.concat(g))));break;case 26:var E=Gr;if(tr(f,l),nr(l),g&512&&(Ut||m===null||oi(m,m.return)),g&4){var w=m!==null?m.memoizedState:null;if(g=l.memoizedState,m===null)if(g===null)if(l.stateNode===null){e:{g=l.type,m=l.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":w=E.getElementsByTagName("title")[0],(!w||w[lu]||w[On]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(g),E.head.insertBefore(w,E.querySelector("head > title"))),Sn(w,g,m),w[On]=l,ln(w),g=w;break e;case"link":var I=zC("link","href",E).get(g+(m.href||""));if(I){for(var U=0;U<I.length;U++)if(w=I[U],w.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&w.getAttribute("rel")===(m.rel==null?null:m.rel)&&w.getAttribute("title")===(m.title==null?null:m.title)&&w.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){I.splice(U,1);break t}}w=E.createElement(g),Sn(w,g,m),E.head.appendChild(w);break;case"meta":if(I=zC("meta","content",E).get(g+(m.content||""))){for(U=0;U<I.length;U++)if(w=I[U],w.getAttribute("content")===(m.content==null?null:""+m.content)&&w.getAttribute("name")===(m.name==null?null:m.name)&&w.getAttribute("property")===(m.property==null?null:m.property)&&w.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&w.getAttribute("charset")===(m.charSet==null?null:m.charSet)){I.splice(U,1);break t}}w=E.createElement(g),Sn(w,g,m),E.head.appendChild(w);break;default:throw Error(r(468,g))}w[On]=l,ln(w),g=w}l.stateNode=g}else KC(E,l.type,l.stateNode);else l.stateNode=HC(E,g,l.memoizedProps);else w!==g?(w===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):w.count--,g===null?KC(E,l.type,l.stateNode):HC(E,g,l.memoizedProps)):g===null&&l.stateNode!==null&&ry(l,l.memoizedProps,m.memoizedProps)}break;case 27:tr(f,l),nr(l),g&512&&(Ut||m===null||oi(m,m.return)),m!==null&&g&4&&ry(l,l.memoizedProps,m.memoizedProps);break;case 5:if(tr(f,l),nr(l),g&512&&(Ut||m===null||oi(m,m.return)),l.flags&32){E=l.stateNode;try{ho(E,"")}catch(se){pt(l,l.return,se)}}g&4&&l.stateNode!=null&&(E=l.memoizedProps,ry(l,E,m!==null?m.memoizedProps:E)),g&1024&&(sy=!0);break;case 6:if(tr(f,l),nr(l),g&4){if(l.stateNode===null)throw Error(r(162));g=l.memoizedProps,m=l.stateNode;try{m.nodeValue=g}catch(se){pt(l,l.return,se)}}break;case 3:if(ch=null,E=Gr,Gr=lh(f.containerInfo),tr(f,l),Gr=E,nr(l),g&4&&m!==null&&m.memoizedState.isDehydrated)try{tc(f.containerInfo)}catch(se){pt(l,l.return,se)}sy&&(sy=!1,JO(l));break;case 4:g=Gr,Gr=lh(l.stateNode.containerInfo),tr(f,l),nr(l),Gr=g;break;case 12:tr(f,l),nr(l);break;case 13:tr(f,l),nr(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(hy=je()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,oy(l,g)));break;case 22:E=l.memoizedState!==null;var z=m!==null&&m.memoizedState!==null,ie=Fi,ue=Ut;if(Fi=ie||E,Ut=ue||z,tr(f,l),Ut=ue,Fi=ie,nr(l),g&8192)e:for(f=l.stateNode,f._visibility=E?f._visibility&-2:f._visibility|1,E&&(m===null||z||Fi||Ut||Ts(l)),m=null,f=l;;){if(f.tag===5||f.tag===26){if(m===null){z=m=f;try{if(w=z.stateNode,E)I=w.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{U=z.stateNode;var he=z.memoizedProps.style,ae=he!=null&&he.hasOwnProperty("display")?he.display:null;U.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(se){pt(z,z.return,se)}}}else if(f.tag===6){if(m===null){z=f;try{z.stateNode.nodeValue=E?"":z.memoizedProps}catch(se){pt(z,z.return,se)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}g&4&&(g=l.updateQueue,g!==null&&(m=g.retryQueue,m!==null&&(g.retryQueue=null,oy(l,m))));break;case 19:tr(f,l),nr(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,oy(l,g)));break;case 30:break;case 21:break;default:tr(f,l),nr(l)}}function nr(l){var f=l.flags;if(f&2){try{for(var m,g=l.return;g!==null;){if(HO(g)){m=g;break}g=g.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var E=m.stateNode,w=iy(l);Wd(l,w,E);break;case 5:var I=m.stateNode;m.flags&32&&(ho(I,""),m.flags&=-33);var U=iy(l);Wd(l,U,I);break;case 3:case 4:var z=m.stateNode.containerInfo,ie=iy(l);ay(l,ie,z);break;default:throw Error(r(161))}}catch(ue){pt(l,l.return,ue)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function JO(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;JO(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function wa(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)YO(l,f.alternate,f),f=f.sibling}function Ts(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:Aa(4,f,f.return),Ts(f);break;case 1:oi(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&VO(f,f.return,m),Ts(f);break;case 27:Ku(f.stateNode);case 26:case 5:oi(f,f.return),Ts(f);break;case 22:f.memoizedState===null&&Ts(f);break;case 30:Ts(f);break;default:Ts(f)}l=l.sibling}}function _a(l,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var g=f.alternate,E=l,w=f,I=w.flags;switch(w.tag){case 0:case 11:case 15:_a(E,w,m),ju(4,w);break;case 1:if(_a(E,w,m),g=w,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ie){pt(g,g.return,ie)}if(g=w,E=g.updateQueue,E!==null){var U=g.stateNode;try{var z=E.shared.hiddenCallbacks;if(z!==null)for(E.shared.hiddenCallbacks=null,E=0;E<z.length;E++)OR(z[E],U)}catch(ie){pt(g,g.return,ie)}}m&&I&64&&GO(w),Uu(w,w.return);break;case 27:zO(w);case 26:case 5:_a(E,w,m),m&&g===null&&I&4&&qO(w),Uu(w,w.return);break;case 12:_a(E,w,m);break;case 13:_a(E,w,m),m&&I&4&&QO(E,w);break;case 22:w.memoizedState===null&&_a(E,w,m),Uu(w,w.return);break;case 30:break;default:_a(E,w,m)}f=f.sibling}}function ly(l,f){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&Tu(m))}function uy(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Tu(l))}function li(l,f,m,g){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)eC(l,f,m,g),f=f.sibling}function eC(l,f,m,g){var E=f.flags;switch(f.tag){case 0:case 11:case 15:li(l,f,m,g),E&2048&&ju(9,f);break;case 1:li(l,f,m,g);break;case 3:li(l,f,m,g),E&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Tu(l)));break;case 12:if(E&2048){li(l,f,m,g),l=f.stateNode;try{var w=f.memoizedProps,I=w.id,U=w.onPostCommit;typeof U=="function"&&U(I,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(z){pt(f,f.return,z)}}else li(l,f,m,g);break;case 13:li(l,f,m,g);break;case 23:break;case 22:w=f.stateNode,I=f.alternate,f.memoizedState!==null?w._visibility&2?li(l,f,m,g):Bu(l,f):w._visibility&2?li(l,f,m,g):(w._visibility|=2,Io(l,f,m,g,(f.subtreeFlags&10256)!==0)),E&2048&&ly(I,f);break;case 24:li(l,f,m,g),E&2048&&uy(f.alternate,f);break;default:li(l,f,m,g)}}function Io(l,f,m,g,E){for(E=E&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var w=l,I=f,U=m,z=g,ie=I.flags;switch(I.tag){case 0:case 11:case 15:Io(w,I,U,z,E),ju(8,I);break;case 23:break;case 22:var ue=I.stateNode;I.memoizedState!==null?ue._visibility&2?Io(w,I,U,z,E):Bu(w,I):(ue._visibility|=2,Io(w,I,U,z,E)),E&&ie&2048&&ly(I.alternate,I);break;case 24:Io(w,I,U,z,E),E&&ie&2048&&uy(I.alternate,I);break;default:Io(w,I,U,z,E)}f=f.sibling}}function Bu(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=l,g=f,E=g.flags;switch(g.tag){case 22:Bu(m,g),E&2048&&ly(g.alternate,g);break;case 24:Bu(m,g),E&2048&&uy(g.alternate,g);break;default:Bu(m,g)}f=f.sibling}}var Fu=8192;function Po(l){if(l.subtreeFlags&Fu)for(l=l.child;l!==null;)tC(l),l=l.sibling}function tC(l){switch(l.tag){case 26:Po(l),l.flags&Fu&&l.memoizedState!==null&&nH(Gr,l.memoizedState,l.memoizedProps);break;case 5:Po(l);break;case 3:case 4:var f=Gr;Gr=lh(l.stateNode.containerInfo),Po(l),Gr=f;break;case 22:l.memoizedState===null&&(f=l.alternate,f!==null&&f.memoizedState!==null?(f=Fu,Fu=16777216,Po(l),Fu=f):Po(l));break;default:Po(l)}}function nC(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function $u(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var g=f[m];cn=g,iC(g,l)}nC(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)rC(l),l=l.sibling}function rC(l){switch(l.tag){case 0:case 11:case 15:$u(l),l.flags&2048&&Aa(9,l,l.return);break;case 3:$u(l);break;case 12:$u(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,Xd(l)):$u(l);break;default:$u(l)}}function Xd(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var g=f[m];cn=g,iC(g,l)}nC(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:Aa(8,f,f.return),Xd(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,Xd(f));break;default:Xd(f)}l=l.sibling}}function iC(l,f){for(;cn!==null;){var m=cn;switch(m.tag){case 0:case 11:case 15:Aa(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var g=m.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Tu(m.memoizedState.cache)}if(g=m.child,g!==null)g.return=m,cn=g;else e:for(m=l;cn!==null;){g=cn;var E=g.sibling,w=g.return;if(WO(g),g===m){cn=null;break e}if(E!==null){E.return=w,cn=E;break e}cn=w}}}var vq={getCacheForType:function(l){var f=Cn(Qt),m=f.data.get(l);return m===void 0&&(m=l(),f.data.set(l,m)),m}},xq=typeof WeakMap=="function"?WeakMap:Map,st=0,xt=null,ze=null,Xe=0,ot=0,rr=null,Ra=!1,No=!1,cy=!1,Gi=0,Nt=0,Oa=0,As=0,fy=0,br=0,Mo=0,Gu=null,Hn=null,dy=!1,hy=0,Qd=1/0,Zd=null,Ca=null,bn=0,La=null,ko=null,jo=0,my=0,py=null,aC=null,Vu=0,gy=null;function ir(){if((st&2)!==0&&Xe!==0)return Xe&-Xe;if(j.T!==null){var l=Ao;return l!==0?l:Ty()}return S_()}function sC(){br===0&&(br=(Xe&536870912)===0||nt?y_():536870912);var l=xr.current;return l!==null&&(l.flags|=32),br}function ar(l,f,m){(l===xt&&(ot===2||ot===9)||l.cancelPendingCommit!==null)&&(Uo(l,0),Da(l,Xe,br,!1)),ou(l,m),((st&2)===0||l!==xt)&&(l===xt&&((st&2)===0&&(As|=m),Nt===4&&Da(l,Xe,br,!1)),ui(l))}function oC(l,f,m){if((st&6)!==0)throw Error(r(327));var g=!m&&(f&124)===0&&(f&l.expiredLanes)===0||su(l,f),E=g?Eq(l,f):xy(l,f,!0),w=g;do{if(E===0){No&&!g&&Da(l,f,0,!1);break}else{if(m=l.current.alternate,w&&!bq(m)){E=xy(l,f,!1),w=!1;continue}if(E===2){if(w=f,l.errorRecoveryDisabledLanes&w)var I=0;else I=l.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){f=I;e:{var U=l;E=Gu;var z=U.current.memoizedState.isDehydrated;if(z&&(Uo(U,I).flags|=256),I=xy(U,I,!1),I!==2){if(cy&&!z){U.errorRecoveryDisabledLanes|=w,As|=w,E=4;break e}w=Hn,Hn=E,w!==null&&(Hn===null?Hn=w:Hn.push.apply(Hn,w))}E=I}if(w=!1,E!==2)continue}}if(E===1){Uo(l,0),Da(l,f,0,!0);break}e:{switch(g=l,w=E,w){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Da(g,f,br,!Ra);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(E=hy+300-je(),10<E)){if(Da(g,f,br,!Ra),ud(g,0,!0)!==0)break e;g.timeoutHandle=kC(lC.bind(null,g,m,Hn,Zd,dy,f,br,As,Mo,Ra,w,2,-0,0),E);break e}lC(g,m,Hn,Zd,dy,f,br,As,Mo,Ra,w,0,-0,0)}}break}while(!0);ui(l)}function lC(l,f,m,g,E,w,I,U,z,ie,ue,he,ae,se){if(l.timeoutHandle=-1,he=f.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Xu={stylesheets:null,count:0,unsuspend:tH},tC(f),he=rH(),he!==null)){l.cancelPendingCommit=he(pC.bind(null,l,f,w,m,g,E,I,U,z,ue,1,ae,se)),Da(l,w,I,!ie);return}pC(l,f,w,m,g,E,I,U,z)}function bq(l){for(var f=l;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var g=0;g<m.length;g++){var E=m[g],w=E.getSnapshot;E=E.value;try{if(!Jn(w(),E))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Da(l,f,m,g){f&=~fy,f&=~As,l.suspendedLanes|=f,l.pingedLanes&=~f,g&&(l.warmLanes|=f),g=l.expirationTimes;for(var E=f;0<E;){var w=31-Rn(E),I=1<<w;g[w]=-1,E&=~I}m!==0&&x_(l,m,f)}function Jd(){return(st&6)===0?(qu(0),!1):!0}function yy(){if(ze!==null){if(ot===0)var l=ze.return;else l=ze,Ni=vs=null,N0(l),Lo=null,Nu=0,l=ze;for(;l!==null;)$O(l.alternate,l),l=l.return;ze=null}}function Uo(l,f){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,Uq(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),yy(),xt=l,ze=m=Di(l.current,null),Xe=f,ot=0,rr=null,Ra=!1,No=su(l,f),cy=!1,Mo=br=fy=As=Oa=Nt=0,Hn=Gu=null,dy=!1,(f&8)!==0&&(f|=f&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=f;0<g;){var E=31-Rn(g),w=1<<E;f|=l[E],g&=~w}return Gi=f,Sd(),m}function uC(l,f){$e=null,j.H=Fd,f===wu||f===Ld?(f=_R(),ot=3):f===TR?(f=_R(),ot=4):ot=f===RO?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,rr=f,ze===null&&(Nt=1,Hd(l,pr(f,l.current)))}function cC(){var l=j.H;return j.H=Fd,l===null?Fd:l}function fC(){var l=j.A;return j.A=vq,l}function vy(){Nt=4,Ra||(Xe&4194048)!==Xe&&xr.current!==null||(No=!0),(Oa&134217727)===0&&(As&134217727)===0||xt===null||Da(xt,Xe,br,!1)}function xy(l,f,m){var g=st;st|=2;var E=cC(),w=fC();(xt!==l||Xe!==f)&&(Zd=null,Uo(l,f)),f=!1;var I=Nt;e:do try{if(ot!==0&&ze!==null){var U=ze,z=rr;switch(ot){case 8:yy(),I=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(f=!0);var ie=ot;if(ot=0,rr=null,Bo(l,U,z,ie),m&&No){I=0;break e}break;default:ie=ot,ot=0,rr=null,Bo(l,U,z,ie)}}Sq(),I=Nt;break}catch(ue){uC(l,ue)}while(!0);return f&&l.shellSuspendCounter++,Ni=vs=null,st=g,j.H=E,j.A=w,ze===null&&(xt=null,Xe=0,Sd()),I}function Sq(){for(;ze!==null;)dC(ze)}function Eq(l,f){var m=st;st|=2;var g=cC(),E=fC();xt!==l||Xe!==f?(Zd=null,Qd=je()+500,Uo(l,f)):No=su(l,f);e:do try{if(ot!==0&&ze!==null){f=ze;var w=rr;t:switch(ot){case 1:ot=0,rr=null,Bo(l,f,w,1);break;case 2:case 9:if(AR(w)){ot=0,rr=null,hC(f);break}f=function(){ot!==2&&ot!==9||xt!==l||(ot=7),ui(l)},w.then(f,f);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:AR(w)?(ot=0,rr=null,hC(f)):(ot=0,rr=null,Bo(l,f,w,7));break;case 5:var I=null;switch(ze.tag){case 26:I=ze.memoizedState;case 5:case 27:var U=ze;if(!I||YC(I)){ot=0,rr=null;var z=U.sibling;if(z!==null)ze=z;else{var ie=U.return;ie!==null?(ze=ie,eh(ie)):ze=null}break t}}ot=0,rr=null,Bo(l,f,w,5);break;case 6:ot=0,rr=null,Bo(l,f,w,6);break;case 8:yy(),Nt=6;break e;default:throw Error(r(462))}}Tq();break}catch(ue){uC(l,ue)}while(!0);return Ni=vs=null,j.H=g,j.A=E,st=m,ze!==null?0:(xt=null,Xe=0,Sd(),Nt)}function Tq(){for(;ze!==null&&!It();)dC(ze)}function dC(l){var f=BO(l.alternate,l,Gi);l.memoizedProps=l.pendingProps,f===null?eh(l):ze=f}function hC(l){var f=l,m=f.alternate;switch(f.tag){case 15:case 0:f=PO(m,f,f.pendingProps,f.type,void 0,Xe);break;case 11:f=PO(m,f,f.pendingProps,f.type.render,f.ref,Xe);break;case 5:N0(f);default:$O(m,f),f=ze=mR(f,Gi),f=BO(m,f,Gi)}l.memoizedProps=l.pendingProps,f===null?eh(l):ze=f}function Bo(l,f,m,g){Ni=vs=null,N0(f),Lo=null,Nu=0;var E=f.return;try{if(dq(l,E,f,m,Xe)){Nt=1,Hd(l,pr(m,l.current)),ze=null;return}}catch(w){if(E!==null)throw ze=E,w;Nt=1,Hd(l,pr(m,l.current)),ze=null;return}f.flags&32768?(nt||g===1?l=!0:No||(Xe&536870912)!==0?l=!1:(Ra=l=!0,(g===2||g===9||g===3||g===6)&&(g=xr.current,g!==null&&g.tag===13&&(g.flags|=16384))),mC(f,l)):eh(f)}function eh(l){var f=l;do{if((f.flags&32768)!==0){mC(f,Ra);return}l=f.return;var m=mq(f.alternate,f,Gi);if(m!==null){ze=m;return}if(f=f.sibling,f!==null){ze=f;return}ze=f=l}while(f!==null);Nt===0&&(Nt=5)}function mC(l,f){do{var m=pq(l.alternate,l);if(m!==null){m.flags&=32767,ze=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(l=l.sibling,l!==null)){ze=l;return}ze=l=m}while(l!==null);Nt=6,ze=null}function pC(l,f,m,g,E,w,I,U,z){l.cancelPendingCommit=null;do th();while(bn!==0);if((st&6)!==0)throw Error(r(327));if(f!==null){if(f===l.current)throw Error(r(177));if(w=f.lanes|f.childLanes,w|=u0,tV(l,m,w,I,U,z),l===xt&&(ze=xt=null,Xe=0),ko=f,La=l,jo=m,my=w,py=E,aC=g,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Rq(Xt,function(){return bC(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||g){g=j.T,j.T=null,E=$.p,$.p=2,I=st,st|=4;try{gq(l,f,m)}finally{st=I,$.p=E,j.T=g}}bn=1,gC(),yC(),vC()}}function gC(){if(bn===1){bn=0;var l=La,f=ko,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=j.T,j.T=null;var g=$.p;$.p=2;var E=st;st|=4;try{ZO(f,l);var w=Dy,I=iR(l.containerInfo),U=w.focusedElem,z=w.selectionRange;if(I!==U&&U&&U.ownerDocument&&rR(U.ownerDocument.documentElement,U)){if(z!==null&&i0(U)){var ie=z.start,ue=z.end;if(ue===void 0&&(ue=ie),"selectionStart"in U)U.selectionStart=ie,U.selectionEnd=Math.min(ue,U.value.length);else{var he=U.ownerDocument||document,ae=he&&he.defaultView||window;if(ae.getSelection){var se=ae.getSelection(),Ie=U.textContent.length,Ce=Math.min(z.start,Ie),dt=z.end===void 0?Ce:Math.min(z.end,Ie);!se.extend&&Ce>dt&&(I=dt,dt=Ce,Ce=I);var J=nR(U,Ce),X=nR(U,dt);if(J&&X&&(se.rangeCount!==1||se.anchorNode!==J.node||se.anchorOffset!==J.offset||se.focusNode!==X.node||se.focusOffset!==X.offset)){var ne=he.createRange();ne.setStart(J.node,J.offset),se.removeAllRanges(),Ce>dt?(se.addRange(ne),se.extend(X.node,X.offset)):(ne.setEnd(X.node,X.offset),se.addRange(ne))}}}}for(he=[],se=U;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<he.length;U++){var de=he[U];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}hh=!!Ly,Dy=Ly=null}finally{st=E,$.p=g,j.T=m}}l.current=f,bn=2}}function yC(){if(bn===2){bn=0;var l=La,f=ko,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=j.T,j.T=null;var g=$.p;$.p=2;var E=st;st|=4;try{YO(l,f.alternate,f)}finally{st=E,$.p=g,j.T=m}}bn=3}}function vC(){if(bn===4||bn===3){bn=0,_e();var l=La,f=ko,m=jo,g=aC;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?bn=5:(bn=0,ko=La=null,xC(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(Ca=null),jg(m),f=f.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Fr,f,void 0,(f.current.flags&128)===128)}catch{}if(g!==null){f=j.T,E=$.p,$.p=2,j.T=null;try{for(var w=l.onRecoverableError,I=0;I<g.length;I++){var U=g[I];w(U.value,{componentStack:U.stack})}}finally{j.T=f,$.p=E}}(jo&3)!==0&&th(),ui(l),E=l.pendingLanes,(m&4194090)!==0&&(E&42)!==0?l===gy?Vu++:(Vu=0,gy=l):Vu=0,qu(0)}}function xC(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,Tu(f)))}function th(l){return gC(),yC(),vC(),bC()}function bC(){if(bn!==5)return!1;var l=La,f=my;my=0;var m=jg(jo),g=j.T,E=$.p;try{$.p=32>m?32:m,j.T=null,m=py,py=null;var w=La,I=jo;if(bn=0,ko=La=null,jo=0,(st&6)!==0)throw Error(r(331));var U=st;if(st|=4,rC(w.current),eC(w,w.current,I,m),st=U,qu(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Fr,w)}catch{}return!0}finally{$.p=E,j.T=g,xC(l,f)}}function SC(l,f,m){f=pr(m,f),f=Y0(l.stateNode,f,2),l=ba(l,f,2),l!==null&&(ou(l,2),ui(l))}function pt(l,f,m){if(l.tag===3)SC(l,l,m);else for(;f!==null;){if(f.tag===3){SC(f,l,m);break}else if(f.tag===1){var g=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ca===null||!Ca.has(g))){l=pr(m,l),m=wO(2),g=ba(f,m,2),g!==null&&(_O(m,g,f,l),ou(g,2),ui(g));break}}f=f.return}}function by(l,f,m){var g=l.pingCache;if(g===null){g=l.pingCache=new xq;var E=new Set;g.set(f,E)}else E=g.get(f),E===void 0&&(E=new Set,g.set(f,E));E.has(m)||(cy=!0,E.add(m),l=Aq.bind(null,l,f,m),f.then(l,l))}function Aq(l,f,m){var g=l.pingCache;g!==null&&g.delete(f),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,xt===l&&(Xe&m)===m&&(Nt===4||Nt===3&&(Xe&62914560)===Xe&&300>je()-hy?(st&2)===0&&Uo(l,0):fy|=m,Mo===Xe&&(Mo=0)),ui(l)}function EC(l,f){f===0&&(f=v_()),l=bo(l,f),l!==null&&(ou(l,f),ui(l))}function wq(l){var f=l.memoizedState,m=0;f!==null&&(m=f.retryLane),EC(l,m)}function _q(l,f){var m=0;switch(l.tag){case 13:var g=l.stateNode,E=l.memoizedState;E!==null&&(m=E.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(f),EC(l,m)}function Rq(l,f){return rt(l,f)}var nh=null,Fo=null,Sy=!1,rh=!1,Ey=!1,ws=0;function ui(l){l!==Fo&&l.next===null&&(Fo===null?nh=Fo=l:Fo=Fo.next=l),rh=!0,Sy||(Sy=!0,Cq())}function qu(l,f){if(!Ey&&rh){Ey=!0;do for(var m=!1,g=nh;g!==null;){if(l!==0){var E=g.pendingLanes;if(E===0)var w=0;else{var I=g.suspendedLanes,U=g.pingedLanes;w=(1<<31-Rn(42|l)+1)-1,w&=E&~(I&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(m=!0,_C(g,w))}else w=Xe,w=ud(g,g===xt?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||su(g,w)||(m=!0,_C(g,w));g=g.next}while(m);Ey=!1}}function Oq(){TC()}function TC(){rh=Sy=!1;var l=0;ws!==0&&(jq()&&(l=ws),ws=0);for(var f=je(),m=null,g=nh;g!==null;){var E=g.next,w=AC(g,f);w===0?(g.next=null,m===null?nh=E:m.next=E,E===null&&(Fo=m)):(m=g,(l!==0||(w&3)!==0)&&(rh=!0)),g=E}qu(l)}function AC(l,f){for(var m=l.suspendedLanes,g=l.pingedLanes,E=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var I=31-Rn(w),U=1<<I,z=E[I];z===-1?((U&m)===0||(U&g)!==0)&&(E[I]=eV(U,f)):z<=f&&(l.expiredLanes|=U),w&=~U}if(f=xt,m=Xe,m=ud(l,l===f?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,m===0||l===f&&(ot===2||ot===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&Be(g),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||su(l,m)){if(f=m&-m,f===l.callbackPriority)return f;switch(g!==null&&Be(g),jg(m)){case 2:case 8:m=Wt;break;case 32:m=Xt;break;case 268435456:m=Ri;break;default:m=Xt}return g=wC.bind(null,l),m=rt(m,g),l.callbackPriority=f,l.callbackNode=m,f}return g!==null&&g!==null&&Be(g),l.callbackPriority=2,l.callbackNode=null,2}function wC(l,f){if(bn!==0&&bn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(th()&&l.callbackNode!==m)return null;var g=Xe;return g=ud(l,l===xt?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(oC(l,g,f),AC(l,je()),l.callbackNode!=null&&l.callbackNode===m?wC.bind(null,l):null)}function _C(l,f){if(th())return null;oC(l,f,!0)}function Cq(){Bq(function(){(st&6)!==0?rt(yn,Oq):TC()})}function Ty(){return ws===0&&(ws=y_()),ws}function RC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:md(""+l)}function OC(l,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,l.id&&m.setAttribute("form",l.id),f.parentNode.insertBefore(m,f),l=new FormData(l),m.parentNode.removeChild(m),l}function Lq(l,f,m,g,E){if(f==="submit"&&m&&m.stateNode===E){var w=RC((E[$n]||null).action),I=g.submitter;I&&(f=(f=I[$n]||null)?RC(f.formAction):I.getAttribute("formAction"),f!==null&&(w=f,I=null));var U=new vd("action","action",null,g,E);l.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ws!==0){var z=I?OC(E,I):new FormData(E);V0(m,{pending:!0,data:z,method:E.method,action:w},null,z)}}else typeof w=="function"&&(U.preventDefault(),z=I?OC(E,I):new FormData(E),V0(m,{pending:!0,data:z,method:E.method,action:w},w,z))},currentTarget:E}]})}}for(var Ay=0;Ay<l0.length;Ay++){var wy=l0[Ay],Dq=wy.toLowerCase(),Iq=wy[0].toUpperCase()+wy.slice(1);$r(Dq,"on"+Iq)}$r(oR,"onAnimationEnd"),$r(lR,"onAnimationIteration"),$r(uR,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(WV,"onTransitionRun"),$r(XV,"onTransitionStart"),$r(QV,"onTransitionCancel"),$r(cR,"onTransitionEnd"),uo("onMouseEnter",["mouseout","mouseover"]),uo("onMouseLeave",["mouseout","mouseover"]),uo("onPointerEnter",["pointerout","pointerover"]),uo("onPointerLeave",["pointerout","pointerover"]),us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),us("onBeforeInput",["compositionend","keypress","textInput","paste"]),us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hu));function CC(l,f){f=(f&4)!==0;for(var m=0;m<l.length;m++){var g=l[m],E=g.event;g=g.listeners;e:{var w=void 0;if(f)for(var I=g.length-1;0<=I;I--){var U=g[I],z=U.instance,ie=U.currentTarget;if(U=U.listener,z!==w&&E.isPropagationStopped())break e;w=U,E.currentTarget=ie;try{w(E)}catch(ue){qd(ue)}E.currentTarget=null,w=z}else for(I=0;I<g.length;I++){if(U=g[I],z=U.instance,ie=U.currentTarget,U=U.listener,z!==w&&E.isPropagationStopped())break e;w=U,E.currentTarget=ie;try{w(E)}catch(ue){qd(ue)}E.currentTarget=null,w=z}}}}function Ke(l,f){var m=f[Ug];m===void 0&&(m=f[Ug]=new Set);var g=l+"__bubble";m.has(g)||(LC(f,l,2,!1),m.add(g))}function _y(l,f,m){var g=0;f&&(g|=4),LC(m,l,g,f)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Ry(l){if(!l[ih]){l[ih]=!0,T_.forEach(function(m){m!=="selectionchange"&&(Pq.has(m)||_y(m,!1,l),_y(m,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[ih]||(f[ih]=!0,_y("selectionchange",!1,f))}}function LC(l,f,m,g){switch(eL(f)){case 2:var E=sH;break;case 8:E=oH;break;default:E=$y}m=E.bind(null,f,m,l),E=void 0,!Wg||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(E=!0),g?E!==void 0?l.addEventListener(f,m,{capture:!0,passive:E}):l.addEventListener(f,m,!0):E!==void 0?l.addEventListener(f,m,{passive:E}):l.addEventListener(f,m,!1)}function Oy(l,f,m,g,E){var w=g;if((f&1)===0&&(f&2)===0&&g!==null)e:for(;;){if(g===null)return;var I=g.tag;if(I===3||I===4){var U=g.stateNode.containerInfo;if(U===E)break;if(I===4)for(I=g.return;I!==null;){var z=I.tag;if((z===3||z===4)&&I.stateNode.containerInfo===E)return;I=I.return}for(;U!==null;){if(I=so(U),I===null)return;if(z=I.tag,z===5||z===6||z===26||z===27){g=w=I;continue e}U=U.parentNode}}g=g.return}j_(function(){var ie=w,ue=Kg(m),he=[];e:{var ae=fR.get(l);if(ae!==void 0){var se=vd,Ie=l;switch(l){case"keypress":if(gd(m)===0)break e;case"keydown":case"keyup":se=RV;break;case"focusin":Ie="focus",se=Jg;break;case"focusout":Ie="blur",se=Jg;break;case"beforeblur":case"afterblur":se=Jg;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=F_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=pV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=LV;break;case oR:case lR:case uR:se=vV;break;case cR:se=IV;break;case"scroll":case"scrollend":se=hV;break;case"wheel":se=NV;break;case"copy":case"cut":case"paste":se=bV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=G_;break;case"toggle":case"beforetoggle":se=kV}var Ce=(f&4)!==0,dt=!Ce&&(l==="scroll"||l==="scrollend"),J=Ce?ae!==null?ae+"Capture":null:ae;Ce=[];for(var X=ie,ne;X!==null;){var de=X;if(ne=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ne===null||J===null||(de=cu(X,J),de!=null&&Ce.push(zu(X,de,ne))),dt)break;X=X.return}0<Ce.length&&(ae=new se(ae,Ie,null,m,ue),he.push({event:ae,listeners:Ce}))}}if((f&7)===0){e:{if(ae=l==="mouseover"||l==="pointerover",se=l==="mouseout"||l==="pointerout",ae&&m!==zg&&(Ie=m.relatedTarget||m.fromElement)&&(so(Ie)||Ie[ao]))break e;if((se||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,se?(Ie=m.relatedTarget||m.toElement,se=ie,Ie=Ie?so(Ie):null,Ie!==null&&(dt=a(Ie),Ce=Ie.tag,Ie!==dt||Ce!==5&&Ce!==27&&Ce!==6)&&(Ie=null)):(se=null,Ie=ie),se!==Ie)){if(Ce=F_,de="onMouseLeave",J="onMouseEnter",X="mouse",(l==="pointerout"||l==="pointerover")&&(Ce=G_,de="onPointerLeave",J="onPointerEnter",X="pointer"),dt=se==null?ae:uu(se),ne=Ie==null?ae:uu(Ie),ae=new Ce(de,X+"leave",se,m,ue),ae.target=dt,ae.relatedTarget=ne,de=null,so(ue)===ie&&(Ce=new Ce(J,X+"enter",Ie,m,ue),Ce.target=ne,Ce.relatedTarget=dt,de=Ce),dt=de,se&&Ie)t:{for(Ce=se,J=Ie,X=0,ne=Ce;ne;ne=$o(ne))X++;for(ne=0,de=J;de;de=$o(de))ne++;for(;0<X-ne;)Ce=$o(Ce),X--;for(;0<ne-X;)J=$o(J),ne--;for(;X--;){if(Ce===J||J!==null&&Ce===J.alternate)break t;Ce=$o(Ce),J=$o(J)}Ce=null}else Ce=null;se!==null&&DC(he,ae,se,Ce,!1),Ie!==null&&dt!==null&&DC(he,dt,Ie,Ce,!0)}}e:{if(ae=ie?uu(ie):window,se=ae.nodeName&&ae.nodeName.toLowerCase(),se==="select"||se==="input"&&ae.type==="file")var Ee=X_;else if(Y_(ae))if(Q_)Ee=zV;else{Ee=qV;var qe=VV}else se=ae.nodeName,!se||se.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ie&&Hg(ie.elementType)&&(Ee=X_):Ee=HV;if(Ee&&(Ee=Ee(l,ie))){W_(he,Ee,m,ue);break e}qe&&qe(l,ae,ie),l==="focusout"&&ie&&ae.type==="number"&&ie.memoizedProps.value!=null&&qg(ae,"number",ae.value)}switch(qe=ie?uu(ie):window,l){case"focusin":(Y_(qe)||qe.contentEditable==="true")&&(yo=qe,a0=ie,vu=null);break;case"focusout":vu=a0=yo=null;break;case"mousedown":s0=!0;break;case"contextmenu":case"mouseup":case"dragend":s0=!1,aR(he,m,ue);break;case"selectionchange":if(YV)break;case"keydown":case"keyup":aR(he,m,ue)}var we;if(t0)e:{switch(l){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else go?z_(l,m)&&(Le="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(Le="onCompositionStart");Le&&(V_&&m.locale!=="ko"&&(go||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&go&&(we=U_()):(ga=ue,Xg="value"in ga?ga.value:ga.textContent,go=!0)),qe=ah(ie,Le),0<qe.length&&(Le=new $_(Le,l,null,m,ue),he.push({event:Le,listeners:qe}),we?Le.data=we:(we=K_(m),we!==null&&(Le.data=we)))),(we=UV?BV(l,m):FV(l,m))&&(Le=ah(ie,"onBeforeInput"),0<Le.length&&(qe=new $_("onBeforeInput","beforeinput",null,m,ue),he.push({event:qe,listeners:Le}),qe.data=we)),Lq(he,l,ie,m,ue)}CC(he,f)})}function zu(l,f,m){return{instance:l,listener:f,currentTarget:m}}function ah(l,f){for(var m=f+"Capture",g=[];l!==null;){var E=l,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=cu(l,m),E!=null&&g.unshift(zu(l,E,w)),E=cu(l,f),E!=null&&g.push(zu(l,E,w))),l.tag===3)return g;l=l.return}return[]}function $o(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function DC(l,f,m,g,E){for(var w=f._reactName,I=[];m!==null&&m!==g;){var U=m,z=U.alternate,ie=U.stateNode;if(U=U.tag,z!==null&&z===g)break;U!==5&&U!==26&&U!==27||ie===null||(z=ie,E?(ie=cu(m,w),ie!=null&&I.unshift(zu(m,ie,z))):E||(ie=cu(m,w),ie!=null&&I.push(zu(m,ie,z)))),m=m.return}I.length!==0&&l.push({event:f,listeners:I})}var Nq=/\r\n?/g,Mq=/\u0000|\uFFFD/g;function IC(l){return(typeof l=="string"?l:""+l).replace(Nq,`
`).replace(Mq,"")}function PC(l,f){return f=IC(f),IC(l)===f}function sh(){}function ft(l,f,m,g,E,w){switch(m){case"children":typeof g=="string"?f==="body"||f==="textarea"&&g===""||ho(l,g):(typeof g=="number"||typeof g=="bigint")&&f!=="body"&&ho(l,""+g);break;case"className":fd(l,"class",g);break;case"tabIndex":fd(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":fd(l,m,g);break;case"style":M_(l,g,w);break;case"data":if(f!=="object"){fd(l,"data",g);break}case"src":case"href":if(g===""&&(f!=="a"||m!=="href")){l.removeAttribute(m);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(m);break}g=md(""+g),l.setAttribute(m,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(m==="formAction"?(f!=="input"&&ft(l,f,"name",E.name,E,null),ft(l,f,"formEncType",E.formEncType,E,null),ft(l,f,"formMethod",E.formMethod,E,null),ft(l,f,"formTarget",E.formTarget,E,null)):(ft(l,f,"encType",E.encType,E,null),ft(l,f,"method",E.method,E,null),ft(l,f,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(m);break}g=md(""+g),l.setAttribute(m,g);break;case"onClick":g!=null&&(l.onclick=sh);break;case"onScroll":g!=null&&Ke("scroll",l);break;case"onScrollEnd":g!=null&&Ke("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}m=md(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,""+g):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":g===!0?l.setAttribute(m,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,g):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(m,g):l.removeAttribute(m);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(m):l.setAttribute(m,g);break;case"popover":Ke("beforetoggle",l),Ke("toggle",l),cd(l,"popover",g);break;case"xlinkActuate":Ci(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ci(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ci(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ci(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ci(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ci(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ci(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ci(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ci(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":cd(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=fV.get(m)||m,cd(l,m,g))}}function Cy(l,f,m,g,E,w){switch(m){case"style":M_(l,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"children":typeof g=="string"?ho(l,g):(typeof g=="number"||typeof g=="bigint")&&ho(l,""+g);break;case"onScroll":g!=null&&Ke("scroll",l);break;case"onScrollEnd":g!=null&&Ke("scrollend",l);break;case"onClick":g!=null&&(l.onclick=sh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!A_.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),f=m.slice(2,E?m.length-7:void 0),w=l[$n]||null,w=w!=null?w[m]:null,typeof w=="function"&&l.removeEventListener(f,w,E),typeof g=="function")){typeof w!="function"&&w!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(f,g,E);break e}m in l?l[m]=g:g===!0?l.setAttribute(m,""):cd(l,m,g)}}}function Sn(l,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",l),Ke("load",l);var g=!1,E=!1,w;for(w in m)if(m.hasOwnProperty(w)){var I=m[w];if(I!=null)switch(w){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:ft(l,f,w,I,m,null)}}E&&ft(l,f,"srcSet",m.srcSet,m,null),g&&ft(l,f,"src",m.src,m,null);return;case"input":Ke("invalid",l);var U=w=I=E=null,z=null,ie=null;for(g in m)if(m.hasOwnProperty(g)){var ue=m[g];if(ue!=null)switch(g){case"name":E=ue;break;case"type":I=ue;break;case"checked":z=ue;break;case"defaultChecked":ie=ue;break;case"value":w=ue;break;case"defaultValue":U=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,f));break;default:ft(l,f,g,ue,m,null)}}D_(l,w,U,z,ie,I,E,!1),dd(l);return;case"select":Ke("invalid",l),g=I=w=null;for(E in m)if(m.hasOwnProperty(E)&&(U=m[E],U!=null))switch(E){case"value":w=U;break;case"defaultValue":I=U;break;case"multiple":g=U;default:ft(l,f,E,U,m,null)}f=w,m=I,l.multiple=!!g,f!=null?fo(l,!!g,f,!1):m!=null&&fo(l,!!g,m,!0);return;case"textarea":Ke("invalid",l),w=E=g=null;for(I in m)if(m.hasOwnProperty(I)&&(U=m[I],U!=null))switch(I){case"value":g=U;break;case"defaultValue":E=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:ft(l,f,I,U,m,null)}P_(l,g,E,w),dd(l);return;case"option":for(z in m)if(m.hasOwnProperty(z)&&(g=m[z],g!=null))switch(z){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ft(l,f,z,g,m,null)}return;case"dialog":Ke("beforetoggle",l),Ke("toggle",l),Ke("cancel",l),Ke("close",l);break;case"iframe":case"object":Ke("load",l);break;case"video":case"audio":for(g=0;g<Hu.length;g++)Ke(Hu[g],l);break;case"image":Ke("error",l),Ke("load",l);break;case"details":Ke("toggle",l);break;case"embed":case"source":case"link":Ke("error",l),Ke("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in m)if(m.hasOwnProperty(ie)&&(g=m[ie],g!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:ft(l,f,ie,g,m,null)}return;default:if(Hg(f)){for(ue in m)m.hasOwnProperty(ue)&&(g=m[ue],g!==void 0&&Cy(l,f,ue,g,m,void 0));return}}for(U in m)m.hasOwnProperty(U)&&(g=m[U],g!=null&&ft(l,f,U,g,m,null))}function kq(l,f,m,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,I=null,U=null,z=null,ie=null,ue=null;for(se in m){var he=m[se];if(m.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":z=he;default:g.hasOwnProperty(se)||ft(l,f,se,null,g,he)}}for(var ae in g){var se=g[ae];if(he=m[ae],g.hasOwnProperty(ae)&&(se!=null||he!=null))switch(ae){case"type":w=se;break;case"name":E=se;break;case"checked":ie=se;break;case"defaultChecked":ue=se;break;case"value":I=se;break;case"defaultValue":U=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,f));break;default:se!==he&&ft(l,f,ae,se,g,he)}}Vg(l,I,U,z,ie,ue,w,E);return;case"select":se=I=U=ae=null;for(w in m)if(z=m[w],m.hasOwnProperty(w)&&z!=null)switch(w){case"value":break;case"multiple":se=z;default:g.hasOwnProperty(w)||ft(l,f,w,null,g,z)}for(E in g)if(w=g[E],z=m[E],g.hasOwnProperty(E)&&(w!=null||z!=null))switch(E){case"value":ae=w;break;case"defaultValue":U=w;break;case"multiple":I=w;default:w!==z&&ft(l,f,E,w,g,z)}f=U,m=I,g=se,ae!=null?fo(l,!!m,ae,!1):!!g!=!!m&&(f!=null?fo(l,!!m,f,!0):fo(l,!!m,m?[]:"",!1));return;case"textarea":se=ae=null;for(U in m)if(E=m[U],m.hasOwnProperty(U)&&E!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:ft(l,f,U,null,g,E)}for(I in g)if(E=g[I],w=m[I],g.hasOwnProperty(I)&&(E!=null||w!=null))switch(I){case"value":ae=E;break;case"defaultValue":se=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==w&&ft(l,f,I,E,g,w)}I_(l,ae,se);return;case"option":for(var Ie in m)if(ae=m[Ie],m.hasOwnProperty(Ie)&&ae!=null&&!g.hasOwnProperty(Ie))switch(Ie){case"selected":l.selected=!1;break;default:ft(l,f,Ie,null,g,ae)}for(z in g)if(ae=g[z],se=m[z],g.hasOwnProperty(z)&&ae!==se&&(ae!=null||se!=null))switch(z){case"selected":l.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:ft(l,f,z,ae,g,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in m)ae=m[Ce],m.hasOwnProperty(Ce)&&ae!=null&&!g.hasOwnProperty(Ce)&&ft(l,f,Ce,null,g,ae);for(ie in g)if(ae=g[ie],se=m[ie],g.hasOwnProperty(ie)&&ae!==se&&(ae!=null||se!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,f));break;default:ft(l,f,ie,ae,g,se)}return;default:if(Hg(f)){for(var dt in m)ae=m[dt],m.hasOwnProperty(dt)&&ae!==void 0&&!g.hasOwnProperty(dt)&&Cy(l,f,dt,void 0,g,ae);for(ue in g)ae=g[ue],se=m[ue],!g.hasOwnProperty(ue)||ae===se||ae===void 0&&se===void 0||Cy(l,f,ue,ae,g,se);return}}for(var J in m)ae=m[J],m.hasOwnProperty(J)&&ae!=null&&!g.hasOwnProperty(J)&&ft(l,f,J,null,g,ae);for(he in g)ae=g[he],se=m[he],!g.hasOwnProperty(he)||ae===se||ae==null&&se==null||ft(l,f,he,ae,g,se)}var Ly=null,Dy=null;function oh(l){return l.nodeType===9?l:l.ownerDocument}function NC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MC(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function Iy(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Py=null;function jq(){var l=window.event;return l&&l.type==="popstate"?l===Py?!1:(Py=l,!0):(Py=null,!1)}var kC=typeof setTimeout=="function"?setTimeout:void 0,Uq=typeof clearTimeout=="function"?clearTimeout:void 0,jC=typeof Promise=="function"?Promise:void 0,Bq=typeof queueMicrotask=="function"?queueMicrotask:typeof jC<"u"?function(l){return jC.resolve(null).then(l).catch(Fq)}:kC;function Fq(l){setTimeout(function(){throw l})}function Ia(l){return l==="head"}function UC(l,f){var m=f,g=0,E=0;do{var w=m.nextSibling;if(l.removeChild(m),w&&w.nodeType===8)if(m=w.data,m==="/$"){if(0<g&&8>g){m=g;var I=l.ownerDocument;if(m&1&&Ku(I.documentElement),m&2&&Ku(I.body),m&4)for(m=I.head,Ku(m),I=m.firstChild;I;){var U=I.nextSibling,z=I.nodeName;I[lu]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&I.rel.toLowerCase()==="stylesheet"||m.removeChild(I),I=U}}if(E===0){l.removeChild(w),tc(f);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:g=m.charCodeAt(0)-48;else g=0;m=w}while(m);tc(f)}function Ny(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ny(m),Bg(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function $q(l,f,m,g){for(;l.nodeType===1;){var E=m;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[lu])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(w=l.getAttribute("rel"),w==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(w!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(w=l.getAttribute("src"),(w!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===w)return l}else return l;if(l=Vr(l.nextSibling),l===null)break}return null}function Gq(l,f,m){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=Vr(l.nextSibling),l===null))return null;return l}function My(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function Vq(l,f){var m=l.ownerDocument;if(l.data!=="$?"||m.readyState==="complete")f();else{var g=function(){f(),m.removeEventListener("DOMContentLoaded",g)};m.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Vr(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return l}var ky=null;function BC(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return l;f--}else m==="/$"&&f++}l=l.previousSibling}return null}function FC(l,f,m){switch(f=oh(m),l){case"html":if(l=f.documentElement,!l)throw Error(r(452));return l;case"head":if(l=f.head,!l)throw Error(r(453));return l;case"body":if(l=f.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Ku(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);Bg(l)}var Sr=new Map,$C=new Set;function lh(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Vi=$.d;$.d={f:qq,r:Hq,D:zq,C:Kq,L:Yq,m:Wq,X:Qq,S:Xq,M:Zq};function qq(){var l=Vi.f(),f=Jd();return l||f}function Hq(l){var f=oo(l);f!==null&&f.tag===5&&f.type==="form"?oO(f):Vi.r(l)}var Go=typeof document>"u"?null:document;function GC(l,f,m){var g=Go;if(g&&typeof f=="string"&&f){var E=mr(f);E='link[rel="'+l+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),$C.has(E)||($C.add(E),l={rel:l,crossOrigin:m,href:f},g.querySelector(E)===null&&(f=g.createElement("link"),Sn(f,"link",l),ln(f),g.head.appendChild(f)))}}function zq(l){Vi.D(l),GC("dns-prefetch",l,null)}function Kq(l,f){Vi.C(l,f),GC("preconnect",l,f)}function Yq(l,f,m){Vi.L(l,f,m);var g=Go;if(g&&l&&f){var E='link[rel="preload"][as="'+mr(f)+'"]';f==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+mr(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+mr(m.imageSizes)+'"]')):E+='[href="'+mr(l)+'"]';var w=E;switch(f){case"style":w=Vo(l);break;case"script":w=qo(l)}Sr.has(w)||(l=d({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:l,as:f},m),Sr.set(w,l),g.querySelector(E)!==null||f==="style"&&g.querySelector(Yu(w))||f==="script"&&g.querySelector(Wu(w))||(f=g.createElement("link"),Sn(f,"link",l),ln(f),g.head.appendChild(f)))}}function Wq(l,f){Vi.m(l,f);var m=Go;if(m&&l){var g=f&&typeof f.as=="string"?f.as:"script",E='link[rel="modulepreload"][as="'+mr(g)+'"][href="'+mr(l)+'"]',w=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=qo(l)}if(!Sr.has(w)&&(l=d({rel:"modulepreload",href:l},f),Sr.set(w,l),m.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Wu(w)))return}g=m.createElement("link"),Sn(g,"link",l),ln(g),m.head.appendChild(g)}}}function Xq(l,f,m){Vi.S(l,f,m);var g=Go;if(g&&l){var E=lo(g).hoistableStyles,w=Vo(l);f=f||"default";var I=E.get(w);if(!I){var U={loading:0,preload:null};if(I=g.querySelector(Yu(w)))U.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":f},m),(m=Sr.get(w))&&jy(l,m);var z=I=g.createElement("link");ln(z),Sn(z,"link",l),z._p=new Promise(function(ie,ue){z.onload=ie,z.onerror=ue}),z.addEventListener("load",function(){U.loading|=1}),z.addEventListener("error",function(){U.loading|=2}),U.loading|=4,uh(I,f,g)}I={type:"stylesheet",instance:I,count:1,state:U},E.set(w,I)}}}function Qq(l,f){Vi.X(l,f);var m=Go;if(m&&l){var g=lo(m).hoistableScripts,E=qo(l),w=g.get(E);w||(w=m.querySelector(Wu(E)),w||(l=d({src:l,async:!0},f),(f=Sr.get(E))&&Uy(l,f),w=m.createElement("script"),ln(w),Sn(w,"link",l),m.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(E,w))}}function Zq(l,f){Vi.M(l,f);var m=Go;if(m&&l){var g=lo(m).hoistableScripts,E=qo(l),w=g.get(E);w||(w=m.querySelector(Wu(E)),w||(l=d({src:l,async:!0,type:"module"},f),(f=Sr.get(E))&&Uy(l,f),w=m.createElement("script"),ln(w),Sn(w,"link",l),m.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(E,w))}}function VC(l,f,m,g){var E=(E=ge.current)?lh(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=Vo(m.href),m=lo(E).hoistableStyles,g=m.get(f),g||(g={type:"style",instance:null,count:0,state:null},m.set(f,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=Vo(m.href);var w=lo(E).hoistableStyles,I=w.get(l);if(I||(E=E.ownerDocument||E,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(l,I),(w=E.querySelector(Yu(l)))&&!w._p&&(I.instance=w,I.state.loading=5),Sr.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Sr.set(l,m),w||Jq(E,l,m,I.state))),f&&g===null)throw Error(r(528,""));return I}if(f&&g!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=qo(m),m=lo(E).hoistableScripts,g=m.get(f),g||(g={type:"script",instance:null,count:0,state:null},m.set(f,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Vo(l){return'href="'+mr(l)+'"'}function Yu(l){return'link[rel="stylesheet"]['+l+"]"}function qC(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function Jq(l,f,m,g){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?g.loading=1:(f=l.createElement("link"),g.preload=f,f.addEventListener("load",function(){return g.loading|=1}),f.addEventListener("error",function(){return g.loading|=2}),Sn(f,"link",m),ln(f),l.head.appendChild(f))}function qo(l){return'[src="'+mr(l)+'"]'}function Wu(l){return"script[async]"+l}function HC(l,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var g=l.querySelector('style[data-href~="'+mr(m.href)+'"]');if(g)return f.instance=g,ln(g),g;var E=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),ln(g),Sn(g,"style",E),uh(g,m.precedence,l),f.instance=g;case"stylesheet":E=Vo(m.href);var w=l.querySelector(Yu(E));if(w)return f.state.loading|=4,f.instance=w,ln(w),w;g=qC(m),(E=Sr.get(E))&&jy(g,E),w=(l.ownerDocument||l).createElement("link"),ln(w);var I=w;return I._p=new Promise(function(U,z){I.onload=U,I.onerror=z}),Sn(w,"link",g),f.state.loading|=4,uh(w,m.precedence,l),f.instance=w;case"script":return w=qo(m.src),(E=l.querySelector(Wu(w)))?(f.instance=E,ln(E),E):(g=m,(E=Sr.get(w))&&(g=d({},m),Uy(g,E)),l=l.ownerDocument||l,E=l.createElement("script"),ln(E),Sn(E,"link",g),l.head.appendChild(E),f.instance=E);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(g=f.instance,f.state.loading|=4,uh(g,m.precedence,l));return f.instance}function uh(l,f,m){for(var g=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,w=E,I=0;I<g.length;I++){var U=g[I];if(U.dataset.precedence===f)w=U;else if(w!==E)break}w?w.parentNode.insertBefore(l,w.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(l,f.firstChild))}function jy(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function Uy(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var ch=null;function zC(l,f,m){if(ch===null){var g=new Map,E=ch=new Map;E.set(m,g)}else E=ch,g=E.get(m),g||(g=new Map,E.set(m,g));if(g.has(l))return g;for(g.set(l,null),m=m.getElementsByTagName(l),E=0;E<m.length;E++){var w=m[E];if(!(w[lu]||w[On]||l==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var I=w.getAttribute(f)||"";I=l+I;var U=g.get(I);U?U.push(w):g.set(I,[w])}}return g}function KC(l,f,m){l=l.ownerDocument||l,l.head.insertBefore(m,f==="title"?l.querySelector("head > title"):null)}function eH(l,f,m){if(m===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function YC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Xu=null;function tH(){}function nH(l,f,m){if(Xu===null)throw Error(r(475));var g=Xu;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=Vo(m.href),w=l.querySelector(Yu(E));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(g.count++,g=fh.bind(g),l.then(g,g)),f.state.loading|=4,f.instance=w,ln(w);return}w=l.ownerDocument||l,m=qC(m),(E=Sr.get(E))&&jy(m,E),w=w.createElement("link"),ln(w);var I=w;I._p=new Promise(function(U,z){I.onload=U,I.onerror=z}),Sn(w,"link",m),f.instance=w}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(g.count++,f=fh.bind(g),l.addEventListener("load",f),l.addEventListener("error",f))}}function rH(){if(Xu===null)throw Error(r(475));var l=Xu;return l.stylesheets&&l.count===0&&By(l,l.stylesheets),0<l.count?function(f){var m=setTimeout(function(){if(l.stylesheets&&By(l,l.stylesheets),l.unsuspend){var g=l.unsuspend;l.unsuspend=null,g()}},6e4);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(m)}}:null}function fh(){if(this.count--,this.count===0){if(this.stylesheets)By(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var dh=null;function By(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,dh=new Map,f.forEach(iH,l),dh=null,fh.call(l))}function iH(l,f){if(!(f.state.loading&4)){var m=dh.get(l);if(m)var g=m.get(null);else{m=new Map,dh.set(l,m);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var I=E[w];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(m.set(I.dataset.precedence,I),g=I)}g&&m.set(null,g)}E=f.instance,I=E.getAttribute("data-precedence"),w=m.get(I)||g,w===g&&m.set(null,E),m.set(I,E),this.count++,g=fh.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),w?w.parentNode.insertBefore(E,w.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),f.state.loading|=4}}var Qu={$$typeof:A,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function aH(l,f,m,g,E,w,I,U){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mg(0),this.hiddenUpdates=Mg(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function WC(l,f,m,g,E,w,I,U,z,ie,ue,he){return l=new aH(l,f,m,I,U,z,ie,he),f=1,w===!0&&(f|=24),w=er(3,null,null,f),l.current=w,w.stateNode=l,f=b0(),f.refCount++,l.pooledCache=f,f.refCount++,w.memoizedState={element:g,isDehydrated:m,cache:f},A0(w),l}function XC(l){return l?(l=So,l):So}function QC(l,f,m,g,E,w){E=XC(E),g.context===null?g.context=E:g.pendingContext=E,g=xa(f),g.payload={element:m},w=w===void 0?null:w,w!==null&&(g.callback=w),m=ba(l,g,f),m!==null&&(ar(m,l,f),Ru(m,l,f))}function ZC(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<f?m:f}}function Fy(l,f){ZC(l,f),(l=l.alternate)&&ZC(l,f)}function JC(l){if(l.tag===13){var f=bo(l,67108864);f!==null&&ar(f,l,67108864),Fy(l,67108864)}}var hh=!0;function sH(l,f,m,g){var E=j.T;j.T=null;var w=$.p;try{$.p=2,$y(l,f,m,g)}finally{$.p=w,j.T=E}}function oH(l,f,m,g){var E=j.T;j.T=null;var w=$.p;try{$.p=8,$y(l,f,m,g)}finally{$.p=w,j.T=E}}function $y(l,f,m,g){if(hh){var E=Gy(g);if(E===null)Oy(l,f,g,mh,m),tL(l,g);else if(uH(E,l,f,m,g))g.stopPropagation();else if(tL(l,g),f&4&&-1<lH.indexOf(l)){for(;E!==null;){var w=oo(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var I=ls(w.pendingLanes);if(I!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;I;){var z=1<<31-Rn(I);U.entanglements[1]|=z,I&=~z}ui(w),(st&6)===0&&(Qd=je()+500,qu(0))}}break;case 13:U=bo(w,2),U!==null&&ar(U,w,2),Jd(),Fy(w,2)}if(w=Gy(g),w===null&&Oy(l,f,g,mh,m),w===E)break;E=w}E!==null&&g.stopPropagation()}else Oy(l,f,g,null,m)}}function Gy(l){return l=Kg(l),Vy(l)}var mh=null;function Vy(l){if(mh=null,l=so(l),l!==null){var f=a(l);if(f===null)l=null;else{var m=f.tag;if(m===13){if(l=s(f),l!==null)return l;l=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return mh=l,null}function eL(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rt()){case yn:return 2;case Wt:return 8;case Xt:case vn:return 32;case Ri:return 268435456;default:return 32}default:return 32}}var qy=!1,Pa=null,Na=null,Ma=null,Zu=new Map,Ju=new Map,ka=[],lH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tL(l,f){switch(l){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Zu.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(f.pointerId)}}function ec(l,f,m,g,E,w){return l===null||l.nativeEvent!==w?(l={blockedOn:f,domEventName:m,eventSystemFlags:g,nativeEvent:w,targetContainers:[E]},f!==null&&(f=oo(f),f!==null&&JC(f)),l):(l.eventSystemFlags|=g,f=l.targetContainers,E!==null&&f.indexOf(E)===-1&&f.push(E),l)}function uH(l,f,m,g,E){switch(f){case"focusin":return Pa=ec(Pa,l,f,m,g,E),!0;case"dragenter":return Na=ec(Na,l,f,m,g,E),!0;case"mouseover":return Ma=ec(Ma,l,f,m,g,E),!0;case"pointerover":var w=E.pointerId;return Zu.set(w,ec(Zu.get(w)||null,l,f,m,g,E)),!0;case"gotpointercapture":return w=E.pointerId,Ju.set(w,ec(Ju.get(w)||null,l,f,m,g,E)),!0}return!1}function nL(l){var f=so(l.target);if(f!==null){var m=a(f);if(m!==null){if(f=m.tag,f===13){if(f=s(m),f!==null){l.blockedOn=f,nV(l.priority,function(){if(m.tag===13){var g=ir();g=kg(g);var E=bo(m,g);E!==null&&ar(E,m,g),Fy(m,g)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ph(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var m=Gy(l.nativeEvent);if(m===null){m=l.nativeEvent;var g=new m.constructor(m.type,m);zg=g,m.target.dispatchEvent(g),zg=null}else return f=oo(m),f!==null&&JC(f),l.blockedOn=m,!1;f.shift()}return!0}function rL(l,f,m){ph(l)&&m.delete(f)}function cH(){qy=!1,Pa!==null&&ph(Pa)&&(Pa=null),Na!==null&&ph(Na)&&(Na=null),Ma!==null&&ph(Ma)&&(Ma=null),Zu.forEach(rL),Ju.forEach(rL)}function gh(l,f){l.blockedOn===f&&(l.blockedOn=null,qy||(qy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,cH)))}var yh=null;function iL(l){yh!==l&&(yh=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yh===l&&(yh=null);for(var f=0;f<l.length;f+=3){var m=l[f],g=l[f+1],E=l[f+2];if(typeof g!="function"){if(Vy(g||m)===null)continue;break}var w=oo(m);w!==null&&(l.splice(f,3),f-=3,V0(w,{pending:!0,data:E,method:m.method,action:g},g,E))}}))}function tc(l){function f(z){return gh(z,l)}Pa!==null&&gh(Pa,l),Na!==null&&gh(Na,l),Ma!==null&&gh(Ma,l),Zu.forEach(f),Ju.forEach(f);for(var m=0;m<ka.length;m++){var g=ka[m];g.blockedOn===l&&(g.blockedOn=null)}for(;0<ka.length&&(m=ka[0],m.blockedOn===null);)nL(m),m.blockedOn===null&&ka.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(g=0;g<m.length;g+=3){var E=m[g],w=m[g+1],I=E[$n]||null;if(typeof w=="function")I||iL(m);else if(I){var U=null;if(w&&w.hasAttribute("formAction")){if(E=w,I=w[$n]||null)U=I.formAction;else if(Vy(E)!==null)continue}else U=I.action;typeof U=="function"?m[g+1]=U:(m.splice(g,3),g-=3),iL(m)}}}function Hy(l){this._internalRoot=l}vh.prototype.render=Hy.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,g=ir();QC(m,g,l,f,null,null)},vh.prototype.unmount=Hy.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;QC(l.current,2,null,l,null,null),Jd(),f[ao]=null}};function vh(l){this._internalRoot=l}vh.prototype.unstable_scheduleHydration=function(l){if(l){var f=S_();l={blockedOn:null,target:l,priority:f};for(var m=0;m<ka.length&&f!==0&&f<ka[m].priority;m++);ka.splice(m,0,l),m===0&&nL(l)}};var aL=e.version;if(aL!=="19.1.0")throw Error(r(527,aL,"19.1.0"));$.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(f),l=l!==null?u(l):null,l=l===null?null:l.stateNode,l};var fH={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{Fr=xh.inject(fH),_n=xh}catch{}}return rc.createRoot=function(l,f){if(!i(l))throw Error(r(299));var m=!1,g="",E=SO,w=EO,I=TO,U=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(g=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(w=f.onCaughtError),f.onRecoverableError!==void 0&&(I=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(U=f.unstable_transitionCallbacks)),f=WC(l,1,!1,null,null,m,g,E,w,I,U,null),l[ao]=f.current,Ry(l),new Hy(f)},rc.hydrateRoot=function(l,f,m){if(!i(l))throw Error(r(299));var g=!1,E="",w=SO,I=EO,U=TO,z=null,ie=null;return m!=null&&(m.unstable_strictMode===!0&&(g=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(w=m.onUncaughtError),m.onCaughtError!==void 0&&(I=m.onCaughtError),m.onRecoverableError!==void 0&&(U=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(z=m.unstable_transitionCallbacks),m.formState!==void 0&&(ie=m.formState)),f=WC(l,1,!0,f,m??null,g,E,w,I,U,z,ie),f.context=XC(null),m=f.current,g=ir(),g=kg(g),E=xa(g),E.callback=null,ba(m,E,g),m=g,f.current.lanes=m,ou(f,m),ui(f),l[ao]=f.current,Ry(l),new vh(f)},rc.version="19.1.0",rc}var pL;function SH(){if(pL)return Yy.exports;pL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yy.exports=bH(),Yy.exports}var EH=SH(),ic={},gL;function TH(){if(gL)return ic;gL=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.parse=s,ic.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function s(p,y){const v=new a,b=p.length;if(b<2)return v;const x=(y==null?void 0:y.decode)||d;let T=0;do{const _=p.indexOf("=",T);if(_===-1)break;const A=p.indexOf(";",T),O=A===-1?b:A;if(_>O){T=p.lastIndexOf(";",_-1)+1;continue}const R=o(p,T,_),C=c(p,_,R),L=p.slice(R,C);if(v[L]===void 0){let P=o(p,_+1,O),N=c(p,O,P);const k=x(p.slice(P,N));v[L]=k}T=O+1}while(T<b);return v}function o(p,y,v){do{const b=p.charCodeAt(y);if(b!==32&&b!==9)return y}while(++y<v);return v}function c(p,y,v){for(;y>v;){const b=p.charCodeAt(--y);if(b!==32&&b!==9)return y+1}return v}function u(p,y,v){const b=(v==null?void 0:v.encode)||encodeURIComponent;if(!t.test(p))throw new TypeError(`argument name is invalid: ${p}`);const x=b(y);if(!e.test(x))throw new TypeError(`argument val is invalid: ${y}`);let T=p+"="+x;if(!v)return T;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);T+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);T+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);T+="; Path="+v.path}if(v.expires){if(!h(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);T+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(T+="; HttpOnly"),v.secure&&(T+="; Secure"),v.partitioned&&(T+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return T}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function h(p){return i.call(p)==="[object Date]"}return ic}TH();var yL="popstate";function AH(t={}){function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return GE("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Bc(i)}return _H(e,n,null,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wH(){return Math.random().toString(36).substring(2,10)}function vL(t,e){return{usr:t.state,key:t.key,idx:e}}function GE(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ql(e):e,state:n,key:e&&e.key||r||wH()}}function Bc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ql(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function _H(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function h(){o="POP";let x=d(),T=x==null?null:x-u;u=x,c&&c({action:o,location:b.location,delta:T})}function p(x,T){o="PUSH";let _=GE(b.location,x,T);u=d()+1;let A=vL(_,u),O=b.createHref(_);try{s.pushState(A,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(O)}a&&c&&c({action:o,location:b.location,delta:1})}function y(x,T){o="REPLACE";let _=GE(b.location,x,T);u=d();let A=vL(_,u),O=b.createHref(_);s.replaceState(A,"",O),a&&c&&c({action:o,location:b.location,delta:0})}function v(x){return RH(x)}let b={get action(){return o},get location(){return t(i,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(yL,h),c=x,()=>{i.removeEventListener(yL,h),c=null}},createHref(x){return e(i,x)},createURL:v,encodeLocation(x){let T=v(x);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:y,go(x){return s.go(x)}};return b}function RH(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Bc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function gB(t,e,n="/"){return OH(t,e,n,!1)}function OH(t,e,n,r){let i=typeof e=="string"?ql(e):e,a=ra(i.pathname||"/",n);if(a==null)return null;let s=yB(t);CH(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=FH(a);o=UH(s[c],u,r)}return o}function yB(t,e=[],n=[],r=""){let i=(a,s,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let u=Ji([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(_t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),yB(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:kH(u,a.index),routesMeta:d})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let c of vB(a.path))i(a,s,c)}),e}function vB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=vB(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function CH(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var LH=/^:[\w-]+$/,DH=3,IH=2,PH=1,NH=10,MH=-2,xL=t=>t==="*";function kH(t,e){let n=t.split("/"),r=n.length;return n.some(xL)&&(r+=MH),e&&(r+=IH),n.filter(i=>!xL(i)).reduce((i,a)=>i+(LH.test(a)?DH:a===""?PH:NH),r)}function jH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function UH(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=xm({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=xm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Ji([a,h.pathname]),pathnameBase:qH(Ji([a,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(a=Ji([a,h.pathnameBase]))}return s}function xm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BH(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:h},p)=>{if(d==="*"){let v=o[p]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=o[p];return h&&!y?u[d]=void 0:u[d]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function BH(t,e=!1,n=!0){Nr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function FH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ra(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function $H(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ql(t):t;return{pathname:n?n.startsWith("/")?n:GH(n,e):e,search:HH(r),hash:zH(i)}}function GH(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VH(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function e1(t){let e=VH(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function t1(t,e,n,r=!1){let i;typeof t=="string"?i=ql(t):(i={...t},_t(!i.pathname||!i.pathname.includes("?"),Zy("?","pathname","search",i)),_t(!i.pathname||!i.pathname.includes("#"),Zy("#","pathname","hash",i)),_t(!i.search||!i.search.includes("#"),Zy("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}o=h>=0?e[h]:"/"}let c=$H(i,o),u=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Ji=t=>t.join("/").replace(/\/\/+/g,"/"),qH=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HH=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zH=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KH(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var xB=["POST","PUT","PATCH","DELETE"];new Set(xB);var YH=["GET",...xB];new Set(YH);var Hl=F.createContext(null);Hl.displayName="DataRouter";var Fp=F.createContext(null);Fp.displayName="DataRouterState";var bB=F.createContext({isTransitioning:!1});bB.displayName="ViewTransition";var WH=F.createContext(new Map);WH.displayName="Fetchers";var XH=F.createContext(null);XH.displayName="Await";var ei=F.createContext(null);ei.displayName="Navigation";var Uf=F.createContext(null);Uf.displayName="Location";var Ur=F.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var n1=F.createContext(null);n1.displayName="RouteError";function QH(t,{relative:e}={}){_t(zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=F.useContext(ei),{hash:i,pathname:a,search:s}=Bf(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:Ji([n,a])),r.createHref({pathname:o,search:s,hash:i})}function zl(){return F.useContext(Uf)!=null}function ca(){return _t(zl(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(Uf).location}var SB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function EB(t){F.useContext(ei).static||F.useLayoutEffect(t)}function rn(){let{isDataRoute:t}=F.useContext(Ur);return t?dz():ZH()}function ZH(){_t(zl(),"useNavigate() may be used only in the context of a <Router> component.");let t=F.useContext(Hl),{basename:e,navigator:n}=F.useContext(ei),{matches:r}=F.useContext(Ur),{pathname:i}=ca(),a=JSON.stringify(e1(r)),s=F.useRef(!1);return EB(()=>{s.current=!0}),F.useCallback((c,u={})=>{if(Nr(s.current,SB),!s.current)return;if(typeof c=="number"){n.go(c);return}let d=t1(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ji([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,i,t])}var JH=F.createContext(null);function ez(t){let e=F.useContext(Ur).outlet;return e&&F.createElement(JH.Provider,{value:t},e)}function fa(){let{matches:t}=F.useContext(Ur),e=t[t.length-1];return e?e.params:{}}function Bf(t,{relative:e}={}){let{matches:n}=F.useContext(Ur),{pathname:r}=ca(),i=JSON.stringify(e1(n));return F.useMemo(()=>t1(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function tz(t,e){return TB(t,e)}function TB(t,e,n,r){var T;_t(zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=F.useContext(ei),{matches:a}=F.useContext(Ur),s=a[a.length-1],o=s?s.params:{},c=s?s.pathname:"/",u=s?s.pathnameBase:"/",d=s&&s.route;{let _=d&&d.path||"";AB(c,!d||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let h=ca(),p;if(e){let _=typeof e=="string"?ql(e):e;_t(u==="/"||((T=_.pathname)==null?void 0:T.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=h;let y=p.pathname||"/",v=y;if(u!=="/"){let _=u.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=gB(t,{pathname:v});Nr(d||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Nr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=sz(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Ji([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Ji([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,n,r);return e&&x?F.createElement(Uf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function nz(){let t=fz(),e=KH(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=F.createElement(F.Fragment,null,F.createElement("p",null,"💿 Hey developer 👋"),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:a},"ErrorBoundary")," or"," ",F.createElement("code",{style:a},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,s)}var rz=F.createElement(nz,null),iz=class extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?F.createElement(Ur.Provider,{value:this.props.routeContext},F.createElement(n1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function az({routeContext:t,match:e,children:n}){let r=F.useContext(Hl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Ur.Provider,{value:t},n)}function sz(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let c=i.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);_t(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let s=!1,o=-1;if(n)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=c),u.route.id){let{loaderData:d,errors:h}=n,p=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||p){s=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((c,u,d)=>{let h,p=!1,y=null,v=null;n&&(h=a&&u.route.id?a[u.route.id]:void 0,y=u.route.errorElement||rz,s&&(o<0&&d===0?(AB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,v=null):o===d&&(p=!0,v=u.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,d+1)),x=()=>{let T;return h?T=y:p?T=v:u.route.Component?T=F.createElement(u.route.Component,null):u.route.element?T=u.route.element:T=c,F.createElement(az,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:T})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?F.createElement(iz,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}function r1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oz(t){let e=F.useContext(Hl);return _t(e,r1(t)),e}function lz(t){let e=F.useContext(Fp);return _t(e,r1(t)),e}function uz(t){let e=F.useContext(Ur);return _t(e,r1(t)),e}function i1(t){let e=uz(t),n=e.matches[e.matches.length-1];return _t(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function cz(){return i1("useRouteId")}function fz(){var r;let t=F.useContext(n1),e=lz("useRouteError"),n=i1("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function dz(){let{router:t}=oz("useNavigate"),e=i1("useNavigate"),n=F.useRef(!1);return EB(()=>{n.current=!0}),F.useCallback(async(i,a={})=>{Nr(n.current,SB),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var bL={};function AB(t,e,n){!e&&!bL[t]&&(bL[t]=!0,Nr(!1,n))}F.memo(hz);function hz({routes:t,future:e,state:n}){return TB(t,void 0,n,e)}function mz({to:t,replace:e,state:n,relative:r}){_t(zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=F.useContext(ei);Nr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=F.useContext(Ur),{pathname:s}=ca(),o=rn(),c=t1(t,e1(a),s,r==="path"),u=JSON.stringify(c);return F.useEffect(()=>{o(JSON.parse(u),{replace:e,state:n,relative:r})},[o,u,r,e,n]),null}function pz(t){return ez(t.context)}function St(t){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gz({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){_t(!zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),o=F.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof n=="string"&&(n=ql(n));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:p="default"}=n,y=F.useMemo(()=>{let v=ra(c,s);return v==null?null:{location:{pathname:v,search:u,hash:d,state:h,key:p},navigationType:r}},[s,c,u,d,h,p,r]);return Nr(y!=null,`<Router basename="${s}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:F.createElement(ei.Provider,{value:o},F.createElement(Uf.Provider,{children:e,value:y}))}function yz({children:t,location:e}){return tz(VE(t),e)}function VE(t,e=[]){let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let a=[...e,i];if(r.type===F.Fragment){n.push.apply(n,VE(r.props.children,a));return}_t(r.type===St,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=VE(r.props.children,a)),n.push(s)}),n}var tm="get",nm="application/x-www-form-urlencoded";function $p(t){return t!=null&&typeof t.tagName=="string"}function vz(t){return $p(t)&&t.tagName.toLowerCase()==="button"}function xz(t){return $p(t)&&t.tagName.toLowerCase()==="form"}function bz(t){return $p(t)&&t.tagName.toLowerCase()==="input"}function Sz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ez(t,e){return t.button===0&&(!e||e==="_self")&&!Sz(t)}function qE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Tz(t,e){let n=qE(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Sh=null;function Az(){if(Sh===null)try{new FormData(document.createElement("form"),0),Sh=!1}catch{Sh=!0}return Sh}var wz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jy(t){return t!=null&&!wz.has(t)?(Nr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nm}"`),null):t}function _z(t,e){let n,r,i,a,s;if(xz(t)){let o=t.getAttribute("action");r=o?ra(o,e):null,n=t.getAttribute("method")||tm,i=Jy(t.getAttribute("enctype"))||nm,a=new FormData(t)}else if(vz(t)||bz(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?ra(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||tm,i=Jy(t.getAttribute("formenctype"))||Jy(o.getAttribute("enctype"))||nm,a=new FormData(o,t),!Az()){let{name:u,type:d,value:h}=t;if(d==="image"){let p=u?`${u}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else u&&a.append(u,h)}}else{if($p(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tm,r=null,i=nm,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}function a1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Rz(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Oz(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Cz(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await Rz(a,n);return s.links?s.links():[]}return[]}));return Pz(r.flat(1).filter(Oz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function SL(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{var h;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Lz(t,e,{includeHydrateFallback:n}={}){return Dz(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Dz(t){return[...new Set(t)]}function Iz(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Pz(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(Iz(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Nz=new Set([100,101,204,205]);function Mz(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&ra(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function wB(){let t=F.useContext(Hl);return a1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kz(){let t=F.useContext(Fp);return a1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var s1=F.createContext(void 0);s1.displayName="FrameworkContext";function _B(){let t=F.useContext(s1);return a1(t,"You must render this element inside a <HydratedRouter> element"),t}function jz(t,e){let n=F.useContext(s1),[r,i]=F.useState(!1),[a,s]=F.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,p=F.useRef(null);F.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let b=T=>{T.forEach(_=>{s(_.isIntersecting)})},x=new IntersectionObserver(b,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[t]),F.useEffect(()=>{if(r){let b=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(b)}}},[r]);let y=()=>{i(!0)},v=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,p,{}]:[a,p,{onFocus:ac(o,y),onBlur:ac(c,v),onMouseEnter:ac(u,y),onMouseLeave:ac(d,v),onTouchStart:ac(h,y)}]:[!1,p,{}]}function ac(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Uz({page:t,...e}){let{router:n}=wB(),r=F.useMemo(()=>gB(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?F.createElement(Fz,{page:t,matches:r,...e}):null}function Bz(t){let{manifest:e,routeModules:n}=_B(),[r,i]=F.useState([]);return F.useEffect(()=>{let a=!1;return Cz(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Fz({page:t,matches:e,...n}){let r=ca(),{manifest:i,routeModules:a}=_B(),{basename:s}=wB(),{loaderData:o,matches:c}=kz(),u=F.useMemo(()=>SL(t,e,c,i,r,"data"),[t,e,c,i,r]),d=F.useMemo(()=>SL(t,e,c,i,r,"assets"),[t,e,c,i,r]),h=F.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,b=!1;if(e.forEach(T=>{var A;let _=i.routes[T.route.id];!_||!_.hasLoader||(!u.some(O=>O.route.id===T.route.id)&&T.route.id in o&&((A=a[T.route.id])!=null&&A.shouldRevalidate)||_.hasClientLoader?b=!0:v.add(T.route.id))}),v.size===0)return[];let x=Mz(t,s);return b&&v.size>0&&x.searchParams.set("_routes",e.filter(T=>v.has(T.route.id)).map(T=>T.route.id).join(",")),[x.pathname+x.search]},[s,o,r,i,u,e,t,a]),p=F.useMemo(()=>Lz(d,i),[d,i]),y=Bz(d);return F.createElement(F.Fragment,null,h.map(v=>F.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>F.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),y.map(({key:v,link:b})=>F.createElement("link",{key:v,...b})))}function $z(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var RB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RB&&(window.__reactRouterVersion="7.6.2")}catch{}function Gz({basename:t,children:e,window:n}){let r=F.useRef();r.current==null&&(r.current=AH({window:n,v5Compat:!0}));let i=r.current,[a,s]=F.useState({action:i.action,location:i.location}),o=F.useCallback(c=>{F.startTransition(()=>s(c))},[s]);return F.useLayoutEffect(()=>i.listen(o),[i,o]),F.createElement(gz,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var OB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hi=F.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:h,...p},y){let{basename:v}=F.useContext(ei),b=typeof u=="string"&&OB.test(u),x,T=!1;if(typeof u=="string"&&b&&(x=u,RB))try{let N=new URL(window.location.href),k=u.startsWith("//")?new URL(N.protocol+u):new URL(u),M=ra(k.pathname,v);k.origin===N.origin&&M!=null?u=M+k.search+k.hash:T=!0}catch{Nr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=QH(u,{relative:i}),[A,O,R]=jz(r,p),C=zz(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:i,viewTransition:h});function L(N){e&&e(N),N.defaultPrevented||C(N)}let P=F.createElement("a",{...p,...R,href:x||_,onClick:T||a?e:L,ref:$z(y,O),target:c,"data-discover":!b&&n==="render"?"true":void 0});return A&&!b?F.createElement(F.Fragment,null,P,F.createElement(Uz,{page:_})):P});hi.displayName="Link";var Vz=F.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},d){let h=Bf(s,{relative:u.relative}),p=ca(),y=F.useContext(Fp),{navigator:v,basename:b}=F.useContext(ei),x=y!=null&&Zz(h)&&o===!0,T=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,_=p.pathname,A=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(_=_.toLowerCase(),A=A?A.toLowerCase():null,T=T.toLowerCase()),A&&b&&(A=ra(A,b)||A);const O=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let R=_===T||!i&&_.startsWith(T)&&_.charAt(O)==="/",C=A!=null&&(A===T||!i&&A.startsWith(T)&&A.charAt(T.length)==="/"),L={isActive:R,isPending:C,isTransitioning:x},P=R?e:void 0,N;typeof r=="function"?N=r(L):N=[r,R?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(L):a;return F.createElement(hi,{...u,"aria-current":P,className:N,ref:d,style:k,to:s,viewTransition:o},typeof c=="function"?c(L):c)});Vz.displayName="NavLink";var qz=F.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=tm,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...p},y)=>{let v=Xz(),b=Qz(o,{relative:u}),x=s.toLowerCase()==="get"?"get":"post",T=typeof o=="string"&&OB.test(o),_=A=>{if(c&&c(A),A.defaultPrevented)return;A.preventDefault();let O=A.nativeEvent.submitter,R=(O==null?void 0:O.getAttribute("formmethod"))||s;v(O||A.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:i,state:a,relative:u,preventScrollReset:d,viewTransition:h})};return F.createElement("form",{ref:y,method:x,action:b,onSubmit:r?c:_,...p,"data-discover":!T&&t==="render"?"true":void 0})});qz.displayName="Form";function Hz(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CB(t){let e=F.useContext(Hl);return _t(e,Hz(t)),e}function zz(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let o=rn(),c=ca(),u=Bf(t,{relative:a});return F.useCallback(d=>{if(Ez(d,e)){d.preventDefault();let h=n!==void 0?n:Bc(c)===Bc(u);o(t,{replace:h,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[c,o,u,n,r,e,t,i,a,s])}function Kz(t){Nr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=F.useRef(qE(t)),n=F.useRef(!1),r=ca(),i=F.useMemo(()=>Tz(r.search,n.current?null:e.current),[r.search]),a=rn(),s=F.useCallback((o,c)=>{const u=qE(typeof o=="function"?o(i):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var Yz=0,Wz=()=>`__${String(++Yz)}__`;function Xz(){let{router:t}=CB("useSubmit"),{basename:e}=F.useContext(ei),n=cz();return F.useCallback(async(r,i={})=>{let{action:a,method:s,encType:o,formData:c,body:u}=_z(r,e);if(i.navigate===!1){let d=i.fetcherKey||Wz();await t.fetch(d,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Qz(t,{relative:e}={}){let{basename:n}=F.useContext(ei),r=F.useContext(Ur);_t(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Bf(t||".",{relative:e})},s=ca();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let d=o.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ji([n,a.pathname])),Bc(a)}function Zz(t,e={}){let n=F.useContext(bB);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=CB("useViewTransitionState"),i=Bf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=ra(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=ra(n.nextLocation.pathname,r)||n.nextLocation.pathname;return xm(i.pathname,s)!=null||xm(i.pathname,a)!=null}[...Nz];var ev={exports:{}},tv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EL;function Jz(){if(EL)return tv;EL=1;var t=Bp();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return tv.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var y=i(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=s(function(){function x(R){if(!T){if(T=!0,_=R,R=h(R),p!==void 0&&v.hasValue){var C=v.value;if(p(C,R))return A=C}return A=R}if(C=A,n(_,R))return C;var L=h(R);return p!==void 0&&p(C,L)?(_=R,C):(_=R,A=L)}var T=!1,_,A,O=d===void 0?null:d;return[function(){return x(u())},O===null?void 0:function(){return x(O())}]},[u,d,h,p]);var b=r(c,y[0],y[1]);return a(function(){v.hasValue=!0,v.value=b},[b]),o(b),b},tv}var TL;function eK(){return TL||(TL=1,ev.exports=Jz()),ev.exports}var tK=eK();function nK(t){t()}function rK(){let t=null,e=null;return{clear(){t=null,e=null},notify(){nK(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var AL={notify(){},get:()=>[]};function iK(t,e){let n,r=AL,i=0,a=!1;function s(b){d();const x=r.subscribe(b);let T=!1;return()=>{T||(T=!0,x(),h())}}function o(){r.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return a}function d(){i++,n||(n=t.subscribe(c),r=rK())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=AL)}function p(){a||(a=!0,d())}function y(){a&&(a=!1,h())}const v={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:y,getListeners:()=>r};return v}var aK=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sK=aK(),oK=()=>typeof navigator<"u"&&navigator.product==="ReactNative",lK=oK(),uK=()=>sK||lK?F.useLayoutEffect:F.useEffect,cK=uK(),nv=Symbol.for("react-redux-context"),rv=typeof globalThis<"u"?globalThis:{};function fK(){if(!F.createContext)return{};const t=rv[nv]??(rv[nv]=new Map);let e=t.get(F.createContext);return e||(e=F.createContext(null),t.set(F.createContext,e)),e}var Wa=fK();function dK(t){const{children:e,context:n,serverState:r,store:i}=t,a=F.useMemo(()=>{const c=iK(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=F.useMemo(()=>i.getState(),[i]);cK(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||Wa;return F.createElement(o.Provider,{value:a},e)}var hK=dK;function o1(t=Wa){return function(){return F.useContext(t)}}var LB=o1();function DB(t=Wa){const e=t===Wa?LB:o1(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var mK=DB();function pK(t=Wa){const e=t===Wa?mK:DB(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var an=pK(),gK=(t,e)=>t===e;function yK(t=Wa){const e=t===Wa?LB:o1(t),n=(r,i={})=>{const{equalityFn:a=gK}=typeof i=="function"?{equalityFn:i}:i,s=e(),{store:o,subscription:c,getServerState:u}=s;F.useRef(!0);const d=F.useCallback({[r.name](p){return r(p)}}[r.name],[r]),h=tK.useSyncExternalStoreWithSelector(c.addNestedSub,o.getState,u||o.getState,d,a);return F.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var sn=yK();const IB="LOGIN_REQUEST",l1="LOGIN_SUCCESS",PB="LOGIN_FAILURE",NB="LOGOUT",vK="LOGOUT_SUCCESS";function MB(t,e){return function(){return t.apply(e,arguments)}}const{toString:xK}=Object.prototype,{getPrototypeOf:u1}=Object,{iterator:Gp,toStringTag:kB}=Symbol,Vp=(t=>e=>{const n=xK.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ti=t=>(t=t.toLowerCase(),e=>Vp(e)===t),qp=t=>e=>typeof e===t,{isArray:Kl}=Array,Fc=qp("undefined");function bK(t){return t!==null&&!Fc(t)&&t.constructor!==null&&!Fc(t.constructor)&&Xn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const jB=ti("ArrayBuffer");function SK(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&jB(t.buffer),e}const EK=qp("string"),Xn=qp("function"),UB=qp("number"),Hp=t=>t!==null&&typeof t=="object",TK=t=>t===!0||t===!1,rm=t=>{if(Vp(t)!=="object")return!1;const e=u1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(kB in t)&&!(Gp in t)},AK=ti("Date"),wK=ti("File"),_K=ti("Blob"),RK=ti("FileList"),OK=t=>Hp(t)&&Xn(t.pipe),CK=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Xn(t.append)&&((e=Vp(t))==="formdata"||e==="object"&&Xn(t.toString)&&t.toString()==="[object FormData]"))},LK=ti("URLSearchParams"),[DK,IK,PK,NK]=["ReadableStream","Request","Response","Headers"].map(ti),MK=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ff(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Kl(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length;let o;for(r=0;r<s;r++)o=a[r],e.call(null,t[o],o,t)}}function BB(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Ms=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,FB=t=>!Fc(t)&&t!==Ms;function HE(){const{caseless:t}=FB(this)&&this||{},e={},n=(r,i)=>{const a=t&&BB(e,i)||i;rm(e[a])&&rm(r)?e[a]=HE(e[a],r):rm(r)?e[a]=HE({},r):Kl(r)?e[a]=r.slice():e[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ff(arguments[r],n);return e}const kK=(t,e,n,{allOwnKeys:r}={})=>(Ff(e,(i,a)=>{n&&Xn(i)?t[a]=MB(i,n):t[a]=i},{allOwnKeys:r}),t),jK=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),UK=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},BK=(t,e,n,r)=>{let i,a,s;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],(!r||r(s,t,e))&&!o[s]&&(e[s]=t[s],o[s]=!0);t=n!==!1&&u1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},FK=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},$K=t=>{if(!t)return null;if(Kl(t))return t;let e=t.length;if(!UB(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},GK=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&u1(Uint8Array)),VK=(t,e)=>{const r=(t&&t[Gp]).call(t);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},qK=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},HK=ti("HTMLFormElement"),zK=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),wL=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),KK=ti("RegExp"),$B=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ff(n,(i,a)=>{let s;(s=e(i,a,t))!==!1&&(r[a]=s||i)}),Object.defineProperties(t,r)},YK=t=>{$B(t,(e,n)=>{if(Xn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Xn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},WK=(t,e)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return Kl(t)?r(t):r(String(t).split(e)),n},XK=()=>{},QK=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function ZK(t){return!!(t&&Xn(t.append)&&t[kB]==="FormData"&&t[Gp])}const JK=t=>{const e=new Array(10),n=(r,i)=>{if(Hp(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const a=Kl(r)?[]:{};return Ff(r,(s,o)=>{const c=n(s,i+1);!Fc(c)&&(a[o]=c)}),e[i]=void 0,a}}return r};return n(t,0)},e7=ti("AsyncFunction"),t7=t=>t&&(Hp(t)||Xn(t))&&Xn(t.then)&&Xn(t.catch),GB=((t,e)=>t?setImmediate:e?((n,r)=>(Ms.addEventListener("message",({source:i,data:a})=>{i===Ms&&a===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Ms.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Xn(Ms.postMessage)),n7=typeof queueMicrotask<"u"?queueMicrotask.bind(Ms):typeof process<"u"&&process.nextTick||GB,r7=t=>t!=null&&Xn(t[Gp]),oe={isArray:Kl,isArrayBuffer:jB,isBuffer:bK,isFormData:CK,isArrayBufferView:SK,isString:EK,isNumber:UB,isBoolean:TK,isObject:Hp,isPlainObject:rm,isReadableStream:DK,isRequest:IK,isResponse:PK,isHeaders:NK,isUndefined:Fc,isDate:AK,isFile:wK,isBlob:_K,isRegExp:KK,isFunction:Xn,isStream:OK,isURLSearchParams:LK,isTypedArray:GK,isFileList:RK,forEach:Ff,merge:HE,extend:kK,trim:MK,stripBOM:jK,inherits:UK,toFlatObject:BK,kindOf:Vp,kindOfTest:ti,endsWith:FK,toArray:$K,forEachEntry:VK,matchAll:qK,isHTMLForm:HK,hasOwnProperty:wL,hasOwnProp:wL,reduceDescriptors:$B,freezeMethods:YK,toObjectSet:WK,toCamelCase:zK,noop:XK,toFiniteNumber:QK,findKey:BB,global:Ms,isContextDefined:FB,isSpecCompliantForm:ZK,toJSONObject:JK,isAsyncFn:e7,isThenable:t7,setImmediate:GB,asap:n7,isIterable:r7};function Ue(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}oe.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const VB=Ue.prototype,qB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qB[t]={value:t}});Object.defineProperties(Ue,qB);Object.defineProperty(VB,"isAxiosError",{value:!0});Ue.from=(t,e,n,r,i,a)=>{const s=Object.create(VB);return oe.toFlatObject(t,s,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Ue.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,a&&Object.assign(s,a),s};const i7=null;function zE(t){return oe.isPlainObject(t)||oe.isArray(t)}function HB(t){return oe.endsWith(t,"[]")?t.slice(0,-2):t}function _L(t,e,n){return t?t.concat(e).map(function(i,a){return i=HB(i),!n&&a?"["+i+"]":i}).join(n?".":""):e}function a7(t){return oe.isArray(t)&&!t.some(zE)}const s7=oe.toFlatObject(oe,{},null,function(e){return/^is[A-Z]/.test(e)});function zp(t,e,n){if(!oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=oe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,x){return!oe.isUndefined(x[b])});const r=n.metaTokens,i=n.visitor||d,a=n.dots,s=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(e);if(!oe.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(oe.isDate(v))return v.toISOString();if(oe.isBoolean(v))return v.toString();if(!c&&oe.isBlob(v))throw new Ue("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(v)||oe.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,b,x){let T=v;if(v&&!x&&typeof v=="object"){if(oe.endsWith(b,"{}"))b=r?b:b.slice(0,-2),v=JSON.stringify(v);else if(oe.isArray(v)&&a7(v)||(oe.isFileList(v)||oe.endsWith(b,"[]"))&&(T=oe.toArray(v)))return b=HB(b),T.forEach(function(A,O){!(oe.isUndefined(A)||A===null)&&e.append(s===!0?_L([b],O,a):s===null?b:b+"[]",u(A))}),!1}return zE(v)?!0:(e.append(_L(x,b,a),u(v)),!1)}const h=[],p=Object.assign(s7,{defaultVisitor:d,convertValue:u,isVisitable:zE});function y(v,b){if(!oe.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));h.push(v),oe.forEach(v,function(T,_){(!(oe.isUndefined(T)||T===null)&&i.call(e,T,oe.isString(_)?_.trim():_,b,p))===!0&&y(T,b?b.concat(_):[_])}),h.pop()}}if(!oe.isObject(t))throw new TypeError("data must be an object");return y(t),e}function RL(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function c1(t,e){this._pairs=[],t&&zp(t,this,e)}const zB=c1.prototype;zB.append=function(e,n){this._pairs.push([e,n])};zB.toString=function(e){const n=e?function(r){return e.call(this,r,RL)}:RL;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function o7(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function KB(t,e,n){if(!e)return t;const r=n&&n.encode||o7;oe.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(e,n):a=oe.isURLSearchParams(e)?e.toString():new c1(e,n).toString(r),a){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class OL{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const YB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},l7=typeof URLSearchParams<"u"?URLSearchParams:c1,u7=typeof FormData<"u"?FormData:null,c7=typeof Blob<"u"?Blob:null,f7={isBrowser:!0,classes:{URLSearchParams:l7,FormData:u7,Blob:c7},protocols:["http","https","file","blob","url","data"]},f1=typeof window<"u"&&typeof document<"u",KE=typeof navigator=="object"&&navigator||void 0,d7=f1&&(!KE||["ReactNative","NativeScript","NS"].indexOf(KE.product)<0),h7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",m7=f1&&window.location.href||"http://localhost",p7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:f1,hasStandardBrowserEnv:d7,hasStandardBrowserWebWorkerEnv:h7,navigator:KE,origin:m7},Symbol.toStringTag,{value:"Module"})),Mn={...p7,...f7};function g7(t,e){return zp(t,new Mn.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,a){return Mn.isNode&&oe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function y7(t){return oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function v7(t){const e={},n=Object.keys(t);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],e[a]=t[a];return e}function WB(t){function e(n,r,i,a){let s=n[a++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),c=a>=n.length;return s=!s&&oe.isArray(i)?i.length:s,c?(oe.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!o):((!i[s]||!oe.isObject(i[s]))&&(i[s]=[]),e(n,r,i[s],a)&&oe.isArray(i[s])&&(i[s]=v7(i[s])),!o)}if(oe.isFormData(t)&&oe.isFunction(t.entries)){const n={};return oe.forEachEntry(t,(r,i)=>{e(y7(r),i,n,0)}),n}return null}function x7(t,e,n){if(oe.isString(t))try{return(e||JSON.parse)(t),oe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const $f={transitional:YB,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=oe.isObject(e);if(a&&oe.isHTMLForm(e)&&(e=new FormData(e)),oe.isFormData(e))return i?JSON.stringify(WB(e)):e;if(oe.isArrayBuffer(e)||oe.isBuffer(e)||oe.isStream(e)||oe.isFile(e)||oe.isBlob(e)||oe.isReadableStream(e))return e;if(oe.isArrayBufferView(e))return e.buffer;if(oe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return g7(e,this.formSerializer).toString();if((o=oe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return zp(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),x7(e)):e}],transformResponse:[function(e){const n=this.transitional||$f.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(oe.isResponse(e)||oe.isReadableStream(e))return e;if(e&&oe.isString(e)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?Ue.from(o,Ue.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mn.classes.FormData,Blob:Mn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],t=>{$f.headers[t]={}});const b7=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),S7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||e[n]&&b7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},CL=Symbol("internals");function sc(t){return t&&String(t).trim().toLowerCase()}function im(t){return t===!1||t==null?t:oe.isArray(t)?t.map(im):String(t)}function E7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const T7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function iv(t,e,n,r,i){if(oe.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!oe.isString(e)){if(oe.isString(r))return e.indexOf(r)!==-1;if(oe.isRegExp(r))return r.test(e)}}function A7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function w7(t,e){const n=oe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,a,s){return this[r].call(this,e,i,a,s)},configurable:!0})})}let Qn=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function a(o,c,u){const d=sc(c);if(!d)throw new Error("header name must be a non-empty string");const h=oe.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||c]=im(o))}const s=(o,c)=>oe.forEach(o,(u,d)=>a(u,d,c));if(oe.isPlainObject(e)||e instanceof this.constructor)s(e,n);else if(oe.isString(e)&&(e=e.trim())&&!T7(e))s(S7(e),n);else if(oe.isObject(e)&&oe.isIterable(e)){let o={},c,u;for(const d of e){if(!oe.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(c=o[u])?oe.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}s(o,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=sc(e),e){const r=oe.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return E7(i);if(oe.isFunction(n))return n.call(this,i,r);if(oe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=sc(e),e){const r=oe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||iv(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function a(s){if(s=sc(s),s){const o=oe.findKey(r,s);o&&(!n||iv(r,r[o],o,n))&&(delete r[o],i=!0)}}return oe.isArray(e)?e.forEach(a):a(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const a=n[r];(!e||iv(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const n=this,r={};return oe.forEach(this,(i,a)=>{const s=oe.findKey(r,a);if(s){n[s]=im(i),delete n[a];return}const o=e?A7(a):String(a).trim();o!==a&&delete n[a],n[o]=im(i),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return oe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&oe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[CL]=this[CL]={accessors:{}}).accessors,i=this.prototype;function a(s){const o=sc(s);r[o]||(w7(i,s),r[o]=!0)}return oe.isArray(e)?e.forEach(a):a(e),this}};Qn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(Qn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});oe.freezeMethods(Qn);function av(t,e){const n=this||$f,r=e||n,i=Qn.from(r.headers);let a=r.data;return oe.forEach(t,function(o){a=o.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function XB(t){return!!(t&&t.__CANCEL__)}function Yl(t,e,n){Ue.call(this,t??"canceled",Ue.ERR_CANCELED,e,n),this.name="CanceledError"}oe.inherits(Yl,Ue,{__CANCEL__:!0});function QB(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ue("Request failed with status code "+n.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function _7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function R7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,a=0,s;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[a];s||(s=u),n[i]=c,r[i]=u;let h=a,p=0;for(;h!==i;)p+=n[h++],h=h%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),u-s<e)return;const y=d&&u-d;return y?Math.round(p*1e3/y):void 0}}function O7(t,e){let n=0,r=1e3/e,i,a;const s=(u,d=Date.now())=>{n=d,i=null,a&&(clearTimeout(a),a=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=r?s(u,d):(i=u,a||(a=setTimeout(()=>{a=null,s(i)},r-h)))},()=>i&&s(i)]}const bm=(t,e,n=3)=>{let r=0;const i=R7(50,250);return O7(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,c=s-r,u=i(c),d=s<=o;r=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&d?(o-s)/u:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(h)},n)},LL=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},DL=t=>(...e)=>oe.asap(()=>t(...e)),C7=Mn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Mn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Mn.origin),Mn.navigator&&/(msie|trident)/i.test(Mn.navigator.userAgent)):()=>!0,L7=Mn.hasStandardBrowserEnv?{write(t,e,n,r,i,a){const s=[t+"="+encodeURIComponent(e)];oe.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),oe.isString(r)&&s.push("path="+r),oe.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function D7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function I7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ZB(t,e,n){let r=!D7(e);return t&&(r||n==!1)?I7(t,e):e}const IL=t=>t instanceof Qn?{...t}:t;function Ys(t,e){e=e||{};const n={};function r(u,d,h,p){return oe.isPlainObject(u)&&oe.isPlainObject(d)?oe.merge.call({caseless:p},u,d):oe.isPlainObject(d)?oe.merge({},d):oe.isArray(d)?d.slice():d}function i(u,d,h,p){if(oe.isUndefined(d)){if(!oe.isUndefined(u))return r(void 0,u,h,p)}else return r(u,d,h,p)}function a(u,d){if(!oe.isUndefined(d))return r(void 0,d)}function s(u,d){if(oe.isUndefined(d)){if(!oe.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function o(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(u,d,h)=>i(IL(u),IL(d),h,!0)};return oe.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=c[d]||i,p=h(t[d],e[d],d);oe.isUndefined(p)&&h!==o||(n[d]=p)}),n}const JB=t=>{const e=Ys({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=e;e.headers=s=Qn.from(s),e.url=KB(ZB(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(oe.isFormData(n)){if(Mn.hasStandardBrowserEnv||Mn.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[u,...d]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Mn.hasStandardBrowserEnv&&(r&&oe.isFunction(r)&&(r=r(e)),r||r!==!1&&C7(e.url))){const u=i&&a&&L7.read(a);u&&s.set(i,u)}return e},P7=typeof XMLHttpRequest<"u",N7=P7&&function(t){return new Promise(function(n,r){const i=JB(t);let a=i.data;const s=Qn.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=i,d,h,p,y,v;function b(){y&&y(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function T(){if(!x)return;const A=Qn.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),R={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:A,config:t,request:x};QB(function(L){n(L),b()},function(L){r(L),b()},R),x=null}"onloadend"in x?x.onloadend=T:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(T)},x.onabort=function(){x&&(r(new Ue("Request aborted",Ue.ECONNABORTED,t,x)),x=null)},x.onerror=function(){r(new Ue("Network Error",Ue.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let O=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const R=i.transitional||YB;i.timeoutErrorMessage&&(O=i.timeoutErrorMessage),r(new Ue(O,R.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,t,x)),x=null},a===void 0&&s.setContentType(null),"setRequestHeader"in x&&oe.forEach(s.toJSON(),function(O,R){x.setRequestHeader(R,O)}),oe.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),o&&o!=="json"&&(x.responseType=i.responseType),u&&([p,v]=bm(u,!0),x.addEventListener("progress",p)),c&&x.upload&&([h,y]=bm(c),x.upload.addEventListener("progress",h),x.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(d=A=>{x&&(r(!A||A.type?new Yl(null,t,x):A),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const _=_7(i.url);if(_&&Mn.protocols.indexOf(_)===-1){r(new Ue("Unsupported protocol "+_+":",Ue.ERR_BAD_REQUEST,t));return}x.send(a||null)})},M7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const a=function(u){if(!i){i=!0,o();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Ue?d:new Yl(d instanceof Error?d.message:d))}};let s=e&&setTimeout(()=>{s=null,a(new Ue(`timeout ${e} of ms exceeded`,Ue.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),t=null)};t.forEach(u=>u.addEventListener("abort",a));const{signal:c}=r;return c.unsubscribe=()=>oe.asap(o),c}},k7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},j7=async function*(t,e){for await(const n of U7(t))yield*k7(n,e)},U7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},PL=(t,e,n,r)=>{const i=j7(t,e);let a=0,s,o=c=>{s||(s=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await i.next();if(u){o(),c.close();return}let h=d.byteLength;if(n){let p=a+=h;n(p)}c.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},Kp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",eF=Kp&&typeof ReadableStream=="function",B7=Kp&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),tF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},F7=eF&&tF(()=>{let t=!1;const e=new Request(Mn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),NL=64*1024,YE=eF&&tF(()=>oe.isReadableStream(new Response("").body)),Sm={stream:YE&&(t=>t.body)};Kp&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Sm[e]&&(Sm[e]=oe.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Ue(`Response type '${e}' is not supported`,Ue.ERR_NOT_SUPPORT,r)})})})(new Response);const $7=async t=>{if(t==null)return 0;if(oe.isBlob(t))return t.size;if(oe.isSpecCompliantForm(t))return(await new Request(Mn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(t)||oe.isArrayBuffer(t))return t.byteLength;if(oe.isURLSearchParams(t)&&(t=t+""),oe.isString(t))return(await B7(t)).byteLength},G7=async(t,e)=>{const n=oe.toFiniteNumber(t.getContentLength());return n??$7(e)},V7=Kp&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:p}=JB(t);u=u?(u+"").toLowerCase():"text";let y=M7([i,a&&a.toAbortSignal()],s),v;const b=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let x;try{if(c&&F7&&n!=="get"&&n!=="head"&&(x=await G7(d,r))!==0){let R=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(oe.isFormData(r)&&(C=R.headers.get("content-type"))&&d.setContentType(C),R.body){const[L,P]=LL(x,bm(DL(c)));r=PL(R.body,NL,L,P)}}oe.isString(h)||(h=h?"include":"omit");const T="credentials"in Request.prototype;v=new Request(e,{...p,signal:y,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:T?h:void 0});let _=await fetch(v,p);const A=YE&&(u==="stream"||u==="response");if(YE&&(o||A&&b)){const R={};["status","statusText","headers"].forEach(N=>{R[N]=_[N]});const C=oe.toFiniteNumber(_.headers.get("content-length")),[L,P]=o&&LL(C,bm(DL(o),!0))||[];_=new Response(PL(_.body,NL,L,()=>{P&&P(),b&&b()}),R)}u=u||"text";let O=await Sm[oe.findKey(Sm,u)||"text"](_,t);return!A&&b&&b(),await new Promise((R,C)=>{QB(R,C,{data:O,headers:Qn.from(_.headers),status:_.status,statusText:_.statusText,config:t,request:v})})}catch(T){throw b&&b(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new Ue("Network Error",Ue.ERR_NETWORK,t,v),{cause:T.cause||T}):Ue.from(T,T&&T.code,t,v)}}),WE={http:i7,xhr:N7,fetch:V7};oe.forEach(WE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ML=t=>`- ${t}`,q7=t=>oe.isFunction(t)||t===null||t===!1,nF={getAdapter:t=>{t=oe.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let a=0;a<e;a++){n=t[a];let s;if(r=n,!q7(n)&&(r=WE[(s=String(n)).toLowerCase()],r===void 0))throw new Ue(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+a]=r}if(!r){const a=Object.entries(i).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?a.length>1?`since :
`+a.map(ML).join(`
`):" "+ML(a[0]):"as no adapter specified";throw new Ue("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:WE};function sv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Yl(null,t)}function kL(t){return sv(t),t.headers=Qn.from(t.headers),t.data=av.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),nF.getAdapter(t.adapter||$f.adapter)(t).then(function(r){return sv(t),r.data=av.call(t,t.transformResponse,r),r.headers=Qn.from(r.headers),r},function(r){return XB(r)||(sv(t),r&&r.response&&(r.response.data=av.call(t,t.transformResponse,r.response),r.response.headers=Qn.from(r.response.headers))),Promise.reject(r)})}const rF="1.10.0",Yp={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Yp[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const jL={};Yp.transitional=function(e,n,r){function i(a,s){return"[Axios v"+rF+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,o)=>{if(e===!1)throw new Ue(i(s," has been removed"+(n?" in "+n:"")),Ue.ERR_DEPRECATED);return n&&!jL[s]&&(jL[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,s,o):!0}};Yp.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function H7(t,e,n){if(typeof t!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const a=r[i],s=e[a];if(s){const o=t[a],c=o===void 0||s(o,a,t);if(c!==!0)throw new Ue("option "+a+" must be "+c,Ue.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ue("Unknown option "+a,Ue.ERR_BAD_OPTION)}}const am={assertOptions:H7,validators:Yp},ci=am.validators;let Gs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new OL,response:new OL}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ys(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:a}=n;r!==void 0&&am.assertOptions(r,{silentJSONParsing:ci.transitional(ci.boolean),forcedJSONParsing:ci.transitional(ci.boolean),clarifyTimeoutError:ci.transitional(ci.boolean)},!1),i!=null&&(oe.isFunction(i)?n.paramsSerializer={serialize:i}:am.assertOptions(i,{encode:ci.function,serialize:ci.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),am.assertOptions(n,{baseUrl:ci.spelling("baseURL"),withXsrfToken:ci.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=a&&oe.merge(a.common,a[n.method]);a&&oe.forEach(["delete","get","head","post","put","patch","common"],v=>{delete a[v]}),n.headers=Qn.concat(s,a);const o=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,o.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let d,h=0,p;if(!c){const v=[kL.bind(this),void 0];for(v.unshift.apply(v,o),v.push.apply(v,u),p=v.length,d=Promise.resolve(n);h<p;)d=d.then(v[h++],v[h++]);return d}p=o.length;let y=n;for(h=0;h<p;){const v=o[h++],b=o[h++];try{y=v(y)}catch(x){b.call(this,x);break}}try{d=kL.call(this,y)}catch(v){return Promise.reject(v)}for(h=0,p=u.length;h<p;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Ys(this.defaults,e);const n=ZB(e.baseURL,e.url,e.allowAbsoluteUrls);return KB(n,e.params,e.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(e){Gs.prototype[e]=function(n,r){return this.request(Ys(r||{},{method:e,url:n,data:(r||{}).data}))}});oe.forEach(["post","put","patch"],function(e){function n(r){return function(a,s,o){return this.request(Ys(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Gs.prototype[e]=n(),Gs.prototype[e+"Form"]=n(!0)});let z7=class iF{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(o=>{r.subscribe(o),a=o}).then(i);return s.cancel=function(){r.unsubscribe(a)},s},e(function(a,s,o){r.reason||(r.reason=new Yl(a,s,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new iF(function(i){e=i}),cancel:e}}};function K7(t){return function(n){return t.apply(null,n)}}function Y7(t){return oe.isObject(t)&&t.isAxiosError===!0}const XE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(XE).forEach(([t,e])=>{XE[e]=t});function aF(t){const e=new Gs(t),n=MB(Gs.prototype.request,e);return oe.extend(n,Gs.prototype,e,{allOwnKeys:!0}),oe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return aF(Ys(t,i))},n}const Gt=aF($f);Gt.Axios=Gs;Gt.CanceledError=Yl;Gt.CancelToken=z7;Gt.isCancel=XB;Gt.VERSION=rF;Gt.toFormData=zp;Gt.AxiosError=Ue;Gt.Cancel=Gt.CanceledError;Gt.all=function(e){return Promise.all(e)};Gt.spread=K7;Gt.isAxiosError=Y7;Gt.mergeConfig=Ys;Gt.AxiosHeaders=Qn;Gt.formToJSON=t=>WB(oe.isHTMLForm(t)?new FormData(t):t);Gt.getAdapter=nF.getAdapter;Gt.HttpStatusCode=XE;Gt.default=Gt;const{Axios:BSe,AxiosError:FSe,CanceledError:$Se,isCancel:GSe,CancelToken:VSe,VERSION:qSe,all:HSe,Cancel:zSe,isAxiosError:KSe,spread:YSe,toFormData:WSe,AxiosHeaders:XSe,HttpStatusCode:QSe,formToJSON:ZSe,getAdapter:JSe,mergeConfig:eEe}=Gt;function En(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var W7=typeof Symbol=="function"&&Symbol.observable||"@@observable",UL=W7,ov=()=>Math.random().toString(36).substring(7).split("").join("."),X7={INIT:`@@redux/INIT${ov()}`,REPLACE:`@@redux/REPLACE${ov()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ov()}`},Em=X7;function sF(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function oF(t,e,n){if(typeof t!="function")throw new Error(En(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(En(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(En(1));return n(oF)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((x,T)=>{s.set(T,x)}))}function d(){if(c)throw new Error(En(3));return i}function h(x){if(typeof x!="function")throw new Error(En(4));if(c)throw new Error(En(5));let T=!0;u();const _=o++;return s.set(_,x),function(){if(T){if(c)throw new Error(En(6));T=!1,u(),s.delete(_),a=null}}}function p(x){if(!sF(x))throw new Error(En(7));if(typeof x.type>"u")throw new Error(En(8));if(typeof x.type!="string")throw new Error(En(17));if(c)throw new Error(En(9));try{c=!0,i=r(i,x)}finally{c=!1}return(a=s).forEach(_=>{_()}),x}function y(x){if(typeof x!="function")throw new Error(En(10));r=x,p({type:Em.REPLACE})}function v(){const x=h;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(En(11));function _(){const O=T;O.next&&O.next(d())}return _(),{unsubscribe:x(_)}},[UL](){return this}}}return p({type:Em.INIT}),{dispatch:p,subscribe:h,getState:d,replaceReducer:y,[UL]:v}}function Q7(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Em.INIT})>"u")throw new Error(En(12));if(typeof n(void 0,{type:Em.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(En(13))})}function lF(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{Q7(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let d=0;d<r.length;d++){const h=r[d],p=n[h],y=s[h],v=p(y,o);if(typeof v>"u")throw o&&o.type,new Error(En(14));u[h]=v,c=c||v!==y}return c=c||r.length!==Object.keys(s).length,c?u:s}}function Tm(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Z7(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(En(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=Tm(...o)(i.dispatch),{...i,dispatch:a}}}function uF(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var J7=uF(),e9=uF,t9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Tm:Tm.apply(null,arguments)},cF=class bc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,bc.prototype)}static get[Symbol.species](){return bc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new bc(...e[0].concat(this)):new bc(...e.concat(this))}};function n9(t){return typeof t=="boolean"}var r9=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new cF;return n&&(n9(n)?s.push(J7):s.push(e9(n.extraArgument))),s},i9="RTK_autoBatch",BL=t=>e=>{setTimeout(e,t)},a9=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:BL(10):t.type==="callback"?t.queueNotification:BL(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const h=()=>i&&d(),p=r.subscribe(h);return o.add(d),()=>{p(),o.delete(d)}},dispatch(d){var h;try{return i=!((h=d==null?void 0:d.meta)!=null&&h[i9]),a=!i,a&&(s||(s=!0,c(u))),r.dispatch(d)}finally{i=!0}}})},s9=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new cF(t);return r&&i.push(a9(typeof r=="object"?r:void 0)),i};function o9(t){const e=r9(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(sF(n))o=lF(n);else throw new Error(l9(1));let c;typeof r=="function"?c=r(e):c=e();let u=Tm;i&&(u=t9({trace:!1,...typeof i=="object"&&i}));const d=Z7(...c),h=s9(d);let p=typeof s=="function"?s(h):h();const y=u(...p);return oF(o,a,y)}function l9(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const FL={accessToken:localStorage.getItem("access_token")||null,refreshToken:localStorage.getItem("refresh_token")||null,isAuthenticated:!!localStorage.getItem("access_token"),user:JSON.parse(localStorage.getItem("user_info"))||null,loading:!1,error:null},u9=(t=FL,e)=>{switch(e.type){case IB:return{...t,loading:!0,error:null};case l1:return console.log("Login successful, updating state with tokens and user info:",e.payload),{...t,loading:!1,isAuthenticated:!0,accessToken:e.payload.accessToken,refreshToken:e.payload.refreshToken,user:e.payload.user,error:null};case PB:return{...t,loading:!1,isAuthenticated:!1,accessToken:null,refreshToken:null,user:null,error:e.payload};case NB:return{...FL};default:return t}},fF="GET_CONTENTS_REQUEST",dF="GET_CONTENTS_SUCCESS",hF="GET_CONTENTS_FAILURE",mF="GET_CONTENT_REQUEST",pF="GET_CONTENT_SUCCESS",gF="GET_CONTENT_FAILURE",yF="CREATE_CONTENT_REQUEST",vF="CREATE_CONTENT_SUCCESS",xF="CREATE_CONTENT_FAILURE",bF="UPDATE_CONTENT_REQUEST",SF="UPDATE_CONTENT_SUCCESS",EF="UPDATE_CONTENT_FAILURE",TF="DELETE_CONTENT_REQUEST",AF="DELETE_CONTENT_SUCCESS",wF="DELETE_CONTENT_FAILURE",c9={contents:[],pagination:{current_page:1,last_page:1,per_page:15,total:0,from:0,to:0,links:[]},selectedContent:null,loading:!1,error:null},f9=(t=c9,e)=>{switch(e.type){case fF:case mF:case yF:case bF:case TF:return{...t,loading:!0,error:null};case dF:return{...t,loading:!1,contents:e.payload.data,pagination:{current_page:e.payload.current_page,last_page:e.payload.last_page,per_page:e.payload.per_page,total:e.payload.total,from:e.payload.from,to:e.payload.to,links:e.payload.links},error:null};case pF:return{...t,loading:!1,selectedContent:e.payload,error:null};case vF:return{...t,loading:!1,contents:[...t.contents,e.payload],error:null};case SF:return{...t,loading:!1,contents:t.contents.map(n=>n.id===e.payload.id?e.payload:n),selectedContent:e.payload,error:null};case AF:return{...t,loading:!1,contents:t.contents.filter(n=>n.id!==e.payload),error:null};case hF:case gF:case xF:case EF:case wF:return{...t,loading:!1,error:e.payload};default:return t}},_F="FETCH_OVERVIEW_REQUEST",RF="FETCH_OVERVIEW_SUCCESS",OF="FETCH_OVERVIEW_FAILURE",CF="SET_TIME_RANGE",d9={data:null,timeRange:"week",loading:!1,error:null},h9=(t=d9,e)=>{switch(e.type){case _F:return{...t,loading:!0,error:null};case RF:return{...t,loading:!1,data:e.payload,error:null};case OF:return{...t,loading:!1,error:e.payload,data:null};case CF:return{...t,timeRange:e.payload};default:return t}},LF="FETCH_DEVICES_REQUEST",DF="FETCH_DEVICES_SUCCESS",IF="FETCH_DEVICES_FAILURE",PF="FETCH_DEVICE_BY_ID_REQUEST",NF="FETCH_DEVICE_BY_ID_SUCCESS",MF="FETCH_DEVICE_BY_ID_FAILURE",kF="CREATE_DEVICE_REQUEST",jF="CREATE_DEVICE_SUCCESS",UF="CREATE_DEVICE_FAILURE",BF="UPDATE_DEVICE_REQUEST",FF="UPDATE_DEVICE_SUCCESS",$F="UPDATE_DEVICE_FAILURE",GF="DELETE_DEVICE_REQUEST",VF="DELETE_DEVICE_SUCCESS",qF="DELETE_DEVICE_FAILURE",m9={devices:[],selectedDevice:null,pagination:{total:0,per_page:20,current_page:1,last_page:1},loading:!1,error:null},p9=(t=m9,e)=>{var n;switch(e.type){case LF:case PF:case kF:case BF:case GF:return{...t,loading:!0,error:null};case DF:return{...t,loading:!1,devices:e.payload.devices,pagination:e.payload.pagination,error:null};case NF:return{...t,loading:!1,selectedDevice:e.payload,error:null};case jF:return{...t,loading:!1,devices:[e.payload,...t.devices],error:null};case FF:return{...t,loading:!1,devices:t.devices.map(r=>r.id===e.payload.id?e.payload:r),selectedDevice:((n=t.selectedDevice)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedDevice,error:null};case VF:return{...t,loading:!1,devices:t.devices.filter(r=>r.id!==e.payload),error:null};case IF:case MF:case UF:case $F:case qF:return{...t,loading:!1,error:e.payload};default:return t}},HF=6048e5,g9=864e5,Eh=43200,$L=1440,GL=Symbol.for("constructDateFrom");function Mr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&GL in t?t[GL](e):t instanceof Date?new t.constructor(e):new Date(e)}function nn(t,e){return Mr(e||t,t)}function zF(t,e,n){const r=nn(t,n==null?void 0:n.in);return isNaN(e)?Mr(t,NaN):(e&&r.setDate(r.getDate()+e),r)}let y9={};function Gf(){return y9}function $c(t,e){var o,c,u,d;const n=Gf(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=nn(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Am(t,e){return $c(t,{...e,weekStartsOn:1})}function KF(t,e){const n=nn(t,e==null?void 0:e.in),r=n.getFullYear(),i=Mr(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Am(i),s=Mr(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Am(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function wm(t){const e=nn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Vf(t,...e){const n=Mr.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function _m(t,e){const n=nn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function v9(t,e,n){const[r,i]=Vf(n==null?void 0:n.in,t,e),a=_m(r),s=_m(i),o=+a-wm(a),c=+s-wm(s);return Math.round((o-c)/g9)}function x9(t,e){const n=KF(t,e),r=Mr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Am(r)}function sm(t,e){const n=+nn(t)-+nn(e);return n<0?-1:n>0?1:n}function Wp(t){return Mr(t,Date.now())}function d1(t,e,n){const[r,i]=Vf(n==null?void 0:n.in,t,e);return+_m(r)==+_m(i)}function b9(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function S9(t){return!(!b9(t)&&typeof t!="number"||isNaN(+nn(t)))}function E9(t,e,n){const[r,i]=Vf(n==null?void 0:n.in,t,e),a=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return a*12+s}function T9(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function A9(t,e){return+nn(t)-+nn(e)}function w9(t,e){const n=nn(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function _9(t,e){const n=nn(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function R9(t,e){const n=nn(t,e==null?void 0:e.in);return+w9(n,e)==+_9(n,e)}function O9(t,e,n){const[r,i,a]=Vf(n==null?void 0:n.in,t,t,e),s=sm(i,a),o=Math.abs(E9(i,a));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*o);let c=sm(i,a)===-s;R9(r)&&o===1&&sm(r,a)===1&&(c=!1);const u=s*(o-+c);return u===0?0:u}function C9(t,e,n){const r=A9(t,e)/1e3;return T9(n==null?void 0:n.roundingMethod)(r)}function L9(t,e){const n=nn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const D9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I9=(t,e,n)=>{let r;const i=D9[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function lv(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const P9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},N9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},M9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},k9={date:lv({formats:P9,defaultWidth:"full"}),time:lv({formats:N9,defaultWidth:"full"}),dateTime:lv({formats:M9,defaultWidth:"full"})},j9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},U9=(t,e,n,r)=>j9[t];function oc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const B9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},F9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},G9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},V9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},q9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},H9=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},z9={ordinalNumber:H9,era:oc({values:B9,defaultWidth:"wide"}),quarter:oc({values:F9,defaultWidth:"wide",argumentCallback:t=>t-1}),month:oc({values:$9,defaultWidth:"wide"}),day:oc({values:G9,defaultWidth:"wide"}),dayPeriod:oc({values:V9,defaultWidth:"wide",formattingValues:q9,defaultFormattingWidth:"wide"})};function lc(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?Y9(o,h=>h.test(s)):K9(o,h=>h.test(s));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function K9(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Y9(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function W9(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const X9=/^(\d+)(th|st|nd|rd)?/i,Q9=/\d+/i,Z9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},J9={any:[/^b/i,/^(a|c)/i]},eY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tY={any:[/1/i,/2/i,/3/i,/4/i]},nY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},rY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lY={ordinalNumber:W9({matchPattern:X9,parsePattern:Q9,valueCallback:t=>parseInt(t,10)}),era:lc({matchPatterns:Z9,defaultMatchWidth:"wide",parsePatterns:J9,defaultParseWidth:"any"}),quarter:lc({matchPatterns:eY,defaultMatchWidth:"wide",parsePatterns:tY,defaultParseWidth:"any",valueCallback:t=>t+1}),month:lc({matchPatterns:nY,defaultMatchWidth:"wide",parsePatterns:rY,defaultParseWidth:"any"}),day:lc({matchPatterns:iY,defaultMatchWidth:"wide",parsePatterns:aY,defaultParseWidth:"any"}),dayPeriod:lc({matchPatterns:sY,defaultMatchWidth:"any",parsePatterns:oY,defaultParseWidth:"any"})},YF={code:"en-US",formatDistance:I9,formatLong:k9,formatRelative:U9,localize:z9,match:lY,options:{weekStartsOn:0,firstWeekContainsDate:1}};function uY(t,e){const n=nn(t,e==null?void 0:e.in);return v9(n,L9(n))+1}function cY(t,e){const n=nn(t,e==null?void 0:e.in),r=+Am(n)-+x9(n);return Math.round(r/HF)+1}function WF(t,e){var d,h,p,y;const n=nn(t,e==null?void 0:e.in),r=n.getFullYear(),i=Gf(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(p=i.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,s=Mr((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=$c(s,e),c=Mr((e==null?void 0:e.in)||t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=$c(c,e);return+n>=+o?r+1:+n>=+u?r:r-1}function fY(t,e){var o,c,u,d;const n=Gf(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=WF(t,e),a=Mr((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),$c(a,e)}function dY(t,e){const n=nn(t,e==null?void 0:e.in),r=+$c(n,e)-+fY(n,e);return Math.round(r/HF)+1}function lt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ua={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return lt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):lt(n+1,2)},d(t,e){return lt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return lt(t.getHours()%12||12,e.length)},H(t,e){return lt(t.getHours(),e.length)},m(t,e){return lt(t.getMinutes(),e.length)},s(t,e){return lt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return lt(i,e.length)}},Ho={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ua.y(t,e)},Y:function(t,e,n,r){const i=WF(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return lt(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):lt(a,e.length)},R:function(t,e){const n=KF(t);return lt(n,e.length)},u:function(t,e){const n=t.getFullYear();return lt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return lt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return lt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ua.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return lt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=dY(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):lt(i,e.length)},I:function(t,e,n){const r=cY(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):lt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ua.d(t,e)},D:function(t,e,n){const r=uY(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return lt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return lt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return lt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Ho.noon:r===0?i=Ho.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Ho.evening:r>=12?i=Ho.afternoon:r>=4?i=Ho.morning:i=Ho.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ua.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ua.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ua.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ua.s(t,e)},S:function(t,e){return Ua.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return HL(r);case"XXXX":case"XX":return Cs(r);case"XXXXX":case"XXX":default:return Cs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return HL(r);case"xxxx":case"xx":return Cs(r);case"xxxxx":case"xxx":default:return Cs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+qL(r,":");case"OOOO":default:return"GMT"+Cs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+qL(r,":");case"zzzz":default:return"GMT"+Cs(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return lt(r,e.length)},T:function(t,e,n){return lt(+t,e.length)}};function qL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+lt(a,2)}function HL(t,e){return t%60===0?(t>0?"-":"+")+lt(Math.abs(t)/60,2):Cs(t,e)}function Cs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=lt(Math.trunc(r/60),2),a=lt(r%60,2);return n+i+e+a}const zL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},XF=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},hY=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return zL(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",zL(r,e)).replace("{{time}}",XF(i,e))},mY={p:XF,P:hY},pY=/^D+$/,gY=/^Y+$/,yY=["D","DD","YY","YYYY"];function vY(t){return pY.test(t)}function xY(t){return gY.test(t)}function bY(t,e,n){const r=SY(t,e,n);if(console.warn(r),yY.includes(t))throw new RangeError(r)}function SY(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const EY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,AY=/^'([^]*?)'?$/,wY=/''/g,_Y=/[a-zA-Z]/;function pn(t,e,n){var d,h,p,y;const r=Gf(),i=r.locale??YF,a=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((y=(p=r.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??0,o=nn(t,n==null?void 0:n.in);if(!S9(o))throw new RangeError("Invalid time value");let c=e.match(TY).map(v=>{const b=v[0];if(b==="p"||b==="P"){const x=mY[b];return x(v,i.formatLong)}return v}).join("").match(EY).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:RY(v)};if(VL[b])return{isToken:!0,value:v};if(b.match(_Y))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const b=v.value;(xY(b)||vY(b))&&bY(b,e,String(t));const x=VL[b[0]];return x(o,b,i.localize,u)}).join("")}function RY(t){const e=t.match(AY);return e?e[1].replace(wY,"'"):t}function OY(t,e,n){const r=Gf(),i=(n==null?void 0:n.locale)??r.locale??YF,a=2520,s=sm(t,e);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[c,u]=Vf(n==null?void 0:n.in,...s>0?[e,t]:[t,e]),d=C9(u,c),h=(wm(u)-wm(c))/1e3,p=Math.round((d-h)/60);let y;if(p<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,o):d<10?i.formatDistance("lessThanXSeconds",10,o):d<20?i.formatDistance("lessThanXSeconds",20,o):d<40?i.formatDistance("halfAMinute",0,o):d<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):p===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",p,o);if(p<45)return i.formatDistance("xMinutes",p,o);if(p<90)return i.formatDistance("aboutXHours",1,o);if(p<$L){const v=Math.round(p/60);return i.formatDistance("aboutXHours",v,o)}else{if(p<a)return i.formatDistance("xDays",1,o);if(p<Eh){const v=Math.round(p/$L);return i.formatDistance("xDays",v,o)}else if(p<Eh*2)return y=Math.round(p/Eh),i.formatDistance("aboutXMonths",y,o)}if(y=O9(u,c),y<12){const v=Math.round(p/Eh);return i.formatDistance("xMonths",v,o)}else{const v=y%12,b=Math.trunc(y/12);return v<3?i.formatDistance("aboutXYears",b,o):v<9?i.formatDistance("overXYears",b,o):i.formatDistance("almostXYears",b+1,o)}}function CY(t,e){return OY(t,Wp(t),e)}function LY(t,e){return d1(Mr(t,t),Wp(t))}function DY(t,e){return d1(t,zF(Wp(t),1),e)}function IY(t,e,n){return zF(t,-1,n)}function PY(t,e){return d1(Mr(t,t),IY(Wp(t)))}const QF="FETCH_SUBSCRIPTION_KEYS_REQUEST",ZF="FETCH_SUBSCRIPTION_KEYS_SUCCESS",JF="FETCH_SUBSCRIPTION_KEYS_FAILURE",e$="GENERATE_SUBSCRIPTION_KEY_REQUEST",t$="GENERATE_SUBSCRIPTION_KEY_SUCCESS",n$="GENERATE_SUBSCRIPTION_KEY_FAILURE",r$="DEACTIVATE_SUBSCRIPTION_KEY_REQUEST",i$="DEACTIVATE_SUBSCRIPTION_KEY_SUCCESS",a$="DEACTIVATE_SUBSCRIPTION_KEY_FAILURE",NY={subscriptionKeys:[],loading:!1,error:null},MY=(t=NY,e)=>{switch(e.type){case QF:case e$:case r$:return{...t,loading:!0,error:null};case ZF:return{...t,loading:!1,subscriptionKeys:e.payload,error:null};case t$:return{...t,loading:!1,subscriptionKeys:[e.payload,...t.subscriptionKeys],error:null};case i$:return{...t,loading:!1,subscriptionKeys:t.subscriptionKeys.map(n=>n.key===e.payload.key?e.payload:n),error:null};case JF:case n$:case a$:return{...t,loading:!1,error:e.payload};default:return t}},s$="FETCH_SUGGESTIONS_REQUEST",o$="FETCH_SUGGESTIONS_SUCCESS",l$="FETCH_SUGGESTIONS_FAILURE",u$="FETCH_SUGGESTION_BY_ID_REQUEST",c$="FETCH_SUGGESTION_BY_ID_SUCCESS",f$="FETCH_SUGGESTION_BY_ID_FAILURE",d$="CREATE_SUGGESTION_REQUEST",h$="CREATE_SUGGESTION_SUCCESS",m$="CREATE_SUGGESTION_FAILURE",p$="UPDATE_SUGGESTION_REQUEST",g$="UPDATE_SUGGESTION_SUCCESS",y$="UPDATE_SUGGESTION_FAILURE",v$="DELETE_SUGGESTION_REQUEST",x$="DELETE_SUGGESTION_SUCCESS",b$="DELETE_SUGGESTION_FAILURE",kY={suggestions:[],selectedSuggestion:null,loading:!1,error:null},jY=(t=kY,e)=>{var n;switch(e.type){case s$:case u$:case d$:case p$:case v$:return{...t,loading:!0,error:null};case o$:return{...t,loading:!1,suggestions:e.payload,error:null};case c$:return{...t,loading:!1,selectedSuggestion:e.payload,error:null};case h$:return{...t,loading:!1,suggestions:[e.payload,...t.suggestions],error:null};case g$:return{...t,loading:!1,suggestions:t.suggestions.map(r=>r.id===e.payload.id?e.payload:r),selectedSuggestion:((n=t.selectedSuggestion)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedSuggestion,error:null};case x$:return{...t,loading:!1,suggestions:t.suggestions.filter(r=>r.id!==e.payload),error:null};case l$:case f$:case m$:case y$:case b$:return{...t,loading:!1,error:e.payload};default:return t}},S$="FETCH_LIVESPORTS_REQUEST",E$="FETCH_LIVESPORTS_SUCCESS",T$="FETCH_LIVESPORTS_FAILURE",A$="FETCH_LIVESPORT_BY_ID_REQUEST",w$="FETCH_LIVESPORT_BY_ID_SUCCESS",_$="FETCH_LIVESPORT_BY_ID_FAILURE",R$="CREATE_LIVESPORT_REQUEST",O$="CREATE_LIVESPORT_SUCCESS",C$="CREATE_LIVESPORT_FAILURE",L$="UPDATE_LIVESPORT_REQUEST",D$="UPDATE_LIVESPORT_SUCCESS",I$="UPDATE_LIVESPORT_FAILURE",P$="DELETE_LIVESPORT_REQUEST",N$="DELETE_LIVESPORT_SUCCESS",M$="DELETE_LIVESPORT_FAILURE",UY={livesports:[],selectedLiveSport:null,pagination:{total:0,per_page:15,current_page:1,last_page:1},loading:!1,error:null},BY=(t=UY,e)=>{var n;switch(e.type){case S$:case A$:case R$:case L$:case P$:return{...t,loading:!0,error:null};case E$:return{...t,loading:!1,livesports:e.payload.data,pagination:{total:e.payload.total,per_page:e.payload.per_page,current_page:e.payload.current_page,last_page:e.payload.last_page},error:null};case w$:return{...t,loading:!1,selectedLiveSport:e.payload,error:null};case O$:return{...t,loading:!1,livesports:[e.payload,...t.livesports],error:null};case D$:return{...t,loading:!1,livesports:t.livesports.map(r=>r.id===e.payload.id?e.payload:r),selectedLiveSport:((n=t.selectedLiveSport)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedLiveSport,error:null};case N$:return{...t,loading:!1,livesports:t.livesports.filter(r=>r.id!==e.payload),error:null};case T$:case _$:case C$:case I$:case M$:return{...t,loading:!1,error:e.payload};default:return t}},k$="FETCH_SPORT_MATCHES_REQUEST",j$="FETCH_SPORT_MATCHES_SUCCESS",U$="FETCH_SPORT_MATCHES_FAILURE",B$="FETCH_SPORT_MATCH_DETAIL_REQUEST",F$="FETCH_SPORT_MATCH_DETAIL_SUCCESS",$$="FETCH_SPORT_MATCH_DETAIL_FAILURE",FY={matches:{football:{live:[],upcoming:[],finished:[]}},matchDetail:[],loading:!1,error:null};function $Y(t=FY,e){switch(e.type){case k$:case B$:return{...t,loading:!0,error:null};case j$:return{...t,loading:!1,matches:e.payload};case U$:case $$:return{...t,loading:!1,error:e.payload};case F$:return{...t,loading:!1,matchDetail:e.payload};default:return t}}const GY=lF({auth:u9,contents:f9,dashboard:h9,devices:p9,subscriptions:MY,suggestions:jY,livesports:BY,sport:$Y}),VY=t=>e=>n=>{const{auth:r}=t.getState(),i=r.token;return i?Je.defaults.headers.common.Authorization=`Bearer ${i}`:delete Je.defaults.headers.common.Authorization,n.type===vK&&delete Je.defaults.headers.common.Authorization,e(n)},Rm=o9({reducer:GY,middleware:t=>t().concat(VY)}),qY="https://lugyi-car.laravel.cloud/api/auth",Je=Gt.create({baseURL:qY,headers:{"Content-Type":"application/json",Accept:"application/json"}});Je.interceptors.request.use(t=>{const n=Rm.getState().auth.accessToken;return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t));Je.interceptors.response.use(t=>t,async t=>{var r;const e=t.config;return Rm.getState().auth.refreshToken,((r=t.response)==null?void 0:r.status)===401&&!e._retry&&(e._retry=!0,Rm.dispatch(G$())),Promise.reject(t)});const HY=async t=>{var e;try{return(await Je.post("/login",t)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},zY=t=>async e=>{e({type:IB});try{const n=await HY(t);return localStorage.setItem("access_token",n.access_token),localStorage.setItem("refresh_token",n.refresh_token),localStorage.setItem("user_info",JSON.stringify(n.user)),e({type:l1,payload:{accessToken:n.access_token,refreshToken:n.refresh_token,user:n.user}}),Promise.resolve(n)}catch(n){return e({type:PB,payload:n}),Promise.reject(n)}},G$=()=>t=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user_info"),t({type:NB})},KY=()=>t=>{const e=localStorage.getItem("access_token"),n=localStorage.getItem("refresh_token"),r=localStorage.getItem("user_info");e&&n&&t({type:l1,payload:{accessToken:e,refreshToken:n,user:r?JSON.parse(r):null}})},V$=F.createContext({});function YY(t){const e=F.useRef(null);return e.current===null&&(e.current=t()),e.current}const h1=typeof window<"u",WY=h1?F.useLayoutEffect:F.useEffect,m1=F.createContext(null);function p1(t,e){t.indexOf(e)===-1&&t.push(e)}function g1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ia=(t,e,n)=>n>e?e:n<t?t:n;let y1=()=>{};const aa={},q$=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function H$(t){return typeof t=="object"&&t!==null}const z$=t=>/^0[^.\s]+$/u.test(t);function v1(t){let e;return()=>(e===void 0&&(e=t()),e)}const Dr=t=>t,XY=(t,e)=>n=>e(t(n)),qf=(...t)=>t.reduce(XY),Gc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class x1{constructor(){this.subscriptions=[]}add(e){return p1(this.subscriptions,e),()=>g1(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xi=t=>t*1e3,bi=t=>t/1e3;function K$(t,e){return e?t*(1e3/e):0}const Y$=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,QY=1e-7,ZY=12;function JY(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=Y$(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>QY&&++o<ZY);return s}function Hf(t,e,n,r){if(t===e&&n===r)return Dr;const i=a=>JY(a,0,1,t,n);return a=>a===0||a===1?a:Y$(i(a),e,r)}const W$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,X$=t=>e=>1-t(1-e),Q$=Hf(.33,1.53,.69,.99),b1=X$(Q$),Z$=W$(b1),J$=t=>(t*=2)<1?.5*b1(t):.5*(2-Math.pow(2,-10*(t-1))),S1=t=>1-Math.sin(Math.acos(t)),e3=X$(S1),t3=W$(S1),eW=Hf(.42,0,1,1),tW=Hf(0,0,.58,1),n3=Hf(.42,0,.58,1),nW=t=>Array.isArray(t)&&typeof t[0]!="number",r3=t=>Array.isArray(t)&&typeof t[0]=="number",rW={linear:Dr,easeIn:eW,easeInOut:n3,easeOut:tW,circIn:S1,circInOut:t3,circOut:e3,backIn:b1,backInOut:Z$,backOut:Q$,anticipate:J$},iW=t=>typeof t=="string",KL=t=>{if(r3(t)){y1(t.length===4);const[e,n,r,i]=t;return Hf(e,n,r,i)}else if(iW(t))return rW[t];return t},Th=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],YL={value:null};function aW(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){s.has(h)&&(d.schedule(h),t()),c++,h(o)}const d={schedule:(h,p=!1,y=!1)=>{const b=y&&i?n:r;return p&&s.add(h),b.has(h)||b.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(o=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),e&&YL.value&&YL.value.frameloop[e].push(c),c=0,n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const sW=40;function i3(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Th.reduce((A,O)=>(A[O]=aW(a,e?O:void 0),A),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:p,render:y,postRender:v}=s,b=()=>{const A=aa.useManualTiming?i.timestamp:performance.now();n=!1,aa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(A-i.timestamp,sW),1)),i.timestamp=A,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),d.process(i),h.process(i),p.process(i),y.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(b))},x=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:Th.reduce((A,O)=>{const R=s[O];return A[O]=(C,L=!1,P=!1)=>(n||x(),R.schedule(C,L,P)),A},{}),cancel:A=>{for(let O=0;O<Th.length;O++)s[Th[O]].cancel(A)},state:i,steps:s}}const{schedule:Dt,cancel:Xa,state:An,steps:uv}=i3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dr,!0);let om;function oW(){om=void 0}const Yn={now:()=>(om===void 0&&Yn.set(An.isProcessing||aa.useManualTiming?An.timestamp:performance.now()),om),set:t=>{om=t,queueMicrotask(oW)}},a3=t=>e=>typeof e=="string"&&e.startsWith(t),E1=a3("--"),lW=a3("var(--"),T1=t=>lW(t)?uW.test(t.split("/*")[0].trim()):!1,uW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vc={...Wl,transform:t=>ia(0,1,t)},Ah={...Wl,default:1},_c=t=>Math.round(t*1e5)/1e5,A1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cW(t){return t==null}const fW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,w1=(t,e)=>n=>!!(typeof n=="string"&&fW.test(n)&&n.startsWith(t)||e&&!cW(n)&&Object.prototype.hasOwnProperty.call(n,e)),s3=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(A1);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},dW=t=>ia(0,255,t),cv={...Wl,transform:t=>Math.round(dW(t))},ks={test:w1("rgb","red"),parse:s3("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+cv.transform(t)+", "+cv.transform(e)+", "+cv.transform(n)+", "+_c(Vc.transform(r))+")"};function hW(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const QE={test:w1("#"),parse:hW,transform:ks.transform},zf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$a=zf("deg"),Si=zf("%"),Pe=zf("px"),mW=zf("vh"),pW=zf("vw"),WL={...Si,parse:t=>Si.parse(t)/100,transform:t=>Si.transform(t*100)},tl={test:w1("hsl","hue"),parse:s3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Si.transform(_c(e))+", "+Si.transform(_c(n))+", "+_c(Vc.transform(r))+")"},zt={test:t=>ks.test(t)||QE.test(t)||tl.test(t),parse:t=>ks.test(t)?ks.parse(t):tl.test(t)?tl.parse(t):QE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ks.transform(t):tl.transform(t),getAnimatableNone:t=>{const e=zt.parse(t);return e.alpha=0,zt.transform(e)}},gW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function yW(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(A1))==null?void 0:e.length)||0)+(((n=t.match(gW))==null?void 0:n.length)||0)>0}const o3="number",l3="color",vW="var",xW="var(",XL="${}",bW=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(bW,c=>(zt.test(c)?(r.color.push(a),i.push(l3),n.push(zt.parse(c))):c.startsWith(xW)?(r.var.push(a),i.push(vW),n.push(c)):(r.number.push(a),i.push(o3),n.push(parseFloat(c))),++a,XL)).split(XL);return{values:n,split:o,indexes:r,types:i}}function u3(t){return qc(t).values}function c3(t){const{split:e,types:n}=qc(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===o3?a+=_c(i[s]):o===l3?a+=zt.transform(i[s]):a+=i[s]}return a}}const SW=t=>typeof t=="number"?0:zt.test(t)?zt.getAnimatableNone(t):t;function EW(t){const e=u3(t);return c3(t)(e.map(SW))}const Qa={test:yW,parse:u3,createTransformer:c3,getAnimatableNone:EW};function fv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function TW({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=fv(c,o,t+1/3),a=fv(c,o,t),s=fv(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Om(t,e){return n=>n>0?e:t}const Lt=(t,e,n)=>t+(e-t)*n,dv=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},AW=[QE,ks,tl],wW=t=>AW.find(e=>e.test(t));function QL(t){const e=wW(t);if(!e)return!1;let n=e.parse(t);return e===tl&&(n=TW(n)),n}const ZL=(t,e)=>{const n=QL(t),r=QL(e);if(!n||!r)return Om(t,e);const i={...n};return a=>(i.red=dv(n.red,r.red,a),i.green=dv(n.green,r.green,a),i.blue=dv(n.blue,r.blue,a),i.alpha=Lt(n.alpha,r.alpha,a),ks.transform(i))},ZE=new Set(["none","hidden"]);function _W(t,e){return ZE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function RW(t,e){return n=>Lt(t,e,n)}function _1(t){return typeof t=="number"?RW:typeof t=="string"?T1(t)?Om:zt.test(t)?ZL:LW:Array.isArray(t)?f3:typeof t=="object"?zt.test(t)?ZL:OW:Om}function f3(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>_1(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function OW(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=_1(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function CW(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const LW=(t,e)=>{const n=Qa.createTransformer(e),r=qc(t),i=qc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ZE.has(t)&&!i.values.length||ZE.has(e)&&!r.values.length?_W(t,e):qf(f3(CW(r,i),i.values),n):Om(t,e)};function d3(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Lt(t,e,n):_1(t)(t,e)}const DW=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Dt.update(e,n),stop:()=>Xa(e),now:()=>An.isProcessing?An.timestamp:Yn.now()}},h3=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Cm=2e4;function R1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Cm;)e+=n,r=t.next(e);return e>=Cm?1/0:e}function IW(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(R1(r),Cm);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:bi(i)}}const PW=5;function m3(t,e,n){const r=Math.max(e-PW,0);return K$(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hv=.001;function NW({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let i,a,s=1-e;s=ia(Mt.minDamping,Mt.maxDamping,s),t=ia(Mt.minDuration,Mt.maxDuration,bi(t)),s<1?(i=u=>{const d=u*s,h=d*t,p=d-n,y=JE(u,s),v=Math.exp(-h);return hv-p/y*v},a=u=>{const h=u*s*t,p=h*n+n,y=Math.pow(s,2)*Math.pow(u,2)*t,v=Math.exp(-h),b=JE(Math.pow(u,2),s);return(-i(u)+hv>0?-1:1)*((p-y)*v)/b}):(i=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-hv+d*h},a=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const o=5/t,c=kW(i,a,o);if(t=xi(t),isNaN(c))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const MW=12;function kW(t,e,n){let r=n;for(let i=1;i<MW;i++)r=r-t(r)/e(r);return r}function JE(t,e){return t*Math.sqrt(1-e*e)}const jW=["duration","bounce"],UW=["stiffness","damping","mass"];function JL(t,e){return e.some(n=>t[n]!==void 0)}function BW(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!JL(t,UW)&&JL(t,jW))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ia(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Mt.mass,stiffness:i,damping:a}}else{const n=NW(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function Lm(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:y}=BW({...n,velocity:-bi(n.velocity||0)}),v=p||0,b=u/(2*Math.sqrt(c*d)),x=s-a,T=bi(Math.sqrt(c/d)),_=Math.abs(x)<5;r||(r=_?Mt.restSpeed.granular:Mt.restSpeed.default),i||(i=_?Mt.restDelta.granular:Mt.restDelta.default);let A;if(b<1){const R=JE(T,b);A=C=>{const L=Math.exp(-b*T*C);return s-L*((v+b*T*x)/R*Math.sin(R*C)+x*Math.cos(R*C))}}else if(b===1)A=R=>s-Math.exp(-T*R)*(x+(v+T*x)*R);else{const R=T*Math.sqrt(b*b-1);A=C=>{const L=Math.exp(-b*T*C),P=Math.min(R*C,300);return s-L*((v+b*T*x)*Math.sinh(P)+R*x*Math.cosh(P))/R}}const O={calculatedDuration:y&&h||null,next:R=>{const C=A(R);if(y)o.done=R>=h;else{let L=R===0?v:0;b<1&&(L=R===0?xi(v):m3(A,R,C));const P=Math.abs(L)<=r,N=Math.abs(s-C)<=i;o.done=P&&N}return o.value=o.done?s:C,o},toString:()=>{const R=Math.min(R1(O),Cm),C=h3(L=>O.next(R*L).value,R,30);return R+"ms "+C},toTransition:()=>{}};return O}Lm.applyToOptions=t=>{const e=IW(t,100,Lm);return t.ease=e.ease,t.duration=xi(e.duration),t.type="keyframes",t};function eT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},y=P=>o!==void 0&&P<o||c!==void 0&&P>c,v=P=>o===void 0?c:c===void 0||Math.abs(o-P)<Math.abs(c-P)?o:c;let b=n*e;const x=h+b,T=s===void 0?x:s(x);T!==x&&(b=T-h);const _=P=>-b*Math.exp(-P/r),A=P=>T+_(P),O=P=>{const N=_(P),k=A(P);p.done=Math.abs(N)<=u,p.value=p.done?T:k};let R,C;const L=P=>{y(p.value)&&(R=P,C=Lm({keyframes:[p.value,v(p.value)],velocity:m3(A,P,p.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return L(0),{calculatedDuration:null,next:P=>{let N=!1;return!C&&R===void 0&&(N=!0,O(P),L(P)),R!==void 0&&P>=R?C.next(P-R):(!N&&O(P),p)}}}function FW(t,e,n){const r=[],i=n||aa.mix||d3,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Dr:e;o=qf(c,o)}r.push(o)}return r}function $W(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(y1(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=FW(e,r,i),c=o.length,u=d=>{if(s&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=Gc(t[h],t[h+1],d);return o[h](p)};return n?d=>u(ia(t[0],t[a-1],d)):u}function GW(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Gc(0,e,r);t.push(Lt(n,1,i))}}function VW(t){const e=[0];return GW(e,t.length-1),e}function qW(t,e){return t.map(n=>n*e)}function HW(t,e){return t.map(()=>e||n3).splice(0,t.length-1)}function Rc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=nW(r)?r.map(KL):KL(r),a={done:!1,value:e[0]},s=qW(n&&n.length===e.length?n:VW(e),t),o=$W(s,e,{ease:Array.isArray(i)?i:HW(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const zW=t=>t!==null;function O1(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(zW),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const KW={decay:eT,inertia:eT,tween:Rc,keyframes:Rc,spring:Lm};function p3(t){typeof t.type=="string"&&(t.type=KW[t.type])}class C1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const YW=t=>t/100;class L1 extends C1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Yn.now()&&this.tick(Yn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;p3(e);const{type:n=Rc,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||Rc;c!==Rc&&typeof o[0]!="number"&&(this.mixKeyframes=qf(YW,d3(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=R1(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:y,type:v,onUpdate:b,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let A=this.currentTime,O=r;if(h){const P=Math.min(this.currentTime,i)/o;let N=Math.floor(P),k=P%1;!k&&P>=1&&(k=1),k===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(p==="reverse"?(k=1-k,y&&(k-=y/o)):p==="mirror"&&(O=s)),A=ia(0,1,k)*o}const R=_?{done:!1,value:d[0]}:O.next(A);a&&(R.value=a(R.value));let{done:C}=R;!_&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return L&&v!==eT&&(R.value=O1(d,this.options,x,this.speed)),b&&b(R.value),L&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return bi(this.calculatedDuration)}get time(){return bi(this.currentTime)}set time(e){var n;e=xi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=bi(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=DW,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function WW(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const js=t=>t*180/Math.PI,tT=t=>{const e=js(Math.atan2(t[1],t[0]));return nT(e)},XW={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:tT,rotateZ:tT,skewX:t=>js(Math.atan(t[1])),skewY:t=>js(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},nT=t=>(t=t%360,t<0&&(t+=360),t),eD=tT,tD=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),nD=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),QW={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tD,scaleY:nD,scale:t=>(tD(t)+nD(t))/2,rotateX:t=>nT(js(Math.atan2(t[6],t[5]))),rotateY:t=>nT(js(Math.atan2(-t[2],t[0]))),rotateZ:eD,rotate:eD,skewX:t=>js(Math.atan(t[4])),skewY:t=>js(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function rT(t){return t.includes("scale")?1:0}function iT(t,e){if(!t||t==="none")return rT(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=QW,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=XW,i=o}if(!i)return rT(e);const a=r[e],s=i[1].split(",").map(JW);return typeof a=="function"?a(s):s[a]}const ZW=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return iT(n,e)};function JW(t){return parseFloat(t.trim())}const Xl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ql=new Set(Xl),rD=t=>t===Wl||t===Pe,eX=new Set(["x","y","z"]),tX=Xl.filter(t=>!eX.has(t));function nX(t){const e=[];return tX.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>iT(e,"x"),y:(t,{transform:e})=>iT(e,"y")};Vs.translateX=Vs.x;Vs.translateY=Vs.y;const qs=new Set;let aT=!1,sT=!1,oT=!1;function g3(){if(sT){const t=Array.from(qs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=nX(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))==null||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}sT=!1,aT=!1,qs.forEach(t=>t.complete(oT)),qs.clear()}function y3(){qs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(sT=!0)})}function rX(){oT=!0,y3(),g3(),oT=!1}class D1{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(qs.add(this),aT||(aT=!0,Dt.read(y3),Dt.resolveKeyframes(g3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}WW(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qs.delete(this)}cancel(){this.state==="scheduled"&&(qs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const iX=t=>t.startsWith("--");function aX(t,e,n){iX(e)?t.style.setProperty(e,n):t.style[e]=n}const sX=v1(()=>window.ScrollTimeline!==void 0),oX={};function lX(t,e){const n=v1(t);return()=>oX[e]??n()}const v3=lX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,iD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sc([0,.65,.55,1]),circOut:Sc([.55,0,1,.45]),backIn:Sc([.31,.01,.66,-.59]),backOut:Sc([.33,1.53,.69,.99])};function x3(t,e){if(t)return typeof t=="function"?v3()?h3(t,e):"ease-out":r3(t)?Sc(t):Array.isArray(t)?t.map(n=>x3(n,e)||iD.easeOut):iD[t]}function uX(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=x3(o,i);Array.isArray(h)&&(d.easing=h);const p={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),t.animate(d,p)}function b3(t){return typeof t=="function"&&"applyToOptions"in t}function cX({type:t,...e}){return b3(t)&&v3()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class fX extends C1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,y1(typeof e.type!="string");const u=cX(e);this.animation=uX(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=O1(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):aX(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return bi(Number(e))}get time(){return bi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=xi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&sX()?(this.animation.timeline=e,Dr):n(this)}}const S3={anticipate:J$,backInOut:Z$,circInOut:t3};function dX(t){return t in S3}function hX(t){typeof t.ease=="string"&&dX(t.ease)&&(t.ease=S3[t.ease])}const aD=10;class mX extends fX{constructor(e){hX(e),p3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new L1({...s,autoplay:!1}),c=xi(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-aD).value,o.sample(c).value,aD),o.stop()}}const sD=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qa.test(t)||t==="0")&&!t.startsWith("url("));function pX(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function gX(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=sD(i,e),o=sD(a,e);return!s||!o?!1:pX(t)||(n==="spring"||b3(n))&&r}function E3(t){return H$(t)&&"offsetHeight"in t}const yX=new Set(["opacity","clipPath","filter","transform"]),vX=v1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function xX(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!E3((u=e==null?void 0:e.owner)==null?void 0:u.current))return!1;const{onUpdate:o,transformTemplate:c}=e.owner.getProps();return vX()&&n&&yX.has(n)&&(n!=="transform"||!c)&&!o&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const bX=40;class SX extends C1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var b,x;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Yn.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:d,...h},y=(d==null?void 0:d.KeyframeResolver)||D1;this.keyframeResolver=new y(o,(b,x,T)=>this.onKeyframesResolved(b,x,p,!T),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Yn.now(),gX(e,a,s,o)||((aa.instantAnimations||!c)&&(d==null||d(O1(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>bX?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!u&&xX(p)?new mX({...p,element:p.motionValue.owner.current}):new L1(p);y.finished.then(()=>this.notifyFinished()).catch(Dr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),rX()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const EX=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function TX(t){const e=EX.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function T3(t,e,n=1){const[r,i]=TX(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return q$(s)?parseFloat(s):s}return T1(i)?T3(i,e,n+1):i}function I1(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const A3=new Set(["width","height","top","left","right","bottom",...Xl]),AX={test:t=>t==="auto",parse:t=>t},w3=t=>e=>e.test(t),_3=[Wl,Pe,Si,$a,pW,mW,AX],oD=t=>_3.find(w3(t));function wX(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||z$(t):!0}const _X=new Set(["brightness","contrast","saturate","opacity"]);function RX(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(A1)||[];if(!r)return t;const i=n.replace(r,"");let a=_X.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const OX=/\b([a-z-]*)\(.*?\)/gu,lT={...Qa,getAnimatableNone:t=>{const e=t.match(OX);return e?e.map(RX).join(" "):t}},lD={...Wl,transform:Math.round},CX={rotate:$a,rotateX:$a,rotateY:$a,rotateZ:$a,scale:Ah,scaleX:Ah,scaleY:Ah,scaleZ:Ah,skew:$a,skewX:$a,skewY:$a,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Vc,originX:WL,originY:WL,originZ:Pe},P1={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe,...CX,zIndex:lD,fillOpacity:Vc,strokeOpacity:Vc,numOctaves:lD},LX={...P1,color:zt,backgroundColor:zt,outlineColor:zt,fill:zt,stroke:zt,borderColor:zt,borderTopColor:zt,borderRightColor:zt,borderBottomColor:zt,borderLeftColor:zt,filter:lT,WebkitFilter:lT},R3=t=>LX[t];function O3(t,e){let n=R3(t);return n!==lT&&(n=Qa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const DX=new Set(["auto","none","0"]);function IX(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!DX.has(a)&&qc(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=O3(n,i)}class PX extends D1{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),T1(u))){const d=T3(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!A3.has(r)||e.length!==2)return;const[i,a]=e,s=oD(i),o=oD(a);if(s!==o)if(rD(s)&&rD(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else Vs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||wX(e[i]))&&r.push(i);r.length&&IX(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Vs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function NX(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const C3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,uD=30,MX=t=>!isNaN(parseFloat(t));class kX{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var s,o;const a=Yn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=MX(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new x1);const r=this.events[e].add(n);return e==="change"?()=>{r(),Dt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>uD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,uD);return K$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yl(t,e){return new kX(t,e)}const{schedule:N1}=i3(queueMicrotask,!1),Hr={x:!1,y:!1};function L3(){return Hr.x||Hr.y}function jX(t){return t==="x"||t==="y"?Hr[t]?null:(Hr[t]=!0,()=>{Hr[t]=!1}):Hr.x||Hr.y?null:(Hr.x=Hr.y=!0,()=>{Hr.x=Hr.y=!1})}function D3(t,e){const n=NX(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function cD(t){return!(t.pointerType==="touch"||L3())}function UX(t,e,n={}){const[r,i,a]=D3(t,n),s=o=>{if(!cD(o))return;const{target:c}=o,u=e(c,o);if(typeof u!="function"||!c)return;const d=h=>{cD(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const I3=(t,e)=>e?t===e?!0:I3(t,e.parentElement):!1,M1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,BX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function FX(t){return BX.has(t.tagName)||t.tabIndex!==-1}const lm=new WeakSet;function fD(t){return e=>{e.key==="Enter"&&t(e)}}function mv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $X=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=fD(()=>{if(lm.has(n))return;mv(n,"down");const i=fD(()=>{mv(n,"up")}),a=()=>mv(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function dD(t){return M1(t)&&!L3()}function GX(t,e,n={}){const[r,i,a]=D3(t,n),s=o=>{const c=o.currentTarget;if(!dD(o))return;lm.add(c);const u=e(c,o),d=(y,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),lm.has(c)&&lm.delete(c),dD(y)&&typeof u=="function"&&u(y,{success:v})},h=y=>{d(y,c===window||c===document||n.useGlobalTarget||I3(c,y.target))},p=y=>{d(y,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),E3(o)&&(o.addEventListener("focus",u=>$X(u,i)),!FX(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function P3(t){return H$(t)&&"ownerSVGElement"in t}function VX(t){return P3(t)&&t.tagName==="svg"}const kn=t=>!!(t&&t.getVelocity),qX=[..._3,zt,Qa],HX=t=>qX.find(w3(t)),N3=F.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function zX(t=!0){const e=F.useContext(m1);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=F.useId();F.useEffect(()=>{if(t)return i(a)},[t]);const s=F.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const M3=F.createContext({strict:!1}),hD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vl={};for(const t in hD)vl[t]={isEnabled:e=>hD[t].some(n=>!!e[n])};function KX(t){for(const e in t)vl[e]={...vl[e],...t[e]}}const YX=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||YX.has(t)}let k3=t=>!Dm(t);function WX(t){typeof t=="function"&&(k3=e=>e.startsWith("on")?!Dm(e):t(e))}try{WX(require("@emotion/is-prop-valid").default)}catch{}function XX(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(k3(i)||n===!0&&Dm(i)||!e&&!Dm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function QX(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Xp=F.createContext({});function Qp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Hc(t){return typeof t=="string"||Array.isArray(t)}const k1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],j1=["initial",...k1];function Zp(t){return Qp(t.animate)||j1.some(e=>Hc(t[e]))}function j3(t){return!!(Zp(t)||t.variants)}function ZX(t,e){if(Zp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Hc(n)?n:void 0,animate:Hc(r)?r:void 0}}return t.inherit!==!1?e:{}}function JX(t){const{initial:e,animate:n}=ZX(t,F.useContext(Xp));return F.useMemo(()=>({initial:e,animate:n}),[mD(e),mD(n)])}function mD(t){return Array.isArray(t)?t.join(" "):t}const eQ=Symbol.for("motionComponentSymbol");function nl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function tQ(t,e,n){return F.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):nl(n)&&(n.current=r))},[e])}const U1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nQ="framerAppearId",U3="data-"+U1(nQ),B3=F.createContext({});function rQ(t,e,n,r,i){var b,x;const{visualElement:a}=F.useContext(Xp),s=F.useContext(M3),o=F.useContext(m1),c=F.useContext(N3).reducedMotion,u=F.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=F.useContext(B3);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&iQ(u.current,n,i,h);const p=F.useRef(!1);F.useInsertionEffect(()=>{d&&p.current&&d.update(n,o)});const y=n[U3],v=F.useRef(!!y&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,y))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,y)));return WY(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),N1.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),F.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,y)}),v.current=!1))}),d}function iQ(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:F3(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&nl(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function F3(t){if(t)return t.options.allowProjection!==!1?t.projection:F3(t.parent)}function aQ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&KX(t);function a(o,c){let u;const d={...F.useContext(N3),...o,layoutId:sQ(o)},{isStatic:h}=d,p=JX(o),y=r(o,h);if(!h&&h1){oQ();const v=lQ(d);u=v.MeasureLayout,p.visualElement=rQ(i,y,d,e,v.ProjectionNode)}return S.jsxs(Xp.Provider,{value:p,children:[u&&p.visualElement?S.jsx(u,{visualElement:p.visualElement,...d}):null,n(i,o,tQ(y,p.visualElement,c),y,h,p.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const s=F.forwardRef(a);return s[eQ]=i,s}function sQ({layoutId:t}){const e=F.useContext(V$).id;return e&&t!==void 0?e+"-"+t:t}function oQ(t,e){F.useContext(M3).strict}function lQ(t){const{drag:e,layout:n}=vl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const zc={};function uQ(t){for(const e in t)zc[e]=t[e],E1(e)&&(zc[e].isCSSVariable=!0)}function $3(t,{layout:e,layoutId:n}){return Ql.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!zc[t]||t==="opacity")}const cQ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fQ=Xl.length;function dQ(t,e,n){let r="",i=!0;for(let a=0;a<fQ;a++){const s=Xl[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=C3(o,P1[s]);if(!c){i=!1;const d=cQ[s]||s;r+=`${d}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function B1(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(Ql.has(c)){s=!0;continue}else if(E1(c)){i[c]=u;continue}else{const d=C3(u,P1[c]);c.startsWith("origin")?(o=!0,a[c]=d):r[c]=d}}if(e.transform||(s||n?r.transform=dQ(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const F1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function G3(t,e,n){for(const r in e)!kn(e[r])&&!$3(r,n)&&(t[r]=e[r])}function hQ({transformTemplate:t},e){return F.useMemo(()=>{const n=F1();return B1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function mQ(t,e){const n=t.style||{},r={};return G3(r,n,t),Object.assign(r,hQ(t,e)),r}function pQ(t,e){const n={},r=mQ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const gQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},yQ={offset:"strokeDashoffset",array:"strokeDasharray"};function vQ(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?gQ:yQ;t[a.offset]=Pe.transform(-r);const s=Pe.transform(e),o=Pe.transform(n);t[a.array]=`${s} ${o}`}function V3(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,d){if(B1(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&vQ(h,i,a,s,!1)}const q3=()=>({...F1(),attrs:{}}),H3=t=>typeof t=="string"&&t.toLowerCase()==="svg";function xQ(t,e,n,r){const i=F.useMemo(()=>{const a=q3();return V3(a,e,H3(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};G3(a,t.style,t),i.style={...a,...i.style}}return i}const bQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $1(t){return typeof t!="string"||t.includes("-")?!1:!!(bQ.indexOf(t)>-1||/[A-Z]/u.test(t))}function SQ(t=!1){return(n,r,i,{latestValues:a},s)=>{const c=($1(n)?xQ:pQ)(r,a,s,n),u=XX(r,typeof n=="string",t),d=n!==F.Fragment?{...u,...c,ref:i}:{},{children:h}=r,p=F.useMemo(()=>kn(h)?h.get():h,[h]);return F.createElement(n,{...d,children:p})}}function pD(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function G1(t,e,n,r){if(typeof e=="function"){const[i,a]=pD(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=pD(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function um(t){return kn(t)?t.get():t}function EQ({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:TQ(n,r,i,t),renderState:e()}}const z3=t=>(e,n)=>{const r=F.useContext(Xp),i=F.useContext(m1),a=()=>EQ(t,e,r,i);return n?a():YY(a)};function TQ(t,e,n,r){const i={},a=r(t,{});for(const p in a)i[p]=um(a[p]);let{initial:s,animate:o}=t;const c=Zp(t),u=j3(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?o:s;if(h&&typeof h!="boolean"&&!Qp(h)){const p=Array.isArray(h)?h:[h];for(let y=0;y<p.length;y++){const v=G1(t,p[y]);if(v){const{transitionEnd:b,transition:x,...T}=v;for(const _ in T){let A=T[_];if(Array.isArray(A)){const O=d?A.length-1:0;A=A[O]}A!==null&&(i[_]=A)}for(const _ in b)i[_]=b[_]}}}return i}function V1(t,e,n){var a;const{style:r}=t,i={};for(const s in r)(kn(r[s])||e.style&&kn(e.style[s])||$3(s,t)||((a=n==null?void 0:n.getValue(s))==null?void 0:a.liveStyle)!==void 0)&&(i[s]=r[s]);return i}const AQ={useVisualState:z3({scrapeMotionValuesFromProps:V1,createRenderState:F1})};function K3(t,e,n){const r=V1(t,e,n);for(const i in t)if(kn(t[i])||kn(e[i])){const a=Xl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const wQ={useVisualState:z3({scrapeMotionValuesFromProps:K3,createRenderState:q3})};function _Q(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...$1(r)?wQ:AQ,preloadedFeatures:t,useRender:SQ(i),createVisualElement:e,Component:r};return aQ(s)}}function Kc(t,e,n){const r=t.getProps();return G1(r,e,n!==void 0?n:r.custom,t)}const uT=t=>Array.isArray(t);function RQ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yl(n))}function OQ(t){return uT(t)?t[t.length-1]||0:t}function CQ(t,e){const n=Kc(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=OQ(a[s]);RQ(t,s,o)}}function LQ(t){return!!(kn(t)&&t.add)}function cT(t,e){const n=t.getValue("willChange");if(LQ(n))return n.add(e);if(!n&&aa.WillChange){const r=new aa.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Y3(t){return t.props[U3]}const DQ=t=>t!==null;function IQ(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(DQ),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const PQ={type:"spring",stiffness:500,damping:25,restSpeed:10},NQ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),MQ={type:"keyframes",duration:.8},kQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jQ=(t,{keyframes:e})=>e.length>2?MQ:Ql.has(t)?t.startsWith("scale")?NQ(e[1]):PQ:kQ;function UQ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const q1=(t,e,n,r={},i,a)=>s=>{const o=I1(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-xi(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:p=>{e.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};UQ(o)||Object.assign(d,jQ(t,d)),d.duration&&(d.duration=xi(d.duration)),d.repeatDelay&&(d.repeatDelay=xi(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(aa.instantAnimations||aa.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const p=IQ(d.keyframes,o);if(p!==void 0){Dt.update(()=>{d.onUpdate(p),d.onComplete()});return}}return o.isSync?new L1(d):new SX(d)};function BQ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function W3(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in o){const h=t.getValue(d,t.latestValues[d]??null),p=o[d];if(p===void 0||u&&BQ(u,d))continue;const y={delay:n,...I1(a||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===v&&!y.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const T=Y3(t);if(T){const _=window.MotionHandoffAnimation(T,d,Dt);_!==null&&(y.startTime=_,b=!0)}}cT(t,d),h.start(q1(d,h,p,t.shouldReduceMotion&&A3.has(d)?{type:!1}:y,t,b));const x=h.animation;x&&c.push(x)}return s&&Promise.all(c).then(()=>{Dt.update(()=>{s&&CQ(t,s)})}),c}function fT(t,e,n={}){var c;const r=Kc(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(W3(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return FQ(t,e,d+u,h,p,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,d]=o==="beforeChildren"?[a,s]:[s,a];return u().then(()=>d())}else return Promise.all([a(),s(n.delay)])}function FQ(t,e,n=0,r=0,i=1,a){const s=[],o=(t.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort($Q).forEach((u,d)=>{u.notify("AnimationStart",e),s.push(fT(u,e,{...a,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function $Q(t,e){return t.sortNodePosition(e)}function GQ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>fT(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=fT(t,e,n);else{const i=typeof e=="function"?Kc(t,e,n.custom):e;r=Promise.all(W3(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function X3(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const VQ=j1.length;function Q3(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Q3(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<VQ;n++){const r=j1[n],i=t.props[r];(Hc(i)||i===!1)&&(e[r]=i)}return e}const qQ=[...k1].reverse(),HQ=k1.length;function zQ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>GQ(t,n,r)))}function KQ(t){let e=zQ(t),n=gD(),r=!0;const i=c=>(u,d)=>{var p;const h=Kc(t,d,c==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:y,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,d=Q3(t.parent)||{},h=[],p=new Set;let y={},v=1/0;for(let x=0;x<HQ;x++){const T=qQ[x],_=n[T],A=u[T]!==void 0?u[T]:d[T],O=Hc(A),R=T===c?_.isActive:null;R===!1&&(v=x);let C=A===d[T]&&A!==u[T]&&O;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),_.protectedKeys={...y},!_.isActive&&R===null||!A&&!_.prevProp||Qp(A)||typeof A=="boolean")continue;const L=YQ(_.prevProp,A);let P=L||T===c&&_.isActive&&!C&&O||x>v&&O,N=!1;const k=Array.isArray(A)?A:[A];let M=k.reduce(i(T),{});R===!1&&(M={});const{prevResolvedValues:G={}}=_,K={...G,...M},W=$=>{P=!0,p.has($)&&(N=!0,p.delete($)),_.needsAnimating[$]=!0;const q=t.getValue($);q&&(q.liveStyle=!1)};for(const $ in K){const q=M[$],Z=G[$];if(y.hasOwnProperty($))continue;let B=!1;uT(q)&&uT(Z)?B=!X3(q,Z):B=q!==Z,B?q!=null?W($):p.add($):q!==void 0&&p.has($)?W($):_.protectedKeys[$]=!0}_.prevProp=A,_.prevResolvedValues=M,_.isActive&&(y={...y,...M}),r&&t.blockInitialAnimation&&(P=!1),P&&(!(C&&L)||N)&&h.push(...k.map($=>({animation:$,options:{type:T}})))}if(p.size){const x={};if(typeof u.initial!="boolean"){const T=Kc(t,Array.isArray(u.initial)?u.initial[0]:u.initial);T&&T.transition&&(x.transition=T.transition)}p.forEach(T=>{const _=t.getBaseTarget(T),A=t.getValue(T);A&&(A.liveStyle=!0),x[T]=_??null}),h.push({animation:x})}let b=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(h):Promise.resolve()}function o(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var y;return(y=p.animationState)==null?void 0:y.setActive(c,u)}),n[c].isActive=u;const d=s(c);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=gD(),r=!0}}}function YQ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!X3(e,t):!1}function _s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gD(){return{animate:_s(!0),whileInView:_s(),whileHover:_s(),whileTap:_s(),whileDrag:_s(),whileFocus:_s(),exit:_s()}}class es{constructor(e){this.isMounted=!1,this.node=e}update(){}}class WQ extends es{constructor(e){super(e),e.animationState||(e.animationState=KQ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Qp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let XQ=0;class QQ extends es{constructor(){super(...arguments),this.id=XQ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ZQ={animation:{Feature:WQ},exit:{Feature:QQ}};function Yc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Kf(t){return{point:{x:t.pageX,y:t.pageY}}}const JQ=t=>e=>M1(e)&&t(e,Kf(e));function Oc(t,e,n,r){return Yc(t,e,JQ(n),r)}function Z3({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function eZ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function tZ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const J3=1e-4,nZ=1-J3,rZ=1+J3,e4=.01,iZ=0-e4,aZ=0+e4;function Bn(t){return t.max-t.min}function sZ(t,e,n){return Math.abs(t-e)<=n}function yD(t,e,n,r=.5){t.origin=r,t.originPoint=Lt(e.min,e.max,t.origin),t.scale=Bn(n)/Bn(e),t.translate=Lt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=nZ&&t.scale<=rZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=iZ&&t.translate<=aZ||isNaN(t.translate))&&(t.translate=0)}function Cc(t,e,n,r){yD(t.x,e.x,n.x,r?r.originX:void 0),yD(t.y,e.y,n.y,r?r.originY:void 0)}function vD(t,e,n){t.min=n.min+e.min,t.max=t.min+Bn(e)}function oZ(t,e,n){vD(t.x,e.x,n.x),vD(t.y,e.y,n.y)}function xD(t,e,n){t.min=e.min-n.min,t.max=t.min+Bn(e)}function Lc(t,e,n){xD(t.x,e.x,n.x),xD(t.y,e.y,n.y)}const bD=()=>({translate:0,scale:1,origin:0,originPoint:0}),rl=()=>({x:bD(),y:bD()}),SD=()=>({min:0,max:0}),Bt=()=>({x:SD(),y:SD()});function Rr(t){return[t("x"),t("y")]}function pv(t){return t===void 0||t===1}function dT({scale:t,scaleX:e,scaleY:n}){return!pv(t)||!pv(e)||!pv(n)}function Ls(t){return dT(t)||t4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function t4(t){return ED(t.x)||ED(t.y)}function ED(t){return t&&t!=="0%"}function Im(t,e,n){const r=t-n,i=e*r;return n+i}function TD(t,e,n,r,i){return i!==void 0&&(t=Im(t,i,r)),Im(t,n,r)+e}function hT(t,e=0,n=1,r,i){t.min=TD(t.min,e,n,r,i),t.max=TD(t.max,e,n,r,i)}function n4(t,{x:e,y:n}){hT(t.x,e.translate,e.scale,e.originPoint),hT(t.y,n.translate,n.scale,n.originPoint)}const AD=.999999999999,wD=1.0000000000001;function lZ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&al(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,n4(t,s)),r&&Ls(a.latestValues)&&al(t,a.latestValues))}e.x<wD&&e.x>AD&&(e.x=1),e.y<wD&&e.y>AD&&(e.y=1)}function il(t,e){t.min=t.min+e,t.max=t.max+e}function _D(t,e,n,r,i=.5){const a=Lt(t.min,t.max,i);hT(t,e,n,a,r)}function al(t,e){_D(t.x,e.x,e.scaleX,e.scale,e.originX),_D(t.y,e.y,e.scaleY,e.scale,e.originY)}function r4(t,e){return Z3(tZ(t.getBoundingClientRect(),e))}function uZ(t,e,n){const r=r4(t,n),{scroll:i}=e;return i&&(il(r.x,i.offset.x),il(r.y,i.offset.y)),r}const i4=({current:t})=>t?t.ownerDocument.defaultView:null,RD=(t,e)=>Math.abs(t-e);function cZ(t,e){const n=RD(t.x,e.x),r=RD(t.y,e.y);return Math.sqrt(n**2+r**2)}class a4{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=yv(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=cZ(h.offset,{x:0,y:0})>=3;if(!p&&!y)return;const{point:v}=h,{timestamp:b}=An;this.history.push({...v,timestamp:b});const{onStart:x,onMove:T}=this.handlers;p||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=gv(p,this.transformPagePoint),Dt.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=yv(h.type==="pointercancel"?this.lastMoveEventInfo:gv(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,x),v&&v(h,x)},!M1(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Kf(e),o=gv(s,this.transformPagePoint),{point:c}=o,{timestamp:u}=An;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,yv(o,this.history)),this.removeListeners=qf(Oc(this.contextWindow,"pointermove",this.handlePointerMove),Oc(this.contextWindow,"pointerup",this.handlePointerUp),Oc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xa(this.updatePoint)}}function gv(t,e){return e?{point:e(t.point)}:t}function OD(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yv({point:t},e){return{point:t,delta:OD(t,s4(e)),offset:OD(t,fZ(e)),velocity:dZ(e,.1)}}function fZ(t){return t[0]}function s4(t){return t[t.length-1]}function dZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=s4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>xi(e)));)n--;if(!r)return{x:0,y:0};const a=bi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function hZ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Lt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Lt(n,t,r.max):Math.min(t,n)),t}function CD(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function mZ(t,{top:e,left:n,bottom:r,right:i}){return{x:CD(t.x,n,i),y:CD(t.y,e,r)}}function LD(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function pZ(t,e){return{x:LD(t.x,e.x),y:LD(t.y,e.y)}}function gZ(t,e){let n=.5;const r=Bn(t),i=Bn(e);return i>r?n=Gc(e.min,e.max-r,t.min):r>i&&(n=Gc(t.min,t.max-i,e.min)),ia(0,1,n)}function yZ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const mT=.35;function vZ(t=mT){return t===!1?t=0:t===!0&&(t=mT),{x:DD(t,"left","right"),y:DD(t,"top","bottom")}}function DD(t,e,n){return{min:ID(t,e),max:ID(t,n)}}function ID(t,e){return typeof t=="number"?t:t[e]||0}const xZ=new WeakMap;class bZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Kf(d).point)},a=(d,h)=>{const{drag:p,dragPropagation:y,onDragStart:v}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jX(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rr(x=>{let T=this.getAxisMotionValue(x).get()||0;if(Si.test(T)){const{projection:_}=this.visualElement;if(_&&_.layout){const A=_.layout.layoutBox[x];A&&(T=Bn(A)*(parseFloat(T)/100))}}this.originPoint[x]=T}),v&&Dt.postRender(()=>v(d,h)),cT(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:v,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=h;if(y&&this.currentDirection===null){this.currentDirection=SZ(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),b&&b(d,h)},o=(d,h)=>this.stop(d,h),c=()=>Rr(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new a4(e,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:i4(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Dt.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wh(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=hZ(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&nl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=mZ(r.layoutBox,e):this.constraints=!1,this.elastic=vZ(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Rr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=yZ(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=uZ(r,i.root,this.visualElement.getTransformPagePoint());let s=pZ(i.layout.layoutBox,a);if(n){const o=n(eZ(s));this.hasMutatedConstraints=!!o,o&&(s=Z3(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Rr(d=>{if(!wh(d,n,this.currentDirection))return;let h=c&&c[d]||{};s&&(h={min:0,max:0});const p=i?200:1e6,y=i?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return cT(this.visualElement,e),r.start(q1(e,r,0,n,this.visualElement,!1))}stopAnimation(){Rr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Rr(n=>{const{drag:r}=this.getProps();if(!wh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Lt(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!nl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Rr(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=gZ({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rr(s=>{if(!wh(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(Lt(c,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;xZ.set(this.visualElement,this);const e=this.visualElement.current,n=Oc(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();nl(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Dt.read(r);const s=Yc(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Rr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=mT,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function wh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function SZ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class EZ extends es{constructor(e){super(e),this.removeGroupControls=Dr,this.removeListeners=Dr,this.controls=new bZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dr}unmount(){this.removeGroupControls(),this.removeListeners()}}const PD=t=>(e,n)=>{t&&Dt.postRender(()=>t(e,n))};class TZ extends es{constructor(){super(...arguments),this.removePointerDownListener=Dr}onPointerDown(e){this.session=new a4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:i4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:PD(e),onStart:PD(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Dt.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Oc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ND(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const uc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Pe.test(t))t=parseFloat(t);else return t;const n=ND(t,e.target.x),r=ND(t,e.target.y);return`${n}% ${r}%`}},AZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Qa.parse(t);if(i.length>5)return r;const a=Qa.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=Lt(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class wZ extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;uQ(_Z),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),cm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Dt.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),N1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function o4(t){const[e,n]=zX(),r=F.useContext(V$);return S.jsx(wZ,{...t,layoutGroup:r,switchLayoutGroup:F.useContext(B3),isPresent:e,safeToRemove:n})}const _Z={borderRadius:{...uc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uc,borderTopRightRadius:uc,borderBottomLeftRadius:uc,borderBottomRightRadius:uc,boxShadow:AZ};function RZ(t,e,n){const r=kn(t)?t:yl(t);return r.start(q1("",r,e,n)),r.animation}const OZ=(t,e)=>t.depth-e.depth;class CZ{constructor(){this.children=[],this.isDirty=!1}add(e){p1(this.children,e),this.isDirty=!0}remove(e){g1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(OZ),this.isDirty=!1,this.children.forEach(e)}}function LZ(t,e){const n=Yn.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Xa(r),t(a-e))};return Dt.setup(r,!0),()=>Xa(r)}const l4=["TopLeft","TopRight","BottomLeft","BottomRight"],DZ=l4.length,MD=t=>typeof t=="string"?parseFloat(t):t,kD=t=>typeof t=="number"||Pe.test(t);function IZ(t,e,n,r,i,a){i?(t.opacity=Lt(0,n.opacity??1,PZ(r)),t.opacityExit=Lt(e.opacity??1,0,NZ(r))):a&&(t.opacity=Lt(e.opacity??1,n.opacity??1,r));for(let s=0;s<DZ;s++){const o=`border${l4[s]}Radius`;let c=jD(e,o),u=jD(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||kD(c)===kD(u)?(t[o]=Math.max(Lt(MD(c),MD(u),r),0),(Si.test(u)||Si.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Lt(e.rotate||0,n.rotate||0,r))}function jD(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const PZ=u4(0,.5,e3),NZ=u4(.5,.95,Dr);function u4(t,e,n){return r=>r<t?0:r>e?1:n(Gc(t,e,r))}function UD(t,e){t.min=e.min,t.max=e.max}function Er(t,e){UD(t.x,e.x),UD(t.y,e.y)}function BD(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function FD(t,e,n,r,i){return t-=e,t=Im(t,1/n,r),i!==void 0&&(t=Im(t,1/i,r)),t}function MZ(t,e=0,n=1,r=.5,i,a=t,s=t){if(Si.test(e)&&(e=parseFloat(e),e=Lt(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Lt(a.min,a.max,r);t===a&&(o-=e),t.min=FD(t.min,e,n,o,i),t.max=FD(t.max,e,n,o,i)}function $D(t,e,[n,r,i],a,s){MZ(t,e[n],e[r],e[i],e.scale,a,s)}const kZ=["x","scaleX","originX"],jZ=["y","scaleY","originY"];function GD(t,e,n,r){$D(t.x,e,kZ,n?n.x:void 0,r?r.x:void 0),$D(t.y,e,jZ,n?n.y:void 0,r?r.y:void 0)}function VD(t){return t.translate===0&&t.scale===1}function c4(t){return VD(t.x)&&VD(t.y)}function qD(t,e){return t.min===e.min&&t.max===e.max}function UZ(t,e){return qD(t.x,e.x)&&qD(t.y,e.y)}function HD(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function f4(t,e){return HD(t.x,e.x)&&HD(t.y,e.y)}function zD(t){return Bn(t.x)/Bn(t.y)}function KD(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class BZ{constructor(){this.members=[]}add(e){p1(this.members,e),e.scheduleRender()}remove(e){if(g1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function FZ(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:p,skewX:y,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),y&&(r+=`skewX(${y}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const vv=["","X","Y","Z"],$Z={visibility:"hidden"},GZ=1e3;let VZ=0;function xv(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function d4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Y3(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Dt,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&d4(r)}function h4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=VZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(zZ),this.nodes.forEach(QZ),this.nodes.forEach(ZZ),this.nodes.forEach(KZ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new CZ)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new x1),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=P3(s)&&!VX(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=LZ(h,250),cm.hasAnimatedSinceResize&&(cm.hasAnimatedSinceResize=!1,this.nodes.forEach(WD))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||rJ,{onLayoutAnimationStart:b,onLayoutAnimationComplete:x}=u.getProps(),T=!this.targetLayout||!f4(this.targetLayout,y),_=!h&&p;if(this.options.layoutRoot||this.resumeFrom||_||h&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...I1(v,"layout"),onPlay:b,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(d,_)}else h||WD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JZ),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&d4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YD);return}this.isUpdating||this.nodes.forEach(WZ),this.isUpdating=!1,this.nodes.forEach(XZ),this.nodes.forEach(qZ),this.nodes.forEach(HZ),this.clearAllSnapshots();const o=Yn.now();An.delta=ia(0,1e3/60,o-An.timestamp),An.timestamp=o,An.isProcessing=!0,uv.update.process(An),uv.preRender.process(An),uv.render.process(An),An.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,N1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YZ),this.sharedNodes.forEach(eJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bn(this.snapshot.measuredBox.x)&&!Bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!c4(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||Ls(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),iJ(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return Bt();const o=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(aJ))){const{scroll:d}=this.root;d&&(il(o.x,d.offset.x),il(o.y,d.offset.y))}return o}removeElementScroll(s){var c;const o=Bt();if(Er(o,s),(c=this.scroll)!=null&&c.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Er(o,s),il(o.x,h.offset.x),il(o.y,h.offset.y))}return o}applyTransform(s,o=!1){const c=Bt();Er(c,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&al(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ls(d.latestValues)&&al(c,d.latestValues)}return Ls(this.latestValues)&&al(c,this.latestValues),c}removeTransform(s){const o=Bt();Er(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ls(u.latestValues))continue;dT(u.latestValues)&&u.updateSnapshot();const d=Bt(),h=u.measurePageBox();Er(d,h),GD(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Ls(this.latestValues)&&GD(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==An.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=An.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),Lc(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Bt(),this.targetWithTransforms=Bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Er(this.target,this.layout.layoutBox),n4(this.target,this.targetDelta)):Er(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),Lc(this.relativeTargetOrigin,this.target,y.target),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||dT(this.parent.latestValues)||t4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===An.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Er(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;lZ(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Bt());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(BD(this.prevProjectionDelta.x,this.projectionDelta.x),BD(this.prevProjectionDelta.y,this.projectionDelta.y)),Cc(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!KD(this.projectionDelta.x,this.prevProjectionDelta.x)||!KD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rl(),this.projectionDelta=rl(),this.projectionDeltaWithTransform=rl()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=rl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=Bt(),y=c?c.source:void 0,v=this.layout?this.layout.source:void 0,b=y!==v,x=this.getStack(),T=!x||x.members.length<=1,_=!!(b&&!T&&this.options.crossfade===!0&&!this.path.some(nJ));this.animationProgress=0;let A;this.mixTargetDelta=O=>{const R=O/1e3;XD(h.x,s.x,R),XD(h.y,s.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tJ(this.relativeTarget,this.relativeTargetOrigin,p,R),A&&UZ(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Bt()),Er(A,this.relativeTarget)),b&&(this.animationValues=d,IZ(d,u,this.latestValues,R,_,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,c,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Xa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dt.update(()=>{cm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yl(0)),this.currentAnimation=RZ(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),s.onUpdate&&s.onUpdate(d)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GZ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&m4(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Bt();const h=Bn(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const p=Bn(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+p}Er(o,c),al(o,d),Cc(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new BZ),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&xv("z",s,u,this.animationValues);for(let d=0;d<vv.length;d++)xv(`rotate${vv[d]}`,s,u,this.animationValues),xv(`skew${vv[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}getProjectionStyles(s){if(!this.instance||this.isSVG)return;if(!this.isVisible)return $Z;const o={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=um(s==null?void 0:s.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none",o;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=um(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Ls(this.latestValues)&&(y.transform=c?c({},""):"none",this.hasProjected=!1),y}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),o.transform=FZ(this.projectionDeltaWithTransform,this.treeScale,d),c&&(o.transform=c(d,o.transform));const{x:h,y:p}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in zc){if(d[y]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:x}=zc[y],T=o.transform==="none"?d[y]:v(d[y],u);if(b){const _=b.length;for(let A=0;A<_;A++)o[b[A]]=T}else x?this.options.visualElement.renderState.vars[y]=T:o[y]=T}return this.options.layoutId&&(o.pointerEvents=u===this?um(s==null?void 0:s.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(YD),this.root.sharedNodes.clear()}}}function qZ(t){t.updateLayout()}function HZ(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=e.source!==t.layout.source;a==="size"?Rr(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],y=Bn(p);p.min=r[h].min,p.max=p.min+y}):m4(a,e.layoutBox,r)&&Rr(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],y=Bn(r[h]);p.max=p.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+y)});const o=rl();Cc(o,r,e.layoutBox);const c=rl();s?Cc(c,t.applyTransform(i,!0),e.measuredBox):Cc(c,r,e.layoutBox);const u=!c4(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:y}=h;if(p&&y){const v=Bt();Lc(v,e.layoutBox,p.layoutBox);const b=Bt();Lc(b,r,y.layoutBox),f4(v,b)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function zZ(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function KZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function YZ(t){t.clearSnapshot()}function YD(t){t.clearMeasurements()}function WZ(t){t.isLayoutDirty=!1}function XZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function WD(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function QZ(t){t.resolveTargetDelta()}function ZZ(t){t.calcProjection()}function JZ(t){t.resetSkewAndRotation()}function eJ(t){t.removeLeadSnapshot()}function XD(t,e,n){t.translate=Lt(e.translate,0,n),t.scale=Lt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function QD(t,e,n,r){t.min=Lt(e.min,n.min,r),t.max=Lt(e.max,n.max,r)}function tJ(t,e,n,r){QD(t.x,e.x,n.x,r),QD(t.y,e.y,n.y,r)}function nJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const rJ={duration:.45,ease:[.4,0,.1,1]},ZD=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),JD=ZD("applewebkit/")&&!ZD("chrome/")?Math.round:Dr;function eI(t){t.min=JD(t.min),t.max=JD(t.max)}function iJ(t){eI(t.x),eI(t.y)}function m4(t,e,n){return t==="position"||t==="preserve-aspect"&&!sZ(zD(e),zD(n),.2)}function aJ(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const sJ=h4({attachResizeListener:(t,e)=>Yc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bv={current:void 0},p4=h4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!bv.current){const t=new sJ({});t.mount(window),t.setOptions({layoutScroll:!0}),bv.current=t}return bv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),oJ={pan:{Feature:TZ},drag:{Feature:EZ,ProjectionNode:p4,MeasureLayout:o4}};function tI(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Dt.postRender(()=>a(e,Kf(e)))}class lJ extends es{mount(){const{current:e}=this.node;e&&(this.unmount=UX(e,(n,r)=>(tI(this.node,r,"Start"),i=>tI(this.node,i,"End"))))}unmount(){}}class uJ extends es{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qf(Yc(this.node.current,"focus",()=>this.onFocus()),Yc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nI(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Dt.postRender(()=>a(e,Kf(e)))}class cJ extends es{mount(){const{current:e}=this.node;e&&(this.unmount=GX(e,(n,r)=>(nI(this.node,r,"Start"),(i,{success:a})=>nI(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const pT=new WeakMap,Sv=new WeakMap,fJ=t=>{const e=pT.get(t.target);e&&e(t)},dJ=t=>{t.forEach(fJ)};function hJ({root:t,...e}){const n=t||document;Sv.has(n)||Sv.set(n,{});const r=Sv.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(dJ,{root:t,...e})),r[i]}function mJ(t,e,n){const r=hJ(e);return pT.set(t,n),r.observe(t),()=>{pT.delete(t),r.unobserve(t)}}const pJ={some:0,all:1};class gJ extends es{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:pJ[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=u?d:h;p&&p(c)};return mJ(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(yJ(e,n))&&this.startObserver()}unmount(){}}function yJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const vJ={inView:{Feature:gJ},tap:{Feature:cJ},focus:{Feature:uJ},hover:{Feature:lJ}},xJ={layout:{ProjectionNode:p4,MeasureLayout:o4}},gT={current:null},g4={current:!1};function bJ(){if(g4.current=!0,!!h1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>gT.current=t.matches;t.addListener(e),e()}else gT.current=!1}const SJ=new WeakMap;function EJ(t,e,n){for(const r in e){const i=e[r],a=n[r];if(kn(i))t.addValue(r,i);else if(kn(a))t.addValue(r,yl(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,yl(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const rI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class TJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=D1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Yn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Dt.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Zp(n),this.isVariantNode=j3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const y=h[p];c[p]!==void 0&&kn(y)&&y.set(c[p],!1)}}mount(e){this.current=e,SJ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),g4.current||bJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gT.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Xa(this.notifyUpdate),Xa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ql.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Dt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vl){const n=vl[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<rI.length;r++){const i=rI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=EJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(q$(r)||z$(r))?r=parseFloat(r):!HX(r)&&Qa.test(n)&&(r=O3(e,n)),this.setBaseTarget(e,kn(r)?r.get():r)),kn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=G1(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!kn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new x1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class y4 extends TJ{constructor(){super(...arguments),this.KeyframeResolver=PX}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;kn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function v4(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}function AJ(t){return window.getComputedStyle(t)}class wJ extends y4{constructor(){super(...arguments),this.type="html",this.renderInstance=v4}readValueFromInstance(e,n){var r;if(Ql.has(n))return(r=this.projection)!=null&&r.isProjecting?rT(n):ZW(e,n);{const i=AJ(e),a=(E1(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return r4(e,n)}build(e,n,r){B1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return V1(e,n,r)}}const x4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _J(t,e,n,r){v4(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(x4.has(i)?i:U1(i),e.attrs[i])}class RJ extends y4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ql.has(n)){const r=R3(n);return r&&r.default||0}return n=x4.has(n)?n:U1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return K3(e,n,r)}build(e,n,r){V3(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){_J(e,n,r,i)}mount(e){this.isSVGTag=H3(e.tagName),super.mount(e)}}const OJ=(t,e)=>$1(t)?new RJ(e):new wJ(e,{allowProjection:t!==F.Fragment}),CJ=_Q({...ZQ,...vJ,...oJ,...xJ},OJ),iI=QX(CJ),LJ=({className:t="w-6 h-6",...e})=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),DJ=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})}),IJ=()=>{const[t,e]=F.useState(""),[n,r]=F.useState(""),[i,a]=F.useState(!1),s=an(),o=rn(),{loading:c,error:u}=sn(h=>h.auth),d=async h=>{h.preventDefault();try{await s(zY({email:t,password:n})),o("/dashboard")}catch(p){console.error("Login failed:",p)}};return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:S.jsxs(iI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-gray-100",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),S.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Welcome Back"}),S.jsx("p",{className:"text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),S.jsxs("form",{onSubmit:d,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),S.jsx("div",{className:"relative",children:S.jsx("input",{type:"email",id:"email",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"you@example.com",value:t,onChange:h=>e(h.target.value),required:!0})})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:i?"text":"password",id:"password",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 pr-12",placeholder:"••••••••",value:n,onChange:h=>r(h.target.value),required:!0}),S.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>a(!i),children:i?S.jsx(DJ,{className:"h-5 w-5"}):S.jsx(LJ,{className:"h-5 w-5"})})]})]}),u&&S.jsx(iI.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0",children:S.jsx("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),S.jsx("div",{className:"ml-3",children:S.jsx("p",{className:"text-sm text-red-700",children:u.message||"Invalid credentials. Please try again."})})]})}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),S.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),S.jsx("div",{className:"text-sm",children:S.jsx("a",{href:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot password?"})})]}),S.jsx("div",{children:S.jsx("button",{type:"submit",disabled:c,className:`w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 ${c?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:c?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"animate-spin h-5 w-5 mr-2"}),"Signing in..."]}):"Sign in"})})]}),S.jsxs("div",{className:"mt-6",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-300"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),S.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[S.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:S.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0110 4.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.933.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.14 18.163 20 14.418 20 10c0-5.523-4.477-10-10-10z",clipRule:"evenodd"})})}),S.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:S.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10c0 5.523 4.477 10 10 10 5.523 0 10-4.477 10-10 0-5.523-4.477-10-10-10zm5 10a5 5 0 11-10 0 5 5 0 0110 0z",clipRule:"evenodd"})})})]})]})]})})},PJ=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})}),NJ=({toggleSidebar:t})=>{const e=an(),n=rn(),r=sn(a=>a.auth.user),i=()=>{e(G$()),n("/login")};return S.jsxs("header",{className:"top-0 left-0 right-0 z-40 bg-gradient-to-r from-gray-800 to-gray-900 text-white shadow-lg p-4 flex items-center justify-between h-16",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("button",{className:"md:hidden p-2 text-white bg-gray-700 rounded-md mr-3",onClick:t,children:S.jsx(PJ,{})}),S.jsx("span",{className:"text-2xl font-extrabold tracking-tight cursor-pointer hover:text-blue-300 transition-colors duration-200",onClick:()=>n("/"),children:"AdminPanel"})]}),S.jsxs("div",{className:"flex items-center space-x-4",children:[r&&S.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden md:inline",children:["Welcome, ",r.name||r.email||"Admin","!"]}),S.jsx("button",{onClick:i,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm font-semibold transition-all duration-300 ease-in-out transform hover:scale-105 shadow-md",children:"Logout"})]})]})},MJ=({className:t="w-6 h-6 ",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),kJ=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),jJ=({className:t="w-6 h-6",...e})=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-table-of-contents-icon lucide-table-of-contents",children:[S.jsx("path",{d:"M16 12H3"}),S.jsx("path",{d:"M16 18H3"}),S.jsx("path",{d:"M16 6H3"}),S.jsx("path",{d:"M21 12h.01"}),S.jsx("path",{d:"M21 18h.01"}),S.jsx("path",{d:"M21 6h.01"})]}),aI=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"})}),sI=({className:t="w-6 h-6",...e})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#e3e3e3",children:S.jsx("path",{d:"m380-340 280-180-280-180v360Zm-60 220v-80H160q-33 0-56.5-23.5T80-280v-480q0-33 23.5-56.5T160-840h640q33 0 56.5 23.5T880-760v480q0 33-23.5 56.5T800-200H640v80H320ZM160-280h640v-480H160v480Zm0 0v-480 480Z"})}),UJ=({isOpen:t,setIsOpen:e})=>S.jsxs(S.Fragment,{children:[S.jsxs("aside",{className:`
          fixed inset-y-0 left-0 bg-gray-900 text-white w-64 p-4
          transform ${t?"translate-x-0":"-translate-x-full"}
          md:translate-x-0 md:relative md:flex-shrink-0
          transition-transform duration-300 ease-in-out z-40
        `,children:[S.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Menu"}),S.jsx("nav",{children:S.jsxs("ul",{children:[S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/dashboard",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(MJ,{})," ",S.jsx("span",{className:"ml-2",children:"Dashboard"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/devices",className:"flex items-center px-4 py-2 pr-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(kJ,{className:"pr-21 mr-5"}),S.jsx("span",{className:"ml-2",children:"Devices"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/contents",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(jJ,{})," ",S.jsx("span",{className:"ml-2",children:"Contents"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/subscriptions",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(aI,{})," ",S.jsx("span",{className:"ml-2",children:"Subscriptions"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/sport",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(sI,{})," ",S.jsx("span",{className:"ml-2",children:"Sport"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/suggestions",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(aI,{})," ",S.jsx("span",{className:"ml-2",children:"Suggestions"})]})}),S.jsx("li",{className:"mb-2",children:S.jsxs(hi,{to:"/livesports",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[S.jsx(sI,{})," ",S.jsx("span",{className:"ml-2",children:"Live and Sport"})]})})]})})]}),t&&S.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 md:hidden",onClick:()=>e(!1)})]}),BJ=({children:t})=>{const[e,n]=F.useState(!1),r=()=>{n(!e)};return S.jsx(S.Fragment,{children:S.jsxs("div",{className:"flex flex-col min-h-screen",children:[S.jsx(NJ,{toggleSidebar:r}),S.jsxs("div",{className:"flex flex-1",children:[S.jsx(UJ,{isOpen:e,setIsOpen:n}),S.jsxs("main",{className:"flex-1 bg-gray-50 overflow-auto",children:[t," "]})]})]})})},FJ=()=>sn(e=>e.auth.isAuthenticated)?S.jsx(BJ,{children:S.jsx(pz,{})}):S.jsx(mz,{to:"/login",replace:!0}),$J=async(t="week")=>{var e,n;try{return(await Je.get(`/overview?time_range=${t}`)).data}catch(r){throw console.error("Error fetching overview data:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},GJ=t=>async e=>{e({type:_F});try{const n=await $J(t);e({type:RF,payload:n})}catch(n){e({type:OF,payload:n})}},VJ=t=>({type:CF,payload:t});function b4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=b4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function et(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=b4(t))&&(r&&(r+=" "),r+=e);return r}var Ev,oI;function Zn(){if(oI)return Ev;oI=1;var t=Array.isArray;return Ev=t,Ev}var Tv,lI;function S4(){if(lI)return Tv;lI=1;var t=typeof bh=="object"&&bh&&bh.Object===Object&&bh;return Tv=t,Tv}var Av,uI;function _i(){if(uI)return Av;uI=1;var t=S4(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Av=n,Av}var wv,cI;function Yf(){if(cI)return wv;cI=1;var t=_i(),e=t.Symbol;return wv=e,wv}var _v,fI;function qJ(){if(fI)return _v;fI=1;var t=Yf(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(s){var o=n.call(s,i),c=s[i];try{s[i]=void 0;var u=!0}catch{}var d=r.call(s);return u&&(o?s[i]=c:delete s[i]),d}return _v=a,_v}var Rv,dI;function HJ(){if(dI)return Rv;dI=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return Rv=n,Rv}var Ov,hI;function da(){if(hI)return Ov;hI=1;var t=Yf(),e=qJ(),n=HJ(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?e(o):n(o)}return Ov=s,Ov}var Cv,mI;function ha(){if(mI)return Cv;mI=1;function t(e){return e!=null&&typeof e=="object"}return Cv=t,Cv}var Lv,pI;function Zl(){if(pI)return Lv;pI=1;var t=da(),e=ha(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return Lv=r,Lv}var Dv,gI;function H1(){if(gI)return Dv;gI=1;var t=Zn(),e=Zl(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(t(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return Dv=i,Dv}var Iv,yI;function ts(){if(yI)return Iv;yI=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return Iv=t,Iv}var Pv,vI;function z1(){if(vI)return Pv;vI=1;var t=da(),e=ts(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var c=t(o);return c==r||c==i||c==n||c==a}return Pv=s,Pv}var Nv,xI;function zJ(){if(xI)return Nv;xI=1;var t=_i(),e=t["__core-js_shared__"];return Nv=e,Nv}var Mv,bI;function KJ(){if(bI)return Mv;bI=1;var t=zJ(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return Mv=n,Mv}var kv,SI;function E4(){if(SI)return kv;SI=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return kv=n,kv}var jv,EI;function YJ(){if(EI)return jv;EI=1;var t=z1(),e=KJ(),n=ts(),r=E4(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,c=s.toString,u=o.hasOwnProperty,d=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!n(p)||e(p))return!1;var y=t(p)?d:a;return y.test(r(p))}return jv=h,jv}var Uv,TI;function WJ(){if(TI)return Uv;TI=1;function t(e,n){return e==null?void 0:e[n]}return Uv=t,Uv}var Bv,AI;function to(){if(AI)return Bv;AI=1;var t=YJ(),e=WJ();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return Bv=n,Bv}var Fv,wI;function Jp(){if(wI)return Fv;wI=1;var t=to(),e=t(Object,"create");return Fv=e,Fv}var $v,_I;function XJ(){if(_I)return $v;_I=1;var t=Jp();function e(){this.__data__=t?t(null):{},this.size=0}return $v=e,$v}var Gv,RI;function QJ(){if(RI)return Gv;RI=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Gv=t,Gv}var Vv,OI;function ZJ(){if(OI)return Vv;OI=1;var t=Jp(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(t){var o=s[a];return o===e?void 0:o}return r.call(s,a)?s[a]:void 0}return Vv=i,Vv}var qv,CI;function JJ(){if(CI)return qv;CI=1;var t=Jp(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return qv=r,qv}var Hv,LI;function eee(){if(LI)return Hv;LI=1;var t=Jp(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return Hv=n,Hv}var zv,DI;function tee(){if(DI)return zv;DI=1;var t=XJ(),e=QJ(),n=ZJ(),r=JJ(),i=eee();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,zv=a,zv}var Kv,II;function nee(){if(II)return Kv;II=1;function t(){this.__data__=[],this.size=0}return Kv=t,Kv}var Yv,PI;function K1(){if(PI)return Yv;PI=1;function t(e,n){return e===n||e!==e&&n!==n}return Yv=t,Yv}var Wv,NI;function eg(){if(NI)return Wv;NI=1;var t=K1();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return Wv=e,Wv}var Xv,MI;function ree(){if(MI)return Xv;MI=1;var t=eg(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return Xv=r,Xv}var Qv,kI;function iee(){if(kI)return Qv;kI=1;var t=eg();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return Qv=e,Qv}var Zv,jI;function aee(){if(jI)return Zv;jI=1;var t=eg();function e(n){return t(this.__data__,n)>-1}return Zv=e,Zv}var Jv,UI;function see(){if(UI)return Jv;UI=1;var t=eg();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return Jv=e,Jv}var ex,BI;function tg(){if(BI)return ex;BI=1;var t=nee(),e=ree(),n=iee(),r=aee(),i=see();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ex=a,ex}var tx,FI;function Y1(){if(FI)return tx;FI=1;var t=to(),e=_i(),n=t(e,"Map");return tx=n,tx}var nx,$I;function oee(){if($I)return nx;$I=1;var t=tee(),e=tg(),n=Y1();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return nx=r,nx}var rx,GI;function lee(){if(GI)return rx;GI=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return rx=t,rx}var ix,VI;function ng(){if(VI)return ix;VI=1;var t=lee();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return ix=e,ix}var ax,qI;function uee(){if(qI)return ax;qI=1;var t=ng();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return ax=e,ax}var sx,HI;function cee(){if(HI)return sx;HI=1;var t=ng();function e(n){return t(this,n).get(n)}return sx=e,sx}var ox,zI;function fee(){if(zI)return ox;zI=1;var t=ng();function e(n){return t(this,n).has(n)}return ox=e,ox}var lx,KI;function dee(){if(KI)return lx;KI=1;var t=ng();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return lx=e,lx}var ux,YI;function W1(){if(YI)return ux;YI=1;var t=oee(),e=uee(),n=cee(),r=fee(),i=dee();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ux=a,ux}var cx,WI;function T4(){if(WI)return cx;WI=1;var t=W1(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],c=a.cache;if(c.has(o))return c.get(o);var u=r.apply(this,s);return a.cache=c.set(o,u)||c,u};return a.cache=new(n.Cache||t),a}return n.Cache=t,cx=n,cx}var fx,XI;function hee(){if(XI)return fx;XI=1;var t=T4(),e=500;function n(r){var i=t(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return fx=n,fx}var dx,QI;function mee(){if(QI)return dx;QI=1;var t=hee(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,c,u){a.push(c?u.replace(n,"$1"):o||s)}),a});return dx=r,dx}var hx,ZI;function X1(){if(ZI)return hx;ZI=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return hx=t,hx}var mx,JI;function pee(){if(JI)return mx;JI=1;var t=Yf(),e=X1(),n=Zn(),r=Zl(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return e(o,s)+"";if(r(o))return a?a.call(o):"";var c=o+"";return c=="0"&&1/o==-1/0?"-0":c}return mx=s,mx}var px,eP;function A4(){if(eP)return px;eP=1;var t=pee();function e(n){return n==null?"":t(n)}return px=e,px}var gx,tP;function w4(){if(tP)return gx;tP=1;var t=Zn(),e=H1(),n=mee(),r=A4();function i(a,s){return t(a)?a:e(a,s)?[a]:n(r(a))}return gx=i,gx}var yx,nP;function rg(){if(nP)return yx;nP=1;var t=Zl();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return yx=e,yx}var vx,rP;function Q1(){if(rP)return vx;rP=1;var t=w4(),e=rg();function n(r,i){i=t(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return vx=n,vx}var xx,iP;function _4(){if(iP)return xx;iP=1;var t=Q1();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return xx=e,xx}var gee=_4();const Ir=vt(gee);var bx,aP;function yee(){if(aP)return bx;aP=1;function t(e){return e==null}return bx=t,bx}var vee=yee();const Ye=vt(vee);var Sx,sP;function xee(){if(sP)return Sx;sP=1;var t=da(),e=Zn(),n=ha(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return Sx=i,Sx}var bee=xee();const Ws=vt(bee);var See=z1();const Ge=vt(See);var Eee=ts();const Jl=vt(Eee);var Ex={exports:{}},it={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oP;function Tee(){if(oP)return it;oP=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function b(x){if(typeof x=="object"&&x!==null){var T=x.$$typeof;switch(T){case t:switch(x=x.type,x){case n:case i:case r:case u:case d:return x;default:switch(x=x&&x.$$typeof,x){case o:case s:case c:case p:case h:case a:return x;default:return T}}case e:return T}}}return it.ContextConsumer=s,it.ContextProvider=a,it.Element=t,it.ForwardRef=c,it.Fragment=n,it.Lazy=p,it.Memo=h,it.Portal=e,it.Profiler=i,it.StrictMode=r,it.Suspense=u,it.SuspenseList=d,it.isAsyncMode=function(){return!1},it.isConcurrentMode=function(){return!1},it.isContextConsumer=function(x){return b(x)===s},it.isContextProvider=function(x){return b(x)===a},it.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},it.isForwardRef=function(x){return b(x)===c},it.isFragment=function(x){return b(x)===n},it.isLazy=function(x){return b(x)===p},it.isMemo=function(x){return b(x)===h},it.isPortal=function(x){return b(x)===e},it.isProfiler=function(x){return b(x)===i},it.isStrictMode=function(x){return b(x)===r},it.isSuspense=function(x){return b(x)===u},it.isSuspenseList=function(x){return b(x)===d},it.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===u||x===d||x===y||typeof x=="object"&&x!==null&&(x.$$typeof===p||x.$$typeof===h||x.$$typeof===a||x.$$typeof===s||x.$$typeof===c||x.$$typeof===v||x.getModuleId!==void 0)},it.typeOf=b,it}var lP;function Aee(){return lP||(lP=1,Ex.exports=Tee()),Ex.exports}var wee=Aee(),Tx,uP;function R4(){if(uP)return Tx;uP=1;var t=da(),e=ha(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return Tx=r,Tx}var Ax,cP;function _ee(){if(cP)return Ax;cP=1;var t=R4();function e(n){return t(n)&&n!=+n}return Ax=e,Ax}var Ree=_ee();const Wf=vt(Ree);var Oee=R4();const Cee=vt(Oee);var Zr=function(e){return e===0?0:e>0?1:-1},Us=function(e){return Ws(e)&&e.indexOf("%")===e.length-1},ve=function(e){return Cee(e)&&!Wf(e)},tn=function(e){return ve(e)||Ws(e)},Lee=0,Xf=function(e){var n=++Lee;return"".concat(e||"").concat(n)},Xs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ve(e)&&!Ws(e))return r;var a;if(Us(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Wf(a)&&(a=r),i&&a>n&&(a=n),a},Ha=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Dee=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Xr=function(e,n){return ve(e)&&ve(n)?function(r){return e+r*(n-e)}:function(){return n}};function Pm(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ir(r,e))===n})}var Iee=function(e,n){return ve(e)&&ve(n)?e-n:Ws(e)&&Ws(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function cl(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function yT(t){"@babel/helpers - typeof";return yT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yT(t)}var Pee=["viewBox","children"],Nee=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],fP=["points","pathLength"],wx={svg:Pee,polygon:fP,polyline:fP},Z1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Nm=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(F.isValidElement(e)&&(r=e.props),!Jl(r))return null;var i={};return Object.keys(r).forEach(function(a){Z1.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},Mee=function(e,n,r){return function(i){return e(n,r,i),null}},Mm=function(e,n,r){if(!Jl(e)||yT(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];Z1.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=Mee(s,n,r))}),i},kee=["children"],jee=["children"];function dP(t,e){if(t==null)return{};var n=Uee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vT(t){"@babel/helpers - typeof";return vT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vT(t)}var hP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ea=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},mP=null,_x=null,J1=function t(e){if(e===mP&&Array.isArray(_x))return _x;var n=[];return F.Children.forEach(e,function(r){Ye(r)||(wee.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),_x=n,mP=e,n};function Pr(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return ea(i)}):r=[ea(e)],J1(t).forEach(function(i){var a=Ir(i,"type.displayName")||Ir(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function lr(t,e){var n=Pr(t,e);return n&&n[0]}var pP=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!ve(r)||r<=0||!ve(i)||i<=0)},Bee=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Fee=function(e){return e&&e.type&&Ws(e.type)&&Bee.indexOf(e.type)>=0},$ee=function(e){return e&&vT(e)==="object"&&"clipDot"in e},Gee=function(e,n,r,i){var a,s=(a=wx==null?void 0:wx[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Ge(e)&&(i&&s.includes(n)||Nee.includes(n))||r&&Z1.includes(n)},We=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(F.isValidElement(e)&&(i=e.props),!Jl(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;Gee((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},xT=function t(e,n){if(e===n)return!0;var r=F.Children.count(e);if(r!==F.Children.count(n))return!1;if(r===0)return!0;if(r===1)return gP(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!gP(a,s))return!1}return!0},gP=function(e,n){if(Ye(e)&&Ye(n))return!0;if(!Ye(e)&&!Ye(n)){var r=e.props||{},i=r.children,a=dP(r,kee),s=n.props||{},o=s.children,c=dP(s,jee);return i&&o?cl(a,c)&&xT(i,o):!i&&!o?cl(a,c):!1}return!1},yP=function(e,n){var r=[],i={};return J1(e).forEach(function(a,s){if(Fee(a))r.push(a);else if(a){var o=ea(a.type),c=n[o]||{},u=c.handler,d=c.once;if(u&&(!d||!i[o])){var h=u(a,o,s);r.push(h),i[o]=!0}}}),r},Vee=function(e){var n=e&&e.type;return n&&hP[n]?hP[n]:null},qee=function(e,n){return J1(n).indexOf(e)},Hee=["children","width","height","viewBox","className","style","title","desc"];function bT(){return bT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bT.apply(this,arguments)}function zee(t,e){if(t==null)return{};var n=Kee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ST(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,c=t.desc,u=zee(t,Hee),d=i||{width:n,height:r,x:0,y:0},h=et("recharts-surface",a);return Q.createElement("svg",bT({},We(u,!0,"svg"),{className:h,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Q.createElement("title",null,o),Q.createElement("desc",null,c),e)}var Yee=["children","className"];function ET(){return ET=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ET.apply(this,arguments)}function Wee(t,e){if(t==null)return{};var n=Xee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var $t=Q.forwardRef(function(t,e){var n=t.children,r=t.className,i=Wee(t,Yee),a=et("recharts-layer",r);return Q.createElement("g",ET({className:a},We(i,!0),{ref:e}),n)}),ta=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},Rx,vP;function Qee(){if(vP)return Rx;vP=1;function t(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+n];return s}return Rx=t,Rx}var Ox,xP;function Zee(){if(xP)return Ox;xP=1;var t=Qee();function e(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:t(n,r,i)}return Ox=e,Ox}var Cx,bP;function O4(){if(bP)return Cx;bP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+i+a+"]");function c(u){return o.test(u)}return Cx=c,Cx}var Lx,SP;function Jee(){if(SP)return Lx;SP=1;function t(e){return e.split("")}return Lx=t,Lx}var Dx,EP;function ete(){if(EP)return Dx;EP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="["+t+"]",o="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+c+")",d="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",v=u+"?",b="["+a+"]?",x="(?:"+y+"(?:"+[d,h,p].join("|")+")"+b+v+")*",T=b+v+x,_="(?:"+[d+o+"?",o,h,p,s].join("|")+")",A=RegExp(c+"(?="+c+")|"+_+T,"g");function O(R){return R.match(A)||[]}return Dx=O,Dx}var Ix,TP;function tte(){if(TP)return Ix;TP=1;var t=Jee(),e=O4(),n=ete();function r(i){return e(i)?n(i):t(i)}return Ix=r,Ix}var Px,AP;function nte(){if(AP)return Px;AP=1;var t=Zee(),e=O4(),n=tte(),r=A4();function i(a){return function(s){s=r(s);var o=e(s)?n(s):void 0,c=o?o[0]:s.charAt(0),u=o?t(o,1).join(""):s.slice(1);return c[a]()+u}}return Px=i,Px}var Nx,wP;function rte(){if(wP)return Nx;wP=1;var t=nte(),e=t("toUpperCase");return Nx=e,Nx}var ite=rte();const ig=vt(ite);function bt(t){return function(){return t}}const C4=Math.cos,km=Math.sin,ni=Math.sqrt,jm=Math.PI,ag=2*jm,TT=Math.PI,AT=2*TT,Ds=1e-6,ate=AT-Ds;function L4(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ste(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return L4;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class ote{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?L4:ste(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,d=s-e,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Ds)if(!(Math.abs(h*c-u*d)>Ds)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-s,v=i-o,b=c*c+u*u,x=y*y+v*v,T=Math.sqrt(b),_=Math.sqrt(p),A=a*Math.tan((TT-Math.acos((b+p-x)/(2*T*_)))/2),O=A/_,R=A/T;Math.abs(O-1)>Ds&&this._append`L${e+O*d},${n+O*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=e+R*c},${this._y1=n+R*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,d=n+c,h=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ds||Math.abs(this._y1-d)>Ds)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%AT+AT),p>ate?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:p>Ds&&this._append`A${r},${r},0,${+(p>=TT)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ew(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ote(e)}function tw(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function D4(t){this._context=t}D4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function sg(t){return new D4(t)}function I4(t){return t[0]}function P4(t){return t[1]}function N4(t,e){var n=bt(!0),r=null,i=sg,a=null,s=ew(o);t=typeof t=="function"?t:t===void 0?I4:bt(t),e=typeof e=="function"?e:e===void 0?P4:bt(e);function o(c){var u,d=(c=tw(c)).length,h,p=!1,y;for(r==null&&(a=i(y=s())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(h,u,c),+e(h,u,c));if(y)return a=null,y+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:bt(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:bt(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:bt(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function _h(t,e,n){var r=null,i=bt(!0),a=null,s=sg,o=null,c=ew(u);t=typeof t=="function"?t:t===void 0?I4:bt(+t),e=typeof e=="function"?e:bt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?P4:bt(+n);function u(h){var p,y,v,b=(h=tw(h)).length,x,T=!1,_,A=new Array(b),O=new Array(b);for(a==null&&(o=s(_=c())),p=0;p<=b;++p){if(!(p<b&&i(x=h[p],p,h))===T)if(T=!T)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],O[v]);o.lineEnd(),o.areaEnd()}T&&(A[p]=+t(x,p,h),O[p]=+e(x,p,h),o.point(r?+r(x,p,h):A[p],n?+n(x,p,h):O[p]))}if(_)return o=null,_+""||null}function d(){return N4().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:bt(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:bt(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:bt(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:bt(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:bt(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:bt(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:bt(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class M4{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function lte(t){return new M4(t,!0)}function ute(t){return new M4(t,!1)}const nw={draw(t,e){const n=ni(e/jm);t.moveTo(n,0),t.arc(0,0,n,0,ag)}},cte={draw(t,e){const n=ni(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},k4=ni(1/3),fte=k4*2,dte={draw(t,e){const n=ni(e/fte),r=n*k4;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},hte={draw(t,e){const n=ni(e),r=-n/2;t.rect(r,r,n,n)}},mte=.8908130915292852,j4=km(jm/10)/km(7*jm/10),pte=km(ag/10)*j4,gte=-C4(ag/10)*j4,yte={draw(t,e){const n=ni(e*mte),r=pte*n,i=gte*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=ag*a/5,o=C4(s),c=km(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},Mx=ni(3),vte={draw(t,e){const n=-ni(e/(Mx*3));t.moveTo(0,n*2),t.lineTo(-Mx*n,-n),t.lineTo(Mx*n,-n),t.closePath()}},Tr=-.5,Ar=ni(3)/2,wT=1/ni(12),xte=(wT/2+1)*3,bte={draw(t,e){const n=ni(e/xte),r=n/2,i=n*wT,a=r,s=n*wT+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Tr*r-Ar*i,Ar*r+Tr*i),t.lineTo(Tr*a-Ar*s,Ar*a+Tr*s),t.lineTo(Tr*o-Ar*c,Ar*o+Tr*c),t.lineTo(Tr*r+Ar*i,Tr*i-Ar*r),t.lineTo(Tr*a+Ar*s,Tr*s-Ar*a),t.lineTo(Tr*o+Ar*c,Tr*c-Ar*o),t.closePath()}};function Ste(t,e){let n=null,r=ew(i);t=typeof t=="function"?t:bt(t||nw),e=typeof e=="function"?e:bt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:bt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:bt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Um(){}function Bm(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function U4(t){this._context=t}U4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ete(t){return new U4(t)}function B4(t){this._context=t}B4.prototype={areaStart:Um,areaEnd:Um,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Bm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Tte(t){return new B4(t)}function F4(t){this._context=t}F4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Bm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ate(t){return new F4(t)}function $4(t){this._context=t}$4.prototype={areaStart:Um,areaEnd:Um,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function wte(t){return new $4(t)}function _P(t){return t<0?-1:1}function RP(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(_P(a)+_P(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function OP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kx(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function Fm(t){this._context=t}Fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kx(this,this._t0,OP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kx(this,OP(this,n=RP(this,t,e)),n);break;default:kx(this,this._t0,n=RP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function G4(t){this._context=new V4(t)}(G4.prototype=Object.create(Fm.prototype)).point=function(t,e){Fm.prototype.point.call(this,e,t)};function V4(t){this._context=t}V4.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function _te(t){return new Fm(t)}function Rte(t){return new G4(t)}function q4(t){this._context=t}q4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=CP(t),i=CP(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function CP(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Ote(t){return new q4(t)}function og(t,e){this._context=t,this._t=e}og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Cte(t){return new og(t,.5)}function Lte(t){return new og(t,0)}function Dte(t){return new og(t,1)}function xl(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function _T(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ite(t,e){return t[e]}function Pte(t){const e=[];return e.key=t,e}function Nte(){var t=bt([]),e=_T,n=xl,r=Ite;function i(a){var s=Array.from(t.apply(this,arguments),Pte),o,c=s.length,u=-1,d;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,d=tw(e(s));o<c;++o)s[d[o]].index=o;return n(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:bt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:bt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?_T:typeof a=="function"?a:bt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??xl,i):n},i}function Mte(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}xl(t,e)}}function kte(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}xl(t,e)}}function jte(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var d=t[e[o]],h=d[r][1]||0,p=d[r-1][1]||0,y=(h-p)/2,v=0;v<o;++v){var b=t[e[v]],x=b[r][1]||0,T=b[r-1][1]||0;y+=x-T}c+=h,u+=y*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,xl(t,e)}}function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}var Ute=["type","size","sizeType"];function RT(){return RT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RT.apply(this,arguments)}function LP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LP(Object(n),!0).forEach(function(r){Bte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bte(t,e,n){return e=Fte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fte(t){var e=$te(t,"string");return Wc(e)=="symbol"?e:e+""}function $te(t,e){if(Wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gte(t,e){if(t==null)return{};var n=Vte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var H4={symbolCircle:nw,symbolCross:cte,symbolDiamond:dte,symbolSquare:hte,symbolStar:yte,symbolTriangle:vte,symbolWye:bte},qte=Math.PI/180,Hte=function(e){var n="symbol".concat(ig(e));return H4[n]||nw},zte=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*qte;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Kte=function(e,n){H4["symbol".concat(ig(e))]=n},rw=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,c=Gte(e,Ute),u=DP(DP({},c),{},{type:r,size:a,sizeType:o}),d=function(){var x=Hte(r),T=Ste().type(x).size(zte(a,o,r));return T()},h=u.className,p=u.cx,y=u.cy,v=We(u,!0);return p===+p&&y===+y&&a===+a?Q.createElement("path",RT({},v,{className:et("recharts-symbols",h),transform:"translate(".concat(p,", ").concat(y,")"),d:d()})):null};rw.registerSymbol=Kte;function bl(t){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(t)}function OT(){return OT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OT.apply(this,arguments)}function IP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yte(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IP(Object(n),!0).forEach(function(r){Xc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xte(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K4(r.key),r)}}function Qte(t,e,n){return e&&Xte(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zte(t,e,n){return e=$m(e),Jte(t,z4()?Reflect.construct(e,n||[],$m(t).constructor):e.apply(t,n))}function Jte(t,e){if(e&&(bl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ene(t)}function ene(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z4=function(){return!!t})()}function $m(t){return $m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$m(t)}function tne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CT(t,e)}function CT(t,e){return CT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CT(t,e)}function Xc(t,e,n){return e=K4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K4(t){var e=nne(t,"string");return bl(e)=="symbol"?e:e+""}function nne(t,e){if(bl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wr=32,iw=function(t){function e(){return Wte(this,e),Zte(this,e,arguments)}return tne(e,t),Qte(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=wr/2,s=wr/6,o=wr/3,c=r.inactive?i:r.color;if(r.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:wr,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(wr,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return Q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(wr/8,"h").concat(wr,"v").concat(wr*3/4,"h").concat(-wr,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(r.legendIcon)){var u=Yte({},r);return delete u.legendIcon,Q.cloneElement(r.legendIcon,u)}return Q.createElement(rw,{fill:c,cx:a,cy:a,size:wr,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:wr,height:wr},h={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(y,v){var b=y.formatter||c,x=et(Xc(Xc({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",y.inactive));if(y.type==="none")return null;var T=Ge(y.value)?null:y.value;ta(!Ge(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=y.inactive?u:y.color;return Q.createElement("li",OT({className:x,style:h,key:"legend-item-".concat(v)},Mm(r.props,y,v)),Q.createElement(ST,{width:s,height:s,viewBox:d,style:p},r.renderIcon(y)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},b?b(T,y,v):T))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(F.PureComponent);Xc(iw,"displayName","Legend");Xc(iw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var jx,PP;function rne(){if(PP)return jx;PP=1;var t=tg();function e(){this.__data__=new t,this.size=0}return jx=e,jx}var Ux,NP;function ine(){if(NP)return Ux;NP=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Ux=t,Ux}var Bx,MP;function ane(){if(MP)return Bx;MP=1;function t(e){return this.__data__.get(e)}return Bx=t,Bx}var Fx,kP;function sne(){if(kP)return Fx;kP=1;function t(e){return this.__data__.has(e)}return Fx=t,Fx}var $x,jP;function one(){if(jP)return $x;jP=1;var t=tg(),e=Y1(),n=W1(),r=200;function i(a,s){var o=this.__data__;if(o instanceof t){var c=o.__data__;if(!e||c.length<r-1)return c.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(c)}return o.set(a,s),this.size=o.size,this}return $x=i,$x}var Gx,UP;function Y4(){if(UP)return Gx;UP=1;var t=tg(),e=rne(),n=ine(),r=ane(),i=sne(),a=one();function s(o){var c=this.__data__=new t(o);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Gx=s,Gx}var Vx,BP;function lne(){if(BP)return Vx;BP=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Vx=e,Vx}var qx,FP;function une(){if(FP)return qx;FP=1;function t(e){return this.__data__.has(e)}return qx=t,qx}var Hx,$P;function W4(){if($P)return Hx;$P=1;var t=W1(),e=lne(),n=une();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,Hx=r,Hx}var zx,GP;function X4(){if(GP)return zx;GP=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return zx=t,zx}var Kx,VP;function Q4(){if(VP)return Kx;VP=1;function t(e,n){return e.has(n)}return Kx=t,Kx}var Yx,qP;function Z4(){if(qP)return Yx;qP=1;var t=W4(),e=X4(),n=Q4(),r=1,i=2;function a(s,o,c,u,d,h){var p=c&r,y=s.length,v=o.length;if(y!=v&&!(p&&v>y))return!1;var b=h.get(s),x=h.get(o);if(b&&x)return b==o&&x==s;var T=-1,_=!0,A=c&i?new t:void 0;for(h.set(s,o),h.set(o,s);++T<y;){var O=s[T],R=o[T];if(u)var C=p?u(R,O,T,o,s,h):u(O,R,T,s,o,h);if(C!==void 0){if(C)continue;_=!1;break}if(A){if(!e(o,function(L,P){if(!n(A,P)&&(O===L||d(O,L,c,u,h)))return A.push(P)})){_=!1;break}}else if(!(O===R||d(O,R,c,u,h))){_=!1;break}}return h.delete(s),h.delete(o),_}return Yx=a,Yx}var Wx,HP;function cne(){if(HP)return Wx;HP=1;var t=_i(),e=t.Uint8Array;return Wx=e,Wx}var Xx,zP;function fne(){if(zP)return Xx;zP=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return Xx=t,Xx}var Qx,KP;function aw(){if(KP)return Qx;KP=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return Qx=t,Qx}var Zx,YP;function dne(){if(YP)return Zx;YP=1;var t=Yf(),e=cne(),n=K1(),r=Z4(),i=fne(),a=aw(),s=1,o=2,c="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Map]",p="[object Number]",y="[object RegExp]",v="[object Set]",b="[object String]",x="[object Symbol]",T="[object ArrayBuffer]",_="[object DataView]",A=t?t.prototype:void 0,O=A?A.valueOf:void 0;function R(C,L,P,N,k,M,G){switch(P){case _:if(C.byteLength!=L.byteLength||C.byteOffset!=L.byteOffset)return!1;C=C.buffer,L=L.buffer;case T:return!(C.byteLength!=L.byteLength||!M(new e(C),new e(L)));case c:case u:case p:return n(+C,+L);case d:return C.name==L.name&&C.message==L.message;case y:case b:return C==L+"";case h:var K=i;case v:var W=N&s;if(K||(K=a),C.size!=L.size&&!W)return!1;var Y=G.get(C);if(Y)return Y==L;N|=o,G.set(C,L);var j=r(K(C),K(L),N,k,M,G);return G.delete(C),j;case x:if(O)return O.call(C)==O.call(L)}return!1}return Zx=R,Zx}var Jx,WP;function J4(){if(WP)return Jx;WP=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return Jx=t,Jx}var eb,XP;function hne(){if(XP)return eb;XP=1;var t=J4(),e=Zn();function n(r,i,a){var s=i(r);return e(r)?s:t(s,a(r))}return eb=n,eb}var tb,QP;function mne(){if(QP)return tb;QP=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];n(o,r,e)&&(s[a++]=o)}return s}return tb=t,tb}var nb,ZP;function pne(){if(ZP)return nb;ZP=1;function t(){return[]}return nb=t,nb}var rb,JP;function gne(){if(JP)return rb;JP=1;var t=mne(),e=pne(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(o){return r.call(s,o)}))}:e;return rb=a,rb}var ib,eN;function yne(){if(eN)return ib;eN=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return ib=t,ib}var ab,tN;function vne(){if(tN)return ab;tN=1;var t=da(),e=ha(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return ab=r,ab}var sb,nN;function sw(){if(nN)return sb;nN=1;var t=vne(),e=ha(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return sb=a,sb}var Ec={exports:{}},ob,rN;function xne(){if(rN)return ob;rN=1;function t(){return!1}return ob=t,ob}Ec.exports;var iN;function e6(){return iN||(iN=1,function(t,e){var n=_i(),r=xne(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;t.exports=u}(Ec,Ec.exports)),Ec.exports}var lb,aN;function ow(){if(aN)return lb;aN=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return lb=n,lb}var ub,sN;function lw(){if(sN)return ub;sN=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return ub=e,ub}var cb,oN;function bne(){if(oN)return cb;oN=1;var t=da(),e=lw(),n=ha(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",h="[object Object]",p="[object RegExp]",y="[object Set]",v="[object String]",b="[object WeakMap]",x="[object ArrayBuffer]",T="[object DataView]",_="[object Float32Array]",A="[object Float64Array]",O="[object Int8Array]",R="[object Int16Array]",C="[object Int32Array]",L="[object Uint8Array]",P="[object Uint8ClampedArray]",N="[object Uint16Array]",k="[object Uint32Array]",M={};M[_]=M[A]=M[O]=M[R]=M[C]=M[L]=M[P]=M[N]=M[k]=!0,M[r]=M[i]=M[x]=M[a]=M[T]=M[s]=M[o]=M[c]=M[u]=M[d]=M[h]=M[p]=M[y]=M[v]=M[b]=!1;function G(K){return n(K)&&e(K.length)&&!!M[t(K)]}return cb=G,cb}var fb,lN;function t6(){if(lN)return fb;lN=1;function t(e){return function(n){return e(n)}}return fb=t,fb}var Tc={exports:{}};Tc.exports;var uN;function Sne(){return uN||(uN=1,function(t,e){var n=S4(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o}(Tc,Tc.exports)),Tc.exports}var db,cN;function n6(){if(cN)return db;cN=1;var t=bne(),e=t6(),n=Sne(),r=n&&n.isTypedArray,i=r?e(r):t;return db=i,db}var hb,fN;function Ene(){if(fN)return hb;fN=1;var t=yne(),e=sw(),n=Zn(),r=e6(),i=ow(),a=n6(),s=Object.prototype,o=s.hasOwnProperty;function c(u,d){var h=n(u),p=!h&&e(u),y=!h&&!p&&r(u),v=!h&&!p&&!y&&a(u),b=h||p||y||v,x=b?t(u.length,String):[],T=x.length;for(var _ in u)(d||o.call(u,_))&&!(b&&(_=="length"||y&&(_=="offset"||_=="parent")||v&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,T)))&&x.push(_);return x}return hb=c,hb}var mb,dN;function Tne(){if(dN)return mb;dN=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return mb=e,mb}var pb,hN;function r6(){if(hN)return pb;hN=1;function t(e,n){return function(r){return e(n(r))}}return pb=t,pb}var gb,mN;function Ane(){if(mN)return gb;mN=1;var t=r6(),e=t(Object.keys,Object);return gb=e,gb}var yb,pN;function wne(){if(pN)return yb;pN=1;var t=Tne(),e=Ane(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return yb=i,yb}var vb,gN;function Qf(){if(gN)return vb;gN=1;var t=z1(),e=lw();function n(r){return r!=null&&e(r.length)&&!t(r)}return vb=n,vb}var xb,yN;function lg(){if(yN)return xb;yN=1;var t=Ene(),e=wne(),n=Qf();function r(i){return n(i)?t(i):e(i)}return xb=r,xb}var bb,vN;function _ne(){if(vN)return bb;vN=1;var t=hne(),e=gne(),n=lg();function r(i){return t(i,n,e)}return bb=r,bb}var Sb,xN;function Rne(){if(xN)return Sb;xN=1;var t=_ne(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,c,u,d){var h=o&e,p=t(a),y=p.length,v=t(s),b=v.length;if(y!=b&&!h)return!1;for(var x=y;x--;){var T=p[x];if(!(h?T in s:r.call(s,T)))return!1}var _=d.get(a),A=d.get(s);if(_&&A)return _==s&&A==a;var O=!0;d.set(a,s),d.set(s,a);for(var R=h;++x<y;){T=p[x];var C=a[T],L=s[T];if(c)var P=h?c(L,C,T,s,a,d):c(C,L,T,a,s,d);if(!(P===void 0?C===L||u(C,L,o,c,d):P)){O=!1;break}R||(R=T=="constructor")}if(O&&!R){var N=a.constructor,k=s.constructor;N!=k&&"constructor"in a&&"constructor"in s&&!(typeof N=="function"&&N instanceof N&&typeof k=="function"&&k instanceof k)&&(O=!1)}return d.delete(a),d.delete(s),O}return Sb=i,Sb}var Eb,bN;function One(){if(bN)return Eb;bN=1;var t=to(),e=_i(),n=t(e,"DataView");return Eb=n,Eb}var Tb,SN;function Cne(){if(SN)return Tb;SN=1;var t=to(),e=_i(),n=t(e,"Promise");return Tb=n,Tb}var Ab,EN;function i6(){if(EN)return Ab;EN=1;var t=to(),e=_i(),n=t(e,"Set");return Ab=n,Ab}var wb,TN;function Lne(){if(TN)return wb;TN=1;var t=to(),e=_i(),n=t(e,"WeakMap");return wb=n,wb}var _b,AN;function Dne(){if(AN)return _b;AN=1;var t=One(),e=Y1(),n=Cne(),r=i6(),i=Lne(),a=da(),s=E4(),o="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",y=s(t),v=s(e),b=s(n),x=s(r),T=s(i),_=a;return(t&&_(new t(new ArrayBuffer(1)))!=p||e&&_(new e)!=o||n&&_(n.resolve())!=u||r&&_(new r)!=d||i&&_(new i)!=h)&&(_=function(A){var O=a(A),R=O==c?A.constructor:void 0,C=R?s(R):"";if(C)switch(C){case y:return p;case v:return o;case b:return u;case x:return d;case T:return h}return O}),_b=_,_b}var Rb,wN;function Ine(){if(wN)return Rb;wN=1;var t=Y4(),e=Z4(),n=dne(),r=Rne(),i=Dne(),a=Zn(),s=e6(),o=n6(),c=1,u="[object Arguments]",d="[object Array]",h="[object Object]",p=Object.prototype,y=p.hasOwnProperty;function v(b,x,T,_,A,O){var R=a(b),C=a(x),L=R?d:i(b),P=C?d:i(x);L=L==u?h:L,P=P==u?h:P;var N=L==h,k=P==h,M=L==P;if(M&&s(b)){if(!s(x))return!1;R=!0,N=!1}if(M&&!N)return O||(O=new t),R||o(b)?e(b,x,T,_,A,O):n(b,x,L,T,_,A,O);if(!(T&c)){var G=N&&y.call(b,"__wrapped__"),K=k&&y.call(x,"__wrapped__");if(G||K){var W=G?b.value():b,Y=K?x.value():x;return O||(O=new t),A(W,Y,T,_,O)}}return M?(O||(O=new t),r(b,x,T,_,A,O)):!1}return Rb=v,Rb}var Ob,_N;function uw(){if(_N)return Ob;_N=1;var t=Ine(),e=ha();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,s,n,o)}return Ob=n,Ob}var Cb,RN;function Pne(){if(RN)return Cb;RN=1;var t=Y4(),e=uw(),n=1,r=2;function i(a,s,o,c){var u=o.length,d=u,h=!c;if(a==null)return!d;for(a=Object(a);u--;){var p=o[u];if(h&&p[2]?p[1]!==a[p[0]]:!(p[0]in a))return!1}for(;++u<d;){p=o[u];var y=p[0],v=a[y],b=p[1];if(h&&p[2]){if(v===void 0&&!(y in a))return!1}else{var x=new t;if(c)var T=c(v,b,y,a,s,x);if(!(T===void 0?e(b,v,n|r,c,x):T))return!1}}return!0}return Cb=i,Cb}var Lb,ON;function a6(){if(ON)return Lb;ON=1;var t=ts();function e(n){return n===n&&!t(n)}return Lb=e,Lb}var Db,CN;function Nne(){if(CN)return Db;CN=1;var t=a6(),e=lg();function n(r){for(var i=e(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,t(o)]}return i}return Db=n,Db}var Ib,LN;function s6(){if(LN)return Ib;LN=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return Ib=t,Ib}var Pb,DN;function Mne(){if(DN)return Pb;DN=1;var t=Pne(),e=Nne(),n=s6();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return Pb=r,Pb}var Nb,IN;function kne(){if(IN)return Nb;IN=1;function t(e,n){return e!=null&&n in Object(e)}return Nb=t,Nb}var Mb,PN;function jne(){if(PN)return Mb;PN=1;var t=w4(),e=sw(),n=Zn(),r=ow(),i=lw(),a=rg();function s(o,c,u){c=t(c,o);for(var d=-1,h=c.length,p=!1;++d<h;){var y=a(c[d]);if(!(p=o!=null&&u(o,y)))break;o=o[y]}return p||++d!=h?p:(h=o==null?0:o.length,!!h&&i(h)&&r(y,h)&&(n(o)||e(o)))}return Mb=s,Mb}var kb,NN;function Une(){if(NN)return kb;NN=1;var t=kne(),e=jne();function n(r,i){return r!=null&&e(r,i,t)}return kb=n,kb}var jb,MN;function Bne(){if(MN)return jb;MN=1;var t=uw(),e=_4(),n=Une(),r=H1(),i=a6(),a=s6(),s=rg(),o=1,c=2;function u(d,h){return r(d)&&i(h)?a(s(d),h):function(p){var y=e(p,d);return y===void 0&&y===h?n(p,d):t(h,y,o|c)}}return jb=u,jb}var Ub,kN;function eu(){if(kN)return Ub;kN=1;function t(e){return e}return Ub=t,Ub}var Bb,jN;function Fne(){if(jN)return Bb;jN=1;function t(e){return function(n){return n==null?void 0:n[e]}}return Bb=t,Bb}var Fb,UN;function $ne(){if(UN)return Fb;UN=1;var t=Q1();function e(n){return function(r){return t(r,n)}}return Fb=e,Fb}var $b,BN;function Gne(){if(BN)return $b;BN=1;var t=Fne(),e=$ne(),n=H1(),r=rg();function i(a){return n(a)?t(r(a)):e(a)}return $b=i,$b}var Gb,FN;function ns(){if(FN)return Gb;FN=1;var t=Mne(),e=Bne(),n=eu(),r=Zn(),i=Gne();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?e(s[0],s[1]):t(s):i(s)}return Gb=a,Gb}var Vb,$N;function o6(){if($N)return Vb;$N=1;function t(e,n,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(e[s],s,e))return s;return-1}return Vb=t,Vb}var qb,GN;function Vne(){if(GN)return qb;GN=1;function t(e){return e!==e}return qb=t,qb}var Hb,VN;function qne(){if(VN)return Hb;VN=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return Hb=t,Hb}var zb,qN;function Hne(){if(qN)return zb;qN=1;var t=o6(),e=Vne(),n=qne();function r(i,a,s){return a===a?n(i,a,s):t(i,e,s)}return zb=r,zb}var Kb,HN;function zne(){if(HN)return Kb;HN=1;var t=Hne();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return Kb=e,Kb}var Yb,zN;function Kne(){if(zN)return Yb;zN=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return Yb=t,Yb}var Wb,KN;function Yne(){if(KN)return Wb;KN=1;function t(){}return Wb=t,Wb}var Xb,YN;function Wne(){if(YN)return Xb;YN=1;var t=i6(),e=Yne(),n=aw(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return Xb=i,Xb}var Qb,WN;function Xne(){if(WN)return Qb;WN=1;var t=W4(),e=zne(),n=Kne(),r=Q4(),i=Wne(),a=aw(),s=200;function o(c,u,d){var h=-1,p=e,y=c.length,v=!0,b=[],x=b;if(d)v=!1,p=n;else if(y>=s){var T=u?null:i(c);if(T)return a(T);v=!1,p=r,x=new t}else x=u?[]:b;e:for(;++h<y;){var _=c[h],A=u?u(_):_;if(_=d||_!==0?_:0,v&&A===A){for(var O=x.length;O--;)if(x[O]===A)continue e;u&&x.push(A),b.push(_)}else p(x,A,d)||(x!==b&&x.push(A),b.push(_))}return b}return Qb=o,Qb}var Zb,XN;function Qne(){if(XN)return Zb;XN=1;var t=ns(),e=Xne();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return Zb=n,Zb}var Zne=Qne();const QN=vt(Zne);function l6(t,e,n){return e===!0?QN(t,n):Ge(e)?QN(t,e):t}function Sl(t){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sl(t)}var Jne=["ref"];function ZN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZN(Object(n),!0).forEach(function(r){ug(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ere(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c6(r.key),r)}}function tre(t,e,n){return e&&JN(t.prototype,e),n&&JN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nre(t,e,n){return e=Gm(e),rre(t,u6()?Reflect.construct(e,n||[],Gm(t).constructor):e.apply(t,n))}function rre(t,e){if(e&&(Sl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ire(t)}function ire(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u6=function(){return!!t})()}function Gm(t){return Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gm(t)}function are(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LT(t,e)}function LT(t,e){return LT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LT(t,e)}function ug(t,e,n){return e=c6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c6(t){var e=sre(t,"string");return Sl(e)=="symbol"?e:e+""}function sre(t,e){if(Sl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ore(t,e){if(t==null)return{};var n=lre(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ure(t){return t.value}function cre(t,e){if(Q.isValidElement(t))return Q.cloneElement(t,e);if(typeof t=="function")return Q.createElement(t,e);e.ref;var n=ore(e,Jne);return Q.createElement(iw,n)}var eM=1,fl=function(t){function e(){var n;ere(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=nre(this,e,[].concat(i)),ug(n,"lastBoundingBox",{width:-1,height:-1}),n}return are(e,t),tre(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>eM||Math.abs(i.height-this.lastBoundingBox.height)>eM)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?qi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,h,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var y=this.getBBoxSnapshot();h={left:((u||0)-y.width)/2}}else h=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var v=this.getBBoxSnapshot();p={top:((d||0)-v.height)/2}}else p=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return qi(qi({},h),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=qi(qi({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return Q.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(y){r.wrapperNode=y}},cre(a,qi(qi({},this.props),{},{payload:l6(d,u,ure)})))}}],[{key:"getWithHeight",value:function(r,i){var a=qi(qi({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&ve(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(F.PureComponent);ug(fl,"displayName","Legend");ug(fl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Jb,tM;function fre(){if(tM)return Jb;tM=1;var t=Yf(),e=sw(),n=Zn(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return Jb=i,Jb}var eS,nM;function f6(){if(nM)return eS;nM=1;var t=J4(),e=fre();function n(r,i,a,s,o){var c=-1,u=r.length;for(a||(a=e),o||(o=[]);++c<u;){var d=r[c];i>0&&a(d)?i>1?n(d,i-1,a,s,o):t(o,d):s||(o[o.length]=d)}return o}return eS=n,eS}var tS,rM;function dre(){if(rM)return tS;rM=1;function t(e){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),c=o.length;c--;){var u=o[e?c:++a];if(r(s[u],u,s)===!1)break}return n}}return tS=t,tS}var nS,iM;function hre(){if(iM)return nS;iM=1;var t=dre(),e=t();return nS=e,nS}var rS,aM;function d6(){if(aM)return rS;aM=1;var t=hre(),e=lg();function n(r,i){return r&&t(r,i,e)}return rS=n,rS}var iS,sM;function mre(){if(sM)return iS;sM=1;var t=Qf();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var s=i.length,o=r?s:-1,c=Object(i);(r?o--:++o<s)&&a(c[o],o,c)!==!1;);return i}}return iS=e,iS}var aS,oM;function cw(){if(oM)return aS;oM=1;var t=d6(),e=mre(),n=e(t);return aS=n,aS}var sS,lM;function h6(){if(lM)return sS;lM=1;var t=cw(),e=Qf();function n(r,i){var a=-1,s=e(r)?Array(r.length):[];return t(r,function(o,c,u){s[++a]=i(o,c,u)}),s}return sS=n,sS}var oS,uM;function pre(){if(uM)return oS;uM=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return oS=t,oS}var lS,cM;function gre(){if(cM)return lS;cM=1;var t=Zl();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=t(n),c=r!==void 0,u=r===null,d=r===r,h=t(r);if(!u&&!h&&!o&&n>r||o&&c&&d&&!u&&!h||a&&c&&d||!i&&d||!s)return 1;if(!a&&!o&&!h&&n<r||h&&i&&s&&!a&&!o||u&&i&&s||!c&&s||!d)return-1}return 0}return lS=e,lS}var uS,fM;function yre(){if(fM)return uS;fM=1;var t=gre();function e(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,c=s.length,u=i.length;++a<c;){var d=t(s[a],o[a]);if(d){if(a>=u)return d;var h=i[a];return d*(h=="desc"?-1:1)}}return n.index-r.index}return uS=e,uS}var cS,dM;function vre(){if(dM)return cS;dM=1;var t=X1(),e=Q1(),n=ns(),r=h6(),i=pre(),a=t6(),s=yre(),o=eu(),c=Zn();function u(d,h,p){h.length?h=t(h,function(b){return c(b)?function(x){return e(x,b.length===1?b[0]:b)}:b}):h=[o];var y=-1;h=t(h,a(n));var v=r(d,function(b,x,T){var _=t(h,function(A){return A(b)});return{criteria:_,index:++y,value:b}});return i(v,function(b,x){return s(b,x,p)})}return cS=u,cS}var fS,hM;function xre(){if(hM)return fS;hM=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return fS=t,fS}var dS,mM;function bre(){if(mM)return dS;mM=1;var t=xre(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,c=e(s.length-i,0),u=Array(c);++o<c;)u[o]=s[i+o];o=-1;for(var d=Array(i+1);++o<i;)d[o]=s[o];return d[i]=a(u),t(r,this,d)}}return dS=n,dS}var hS,pM;function Sre(){if(pM)return hS;pM=1;function t(e){return function(){return e}}return hS=t,hS}var mS,gM;function m6(){if(gM)return mS;gM=1;var t=to(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return mS=e,mS}var pS,yM;function Ere(){if(yM)return pS;yM=1;var t=Sre(),e=m6(),n=eu(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return pS=r,pS}var gS,vM;function Tre(){if(vM)return gS;vM=1;var t=800,e=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),c=e-(o-s);if(s=o,c>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return gS=r,gS}var yS,xM;function Are(){if(xM)return yS;xM=1;var t=Ere(),e=Tre(),n=e(t);return yS=n,yS}var vS,bM;function wre(){if(bM)return vS;bM=1;var t=eu(),e=bre(),n=Are();function r(i,a){return n(e(i,a,t),i+"")}return vS=r,vS}var xS,SM;function cg(){if(SM)return xS;SM=1;var t=K1(),e=Qf(),n=ow(),r=ts();function i(a,s,o){if(!r(o))return!1;var c=typeof s;return(c=="number"?e(o)&&n(s,o.length):c=="string"&&s in o)?t(o[s],a):!1}return xS=i,xS}var bS,EM;function _re(){if(EM)return bS;EM=1;var t=f6(),e=vre(),n=wre(),r=cg(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return bS=i,bS}var Rre=_re();const fw=vt(Rre);function Qc(t){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(t)}function DT(){return DT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DT.apply(this,arguments)}function Ore(t,e){return Ire(t)||Dre(t,e)||Lre(t,e)||Cre()}function Cre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lre(t,e){if(t){if(typeof t=="string")return TM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TM(t,e)}}function TM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Ire(t){if(Array.isArray(t))return t}function AM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AM(Object(n),!0).forEach(function(r){Pre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pre(t,e,n){return e=Nre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nre(t){var e=Mre(t,"string");return Qc(e)=="symbol"?e:e+""}function Mre(t,e){if(Qc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kre(t){return Array.isArray(t)&&tn(t[0])&&tn(t[1])?t.join(" ~ "):t}var jre=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,p=e.itemSorter,y=e.wrapperClassName,v=e.labelClassName,b=e.label,x=e.labelFormatter,T=e.accessibilityLayer,_=T===void 0?!1:T,A=function(){if(d&&d.length){var G={padding:0,margin:0},K=(p?fw(d,p):d).map(function(W,Y){if(W.type==="none")return null;var j=SS({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},o),$=W.formatter||h||kre,q=W.value,Z=W.name,B=q,V=Z;if($&&B!=null&&V!=null){var H=$(q,Z,W,Y,d);if(Array.isArray(H)){var te=Ore(H,2);B=te[0],V=te[1]}else B=H}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:j},tn(V)?Q.createElement("span",{className:"recharts-tooltip-item-name"},V):null,tn(V)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},B),Q.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:G},K)}return null},O=SS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),R=SS({margin:0},u),C=!Ye(b),L=C?b:"",P=et("recharts-default-tooltip",y),N=et("recharts-tooltip-label",v);C&&x&&d!==void 0&&d!==null&&(L=x(b,d));var k=_?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",DT({className:P,style:O},k),Q.createElement("p",{className:N,style:R},Q.isValidElement(L)?L:"".concat(L)),A())};function Zc(t){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(t)}function Rh(t,e,n){return e=Ure(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ure(t){var e=Bre(t,"string");return Zc(e)=="symbol"?e:e+""}function Bre(t,e){if(Zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cc="recharts-tooltip-wrapper",Fre={visibility:"hidden"};function $re(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return et(cc,Rh(Rh(Rh(Rh({},"".concat(cc,"-right"),ve(n)&&e&&ve(e.x)&&n>=e.x),"".concat(cc,"-left"),ve(n)&&e&&ve(e.x)&&n<e.x),"".concat(cc,"-bottom"),ve(r)&&e&&ve(e.y)&&r>=e.y),"".concat(cc,"-top"),ve(r)&&e&&ve(e.y)&&r<e.y))}function wM(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&ve(a[r]))return a[r];var d=n[r]-o-i,h=n[r]+i;if(e[r])return s[r]?d:h;if(s[r]){var p=d,y=c[r];return p<y?Math.max(h,c[r]):Math.max(d,c[r])}var v=h+o,b=c[r]+u;return v>b?Math.max(d,c[r]):Math.max(h,c[r])}function Gre(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Vre(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,u,d,h;return s.height>0&&s.width>0&&n?(d=wM({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=wM({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Gre({translateX:d,translateY:h,useTranslate3d:o})):u=Fre,{cssProperties:u,cssClasses:$re({translateX:d,translateY:h,coordinate:n})}}function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function _M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_M(Object(n),!0).forEach(function(r){PT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hre(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g6(r.key),r)}}function zre(t,e,n){return e&&Hre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kre(t,e,n){return e=Vm(e),Yre(t,p6()?Reflect.construct(e,n||[],Vm(t).constructor):e.apply(t,n))}function Yre(t,e){if(e&&(El(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wre(t)}function Wre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p6=function(){return!!t})()}function Vm(t){return Vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vm(t)}function Xre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IT(t,e)}function IT(t,e){return IT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IT(t,e)}function PT(t,e,n){return e=g6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g6(t){var e=Qre(t,"string");return El(e)=="symbol"?e:e+""}function Qre(t,e){if(El(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(El(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var OM=1,Zre=function(t){function e(){var n;qre(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Kre(this,e,[].concat(i)),PT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),PT(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return Xre(e,t),zre(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>OM||Math.abs(r.height-this.state.lastBoundingBox.height)>OM)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,p=i.isAnimationActive,y=i.offset,v=i.position,b=i.reverseDirection,x=i.useTranslate3d,T=i.viewBox,_=i.wrapperStyle,A=Vre({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:y,position:v,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:T}),O=A.cssClasses,R=A.cssProperties,C=RM(RM({transition:p&&a?"transform ".concat(o,"ms ").concat(c):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},_);return Q.createElement("div",{tabIndex:-1,className:O,style:C,ref:function(P){r.wrapperNode=P}},u)}}])}(F.PureComponent),Jre=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},tu={isSsr:Jre()};function Tl(t){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tl(t)}function CM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CM(Object(n),!0).forEach(function(r){dw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v6(r.key),r)}}function nie(t,e,n){return e&&tie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rie(t,e,n){return e=qm(e),iie(t,y6()?Reflect.construct(e,n||[],qm(t).constructor):e.apply(t,n))}function iie(t,e){if(e&&(Tl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aie(t)}function aie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y6=function(){return!!t})()}function qm(t){return qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qm(t)}function sie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NT(t,e)}function NT(t,e){return NT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NT(t,e)}function dw(t,e,n){return e=v6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v6(t){var e=oie(t,"string");return Tl(e)=="symbol"?e:e+""}function oie(t,e){if(Tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lie(t){return t.dataKey}function uie(t,e){return Q.isValidElement(t)?Q.cloneElement(t,e):typeof t=="function"?Q.createElement(t,e):Q.createElement(jre,e)}var mi=function(t){function e(){return eie(this,e),rie(this,e,arguments)}return sie(e,t),nie(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,p=i.isAnimationActive,y=i.offset,v=i.payload,b=i.payloadUniqBy,x=i.position,T=i.reverseDirection,_=i.useTranslate3d,A=i.viewBox,O=i.wrapperStyle,R=v??[];h&&R.length&&(R=l6(v.filter(function(L){return L.value!=null&&(L.hide!==!0||r.props.includeHidden)}),b,lie));var C=R.length>0;return Q.createElement(Zre,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:p,active:a,coordinate:d,hasPayload:C,offset:y,position:x,reverseDirection:T,useTranslate3d:_,viewBox:A,wrapperStyle:O},uie(u,LM(LM({},this.props),{},{payload:R})))}}])}(F.PureComponent);dw(mi,"displayName","Tooltip");dw(mi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!tu.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ES,DM;function cie(){if(DM)return ES;DM=1;var t=_i(),e=function(){return t.Date.now()};return ES=e,ES}var TS,IM;function fie(){if(IM)return TS;IM=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return TS=e,TS}var AS,PM;function die(){if(PM)return AS;PM=1;var t=fie(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return AS=n,AS}var wS,NM;function x6(){if(NM)return wS;NM=1;var t=die(),e=ts(),n=Zl(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=t(u);var h=a.test(u);return h||s.test(u)?o(u.slice(2),h?2:8):i.test(u)?r:+u}return wS=c,wS}var _S,MM;function hie(){if(MM)return _S;MM=1;var t=ts(),e=cie(),n=x6(),r="Expected a function",i=Math.max,a=Math.min;function s(o,c,u){var d,h,p,y,v,b,x=0,T=!1,_=!1,A=!0;if(typeof o!="function")throw new TypeError(r);c=n(c)||0,t(u)&&(T=!!u.leading,_="maxWait"in u,p=_?i(n(u.maxWait)||0,c):p,A="trailing"in u?!!u.trailing:A);function O(K){var W=d,Y=h;return d=h=void 0,x=K,y=o.apply(Y,W),y}function R(K){return x=K,v=setTimeout(P,c),T?O(K):y}function C(K){var W=K-b,Y=K-x,j=c-W;return _?a(j,p-Y):j}function L(K){var W=K-b,Y=K-x;return b===void 0||W>=c||W<0||_&&Y>=p}function P(){var K=e();if(L(K))return N(K);v=setTimeout(P,C(K))}function N(K){return v=void 0,A&&d?O(K):(d=h=void 0,y)}function k(){v!==void 0&&clearTimeout(v),x=0,d=b=h=v=void 0}function M(){return v===void 0?y:N(e())}function G(){var K=e(),W=L(K);if(d=arguments,h=this,b=K,W){if(v===void 0)return R(b);if(_)return clearTimeout(v),v=setTimeout(P,c),O(b)}return v===void 0&&(v=setTimeout(P,c)),y}return G.cancel=k,G.flush=M,G}return _S=s,_S}var RS,kM;function mie(){if(kM)return RS;kM=1;var t=hie(),e=ts(),n="Expected a function";function r(i,a,s){var o=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(s)&&(o="leading"in s?!!s.leading:o,c="trailing"in s?!!s.trailing:c),t(i,a,{leading:o,maxWait:a,trailing:c})}return RS=r,RS}var pie=mie();const b6=vt(pie);function Jc(t){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(t)}function jM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jM(Object(n),!0).forEach(function(r){gie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gie(t,e,n){return e=yie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yie(t){var e=vie(t,"string");return Jc(e)=="symbol"?e:e+""}function vie(t,e){if(Jc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xie(t,e){return Tie(t)||Eie(t,e)||Sie(t,e)||bie()}function bie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sie(t,e){if(t){if(typeof t=="string")return UM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UM(t,e)}}function UM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Eie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Tie(t){if(Array.isArray(t))return t}var Aie=F.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,c=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,p=t.maxHeight,y=t.children,v=t.debounce,b=v===void 0?0:v,x=t.id,T=t.className,_=t.onResize,A=t.style,O=A===void 0?{}:A,R=F.useRef(null),C=F.useRef();C.current=_,F.useImperativeHandle(e,function(){return Object.defineProperty(R.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),R.current},configurable:!0})});var L=F.useState({containerWidth:i.width,containerHeight:i.height}),P=xie(L,2),N=P[0],k=P[1],M=F.useCallback(function(K,W){k(function(Y){var j=Math.round(K),$=Math.round(W);return Y.containerWidth===j&&Y.containerHeight===$?Y:{containerWidth:j,containerHeight:$}})},[]);F.useEffect(function(){var K=function(Z){var B,V=Z[0].contentRect,H=V.width,te=V.height;M(H,te),(B=C.current)===null||B===void 0||B.call(C,H,te)};b>0&&(K=b6(K,b,{trailing:!0,leading:!1}));var W=new ResizeObserver(K),Y=R.current.getBoundingClientRect(),j=Y.width,$=Y.height;return M(j,$),W.observe(R.current),function(){W.disconnect()}},[M,b]);var G=F.useMemo(function(){var K=N.containerWidth,W=N.containerHeight;if(K<0||W<0)return null;ta(Us(s)||Us(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),ta(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Y=Us(s)?K:s,j=Us(c)?W:c;n&&n>0&&(Y?j=Y/n:j&&(Y=j*n),p&&j>p&&(j=p)),ta(Y>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,j,s,c,d,h,n);var $=!Array.isArray(y)&&ea(y.type).endsWith("Chart");return Q.Children.map(y,function(q){return Q.isValidElement(q)?F.cloneElement(q,Oh({width:Y,height:j},$?{style:Oh({height:"100%",width:"100%",maxHeight:j,maxWidth:Y},q.props.style)}:{})):q})},[n,y,c,p,h,d,N,s]);return Q.createElement("div",{id:x?"".concat(x):void 0,className:et("recharts-responsive-container",T),style:Oh(Oh({},O),{},{width:s,height:c,minWidth:d,minHeight:h,maxHeight:p}),ref:R},G)}),S6=function(e){return null};S6.displayName="Cell";function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function BM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BM(Object(n),!0).forEach(function(r){wie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wie(t,e,n){return e=_ie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ie(t){var e=Rie(t,"string");return ef(e)=="symbol"?e:e+""}function Rie(t,e){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zo={widthCache:{},cacheCount:0},Oie=2e3,Cie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},FM="recharts_measurement_span";function Lie(t){var e=MT({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Dc=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||tu.isSsr)return{width:0,height:0};var r=Lie(n),i=JSON.stringify({text:e,copyStyle:r});if(zo.widthCache[i])return zo.widthCache[i];try{var a=document.getElementById(FM);a||(a=document.createElement("span"),a.setAttribute("id",FM),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=MT(MT({},Cie),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),c={width:o.width,height:o.height};return zo.widthCache[i]=c,++zo.cacheCount>Oie&&(zo.cacheCount=0,zo.widthCache={}),c}catch{return{width:0,height:0}}},Die=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function Hm(t,e){return Mie(t)||Nie(t,e)||Pie(t,e)||Iie()}function Iie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pie(t,e){if(t){if(typeof t=="string")return $M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $M(t,e)}}function $M(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Mie(t){if(Array.isArray(t))return t}function kie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uie(r.key),r)}}function jie(t,e,n){return e&&GM(t.prototype,e),n&&GM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uie(t){var e=Bie(t,"string");return tf(e)=="symbol"?e:e+""}function Bie(t,e){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var VM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Fie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$ie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,E6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Gie=Object.keys(E6),sl="NaN";function Vie(t,e){return t*E6[e]}var Ch=function(){function t(e,n){kie(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Fie.test(n)&&(this.num=NaN,this.unit=""),Gie.includes(n)&&(this.num=Vie(e,n),this.unit="px")}return jie(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=$ie.exec(n))!==null&&r!==void 0?r:[],a=Hm(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function T6(t){if(t.includes(sl))return sl;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=VM.exec(e))!==null&&n!==void 0?n:[],i=Hm(r,4),a=i[1],s=i[2],o=i[3],c=Ch.parse(a??""),u=Ch.parse(o??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return sl;e=e.replace(VM,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,p=(h=qM.exec(e))!==null&&h!==void 0?h:[],y=Hm(p,4),v=y[1],b=y[2],x=y[3],T=Ch.parse(v??""),_=Ch.parse(x??""),A=b==="+"?T.add(_):T.subtract(_);if(A.isNaN())return sl;e=e.replace(qM,A.toString())}return e}var HM=/\(([^()]*)\)/;function qie(t){for(var e=t;e.includes("(");){var n=HM.exec(e),r=Hm(n,2),i=r[1];e=e.replace(HM,T6(i))}return e}function Hie(t){var e=t.replace(/\s+/g,"");return e=qie(e),e=T6(e),e}function zie(t){try{return Hie(t)}catch{return sl}}function OS(t){var e=zie(t.slice(5,-1));return e===sl?"":e}var Kie=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Yie=["dx","dy","angle","className","breakAll"];function kT(){return kT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kT.apply(this,arguments)}function zM(t,e){if(t==null)return{};var n=Wie(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function KM(t,e){return Jie(t)||Zie(t,e)||Qie(t,e)||Xie()}function Xie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qie(t,e){if(t){if(typeof t=="string")return YM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YM(t,e)}}function YM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Jie(t){if(Array.isArray(t))return t}var A6=/[ \f\n\r\t\v\u2028\u2029]+/,w6=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];Ye(n)||(r?a=n.toString().split(""):a=n.toString().split(A6));var s=a.map(function(c){return{word:c,width:Dc(c,i).width}}),o=r?0:Dc(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},eae=function(e,n,r,i,a){var s=e.maxLines,o=e.children,c=e.style,u=e.breakAll,d=ve(s),h=o,p=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(j,$){var q=$.word,Z=$.width,B=j[j.length-1];if(B&&(i==null||a||B.width+Z+r<Number(i)))B.words.push(q),B.width+=Z+r;else{var V={words:[q],width:Z};j.push(V)}return j},[])},y=p(n),v=function(Y){return Y.reduce(function(j,$){return j.width>$.width?j:$})};if(!d)return y;for(var b="…",x=function(Y){var j=h.slice(0,Y),$=w6({breakAll:u,style:c,children:j+b}).wordsWithComputedWidth,q=p($),Z=q.length>s||v(q).width>Number(i);return[Z,q]},T=0,_=h.length-1,A=0,O;T<=_&&A<=h.length-1;){var R=Math.floor((T+_)/2),C=R-1,L=x(C),P=KM(L,2),N=P[0],k=P[1],M=x(R),G=KM(M,1),K=G[0];if(!N&&!K&&(T=R+1),N&&K&&(_=R-1),!N&&K){O=k;break}A++}return O||y},WM=function(e){var n=Ye(e)?[]:e.toString().split(A6);return[{words:n}]},tae=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!tu.isSsr){var c,u,d=w6({breakAll:s,children:i,style:a});if(d){var h=d.wordsWithComputedWidth,p=d.spaceWidth;c=h,u=p}else return WM(i);return eae({breakAll:s,children:i,maxLines:o,style:a},c,u,n,r)}return WM(i)},XM="#808080",zm=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,p=e.textAnchor,y=p===void 0?"start":p,v=e.verticalAnchor,b=v===void 0?"end":v,x=e.fill,T=x===void 0?XM:x,_=zM(e,Kie),A=F.useMemo(function(){return tae({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:h,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,h,_.style,_.width]),O=_.dx,R=_.dy,C=_.angle,L=_.className,P=_.breakAll,N=zM(_,Yie);if(!tn(r)||!tn(a))return null;var k=r+(ve(O)?O:0),M=a+(ve(R)?R:0),G;switch(b){case"start":G=OS("calc(".concat(u,")"));break;case"middle":G=OS("calc(".concat((A.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:G=OS("calc(".concat(A.length-1," * -").concat(o,")"));break}var K=[];if(h){var W=A[0].width,Y=_.width;K.push("scale(".concat((ve(Y)?Y/W:1)/W,")"))}return C&&K.push("rotate(".concat(C,", ").concat(k,", ").concat(M,")")),K.length&&(N.transform=K.join(" ")),Q.createElement("text",kT({},We(N,!0),{x:k,y:M,className:et("recharts-text",L),textAnchor:y,fill:T.includes("url")?XM:T}),A.map(function(j,$){var q=j.words.join(P?"":" ");return Q.createElement("tspan",{x:k,dy:$===0?G:o,key:"".concat(q,"-").concat($)},q)}))};function Ka(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nae(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hw(t){let e,n,r;t.length!==2?(e=Ka,n=(o,c)=>Ka(t(o),c),r=(o,c)=>t(o)-c):(e=t===Ka||t===nae?t:rae,n=t,r=t);function i(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(o[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(o[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function s(o,c,u=0,d=o.length){const h=i(o,c,u,d-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function rae(){return 0}function _6(t){return t===null?NaN:+t}function*iae(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const aae=hw(Ka),Zf=aae.right;hw(_6).center;class QM extends Map{constructor(e,n=lae){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ZM(this,e))}has(e){return super.has(ZM(this,e))}set(e,n){return super.set(sae(this,e),n)}delete(e){return super.delete(oae(this,e))}}function ZM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function sae({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function oae({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function lae(t){return t!==null&&typeof t=="object"?t.valueOf():t}function uae(t=Ka){if(t===Ka)return R6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function R6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const cae=Math.sqrt(50),fae=Math.sqrt(10),dae=Math.sqrt(2);function Km(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=cae?10:a>=fae?5:a>=dae?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?Km(t,e,n*2):[o,c,u]}function jT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Km(e,t,n):Km(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function UT(t,e,n){return e=+e,t=+t,n=+n,Km(t,e,n)[2]}function BT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?UT(e,t,n):UT(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function JM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function ek(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function O6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?R6:uae(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),y=Math.max(n,Math.floor(e-u*h/c+p)),v=Math.min(r,Math.floor(e+(c-u)*h/c+p));O6(t,e,y,v,i)}const a=t[e];let s=n,o=r;for(fc(t,n,e),i(t[r],a)>0&&fc(t,n,r);s<o;){for(fc(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?fc(t,n,o):(++o,fc(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function fc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function hae(t,e,n){if(t=Float64Array.from(iae(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return ek(t);if(e>=1)return JM(t);var r,i=(r-1)*e,a=Math.floor(i),s=JM(O6(t,a).subarray(0,a+1)),o=ek(t.subarray(a+1));return s+(o-s)*(i-a)}}function mae(t,e,n=_6){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function pae(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Br(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ma(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const FT=Symbol("implicit");function mw(){var t=new QM,e=[],n=[],r=FT;function i(a){let s=t.get(a);if(s===void 0){if(r!==FT)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new QM;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return mw(e,n).unknown(r)},Br.apply(i,arguments),i}function nf(){var t=mw().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var p=e().length,y=i<r,v=y?i:r,b=y?r:i;a=(b-v)/Math.max(1,p-c+u*2),o&&(a=Math.floor(a)),v+=(b-v-a*(p-c))*d,s=a*(1-c),o&&(v=Math.round(v),s=Math.round(s));var x=pae(p).map(function(T){return v+a*T});return n(y?x.reverse():x)}return t.domain=function(p){return arguments.length?(e(p),h()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(p){return arguments.length?(o=!!p,h()):o},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),h()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),h()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,h()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),h()):d},t.copy=function(){return nf(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},Br.apply(h(),arguments)}function C6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return C6(e())},t}function Ic(){return C6(nf.apply(null,arguments).paddingInner(1))}function pw(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function L6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Jf(){}var rf=.7,Ym=1/rf,dl="\\s*([+-]?\\d+)\\s*",af="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gae=/^#([0-9a-f]{3,8})$/,yae=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),vae=new RegExp(`^rgb\\(${Ei},${Ei},${Ei}\\)$`),xae=new RegExp(`^rgba\\(${dl},${dl},${dl},${af}\\)$`),bae=new RegExp(`^rgba\\(${Ei},${Ei},${Ei},${af}\\)$`),Sae=new RegExp(`^hsl\\(${af},${Ei},${Ei}\\)$`),Eae=new RegExp(`^hsla\\(${af},${Ei},${Ei},${af}\\)$`),tk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pw(Jf,sf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nk,formatHex:nk,formatHex8:Tae,formatHsl:Aae,formatRgb:rk,toString:rk});function nk(){return this.rgb().formatHex()}function Tae(){return this.rgb().formatHex8()}function Aae(){return D6(this).formatHsl()}function rk(){return this.rgb().formatRgb()}function sf(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=gae.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ik(e):n===3?new Wn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Lh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Lh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yae.exec(t))?new Wn(e[1],e[2],e[3],1):(e=vae.exec(t))?new Wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xae.exec(t))?Lh(e[1],e[2],e[3],e[4]):(e=bae.exec(t))?Lh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Sae.exec(t))?ok(e[1],e[2]/100,e[3]/100,1):(e=Eae.exec(t))?ok(e[1],e[2]/100,e[3]/100,e[4]):tk.hasOwnProperty(t)?ik(tk[t]):t==="transparent"?new Wn(NaN,NaN,NaN,0):null}function ik(t){return new Wn(t>>16&255,t>>8&255,t&255,1)}function Lh(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wn(t,e,n,r)}function wae(t){return t instanceof Jf||(t=sf(t)),t?(t=t.rgb(),new Wn(t.r,t.g,t.b,t.opacity)):new Wn}function $T(t,e,n,r){return arguments.length===1?wae(t):new Wn(t,e,n,r??1)}function Wn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}pw(Wn,$T,L6(Jf,{brighter(t){return t=t==null?Ym:Math.pow(Ym,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?rf:Math.pow(rf,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wn(Hs(this.r),Hs(this.g),Hs(this.b),Wm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ak,formatHex:ak,formatHex8:_ae,formatRgb:sk,toString:sk}));function ak(){return`#${Bs(this.r)}${Bs(this.g)}${Bs(this.b)}`}function _ae(){return`#${Bs(this.r)}${Bs(this.g)}${Bs(this.b)}${Bs((isNaN(this.opacity)?1:this.opacity)*255)}`}function sk(){const t=Wm(this.opacity);return`${t===1?"rgb(":"rgba("}${Hs(this.r)}, ${Hs(this.g)}, ${Hs(this.b)}${t===1?")":`, ${t})`}`}function Wm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Hs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Bs(t){return t=Hs(t),(t<16?"0":"")+t.toString(16)}function ok(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qr(t,e,n,r)}function D6(t){if(t instanceof Qr)return new Qr(t.h,t.s,t.l,t.opacity);if(t instanceof Jf||(t=sf(t)),!t)return new Qr;if(t instanceof Qr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Qr(s,o,c,t.opacity)}function Rae(t,e,n,r){return arguments.length===1?D6(t):new Qr(t,e,n,r??1)}function Qr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}pw(Qr,Rae,L6(Jf,{brighter(t){return t=t==null?Ym:Math.pow(Ym,t),new Qr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?rf:Math.pow(rf,t),new Qr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wn(CS(t>=240?t-240:t+120,i,r),CS(t,i,r),CS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Qr(lk(this.h),Dh(this.s),Dh(this.l),Wm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wm(this.opacity);return`${t===1?"hsl(":"hsla("}${lk(this.h)}, ${Dh(this.s)*100}%, ${Dh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function lk(t){return t=(t||0)%360,t<0?t+360:t}function Dh(t){return Math.max(0,Math.min(1,t||0))}function CS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gw=t=>()=>t;function Oae(t,e){return function(n){return t+n*e}}function Cae(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Lae(t){return(t=+t)==1?I6:function(e,n){return n-e?Cae(e,n,t):gw(isNaN(e)?n:e)}}function I6(t,e){var n=e-t;return n?Oae(t,n):gw(isNaN(t)?e:t)}const uk=function t(e){var n=Lae(e);function r(i,a){var s=n((i=$T(i)).r,(a=$T(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=I6(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Dae(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Iae(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Pae(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=nu(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Nae(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xm(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Mae(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=nu(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var GT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,LS=new RegExp(GT.source,"g");function kae(t){return function(){return t}}function jae(t){return function(e){return t(e)+""}}function Uae(t,e){var n=GT.lastIndex=LS.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=GT.exec(t))&&(i=LS.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Xm(r,i)})),n=LS.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?jae(c[0].x):kae(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)o[(h=c[d]).i]=h.x(u);return o.join("")})}function nu(t,e){var n=typeof e,r;return e==null||n==="boolean"?gw(e):(n==="number"?Xm:n==="string"?(r=sf(e))?(e=r,uk):Uae:e instanceof sf?uk:e instanceof Date?Nae:Iae(e)?Dae:Array.isArray(e)?Pae:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Mae:Xm)(t,e)}function yw(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Bae(t,e){e===void 0&&(e=t,t=nu);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function Fae(t){return function(){return t}}function Qm(t){return+t}var ck=[0,1];function Fn(t){return t}function VT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Fae(isNaN(e)?NaN:.5)}function $ae(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Gae(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=VT(i,r),a=n(s,a)):(r=VT(r,i),a=n(a,s)),function(o){return a(r(o))}}function Vae(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=VT(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=Zf(t,o,1,r)-1;return a[c](i[c](o))}}function ed(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fg(){var t=ck,e=ck,n=nu,r,i,a,s=Fn,o,c,u;function d(){var p=Math.min(t.length,e.length);return s!==Fn&&(s=$ae(t[0],t[p-1])),o=p>2?Vae:Gae,c=u=null,h}function h(p){return p==null||isNaN(p=+p)?a:(c||(c=o(t.map(r),e,n)))(r(s(p)))}return h.invert=function(p){return s(i((u||(u=o(e,t.map(r),Xm)))(p)))},h.domain=function(p){return arguments.length?(t=Array.from(p,Qm),d()):t.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),n=yw,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Fn,d()):s!==Fn},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return r=p,i=y,d()}}function vw(){return fg()(Fn,Fn)}function qae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Zm(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Al(t){return t=Zm(Math.abs(t)),t?t[1]:NaN}function Hae(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function zae(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Kae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function of(t){if(!(e=Kae.exec(t)))throw new Error("invalid format: "+t);var e;return new xw({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}of.prototype=xw.prototype;function xw(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}xw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yae(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var P6;function Wae(t,e){var n=Zm(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(P6=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zm(t,Math.max(0,e+a-1))[0]}function fk(t,e){var n=Zm(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dk={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:qae,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>fk(t*100,e),r:fk,s:Wae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function hk(t){return t}var mk=Array.prototype.map,pk=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Xae(t){var e=t.grouping===void 0||t.thousands===void 0?hk:Hae(mk.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?hk:zae(mk.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=of(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,x=h.zero,T=h.width,_=h.comma,A=h.precision,O=h.trim,R=h.type;R==="n"?(_=!0,R="g"):dk[R]||(A===void 0&&(A=12),O=!0,R="g"),(x||p==="0"&&y==="=")&&(x=!0,p="0",y="=");var C=b==="$"?n:b==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",L=b==="$"?r:/[%p]/.test(R)?s:"",P=dk[R],N=/[defgprs%]/.test(R);A=A===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function k(M){var G=C,K=L,W,Y,j;if(R==="c")K=P(M)+K,M="";else{M=+M;var $=M<0||1/M<0;if(M=isNaN(M)?c:P(Math.abs(M),A),O&&(M=Yae(M)),$&&+M==0&&v!=="+"&&($=!1),G=($?v==="("?v:o:v==="-"||v==="("?"":v)+G,K=(R==="s"?pk[8+P6/3]:"")+K+($&&v==="("?")":""),N){for(W=-1,Y=M.length;++W<Y;)if(j=M.charCodeAt(W),48>j||j>57){K=(j===46?i+M.slice(W+1):M.slice(W))+K,M=M.slice(0,W);break}}}_&&!x&&(M=e(M,1/0));var q=G.length+M.length+K.length,Z=q<T?new Array(T-q+1).join(p):"";switch(_&&x&&(M=e(Z+M,Z.length?T-K.length:1/0),Z=""),y){case"<":M=G+M+K+Z;break;case"=":M=G+Z+M+K;break;case"^":M=Z.slice(0,q=Z.length>>1)+G+M+K+Z.slice(q);break;default:M=Z+G+M+K;break}return a(M)}return k.toString=function(){return h+""},k}function d(h,p){var y=u((h=of(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Al(p)/3)))*3,b=Math.pow(10,-v),x=pk[8+v/3];return function(T){return y(b*T)+x}}return{format:u,formatPrefix:d}}var Ih,bw,N6;Qae({thousands:",",grouping:[3],currency:["$",""]});function Qae(t){return Ih=Xae(t),bw=Ih.format,N6=Ih.formatPrefix,Ih}function Zae(t){return Math.max(0,-Al(Math.abs(t)))}function Jae(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Al(e)/3)))*3-Al(Math.abs(t)))}function ese(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Al(e)-Al(t))+1}function M6(t,e,n,r){var i=BT(t,e,n),a;switch(r=of(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Jae(i,s))&&(r.precision=a),N6(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ese(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Zae(i))&&(r.precision=a-(r.type==="%")*2);break}}return bw(r)}function rs(t){var e=t.domain;return t.ticks=function(n){var r=e();return jT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return M6(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=UT(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function Jm(){var t=vw();return t.copy=function(){return ed(t,Jm())},Br.apply(t,arguments),rs(t)}function k6(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Qm),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return k6(t).unknown(e)},t=arguments.length?Array.from(t,Qm):[0,1],rs(n)}function j6(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function gk(t){return Math.log(t)}function yk(t){return Math.exp(t)}function tse(t){return-Math.log(-t)}function nse(t){return-Math.exp(-t)}function rse(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ise(t){return t===10?rse:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ase(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function vk(t){return(e,n)=>-t(-e,n)}function Sw(t){const e=t(gk,yk),n=e.domain;let r=10,i,a;function s(){return i=ase(r),a=ise(r),n()[0]<0?(i=vk(i),a=vk(a),t(tse,nse)):t(gk,yk),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let p=i(u),y=i(d),v,b;const x=o==null?10:+o;let T=[];if(!(r%1)&&y-p<x){if(p=Math.floor(p),y=Math.ceil(y),u>0){for(;p<=y;++p)for(v=1;v<r;++v)if(b=p<0?v/a(-p):v*a(p),!(b<u)){if(b>d)break;T.push(b)}}else for(;p<=y;++p)for(v=r-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<u)){if(b>d)break;T.push(b)}T.length*2<x&&(T=jT(u,d,x))}else T=jT(p,y,Math.min(y-p,x)).map(a);return h?T.reverse():T},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=of(c)).precision==null&&(c.trim=!0),c=bw(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return d=>{let h=d/a(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>n(j6(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function U6(){const t=Sw(fg()).domain([1,10]);return t.copy=()=>ed(t,U6()).base(t.base()),Br.apply(t,arguments),t}function xk(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function bk(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Ew(t){var e=1,n=t(xk(e),bk(e));return n.constant=function(r){return arguments.length?t(xk(e=+r),bk(e)):e},rs(n)}function B6(){var t=Ew(fg());return t.copy=function(){return ed(t,B6()).constant(t.constant())},Br.apply(t,arguments)}function Sk(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function sse(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ose(t){return t<0?-t*t:t*t}function Tw(t){var e=t(Fn,Fn),n=1;function r(){return n===1?t(Fn,Fn):n===.5?t(sse,ose):t(Sk(n),Sk(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},rs(e)}function Aw(){var t=Tw(fg());return t.copy=function(){return ed(t,Aw()).exponent(t.exponent())},Br.apply(t,arguments),t}function lse(){return Aw.apply(null,arguments).exponent(.5)}function Ek(t){return Math.sign(t)*t*t}function use(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function F6(){var t=vw(),e=[0,1],n=!1,r;function i(a){var s=use(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(Ek(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Qm)).map(Ek)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return F6(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Br.apply(i,arguments),rs(i)}function $6(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=mae(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Zf(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Ka),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return $6().domain(t).range(e).unknown(r)},Br.apply(a,arguments)}function G6(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Zf(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return G6().domain([t,e]).range(i).unknown(a)},Br.apply(rs(s),arguments)}function V6(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Zf(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return V6().domain(t).range(e).unknown(n)},Br.apply(i,arguments)}const DS=new Date,IS=new Date;function on(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>on(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(DS.setTime(+a),IS.setTime(+s),t(DS),t(IS),Math.floor(n(DS,IS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const ep=on(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ep.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?on(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ep);ep.range;const Xi=1e3,Cr=Xi*60,Qi=Cr*60,sa=Qi*24,ww=sa*7,Tk=sa*30,PS=sa*365,Fs=on(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Xi)},(t,e)=>(e-t)/Xi,t=>t.getUTCSeconds());Fs.range;const _w=on(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xi)},(t,e)=>{t.setTime(+t+e*Cr)},(t,e)=>(e-t)/Cr,t=>t.getMinutes());_w.range;const Rw=on(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Cr)},(t,e)=>(e-t)/Cr,t=>t.getUTCMinutes());Rw.range;const Ow=on(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xi-t.getMinutes()*Cr)},(t,e)=>{t.setTime(+t+e*Qi)},(t,e)=>(e-t)/Qi,t=>t.getHours());Ow.range;const Cw=on(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Qi)},(t,e)=>(e-t)/Qi,t=>t.getUTCHours());Cw.range;const td=on(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Cr)/sa,t=>t.getDate()-1);td.range;const dg=on(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sa,t=>t.getUTCDate()-1);dg.range;const q6=on(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sa,t=>Math.floor(t/sa));q6.range;function no(t){return on(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Cr)/ww)}const hg=no(0),tp=no(1),cse=no(2),fse=no(3),wl=no(4),dse=no(5),hse=no(6);hg.range;tp.range;cse.range;fse.range;wl.range;dse.range;hse.range;function ro(t){return on(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ww)}const mg=ro(0),np=ro(1),mse=ro(2),pse=ro(3),_l=ro(4),gse=ro(5),yse=ro(6);mg.range;np.range;mse.range;pse.range;_l.range;gse.range;yse.range;const Lw=on(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Lw.range;const Dw=on(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Dw.range;const oa=on(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:on(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});oa.range;const la=on(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());la.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:on(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});la.range;function H6(t,e,n,r,i,a){const s=[[Fs,1,Xi],[Fs,5,5*Xi],[Fs,15,15*Xi],[Fs,30,30*Xi],[a,1,Cr],[a,5,5*Cr],[a,15,15*Cr],[a,30,30*Cr],[i,1,Qi],[i,3,3*Qi],[i,6,6*Qi],[i,12,12*Qi],[r,1,sa],[r,2,2*sa],[n,1,ww],[e,1,Tk],[e,3,3*Tk],[t,1,PS]];function o(u,d,h){const p=d<u;p&&([u,d]=[d,u]);const y=h&&typeof h.range=="function"?h:c(u,d,h),v=y?y.range(u,+d+1):[];return p?v.reverse():v}function c(u,d,h){const p=Math.abs(d-u)/h,y=hw(([,,x])=>x).right(s,p);if(y===s.length)return t.every(BT(u/PS,d/PS,h));if(y===0)return ep.every(Math.max(BT(u,d,h),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,c]}const[vse,xse]=H6(la,Dw,mg,q6,Cw,Rw),[bse,Sse]=H6(oa,Lw,hg,td,Ow,_w);function NS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function MS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function dc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ese(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=hc(i),d=mc(i),h=hc(a),p=mc(a),y=hc(s),v=mc(s),b=hc(o),x=mc(o),T=hc(c),_=mc(c),A={a:$,A:q,b:Z,B,c:null,d:Ck,e:Ck,f:Hse,g:toe,G:roe,H:Gse,I:Vse,j:qse,L:z6,m:zse,M:Kse,p:V,q:H,Q:Ik,s:Pk,S:Yse,u:Wse,U:Xse,V:Qse,w:Zse,W:Jse,x:null,X:null,y:eoe,Y:noe,Z:ioe,"%":Dk},O={a:te,A:ce,b:ye,B:ge,c:null,d:Lk,e:Lk,f:loe,g:voe,G:boe,H:aoe,I:soe,j:ooe,L:Y6,m:uoe,M:coe,p:Me,q:Re,Q:Ik,s:Pk,S:foe,u:doe,U:hoe,V:moe,w:poe,W:goe,x:null,X:null,y:yoe,Y:xoe,Z:Soe,"%":Dk},R={a:k,A:M,b:G,B:K,c:W,d:Rk,e:Rk,f:Use,g:_k,G:wk,H:Ok,I:Ok,j:Nse,L:jse,m:Pse,M:Mse,p:N,q:Ise,Q:Fse,s:$se,S:kse,u:Rse,U:Ose,V:Cse,w:_se,W:Lse,x:Y,X:j,y:_k,Y:wk,Z:Dse,"%":Bse};A.x=C(n,A),A.X=C(r,A),A.c=C(e,A),O.x=C(n,O),O.X=C(r,O),O.c=C(e,O);function C(pe,Ae){return function(Oe){var me=[],rt=-1,Be=0,It=pe.length,_e,je,Rt;for(Oe instanceof Date||(Oe=new Date(+Oe));++rt<It;)pe.charCodeAt(rt)===37&&(me.push(pe.slice(Be,rt)),(je=Ak[_e=pe.charAt(++rt)])!=null?_e=pe.charAt(++rt):je=_e==="e"?" ":"0",(Rt=Ae[_e])&&(_e=Rt(Oe,je)),me.push(_e),Be=rt+1);return me.push(pe.slice(Be,rt)),me.join("")}}function L(pe,Ae){return function(Oe){var me=dc(1900,void 0,1),rt=P(me,pe,Oe+="",0),Be,It;if(rt!=Oe.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Ae&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Be=MS(dc(me.y,0,1)),It=Be.getUTCDay(),Be=It>4||It===0?np.ceil(Be):np(Be),Be=dg.offset(Be,(me.V-1)*7),me.y=Be.getUTCFullYear(),me.m=Be.getUTCMonth(),me.d=Be.getUTCDate()+(me.w+6)%7):(Be=NS(dc(me.y,0,1)),It=Be.getDay(),Be=It>4||It===0?tp.ceil(Be):tp(Be),Be=td.offset(Be,(me.V-1)*7),me.y=Be.getFullYear(),me.m=Be.getMonth(),me.d=Be.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),It="Z"in me?MS(dc(me.y,0,1)).getUTCDay():NS(dc(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(It+5)%7:me.w+me.U*7-(It+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,MS(me)):NS(me)}}function P(pe,Ae,Oe,me){for(var rt=0,Be=Ae.length,It=Oe.length,_e,je;rt<Be;){if(me>=It)return-1;if(_e=Ae.charCodeAt(rt++),_e===37){if(_e=Ae.charAt(rt++),je=R[_e in Ak?Ae.charAt(rt++):_e],!je||(me=je(pe,Oe,me))<0)return-1}else if(_e!=Oe.charCodeAt(me++))return-1}return me}function N(pe,Ae,Oe){var me=u.exec(Ae.slice(Oe));return me?(pe.p=d.get(me[0].toLowerCase()),Oe+me[0].length):-1}function k(pe,Ae,Oe){var me=y.exec(Ae.slice(Oe));return me?(pe.w=v.get(me[0].toLowerCase()),Oe+me[0].length):-1}function M(pe,Ae,Oe){var me=h.exec(Ae.slice(Oe));return me?(pe.w=p.get(me[0].toLowerCase()),Oe+me[0].length):-1}function G(pe,Ae,Oe){var me=T.exec(Ae.slice(Oe));return me?(pe.m=_.get(me[0].toLowerCase()),Oe+me[0].length):-1}function K(pe,Ae,Oe){var me=b.exec(Ae.slice(Oe));return me?(pe.m=x.get(me[0].toLowerCase()),Oe+me[0].length):-1}function W(pe,Ae,Oe){return P(pe,e,Ae,Oe)}function Y(pe,Ae,Oe){return P(pe,n,Ae,Oe)}function j(pe,Ae,Oe){return P(pe,r,Ae,Oe)}function $(pe){return s[pe.getDay()]}function q(pe){return a[pe.getDay()]}function Z(pe){return c[pe.getMonth()]}function B(pe){return o[pe.getMonth()]}function V(pe){return i[+(pe.getHours()>=12)]}function H(pe){return 1+~~(pe.getMonth()/3)}function te(pe){return s[pe.getUTCDay()]}function ce(pe){return a[pe.getUTCDay()]}function ye(pe){return c[pe.getUTCMonth()]}function ge(pe){return o[pe.getUTCMonth()]}function Me(pe){return i[+(pe.getUTCHours()>=12)]}function Re(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Ae=C(pe+="",A);return Ae.toString=function(){return pe},Ae},parse:function(pe){var Ae=L(pe+="",!1);return Ae.toString=function(){return pe},Ae},utcFormat:function(pe){var Ae=C(pe+="",O);return Ae.toString=function(){return pe},Ae},utcParse:function(pe){var Ae=L(pe+="",!0);return Ae.toString=function(){return pe},Ae}}}var Ak={"-":"",_:" ",0:"0"},gn=/^\s*\d+/,Tse=/^%/,Ase=/[\\^$*+?|[\]().{}]/g;function tt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function wse(t){return t.replace(Ase,"\\$&")}function hc(t){return new RegExp("^(?:"+t.map(wse).join("|")+")","i")}function mc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function _se(t,e,n){var r=gn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Rse(t,e,n){var r=gn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Ose(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Cse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Lse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function wk(t,e,n){var r=gn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function _k(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Dse(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ise(t,e,n){var r=gn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Pse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Rk(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Nse(t,e,n){var r=gn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Ok(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Mse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function kse(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function jse(t,e,n){var r=gn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Use(t,e,n){var r=gn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Bse(t,e,n){var r=Tse.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Fse(t,e,n){var r=gn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function $se(t,e,n){var r=gn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Ck(t,e){return tt(t.getDate(),e,2)}function Gse(t,e){return tt(t.getHours(),e,2)}function Vse(t,e){return tt(t.getHours()%12||12,e,2)}function qse(t,e){return tt(1+td.count(oa(t),t),e,3)}function z6(t,e){return tt(t.getMilliseconds(),e,3)}function Hse(t,e){return z6(t,e)+"000"}function zse(t,e){return tt(t.getMonth()+1,e,2)}function Kse(t,e){return tt(t.getMinutes(),e,2)}function Yse(t,e){return tt(t.getSeconds(),e,2)}function Wse(t){var e=t.getDay();return e===0?7:e}function Xse(t,e){return tt(hg.count(oa(t)-1,t),e,2)}function K6(t){var e=t.getDay();return e>=4||e===0?wl(t):wl.ceil(t)}function Qse(t,e){return t=K6(t),tt(wl.count(oa(t),t)+(oa(t).getDay()===4),e,2)}function Zse(t){return t.getDay()}function Jse(t,e){return tt(tp.count(oa(t)-1,t),e,2)}function eoe(t,e){return tt(t.getFullYear()%100,e,2)}function toe(t,e){return t=K6(t),tt(t.getFullYear()%100,e,2)}function noe(t,e){return tt(t.getFullYear()%1e4,e,4)}function roe(t,e){var n=t.getDay();return t=n>=4||n===0?wl(t):wl.ceil(t),tt(t.getFullYear()%1e4,e,4)}function ioe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function Lk(t,e){return tt(t.getUTCDate(),e,2)}function aoe(t,e){return tt(t.getUTCHours(),e,2)}function soe(t,e){return tt(t.getUTCHours()%12||12,e,2)}function ooe(t,e){return tt(1+dg.count(la(t),t),e,3)}function Y6(t,e){return tt(t.getUTCMilliseconds(),e,3)}function loe(t,e){return Y6(t,e)+"000"}function uoe(t,e){return tt(t.getUTCMonth()+1,e,2)}function coe(t,e){return tt(t.getUTCMinutes(),e,2)}function foe(t,e){return tt(t.getUTCSeconds(),e,2)}function doe(t){var e=t.getUTCDay();return e===0?7:e}function hoe(t,e){return tt(mg.count(la(t)-1,t),e,2)}function W6(t){var e=t.getUTCDay();return e>=4||e===0?_l(t):_l.ceil(t)}function moe(t,e){return t=W6(t),tt(_l.count(la(t),t)+(la(t).getUTCDay()===4),e,2)}function poe(t){return t.getUTCDay()}function goe(t,e){return tt(np.count(la(t)-1,t),e,2)}function yoe(t,e){return tt(t.getUTCFullYear()%100,e,2)}function voe(t,e){return t=W6(t),tt(t.getUTCFullYear()%100,e,2)}function xoe(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function boe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?_l(t):_l.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function Soe(){return"+0000"}function Dk(){return"%"}function Ik(t){return+t}function Pk(t){return Math.floor(+t/1e3)}var Ko,X6,Q6;Eoe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Eoe(t){return Ko=Ese(t),X6=Ko.format,Ko.parse,Q6=Ko.utcFormat,Ko.utcParse,Ko}function Toe(t){return new Date(t)}function Aoe(t){return t instanceof Date?+t:+new Date(+t)}function Iw(t,e,n,r,i,a,s,o,c,u){var d=vw(),h=d.invert,p=d.domain,y=u(".%L"),v=u(":%S"),b=u("%I:%M"),x=u("%I %p"),T=u("%a %d"),_=u("%b %d"),A=u("%B"),O=u("%Y");function R(C){return(c(C)<C?y:o(C)<C?v:s(C)<C?b:a(C)<C?x:r(C)<C?i(C)<C?T:_:n(C)<C?A:O)(C)}return d.invert=function(C){return new Date(h(C))},d.domain=function(C){return arguments.length?p(Array.from(C,Aoe)):p().map(Toe)},d.ticks=function(C){var L=p();return t(L[0],L[L.length-1],C??10)},d.tickFormat=function(C,L){return L==null?R:u(L)},d.nice=function(C){var L=p();return(!C||typeof C.range!="function")&&(C=e(L[0],L[L.length-1],C??10)),C?p(j6(L,C)):d},d.copy=function(){return ed(d,Iw(t,e,n,r,i,a,s,o,c,u))},d}function woe(){return Br.apply(Iw(bse,Sse,oa,Lw,hg,td,Ow,_w,Fs,X6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _oe(){return Br.apply(Iw(vse,xse,la,Dw,mg,dg,Cw,Rw,Fs,Q6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pg(){var t=0,e=1,n,r,i,a,s=Fn,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),u):[s(0),s(1)]}}return u.range=d(nu),u.rangeRound=d(yw),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function is(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Z6(){var t=rs(pg()(Fn));return t.copy=function(){return is(t,Z6())},ma.apply(t,arguments)}function J6(){var t=Sw(pg()).domain([1,10]);return t.copy=function(){return is(t,J6()).base(t.base())},ma.apply(t,arguments)}function e5(){var t=Ew(pg());return t.copy=function(){return is(t,e5()).constant(t.constant())},ma.apply(t,arguments)}function Pw(){var t=Tw(pg());return t.copy=function(){return is(t,Pw()).exponent(t.exponent())},ma.apply(t,arguments)}function Roe(){return Pw.apply(null,arguments).exponent(.5)}function t5(){var t=[],e=Fn;function n(r){if(r!=null&&!isNaN(r=+r))return e((Zf(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ka),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>hae(t,a/r))},n.copy=function(){return t5(e).domain(t)},ma.apply(n,arguments)}function gg(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Fn,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(r*b<r*a?o:c),u(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([t,e,n]=b,i=d(t=+t),a=d(e=+e),s=d(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y):[t,e,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(u=b,y):u};function v(b){return function(x){var T,_,A;return arguments.length?([T,_,A]=x,u=Bae(b,[T,_,A]),y):[u(0),u(.5),u(1)]}}return y.range=v(nu),y.rangeRound=v(yw),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,i=b(t),a=b(e),s=b(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y}}function n5(){var t=rs(gg()(Fn));return t.copy=function(){return is(t,n5())},ma.apply(t,arguments)}function r5(){var t=Sw(gg()).domain([.1,1,10]);return t.copy=function(){return is(t,r5()).base(t.base())},ma.apply(t,arguments)}function i5(){var t=Ew(gg());return t.copy=function(){return is(t,i5()).constant(t.constant())},ma.apply(t,arguments)}function Nw(){var t=Tw(gg());return t.copy=function(){return is(t,Nw()).exponent(t.exponent())},ma.apply(t,arguments)}function Ooe(){return Nw.apply(null,arguments).exponent(.5)}const Nk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nf,scaleDiverging:n5,scaleDivergingLog:r5,scaleDivergingPow:Nw,scaleDivergingSqrt:Ooe,scaleDivergingSymlog:i5,scaleIdentity:k6,scaleImplicit:FT,scaleLinear:Jm,scaleLog:U6,scaleOrdinal:mw,scalePoint:Ic,scalePow:Aw,scaleQuantile:$6,scaleQuantize:G6,scaleRadial:F6,scaleSequential:Z6,scaleSequentialLog:J6,scaleSequentialPow:Pw,scaleSequentialQuantile:t5,scaleSequentialSqrt:Roe,scaleSequentialSymlog:e5,scaleSqrt:lse,scaleSymlog:B6,scaleThreshold:V6,scaleTime:woe,scaleUtc:_oe,tickFormat:M6},Symbol.toStringTag,{value:"Module"}));var kS,Mk;function a5(){if(Mk)return kS;Mk=1;var t=Zl();function e(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],c=r(o);if(c!=null&&(u===void 0?c===c&&!t(c):i(c,u)))var u=c,d=o}return d}return kS=e,kS}var jS,kk;function Coe(){if(kk)return jS;kk=1;function t(e,n){return e>n}return jS=t,jS}var US,jk;function Loe(){if(jk)return US;jk=1;var t=a5(),e=Coe(),n=eu();function r(i){return i&&i.length?t(i,n,e):void 0}return US=r,US}var Doe=Loe();const yg=vt(Doe);var BS,Uk;function Ioe(){if(Uk)return BS;Uk=1;function t(e,n){return e<n}return BS=t,BS}var FS,Bk;function Poe(){if(Bk)return FS;Bk=1;var t=a5(),e=Ioe(),n=eu();function r(i){return i&&i.length?t(i,n,e):void 0}return FS=r,FS}var Noe=Poe();const vg=vt(Noe);var $S,Fk;function Moe(){if(Fk)return $S;Fk=1;var t=X1(),e=ns(),n=h6(),r=Zn();function i(a,s){var o=r(a)?t:n;return o(a,e(s,3))}return $S=i,$S}var GS,$k;function koe(){if($k)return GS;$k=1;var t=f6(),e=Moe();function n(r,i){return t(e(r,i),1)}return GS=n,GS}var joe=koe();const Uoe=vt(joe);var VS,Gk;function Boe(){if(Gk)return VS;Gk=1;var t=uw();function e(n,r){return t(n,r)}return VS=e,VS}var Foe=Boe();const xg=vt(Foe);var ru=1e9,$oe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},kw,wt=!0,kr="[DecimalError] ",zs=kr+"Invalid argument: ",Mw=kr+"Exponent out of range: ",iu=Math.floor,Is=Math.pow,Goe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,cr,mn=1e7,Et=7,s5=9007199254740991,rp=iu(s5/Et),be={};be.absoluteValue=be.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};be.comparedTo=be.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};be.decimalPlaces=be.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Et;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};be.dividedBy=be.div=function(t){return na(this,new this.constructor(t))};be.dividedToIntegerBy=be.idiv=function(t){var e=this,n=e.constructor;return yt(na(e,new n(t),0,1),n.precision)};be.equals=be.eq=function(t){return!this.cmp(t)};be.exponent=function(){return Yt(this)};be.greaterThan=be.gt=function(t){return this.cmp(t)>0};be.greaterThanOrEqualTo=be.gte=function(t){return this.cmp(t)>=0};be.isInteger=be.isint=function(){return this.e>this.d.length-2};be.isNegative=be.isneg=function(){return this.s<0};be.isPositive=be.ispos=function(){return this.s>0};be.isZero=function(){return this.s===0};be.lessThan=be.lt=function(t){return this.cmp(t)<0};be.lessThanOrEqualTo=be.lte=function(t){return this.cmp(t)<1};be.logarithm=be.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(cr))throw Error(kr+"NaN");if(n.s<1)throw Error(kr+(n.s?"NaN":"-Infinity"));return n.eq(cr)?new r(0):(wt=!1,e=na(lf(n,a),lf(t,a),a),wt=!0,yt(e,i))};be.minus=be.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?u5(e,t):o5(e,(t.s=-t.s,t))};be.modulo=be.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(kr+"NaN");return n.s?(wt=!1,e=na(n,t,0,1).times(t),wt=!0,n.minus(e)):yt(new r(n),i)};be.naturalExponential=be.exp=function(){return l5(this)};be.naturalLogarithm=be.ln=function(){return lf(this)};be.negated=be.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};be.plus=be.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?o5(e,t):u5(e,(t.s=-t.s,t))};be.precision=be.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(zs+t);if(e=Yt(i)+1,r=i.d.length-1,n=r*Et+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};be.squareRoot=be.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(kr+"NaN")}for(t=Yt(o),wt=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=gi(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=iu((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(na(o,a,s+2)).times(.5),gi(a.d).slice(0,s)===(e=gi(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(yt(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return wt=!0,yt(r,n)};be.times=be.mul=function(t){var e,n,r,i,a,s,o,c,u,d=this,h=d.constructor,p=d.d,y=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,c=p.length,u=y.length,c<u&&(a=p,p=y,y=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+y[r]*p[i-r-1]+e,a[i--]=o%mn|0,e=o/mn|0;a[i]=(a[i]+e)%mn|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,wt?yt(t,h.precision):t};be.toDecimalPlaces=be.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ai(t,0,ru),e===void 0?e=r.rounding:Ai(e,0,8),yt(n,t+Yt(n)+1,e))};be.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Qs(r,!0):(Ai(t,0,ru),e===void 0?e=i.rounding:Ai(e,0,8),r=yt(new i(r),t+1,e),n=Qs(r,!0,t+1)),n};be.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Qs(i):(Ai(t,0,ru),e===void 0?e=a.rounding:Ai(e,0,8),r=yt(new a(i),t+Yt(i)+1,e),n=Qs(r.abs(),!1,t+Yt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};be.toInteger=be.toint=function(){var t=this,e=t.constructor;return yt(new e(t),Yt(t)+1,e.rounding)};be.toNumber=function(){return+this};be.toPower=be.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(cr);if(o=new c(o),!o.s){if(t.s<1)throw Error(kr+"Infinity");return o}if(o.eq(cr))return o;if(r=c.precision,t.eq(cr))return yt(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=d<0?-d:d)<=s5){for(i=new c(cr),e=Math.ceil(r/Et+4),wt=!1;n%2&&(i=i.times(o),qk(i.d,e)),n=iu(n/2),n!==0;)o=o.times(o),qk(o.d,e);return wt=!0,t.s<0?new c(cr).div(i):yt(i,r)}}else if(a<0)throw Error(kr+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,wt=!1,i=t.times(lf(o,r+u)),wt=!0,i=l5(i),i.s=a,i};be.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Yt(i),r=Qs(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ai(t,1,ru),e===void 0?e=a.rounding:Ai(e,0,8),i=yt(new a(i),t,e),n=Yt(i),r=Qs(i,t<=n||n<=a.toExpNeg,t)),r};be.toSignificantDigits=be.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ai(t,1,ru),e===void 0?e=r.rounding:Ai(e,0,8)),yt(new r(n),t,e)};be.toString=be.valueOf=be.val=be.toJSON=be[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Yt(t),n=t.constructor;return Qs(t,e<=n.toExpNeg||e>=n.toExpPos)};function o5(t,e){var n,r,i,a,s,o,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),wt?yt(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/Et),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/mn|0,c[a]%=mn;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,wt?yt(e,h):e}function Ai(t,e,n){if(t!==~~t||t<e||t>n)throw Error(zs+t)}function gi(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=Et-r.length,n&&(a+=Ga(n)),a+=r;s=t[e],r=s+"",n=Et-r.length,n&&(a+=Ga(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var na=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%mn|0,s=a/mn|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*mn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,d,h,p,y,v,b,x,T,_,A,O,R,C,L,P,N=r.constructor,k=r.s==i.s?1:-1,M=r.d,G=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(kr+"Division by zero");for(c=r.e-i.e,L=G.length,R=M.length,y=new N(k),v=y.d=[],u=0;G[u]==(M[u]||0);)++u;if(G[u]>(M[u]||0)&&--c,a==null?_=a=N.precision:s?_=a+(Yt(r)-Yt(i))+1:_=a,_<0)return new N(0);if(_=_/Et+2|0,u=0,L==1)for(d=0,G=G[0],_++;(u<R||d)&&_--;u++)A=d*mn+(M[u]||0),v[u]=A/G|0,d=A%G|0;else{for(d=mn/(G[0]+1)|0,d>1&&(G=t(G,d),M=t(M,d),L=G.length,R=M.length),O=L,b=M.slice(0,L),x=b.length;x<L;)b[x++]=0;P=G.slice(),P.unshift(0),C=G[0],G[1]>=mn/2&&++C;do d=0,o=e(G,b,L,x),o<0?(T=b[0],L!=x&&(T=T*mn+(b[1]||0)),d=T/C|0,d>1?(d>=mn&&(d=mn-1),h=t(G,d),p=h.length,x=b.length,o=e(h,b,p,x),o==1&&(d--,n(h,L<p?P:G,p))):(d==0&&(o=d=1),h=G.slice()),p=h.length,p<x&&h.unshift(0),n(b,h,x),o==-1&&(x=b.length,o=e(G,b,L,x),o<1&&(d++,n(b,L<x?P:G,x))),x=b.length):o===0&&(d++,b=[0]),v[u++]=d,o&&b[0]?b[x++]=M[O]||0:(b=[M[O]],x=1);while((O++<R||b[0]!==void 0)&&_--)}return v[0]||v.shift(),y.e=c,yt(y,s?a+Yt(y)+1:a)}}();function l5(t,e){var n,r,i,a,s,o,c=0,u=0,d=t.constructor,h=d.precision;if(Yt(t)>16)throw Error(Mw+Yt(t));if(!t.s)return new d(cr);for(wt=!1,o=h,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(Is(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new d(cr),d.precision=o;;){if(i=yt(i.times(t),o),n=n.times(++c),s=a.plus(na(i,n,o)),gi(s.d).slice(0,o)===gi(a.d).slice(0,o)){for(;u--;)a=yt(a.times(a),o);return d.precision=h,e==null?(wt=!0,yt(a,h)):a}a=s}}function Yt(t){for(var e=t.e*Et,n=t.d[0];n>=10;n/=10)e++;return e}function qS(t,e,n){if(e>t.LN10.sd())throw wt=!0,n&&(t.precision=n),Error(kr+"LN10 precision limit exceeded");return yt(new t(t.LN10),e)}function Ga(t){for(var e="";t--;)e+="0";return e}function lf(t,e){var n,r,i,a,s,o,c,u,d,h=1,p=10,y=t,v=y.d,b=y.constructor,x=b.precision;if(y.s<1)throw Error(kr+(y.s?"NaN":"-Infinity"));if(y.eq(cr))return new b(0);if(e==null?(wt=!1,u=x):u=e,y.eq(10))return e==null&&(wt=!0),qS(b,u);if(u+=p,b.precision=u,n=gi(v),r=n.charAt(0),a=Yt(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(t),n=gi(y.d),r=n.charAt(0),h++;a=Yt(y),r>1?(y=new b("0."+n),a++):y=new b(r+"."+n.slice(1))}else return c=qS(b,u+2,x).times(a+""),y=lf(new b(r+"."+n.slice(1)),u-p).plus(c),b.precision=x,e==null?(wt=!0,yt(y,x)):y;for(o=s=y=na(y.minus(cr),y.plus(cr),u),d=yt(y.times(y),u),i=3;;){if(s=yt(s.times(d),u),c=o.plus(na(s,new b(i),u)),gi(c.d).slice(0,u)===gi(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(qS(b,u+2,x).times(a+""))),o=na(o,new b(h),u),b.precision=x,e==null?(wt=!0,yt(o,x)):o;o=c,i+=2}}function Vk(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=iu(n/Et),t.d=[],r=(n+1)%Et,n<0&&(r+=Et),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Et;r<i;)t.d.push(+e.slice(r,r+=Et));e=e.slice(r),r=Et-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),wt&&(t.e>rp||t.e<-rp))throw Error(Mw+n)}else t.s=0,t.e=0,t.d=[0];return t}function yt(t,e,n){var r,i,a,s,o,c,u,d,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=Et,i=e,u=h[d=0];else{if(d=Math.ceil((r+1)/Et),a=h.length,d>=a)return t;for(u=a=h[d],s=1;a>=10;a/=10)s++;r%=Et,i=r-Et+s}if(n!==void 0&&(a=Is(10,s-i-1),o=u/a%10|0,c=e<0||h[d+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/Is(10,s-i):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=Yt(t),h.length=1,e=e-a-1,h[0]=Is(10,(Et-e%Et)%Et),t.e=iu(-e/Et)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=Is(10,Et-r),h[d]=i>0?(u/Is(10,s-i)%Is(10,i)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==mn&&(h[0]=1,++t.e);break}else{if(h[d]+=a,h[d]!=mn)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(wt&&(t.e>rp||t.e<-rp))throw Error(Mw+Yt(t));return t}function u5(t,e){var n,r,i,a,s,o,c,u,d,h,p=t.constructor,y=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),wt?yt(e,y):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(d=s<0,d?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(y/Et),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}s=0}for(d&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=mn-1;--c[a],c[i]+=mn}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,wt?yt(e,y):e):new p(0)}function Qs(t,e,n){var r,i=Yt(t),a=gi(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ga(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ga(-i-1)+a,n&&(r=n-s)>0&&(a+=Ga(r))):i>=s?(a+=Ga(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Ga(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Ga(r))),t.s<0?"-"+a:a}function qk(t,e){if(t.length>e)return t.length=e,!0}function c5(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(zs+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return Vk(s,a.toString())}else if(typeof a!="string")throw Error(zs+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Goe.test(a))Vk(s,a);else throw Error(zs+a)}if(i.prototype=be,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=c5,i.config=i.set=Voe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Voe(t){if(!t||typeof t!="object")throw Error(kr+"Object expected");var e,n,r,i=["precision",1,ru,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(iu(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(zs+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(zs+n+": "+r);return this}var kw=c5($oe);cr=new kw(1);const mt=kw;function qoe(t){return Yoe(t)||Koe(t)||zoe(t)||Hoe()}function Hoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zoe(t,e){if(t){if(typeof t=="string")return qT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qT(t,e)}}function Koe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Yoe(t){if(Array.isArray(t))return qT(t)}function qT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Woe=function(e){return e},f5={},d5=function(e){return e===f5},Hk=function(e){return function n(){return arguments.length===0||arguments.length===1&&d5(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Xoe=function t(e,n){return e===1?n:Hk(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==f5}).length;return s>=e?n.apply(void 0,i):t(e-s,Hk(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=i.map(function(h){return d5(h)?c.shift():h});return n.apply(void 0,qoe(d).concat(c))}))})},bg=function(e){return Xoe(e.length,e)},HT=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Qoe=bg(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Zoe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Woe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,c){return c(o)},a.apply(void 0,arguments))}},zT=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},h5=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,c){return o===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function Joe(t){var e;return t===0?e=1:e=Math.floor(new mt(t).abs().log(10).toNumber())+1,e}function ele(t,e,n){for(var r=new mt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var tle=bg(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),nle=bg(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),rle=bg(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Sg={rangeStep:ele,getDigitCount:Joe,interpolateNumber:tle,uninterpolateNumber:nle,uninterpolateTruncation:rle};function KT(t){return sle(t)||ale(t)||m5(t)||ile()}function ile(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ale(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function sle(t){if(Array.isArray(t))return YT(t)}function uf(t,e){return ule(t)||lle(t,e)||m5(t,e)||ole()}function ole(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m5(t,e){if(t){if(typeof t=="string")return YT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YT(t,e)}}function YT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lle(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function ule(t){if(Array.isArray(t))return t}function p5(t){var e=uf(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function g5(t,e,n){if(t.lte(0))return new mt(0);var r=Sg.getDigitCount(t.toNumber()),i=new mt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new mt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?c:new mt(Math.ceil(c))}function cle(t,e,n){var r=1,i=new mt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new mt(10).pow(Sg.getDigitCount(t)-1),i=new mt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new mt(Math.floor(t)))}else t===0?i=new mt(Math.floor((e-1)/2)):n||(i=new mt(Math.floor(t)));var s=Math.floor((e-1)/2),o=Zoe(Qoe(function(c){return i.add(new mt(c-s).mul(r)).toNumber()}),HT);return o(0,e)}function y5(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var a=g5(new mt(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new mt(0):(s=new mt(t).add(e).div(2),s=s.sub(new mt(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),c=Math.ceil(new mt(e).sub(s).div(a).toNumber()),u=o+c+1;return u>n?y5(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new mt(o).mul(a)),tickMax:s.add(new mt(c).mul(a))})}function fle(t){var e=uf(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=p5([n,r]),c=uf(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(KT(HT(0,i-1).map(function(){return 1/0}))):[].concat(KT(HT(0,i-1).map(function(){return-1/0})),[d]);return n>r?zT(h):h}if(u===d)return cle(u,i,a);var p=y5(u,d,s,a),y=p.step,v=p.tickMin,b=p.tickMax,x=Sg.rangeStep(v,b.add(new mt(.1).mul(y)),y);return n>r?zT(x):x}function dle(t,e){var n=uf(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=p5([r,i]),o=uf(s,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),h=g5(new mt(u).sub(c).div(d-1),a,0),p=[].concat(KT(Sg.rangeStep(new mt(c),new mt(u).sub(new mt(.99).mul(h)),h)),[u]);return r>i?zT(p):p}var hle=h5(fle),mle=h5(dle),ple="Invariant failed";function Zs(t,e){throw new Error(ple)}var gle=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ip.apply(this,arguments)}function yle(t,e){return Sle(t)||ble(t,e)||xle(t,e)||vle()}function vle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xle(t,e){if(t){if(typeof t=="string")return zk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zk(t,e)}}function zk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ble(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Sle(t){if(Array.isArray(t))return t}function Ele(t,e){if(t==null)return{};var n=Tle(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ale(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b5(r.key),r)}}function _le(t,e,n){return e&&wle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rle(t,e,n){return e=ap(e),Ole(t,v5()?Reflect.construct(e,n||[],ap(t).constructor):e.apply(t,n))}function Ole(t,e){if(e&&(Rl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cle(t)}function Cle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v5=function(){return!!t})()}function ap(t){return ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ap(t)}function Lle(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WT(t,e)}function WT(t,e){return WT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},WT(t,e)}function x5(t,e,n){return e=b5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b5(t){var e=Dle(t,"string");return Rl(e)=="symbol"?e:e+""}function Dle(t,e){if(Rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nd=function(t){function e(){return Ale(this,e),Rle(this,e,arguments)}return Lle(e,t),_le(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,p=Ele(r,gle),y=We(p,!1);this.props.direction==="x"&&d.type!=="number"&&Zs();var v=c.map(function(b){var x=u(b,o),T=x.x,_=x.y,A=x.value,O=x.errorVal;if(!O)return null;var R=[],C,L;if(Array.isArray(O)){var P=yle(O,2);C=P[0],L=P[1]}else C=L=O;if(a==="vertical"){var N=d.scale,k=_+i,M=k+s,G=k-s,K=N(A-C),W=N(A+L);R.push({x1:W,y1:M,x2:W,y2:G}),R.push({x1:K,y1:k,x2:W,y2:k}),R.push({x1:K,y1:M,x2:K,y2:G})}else if(a==="horizontal"){var Y=h.scale,j=T+i,$=j-s,q=j+s,Z=Y(A-C),B=Y(A+L);R.push({x1:$,y1:B,x2:q,y2:B}),R.push({x1:j,y1:Z,x2:j,y2:B}),R.push({x1:$,y1:Z,x2:q,y2:Z})}return Q.createElement($t,ip({className:"recharts-errorBar",key:"bar-".concat(R.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},y),R.map(function(V){return Q.createElement("line",ip({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return Q.createElement($t,{className:"recharts-errorBars"},v)}}])}(Q.Component);x5(nd,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});x5(nd,"displayName","ErrorBar");function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function Kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kk(Object(n),!0).forEach(function(r){Ile(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ile(t,e,n){return e=Ple(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ple(t){var e=Nle(t,"string");return cf(e)=="symbol"?e:e+""}function Nle(t,e){if(cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var S5=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=lr(n,fl);if(!s)return null;var o=fl.defaultProps,c=o!==void 0?Rs(Rs({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var p=h.item,y=h.props,v=y.sectors||y.data||[];return d.concat(v.map(function(b){return{type:s.props.iconType||p.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):u=(r||[]).map(function(d){var h=d.item,p=h.type.defaultProps,y=p!==void 0?Rs(Rs({},p),h.props):{},v=y.dataKey,b=y.name,x=y.legendType,T=y.hide;return{inactive:T,dataKey:v,type:c.iconType||x||"square",color:jw(h),value:b||v,payload:y}}),Rs(Rs(Rs({},c),fl.getWithHeight(s,i)),{},{payload:u,item:s})};function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function Yk(t){return Ule(t)||jle(t)||kle(t)||Mle()}function Mle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kle(t,e){if(t){if(typeof t=="string")return XT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XT(t,e)}}function jle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ule(t){if(Array.isArray(t))return XT(t)}function XT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wk(Object(n),!0).forEach(function(r){hl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hl(t,e,n){return e=Ble(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ble(t){var e=Fle(t,"string");return ff(e)=="symbol"?e:e+""}function Fle(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dr(t,e,n){return Ye(t)||Ye(e)?n:tn(e)?Ir(t,e,n):Ge(e)?e(t):n}function Pc(t,e,n,r){var i=Uoe(t,function(o){return dr(o,e)});if(n==="number"){var a=i.filter(function(o){return ve(o)||parseFloat(o)});return a.length?[vg(a),yg(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!Ye(o)}):i;return s.map(function(o){return tn(o)||o instanceof Date?o:""})}var $le=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,h=i[u].coordinate,p=u>=o-1?i[0].coordinate:i[u+1].coordinate,y=void 0;if(Zr(h-d)!==Zr(p-h)){var v=[];if(Zr(p-h)===Zr(c[1]-c[0])){y=p;var b=h+c[1]-c[0];v[0]=Math.min(b,(b+d)/2),v[1]=Math.max(b,(b+d)/2)}else{y=d;var x=p+c[1]-c[0];v[0]=Math.min(h,(x+h)/2),v[1]=Math.max(h,(x+h)/2)}var T=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>T[0]&&e<=T[1]||e>=v[0]&&e<=v[1]){s=i[u].index;break}}else{var _=Math.min(d,p),A=Math.max(d,p);if(e>(_+h)/2&&e<=(A+h)/2){s=i[u].index;break}}}else for(var O=0;O<o;O++)if(O===0&&e<=(r[O].coordinate+r[O+1].coordinate)/2||O>0&&O<o-1&&e>(r[O].coordinate+r[O-1].coordinate)/2&&e<=(r[O].coordinate+r[O+1].coordinate)/2||O===o-1&&e>(r[O].coordinate+r[O-1].coordinate)/2){s=r[O].index;break}return s},jw=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},Gle=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),c=0,u=o.length;c<u;c++)for(var d=a[o[c]].stackGroups,h=Object.keys(d),p=0,y=h.length;p<y;p++){var v=d[h[p]],b=v.items,x=v.cateAxisId,T=b.filter(function(L){return ea(L.type).indexOf("Bar")>=0});if(T&&T.length){var _=T[0].type.defaultProps,A=_!==void 0?kt(kt({},_),T[0].props):T[0].props,O=A.barSize,R=A[x];s[R]||(s[R]=[]);var C=Ye(O)?n:O;s[R].push({item:T[0],stackList:T.slice(1),barSize:Ye(C)?void 0:Xs(C,r,0)})}}return s},Vle=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,c=s.length;if(c<1)return null;var u=Xs(n,i,0,!0),d,h=[];if(s[0].barSize===+s[0].barSize){var p=!1,y=i/c,v=s.reduce(function(O,R){return O+R.barSize||0},0);v+=(c-1)*u,v>=i&&(v-=(c-1)*u,u=0),v>=i&&y>0&&(p=!0,y*=.9,v=c*y);var b=(i-v)/2>>0,x={offset:b-u,size:0};d=s.reduce(function(O,R){var C={item:R.item,position:{offset:x.offset+x.size+u,size:p?y:R.barSize}},L=[].concat(Yk(O),[C]);return x=L[L.length-1].position,R.stackList&&R.stackList.length&&R.stackList.forEach(function(P){L.push({item:P,position:x})}),L},h)}else{var T=Xs(r,i,0,!0);i-2*T-(c-1)*u<=0&&(u=0);var _=(i-2*T-(c-1)*u)/c;_>1&&(_>>=0);var A=o===+o?Math.min(_,o):_;d=s.reduce(function(O,R,C){var L=[].concat(Yk(O),[{item:R.item,position:{offset:T+(_+u)*C+(_-A)/2,size:A}}]);return R.stackList&&R.stackList.length&&R.stackList.forEach(function(P){L.push({item:P,position:L[L.length-1].position})}),L},h)}return d},qle=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,c=s-(o.left||0)-(o.right||0),u=S5({children:a,legendWidth:c});if(u){var d=i||{},h=d.width,p=d.height,y=u.align,v=u.verticalAlign,b=u.layout;if((b==="vertical"||b==="horizontal"&&v==="middle")&&y!=="center"&&ve(e[y]))return kt(kt({},e),{},hl({},y,e[y]+(h||0)));if((b==="horizontal"||b==="vertical"&&y==="center")&&v!=="middle"&&ve(e[v]))return kt(kt({},e),{},hl({},v,e[v]+(p||0)))}return e},Hle=function(e,n,r){return Ye(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},E5=function(e,n,r,i,a){var s=n.props.children,o=Pr(s,nd).filter(function(u){return Hle(i,a,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=dr(d,r);if(Ye(h))return u;var p=Array.isArray(h)?[vg(h),yg(h)]:[h,h],y=c.reduce(function(v,b){var x=dr(d,b,0),T=p[0]-Math.abs(Array.isArray(x)?x[0]:x),_=p[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(T,v[0]),Math.max(_,v[1])]},[1/0,-1/0]);return[Math.min(y[0],u[0]),Math.max(y[1],u[1])]},[1/0,-1/0])}return null},zle=function(e,n,r,i,a){var s=n.map(function(o){return E5(e,o,r,a,i)}).filter(function(o){return!Ye(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},T5=function(e,n,r,i,a){var s=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&E5(e,c,u,i)||Pc(e,u,r,a)});if(r==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},A5=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},w5=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var a,s,o=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(s=!0),c.coordinate});return a||o.push(n),s||o.push(r),o},Zi=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Zr(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var p=a?a.indexOf(h):h;return{coordinate:i(p)+u,value:h,offset:u}});return d.filter(function(h){return!Wf(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,p){return{coordinate:i(h)+u,value:h,index:p,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,p){return{coordinate:i(h)+u,value:a?a[h]:h,index:p,offset:u}})},HS=new WeakMap,Ph=function(e,n){if(typeof n!="function")return e;HS.has(e)||HS.set(e,new WeakMap);var r=HS.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Kle=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:nf(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Jm(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ic(),realScaleType:"point"}:a==="category"?{scale:nf(),realScaleType:"band"}:{scale:Jm(),realScaleType:"linear"};if(Ws(i)){var c="scale".concat(ig(i));return{scale:(Nk[c]||Ic)(),realScaleType:Nk[c]?c:"point"}}return Ge(i)?{scale:i}:{scale:Ic(),realScaleType:"point"}},Xk=1e-4,Yle=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-Xk,s=Math.max(i[0],i[1])+Xk,o=e(n[0]),c=e(n[r-1]);(o<a||o>s||c<a||c>s)&&e.domain([n[0],n[r-1]])}},Wle=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Xle=function(e,n){if(!n||n.length!==2||!ve(n[0])||!ve(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!ve(e[0])||e[0]<r)&&(a[0]=r),(!ve(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Qle=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var c=Wf(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1])}},Zle=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=Wf(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Jle={sign:Qle,expand:Mte,none:xl,silhouette:kte,wiggle:jte,positive:Zle},eue=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=Jle[r],s=Nte().keys(i).value(function(o,c){return+dr(o,c,0)}).order(_T).offset(a);return s(e)},tue=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,c={},u=o.reduce(function(h,p){var y,v=(y=p.type)!==null&&y!==void 0&&y.defaultProps?kt(kt({},p.type.defaultProps),p.props):p.props,b=v.stackId,x=v.hide;if(x)return h;var T=v[r],_=h[T]||{hasStack:!1,stackGroups:{}};if(tn(b)){var A=_.stackGroups[b]||{numericAxisId:r,cateAxisId:i,items:[]};A.items.push(p),_.hasStack=!0,_.stackGroups[b]=A}else _.stackGroups[Xf("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return kt(kt({},h),{},hl({},T,_))},c),d={};return Object.keys(u).reduce(function(h,p){var y=u[p];if(y.hasStack){var v={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(b,x){var T=y.stackGroups[x];return kt(kt({},b),{},hl({},x,{numericAxisId:r,cateAxisId:i,items:T.items,stackedData:eue(e,T.items,a)}))},v)}return kt(kt({},h),{},hl({},p,y))},d)},nue=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=hle(u,a,o);return e.domain([vg(d),yg(d)]),{niceTicks:d}}if(a&&i==="number"){var h=e.domain(),p=mle(h,a,o);return{niceTicks:p}}return null};function Qk(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ye(i[e.dataKey])){var o=Pm(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=dr(i,Ye(s)?e.dataKey:s);return Ye(c)?null:e.scale(c)}var Zk=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var c=dr(s,n.dataKey,n.domain[o]);return Ye(c)?null:n.scale(c)-a/2+i},rue=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},iue=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(tn(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},aue=function(e){return e.reduce(function(n,r){return[vg(r.concat([n[0]]).filter(ve)),yg(r.concat([n[1]]).filter(ve))]},[1/0,-1/0])},_5=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,c=o.reduce(function(u,d){var h=aue(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Jk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,e2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,QT=function(e,n,r){if(Ge(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(ve(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(Jk.test(e[0])){var a=+Jk.exec(e[0])[1];i[0]=n[0]-a}else Ge(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(ve(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(e2.test(e[1])){var s=+e2.exec(e[1])[1];i[1]=n[1]+s}else Ge(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},sp=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=fw(n,function(h){return h.coordinate}),s=1/0,o=1,c=a.length;o<c;o++){var u=a[o],d=a[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},t2=function(e,n,r){return!e||!e.length||xg(e,Ir(r,"type.defaultProps.domain"))?n:e},R5=function(e,n){var r=e.type.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return kt(kt({},We(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:jw(e),value:dr(n,i),type:c,payload:n,chartType:u,hide:d})};function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function n2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function r2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n2(Object(n),!0).forEach(function(r){sue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sue(t,e,n){return e=oue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oue(t){var e=lue(t,"string");return df(e)=="symbol"?e:e+""}function lue(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var op=Math.PI/180,uue=function(e){return e*180/Math.PI},wn=function(e,n,r,i){return{x:e+Math.cos(-op*i)*r,y:n+Math.sin(-op*i)*r}},cue=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},fue=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=cue({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var c=(r-a)/o,u=Math.acos(c);return i>s&&(u=2*Math.PI-u),{radius:o,angle:uue(u),angleInRadian:u}},due=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},hue=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},i2=function(e,n){var r=e.x,i=e.y,a=fue({x:r,y:i},n),s=a.radius,o=a.angle,c=n.innerRadius,u=n.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=due(n),h=d.startAngle,p=d.endAngle,y=o,v;if(h<=p){for(;y>p;)y-=360;for(;y<h;)y+=360;v=y>=h&&y<=p}else{for(;y>h;)y-=360;for(;y<p;)y+=360;v=y>=p&&y<=h}return v?r2(r2({},n),{},{radius:s,angle:hue(y,n)}):null};function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}var mue=["offset"];function pue(t){return xue(t)||vue(t)||yue(t)||gue()}function gue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yue(t,e){if(t){if(typeof t=="string")return ZT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZT(t,e)}}function vue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xue(t){if(Array.isArray(t))return ZT(t)}function ZT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bue(t,e){if(t==null)return{};var n=Sue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function a2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a2(Object(n),!0).forEach(function(r){Eue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eue(t,e,n){return e=Tue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tue(t){var e=Aue(t,"string");return hf(e)=="symbol"?e:e+""}function Aue(t,e){if(hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mf(){return mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mf.apply(this,arguments)}var wue=function(e){var n=e.value,r=e.formatter,i=Ye(e.children)?n:e.children;return Ge(r)?r(i):i},_ue=function(e,n){var r=Zr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},Rue=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,p=c.outerRadius,y=c.startAngle,v=c.endAngle,b=c.clockWise,x=(h+p)/2,T=_ue(y,v),_=T>=0?1:-1,A,O;i==="insideStart"?(A=y+_*s,O=b):i==="insideEnd"?(A=v-_*s,O=!b):i==="end"&&(A=v+_*s,O=b),O=T<=0?O:!O;var R=wn(u,d,x,A),C=wn(u,d,x,A+(O?1:-1)*359),L="M".concat(R.x,",").concat(R.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(O?0:1,`,
    `).concat(C.x,",").concat(C.y),P=Ye(e.id)?Xf("recharts-radial-line-"):e.id;return Q.createElement("text",mf({},r,{dominantBaseline:"central",className:et("recharts-radial-bar-label",o)}),Q.createElement("defs",null,Q.createElement("path",{id:P,d:L})),Q.createElement("textPath",{xlinkHref:"#".concat(P)},n))},Oue=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,p=(d+h)/2;if(i==="outside"){var y=wn(s,o,u+r,p),v=y.x,b=y.y;return{x:v,y:b,textAnchor:v>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,T=wn(s,o,x,p),_=T.x,A=T.y;return{x:_,y:A,textAnchor:"middle",verticalAnchor:"middle"}},Cue=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,c=s.y,u=s.width,d=s.height,h=d>=0?1:-1,p=h*i,y=h>0?"end":"start",v=h>0?"start":"end",b=u>=0?1:-1,x=b*i,T=b>0?"end":"start",_=b>0?"start":"end";if(a==="top"){var A={x:o+u/2,y:c-h*i,textAnchor:"middle",verticalAnchor:y};return Jt(Jt({},A),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var O={x:o+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:v};return Jt(Jt({},O),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var R={x:o-x,y:c+d/2,textAnchor:T,verticalAnchor:"middle"};return Jt(Jt({},R),r?{width:Math.max(R.x-r.x,0),height:d}:{})}if(a==="right"){var C={x:o+u+x,y:c+d/2,textAnchor:_,verticalAnchor:"middle"};return Jt(Jt({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:d}:{})}var L=r?{width:u,height:d}:{};return a==="insideLeft"?Jt({x:o+x,y:c+d/2,textAnchor:_,verticalAnchor:"middle"},L):a==="insideRight"?Jt({x:o+u-x,y:c+d/2,textAnchor:T,verticalAnchor:"middle"},L):a==="insideTop"?Jt({x:o+u/2,y:c+p,textAnchor:"middle",verticalAnchor:v},L):a==="insideBottom"?Jt({x:o+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:y},L):a==="insideTopLeft"?Jt({x:o+x,y:c+p,textAnchor:_,verticalAnchor:v},L):a==="insideTopRight"?Jt({x:o+u-x,y:c+p,textAnchor:T,verticalAnchor:v},L):a==="insideBottomLeft"?Jt({x:o+x,y:c+d-p,textAnchor:_,verticalAnchor:y},L):a==="insideBottomRight"?Jt({x:o+u-x,y:c+d-p,textAnchor:T,verticalAnchor:y},L):Jl(a)&&(ve(a.x)||Us(a.x))&&(ve(a.y)||Us(a.y))?Jt({x:o+Xs(a.x,u),y:c+Xs(a.y,d),textAnchor:"end",verticalAnchor:"end"},L):Jt({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},L)},Lue=function(e){return"cx"in e&&ve(e.cx)};function Pn(t){var e=t.offset,n=e===void 0?5:e,r=bue(t,mue),i=Jt({offset:n},r),a=i.viewBox,s=i.position,o=i.value,c=i.children,u=i.content,d=i.className,h=d===void 0?"":d,p=i.textBreakAll;if(!a||Ye(o)&&Ye(c)&&!F.isValidElement(u)&&!Ge(u))return null;if(F.isValidElement(u))return F.cloneElement(u,i);var y;if(Ge(u)){if(y=F.createElement(u,i),F.isValidElement(y))return y}else y=wue(i);var v=Lue(a),b=We(i,!0);if(v&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Rue(i,y,b);var x=v?Oue(i):Cue(i);return Q.createElement(zm,mf({className:et("recharts-label",h)},b,x,{breakAll:p}),y)}Pn.displayName="Label";var O5=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,p=e.y,y=e.top,v=e.left,b=e.width,x=e.height,T=e.clockWise,_=e.labelViewBox;if(_)return _;if(ve(b)&&ve(x)){if(ve(h)&&ve(p))return{x:h,y:p,width:b,height:x};if(ve(y)&&ve(v))return{x:y,y:v,width:b,height:x}}return ve(h)&&ve(p)?{x:h,y:p,width:0,height:0}:ve(n)&&ve(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:T}:e.viewBox?e.viewBox:{}},Due=function(e,n){return e?e===!0?Q.createElement(Pn,{key:"label-implicit",viewBox:n}):tn(e)?Q.createElement(Pn,{key:"label-implicit",viewBox:n,value:e}):F.isValidElement(e)?e.type===Pn?F.cloneElement(e,{key:"label-implicit",viewBox:n}):Q.createElement(Pn,{key:"label-implicit",content:e,viewBox:n}):Ge(e)?Q.createElement(Pn,{key:"label-implicit",content:e,viewBox:n}):Jl(e)?Q.createElement(Pn,mf({viewBox:n},e,{key:"label-implicit"})):null:null},Iue=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=O5(e),s=Pr(i,Pn).map(function(c,u){return F.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=Due(e.label,n||a);return[o].concat(pue(s))};Pn.parseViewBox=O5;Pn.renderCallByParent=Iue;var zS,s2;function Pue(){if(s2)return zS;s2=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return zS=t,zS}var Nue=Pue();const Mue=vt(Nue);function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}var kue=["valueAccessor"],jue=["data","dataKey","clockWise","id","textBreakAll"];function Uue(t){return Gue(t)||$ue(t)||Fue(t)||Bue()}function Bue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fue(t,e){if(t){if(typeof t=="string")return JT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JT(t,e)}}function $ue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gue(t){if(Array.isArray(t))return JT(t)}function JT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lp.apply(this,arguments)}function o2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o2(Object(n),!0).forEach(function(r){Vue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vue(t,e,n){return e=que(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function que(t){var e=Hue(t,"string");return pf(e)=="symbol"?e:e+""}function Hue(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u2(t,e){if(t==null)return{};var n=zue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Kue=function(e){return Array.isArray(e.value)?Mue(e.value):e.value};function Ya(t){var e=t.valueAccessor,n=e===void 0?Kue:e,r=u2(t,kue),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,c=r.textBreakAll,u=u2(r,jue);return!i||!i.length?null:Q.createElement($t,{className:"recharts-label-list"},i.map(function(d,h){var p=Ye(a)?n(d,h):dr(d&&d.payload,a),y=Ye(o)?{}:{id:"".concat(o,"-").concat(h)};return Q.createElement(Pn,lp({},We(d,!0),u,y,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:Pn.parseViewBox(Ye(s)?d:l2(l2({},d),{},{clockWise:s})),key:"label-".concat(h),index:h}))}))}Ya.displayName="LabelList";function Yue(t,e){return t?t===!0?Q.createElement(Ya,{key:"labelList-implicit",data:e}):Q.isValidElement(t)||Ge(t)?Q.createElement(Ya,{key:"labelList-implicit",data:e,content:t}):Jl(t)?Q.createElement(Ya,lp({data:e},t,{key:"labelList-implicit"})):null:null}function Wue(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Pr(r,Ya).map(function(s,o){return F.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=Yue(t.label,e);return[a].concat(Uue(i))}Ya.renderCallByParent=Wue;function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function eA(){return eA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eA.apply(this,arguments)}function c2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c2(Object(n),!0).forEach(function(r){Xue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xue(t,e,n){return e=Que(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Que(t){var e=Zue(t,"string");return gf(e)=="symbol"?e:e+""}function Zue(t,e){if(gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jue=function(e,n){var r=Zr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Nh=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(o?1:-1)+i,h=Math.asin(c/d)/op,p=u?a:a+s*h,y=wn(n,r,d,p),v=wn(n,r,i,p),b=u?a-s*h:a,x=wn(n,r,d*Math.cos(h*op),b);return{center:y,circleTangency:v,lineTangency:x,theta:h}},C5=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,c=Jue(s,o),u=s+c,d=wn(n,r,a,s),h=wn(n,r,a,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var y=wn(n,r,i,s),v=wn(n,r,i,u);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},ece=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Zr(d-u),p=Nh({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:s,cornerIsExternal:c}),y=p.circleTangency,v=p.lineTangency,b=p.theta,x=Nh({cx:n,cy:r,radius:a,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:c}),T=x.circleTangency,_=x.lineTangency,A=x.theta,O=c?Math.abs(u-d):Math.abs(u-d)-b-A;if(O<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):C5({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var R="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(h<0),",").concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var C=Nh({cx:n,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),L=C.circleTangency,P=C.lineTangency,N=C.theta,k=Nh({cx:n,cy:r,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),M=k.circleTangency,G=k.lineTangency,K=k.theta,W=c?Math.abs(u-d):Math.abs(u-d)-N-K;if(W<0&&s===0)return"".concat(R,"L").concat(n,",").concat(r,"Z");R+="L".concat(G.x,",").concat(G.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(W>180),",").concat(+(h>0),",").concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,"Z")}else R+="L".concat(n,",").concat(r,"Z");return R},tce={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},L5=function(e){var n=f2(f2({},tce),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,p=n.className;if(s<a||d===h)return null;var y=et("recharts-sector",p),v=s-a,b=Xs(o,v,0,!0),x;return b>0&&Math.abs(d-h)<360?x=ece({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(b,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):x=C5({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:h}),Q.createElement("path",eA({},We(n,!0),{className:y,d:x,role:"img"}))};function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function tA(){return tA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tA.apply(this,arguments)}function d2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d2(Object(n),!0).forEach(function(r){nce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nce(t,e,n){return e=rce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rce(t){var e=ice(t,"string");return yf(e)=="symbol"?e:e+""}function ice(t,e){if(yf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m2={curveBasisClosed:Tte,curveBasisOpen:Ate,curveBasis:Ete,curveBumpX:lte,curveBumpY:ute,curveLinearClosed:wte,curveLinear:sg,curveMonotoneX:_te,curveMonotoneY:Rte,curveNatural:Ote,curveStep:Cte,curveStepAfter:Dte,curveStepBefore:Lte},Mh=function(e){return e.x===+e.x&&e.y===+e.y},pc=function(e){return e.x},gc=function(e){return e.y},ace=function(e,n){if(Ge(e))return e;var r="curve".concat(ig(e));return(r==="curveMonotone"||r==="curveBump")&&n?m2["".concat(r).concat(n==="vertical"?"Y":"X")]:m2[r]||sg},sce=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=ace(r,o),h=u?a.filter(function(b){return Mh(b)}):a,p;if(Array.isArray(s)){var y=u?s.filter(function(b){return Mh(b)}):s,v=h.map(function(b,x){return h2(h2({},b),{},{base:y[x]})});return o==="vertical"?p=_h().y(gc).x1(pc).x0(function(b){return b.base.x}):p=_h().x(pc).y1(gc).y0(function(b){return b.base.y}),p.defined(Mh).curve(d),p(v)}return o==="vertical"&&ve(s)?p=_h().y(gc).x1(pc).x0(s):ve(s)?p=_h().x(pc).y1(gc).y0(s):p=N4().x(pc).y(gc),p.defined(Mh).curve(d),p(h)},nA=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?sce(e):i;return Q.createElement("path",tA({},We(e,!1),Nm(e),{className:et("recharts-curve",n),d:s,ref:a}))},KS={exports:{}},YS,p2;function oce(){if(p2)return YS;p2=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return YS=t,YS}var WS,g2;function lce(){if(g2)return WS;g2=1;var t=oce();function e(){}function n(){}return n.resetWarningCache=e,WS=function(){function r(s,o,c,u,d,h){if(h!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},WS}var y2;function uce(){return y2||(y2=1,KS.exports=lce()()),KS.exports}var cce=uce();const at=vt(cce);var fce=Object.getOwnPropertyNames,dce=Object.getOwnPropertySymbols,hce=Object.prototype.hasOwnProperty;function v2(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function kh(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var c=t(n,r,i);return a.delete(n),a.delete(r),c}}function x2(t){return fce(t).concat(dce(t))}var mce=Object.hasOwn||function(t,e){return hce.call(t,e)};function io(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var pce="__v",gce="__o",yce="_owner",b2=Object.getOwnPropertyDescriptor,S2=Object.keys;function vce(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function xce(t,e){return io(t.getTime(),e.getTime())}function bce(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Sce(t,e){return t===e}function E2(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),s,o,c=0;(s=a.next())&&!s.done;){for(var u=e.entries(),d=!1,h=0;(o=u.next())&&!o.done;){if(i[h]){h++;continue}var p=s.value,y=o.value;if(n.equals(p[0],y[0],c,h,t,e,n)&&n.equals(p[1],y[1],p[0],y[0],t,e,n)){d=i[h]=!0;break}h++}if(!d)return!1;c++}return!0}var Ece=io;function Tce(t,e,n){var r=S2(t),i=r.length;if(S2(e).length!==i)return!1;for(;i-- >0;)if(!D5(t,e,n,r[i]))return!1;return!0}function yc(t,e,n){var r=x2(t),i=r.length;if(x2(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!D5(t,e,n,a)||(s=b2(t,a),o=b2(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Ace(t,e){return io(t.valueOf(),e.valueOf())}function wce(t,e){return t.source===e.source&&t.flags===e.flags}function T2(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var c=e.values(),u=!1,d=0;(o=c.next())&&!o.done;){if(!i[d]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function _ce(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Rce(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function D5(t,e,n,r){return(r===yce||r===gce||r===pce)&&(t.$$typeof||e.$$typeof)?!0:mce(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Oce="[object Arguments]",Cce="[object Boolean]",Lce="[object Date]",Dce="[object Error]",Ice="[object Map]",Pce="[object Number]",Nce="[object Object]",Mce="[object RegExp]",kce="[object Set]",jce="[object String]",Uce="[object URL]",Bce=Array.isArray,A2=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,w2=Object.assign,Fce=Object.prototype.toString.call.bind(Object.prototype.toString);function $ce(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,h=t.areTypedArraysEqual,p=t.areUrlsEqual;return function(v,b,x){if(v===b)return!0;if(v==null||b==null)return!1;var T=typeof v;if(T!==typeof b)return!1;if(T!=="object")return T==="number"?s(v,b,x):T==="function"?i(v,b,x):!1;var _=v.constructor;if(_!==b.constructor)return!1;if(_===Object)return o(v,b,x);if(Bce(v))return e(v,b,x);if(A2!=null&&A2(v))return h(v,b,x);if(_===Date)return n(v,b,x);if(_===RegExp)return u(v,b,x);if(_===Map)return a(v,b,x);if(_===Set)return d(v,b,x);var A=Fce(v);return A===Lce?n(v,b,x):A===Mce?u(v,b,x):A===Ice?a(v,b,x):A===kce?d(v,b,x):A===Nce?typeof v.then!="function"&&typeof b.then!="function"&&o(v,b,x):A===Uce?p(v,b,x):A===Dce?r(v,b,x):A===Oce?o(v,b,x):A===Cce||A===Pce||A===jce?c(v,b,x):!1}}function Gce(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?yc:vce,areDatesEqual:xce,areErrorsEqual:bce,areFunctionsEqual:Sce,areMapsEqual:r?v2(E2,yc):E2,areNumbersEqual:Ece,areObjectsEqual:r?yc:Tce,arePrimitiveWrappersEqual:Ace,areRegExpsEqual:wce,areSetsEqual:r?v2(T2,yc):T2,areTypedArraysEqual:r?yc:_ce,areUrlsEqual:Rce};if(n&&(i=w2({},i,n(i))),e){var a=kh(i.areArraysEqual),s=kh(i.areMapsEqual),o=kh(i.areObjectsEqual),c=kh(i.areSetsEqual);i=w2({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:c})}return i}function Vce(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function qce(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(c,u){var d=r(),h=d.cache,p=h===void 0?e?new WeakMap:void 0:h,y=d.meta;return n(c,u,{cache:p,equals:i,meta:y,strict:a})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,u){return n(c,u,s)}}var Hce=as();as({strict:!0});as({circular:!0});as({circular:!0,strict:!0});as({createInternalComparator:function(){return io}});as({strict:!0,createInternalComparator:function(){return io}});as({circular:!0,createInternalComparator:function(){return io}});as({circular:!0,createInternalComparator:function(){return io},strict:!0});function as(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=Gce(t),c=$ce(o),u=r?r(c):Vce(c);return qce({circular:n,comparator:c,createState:i,equals:u,strict:s})}function zce(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function _2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):zce(i)};requestAnimationFrame(r)}function rA(t){"@babel/helpers - typeof";return rA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rA(t)}function Kce(t){return Qce(t)||Xce(t)||Wce(t)||Yce()}function Yce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wce(t,e){if(t){if(typeof t=="string")return R2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R2(t,e)}}function R2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qce(t){if(Array.isArray(t))return t}function Zce(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=Kce(s),c=o[0],u=o.slice(1);if(typeof c=="number"){_2(i.bind(null,u),c);return}i(c),_2(i.bind(null,u));return}rA(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function O2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O2(Object(n),!0).forEach(function(r){I5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I5(t,e,n){return e=Jce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jce(t){var e=efe(t,"string");return vf(e)==="symbol"?e:String(e)}function efe(t,e){if(vf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tfe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},nfe=function(e){return e},rfe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Nc=function(e,n){return Object.keys(n).reduce(function(r,i){return C2(C2({},r),{},I5({},i,e(i,n[i])))},{})},L2=function(e,n,r){return e.map(function(i){return"".concat(rfe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function ife(t,e){return ofe(t)||sfe(t,e)||P5(t,e)||afe()}function afe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ofe(t){if(Array.isArray(t))return t}function lfe(t){return ffe(t)||cfe(t)||P5(t)||ufe()}function ufe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P5(t,e){if(t){if(typeof t=="string")return iA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iA(t,e)}}function cfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ffe(t){if(Array.isArray(t))return iA(t)}function iA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var up=1e-4,N5=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},M5=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},D2=function(e,n){return function(r){var i=N5(e,n);return M5(i,r)}},dfe=function(e,n){return function(r){var i=N5(e,n),a=[].concat(lfe(i.map(function(s,o){return s*o}).slice(1)),[0]);return M5(a,r)}},I2=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=ife(u,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var h=D2(i,s),p=D2(a,o),y=dfe(i,s),v=function(T){return T>1?1:T<0?0:T},b=function(T){for(var _=T>1?1:T,A=_,O=0;O<8;++O){var R=h(A)-_,C=y(A);if(Math.abs(R-_)<up||C<up)return p(A);A=v(A-R/C)}return p(A)};return b.isStepper=!1,b},hfe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,c=function(d,h,p){var y=-(d-h)*r,v=p*a,b=p+(y-v)*o/1e3,x=p*o/1e3+d;return Math.abs(x-h)<up&&Math.abs(b)<up?[h,0]:[x,b]};return c.isStepper=!0,c.dt=o,c},mfe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return I2(i);case"spring":return hfe();default:if(i.split("(")[0]==="cubic-bezier")return I2(i)}return typeof i=="function"?i:null};function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function P2(t){return yfe(t)||gfe(t)||k5(t)||pfe()}function pfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yfe(t){if(Array.isArray(t))return sA(t)}function N2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N2(Object(n),!0).forEach(function(r){aA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aA(t,e,n){return e=vfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vfe(t){var e=xfe(t,"string");return xf(e)==="symbol"?e:String(e)}function xfe(t,e){if(xf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bfe(t,e){return Tfe(t)||Efe(t,e)||k5(t,e)||Sfe()}function Sfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k5(t,e){if(t){if(typeof t=="string")return sA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sA(t,e)}}function sA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Efe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Tfe(t){if(Array.isArray(t))return t}var cp=function(e,n,r){return e+(n-e)*r},oA=function(e){var n=e.from,r=e.to;return n!==r},Afe=function t(e,n,r){var i=Nc(function(a,s){if(oA(s)){var o=e(s.from,s.to,s.velocity),c=bfe(o,2),u=c[0],d=c[1];return Tn(Tn({},s),{},{from:u,velocity:d})}return s},n);return r<1?Nc(function(a,s){return oA(s)?Tn(Tn({},s),{},{velocity:cp(s.velocity,i[a].velocity,r),from:cp(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const wfe=function(t,e,n,r,i){var a=tfe(t,e),s=a.reduce(function(x,T){return Tn(Tn({},x),{},aA({},T,[t[T],e[T]]))},{}),o=a.reduce(function(x,T){return Tn(Tn({},x),{},aA({},T,{from:t[T],velocity:0,to:e[T]}))},{}),c=-1,u,d,h=function(){return null},p=function(){return Nc(function(T,_){return _.from},o)},y=function(){return!Object.values(o).filter(oA).length},v=function(T){u||(u=T);var _=T-u,A=_/n.dt;o=Afe(n,o,A),i(Tn(Tn(Tn({},t),e),p())),u=T,y()||(c=requestAnimationFrame(h))},b=function(T){d||(d=T);var _=(T-d)/r,A=Nc(function(R,C){return cp.apply(void 0,P2(C).concat([n(_)]))},s);if(i(Tn(Tn(Tn({},t),e),A)),_<1)c=requestAnimationFrame(h);else{var O=Nc(function(R,C){return cp.apply(void 0,P2(C).concat([n(1)]))},s);i(Tn(Tn(Tn({},t),e),O))}};return h=n.isStepper?v:b,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Ol(t){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(t)}var _fe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Rfe(t,e){if(t==null)return{};var n=Ofe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ofe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function XS(t){return Ife(t)||Dfe(t)||Lfe(t)||Cfe()}function Cfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lfe(t,e){if(t){if(typeof t=="string")return lA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lA(t,e)}}function Dfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ife(t){if(Array.isArray(t))return lA(t)}function lA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function M2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M2(Object(n),!0).forEach(function(r){Ac(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ac(t,e,n){return e=j5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j5(r.key),r)}}function Mfe(t,e,n){return e&&Nfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function j5(t){var e=kfe(t,"string");return Ol(e)==="symbol"?e:String(e)}function kfe(t,e){if(Ol(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ol(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uA(t,e)}function uA(t,e){return uA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uA(t,e)}function Ufe(t){var e=Bfe();return function(){var r=fp(t),i;if(e){var a=fp(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return cA(this,i)}}function cA(t,e){if(e&&(Ol(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fA(t)}function fA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fp(t){return fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fp(t)}var ua=function(t){jfe(n,t);var e=Ufe(n);function n(r,i){var a;Pfe(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,c=s.attributeName,u=s.from,d=s.to,h=s.steps,p=s.children,y=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(fA(a)),a.changeStyle=a.changeStyle.bind(fA(a)),!o||y<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:d}),cA(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof p=="function")return a.state={style:u},cA(a);a.state={style:c?Ac({},c,u):u}}else a.state={style:{}};return a}return Mfe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,p=this.state.style;if(o){if(!s){var y={style:c?Ac({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(y);return}if(!(Hce(i.to,d)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=v||u?h:i.to;if(this.state&&p){var x={style:c?Ac({},c,b):b};(c&&p[c]!==b||!c&&p!==b)&&this.setState(x)}this.runAnimation(qr(qr({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,c=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,p=i.onAnimationStart,y=wfe(s,o,mfe(u),c,this.changeStyle),v=function(){a.stopJSAnimation=y()};this.manager.start([p,d,v,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,c=i.onAnimationStart,u=s[0],d=u.style,h=u.duration,p=h===void 0?0:h,y=function(b,x,T){if(T===0)return b;var _=x.duration,A=x.easing,O=A===void 0?"ease":A,R=x.style,C=x.properties,L=x.onAnimationEnd,P=T>0?s[T-1]:x,N=C||Object.keys(R);if(typeof O=="function"||O==="spring")return[].concat(XS(b),[a.runJSAnimation.bind(a,{from:P.style,to:R,duration:_,easing:O}),_]);var k=L2(N,_,O),M=qr(qr(qr({},P.style),R),{},{transition:k});return[].concat(XS(b),[M,_,L]).filter(nfe)};return this.manager.start([c].concat(XS(s.reduce(y,[d,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Zce());var a=i.begin,s=i.duration,o=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,p=i.steps,y=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof y=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var b=o?Ac({},o,c):c,x=L2(Object.keys(b),s,u);v.start([d,a,qr(qr({},b),{},{transition:x}),s,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=Rfe(i,_fe),u=F.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||s<=0)return a;var h=function(y){var v=y.props,b=v.style,x=b===void 0?{}:b,T=v.className,_=F.cloneElement(y,qr(qr({},c),{},{style:qr(qr({},x),d),className:T}));return _};return u===1?h(F.Children.only(a)):Q.createElement("div",null,F.Children.map(a,function(p){return h(p)}))}}]),n}(F.PureComponent);ua.displayName="Animate";ua.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ua.propTypes={from:at.oneOfType([at.object,at.string]),to:at.oneOfType([at.object,at.string]),attributeName:at.string,duration:at.number,begin:at.number,easing:at.oneOfType([at.string,at.func]),steps:at.arrayOf(at.shape({duration:at.number.isRequired,style:at.object.isRequired,easing:at.oneOfType([at.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),at.func]),properties:at.arrayOf("string"),onAnimationEnd:at.func})),children:at.oneOfType([at.node,at.func]),isActive:at.bool,canBegin:at.bool,onAnimationEnd:at.func,shouldReAnimate:at.bool,onAnimationStart:at.func,onAnimationReStart:at.func};function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dp.apply(this,arguments)}function Ffe(t,e){return qfe(t)||Vfe(t,e)||Gfe(t,e)||$fe()}function $fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gfe(t,e){if(t){if(typeof t=="string")return k2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k2(t,e)}}function k2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function qfe(t){if(Array.isArray(t))return t}function j2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j2(Object(n),!0).forEach(function(r){Hfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hfe(t,e,n){return e=zfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zfe(t){var e=Kfe(t,"string");return bf(e)=="symbol"?e:e+""}function Kfe(t,e){if(bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B2=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var h=[0,0,0,0],p=0,y=4;p<y;p++)h[p]=a[p]>s?s:a[p];d="M".concat(e,",").concat(n+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(n)),d+="L ".concat(e+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*h[1])),d+="L ".concat(e+r,",").concat(n+i-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(n+i)),d+="L ".concat(e+c*h[3],",").concat(n+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*h[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var v=Math.min(s,a);d="M ".concat(e,",").concat(n+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+c*v,",").concat(n,`
            L `).concat(e+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*v,`
            L `).concat(e+r,",").concat(n+i-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-c*v,",").concat(n+i,`
            L `).concat(e+c*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*v," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},Yfe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),h=Math.min(s,s+c),p=Math.max(s,s+c);return r>=u&&r<=d&&i>=h&&i<=p}return!1},Wfe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Uw=function(e){var n=U2(U2({},Wfe),e),r=F.useRef(),i=F.useState(-1),a=Ffe(i,2),s=a[0],o=a[1];F.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var O=r.current.getTotalLength();O&&o(O)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,p=n.radius,y=n.className,v=n.animationEasing,b=n.animationDuration,x=n.animationBegin,T=n.isAnimationActive,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var A=et("recharts-rectangle",y);return _?Q.createElement(ua,{canBegin:s>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:b,animationEasing:v,isActive:_},function(O){var R=O.width,C=O.height,L=O.x,P=O.y;return Q.createElement(ua,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:b,isActive:T,easing:v},Q.createElement("path",dp({},We(n,!0),{className:A,d:B2(L,P,R,C,p),ref:r})))}):Q.createElement("path",dp({},We(n,!0),{className:A,d:B2(c,u,d,h,p)}))};function dA(){return dA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dA.apply(this,arguments)}var Bw=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=et("recharts-dot",a);return n===+n&&r===+r&&i===+i?Q.createElement("circle",dA({},We(e,!1),Nm(e),{className:s,cx:n,cy:r,r:i})):null};function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}var Xfe=["x","y","top","left","width","height","className"];function hA(){return hA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hA.apply(this,arguments)}function F2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(n),!0).forEach(function(r){Zfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zfe(t,e,n){return e=Jfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jfe(t){var e=ede(t,"string");return Sf(e)=="symbol"?e:e+""}function ede(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tde(t,e){if(t==null)return{};var n=nde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var rde=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},ide=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,p=e.height,y=p===void 0?0:p,v=e.className,b=tde(e,Xfe),x=Qfe({x:r,y:a,top:o,left:u,width:h,height:y},b);return!ve(r)||!ve(a)||!ve(h)||!ve(y)||!ve(o)||!ve(u)?null:Q.createElement("path",hA({},We(x,!0),{className:et("recharts-cross",v),d:rde(r,a,h,y,o,u)}))},QS,$2;function ade(){if($2)return QS;$2=1;var t=r6(),e=t(Object.getPrototypeOf,Object);return QS=e,QS}var ZS,G2;function sde(){if(G2)return ZS;G2=1;var t=da(),e=ade(),n=ha(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,c=s.call(Object);function u(d){if(!n(d)||t(d)!=r)return!1;var h=e(d);if(h===null)return!0;var p=o.call(h,"constructor")&&h.constructor;return typeof p=="function"&&p instanceof p&&s.call(p)==c}return ZS=u,ZS}var ode=sde();const lde=vt(ode);var JS,V2;function ude(){if(V2)return JS;V2=1;var t=da(),e=ha(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return JS=r,JS}var cde=ude();const fde=vt(cde);function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function hp(){return hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hp.apply(this,arguments)}function dde(t,e){return gde(t)||pde(t,e)||mde(t,e)||hde()}function hde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mde(t,e){if(t){if(typeof t=="string")return q2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q2(t,e)}}function q2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function gde(t){if(Array.isArray(t))return t}function H2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function z2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H2(Object(n),!0).forEach(function(r){yde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yde(t,e,n){return e=vde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vde(t){var e=xde(t,"string");return Ef(e)=="symbol"?e:e+""}function xde(t,e){if(Ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K2=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},bde={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Sde=function(e){var n=z2(z2({},bde),e),r=F.useRef(),i=F.useState(-1),a=dde(i,2),s=a[0],o=a[1];F.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,p=n.height,y=n.className,v=n.animationEasing,b=n.animationDuration,x=n.animationBegin,T=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||p!==+p||d===0&&h===0||p===0)return null;var _=et("recharts-trapezoid",y);return T?Q.createElement(ua,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:p,x:c,y:u},duration:b,animationEasing:v,isActive:T},function(A){var O=A.upperWidth,R=A.lowerWidth,C=A.height,L=A.x,P=A.y;return Q.createElement(ua,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:b,easing:v},Q.createElement("path",hp({},We(n,!0),{className:_,d:K2(L,P,O,R,C),ref:r})))}):Q.createElement("g",null,Q.createElement("path",hp({},We(n,!0),{className:_,d:K2(c,u,d,h,p)})))},Ede=["option","shapeType","propTransformer","activeClassName","isActive"];function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function Tde(t,e){if(t==null)return{};var n=Ade(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ade(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Y2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y2(Object(n),!0).forEach(function(r){wde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wde(t,e,n){return e=_de(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _de(t){var e=Rde(t,"string");return Tf(e)=="symbol"?e:e+""}function Rde(t,e){if(Tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ode(t,e){return mp(mp({},e),t)}function Cde(t,e){return t==="symbols"}function W2(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Q.createElement(Uw,n);case"trapezoid":return Q.createElement(Sde,n);case"sector":return Q.createElement(L5,n);case"symbols":if(Cde(e))return Q.createElement(rw,n);break;default:return null}}function Lde(t){return F.isValidElement(t)?t.props:t}function Dde(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Ode:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,c=Tde(t,Ede),u;if(F.isValidElement(e))u=F.cloneElement(e,mp(mp({},c),Lde(e)));else if(Ge(e))u=e(c);else if(lde(e)&&!fde(e)){var d=i(e,c);u=Q.createElement(W2,{shapeType:n,elementProps:d})}else{var h=c;u=Q.createElement(W2,{shapeType:n,elementProps:h})}return o?Q.createElement($t,{className:s},u):u}function Eg(t,e){return e!=null&&"trapezoids"in t.props}function Tg(t,e){return e!=null&&"sectors"in t.props}function Af(t,e){return e!=null&&"points"in t.props}function Ide(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function Pde(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Nde(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Mde(t,e){var n;return Eg(t,e)?n=Ide:Tg(t,e)?n=Pde:Af(t,e)&&(n=Nde),n}function kde(t,e){var n;return Eg(t,e)?n="trapezoids":Tg(t,e)?n="sectors":Af(t,e)&&(n="points"),n}function jde(t,e){if(Eg(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Tg(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Af(t,e)?e.payload:{}}function Ude(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=kde(n,e),a=jde(n,e),s=r.filter(function(c,u){var d=xg(a,c),h=n.props[i].filter(function(v){var b=Mde(n,e);return b(v,e)}),p=n.props[i].indexOf(h[h.length-1]),y=u===p;return d&&y}),o=r.indexOf(s[s.length-1]);return o}var eE,X2;function Bde(){if(X2)return eE;X2=1;var t=Math.ceil,e=Math.max;function n(r,i,a,s){for(var o=-1,c=e(t((i-r)/(a||1)),0),u=Array(c);c--;)u[s?c:++o]=r,r+=a;return u}return eE=n,eE}var tE,Q2;function U5(){if(Q2)return tE;Q2=1;var t=x6(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return tE=r,tE}var nE,Z2;function Fde(){if(Z2)return nE;Z2=1;var t=Bde(),e=cg(),n=U5();function r(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),t(a,s,o,i)}}return nE=r,nE}var rE,J2;function $de(){if(J2)return rE;J2=1;var t=Fde(),e=t();return rE=e,rE}var Gde=$de();const pp=vt(Gde);function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function ej(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ej(Object(n),!0).forEach(function(r){B5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ej(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B5(t,e,n){return e=Vde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vde(t){var e=qde(t,"string");return wf(e)=="symbol"?e:e+""}function qde(t,e){if(wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hde=["Webkit","Moz","O","ms"],zde=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Hde.reduce(function(a,s){return tj(tj({},a),{},B5({},s+r,n))},{});return i[e]=n,i};function Cl(t){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(t)}function gp(){return gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gp.apply(this,arguments)}function nj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nj(Object(n),!0).forEach(function(r){or(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$5(r.key),r)}}function Yde(t,e,n){return e&&rj(t.prototype,e),n&&rj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wde(t,e,n){return e=yp(e),Xde(t,F5()?Reflect.construct(e,n||[],yp(t).constructor):e.apply(t,n))}function Xde(t,e){if(e&&(Cl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qde(t)}function Qde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F5=function(){return!!t})()}function yp(t){return yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yp(t)}function Zde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mA(t,e)}function mA(t,e){return mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mA(t,e)}function or(t,e,n){return e=$5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $5(t){var e=Jde(t,"string");return Cl(e)=="symbol"?e:e+""}function Jde(t,e){if(Cl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ehe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Ic().domain(pp(0,c)).range([a,a+s-o]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},ij=function(e){return e.changedTouches&&!!e.changedTouches.length},Ll=function(t){function e(n){var r;return Kde(this,e),r=Wde(this,e,[n]),or(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),or(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),or(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),or(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),or(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),or(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),or(r,"handleSlideDragStart",function(i){var a=ij(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Zde(e,t),Yde(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,h=Math.min(i,a),p=Math.max(i,a),y=e.getIndexInRange(s,h),v=e.getIndexInRange(s,p);return{startIndex:y-y%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,c=dr(a[r],o,r);return Ge(s)?s(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,p=c.startIndex,y=c.endIndex,v=c.onChange,b=r.pageX-a;b>0?b=Math.min(b,u+d-h-o,u+d-h-s):b<0&&(b=Math.max(b,u-s,u-o));var x=this.getIndex({startX:s+b,endX:o+b});(x.startIndex!==p||x.endIndex!==y)&&v&&v(x),this.setState({startX:s+b,endX:o+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=ij(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,c=i.startX,u=this.state[s],d=this.props,h=d.x,p=d.width,y=d.travellerWidth,v=d.onChange,b=d.gap,x=d.data,T={startX:this.state.startX,endX:this.state.endX},_=r.pageX-a;_>0?_=Math.min(_,h+p-y-u):_<0&&(_=Math.max(_,h-u)),T[s]=u+_;var A=this.getIndex(T),O=A.startIndex,R=A.endIndex,C=function(){var P=x.length-1;return s==="startX"&&(o>c?O%b===0:R%b===0)||o<c&&R===P||s==="endX"&&(o>c?R%b===0:O%b===0)||o>c&&R===P};this.setState(or(or({},s,u+_),"brushMoveStartX",r.pageX),function(){v&&C()&&v(A)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,c=s.startX,u=s.endX,d=this.state[i],h=o.indexOf(d);if(h!==-1){var p=h+r;if(!(p===-1||p>=o.length)){var y=o[p];i==="startX"&&y>=u||i==="endX"&&y<=c||this.setState(or({},i,y),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.fill,u=r.stroke;return Q.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.data,u=r.children,d=r.padding,h=F.Children.only(u);return h?Q.cloneElement(h,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,p=c.traveller,y=c.ariaLabel,v=c.data,b=c.startIndex,x=c.endIndex,T=Math.max(r,this.props.x),_=iE(iE({},We(this.props,!1)),{},{x:T,y:u,width:d,height:h}),A=y||"Min value: ".concat((a=v[b])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=v[x])===null||s===void 0?void 0:s.name);return Q.createElement($t,{tabIndex:0,role:"slider","aria-label":A,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(R){["ArrowLeft","ArrowRight"].includes(R.key)&&(R.preventDefault(),R.stopPropagation(),o.handleTravellerMoveKeyboard(R.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,_))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:h,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,p=d.endX,y=5,v={pointerEvents:"none",fill:u};return Q.createElement($t,{className:"recharts-brush-texts"},Q.createElement(zm,gp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,p)-y,y:s+o/2},v),this.getTextOfTick(i)),Q.createElement(zm,gp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,p)+c+y,y:s+o/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,p=this.state,y=p.startX,v=p.endX,b=p.isTextActive,x=p.isSlideMoving,T=p.isTravellerMoving,_=p.isTravellerFocused;if(!i||!i.length||!ve(o)||!ve(c)||!ve(u)||!ve(d)||u<=0||d<=0)return null;var A=et("recharts-brush",a),O=Q.Children.count(s)===1,R=zde("userSelect","none");return Q.createElement($t,{className:A,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:R},this.renderBackground(),O&&this.renderPanorama(),this.renderSlide(y,v),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(v,"endX"),(b||x||T||_||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,c=r.stroke,u=Math.floor(a+o/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:i,y:a,width:s,height:o,fill:c,stroke:"none"}),Q.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return Q.isValidElement(r)?a=Q.cloneElement(r,i):Ge(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return iE({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?ehe({data:a,width:s,x:o,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([o,o+s-c]);var p=i.scale.domain().map(function(y){return i.scale(y)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var c=Math.floor((s+o)/2);r[c]>i?o=c:s=c}return i>=r[o]?o:s}}])}(F.PureComponent);or(Ll,"displayName","Brush");or(Ll,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var aE,aj;function the(){if(aj)return aE;aj=1;var t=cw();function e(n,r){var i;return t(n,function(a,s,o){return i=r(a,s,o),!i}),!!i}return aE=e,aE}var sE,sj;function nhe(){if(sj)return sE;sj=1;var t=X4(),e=ns(),n=the(),r=Zn(),i=cg();function a(s,o,c){var u=r(s)?t:n;return c&&i(s,o,c)&&(o=void 0),u(s,e(o,3))}return sE=a,sE}var rhe=nhe();const ihe=vt(rhe);var Ti=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},oE,oj;function ahe(){if(oj)return oE;oj=1;var t=m6();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return oE=e,oE}var lE,lj;function she(){if(lj)return lE;lj=1;var t=ahe(),e=d6(),n=ns();function r(i,a){var s={};return a=n(a,3),e(i,function(o,c,u){t(s,c,a(o,c,u))}),s}return lE=r,lE}var ohe=she();const lhe=vt(ohe);var uE,uj;function uhe(){if(uj)return uE;uj=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return uE=t,uE}var cE,cj;function che(){if(cj)return cE;cj=1;var t=cw();function e(n,r){var i=!0;return t(n,function(a,s,o){return i=!!r(a,s,o),i}),i}return cE=e,cE}var fE,fj;function fhe(){if(fj)return fE;fj=1;var t=uhe(),e=che(),n=ns(),r=Zn(),i=cg();function a(s,o,c){var u=r(s)?t:e;return c&&i(s,o,c)&&(o=void 0),u(s,n(o,3))}return fE=a,fE}var dhe=fhe();const G5=vt(dhe);var hhe=["x","y"];function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function pA(){return pA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pA.apply(this,arguments)}function dj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dj(Object(n),!0).forEach(function(r){mhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mhe(t,e,n){return e=phe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function phe(t){var e=ghe(t,"string");return _f(e)=="symbol"?e:e+""}function ghe(t,e){if(_f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yhe(t,e){if(t==null)return{};var n=vhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xhe(t,e){var n=t.x,r=t.y,i=yhe(t,hhe),a="".concat(n),s=parseInt(a,10),o="".concat(r),c=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),h="".concat(e.width||i.width),p=parseInt(h,10);return vc(vc(vc(vc(vc({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function hj(t){return Q.createElement(Dde,pA({shapeType:"rectangle",propTransformer:xhe,activeClassName:"recharts-active-bar"},t))}var bhe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||Zs(),n)}},She=["value","background"],V5;function Dl(t){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(t)}function Ehe(t,e){if(t==null)return{};var n=The(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function The(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vp(){return vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vp.apply(this,arguments)}function mj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mj(Object(n),!0).forEach(function(r){za(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ahe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H5(r.key),r)}}function whe(t,e,n){return e&&pj(t.prototype,e),n&&pj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _he(t,e,n){return e=xp(e),Rhe(t,q5()?Reflect.construct(e,n||[],xp(t).constructor):e.apply(t,n))}function Rhe(t,e){if(e&&(Dl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ohe(t)}function Ohe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q5=function(){return!!t})()}function xp(t){return xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xp(t)}function Che(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gA(t,e)}function gA(t,e){return gA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gA(t,e)}function za(t,e,n){return e=H5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H5(t){var e=Lhe(t,"string");return Dl(e)=="symbol"?e:e+""}function Lhe(t,e){if(Dl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rd=function(t){function e(){var n;Ahe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=_he(this,e,[].concat(i)),za(n,"state",{isAnimationFinished:!1}),za(n,"id",Xf("recharts-bar-")),za(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),za(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return Che(e,t),whe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,c=a.activeIndex,u=a.activeBar,d=We(this.props,!1);return r&&r.map(function(h,p){var y=p===c,v=y?u:s,b=Ht(Ht(Ht({},d),h),{},{isActive:y,option:v,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Q.createElement($t,vp({className:"recharts-bar-rectangle"},Mm(i.props,h,p),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(p)}),Q.createElement(hj,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,p=this.state.prevData;return Q.createElement(ua,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var v=y.t,b=a.map(function(x,T){var _=p&&p[T];if(_){var A=Xr(_.x,x.x),O=Xr(_.y,x.y),R=Xr(_.width,x.width),C=Xr(_.height,x.height);return Ht(Ht({},x),{},{x:A(v),y:O(v),width:R(v),height:C(v)})}if(s==="horizontal"){var L=Xr(0,x.height),P=L(v);return Ht(Ht({},x),{},{y:x.y+x.height-P,height:P})}var N=Xr(0,x.width),k=N(v);return Ht(Ht({},x),{},{width:k})});return Q.createElement($t,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!xg(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,c=We(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,p=Ehe(u,She);if(!h)return null;var y=Ht(Ht(Ht(Ht(Ht({},p),{},{fill:"#eee"},h),c),Mm(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return Q.createElement(hj,vp({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},y))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=Pr(d,nd);if(!h)return null;var p=u==="vertical"?s[0].height/2:s[0].width/2,y=function(x,T){var _=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:_,errorVal:dr(x,T)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement($t,v,h.map(function(b){return Q.cloneElement(b,{key:"error-bar-".concat(i,"-").concat(b.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,offset:p,dataPointFormatter:y})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,p=r.height,y=r.isAnimationActive,v=r.background,b=r.id;if(i||!a||!a.length)return null;var x=this.state.isAnimationFinished,T=et("recharts-bar",s),_=o&&o.allowDataOverflow,A=c&&c.allowDataOverflow,O=_||A,R=Ye(b)?this.id:b;return Q.createElement($t,{className:T},_||A?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(R)},Q.createElement("rect",{x:_?u:u-h/2,y:A?d:d-p/2,width:_?h:h*2,height:A?p:p*2}))):null,Q.createElement($t,{className:"recharts-bar-rectangles",clipPath:O?"url(#clipPath-".concat(R,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(O,R),(!y||x)&&Ya.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(F.PureComponent);V5=rd;za(rd,"displayName","Bar");za(rd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!tu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});za(rd,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,p=t.offset,y=Wle(r,n);if(!y)return null;var v=e.layout,b=n.type.defaultProps,x=b!==void 0?Ht(Ht({},b),n.props):n.props,T=x.dataKey,_=x.children,A=x.minPointSize,O=v==="horizontal"?s:a,R=u?O.scale.domain():null,C=rue({numericAxis:O}),L=Pr(_,S6),P=h.map(function(N,k){var M,G,K,W,Y,j;u?M=Xle(u[d+k],R):(M=dr(N,T),Array.isArray(M)||(M=[C,M]));var $=bhe(A,V5.defaultProps.minPointSize)(M[1],k);if(v==="horizontal"){var q,Z=[s.scale(M[0]),s.scale(M[1])],B=Z[0],V=Z[1];G=Zk({axis:a,ticks:o,bandSize:i,offset:y.offset,entry:N,index:k}),K=(q=V??B)!==null&&q!==void 0?q:void 0,W=y.size;var H=B-V;if(Y=Number.isNaN(H)?0:H,j={x:G,y:s.y,width:W,height:s.height},Math.abs($)>0&&Math.abs(Y)<Math.abs($)){var te=Zr(Y||$)*(Math.abs($)-Math.abs(Y));K-=te,Y+=te}}else{var ce=[a.scale(M[0]),a.scale(M[1])],ye=ce[0],ge=ce[1];if(G=ye,K=Zk({axis:s,ticks:c,bandSize:i,offset:y.offset,entry:N,index:k}),W=ge-ye,Y=y.size,j={x:a.x,y:K,width:a.width,height:Y},Math.abs($)>0&&Math.abs(W)<Math.abs($)){var Me=Zr(W||$)*(Math.abs($)-Math.abs(W));W+=Me}}return Ht(Ht(Ht({},N),{},{x:G,y:K,width:W,height:Y,value:u?M:M[1],payload:N,background:j},L&&L[k]&&L[k].props),{},{tooltipPayload:[R5(n,N)],tooltipPosition:{x:G+W/2,y:K+Y/2}})});return Ht({data:P,layout:v},p)});function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function Dhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z5(r.key),r)}}function Ihe(t,e,n){return e&&gj(t.prototype,e),n&&gj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yj(Object(n),!0).forEach(function(r){Ag(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ag(t,e,n){return e=z5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z5(t){var e=Phe(t,"string");return Rf(e)=="symbol"?e:e+""}function Phe(t,e){if(Rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nhe=function(e,n,r,i,a){var s=e.width,o=e.height,c=e.layout,u=e.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!lr(u,rd);return d.reduce(function(y,v){var b=n[v],x=b.orientation,T=b.domain,_=b.padding,A=_===void 0?{}:_,O=b.mirror,R=b.reversed,C="".concat(x).concat(O?"Mirror":""),L,P,N,k,M;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var G=T[1]-T[0],K=1/0,W=b.categoricalDomain.sort(Iee);if(W.forEach(function(ce,ye){ye>0&&(K=Math.min((ce||0)-(W[ye-1]||0),K))}),Number.isFinite(K)){var Y=K/G,j=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(L=Y*j/2),b.padding==="no-gap"){var $=Xs(e.barCategoryGap,Y*j),q=Y*j/2;L=q-$-(q-$)/j*$}}}i==="xAxis"?P=[r.left+(A.left||0)+(L||0),r.left+r.width-(A.right||0)-(L||0)]:i==="yAxis"?P=c==="horizontal"?[r.top+r.height-(A.bottom||0),r.top+(A.top||0)]:[r.top+(A.top||0)+(L||0),r.top+r.height-(A.bottom||0)-(L||0)]:P=b.range,R&&(P=[P[1],P[0]]);var Z=Kle(b,a,p),B=Z.scale,V=Z.realScaleType;B.domain(T).range(P),Yle(B);var H=nue(B,Yr(Yr({},b),{},{realScaleType:V}));i==="xAxis"?(M=x==="top"&&!O||x==="bottom"&&O,N=r.left,k=h[C]-M*b.height):i==="yAxis"&&(M=x==="left"&&!O||x==="right"&&O,N=h[C]-M*b.width,k=r.top);var te=Yr(Yr(Yr({},b),H),{},{realScaleType:V,x:N,y:k,scale:B,width:i==="xAxis"?r.width:b.width,height:i==="yAxis"?r.height:b.height});return te.bandSize=sp(te,H),!b.hide&&i==="xAxis"?h[C]+=(M?-1:1)*te.height:b.hide||(h[C]+=(M?-1:1)*te.width),Yr(Yr({},y),{},Ag({},v,te))},{})},K5=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},Mhe=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return K5({x:n,y:r},{x:i,y:a})},Y5=function(){function t(e){Dhe(this,t),this.scale=e}return Ihe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Ag(Y5,"EPS",1e-4);var Fw=function(e){var n=Object.keys(e).reduce(function(r,i){return Yr(Yr({},r),{},Ag({},i,Y5.create(e[i])))},{});return Yr(Yr({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return lhe(i,function(c,u){return n[u].apply(c,{bandAware:s,position:o})})},isInRange:function(i){return G5(i,function(a,s){return n[s].isInRange(a)})}})};function khe(t){return(t%180+180)%180}var jhe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=khe(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},dE,vj;function Uhe(){if(vj)return dE;vj=1;var t=ns(),e=Qf(),n=lg();function r(i){return function(a,s,o){var c=Object(a);if(!e(a)){var u=t(s,3);a=n(a),s=function(h){return u(c[h],h,c)}}var d=i(a,s,o);return d>-1?c[u?a[d]:d]:void 0}}return dE=r,dE}var hE,xj;function Bhe(){if(xj)return hE;xj=1;var t=U5();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return hE=e,hE}var mE,bj;function Fhe(){if(bj)return mE;bj=1;var t=o6(),e=ns(),n=Bhe(),r=Math.max;function i(a,s,o){var c=a==null?0:a.length;if(!c)return-1;var u=o==null?0:n(o);return u<0&&(u=r(c+u,0)),t(a,e(s,3),u)}return mE=i,mE}var pE,Sj;function $he(){if(Sj)return pE;Sj=1;var t=Uhe(),e=Fhe(),n=t(e);return pE=n,pE}var Ghe=$he();const Vhe=vt(Ghe);var qhe=T4();const Hhe=vt(qhe);var zhe=Hhe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),$w=F.createContext(void 0),Gw=F.createContext(void 0),W5=F.createContext(void 0),X5=F.createContext({}),Q5=F.createContext(void 0),Z5=F.createContext(0),J5=F.createContext(0),Ej=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,c=e.width,u=e.height,d=zhe(a);return Q.createElement($w.Provider,{value:r},Q.createElement(Gw.Provider,{value:i},Q.createElement(X5.Provider,{value:a},Q.createElement(W5.Provider,{value:d},Q.createElement(Q5.Provider,{value:s},Q.createElement(Z5.Provider,{value:u},Q.createElement(J5.Provider,{value:c},o)))))))},Khe=function(){return F.useContext(Q5)},e8=function(e){var n=F.useContext($w);n==null&&Zs();var r=n[e];return r==null&&Zs(),r},Yhe=function(){var e=F.useContext($w);return Ha(e)},Whe=function(){var e=F.useContext(Gw),n=Vhe(e,function(r){return G5(r.domain,Number.isFinite)});return n||Ha(e)},t8=function(e){var n=F.useContext(Gw);n==null&&Zs();var r=n[e];return r==null&&Zs(),r},Xhe=function(){var e=F.useContext(W5);return e},Qhe=function(){return F.useContext(X5)},Vw=function(){return F.useContext(J5)},qw=function(){return F.useContext(Z5)};function Il(t){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Il(t)}function Zhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jhe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r8(r.key),r)}}function eme(t,e,n){return e&&Jhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tme(t,e,n){return e=bp(e),nme(t,n8()?Reflect.construct(e,n||[],bp(t).constructor):e.apply(t,n))}function nme(t,e){if(e&&(Il(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rme(t)}function rme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n8=function(){return!!t})()}function bp(t){return bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bp(t)}function ime(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yA(t,e)}function yA(t,e){return yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yA(t,e)}function Tj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Aj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tj(Object(n),!0).forEach(function(r){Hw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hw(t,e,n){return e=r8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r8(t){var e=ame(t,"string");return Il(e)=="symbol"?e:e+""}function ame(t,e){if(Il(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Il(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function sme(t,e){return cme(t)||ume(t,e)||lme(t,e)||ome()}function ome(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lme(t,e){if(t){if(typeof t=="string")return wj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wj(t,e)}}function wj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ume(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function cme(t){if(Array.isArray(t))return t}function vA(){return vA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vA.apply(this,arguments)}var fme=function(e,n){var r;return Q.isValidElement(e)?r=Q.cloneElement(e,n):Ge(e)?r=e(n):r=Q.createElement("line",vA({},n,{className:"recharts-reference-line-line"})),r},dme=function(e,n,r,i,a,s,o,c,u){var d=a.x,h=a.y,p=a.width,y=a.height;if(r){var v=u.y,b=e.y.apply(v,{position:s});if(Ti(u,"discard")&&!e.y.isInRange(b))return null;var x=[{x:d+p,y:b},{x:d,y:b}];return c==="left"?x.reverse():x}if(n){var T=u.x,_=e.x.apply(T,{position:s});if(Ti(u,"discard")&&!e.x.isInRange(_))return null;var A=[{x:_,y:h+y},{x:_,y:h}];return o==="top"?A.reverse():A}if(i){var O=u.segment,R=O.map(function(C){return e.apply(C,{position:s})});return Ti(u,"discard")&&ihe(R,function(C){return!e.isInRange(C)})?null:R}return null};function hme(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,c=t.alwaysShow,u=Khe(),d=e8(i),h=t8(a),p=Xhe();if(!u||!p)return null;ta(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=Fw({x:d.scale,y:h.scale}),v=tn(e),b=tn(n),x=r&&r.length===2,T=dme(y,v,b,x,p,t.position,d.orientation,h.orientation,t);if(!T)return null;var _=sme(T,2),A=_[0],O=A.x,R=A.y,C=_[1],L=C.x,P=C.y,N=Ti(t,"hidden")?"url(#".concat(u,")"):void 0,k=Aj(Aj({clipPath:N},We(t,!0)),{},{x1:O,y1:R,x2:L,y2:P});return Q.createElement($t,{className:et("recharts-reference-line",o)},fme(s,k),Pn.renderCallByParent(t,Mhe({x1:O,y1:R,x2:L,y2:P})))}var zw=function(t){function e(){return Zhe(this,e),tme(this,e,arguments)}return ime(e,t),eme(e,[{key:"render",value:function(){return Q.createElement(hme,this.props)}}])}(Q.Component);Hw(zw,"displayName","ReferenceLine");Hw(zw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function xA(){return xA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xA.apply(this,arguments)}function Pl(t){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(t)}function _j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_j(Object(n),!0).forEach(function(r){wg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_j(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pme(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a8(r.key),r)}}function gme(t,e,n){return e&&pme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yme(t,e,n){return e=Sp(e),vme(t,i8()?Reflect.construct(e,n||[],Sp(t).constructor):e.apply(t,n))}function vme(t,e){if(e&&(Pl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xme(t)}function xme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i8=function(){return!!t})()}function Sp(t){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sp(t)}function bme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bA(t,e)}function bA(t,e){return bA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bA(t,e)}function wg(t,e,n){return e=a8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a8(t){var e=Sme(t,"string");return Pl(e)=="symbol"?e:e+""}function Sme(t,e){if(Pl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Eme=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=Fw({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return Ti(e,"discard")&&!s.isInRange(o)?null:o},_g=function(t){function e(){return mme(this,e),yme(this,e,arguments)}return bme(e,t),gme(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,c=r.clipPathId,u=tn(i),d=tn(a);if(ta(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=Eme(this.props);if(!h)return null;var p=h.x,y=h.y,v=this.props,b=v.shape,x=v.className,T=Ti(this.props,"hidden")?"url(#".concat(c,")"):void 0,_=Rj(Rj({clipPath:T},We(this.props,!0)),{},{cx:p,cy:y});return Q.createElement($t,{className:et("recharts-reference-dot",x)},e.renderDot(b,_),Pn.renderCallByParent(this.props,{x:p-s,y:y-s,width:2*s,height:2*s}))}}])}(Q.Component);wg(_g,"displayName","ReferenceDot");wg(_g,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});wg(_g,"renderDot",function(t,e){var n;return Q.isValidElement(t)?n=Q.cloneElement(t,e):Ge(t)?n=t(e):n=Q.createElement(Bw,xA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function SA(){return SA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SA.apply(this,arguments)}function Nl(t){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nl(t)}function Oj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oj(Object(n),!0).forEach(function(r){Rg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ame(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o8(r.key),r)}}function wme(t,e,n){return e&&Ame(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _me(t,e,n){return e=Ep(e),Rme(t,s8()?Reflect.construct(e,n||[],Ep(t).constructor):e.apply(t,n))}function Rme(t,e){if(e&&(Nl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ome(t)}function Ome(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s8=function(){return!!t})()}function Ep(t){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ep(t)}function Cme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EA(t,e)}function EA(t,e){return EA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EA(t,e)}function Rg(t,e,n){return e=o8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o8(t){var e=Lme(t,"string");return Nl(e)=="symbol"?e:e+""}function Lme(t,e){if(Nl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Dme=function(e,n,r,i,a){var s=a.x1,o=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var p=Fw({x:d.scale,y:h.scale}),y={x:e?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(c,{position:"start"}):p.y.rangeMin},v={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return Ti(a,"discard")&&(!p.isInRange(y)||!p.isInRange(v))?null:K5(y,v)},Og=function(t){function e(){return Tme(this,e),_me(this,e,arguments)}return Cme(e,t),wme(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;ta(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=tn(i),p=tn(a),y=tn(s),v=tn(o),b=this.props.shape;if(!h&&!p&&!y&&!v&&!b)return null;var x=Dme(h,p,y,v,this.props);if(!x&&!b)return null;var T=Ti(this.props,"hidden")?"url(#".concat(d,")"):void 0;return Q.createElement($t,{className:et("recharts-reference-area",c)},e.renderRect(b,Cj(Cj({clipPath:T},We(this.props,!0)),x)),Pn.renderCallByParent(this.props,x))}}])}(Q.Component);Rg(Og,"displayName","ReferenceArea");Rg(Og,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Rg(Og,"renderRect",function(t,e){var n;return Q.isValidElement(t)?n=Q.cloneElement(t,e):Ge(t)?n=t(e):n=Q.createElement(Uw,SA({},e,{className:"recharts-reference-area-rect"})),n});function l8(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Ime(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return jhe(r,n)}function Pme(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Tp(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Nme(t,e){return l8(t,e+1)}function Mme(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,c=0,u=1,d=s,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:l8(r,u)};var b=c,x,T=function(){return x===void 0&&(x=n(v,b)),x},_=v.coordinate,A=c===0||Tp(t,_,T,d,o);A||(c=0,d=s,u+=1),A&&(d=_+t*(T()/2+i),c+=u)},p;u<=a.length;)if(p=h(),p)return p.v;return[]}function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function Lj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lj(Object(n),!0).forEach(function(r){kme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kme(t,e,n){return e=jme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jme(t){var e=Ume(t,"string");return Of(e)=="symbol"?e:e+""}function Ume(t,e){if(Of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bme(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,c=e.end,u=function(p){var y=a[p],v,b=function(){return v===void 0&&(v=n(y,p)),v};if(p===s-1){var x=t*(y.coordinate+t*b()/2-c);a[p]=y=Dn(Dn({},y),{},{tickCoord:x>0?y.coordinate-x*t:y.coordinate})}else a[p]=y=Dn(Dn({},y),{},{tickCoord:y.coordinate});var T=Tp(t,y.tickCoord,b,o,c);T&&(c=y.tickCoord-t*(b()/2+i),a[p]=Dn(Dn({},y),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function Fme(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,c=e.start,u=e.end;if(a){var d=r[o-1],h=n(d,o-1),p=t*(d.coordinate+t*h/2-u);s[o-1]=d=Dn(Dn({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var y=Tp(t,d.tickCoord,function(){return h},c,u);y&&(u=d.tickCoord-t*(h/2+i),s[o-1]=Dn(Dn({},d),{},{isShow:!0}))}for(var v=a?o-1:o,b=function(_){var A=s[_],O,R=function(){return O===void 0&&(O=n(A,_)),O};if(_===0){var C=t*(A.coordinate-t*R()/2-c);s[_]=A=Dn(Dn({},A),{},{tickCoord:C<0?A.coordinate-C*t:A.coordinate})}else s[_]=A=Dn(Dn({},A),{},{tickCoord:A.coordinate});var L=Tp(t,A.tickCoord,R,c,u);L&&(c=A.tickCoord+t*(R()/2+i),s[_]=Dn(Dn({},A),{},{isShow:!0}))},x=0;x<v;x++)b(x);return s}function Kw(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(ve(c)||tu.isSsr)return Nme(i,typeof c=="number"&&ve(c)?c:0);var p=[],y=o==="top"||o==="bottom"?"width":"height",v=d&&y==="width"?Dc(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=function(A,O){var R=Ge(u)?u(A.value,O):A.value;return y==="width"?Ime(Dc(R,{fontSize:e,letterSpacing:n}),v,h):Dc(R,{fontSize:e,letterSpacing:n})[y]},x=i.length>=2?Zr(i[1].coordinate-i[0].coordinate):1,T=Pme(a,x,y);return c==="equidistantPreserveStart"?Mme(x,T,b,i,s):(c==="preserveStart"||c==="preserveStartEnd"?p=Fme(x,T,b,i,s,c==="preserveStartEnd"):p=Bme(x,T,b,i,s),p.filter(function(_){return _.isShow}))}var $me=["viewBox"],Gme=["viewBox"],Vme=["ticks"];function Ml(t){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(t)}function ol(){return ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ol.apply(this,arguments)}function Dj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dj(Object(n),!0).forEach(function(r){Yw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gE(t,e){if(t==null)return{};var n=qme(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Hme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ij(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c8(r.key),r)}}function zme(t,e,n){return e&&Ij(t.prototype,e),n&&Ij(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kme(t,e,n){return e=Ap(e),Yme(t,u8()?Reflect.construct(e,n||[],Ap(t).constructor):e.apply(t,n))}function Yme(t,e){if(e&&(Ml(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wme(t)}function Wme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u8=function(){return!!t})()}function Ap(t){return Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ap(t)}function Xme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TA(t,e)}function TA(t,e){return TA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TA(t,e)}function Yw(t,e,n){return e=c8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c8(t){var e=Qme(t,"string");return Ml(e)=="symbol"?e:e+""}function Qme(t,e){if(Ml(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var au=function(t){function e(n){var r;return Hme(this,e),r=Kme(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Xme(e,t),zme(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=gE(r,$me),o=this.props,c=o.viewBox,u=gE(o,Gme);return!cl(a,c)||!cl(s,u)||!cl(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,c=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,p=i.tickMargin,y,v,b,x,T,_,A=h?-1:1,O=r.tickSize||d,R=ve(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":y=v=r.coordinate,x=s+ +!h*c,b=x-A*O,_=b-A*p,T=R;break;case"left":b=x=r.coordinate,v=a+ +!h*o,y=v-A*O,T=y-A*p,_=R;break;case"right":b=x=r.coordinate,v=a+ +h*o,y=v+A*O,T=y+A*p,_=R;break;default:y=v=r.coordinate,x=s+ +h*c,b=x+A*O,_=b+A*p,T=R;break}return{line:{x1:y,y1:b,x2:v,y2:x},tick:{x:T,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Un(Un(Un({},We(this.props,!1)),We(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);h=Un(Un({},h),{},{x1:i,y1:a+p*o,x2:i+s,y2:a+p*o})}else{var y=+(c==="left"&&!u||c==="right"&&u);h=Un(Un({},h),{},{x1:i+y*s,y1:a,x2:i+y*s,y2:a+o})}return Q.createElement("line",ol({},h,{className:et("recharts-cartesian-axis-line",Ir(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,h=o.tickFormatter,p=o.unit,y=Kw(Un(Un({},this.props),{},{ticks:r}),i,a),v=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),x=We(this.props,!1),T=We(d,!1),_=Un(Un({},x),{},{fill:"none"},We(c,!1)),A=y.map(function(O,R){var C=s.getTickLineCoord(O),L=C.line,P=C.tick,N=Un(Un(Un(Un({textAnchor:v,verticalAnchor:b},x),{},{stroke:"none",fill:u},T),P),{},{index:R,payload:O,visibleTicksCount:y.length,tickFormatter:h});return Q.createElement($t,ol({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Mm(s.props,O,R)),c&&Q.createElement("line",ol({},_,L,{className:et("recharts-cartesian-axis-tick-line",Ir(c,"className"))})),d&&e.renderTickItem(d,N,"".concat(Ge(h)?h(O.value,R):O.value).concat(p||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},A)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,p=h.ticks,y=gE(h,Vme),v=p;return Ge(c)&&(v=p&&p.length>0?c(this.props):c(y)),s<=0||o<=0||!v||!v.length?null:Q.createElement($t,{className:et("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Pn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return Q.isValidElement(r)?s=Q.cloneElement(r,i):Ge(r)?s=r(i):s=Q.createElement(zm,ol({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(F.Component);Yw(au,"displayName","CartesianAxis");Yw(au,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Zme=["x1","y1","x2","y2","key"],Jme=["offset"];function Js(t){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(t)}function Pj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pj(Object(n),!0).forEach(function(r){epe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function epe(t,e,n){return e=tpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tpe(t){var e=npe(t,"string");return Js(e)=="symbol"?e:e+""}function npe(t,e){if(Js(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Js(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $s(){return $s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$s.apply(this,arguments)}function Nj(t,e){if(t==null)return{};var n=rpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ipe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,c=e.ry;return Q.createElement("rect",{x:i,y:a,ry:c,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function f8(t,e){var n;if(Q.isValidElement(t))n=Q.cloneElement(t,e);else if(Ge(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,c=Nj(e,Zme),u=We(c,!1);u.offset;var d=Nj(u,Jme);n=Q.createElement("line",$s({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function ape(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Nn(Nn({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(c),index:c});return f8(i,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function spe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Nn(Nn({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(c),index:c});return f8(i,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function ope(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,y){return p-y});i!==d[0]&&d.unshift(0);var h=d.map(function(p,y){var v=!d[y+1],b=v?i+s-p:d[y+1]-p;if(b<=0)return null;var x=y%e.length;return Q.createElement("rect",{key:"react-".concat(y),y:p,x:r,height:b,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function lpe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(p){return Math.round(p+a-a)}).sort(function(p,y){return p-y});a!==d[0]&&d.unshift(0);var h=d.map(function(p,y){var v=!d[y+1],b=v?a+o-p:d[y+1]-p;if(b<=0)return null;var x=y%r.length;return Q.createElement("rect",{key:"react-".concat(y),x:p,y:s,width:b,height:c,stroke:"none",fill:r[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var upe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return w5(Kw(Nn(Nn(Nn({},au.defaultProps),r),{},{ticks:Zi(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},cpe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return w5(Kw(Nn(Nn(Nn({},au.defaultProps),r),{},{ticks:Zi(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Yo={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function d8(t){var e,n,r,i,a,s,o=Vw(),c=qw(),u=Qhe(),d=Nn(Nn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Yo.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Yo.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Yo.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Yo.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Yo.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Yo.verticalFill,x:ve(t.x)?t.x:u.left,y:ve(t.y)?t.y:u.top,width:ve(t.width)?t.width:u.width,height:ve(t.height)?t.height:u.height}),h=d.x,p=d.y,y=d.width,v=d.height,b=d.syncWithTicks,x=d.horizontalValues,T=d.verticalValues,_=Yhe(),A=Whe();if(!ve(y)||y<=0||!ve(v)||v<=0||!ve(h)||h!==+h||!ve(p)||p!==+p)return null;var O=d.verticalCoordinatesGenerator||upe,R=d.horizontalCoordinatesGenerator||cpe,C=d.horizontalPoints,L=d.verticalPoints;if((!C||!C.length)&&Ge(R)){var P=x&&x.length,N=R({yAxis:A?Nn(Nn({},A),{},{ticks:P?x:A.ticks}):void 0,width:o,height:c,offset:u},P?!0:b);ta(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Js(N),"]")),Array.isArray(N)&&(C=N)}if((!L||!L.length)&&Ge(O)){var k=T&&T.length,M=O({xAxis:_?Nn(Nn({},_),{},{ticks:k?T:_.ticks}):void 0,width:o,height:c,offset:u},k?!0:b);ta(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Js(M),"]")),Array.isArray(M)&&(L=M)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(ipe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),Q.createElement(ape,$s({},d,{offset:u,horizontalPoints:C,xAxis:_,yAxis:A})),Q.createElement(spe,$s({},d,{offset:u,verticalPoints:L,xAxis:_,yAxis:A})),Q.createElement(ope,$s({},d,{horizontalPoints:C})),Q.createElement(lpe,$s({},d,{verticalPoints:L})))}d8.displayName="CartesianGrid";var fpe=["type","layout","connectNulls","ref"],dpe=["key"];function kl(t){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kl(t)}function Mj(t,e){if(t==null)return{};var n=hpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Mc(){return Mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mc.apply(this,arguments)}function kj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kj(Object(n),!0).forEach(function(r){Wr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wo(t){return ype(t)||gpe(t)||ppe(t)||mpe()}function mpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ppe(t,e){if(t){if(typeof t=="string")return AA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AA(t,e)}}function gpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ype(t){if(Array.isArray(t))return AA(t)}function AA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m8(r.key),r)}}function xpe(t,e,n){return e&&jj(t.prototype,e),n&&jj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bpe(t,e,n){return e=wp(e),Spe(t,h8()?Reflect.construct(e,n||[],wp(t).constructor):e.apply(t,n))}function Spe(t,e){if(e&&(kl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Epe(t)}function Epe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h8=function(){return!!t})()}function wp(t){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wp(t)}function Tpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wA(t,e)}function wA(t,e){return wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wA(t,e)}function Wr(t,e,n){return e=m8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m8(t){var e=Ape(t,"string");return kl(e)=="symbol"?e:e+""}function Ape(t,e){if(kl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var id=function(t){function e(){var n;vpe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=bpe(this,e,[].concat(i)),Wr(n,"state",{isAnimationFinished:!0,totalLength:0}),Wr(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),Wr(n,"getStrokeDasharray",function(s,o,c){var u=c.reduce(function(T,_){return T+_});if(!u)return n.generateSimpleStrokeDasharray(o,s);for(var d=Math.floor(s/u),h=s%u,p=o-s,y=[],v=0,b=0;v<c.length;b+=c[v],++v)if(b+c[v]>h){y=[].concat(Wo(c.slice(0,v)),[h-b]);break}var x=y.length%2===0?[0,p]:[p];return[].concat(Wo(e.repeat(c,d)),Wo(y),x).map(function(T){return"".concat(T,"px")}).join(", ")}),Wr(n,"id",Xf("recharts-line-")),Wr(n,"pathRef",function(s){n.mainCurve=s}),Wr(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Wr(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Tpe(e,t),xpe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=Pr(d,nd);if(!h)return null;var p=function(b,x){return{x:b.x,y:b.y,value:b.value,errorVal:dr(b.payload,x)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement($t,y,h.map(function(v){return Q.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,u=o.points,d=o.dataKey,h=We(this.props,!1),p=We(c,!0),y=u.map(function(b,x){var T=sr(sr(sr({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:b.x,cy:b.y,value:b.value,dataKey:d,payload:b.payload,points:u});return e.renderDotItem(c,T)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Q.createElement($t,Mc({className:"recharts-line-dots",key:"dots"},v),y)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,c=o.type,u=o.layout,d=o.connectNulls;o.ref;var h=Mj(o,fpe),p=sr(sr(sr({},We(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:c,layout:u,connectNulls:d});return Q.createElement(nA,Mc({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,c=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,h=s.animationDuration,p=s.animationEasing,y=s.animationId,v=s.animateNewValues,b=s.width,x=s.height,T=this.state,_=T.prevPoints,A=T.totalLength;return Q.createElement(ua,{begin:d,duration:h,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var R=O.t;if(_){var C=_.length/o.length,L=o.map(function(G,K){var W=Math.floor(K*C);if(_[W]){var Y=_[W],j=Xr(Y.x,G.x),$=Xr(Y.y,G.y);return sr(sr({},G),{},{x:j(R),y:$(R)})}if(v){var q=Xr(b*2,G.x),Z=Xr(x/2,G.y);return sr(sr({},G),{},{x:q(R),y:Z(R)})}return sr(sr({},G),{},{x:G.x,y:G.y})});return a.renderCurveStatically(L,r,i)}var P=Xr(0,A),N=P(R),k;if(c){var M="".concat(c).split(/[,\s]+/gim).map(function(G){return parseFloat(G)});k=a.getStrokeDasharray(N,A,M)}else k=a.generateSimpleStrokeDasharray(A,N);return a.renderCurveStatically(o,r,i,{strokeDasharray:k})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return o&&s&&s.length&&(!u&&d>0||!xg(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,c=i.className,u=i.xAxis,d=i.yAxis,h=i.top,p=i.left,y=i.width,v=i.height,b=i.isAnimationActive,x=i.id;if(a||!o||!o.length)return null;var T=this.state.isAnimationFinished,_=o.length===1,A=et("recharts-line",c),O=u&&u.allowDataOverflow,R=d&&d.allowDataOverflow,C=O||R,L=Ye(x)?this.id:x,P=(r=We(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},N=P.r,k=N===void 0?3:N,M=P.strokeWidth,G=M===void 0?2:M,K=$ee(s)?s:{},W=K.clipDot,Y=W===void 0?!0:W,j=k*2+G;return Q.createElement($t,{className:A},O||R?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(L)},Q.createElement("rect",{x:O?p:p-y/2,y:R?h:h-v/2,width:O?y:y*2,height:R?v:v*2})),!Y&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(L)},Q.createElement("rect",{x:p-j/2,y:h-j/2,width:y+j,height:v+j}))):null,!_&&this.renderCurve(C,L),this.renderErrorBar(C,L),(_||s)&&this.renderDots(C,Y,L),(!b||T)&&Ya.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Wo(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Wo(s),Wo(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(Q.isValidElement(r))a=Q.cloneElement(r,i);else if(Ge(r))a=r(i);else{var s=i.key,o=Mj(i,dpe),c=et("recharts-line-dot",typeof r!="boolean"?r.className:"");a=Q.createElement(Bw,Mc({key:s},o,{className:c}))}return a}}])}(F.PureComponent);Wr(id,"displayName","Line");Wr(id,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!tu.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Wr(id,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,h=c.map(function(p,y){var v=dr(p,s);return d==="horizontal"?{x:Qk({axis:n,ticks:i,bandSize:o,entry:p,index:y}),y:Ye(v)?null:r.scale(v),value:v,payload:p}:{x:Ye(v)?null:n.scale(v),y:Qk({axis:r,ticks:a,bandSize:o,entry:p,index:y}),value:v,payload:p}});return sr({points:h,layout:d},u)});function jl(t){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(t)}function wpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y8(r.key),r)}}function Rpe(t,e,n){return e&&_pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ope(t,e,n){return e=_p(e),Cpe(t,p8()?Reflect.construct(e,n||[],_p(t).constructor):e.apply(t,n))}function Cpe(t,e){if(e&&(jl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lpe(t)}function Lpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p8=function(){return!!t})()}function _p(t){return _p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_p(t)}function Dpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_A(t,e)}function _A(t,e){return _A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_A(t,e)}function g8(t,e,n){return e=y8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y8(t){var e=Ipe(t,"string");return jl(e)=="symbol"?e:e+""}function Ipe(t,e){if(jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function RA(){return RA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RA.apply(this,arguments)}function Ppe(t){var e=t.xAxisId,n=Vw(),r=qw(),i=e8(e);return i==null?null:Q.createElement(au,RA({},i,{className:et("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Zi(s,!0)}}))}var Cg=function(t){function e(){return wpe(this,e),Ope(this,e,arguments)}return Dpe(e,t),Rpe(e,[{key:"render",value:function(){return Q.createElement(Ppe,this.props)}}])}(Q.Component);g8(Cg,"displayName","XAxis");g8(Cg,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ul(t){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(t)}function Npe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b8(r.key),r)}}function kpe(t,e,n){return e&&Mpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jpe(t,e,n){return e=Rp(e),Upe(t,v8()?Reflect.construct(e,n||[],Rp(t).constructor):e.apply(t,n))}function Upe(t,e){if(e&&(Ul(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bpe(t)}function Bpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v8=function(){return!!t})()}function Rp(t){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rp(t)}function Fpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OA(t,e)}function OA(t,e){return OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OA(t,e)}function x8(t,e,n){return e=b8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b8(t){var e=$pe(t,"string");return Ul(e)=="symbol"?e:e+""}function $pe(t,e){if(Ul(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ul(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function CA(){return CA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CA.apply(this,arguments)}var Gpe=function(e){var n=e.yAxisId,r=Vw(),i=qw(),a=t8(n);return a==null?null:Q.createElement(au,CA({},a,{className:et("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Zi(o,!0)}}))},Lg=function(t){function e(){return Npe(this,e),jpe(this,e,arguments)}return Fpe(e,t),kpe(e,[{key:"render",value:function(){return Q.createElement(Gpe,this.props)}}])}(Q.Component);x8(Lg,"displayName","YAxis");x8(Lg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Uj(t){return zpe(t)||Hpe(t)||qpe(t)||Vpe()}function Vpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qpe(t,e){if(t){if(typeof t=="string")return LA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LA(t,e)}}function Hpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zpe(t){if(Array.isArray(t))return LA(t)}function LA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var DA=function(e,n,r,i,a){var s=Pr(e,zw),o=Pr(e,_g),c=[].concat(Uj(s),Uj(o)),u=Pr(e,Og),d="".concat(i,"Id"),h=i[0],p=n;if(c.length&&(p=c.reduce(function(b,x){if(x.props[d]===r&&Ti(x.props,"extendDomain")&&ve(x.props[h])){var T=x.props[h];return[Math.min(b[0],T),Math.max(b[1],T)]}return b},p)),u.length){var y="".concat(h,"1"),v="".concat(h,"2");p=u.reduce(function(b,x){if(x.props[d]===r&&Ti(x.props,"extendDomain")&&ve(x.props[y])&&ve(x.props[v])){var T=x.props[y],_=x.props[v];return[Math.min(b[0],T,_),Math.max(b[1],T,_)]}return b},p)}return a&&a.length&&(p=a.reduce(function(b,x){return ve(x)?[Math.min(b[0],x),Math.max(b[1],x)]:b},p)),p},yE={exports:{}},Bj;function Kpe(){return Bj||(Bj=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,h||c,p),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],y]:c._events[v].push(y):(c._events[v]=y,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,y=h.length,v=new Array(y);p<y;p++)v[p]=h[p].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,p,y,v){var b=n?n+u:u;if(!this._events[b])return!1;var x=this._events[b],T=arguments.length,_,A;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),T){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,p),!0;case 5:return x.fn.call(x.context,d,h,p,y),!0;case 6:return x.fn.call(x.context,d,h,p,y,v),!0}for(A=1,_=new Array(T-1);A<T;A++)_[A-1]=arguments[A];x.fn.apply(x.context,_)}else{var O=x.length,R;for(A=0;A<O;A++)switch(x[A].once&&this.removeListener(u,x[A].fn,void 0,!0),T){case 1:x[A].fn.call(x[A].context);break;case 2:x[A].fn.call(x[A].context,d);break;case 3:x[A].fn.call(x[A].context,d,h);break;case 4:x[A].fn.call(x[A].context,d,h,p);break;default:if(!_)for(R=1,_=new Array(T-1);R<T;R++)_[R-1]=arguments[R];x[A].fn.apply(x[A].context,_)}}return!0},o.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,p){var y=n?n+u:u;if(!this._events[y])return this;if(!d)return s(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&s(this,y);else{for(var b=0,x=[],T=v.length;b<T;b++)(v[b].fn!==d||p&&!v[b].once||h&&v[b].context!==h)&&x.push(v[b]);x.length?this._events[y]=x.length===1?x[0]:x:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(yE)),yE.exports}var Ype=Kpe();const Wpe=vt(Ype);var vE=new Wpe,xE="recharts.syncMouseEvents";function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function Xpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S8(r.key),r)}}function Zpe(t,e,n){return e&&Qpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bE(t,e,n){return e=S8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S8(t){var e=Jpe(t,"string");return Cf(e)=="symbol"?e:e+""}function Jpe(t,e){if(Cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ege=function(){function t(){Xpe(this,t),bE(this,"activeIndex",0),bE(this,"coordinateList",[]),bE(this,"layout","horizontal")}return Zpe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,p=n.mouseHandlerCallback,y=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+c+u,p=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:h,pageY:p})}}}])}();function tge(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&ve(r)&&ve(i))return!0}return!1}function nge(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function E8(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=wn(e,n,r,i),o=wn(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function rge(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,p=wn(o,c,u,h),y=wn(o,c,d,h);r=p.x,i=p.y,a=y.x,s=y.y}else return E8(e);return[{x:r,y:i},{x:a,y:s}]}function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function Fj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fj(Object(n),!0).forEach(function(r){ige(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ige(t,e,n){return e=age(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function age(t){var e=sge(t,"string");return Lf(e)=="symbol"?e:e+""}function sge(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oge(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,p=t.chartName,y=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!y||!a||!s||p!=="ScatterChart"&&i!=="axis")return null;var v,b=nA;if(p==="ScatterChart")v=s,b=ide;else if(p==="BarChart")v=nge(h,s,c,d),b=Uw;else if(h==="radial"){var x=E8(s),T=x.cx,_=x.cy,A=x.radius,O=x.startAngle,R=x.endAngle;v={cx:T,cy:_,startAngle:O,endAngle:R,innerRadius:A,outerRadius:A},b=L5}else v={points:rge(h,s,c)},b=nA;var C=jh(jh(jh(jh({stroke:"#ccc",pointerEvents:"none"},c),v),We(y,!1)),{},{payload:o,payloadIndex:u,className:et("recharts-tooltip-cursor",y.className)});return F.isValidElement(y)?F.cloneElement(y,C):F.createElement(b,C)}var lge=["item"],uge=["children","className","width","height","style","compact","title","desc"];function Bl(t){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(t)}function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ll.apply(this,arguments)}function $j(t,e){return dge(t)||fge(t,e)||A8(t,e)||cge()}function cge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function dge(t){if(Array.isArray(t))return t}function Gj(t,e){if(t==null)return{};var n=hge(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w8(r.key),r)}}function gge(t,e,n){return e&&pge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yge(t,e,n){return e=Op(e),vge(t,T8()?Reflect.construct(e,n||[],Op(t).constructor):e.apply(t,n))}function vge(t,e){if(e&&(Bl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xge(t)}function xge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T8=function(){return!!t})()}function Op(t){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Op(t)}function bge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IA(t,e)}function IA(t,e){return IA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IA(t,e)}function Fl(t){return Tge(t)||Ege(t)||A8(t)||Sge()}function Sge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A8(t,e){if(t){if(typeof t=="string")return PA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PA(t,e)}}function Ege(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tge(t){if(Array.isArray(t))return PA(t)}function PA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vj(Object(n),!0).forEach(function(r){De(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function De(t,e,n){return e=w8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w8(t){var e=Age(t,"string");return Bl(e)=="symbol"?e:e+""}function Age(t,e){if(Bl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wge={xAxis:["bottom","top"],yAxis:["left","right"]},_ge={width:"100%",height:"100%"},_8={x:0,y:0};function Uh(t){return t}var Rge=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Oge=function(e,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return le(le(le({},i),wn(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var c=a.coordinate,u=i.angle;return le(le(le({},i),wn(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return _8},Dg=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(Fl(o),Fl(u)):o},[]);return s.length>0?s:e&&e.length&&ve(i)&&ve(a)?e.slice(i,a+1):[]};function R8(t){return t==="number"?[0,"auto"]:void 0}var NA=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=Dg(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var y=h===void 0?o:h;p=Pm(y,s.dataKey,i)}else p=h&&h[r]||o[r];return p?[].concat(Fl(c),[R5(u,p)]):c},[])},qj=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=Rge(a,r),o=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=$le(s,o,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,p=NA(e,n,d,h),y=Oge(r,o,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:p,activeCoordinate:y}}return null},Cge=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,p=e.stackOffset,y=A5(d,a);return r.reduce(function(v,b){var x,T=b.type.defaultProps!==void 0?le(le({},b.type.defaultProps),b.props):b.props,_=T.type,A=T.dataKey,O=T.allowDataOverflow,R=T.allowDuplicatedCategory,C=T.scale,L=T.ticks,P=T.includeHidden,N=T[s];if(v[N])return v;var k=Dg(e.data,{graphicalItems:i.filter(function(H){var te,ce=s in H.props?H.props[s]:(te=H.type.defaultProps)===null||te===void 0?void 0:te[s];return ce===N}),dataStartIndex:c,dataEndIndex:u}),M=k.length,G,K,W;tge(T.domain,O,_)&&(G=QT(T.domain,null,O),y&&(_==="number"||C!=="auto")&&(W=Pc(k,A,"category")));var Y=R8(_);if(!G||G.length===0){var j,$=(j=T.domain)!==null&&j!==void 0?j:Y;if(A){if(G=Pc(k,A,_),_==="category"&&y){var q=Dee(G);R&&q?(K=G,G=pp(0,M)):R||(G=t2($,G,b).reduce(function(H,te){return H.indexOf(te)>=0?H:[].concat(Fl(H),[te])},[]))}else if(_==="category")R?G=G.filter(function(H){return H!==""&&!Ye(H)}):G=t2($,G,b).reduce(function(H,te){return H.indexOf(te)>=0||te===""||Ye(te)?H:[].concat(Fl(H),[te])},[]);else if(_==="number"){var Z=zle(k,i.filter(function(H){var te,ce,ye=s in H.props?H.props[s]:(te=H.type.defaultProps)===null||te===void 0?void 0:te[s],ge="hide"in H.props?H.props.hide:(ce=H.type.defaultProps)===null||ce===void 0?void 0:ce.hide;return ye===N&&(P||!ge)}),A,a,d);Z&&(G=Z)}y&&(_==="number"||C!=="auto")&&(W=Pc(k,A,"category"))}else y?G=pp(0,M):o&&o[N]&&o[N].hasStack&&_==="number"?G=p==="expand"?[0,1]:_5(o[N].stackGroups,c,u):G=T5(k,i.filter(function(H){var te=s in H.props?H.props[s]:H.type.defaultProps[s],ce="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return te===N&&(P||!ce)}),_,d,!0);if(_==="number")G=DA(h,G,N,a,L),$&&(G=QT($,G,O));else if(_==="category"&&$){var B=$,V=G.every(function(H){return B.indexOf(H)>=0});V&&(G=B)}}return le(le({},v),{},De({},N,le(le({},T),{},{axisType:a,domain:G,categoricalDomain:W,duplicateDomain:K,originalDomain:(x=T.domain)!==null&&x!==void 0?x:Y,isCategorical:y,layout:d})))},{})},Lge=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,p=Dg(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),y=p.length,v=A5(d,a),b=-1;return r.reduce(function(x,T){var _=T.type.defaultProps!==void 0?le(le({},T.type.defaultProps),T.props):T.props,A=_[s],O=R8("number");if(!x[A]){b++;var R;return v?R=pp(0,y):o&&o[A]&&o[A].hasStack?(R=_5(o[A].stackGroups,c,u),R=DA(h,R,A,a)):(R=QT(O,T5(p,r.filter(function(C){var L,P,N=s in C.props?C.props[s]:(L=C.type.defaultProps)===null||L===void 0?void 0:L[s],k="hide"in C.props?C.props.hide:(P=C.type.defaultProps)===null||P===void 0?void 0:P.hide;return N===A&&!k}),"number",d),i.defaultProps.allowDataOverflow),R=DA(h,R,A,a)),le(le({},x),{},De({},A,le(le({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ir(wge,"".concat(a,".").concat(b%2),null),domain:R,originalDomain:O,isCategorical:v,layout:d})))}return x},{})},Dge=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,h="".concat(i,"Id"),p=Pr(d,a),y={};return p&&p.length?y=Cge(e,{axes:p,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(y=Lge(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),y},Ige=function(e){var n=Ha(e),r=Zi(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:fw(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:sp(n,r)}},Hj=function(e){var n=e.children,r=e.defaultShowTooltip,i=lr(n,Ll),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Pge=function(e){return!e||!e.length?!1:e.some(function(n){var r=ea(n&&n.type);return r&&r.indexOf("Bar")>=0})},zj=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Nge=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,c=o===void 0?{}:o,u=r.width,d=r.height,h=r.children,p=r.margin||{},y=lr(h,Ll),v=lr(h,fl),b=Object.keys(c).reduce(function(R,C){var L=c[C],P=L.orientation;return!L.mirror&&!L.hide?le(le({},R),{},De({},P,R[P]+L.width)):R},{left:p.left||0,right:p.right||0}),x=Object.keys(s).reduce(function(R,C){var L=s[C],P=L.orientation;return!L.mirror&&!L.hide?le(le({},R),{},De({},P,Ir(R,"".concat(P))+L.height)):R},{top:p.top||0,bottom:p.bottom||0}),T=le(le({},x),b),_=T.bottom;y&&(T.bottom+=y.props.height||Ll.defaultProps.height),v&&n&&(T=qle(T,i,r,n));var A=u-T.left-T.right,O=d-T.top-T.bottom;return le(le({brushBottom:_},T),{},{width:Math.max(A,0),height:Math.max(O,0)})},Mge=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},kge=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,p=function(T,_){var A=_.graphicalItems,O=_.stackGroups,R=_.offset,C=_.updateId,L=_.dataStartIndex,P=_.dataEndIndex,N=T.barSize,k=T.layout,M=T.barGap,G=T.barCategoryGap,K=T.maxBarSize,W=zj(k),Y=W.numericAxisName,j=W.cateAxisName,$=Pge(A),q=[];return A.forEach(function(Z,B){var V=Dg(T.data,{graphicalItems:[Z],dataStartIndex:L,dataEndIndex:P}),H=Z.type.defaultProps!==void 0?le(le({},Z.type.defaultProps),Z.props):Z.props,te=H.dataKey,ce=H.maxBarSize,ye=H["".concat(Y,"Id")],ge=H["".concat(j,"Id")],Me={},Re=c.reduce(function(Xt,vn){var Ri=_["".concat(vn.axisType,"Map")],Oi=H["".concat(vn.axisType,"Id")];Ri&&Ri[Oi]||vn.axisType==="zAxis"||Zs();var ss=Ri[Oi];return le(le({},Xt),{},De(De({},vn.axisType,ss),"".concat(vn.axisType,"Ticks"),Zi(ss)))},Me),pe=Re[j],Ae=Re["".concat(j,"Ticks")],Oe=O&&O[ye]&&O[ye].hasStack&&iue(Z,O[ye].stackGroups),me=ea(Z.type).indexOf("Bar")>=0,rt=sp(pe,Ae),Be=[],It=$&&Gle({barSize:N,stackGroups:O,totalSize:Mge(Re,j)});if(me){var _e,je,Rt=Ye(ce)?K:ce,yn=(_e=(je=sp(pe,Ae,!0))!==null&&je!==void 0?je:Rt)!==null&&_e!==void 0?_e:0;Be=Vle({barGap:M,barCategoryGap:G,bandSize:yn!==rt?yn:rt,sizeList:It[ge],maxBarSize:Rt}),yn!==rt&&(Be=Be.map(function(Xt){return le(le({},Xt),{},{position:le(le({},Xt.position),{},{offset:Xt.position.offset-yn/2})})}))}var Wt=Z&&Z.type&&Z.type.getComposedData;Wt&&q.push({props:le(le({},Wt(le(le({},Re),{},{displayedData:V,props:T,dataKey:te,item:Z,bandSize:rt,barPosition:Be,offset:R,stackedData:Oe,layout:k,dataStartIndex:L,dataEndIndex:P}))),{},De(De(De({key:Z.key||"item-".concat(B)},Y,Re[Y]),j,Re[j]),"animationId",C)),childIndex:qee(Z,T.children),item:Z})}),q},y=function(T,_){var A=T.props,O=T.dataStartIndex,R=T.dataEndIndex,C=T.updateId;if(!pP({props:A}))return null;var L=A.children,P=A.layout,N=A.stackOffset,k=A.data,M=A.reverseStackOrder,G=zj(P),K=G.numericAxisName,W=G.cateAxisName,Y=Pr(L,r),j=tue(k,Y,"".concat(K,"Id"),"".concat(W,"Id"),N,M),$=c.reduce(function(H,te){var ce="".concat(te.axisType,"Map");return le(le({},H),{},De({},ce,Dge(A,le(le({},te),{},{graphicalItems:Y,stackGroups:te.axisType===K&&j,dataStartIndex:O,dataEndIndex:R}))))},{}),q=Nge(le(le({},$),{},{props:A,graphicalItems:Y}),_==null?void 0:_.legendBBox);Object.keys($).forEach(function(H){$[H]=d(A,$[H],q,H.replace("Map",""),n)});var Z=$["".concat(W,"Map")],B=Ige(Z),V=p(A,le(le({},$),{},{dataStartIndex:O,dataEndIndex:R,updateId:C,graphicalItems:Y,stackGroups:j,offset:q}));return le(le({formattedGraphicalItems:V,graphicalItems:Y,offset:q,stackGroups:j},B),$)},v=function(x){function T(_){var A,O,R;return mge(this,T),R=yge(this,T,[_]),De(R,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),De(R,"accessibilityManager",new ege),De(R,"handleLegendBBoxUpdate",function(C){if(C){var L=R.state,P=L.dataStartIndex,N=L.dataEndIndex,k=L.updateId;R.setState(le({legendBBox:C},y({props:R.props,dataStartIndex:P,dataEndIndex:N,updateId:k},le(le({},R.state),{},{legendBBox:C}))))}}),De(R,"handleReceiveSyncEvent",function(C,L,P){if(R.props.syncId===C){if(P===R.eventEmitterSymbol&&typeof R.props.syncMethod!="function")return;R.applySyncEvent(L)}}),De(R,"handleBrushChange",function(C){var L=C.startIndex,P=C.endIndex;if(L!==R.state.dataStartIndex||P!==R.state.dataEndIndex){var N=R.state.updateId;R.setState(function(){return le({dataStartIndex:L,dataEndIndex:P},y({props:R.props,dataStartIndex:L,dataEndIndex:P,updateId:N},R.state))}),R.triggerSyncEvent({dataStartIndex:L,dataEndIndex:P})}}),De(R,"handleMouseEnter",function(C){var L=R.getMouseInfo(C);if(L){var P=le(le({},L),{},{isTooltipActive:!0});R.setState(P),R.triggerSyncEvent(P);var N=R.props.onMouseEnter;Ge(N)&&N(P,C)}}),De(R,"triggeredAfterMouseMove",function(C){var L=R.getMouseInfo(C),P=L?le(le({},L),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(P),R.triggerSyncEvent(P);var N=R.props.onMouseMove;Ge(N)&&N(P,C)}),De(R,"handleItemMouseEnter",function(C){R.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),De(R,"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),De(R,"handleMouseMove",function(C){C.persist(),R.throttleTriggeredAfterMouseMove(C)}),De(R,"handleMouseLeave",function(C){R.throttleTriggeredAfterMouseMove.cancel();var L={isTooltipActive:!1};R.setState(L),R.triggerSyncEvent(L);var P=R.props.onMouseLeave;Ge(P)&&P(L,C)}),De(R,"handleOuterEvent",function(C){var L=Vee(C),P=Ir(R.props,"".concat(L));if(L&&Ge(P)){var N,k;/.*touch.*/i.test(L)?k=R.getMouseInfo(C.changedTouches[0]):k=R.getMouseInfo(C),P((N=k)!==null&&N!==void 0?N:{},C)}}),De(R,"handleClick",function(C){var L=R.getMouseInfo(C);if(L){var P=le(le({},L),{},{isTooltipActive:!0});R.setState(P),R.triggerSyncEvent(P);var N=R.props.onClick;Ge(N)&&N(P,C)}}),De(R,"handleMouseDown",function(C){var L=R.props.onMouseDown;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"handleMouseUp",function(C){var L=R.props.onMouseUp;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),De(R,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.handleMouseDown(C.changedTouches[0])}),De(R,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.handleMouseUp(C.changedTouches[0])}),De(R,"handleDoubleClick",function(C){var L=R.props.onDoubleClick;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"handleContextMenu",function(C){var L=R.props.onContextMenu;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"triggerSyncEvent",function(C){R.props.syncId!==void 0&&vE.emit(xE,R.props.syncId,C,R.eventEmitterSymbol)}),De(R,"applySyncEvent",function(C){var L=R.props,P=L.layout,N=L.syncMethod,k=R.state.updateId,M=C.dataStartIndex,G=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)R.setState(le({dataStartIndex:M,dataEndIndex:G},y({props:R.props,dataStartIndex:M,dataEndIndex:G,updateId:k},R.state)));else if(C.activeTooltipIndex!==void 0){var K=C.chartX,W=C.chartY,Y=C.activeTooltipIndex,j=R.state,$=j.offset,q=j.tooltipTicks;if(!$)return;if(typeof N=="function")Y=N(q,C);else if(N==="value"){Y=-1;for(var Z=0;Z<q.length;Z++)if(q[Z].value===C.activeLabel){Y=Z;break}}var B=le(le({},$),{},{x:$.left,y:$.top}),V=Math.min(K,B.x+B.width),H=Math.min(W,B.y+B.height),te=q[Y]&&q[Y].value,ce=NA(R.state,R.props.data,Y),ye=q[Y]?{x:P==="horizontal"?q[Y].coordinate:V,y:P==="horizontal"?H:q[Y].coordinate}:_8;R.setState(le(le({},C),{},{activeLabel:te,activeCoordinate:ye,activePayload:ce,activeTooltipIndex:Y}))}else R.setState(C)}),De(R,"renderCursor",function(C){var L,P=R.state,N=P.isTooltipActive,k=P.activeCoordinate,M=P.activePayload,G=P.offset,K=P.activeTooltipIndex,W=P.tooltipAxisBandSize,Y=R.getTooltipEventType(),j=(L=C.props.active)!==null&&L!==void 0?L:N,$=R.props.layout,q=C.key||"_recharts-cursor";return Q.createElement(oge,{key:q,activeCoordinate:k,activePayload:M,activeTooltipIndex:K,chartName:n,element:C,isActive:j,layout:$,offset:G,tooltipAxisBandSize:W,tooltipEventType:Y})}),De(R,"renderPolarAxis",function(C,L,P){var N=Ir(C,"type.axisType"),k=Ir(R.state,"".concat(N,"Map")),M=C.type.defaultProps,G=M!==void 0?le(le({},M),C.props):C.props,K=k&&k[G["".concat(N,"Id")]];return F.cloneElement(C,le(le({},K),{},{className:et(N,K.className),key:C.key||"".concat(L,"-").concat(P),ticks:Zi(K,!0)}))}),De(R,"renderPolarGrid",function(C){var L=C.props,P=L.radialLines,N=L.polarAngles,k=L.polarRadius,M=R.state,G=M.radiusAxisMap,K=M.angleAxisMap,W=Ha(G),Y=Ha(K),j=Y.cx,$=Y.cy,q=Y.innerRadius,Z=Y.outerRadius;return F.cloneElement(C,{polarAngles:Array.isArray(N)?N:Zi(Y,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(k)?k:Zi(W,!0).map(function(B){return B.coordinate}),cx:j,cy:$,innerRadius:q,outerRadius:Z,key:C.key||"polar-grid",radialLines:P})}),De(R,"renderLegend",function(){var C=R.state.formattedGraphicalItems,L=R.props,P=L.children,N=L.width,k=L.height,M=R.props.margin||{},G=N-(M.left||0)-(M.right||0),K=S5({children:P,formattedGraphicalItems:C,legendWidth:G,legendContent:u});if(!K)return null;var W=K.item,Y=Gj(K,lge);return F.cloneElement(W,le(le({},Y),{},{chartWidth:N,chartHeight:k,margin:M,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),De(R,"renderTooltip",function(){var C,L=R.props,P=L.children,N=L.accessibilityLayer,k=lr(P,mi);if(!k)return null;var M=R.state,G=M.isTooltipActive,K=M.activeCoordinate,W=M.activePayload,Y=M.activeLabel,j=M.offset,$=(C=k.props.active)!==null&&C!==void 0?C:G;return F.cloneElement(k,{viewBox:le(le({},j),{},{x:j.left,y:j.top}),active:$,label:Y,payload:$?W:[],coordinate:K,accessibilityLayer:N})}),De(R,"renderBrush",function(C){var L=R.props,P=L.margin,N=L.data,k=R.state,M=k.offset,G=k.dataStartIndex,K=k.dataEndIndex,W=k.updateId;return F.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Ph(R.handleBrushChange,C.props.onChange),data:N,x:ve(C.props.x)?C.props.x:M.left,y:ve(C.props.y)?C.props.y:M.top+M.height+M.brushBottom-(P.bottom||0),width:ve(C.props.width)?C.props.width:M.width,startIndex:G,endIndex:K,updateId:"brush-".concat(W)})}),De(R,"renderReferenceElement",function(C,L,P){if(!C)return null;var N=R,k=N.clipPathId,M=R.state,G=M.xAxisMap,K=M.yAxisMap,W=M.offset,Y=C.type.defaultProps||{},j=C.props,$=j.xAxisId,q=$===void 0?Y.xAxisId:$,Z=j.yAxisId,B=Z===void 0?Y.yAxisId:Z;return F.cloneElement(C,{key:C.key||"".concat(L,"-").concat(P),xAxis:G[q],yAxis:K[B],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:k})}),De(R,"renderActivePoints",function(C){var L=C.item,P=C.activePoint,N=C.basePoint,k=C.childIndex,M=C.isRange,G=[],K=L.props.key,W=L.item.type.defaultProps!==void 0?le(le({},L.item.type.defaultProps),L.item.props):L.item.props,Y=W.activeDot,j=W.dataKey,$=le(le({index:k,dataKey:j,cx:P.x,cy:P.y,r:4,fill:jw(L.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},We(Y,!1)),Nm(Y));return G.push(T.renderActiveDot(Y,$,"".concat(K,"-activePoint-").concat(k))),N?G.push(T.renderActiveDot(Y,le(le({},$),{},{cx:N.x,cy:N.y}),"".concat(K,"-basePoint-").concat(k))):M&&G.push(null),G}),De(R,"renderGraphicChild",function(C,L,P){var N=R.filterFormatItem(C,L,P);if(!N)return null;var k=R.getTooltipEventType(),M=R.state,G=M.isTooltipActive,K=M.tooltipAxis,W=M.activeTooltipIndex,Y=M.activeLabel,j=R.props.children,$=lr(j,mi),q=N.props,Z=q.points,B=q.isRange,V=q.baseLine,H=N.item.type.defaultProps!==void 0?le(le({},N.item.type.defaultProps),N.item.props):N.item.props,te=H.activeDot,ce=H.hide,ye=H.activeBar,ge=H.activeShape,Me=!!(!ce&&G&&$&&(te||ye||ge)),Re={};k!=="axis"&&$&&$.props.trigger==="click"?Re={onClick:Ph(R.handleItemMouseEnter,C.props.onClick)}:k!=="axis"&&(Re={onMouseLeave:Ph(R.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Ph(R.handleItemMouseEnter,C.props.onMouseEnter)});var pe=F.cloneElement(C,le(le({},N.props),Re));function Ae(vn){return typeof K.dataKey=="function"?K.dataKey(vn.payload):null}if(Me)if(W>=0){var Oe,me;if(K.dataKey&&!K.allowDuplicatedCategory){var rt=typeof K.dataKey=="function"?Ae:"payload.".concat(K.dataKey.toString());Oe=Pm(Z,rt,Y),me=B&&V&&Pm(V,rt,Y)}else Oe=Z==null?void 0:Z[W],me=B&&V&&V[W];if(ge||ye){var Be=C.props.activeIndex!==void 0?C.props.activeIndex:W;return[F.cloneElement(C,le(le(le({},N.props),Re),{},{activeIndex:Be})),null,null]}if(!Ye(Oe))return[pe].concat(Fl(R.renderActivePoints({item:N,activePoint:Oe,basePoint:me,childIndex:W,isRange:B})))}else{var It,_e=(It=R.getItemByXY(R.state.activeCoordinate))!==null&&It!==void 0?It:{graphicalItem:pe},je=_e.graphicalItem,Rt=je.item,yn=Rt===void 0?C:Rt,Wt=je.childIndex,Xt=le(le(le({},N.props),Re),{},{activeIndex:Wt});return[F.cloneElement(yn,Xt),null,null]}return B?[pe,null,null]:[pe,null]}),De(R,"renderCustomized",function(C,L,P){return F.cloneElement(C,le(le({key:"recharts-customized-".concat(P)},R.props),R.state))}),De(R,"renderMap",{CartesianGrid:{handler:Uh,once:!0},ReferenceArea:{handler:R.renderReferenceElement},ReferenceLine:{handler:Uh},ReferenceDot:{handler:R.renderReferenceElement},XAxis:{handler:Uh},YAxis:{handler:Uh},Brush:{handler:R.renderBrush,once:!0},Bar:{handler:R.renderGraphicChild},Line:{handler:R.renderGraphicChild},Area:{handler:R.renderGraphicChild},Radar:{handler:R.renderGraphicChild},RadialBar:{handler:R.renderGraphicChild},Scatter:{handler:R.renderGraphicChild},Pie:{handler:R.renderGraphicChild},Funnel:{handler:R.renderGraphicChild},Tooltip:{handler:R.renderCursor,once:!0},PolarGrid:{handler:R.renderPolarGrid,once:!0},PolarAngleAxis:{handler:R.renderPolarAxis},PolarRadiusAxis:{handler:R.renderPolarAxis},Customized:{handler:R.renderCustomized}}),R.clipPathId="".concat((A=_.id)!==null&&A!==void 0?A:Xf("recharts"),"-clip"),R.throttleTriggeredAfterMouseMove=b6(R.triggeredAfterMouseMove,(O=_.throttleDelay)!==null&&O!==void 0?O:1e3/60),R.state={},R}return bge(T,x),gge(T,[{key:"componentDidMount",value:function(){var A,O;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var A=this.props,O=A.children,R=A.data,C=A.height,L=A.layout,P=lr(O,mi);if(P){var N=P.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,M=NA(this.state,R,N,k),G=this.state.tooltipTicks[N].coordinate,K=(this.state.offset.top+C)/2,W=L==="horizontal",Y=W?{x:G,y:K}:{y:G,x:K},j=this.state.formattedGraphicalItems.find(function(q){var Z=q.item;return Z.type.name==="Scatter"});j&&(Y=le(le({},Y),j.props.points[N].tooltipPosition),M=j.props.points[N].tooltipPayload);var $={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:k,activePayload:M,activeCoordinate:Y};this.setState($),this.renderCursor(P),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(A,O){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==O.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==A.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==A.margin){var R,C;this.accessibilityManager.setDetails({offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(A){xT([lr(A.children,mi)],[lr(this.props.children,mi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var A=lr(this.props.children,mi);if(A&&typeof A.props.shared=="boolean"){var O=A.props.shared?"axis":"item";return o.indexOf(O)>=0?O:a}return a}},{key:"getMouseInfo",value:function(A){if(!this.container)return null;var O=this.container,R=O.getBoundingClientRect(),C=Die(R),L={chartX:Math.round(A.pageX-C.left),chartY:Math.round(A.pageY-C.top)},P=R.width/O.offsetWidth||1,N=this.inRange(L.chartX,L.chartY,P);if(!N)return null;var k=this.state,M=k.xAxisMap,G=k.yAxisMap,K=this.getTooltipEventType(),W=qj(this.state,this.props.data,this.props.layout,N);if(K!=="axis"&&M&&G){var Y=Ha(M).scale,j=Ha(G).scale,$=Y&&Y.invert?Y.invert(L.chartX):null,q=j&&j.invert?j.invert(L.chartY):null;return le(le({},L),{},{xValue:$,yValue:q},W)}return W?le(le({},L),W):null}},{key:"inRange",value:function(A,O){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,L=A/R,P=O/R;if(C==="horizontal"||C==="vertical"){var N=this.state.offset,k=L>=N.left&&L<=N.left+N.width&&P>=N.top&&P<=N.top+N.height;return k?{x:L,y:P}:null}var M=this.state,G=M.angleAxisMap,K=M.radiusAxisMap;if(G&&K){var W=Ha(G);return i2({x:L,y:P},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var A=this.props.children,O=this.getTooltipEventType(),R=lr(A,mi),C={};R&&O==="axis"&&(R.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var L=Nm(this.props,this.handleOuterEvent);return le(le({},L),C)}},{key:"addListener",value:function(){vE.on(xE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vE.removeListener(xE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(A,O,R){for(var C=this.state.formattedGraphicalItems,L=0,P=C.length;L<P;L++){var N=C[L];if(N.item===A||N.props.key===A.key||O===ea(N.item.type)&&R===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var A=this.clipPathId,O=this.state.offset,R=O.left,C=O.top,L=O.height,P=O.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:A},Q.createElement("rect",{x:R,y:C,height:L,width:P})))}},{key:"getXScales",value:function(){var A=this.state.xAxisMap;return A?Object.entries(A).reduce(function(O,R){var C=$j(R,2),L=C[0],P=C[1];return le(le({},O),{},De({},L,P.scale))},{}):null}},{key:"getYScales",value:function(){var A=this.state.yAxisMap;return A?Object.entries(A).reduce(function(O,R){var C=$j(R,2),L=C[0],P=C[1];return le(le({},O),{},De({},L,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(A){var O;return(O=this.state.xAxisMap)===null||O===void 0||(O=O[A])===null||O===void 0?void 0:O.scale}},{key:"getYScaleByAxisId",value:function(A){var O;return(O=this.state.yAxisMap)===null||O===void 0||(O=O[A])===null||O===void 0?void 0:O.scale}},{key:"getItemByXY",value:function(A){var O=this.state,R=O.formattedGraphicalItems,C=O.activeItem;if(R&&R.length)for(var L=0,P=R.length;L<P;L++){var N=R[L],k=N.props,M=N.item,G=M.type.defaultProps!==void 0?le(le({},M.type.defaultProps),M.props):M.props,K=ea(M.type);if(K==="Bar"){var W=(k.data||[]).find(function(q){return Yfe(A,q)});if(W)return{graphicalItem:N,payload:W}}else if(K==="RadialBar"){var Y=(k.data||[]).find(function(q){return i2(A,q)});if(Y)return{graphicalItem:N,payload:Y}}else if(Eg(N,C)||Tg(N,C)||Af(N,C)){var j=Ude({graphicalItem:N,activeTooltipItem:C,itemData:G.data}),$=G.activeIndex===void 0?j:G.activeIndex;return{graphicalItem:le(le({},N),{},{childIndex:$}),payload:Af(N,C)?G.data[j]:N.props.data[j]}}}return null}},{key:"render",value:function(){var A=this;if(!pP(this))return null;var O=this.props,R=O.children,C=O.className,L=O.width,P=O.height,N=O.style,k=O.compact,M=O.title,G=O.desc,K=Gj(O,uge),W=We(K,!1);if(k)return Q.createElement(Ej,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(ST,ll({},W,{width:L,height:P,title:M,desc:G}),this.renderClipPath(),yP(R,this.renderMap)));if(this.props.accessibilityLayer){var Y,j;W.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,W.role=(j=this.props.role)!==null&&j!==void 0?j:"application",W.onKeyDown=function(q){A.accessibilityManager.keyboardEvent(q)},W.onFocus=function(){A.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return Q.createElement(Ej,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",ll({className:et("recharts-wrapper",C),style:le({position:"relative",cursor:"default",width:L,height:P},N)},$,{ref:function(Z){A.container=Z}}),Q.createElement(ST,ll({},W,{width:L,height:P,title:M,desc:G,style:_ge}),this.renderClipPath(),yP(R,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(F.Component);De(v,"displayName",n),De(v,"defaultProps",le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),De(v,"getDerivedStateFromProps",function(x,T){var _=x.dataKey,A=x.data,O=x.children,R=x.width,C=x.height,L=x.layout,P=x.stackOffset,N=x.margin,k=T.dataStartIndex,M=T.dataEndIndex;if(T.updateId===void 0){var G=Hj(x);return le(le(le({},G),{},{updateId:0},y(le(le({props:x},G),{},{updateId:0}),T)),{},{prevDataKey:_,prevData:A,prevWidth:R,prevHeight:C,prevLayout:L,prevStackOffset:P,prevMargin:N,prevChildren:O})}if(_!==T.prevDataKey||A!==T.prevData||R!==T.prevWidth||C!==T.prevHeight||L!==T.prevLayout||P!==T.prevStackOffset||!cl(N,T.prevMargin)){var K=Hj(x),W={chartX:T.chartX,chartY:T.chartY,isTooltipActive:T.isTooltipActive},Y=le(le({},qj(T,A,L)),{},{updateId:T.updateId+1}),j=le(le(le({},K),W),Y);return le(le(le({},j),y(le({props:x},j),T)),{},{prevDataKey:_,prevData:A,prevWidth:R,prevHeight:C,prevLayout:L,prevStackOffset:P,prevMargin:N,prevChildren:O})}if(!xT(O,T.prevChildren)){var $,q,Z,B,V=lr(O,Ll),H=V&&($=(q=V.props)===null||q===void 0?void 0:q.startIndex)!==null&&$!==void 0?$:k,te=V&&(Z=(B=V.props)===null||B===void 0?void 0:B.endIndex)!==null&&Z!==void 0?Z:M,ce=H!==k||te!==M,ye=!Ye(A),ge=ye&&!ce?T.updateId:T.updateId+1;return le(le({updateId:ge},y(le(le({props:x},T),{},{updateId:ge,dataStartIndex:H,dataEndIndex:te}),T)),{},{prevChildren:O,dataStartIndex:H,dataEndIndex:te})}return null}),De(v,"renderActiveDot",function(x,T,_){var A;return F.isValidElement(x)?A=F.cloneElement(x,T):Ge(x)?A=x(T):A=Q.createElement(Bw,T),Q.createElement($t,{className:"recharts-active-dot",key:_},A)});var b=F.forwardRef(function(T,_){return Q.createElement(v,ll({},T,{ref:_}))});return b.displayName=v.displayName,b},jge=kge({chartName:"LineChart",GraphicalChild:id,axisComponents:[{axisType:"xAxis",AxisComp:Cg},{axisType:"yAxis",AxisComp:Lg}],formatAxisMap:Nhe});const Bh=(t,e)=>{if(!t||t.length<2)return null;const n=t[0][e],r=t[t.length-1][e];if(n===0)return null;const i=(r-n)/Math.abs(n)*100;return console.log(`Change from ${n} to ${r}: ${i.toFixed(2)}%`),Number(i.toFixed(2))},Kj=()=>{const t=an(),e=rn(),{data:n,timeRange:r,loading:i,error:a}=sn(b=>b.dashboard);F.useEffect(()=>{t(GJ(r))},[t,r]);const s=b=>{t(VJ(b))},o={"Total Users":S.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a4 4 0 00-3-3.87M9 20h6M3 20h5v-2a4 4 0 013-3.87M16 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Total Devices":S.jsxs("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[S.jsx("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 21h8"})]}),"Total Content":S.jsx("svg",{className:"w-8 h-8 text-purple-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 19V5a2 2 0 012-2h8a2 2 0 012 2v14M16 7h2a2 2 0 012 2v10a2 2 0 01-2 2h-2"})}),"Total Subscriptions":S.jsx("svg",{className:"w-8 h-8 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},c=(b,x,T,_=!1)=>{const A=T>0?"text-green-500":T<0?"text-red-500":"text-gray-500",O=T>0?"▲":T<0?"▼":"";return S.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 rounded-xl shadow-lg flex-1 min-w-[200px] flex flex-col items-start gap-2 hover:shadow-xl transition-shadow duration-200",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o[b],S.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:b})]}),S.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:_?`$${x}`:x}),T!==void 0&&S.jsxs("p",{className:`text-sm mt-1 ${A}`,children:[O," ",Math.abs(T),"%"," ",S.jsx("span",{className:"text-gray-500",children:"vs last period"})]})]})},u=(b,x,T)=>!b||b.length===0?S.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 rounded-xl shadow-lg col-span-full md:col-span-1 transition-shadow duration-200 hover:shadow-xl",children:[S.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[T," Trend"]}),S.jsx("div",{className:"flex items-center justify-center h-48 text-gray-500",children:"No chart data available for this period."})]}):S.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 rounded-xl shadow-lg col-span-full md:col-span-1 transition-shadow duration-200 hover:shadow-xl",children:[S.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[T," Trend"]}),S.jsx(Aie,{width:"100%",height:200,children:S.jsxs(jge,{data:b,margin:{top:5,right:20,left:10,bottom:5},children:[S.jsx(d8,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),S.jsx(Cg,{dataKey:"date",tickLine:!1}),S.jsx(Lg,{tickLine:!1}),S.jsx(mi,{}),S.jsx(id,{type:"monotone",dataKey:x,stroke:"#8884d8",strokeWidth:2,activeDot:{r:8}})]})})]});if(i)return S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading dashboard data..."})]});if(a)return S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Dashboard"}),S.jsx("p",{children:a.message||"An unexpected error occurred."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]});if(!n)return S.jsx("div",{className:"text-center p-6 text-gray-600",children:"No dashboard data available. Please select a time range."});const{users:d,devices:h,content:p,subscriptions:y,last_updated:v}=n;return S.jsxs("div",{className:"p-6 bg-gray-50 min-h-full",children:[S.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start mb-6 gap-4",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Overview"}),S.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 lg:mt-0",role:"group","aria-label":"Select dashboard time range",children:[S.jsx("button",{onClick:()=>s("week"),className:`px-4 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 ${r==="week"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,"aria-pressed":r==="week",children:"Week"}),S.jsx("button",{onClick:()=>s("month"),className:`px-4 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 ${r==="month"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,"aria-pressed":r==="month",children:"Month"}),S.jsx("button",{onClick:()=>s("year"),className:`px-4 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 ${r==="year"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,"aria-pressed":r==="year",children:"Year"})]})]}),S.jsxs("p",{className:"text-center lg:text-right text-sm text-gray-500 mb-6",children:["Last Updated: ",v||"N/A"]}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c("Total Users",d.total,Bh(d.chart,"count")),c("Total Devices",h.total,Bh(h.chart,"count")),c("Total Content",p.total,Bh(p.chart,"count")),c("Total Subscriptions",y.total,Bh(y.chart,"count"))]}),S.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Trends"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u(d.chart,"count","Users"),u(h.chart,"total","Devices"),u(p.views_chart,"views","Content Views"),u(y.chart,"count","Subscriptions")]}),S.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Popular Content"}),p.popular_content&&p.popular_content.length>0?S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:p.popular_content.map(b=>S.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50 to-gray-50 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 flex flex-col",children:[S.jsx("img",{src:b.coverImg||`https://placehold.co/400x200/cccccc/333333?text=${b.title}`,alt:b.title,className:"w-full h-40 object-cover rounded-t-xl border-b border-blue-100"}),S.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate mb-1",children:b.title}),S.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:b.content}),S.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:b.tags.map((x,T)=>S.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full shadow-sm font-medium",children:["#",x]},T))}),S.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[S.jsx("span",{className:"font-semibold text-blue-600",children:"Views:"})," ",b.views_count||0]}),S.jsx("button",{onClick:()=>e(`/contents/details/${b.id}`),className:"mt-auto px-4 py-2 bg-blue-600 text-white rounded-md shadow hover:bg-blue-700 transition duration-200 text-sm font-semibold w-full","aria-label":`View details for ${b.title}`,children:"View Details →"})]})]},b.id))}):S.jsx("p",{className:"text-gray-600 text-center py-8",children:"No popular content to display for this period."})]})},Uge=async t=>{var e,n;try{return(await Je.post("/contents",t)).data}catch(r){throw console.error("Error creating content:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Bge=async t=>{var e;try{return(await Je.get(`/contents?page=${t}`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},Fge=async t=>{var e;try{return(await Je.get(`/contents/${t}`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},$ge=async(t,e)=>{var n;try{return(await Je.put(`/contents/${t}`,e)).data}catch(r){throw((n=r.response)==null?void 0:n.data)||r.message}},Gge=async t=>{var e;try{return(await Je.delete(`/contents/${t}`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},Vge=t=>async e=>{e({type:yF});try{const n=await Uge(t);return e({type:vF,payload:n}),Promise.resolve(n)}catch(n){return e({type:xF,payload:n}),Promise.reject(n)}},Yj=t=>async e=>{e({type:fF});try{const n=await Bge(t);e({type:dF,payload:n})}catch(n){e({type:hF,payload:n})}},O8=t=>async e=>{e({type:mF});try{const n=await Fge(t);e({type:pF,payload:n})}catch(n){e({type:gF,payload:n})}},qge=(t,e)=>async n=>{n({type:bF});try{const r=await $ge(t,e);return n({type:SF,payload:r}),Promise.resolve(r)}catch(r){return n({type:EF,payload:r}),Promise.reject(r)}},Hge=t=>async e=>{e({type:TF});try{return await Gge(t),e({type:AF,payload:t}),Promise.resolve()}catch(n){return e({type:wF,payload:n}),Promise.reject(n)}},zge=({path:t})=>S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:t})}),Kge=()=>{const t=an(),e=rn(),{contents:n,pagination:r,loading:i,error:a}=sn(h=>h.contents);F.useEffect(()=>{t(Yj(1))},[t]);const s=async h=>{if(window.confirm("Are you sure you want to delete this content?"))try{await t(Hge(h)),alert("Content deleted successfully!")}catch(p){alert(`Error deleting content: ${p.message||JSON.stringify(p)}`)}},o=h=>{h&&t(Yj(h))},c={"&laquo;":"«","&raquo;":"»","&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'","&nbsp;":" "};function u(h){return h.replace(/&[a-zA-Z0-9#]+;/g,p=>c[p]||"")}const d=h=>({__html:u(h)});return i&&n.length===0?S.jsx("div",{className:"flex justify-center items-center h-screen",children:S.jsx("div",{className:"text-lg font-semibold text-gray-600",children:"Loading..."})}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:["Error loading contents: ",a.message]}):S.jsx("div",{className:"p-2 sm:p-6 lg:p-8 bg-gray-50 min-h-screen",children:S.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4 sm:mb-0",children:"Content Management"}),S.jsxs("button",{onClick:()=>e("/contents/new"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75",children:[S.jsx(zge,{path:"M12 4v16m8-8H4"}),S.jsx("span",{children:"Create New Content"})]})]}),S.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-x-auto",children:n.length===0?S.jsxs("div",{className:"text-center py-20",children:[S.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"No Content Found"}),S.jsx("p",{className:"text-gray-500 mt-2",children:"Start by creating new content to see it listed here."})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"overflow-x-auto w-full",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"VIP"}),S.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-right text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-700",children:h.id}),S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:S.jsx("img",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full object-cover",src:h.profileImg,alt:""})}),S.jsx("div",{className:"ml-4",children:S.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:h.title})})]})}),S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-700",children:h.category}),S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:S.jsx("span",{className:`px-1 sm:px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${h.isvip?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.isvip?"Yes":"No"})}),S.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-right text-xs sm:text-sm font-medium",children:S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-0 sm:justify-end items-end sm:items-center",children:[S.jsx("button",{onClick:()=>e(`/contents/details/${h.id}`),className:"text-gray-500 hover:text-blue-600 sm:mr-3 font-semibold",children:"View"}),S.jsx("button",{onClick:()=>e(`/contents/edit/${h.id}`),className:"text-indigo-600 hover:text-indigo-900 sm:mr-3 font-semibold",children:"Edit"}),S.jsx("button",{onClick:()=>s(h.id),className:"text-red-600 hover:text-red-900 font-semibold",children:"Delete"})]})})]},h.id))})]})}),S.jsxs("div",{className:"px-2 sm:px-6 py-2 sm:py-4 border-t border-gray-200 flex flex-col gap-2 sm:flex-row items-center justify-between",children:[S.jsxs("div",{className:"text-xs sm:text-sm text-gray-700 mb-2 sm:mb-0",children:["Showing ",S.jsx("span",{className:"font-medium",children:r.from})," ","to ",S.jsx("span",{className:"font-medium",children:r.to})," of"," ",S.jsx("span",{className:"font-medium",children:r.total})," ","results"]}),S.jsx("div",{className:"flex flex-wrap gap-1 sm:inline-flex rounded-md shadow-sm -space-x-px w-full sm:w-auto justify-center sm:justify-start",children:r.links.map((h,p)=>{const y=h.url?new URL(h.url).searchParams.get("page"):null;return S.jsx("button",{onClick:()=>o(y),disabled:!h.url||i,className:`relative inline-flex items-center px-2 sm:px-4 py-1 sm:py-2 border text-xs sm:text-sm font-medium
                                    ${h.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}
                                    ${p===0?"rounded-l-md":""}
                                    ${p===r.links.length-1?"rounded-r-md":""}
                                    disabled:opacity-50 disabled:cursor-not-allowed`,dangerouslySetInnerHTML:d(h.label)},p)})})]})]})})]})})},ad=t=>{const[e,n]=F.useState(!1),[r,i]=F.useState(!1),[a,s]=F.useState(null);return F.useEffect(()=>{if(!t){n(!1),s(null);return}if(!/^https?:\/\/.+/.test(t)){n(!1),s("Invalid URL format");return}i(!0);const o=new Image;return o.onload=()=>{n(!0),i(!1),s(null)},o.onerror=()=>{n(!1),i(!1),s("Image failed to load")},o.src=t,()=>{o.src=""}},[t]),{isValid:e,isLoading:r,error:a}},Wj=()=>{const t=an(),e=rn(),{id:n}=fa(),[r,i]=F.useState(""),{loading:a,error:s,selectedContent:o}=sn(j=>j.contents),c=F.useMemo(()=>{var $,q,Z;if(!o||!o.content)return null;const j=o.content;try{return{...j,casts:Array.isArray(j.casts)?j.casts:j.casts?JSON.parse(j.casts):[],files:{trailer:(($=o.content.files)==null?void 0:$.trailer)||{url:"",quality:"",size:""},stream:((q=o.content.files)==null?void 0:q.stream)||[],download:((Z=o.content.files)==null?void 0:Z.download)||[]}}}catch(B){return console.error("Error parsing content data:",B),null}},[o]),[u,d]=F.useState(1),[h,p]=F.useState({title:"",profileImg:"",coverImg:"",duration:"",links:[],content:"",tags:[],category:"",casts:[],files:{trailer:{url:"",quality:"",size:""},stream:[],download:[]},isvip:!1}),[y,v]=F.useState({});F.useEffect(()=>{n&&t(O8(n))},[t,n]),F.useEffect(()=>{var j,$,q;n&&c&&c.id.toString()===n&&p({title:c.title||"",profileImg:c.profileImg||"",coverImg:c.coverImg||"",duration:c.duration||"",links:c.links||[],content:c.content||"",tags:c.tags||[],category:c.category||"",casts:c.casts||[],files:{trailer:((j=c.files)==null?void 0:j.trailer)||{url:"",quality:"",size:""},stream:(($=c.files)==null?void 0:$.stream)||[],download:((q=c.files)==null?void 0:q.download)||[]},isvip:c.isvip||!1})},[n,c]);const b=j=>{const{name:$,value:q,type:Z,checked:B}=j.target;if($.includes(".")){const[V,H,te]=$.split(".");p(te?ce=>{var ye;return{...ce,[V]:{...ce[V],[H]:{...((ye=ce[V])==null?void 0:ye[H])||{},[te]:q}}}}:ce=>({...ce,[V]:{...ce[V],[H]:q}}))}else p(V=>({...V,[$]:Z==="checkbox"?B:q}))},x=(j,$)=>{const q=j.target.value;p(Z=>({...Z,[$]:q.split(",").map(B=>B.trim()).filter(Boolean)}))},T=()=>{const j=r.trim();j&&!h.links.includes(j)&&p({...h,links:[...h.links,j]}),i("")},_=j=>{const $=h.links.filter((q,Z)=>Z!==j);p({...h,links:$})},A=j=>{p($=>j&&!$.tags.includes(j)?{...$,tags:[...$.tags,j]}:$)},O=j=>{p($=>({...$,tags:$.tags.filter((q,Z)=>Z!==j)}))},R=(j,$,q)=>{const Z=[...h.casts];Z[j][$]=q,p(B=>({...B,casts:Z}))},C=()=>{p(j=>({...j,casts:[...j.casts,{name:"",role:""}]}))},L=j=>{p($=>({...$,casts:$.casts.filter((q,Z)=>Z!==j)}))},P=(j,$,q,Z)=>{const B=[...h.files[Z]];B[j]||(B[j]={}),B[j][$]=q,p(V=>({...V,files:{...V.files,[Z]:B}}))},N=j=>{p($=>({...$,files:{...$.files,[j]:[...$.files[j],{url:"",quality:"",size:""}]}}))},k=(j,$)=>{p(q=>({...q,files:{...q.files,[$]:q.files[$].filter((Z,B)=>B!==j)}}))},M=j=>{var Z,B;const $={};let q=!0;if(v(V=>{const H={...V};return j===1?(delete H.title,delete H.duration,delete H.content,delete H.category):j===2&&(delete H.profileImg,delete H.coverImg,delete H.trailerUrl),H}),console.log(j),j===1)h.title||($.title="Title is required"),h.duration||($.duration="Duration is required"),h.content||($.content="Content description is required"),h.category||($.category="Category is required");else if(j===2)h.profileImg||($.profileImg="Profile Image URL is required"),h.profileImg&&!/^https?:\/\/.+/.test(h.profileImg)&&($.profileImg="Invalid URL format"),h.coverImg||($.coverImg="Cover Image URL is required"),h.coverImg&&!/^https?:\/\/.+/.test(h.coverImg)&&($.coverImg="Invalid URL format"),(B=(Z=h.files)==null?void 0:Z.trailer)!=null&&B.url?/^https?:\/\/.+/.test(h.files.trailer.url)||($.trailerUrl="Invalid URL format"):$.trailerUrl="Trailer URL is required",h.files.stream.length===0?$.download="At least one stream file is required":h.files.stream.forEach((V,H)=>{V.url?/^https?:\/\/.+/.test(V.url)||($[`downloadUrl${H}`]=`Invalid URL format for file ${H+1}`):$[`downloadUrl${H}`]=`Download URL is required for file ${H+1}`});else if(j==3)h.files.download.length===0?$.download="At least one download file is required":h.files.download.forEach((V,H)=>{V.url?/^https?:\/\/.+/.test(V.url)||($[`downloadUrl${H}`]=`Invalid URL format for file ${H+1}`):$[`downloadUrl${H}`]=`Download URL is required for file ${H+1}`});else if(j===4)return v(V=>({...V,...$})),q=Object.keys($).length===0,q;return u==3&&n?(d(u+1),!1):(v(V=>({...V,...$})),q=Object.keys($).length===0,q)},G=()=>{M(u)&&d(j=>j+1)},K=()=>{d(j=>j-1),v({})},W=async j=>{if(j.preventDefault(),!!M(u))try{n?(await t(qge(n,h)),alert("Content updated successfully!")):(await t(Vge(h)),alert("Content created successfully!")),e("/contents")}catch($){console.error("Failed to save content:",$),alert(`Error: ${$.message||($.errors?JSON.stringify($.errors):JSON.stringify($))}`)}};if(n&&a&&!o)return S.jsx("div",{className:"text-center p-6",children:"Loading content..."});if(n&&s)return S.jsxs("div",{className:"text-center p-6 text-red-500",children:["Error loading content: ",s.message]});const Y=()=>{switch(console.log("Current Step:",u),u){case 1:return S.jsx(Yge,{formData:h,handleChange:b,formErrors:y,addTag:A,removeTag:O});case 2:return S.jsx(Xge,{formData:h,handleChange:b,handleFileArrayChange:P,addFileEntry:N,removeFileEntry:k,formErrors:y});case 3:return S.jsx(Xj,{newLink:r,addImageLink:T,setNewLink:i,removeImage:_,formData:h,handleChange:b,handleArrayChange:x,handleCastChange:R,addCast:C,removeCast:L,addFileEntry:N,removeFileEntry:k,handleFileArrayChange:P});case 4:return S.jsx(Xj,{formData:h,newLink:r,addImageLink:T,setNewLink:i,removeImage:_,handleChange:b,handleArrayChange:x,handleCastChange:R,addCast:C,removeCast:L,addFileEntry:N,removeFileEntry:k,handleFileArrayChange:P});default:return null}};return S.jsxs("div",{className:"p-4 sm:p-6 bg-gradient-to-br from-blue-50 via-white to-gray-100 rounded-xl shadow-xl max-w-full sm:max-w-3xl md:max-w-4xl mx-auto",children:[S.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-blue-700 mb-6 text-center tracking-tight drop-shadow",children:n?"Edit Content":"Create New Content"}),S.jsx("div",{className:"flex items-center justify-center mb-8 w-full max-w-2xl mx-auto",children:["Basic Info","Media & Files","Advanced Details"].map((j,$,q)=>{const Z=u>=$+1;return S.jsx(Q.Fragment,{children:S.jsxs("div",{className:"flex flex-col items-center w-1/3 relative",children:[S.jsx("div",{className:`z-10 p-2 rounded-full mb-2 w-10 h-10 flex items-center justify-center text-lg sm:text-xl transition-all duration-200
                    ${Z?"bg-blue-600 text-white font-extrabold shadow-lg border-2 border-blue-600":"bg-gray-100 text-gray-400 border-2 border-gray-200"}`,children:$+1}),S.jsx("span",{className:`text-xs sm:text-base font-semibold transition-all duration-200 ${Z?"text-blue-700":"text-gray-400"}`,children:j}),$<q.length-1&&S.jsx("div",{className:"absolute top-5 left-1/2 w-full h-0 flex items-center justify-center",children:S.jsx("div",{className:`w-full border-t-2 ${Z?"border-blue-600":"border-blue-200"}`,style:{zIndex:0,marginLeft:"20px",marginRight:"-20px"}})})]})},j)})}),S.jsxs("form",{onSubmit:W,className:"space-y-6",children:[Y(),S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-8 gap-3",children:[u==1&&S.jsx("button",{type:"button",onClick:()=>e("/contents"),className:"w-full sm:w-auto px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),u>1&&S.jsx("button",{type:"button",onClick:K,className:"w-full sm:w-auto px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Previous"}),u<3?S.jsx("button",{type:"button",onClick:G,className:`w-full sm:w-auto inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u===1?"sm:ml-auto":""}`,children:"Next"}):S.jsx("button",{type:"submit",className:"w-full sm:w-auto inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-auto",disabled:a,children:a?n?"Updating...":"Creating...":n?"Update Content":"Create Content"})]}),s&&S.jsxs("p",{className:"text-red-500 text-sm mt-4 text-center",children:["Error: ",s.message||JSON.stringify(s)]})]})]})},Yge=({formData:t,handleChange:e,formErrors:n,addTag:r,removeTag:i})=>S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),S.jsx("input",{type:"text",name:"title",id:"title",value:t.title,onChange:e,className:`mt-1 block w-full border ${n.title?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Example Movie Title",required:!0}),n.title&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.title})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700",children:"Duration (e.g., HH:MM:SS)"}),S.jsx("input",{type:"text",name:"duration",id:"duration",value:t.duration,onChange:e,className:`mt-1 block w-full border ${n.duration?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"2:15:00",required:!0}),n.duration&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.duration})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content Description"}),S.jsx("textarea",{name:"content",id:"content",rows:"4",value:t.content,onChange:e,className:`mt-1 block w-full border ${n.content?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Full movie description here...",required:!0}),n.content&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.content})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),S.jsx("input",{type:"text",name:"category",id:"category",value:t.category,onChange:e,className:`mt-1 block w-full border ${n.category?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Engsub, Dubbed, etc.",required:!0}),n.category&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.category})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"tagInput",className:"block text-sm font-medium text-gray-700",children:"Tags"}),S.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[S.jsx("input",{type:"text",id:"tagInput",onKeyDown:a=>{a.key==="Enter"&&a.target.value.trim()!==""&&(a.preventDefault(),r(a.target.value.trim()),a.target.value="")},className:"block flex-1 border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add a tag and press Enter"}),S.jsx("button",{type:"button",onClick:()=>{const a=document.getElementById("tagInput");a.value.trim()!==""&&(r(a.value.trim()),a.value="")},className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm",children:"Add"})]}),S.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.tags.map((a,s)=>S.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 shadow",children:[a,S.jsx("button",{type:"button",onClick:()=>i(s),className:"ml-2 -mr-0.5 h-4 w-4 flex-shrink-0 text-blue-400 hover:text-blue-700 focus:outline-none",children:"×"})]},s))})]})]}),Wge=({url:t})=>{const{isValid:e,isLoading:n,error:r}=ad(t);return t?n?S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})}):e?S.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Profile Image Preview:"}),S.jsx("img",{src:t,alt:"Profile Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md",onError:i=>{i.target.src="https://via.placeholder.com/150?text=Invalid+Image"}})]}):S.jsx("div",{className:"mt-2 p-2 border border-red-200 rounded-md bg-red-50 text-center",children:S.jsx("p",{className:"text-sm text-red-600",children:r||"Invalid image URL"})}):null},C8=({url:t})=>{const{isValid:e,isLoading:n,error:r}=ad(t);return t?n?S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})}):e?S.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cover Image Preview:"}),S.jsx("img",{src:t,alt:"Cover Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md",onError:i=>{i.target.src="https://via.placeholder.com/300x150?text=Invalid+Image"}})]}):S.jsx("div",{className:"mt-2 p-2 border border-red-200 rounded-md bg-red-50 text-center",children:S.jsx("p",{className:"text-sm text-red-600",children:r||"Invalid image URL"})}):null},Xge=({formData:t,handleChange:e,handleFileArrayChange:n,addFileEntry:r,removeFileEntry:i,formErrors:a})=>{var s,o,c;return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"profileImg",className:"block text-sm font-medium text-gray-700",children:"Profile Image URL"}),S.jsx("input",{type:"url",name:"profileImg",id:"profileImg",value:t.profileImg,onChange:e,className:`mt-1 block w-full border ${a.profileImg?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"https://example.com/images/profile.jpg",required:!0}),a.profileImg&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.profileImg}),t.profileImg&&S.jsx(Wge,{url:t.profileImg})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"coverImg",className:"block text-sm font-medium text-gray-700",children:"Cover Image URL"}),S.jsx("input",{type:"url",name:"coverImg",id:"coverImg",value:t.coverImg,onChange:e,className:`mt-1 block w-full border ${a.coverImg?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"https://example.com/covers/cover.jpg",required:!0}),a.coverImg&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.coverImg}),t.coverImg&&S.jsx(C8,{url:t.coverImg})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trailer File"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"trailerUrl",className:"block text-xs font-medium text-gray-500",children:"URL"}),S.jsx("input",{type:"url",name:"files.trailer.url",id:"trailerUrl",value:((s=t.files.trailer)==null?void 0:s.url)||"",onChange:e,className:`mt-1 block w-full border ${a.trailerUrl?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2`,placeholder:"https://example.com/trailer.mp4"}),a.trailerUrl&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.trailerUrl})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"trailerQuality",className:"block text-xs font-medium text-gray-500",children:"Quality"}),S.jsx("input",{type:"text",name:"files.trailer.quality",id:"trailerQuality",value:((o=t.files.trailer)==null?void 0:o.quality)||"",onChange:e,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"1080p"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"trailerSize",className:"block text-xs font-medium text-gray-500",children:"Size"}),S.jsx("input",{type:"text",name:"files.trailer.size",id:"trailerSize",value:((c=t.files.trailer)==null?void 0:c.size)||"",onChange:e,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"250MB"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stream Files"}),t.files.stream.map((u,d)=>S.jsxs("div",{className:"flex lg:flex-col  flex-col  space-y-2 sm:space-y-0 sm:space-x-2 mb-2 items-end bg-blue-50 rounded-lg p-2 shadow",children:[S.jsxs("div",{className:"flex-1 w-full",children:[S.jsx("label",{htmlFor:`streamUrl${d}`,className:"block text-xs font-medium text-gray-500",children:"URL"}),S.jsx("input",{type:"url",id:`streamUrl${d}`,value:u.url,onChange:h=>n(d,"url",h.target.value,"stream"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"https://stream.com/v1.mp4"})]}),S.jsxs("div",{className:"w-full",children:[S.jsx("label",{htmlFor:`streamQuality${d}`,className:"block text-xs font-medium text-gray-500",children:"Quality"}),S.jsx("input",{type:"text",id:`streamQuality${d}`,value:u.quality,onChange:h=>n(d,"quality",h.target.value,"stream"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"720p"})]}),S.jsxs("div",{className:"w-full",children:[S.jsx("label",{htmlFor:`streamSize${d}`,className:"block text-xs font-medium text-gray-500",children:"Size"}),S.jsx("input",{type:"text",id:`streamSize${d}`,value:u.size,onChange:h=>n(d,"size",h.target.value,"stream"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"1.2GB"})]}),S.jsx("button",{type:"button",onClick:()=>i(d,"stream"),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 mb-1",children:"Remove"})]},d)),S.jsx("button",{type:"button",onClick:()=>r("stream"),className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 shadow",children:"+ Add Stream File"}),a.stream&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.stream}),t.files.stream.map((u,d)=>a[`streamUrl${d}`]&&S.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a[`streamUrl${d}`]},`error-${d}`))]})]})},Xj=({newLink:t,addImageLink:e,setNewLink:n,removeImage:r,formData:i,handleChange:a,handleArrayChange:s,handleCastChange:o,addCast:c,removeCast:u,addFileEntry:d,removeFileEntry:h,handleFileArrayChange:p})=>S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"newLink",className:"block text-sm font-medium text-gray-700",children:"Add Image URL"}),S.jsxs("div",{className:"flex gap-2 mt-1",children:[S.jsx("input",{type:"text",id:"newLink",name:"newLink",value:t,onChange:y=>n(y.target.value),className:"flex-1 block border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/image.jpg"}),S.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add"})]})]}),i.links.length>0&&S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mt-4",children:i.links.map((y,v)=>S.jsxs("div",{className:"border p-2 rounded-lg shadow relative group bg-white flex flex-col items-center",children:[S.jsx(C8,{url:y}),S.jsx("p",{className:"mt-1 text-xs text-gray-500 truncate w-full text-center",children:y}),S.jsx("button",{onClick:()=>r(v),className:"absolute top-1 right-1 text-red-600 bg-white border rounded-full px-1 text-xs opacity-0 group-hover:opacity-100 transition",title:"Remove",children:"✕"})]},v))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Casts"}),i.casts.map((y,v)=>S.jsxs("div",{className:"flex space-x-2 mb-2 items-end",children:[S.jsx("input",{type:"text",value:y.name,onChange:b=>o(v,"name",b.target.value),className:"block w-full flex-1 border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Actor Name"}),S.jsx("input",{type:"text",value:y.role,onChange:b=>o(v,"role",b.target.value),className:"block w-full flex-1 border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Role (e.g., Actor, Director)"}),S.jsx("button",{type:"button",onClick:()=>u(v),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Remove"})]},v)),S.jsx("button",{type:"button",onClick:c,className:"mt-2 px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600",children:"Add Cast"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Download Files"}),i.files.download.map((y,v)=>S.jsxs("div",{className:"flex lg:flex-col flex-col space-y-2 sm:space-y-0 sm:space-x-2 mb-2 items-end bg-green-50 rounded-lg p-2 shadow",children:[S.jsxs("div",{className:"flex-1 w-full",children:[S.jsx("label",{htmlFor:`downloadUrl${v}`,className:"block text-xs font-medium text-gray-500",children:"URL"}),S.jsx("input",{type:"url",id:`downloadUrl${v}`,value:y.url,onChange:b=>p(v,"url",b.target.value,"download"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"https://download.com/file1.mp4"})]}),S.jsxs("div",{className:"w-full",children:[S.jsx("label",{htmlFor:`downloadQuality${v}`,className:"block text-xs font-medium text-gray-500",children:"Quality"}),S.jsx("input",{type:"text",id:`downloadQuality${v}`,value:y.quality,onChange:b=>p(v,"quality",b.target.value,"download"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"1080p"})]}),S.jsxs("div",{className:"w-full",children:[S.jsx("label",{htmlFor:`downloadSize${v}`,className:"block text-xs font-medium text-gray-500",children:"Size"}),S.jsx("input",{type:"text",id:`downloadSize${v}`,value:y.size,onChange:b=>p(v,"size",b.target.value,"download"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"2.5GB"})]}),S.jsx("button",{type:"button",onClick:()=>h(v,"download"),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 mb-1",children:"Remove"})]},v)),S.jsx("button",{type:"button",onClick:()=>d("download"),className:"mt-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 shadow",children:"+ Add Download File"})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{type:"checkbox",name:"isvip",id:"isvip",checked:i.isvip,onChange:a,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),S.jsx("label",{htmlFor:"isvip",className:"ml-2 block text-sm font-medium text-gray-700",children:"Is VIP Content?"})]})]}),Qge=()=>S.jsxs("div",{className:"min-h-full flex flex-col items-center justify-center bg-gray-50 p-6 text-center",children:[S.jsx("h1",{className:"text-9xl font-extrabold text-gray-800 mb-4",children:"404"}),S.jsx("p",{className:"text-2xl font-semibold text-gray-600 mb-6",children:"Page Not Found"}),S.jsx("p",{className:"text-lg text-gray-500 mb-8 max-w-lg",children:"Oops! The page you're looking for doesn't exist. It might have been moved or deleted."}),S.jsx(hi,{to:"/dashboard",className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition duration-300 ease-in-out",children:"Go to Dashboard"})]}),Zge=()=>{var A,O,R,C,L,P;const{id:t}=fa(),e=an(),n=rn(),{selectedContent:r,loading:i,error:a}=sn(N=>N.contents);F.useEffect(()=>{t&&e(O8(t))},[e,t]);const s=F.useMemo(()=>{var k,M,G;if(!r||!r.content)return null;const N=r.content;try{return{...N,casts:Array.isArray(N.casts)?N.casts:N.casts?JSON.parse(N.casts):[],files:{trailer:((k=r.content.files)==null?void 0:k.trailer)||{url:"",quality:"",size:""},stream:((M=r.content.files)==null?void 0:M.stream)||[],download:((G=r.content.files)==null?void 0:G.download)||[]}}}catch(K){return console.error("Error parsing content data:",K),null}},[r]);if(i)return S.jsx("div",{className:"text-center p-6 text-gray-700",children:"Loading content details..."});if(a)return S.jsxs("div",{className:"text-center p-6 text-red-500",children:["Error: ",a.message||"Could not load content details."]});if(!s)return S.jsx("div",{className:"text-center p-6 text-gray-700",children:"Content not found."});const{title:o,profileImg:c,coverImg:u,duration:d,links:h,content:p,tags:y,category:v,casts:b,files:x,isvip:T,views_count:_}=s;return S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg max-w-5xl mx-auto my-8",children:[S.jsx("button",{onClick:()=>n("/contents"),className:"mb-6 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to Contents List"}),S.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 mb-4",children:o}),u&&S.jsx("div",{className:"mb-6",children:S.jsx("img",{src:u,alt:`${o} Cover`,className:"w-full h-96 object-cover rounded-lg shadow-md",onError:N=>N.target.src=""})}),c&&S.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[S.jsx("img",{src:c,alt:`${o} Profile`,className:"w-24 h-24 object-cover rounded-full border-4 border-white shadow-md",onError:N=>N.target.src=""}),S.jsxs("div",{children:[S.jsxs("p",{className:"text-sm text-gray-500",children:["Duration: ",d]}),S.jsxs("p",{className:"text-sm text-gray-500",children:["Category:"," ",S.jsx("span",{className:"font-medium text-gray-700",children:v})]}),S.jsxs("p",{className:"text-sm text-gray-500",children:["Views: ",_]}),S.jsx("p",{className:`text-sm font-semibold ${T?"text-green-600":"text-blue-600"}`,children:T?"VIP Content":"Free Content"})]})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Description"}),S.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:p})]}),y&&y.length>0&&S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Tags"}),S.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((N,k)=>S.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:N},k))})]}),b&&b.length>0&&S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Casts"}),S.jsx("ul",{className:"list-disc list-inside text-gray-700",children:b.map((N,k)=>S.jsxs("li",{children:[N.name," (",N.role,")"]},k))})]}),h&&h.length>0&&S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Related Links"}),S.jsx("ul",{className:"list-disc list-inside text-blue-600",children:h.map((N,k)=>S.jsx("li",{children:S.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:N})},k))})]}),x&&(((A=x.trailer)==null?void 0:A.url)||((O=x.stream)==null?void 0:O.length)>0||((R=x.download)==null?void 0:R.length)>0)&&S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Files"}),((C=x.trailer)==null?void 0:C.url)&&S.jsxs("div",{className:"mb-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:"Trailer"}),S.jsxs("p",{className:"text-gray-700",children:["URL:"," ",S.jsx("a",{href:x.trailer.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:x.trailer.url})]}),S.jsxs("p",{className:"text-gray-700",children:["Quality: ",x.trailer.quality||"N/A",", Size:"," ",x.trailer.size||"N/A"]})]}),((L=x.stream)==null?void 0:L.length)>0&&S.jsxs("div",{className:"mb-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:"Stream Options"}),S.jsx("ul",{className:"list-disc list-inside text-gray-700",children:x.stream.map((N,k)=>S.jsxs("li",{children:["URL:"," ",S.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:N.url})," ","(Quality: ",N.quality||"N/A",", Size:"," ",N.size||"N/A",")"]},k))})]}),((P=x.download)==null?void 0:P.length)>0&&S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:"Download Options"}),S.jsx("ul",{className:"list-disc list-inside text-gray-700",children:x.download.map((N,k)=>S.jsxs("li",{children:["URL:"," ",S.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:N.url})," ","(Quality: ",N.quality||"N/A",", Size:"," ",N.size||"N/A",")"]},k))})]})]}),r.related_content&&r.related_content.length>0&&S.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Related Content"}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.related_content.map(N=>S.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[S.jsx("img",{src:N.coverImg||"https://via.placeholder.com/1280x720?text=Related+Content",alt:N.title,className:"w-full h-48 object-cover"}),S.jsxs("div",{className:"p-4",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:N.title}),S.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:N.short_description}),S.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:N.tags.map((k,M)=>S.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:k},M))}),S.jsx("button",{onClick:()=>n(`/contents/details/${N.id}`),className:"mt-2 px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"View Details"})]})]},N.id))})]})]})},Jge=async(t=1,e=20)=>{var n,r;try{return(await Je.get("/devices",{params:{page:t,per_page:e}})).data}catch(i){throw console.error("Error fetching devices:",((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},e0e=async t=>{var e,n;try{return(await Je.get(`/devices/${t}`)).data}catch(r){throw console.error(`Error fetching device with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},t0e=async t=>{var e,n;try{return(await Je.post("/devices",t)).data}catch(r){throw console.error("Error creating device:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},n0e=async(t,e)=>{var n,r;try{return(await Je.put(`/devices/${t}`,e)).data}catch(i){throw console.error(`Error updating device with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},r0e=async t=>{var e,n;try{return await Je.delete(`/devices/${t}`),t}catch(r){throw console.error(`Error deleting device with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Fh=(t=1,e=20)=>async n=>{n({type:LF});try{const r=await Jge(t,e);n({type:DF,payload:r})}catch(r){n({type:IF,payload:r})}},L8=t=>async e=>{e({type:PF});try{const n=await e0e(t);e({type:NF,payload:n})}catch(n){e({type:MF,payload:n})}},i0e=t=>async e=>{e({type:kF});try{const n=await t0e(t);return e({type:jF,payload:n}),Promise.resolve(n)}catch(n){return e({type:UF,payload:n}),Promise.reject(n)}},a0e=(t,e)=>async n=>{n({type:BF});try{const r=await n0e(t,e);return n({type:FF,payload:r}),Promise.resolve(r)}catch(r){return n({type:$F,payload:r}),Promise.reject(r)}},s0e=t=>async e=>{e({type:GF});try{return await r0e(t),e({type:VF,payload:t}),Promise.resolve(t)}catch(n){return e({type:qF,payload:n}),Promise.reject(n)}},o0e=()=>{const t=an(),e=rn(),{devices:n,pagination:r,loading:i,error:a}=sn(u=>u.devices);F.useEffect(()=>{t(Fh(r.current_page,r.per_page))},[t,r.current_page,r.per_page]);const s=u=>{u>=1&&u<=r.last_page&&t(Fh(u,r.per_page))},o=u=>{t(Fh(1,parseInt(u.target.value,10)))},c=async(u,d)=>{if(window.confirm(`Are you sure you want to delete device "${d}"? This action cannot be undone.`))try{await t(s0e(d)),alert("Device deleted successfully!"),t(Fh(r.current_page,r.per_page))}catch(h){alert(`Failed to delete device: ${h.message||JSON.stringify(h)}`),console.error("Delete failed:",h)}};return i&&n.length===0?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading devices..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Devices"}),S.jsx("p",{children:a.message||"An unexpected error occurred while fetching devices."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):S.jsxs("div",{className:"p-4 sm:p-6 bg-white rounded-lg shadow-md max-w-full sm:max-w-5xl mx-auto",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 sm:gap-0",children:[S.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 leading-tight",children:"Device Management"}),S.jsx("button",{onClick:()=>e("/devices/new"),className:"w-full sm:w-auto px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-md shadow hover:from-blue-600 hover:to-blue-800 transition duration-200 font-semibold text-base sm:text-lg",children:"+ Add New Device"})]}),n.length===0&&!i?S.jsx("p",{className:"text-gray-600 text-center py-8 text-base sm:text-lg font-medium bg-gray-50 rounded-md shadow-inner",children:"No devices found."}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:S.jsxs("table",{className:"min-w-[700px] w-full divide-y divide-gray-200 text-sm sm:text-base",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"ID"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Device ID"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Platform"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"OS/App Version"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Last Active"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"VIP Status"}),S.jsx("th",{scope:"col",className:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"VIP Expires"}),S.jsx("th",{scope:"col",className:"relative px-2 sm:px-4 py-2 sm:py-3 text-center whitespace-nowrap",children:"Actions"})]})}),S.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(u=>S.jsxs("tr",{className:"device-row",children:[S.jsx("td",{className:"device-cell",children:u.id}),S.jsx("td",{className:"device-cell",children:u.device_id}),S.jsx("td",{className:"device-cell",children:u.platform||"N/A"}),S.jsxs("td",{className:"device-cell",children:[u.osversion||"N/A"," / ",u.appversion||"N/A"]}),S.jsx("td",{className:"device-cell",children:u.last_active_at?S.jsx("span",{title:pn(new Date(u.last_active_at),"MMM dd, yyyy HH:mm"),className:"cursor-help",children:CY(new Date(u.last_active_at),{addSuffix:!0})}):"N/A"}),S.jsx("td",{className:"device-cell",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u.is_vip?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.is_vip?"VIP":"Free"})}),S.jsx("td",{className:"device-cell",children:u.vip_expires_at?pn(new Date(u.vip_expires_at),"MMM dd, yyyy"):"N/A"}),S.jsx("td",{className:"device-cell text-center",children:S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2 justify-center items-center",children:[S.jsx("button",{onClick:()=>e(`/devices/details/${u.device_id}`),className:"w-full sm:w-auto px-3 py-2 text-blue-600 hover:text-white hover:bg-blue-600 rounded-md shadow-sm transition-colors duration-200 font-semibold text-xs sm:text-sm",title:"View Details","aria-label":`View details for device ${u.device_id}`,children:"View"}),S.jsx("button",{onClick:()=>e(`/devices/edit/${u.device_id}`),className:"w-full sm:w-auto px-3 py-2 text-yellow-600 hover:text-white hover:bg-yellow-500 rounded-md shadow-sm transition-colors duration-200 font-semibold text-xs sm:text-sm",title:"Edit Device","aria-label":`Edit device ${u.device_id}`,children:"Edit"}),S.jsx("button",{onClick:()=>c(u.id,u.device_id),className:"w-full sm:w-auto px-3 py-2 text-red-600 hover:text-white hover:bg-red-600 rounded-md shadow-sm transition-colors duration-200 font-semibold text-xs sm:text-sm",title:"Delete Device","aria-label":`Delete device ${u.device_id}`,children:"Delete"})]})})]},u.id)),i&&n.length>0&&S.jsx("tr",{children:S.jsx("td",{colSpan:"8",className:"px-2 sm:px-4 py-4 text-center text-blue-500 bg-blue-50",children:S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-400 mr-3"}),"Loading more devices..."]})})})]})]})}),S.jsxs("div",{className:"mt-6 flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[S.jsxs("div",{className:"flex flex-row sm:flex-row items-center gap-2",children:[S.jsx("label",{htmlFor:"perPage",className:"text-sm text-gray-700",children:"Show:"}),S.jsx("select",{id:"perPage",value:r.per_page,onChange:o,className:"block w-20 sm:w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 text-sm",children:[10,20,50,100].map(u=>S.jsx("option",{value:u,children:u},u))}),S.jsx("span",{className:"text-sm text-gray-700",children:"entries"})]}),S.jsxs("div",{className:"flex flex-wrap gap-2 justify-center items-center",children:[S.jsx("button",{onClick:()=>s(r.current_page-1),disabled:r.current_page===1,className:"px-3 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm",children:"Previous"}),Array.from({length:r.last_page},(u,d)=>d+1).map(u=>S.jsx("button",{onClick:()=>s(u),className:`px-3 py-2 rounded-md text-xs sm:text-sm font-semibold ${r.current_page===u?"bg-blue-600 text-white shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:u},u)),S.jsx("button",{onClick:()=>s(r.current_page+1),disabled:r.current_page===r.last_page,className:"px-3 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm",children:"Next"})]}),S.jsxs("div",{className:"text-sm text-gray-700 text-center sm:text-right",children:["Page ",r.current_page," of ",r.last_page," ",S.jsxs("span",{className:"hidden sm:inline",children:["(Total ",r.total," devices)"]}),S.jsxs("span",{className:"block sm:hidden mt-1",children:["Total: ",r.total," devices"]})]})]})]})]})},l0e=()=>{const{id:t}=fa(),e=rn(),n=an(),{selectedDevice:r,loading:i,error:a}=sn(s=>s.devices);return F.useEffect(()=>{t&&n(L8(t))},[n,t]),console.log("DeviceDetailsPage",r,i,a),i?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading device details..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Device Details"}),S.jsx("p",{children:a.message||"An unexpected error occurred."}),S.jsx("button",{onClick:()=>e("/devices"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Device List"})]}):r?S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Device Details"}),S.jsx("button",{onClick:()=>e("/devices"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"ID:"}),S.jsx("span",{className:"text-gray-900",children:r.device.id})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Device ID:"}),S.jsx("span",{className:"text-gray-900",children:r.device.device_id})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Platform:"}),S.jsx("span",{className:"text-gray-900",children:r.device.platform||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"OS Version:"}),S.jsx("span",{className:"text-gray-900",children:r.device.osversion||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"App Version:"}),S.jsx("span",{className:"text-gray-900",children:r.device.appversion||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Last Active:"}),S.jsx("span",{className:"text-gray-900",children:r.device.last_active_at?pn(new Date(r.device.last_active_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"VIP Status:"}),S.jsx("span",{className:`font-semibold ${r.device.is_vip?"text-green-600":"text-red-600"}`,children:r.device.is_vip?"VIP":"Free"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"VIP Expires At:"}),S.jsx("span",{className:"text-gray-900",children:r.device.vip_expires_at?pn(new Date(r.device.vip_expires_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),S.jsx("span",{className:"text-gray-900",children:r.device.created_at?pn(new Date(r.device.created_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Updated At:"}),S.jsx("span",{className:"text-gray-900",children:r.device.updated_at?pn(new Date(r.device.updated_at),"MMM dd, yyyy HH:mm"):"N/A"})]})]}),S.jsx("div",{className:"mt-8 flex justify-end space-x-3",children:S.jsx("button",{onClick:()=>e(`/devices/edit/${r.device.device_id}`),className:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Edit Device"})})]}):S.jsxs("div",{className:"text-center p-6 text-gray-600",children:[S.jsxs("p",{children:["No device found with ID: ",t,"."]}),S.jsx("button",{onClick:()=>e("/devices"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Device List"})]})},u0e=()=>{const{id:t}=fa(),e=rn(),n=an(),{selectedDevice:r,loading:i,error:a}=sn(x=>x.devices),s=!!t,[o,c]=F.useState({device_id:"",is_vip:!1,osversion:"",appversion:"",platform:"",vip_expires_at:""}),[u,d]=F.useState({}),[h,p]=F.useState(!1);F.useEffect(()=>(s&&n(L8(t)),()=>{}),[n,t,s]),F.useEffect(()=>{s&&r?c({device_id:r.device.device_id||"",is_vip:r.device.is_vip,osversion:r.device.osversion||"",appversion:r.device.appversion||"",platform:r.device.platform||"",vip_expires_at:r.device.vip_expires_at?pn(new Date(r.device.vip_expires_at),"yyyy-MM-dd'T'HH:mm"):""}):s||c({device_id:"",is_vip:!1,osversion:"",appversion:"",platform:"",vip_expires_at:""})},[s,r,t]);const y=x=>{const{name:T,value:_,type:A,checked:O}=x.target;c(R=>({...R,[T]:A==="checkbox"?O:_}))},v=()=>{const x={};return o.device_id.trim()||(x.device_id="Device ID is required."),o.platform.trim()||(x.platform="Platform is required."),d(x),Object.keys(x).length===0},b=async x=>{if(x.preventDefault(),!!v()){p(!0);try{const T={...o,vip_expires_at:o.vip_expires_at?new Date(o.vip_expires_at).toISOString():null};s?(await n(a0e(t,T)),alert("Device updated successfully!")):(await n(i0e(T)),alert("Device created successfully!")),e("/devices")}catch(T){const _=T.message||JSON.stringify(T);alert(`Operation failed: ${_}`),console.error("Form submission error:",T)}finally{p(!1)}}};return s&&i&&!r?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading device for editing..."})]}):a&&s?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Device"}),S.jsx("p",{children:a.message||"An unexpected error occurred while fetching device details."}),S.jsx("button",{onClick:()=>e("/devices"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Device List"})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:s?"Edit Device":"Create New Device"}),S.jsx("button",{onClick:()=>e("/devices"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("form",{onSubmit:b,className:"space-y-5",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"device_id",className:"block text-sm font-medium text-gray-700",children:"Device ID"}),S.jsx("input",{type:"text",id:"device_id",name:"device_id",value:o.device_id,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),u.device_id&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.device_id})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-700",children:"Platform"}),S.jsx("input",{type:"text",id:"platform",name:"platform",value:o.platform,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),u.platform&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.platform})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"osversion",className:"block text-sm font-medium text-gray-700",children:"OS Version"}),S.jsx("input",{type:"text",id:"osversion",name:"osversion",value:o.osversion,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"appversion",className:"block text-sm font-medium text-gray-700",children:"App Version"}),S.jsx("input",{type:"text",id:"appversion",name:"appversion",value:o.appversion,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{id:"is_vip",name:"is_vip",type:"checkbox",checked:o.is_vip,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),S.jsx("label",{htmlFor:"is_vip",className:"ml-2 block text-sm text-gray-900",children:"Is VIP Device?"})]}),o.is_vip&&S.jsxs("div",{children:[S.jsx("label",{htmlFor:"vip_expires_at",className:"block text-sm font-medium text-gray-700",children:"VIP Expires At"}),S.jsx("input",{type:"datetime-local",id:"vip_expires_at",name:"vip_expires_at",value:o.vip_expires_at,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsx("div",{className:"flex justify-end space-x-3",children:S.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Saving...":s?"Update Device":"Create Device"})})]})]})},c0e=async()=>{var t,e;try{return(await Je.get("/subscription-keys")).data}catch(n){throw console.error("Error fetching subscription keys:",((t=n.response)==null?void 0:t.data)||n.message),((e=n.response)==null?void 0:e.data)||n.message}},f0e=async(t,e)=>{var n,r;try{return(await Je.post("/create-key",{type:t,max_devices:e})).data}catch(i){throw console.error("Error generating subscription key:",((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},d0e=async t=>{var e,n;try{return(await Je.put(`/subscriptions/${t}/deactivate`)).data.subscription}catch(r){throw console.error(`Error deactivating key ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},h0e=()=>async t=>{t({type:QF});try{const e=await c0e();t({type:ZF,payload:e.subscription_keys})}catch(e){t({type:JF,payload:e})}},m0e=(t,e)=>async n=>{n({type:e$});try{const r=await f0e(t,e);return n({type:t$,payload:r}),Promise.resolve(r)}catch(r){return n({type:n$,payload:r}),Promise.reject(r)}},p0e=t=>async e=>{e({type:r$});try{const n=await d0e(t);return e({type:i$,payload:n}),Promise.resolve(n)}catch(n){return e({type:a$,payload:n}),Promise.reject(n)}},g0e=()=>{const t=an(),{subscriptionKeys:e,loading:n,error:r}=sn(v=>v.subscriptions),[i,a]=F.useState(!1),[s,o]=F.useState("1month"),[c,u]=F.useState(1),[d,h]=F.useState(!1);F.useEffect(()=>{t(h0e())},[t]);const p=async()=>{if(!s||c<1){alert("Please select a key type and specify maximum devices.");return}h(!0);try{await t(m0e(s,c)),alert("Subscription key generated successfully!"),a(!1),o("1month"),u(1)}catch(v){alert(`Failed to generate key: ${v.message||JSON.stringify(v)}`),console.error("Generate key failed:",v)}finally{h(!1)}},y=async v=>{if(window.confirm(`Are you sure you want to deactivate key "${v}"? This will make it unusable.`))try{await t(p0e(v)),alert("Subscription key deactivated successfully!")}catch(b){alert(`Failed to deactivate key: ${b.message||JSON.stringify(b)}`),console.error("Deactivate key failed:",b)}};return n&&e.length===0?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading subscription keys..."})]}):r?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Subscriptions"}),S.jsx("p",{children:r.message||"An unexpected error occurred while fetching subscription keys."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Subscription Keys"}),S.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md shadow-sm hover:bg-green-700 transition duration-200",children:"Generate New Key"})]}),e.length===0&&!n?S.jsx("p",{className:"text-gray-600 text-center py-8",children:"No subscription keys found. Generate one to start!"}):S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Key"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Max Devices"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Devices Used"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires At"}),S.jsx("th",{scope:"col",className:"relative px-6 py-3 text-center",children:"Actions"})]})}),S.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.map(v=>S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S.jsx("span",{className:"font-mono bg-gray-100 p-1 rounded-md text-xs",children:v.key})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.type}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.max_devices}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.devices_used}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${v.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.is_active?"Active":"Inactive"})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.expires_at?pn(new Date(v.expires_at),"MMM dd, yyyy HH:mm"):"Lifetime"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:v.is_active&&S.jsx("button",{onClick:()=>y(v.key),className:"text-red-600 hover:text-red-900 px-3 py-1 rounded-md hover:bg-red-100 transition-colors duration-200",children:"Deactivate"})})]},v.key)),n&&e.length>0&&S.jsx("tr",{children:S.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400 mr-3"}),"Loading more keys..."]})})})]})]})}),i&&S.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex justify-center items-center",children:S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[S.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Generate New Subscription Key"}),S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{htmlFor:"keyType",className:"block text-sm font-medium text-gray-700",children:"Key Type"}),S.jsxs("select",{id:"keyType",name:"keyType",value:s,onChange:v=>o(v.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[S.jsx("option",{value:"1month",children:"1 Month"}),S.jsx("option",{value:"3months",children:"3 Months"}),S.jsx("option",{value:"5months",children:"5 Months"}),S.jsx("option",{value:"8months",children:"8 Months"}),S.jsx("option",{value:"1year",children:"1 Year"}),S.jsx("option",{value:"lifetime",children:"Lifetime"})]})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("label",{htmlFor:"maxDevices",className:"block text-sm font-medium text-gray-700",children:"Max Devices"}),S.jsx("input",{type:"number",id:"maxDevices",name:"maxDevices",value:c,onChange:v=>u(Math.max(2,parseInt(v.target.value,10)||2)),min:"2",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsxs("div",{className:"flex justify-end space-x-3",children:[S.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition duration-200",disabled:d,children:"Cancel"}),S.jsx("button",{onClick:p,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:d,children:d?"Generating...":"Generate Key"})]})]})})]})},y0e=async()=>{var t,e;try{return(await Je.get("/suggestions")).data}catch(n){throw console.error("Error fetching suggestions:",((t=n.response)==null?void 0:t.data)||n.message),((e=n.response)==null?void 0:e.data)||n.message}},v0e=async t=>{var e,n;try{return(await Je.get(`/suggestions/${t}`)).data}catch(r){throw console.error(`Error fetching suggestion with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},x0e=async t=>{var e,n;try{return(await Je.post("/suggestions",t)).data}catch(r){throw console.error("Error creating suggestion:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},b0e=async(t,e)=>{var n,r;try{return(await Je.put(`/suggestions/${t}`,e)).data}catch(i){throw console.error(`Error updating suggestion with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},S0e=async t=>{var e,n;try{return await Je.delete(`/suggestions/${t}`),t}catch(r){throw console.error(`Error deleting suggestion with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Qj=()=>async t=>{t({type:s$});try{const e=await y0e();t({type:o$,payload:e})}catch(e){t({type:l$,payload:e})}},D8=t=>async e=>{e({type:u$});try{const n=await v0e(t);e({type:c$,payload:n})}catch(n){e({type:f$,payload:n})}},E0e=t=>async e=>{e({type:d$});try{const n=await x0e(t);return e({type:h$,payload:n}),Promise.resolve(n)}catch(n){return e({type:m$,payload:n}),Promise.reject(n)}},T0e=(t,e)=>async n=>{n({type:p$});try{const r=await b0e(t,e);return n({type:g$,payload:r}),Promise.resolve(r)}catch(r){return n({type:y$,payload:r}),Promise.reject(r)}},A0e=t=>async e=>{e({type:v$});try{return await S0e(t),e({type:x$,payload:t}),Promise.resolve(t)}catch(n){return e({type:b$,payload:n}),Promise.reject(n)}},w0e=()=>{const t=an(),e=rn(),{suggestions:n,loading:r,error:i}=sn(o=>o.suggestions),a=({url:o})=>{const{isLoading:c}=ad(o);if(!o)return null;if(c)return S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})})};F.useEffect(()=>{t(Qj())},[t]);const s=async o=>{if(window.confirm(`Are you sure you want to delete this suggestion (ID: ${o})? This action cannot be undone.`))try{await t(A0e(o)),alert("Suggestion deleted successfully!"),t(Qj())}catch(c){alert(`Failed to delete suggestion: ${c.message||JSON.stringify(c)}`),console.error("Delete failed:",c)}};return r&&n.length===0?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading suggestions..."})]}):i?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestions"}),S.jsx("p",{children:i.message||"An unexpected error occurred while fetching suggestions."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Feature Suggestions"}),S.jsx("button",{onClick:()=>e("/suggestions/new"),className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Add New Suggestion"})]}),n.length===0&&!r?S.jsx("p",{className:"text-gray-600 text-center py-8",children:"No suggestions found. Add one to get started!"}):S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content ID"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Link"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Is Ad?"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),S.jsx("th",{scope:"col",className:"relative px-6 py-3 text-center",children:"Actions"})]})}),S.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(o=>S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.id}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.contentId||"N/A"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.imgUrl&&S.jsx(a,{url:o.imgUrl})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.link?S.jsx("a",{href:o.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate max-w-[150px] block",children:o.link.length>30?o.link.substring(0,27)+"...":o.link}):"N/A"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.is_ads?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:o.is_ads?"Yes":"No"})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.created_at?pn(new Date(o.created_at),"MMM dd,yyyy HH:mm"):"N/A"}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[S.jsx("button",{onClick:()=>e(`/suggestions/details/${o.id}`),className:"text-blue-600 hover:text-blue-900 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors duration-200",title:"View Details",children:"View"}),S.jsx("button",{onClick:()=>e(`/suggestions/edit/${o.id}`),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded-md hover:bg-yellow-100 transition-colors duration-200",title:"Edit Suggestion",children:"Edit"}),S.jsx("button",{onClick:()=>s(o.id),className:"text-red-600 hover:text-red-900 px-2 py-1 rounded-md hover:bg-red-100 transition-colors duration-200",title:"Delete Suggestion",children:"Delete"})]})]},o.id)),r&&n.length>0&&S.jsx("tr",{children:S.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400 mr-3"}),"Loading more suggestions..."]})})})]})]})})]})},_0e=()=>{const{id:t}=fa(),e=rn(),n=an(),{selectedSuggestion:r,loading:i,error:a}=sn(o=>o.suggestions),s=({url:o})=>{const{isLoading:c}=ad(o);if(!o)return null;if(c)return S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})})};return F.useEffect(()=>{t&&n(D8(t))},[n,t]),i?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading suggestion details..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestion Details"}),S.jsx("p",{children:a.message||"An unexpected error occurred."}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Suggestions List"})]}):r?S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Suggestion Details"}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"ID:"}),S.jsx("span",{className:"text-gray-900",children:r.id})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Content ID:"}),S.jsx("span",{className:"text-gray-900",children:r.contentId||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Image URL:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.imgUrl?S.jsx("a",{href:r.imgUrl,target:"_blank",rel:"noopener noreferrer",children:r.imgUrl}):"N/A"})]}),r.imgUrl&&S.jsx(s,{url:r.imgUrl}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Link:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.link?S.jsx("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",children:r.link}):"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Is Ad?:"}),S.jsx("span",{className:`font-semibold ${r.is_ads?"text-purple-600":"text-gray-600"}`,children:r.is_ads?"Yes":"No"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),S.jsx("span",{className:"text-gray-900",children:r.created_at?pn(new Date(r.created_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Updated At:"}),S.jsx("span",{className:"text-gray-900",children:r.updated_at?pn(new Date(r.updated_at),"MMM dd, yyyy HH:mm"):"N/A"})]})]}),S.jsx("div",{className:"mt-8 flex justify-end space-x-3",children:S.jsx("button",{onClick:()=>e(`/suggestions/edit/${r.id}`),className:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Edit Suggestion"})})]}):S.jsxs("div",{className:"text-center p-6 text-gray-600",children:[S.jsxs("p",{children:["No suggestion found with ID: ",t,"."]}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Suggestions List"})]})},Zj=()=>{const{id:t}=fa(),e=rn(),n=an(),{selectedSuggestion:r,loading:i,error:a}=sn(T=>T.suggestions),s=({url:T})=>{const{isLoading:_}=ad(T);if(!T)return null;if(_)return S.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:S.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})})},o=!!t,[c,u]=F.useState({contentId:"",imgUrl:"",link:"",is_ads:!1}),[d,h]=F.useState({}),[p,y]=F.useState(!1);F.useEffect(()=>{o&&n(D8(t))},[n,t,o]),F.useEffect(()=>{o&&r&&r.id===parseInt(t)?u({contentId:r.contentId||"",imgUrl:r.imgUrl||"",link:r.link||"",is_ads:r.is_ads}):o||u({contentId:"",imgUrl:"",link:"",is_ads:!1})},[o,r,t]);const v=T=>{const{name:_,value:A,type:O,checked:R}=T.target;u(C=>({...C,[_]:O==="checkbox"?R:A}))},b=()=>{const T={};return c.contentId.trim()||(T.contentId="Content ID is required."),c.imgUrl.trim()?/^https?:\/\/.+/.test(c.imgUrl)||(T.imgUrl="Invalid Image URL format."):T.imgUrl="Image URL is required.",c.link.trim()?/^https?:\/\/.+/.test(c.link)||(T.link="Invalid Link URL format."):T.link="Link is required.",h(T),Object.keys(T).length===0},x=async T=>{if(T.preventDefault(),!!b()){y(!0);try{o?(await n(T0e(t,c)),alert("Suggestion updated successfully!")):(await n(E0e(c)),alert("Suggestion created successfully!")),e("/suggestions")}catch(_){const A=_.message||JSON.stringify(_);alert(`Operation failed: ${A}`),console.error("Form submission error:",_)}finally{y(!1)}}};return o&&i&&!r?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading suggestion for editing..."})]}):a&&o?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestion"}),S.jsx("p",{children:a.message||"An unexpected error occurred while fetching suggestion details."}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Suggestion List"})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:o?"Edit Suggestion":"Create New Suggestion"}),S.jsx("button",{onClick:()=>e("/suggestions"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("form",{onSubmit:x,className:"space-y-5",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"contentId",className:"block text-sm font-medium text-gray-700",children:"Content ID"}),S.jsx("input",{type:"text",id:"contentId",name:"contentId",value:c.contentId,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),d.contentId&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.contentId})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"imgUrl",className:"block text-sm font-medium text-gray-700",children:"Image URL"}),S.jsx("input",{type:"url",id:"imgUrl",name:"imgUrl",value:c.imgUrl,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),d.imgUrl&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.imgUrl}),c.imgUrl&&S.jsx(s,{url:c.imgUrl})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"link",className:"block text-sm font-medium text-gray-700",children:"Link URL"}),S.jsx("input",{type:"url",id:"link",name:"link",value:c.link,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),d.link&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.link})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{id:"is_ads",name:"is_ads",type:"checkbox",checked:c.is_ads,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),S.jsx("label",{htmlFor:"is_ads",className:"ml-2 block text-sm text-gray-900",children:"Is this an Ad?"})]}),S.jsx("div",{className:"flex justify-end space-x-3",children:S.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving...":o?"Update Suggestion":"Create Suggestion"})})]})]})},R0e=async(t=1,e=15)=>{var n,r;try{return(await Je.get("/contents/live-sport",{params:{page:t,per_page:e}})).data}catch(i){throw console.error("Error fetching live sports:",((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},O0e=async t=>{var e,n;try{return(await Je.get(`/contents/${t}`)).data.content}catch(r){throw console.error(`Error fetching live sport with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},C0e=async t=>{var e,n;try{return(await Je.post("/contents",t)).data}catch(r){throw console.error("Error creating live sport:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},L0e=async(t,e)=>{var n,r;try{return(await Je.put(`/contents/${t}`,e)).data}catch(i){throw console.error(`Error updating live sport with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},D0e=async t=>{var e,n;try{return await Je.delete(`/contents/${t}`),t}catch(r){throw console.error(`Error deleting live sport with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},$h=(t=1,e=15)=>async n=>{n({type:S$});try{const r=await R0e(t,e);n({type:E$,payload:r})}catch(r){n({type:T$,payload:r})}},I8=t=>async e=>{e({type:A$});try{const n=await O0e(t);e({type:w$,payload:n})}catch(n){e({type:_$,payload:n})}},I0e=t=>async e=>{e({type:R$});try{const n=await C0e(t);return e({type:O$,payload:n}),Promise.resolve(n)}catch(n){return e({type:C$,payload:n}),Promise.reject(n)}},P0e=(t,e)=>async n=>{n({type:L$});try{const r=await L0e(t,e);return n({type:D$,payload:r}),Promise.resolve(r)}catch(r){return n({type:I$,payload:r}),Promise.reject(r)}},N0e=t=>async e=>{e({type:P$});try{return await D0e(t),e({type:N$,payload:t}),Promise.resolve(t)}catch(n){return e({type:M$,payload:n}),Promise.reject(n)}},M0e=()=>{const t=an(),e=rn(),{livesports:n,pagination:r,loading:i,error:a}=sn(u=>u.livesports);F.useEffect(()=>{t($h(r.current_page,r.per_page))},[t,r.current_page,r.per_page]);const s=u=>{u>=1&&u<=r.last_page&&t($h(u,r.per_page))},o=u=>{t($h(1,parseInt(u.target.value,10)))},c=async(u,d)=>{if(window.confirm(`Are you sure you want to delete "${d}" (ID: ${u})? This action cannot be undone.`))try{await t(N0e(u)),alert("Live Sport content deleted successfully!"),t($h(r.current_page,r.per_page))}catch(h){alert(`Failed to delete content: ${h.message||JSON.stringify(h)}`),console.error("Delete failed:",h)}};return i&&n.length===0?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading live sports content..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Live Sports Content"}),S.jsx("p",{children:a.message||"An unexpected error occurred while fetching live sports content."}),S.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[S.jsxs("div",{className:"lg:flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Live Sports Content"}),S.jsxs("div",{className:"space-x-2 mt-3",children:[S.jsx("button",{onClick:()=>e("/livesports/new/live"),className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Add New Live TV"}),S.jsx("button",{onClick:()=>e("/livesports/new/sport"),className:"px-4 py-2 bg-purple-600 text-white rounded-md shadow-sm hover:bg-purple-700 transition duration-200",children:"Add New Sport Event"})]})]}),n.length===0&&!i?S.jsx("p",{className:"text-gray-600 text-center py-8",children:"No live sports content found."}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thumbnail"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content URL / Streams"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),S.jsx("th",{scope:"col",className:"relative px-6 py-3 text-center",children:"Actions"})]})}),S.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(u=>S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.id}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.title}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u.category==="Live"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:u.category})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.profileImg&&S.jsx("img",{src:u.profileImg,alt:"Thumbnail",className:"w-16 h-16 object-cover rounded-md",onError:d=>{}})}),S.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:u.content&&u.category==="Live"?S.jsx("a",{href:u.content,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:u.content.length>50?`${u.content.substring(0,47)}...`:u.content}):u.category==="Sport"&&u.files&&u.files.stream_list?S.jsx("ul",{className:"list-disc list-inside text-xs",children:u.files.stream_list.map((d,h)=>S.jsx("li",{className:"truncate",children:S.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:underline",children:[d.quality,":"," ",d.url.length>30?`${d.url.substring(0,27)}...`:d.url]})},h))}):"N/A"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.tags&&u.tags.length>0?u.tags.join(", "):"N/A"}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.created_at?pn(new Date(u.created_at),"MMM dd,yyyy HH:mm"):"N/A"}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[S.jsx("button",{onClick:()=>e(`/livesports/details/${u.id}`),className:"text-blue-600 hover:text-blue-900 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors duration-200",title:"View Details",children:"View"}),S.jsx("button",{onClick:()=>e(`/livesports/edit/${u.id}`),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded-md hover:bg-yellow-100 transition-colors duration-200",title:"Edit Content",children:"Edit"}),S.jsx("button",{onClick:()=>c(u.id,u.title),className:"text-red-600 hover:text-red-900 px-2 py-1 rounded-md hover:bg-red-100 transition-colors duration-200",title:"Delete Content",children:"Delete"})]})]},u.id)),i&&n.length>0&&S.jsx("tr",{children:S.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400 mr-3"}),"Loading more content..."]})})})]})]})}),S.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("label",{htmlFor:"perPage",className:"text-sm text-gray-700",children:"Show:"}),S.jsx("select",{id:"perPage",value:r.per_page,onChange:o,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm",children:[10,15,20,50].map(u=>S.jsx("option",{value:u,children:u},u))}),S.jsx("span",{className:"text-sm text-gray-700",children:"entries"})]}),S.jsxs("div",{className:"flex items-center space-x-1",children:[S.jsx("button",{onClick:()=>s(r.current_page-1),disabled:r.current_page===1,className:"px-3 py-1 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:r.last_page},(u,d)=>d+1).map(u=>S.jsx("button",{onClick:()=>s(u),className:`px-3 py-1 rounded-md ${r.current_page===u?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:u},u)),S.jsx("button",{onClick:()=>s(r.current_page+1),disabled:r.current_page===r.last_page,className:"px-3 py-1 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),S.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",r.current_page," of ",r.last_page," (Total"," ",r.total," items)"]})]})]})]})},Jj=()=>{const{id:t,type:e}=fa(),n=rn(),r=an(),{selectedLiveSport:i,loading:a,error:s}=sn(M=>M.livesports),o=!!t,c=e||(o&&i?i.category==="Live"?"live":"sport":"live"),u={title:"",profileImg:"",coverImg:"",content:"Long content here",tags:[],category:c==="live"?"Live":"Sport",duration:"unknow",isvip:!1,files:{trailer:{url:"https://telegram.org",quality:"",size:""},stream:[{url:"",quality:"",size:""}],download:[{url:"https://telegram.org",quality:"",size:""}]}},[d,h]=F.useState(u),[p,y]=F.useState({}),[v,b]=F.useState(!1),[x,T]=F.useState("");F.useEffect(()=>{o&&r(I8(t))},[r,t,o]),F.useEffect(()=>{o&&i&&i.id===parseInt(t)?(h({title:i.title||"",profileImg:i.profileImg||"",coverImg:i.coverImg||"",content:i.content||"",tags:i.tags||[],category:i.category||"Live",duration:i.duration||"unknow",isvip:i.isvip||!1,files:i.files||{stream:[]}}),T("")):o||h({...u,category:c==="live"?"Live":"Sport"})},[o,i,t,c]);const _=M=>{const{name:G,value:K,type:W,checked:Y}=M.target;h(j=>({...j,[G]:W==="checkbox"?Y:K}))},A=M=>{T(M.target.value)},O=()=>{x.trim()!==""&&!d.tags.includes(x.trim())&&(h(M=>({...M,tags:[...M.tags,x.trim()]})),T(""))},R=M=>{h(G=>({...G,tags:G.tags.filter(K=>K!==M)}))},C=(M,G,K)=>{const W=d.files.stream.map((Y,j)=>j===M?{...Y,[G]:K}:Y);h(Y=>({...Y,files:{...Y.files,stream:W}}))},L=()=>{h(M=>({...M,files:{...M.files,stream:[...M.files.stream,{quality:"",url:"",size:""}]}}))},P=M=>{h(G=>({...G,files:{...G.files,stream:G.files.stream.filter((K,W)=>W!==M)}}))},N=()=>{const M={};return d.title.trim()||(M.title="Title is required."),d.profileImg.trim()?/^https?:\/\/.+/.test(d.profileImg)||(M.profileImg="Invalid Profile Image URL."):M.profileImg="Profile Image URL is required.",d.coverImg.trim()?/^https?:\/\/.+/.test(d.coverImg)||(M.coverImg="Invalid Cover Image URL."):M.coverImg="Cover Image URL is required.",c==="live"?d.content.trim()?/^https?:\/\/.+\.m3u8/.test(d.content)||(M.content="Content URL must be a valid .m3u8 URL."):M.content="Content URL is required for Live TV.":c==="sport"&&(!d.files.stream||d.files.stream.length===0?M.stream="At least one stream is required for Sport events.":d.files.stream.forEach((G,K)=>{G.quality.trim()||(M[`stream_quality_${K}`]="Quality is required."),G.url.trim()?/^https?:\/\/.+/.test(G.url)||(M[`stream_url_${K}`]="Invalid URL format."):M[`stream_url_${K}`]="URL is required."})),y(M),Object.keys(M).length===0},k=async M=>{if(M.preventDefault(),!!N()){b(!0);try{const G={...d,category:d.category};c==="live"&&delete G.files,o?(await r(P0e(t,G)),alert("Live Sport content updated successfully!")):(await r(I0e(G)),alert("Live Sport content created successfully!")),n("/livesports")}catch(G){const K=G.message||JSON.stringify(G);alert(`Operation failed: ${K}`),console.error("Form submission error:",G)}finally{b(!1)}}};return o&&a&&!i?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading content for editing..."})]}):s&&o?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Content"}),S.jsx("p",{children:s.message||"An unexpected error occurred while fetching content details."}),S.jsx("button",{onClick:()=>n("/livesports"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Live Sports List"})]}):S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[o?"Edit":"Create New"," ",c==="live"?"Live TV":"Sport Event"]}),S.jsx("button",{onClick:()=>n("/livesports"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("form",{onSubmit:k,className:"space-y-5",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),S.jsx("input",{type:"text",id:"title",name:"title",value:d.title,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.title&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.title})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"profileImg",className:"block text-sm font-medium text-gray-700",children:"Profile Image URL (Thumbnail)"}),S.jsx("input",{type:"url",id:"profileImg",name:"profileImg",value:d.profileImg,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.profileImg&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.profileImg}),d.profileImg&&S.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preview:"}),S.jsx("img",{src:d.profileImg,alt:"Profile Img Preview",className:"max-w-full h-auto max-h-32 object-contain mx-auto rounded-md",onError:M=>{}})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"coverImg",className:"block text-sm font-medium text-gray-700",children:"Cover Image URL"}),S.jsx("input",{type:"url",id:"coverImg",name:"coverImg",value:d.coverImg,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.coverImg&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.coverImg}),d.coverImg&&S.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preview:"}),S.jsx("img",{src:d.coverImg,alt:"Cover Img Preview",className:"max-w-full h-auto max-h-32 object-contain mx-auto rounded-md",onError:M=>{}})]})]}),c==="live"&&S.jsxs("div",{children:[S.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Live Stream Content URL (.m3u8)"}),S.jsx("input",{type:"url",id:"content",name:"content",value:d.content,onChange:_,placeholder:"e.g., https://example.com/live/stream.m3u8",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.content&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.content})]}),c==="sport"&&S.jsxs("div",{className:"border border-gray-200 p-4 rounded-md",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Stream List for Sport Event"}),d.files.stream.map((M,G)=>S.jsxs("div",{className:"flex space-x-2 mb-3 items-end",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{htmlFor:`quality-${G}`,className:"block text-xs font-medium text-gray-700",children:"Quality"}),S.jsx("input",{type:"text",id:`quality-${G}`,value:M.quality,onChange:K=>C(G,"quality",K.target.value),placeholder:"e.g., SD, HD, FHD",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p[`stream_quality_${G}`]&&S.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`stream_quality_${G}`]})]}),S.jsxs("div",{className:"flex-2",children:[S.jsx("label",{htmlFor:`url-${G}`,className:"block text-xs font-medium text-gray-700",children:"Stream URL"}),S.jsx("input",{type:"url",id:`url-${G}`,value:M.url,onChange:K=>C(G,"url",K.target.value),placeholder:"e.g., https://example.com/sport/event.m3u8",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p[`stream_url_${G}`]&&S.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`stream_url_${G}`]})]}),S.jsx("button",{type:"button",onClick:()=>P(G),className:"p-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition duration-200",children:"Remove"})]},G)),S.jsx("button",{type:"button",onClick:L,className:"mt-2 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition duration-200",children:"Add Stream"}),p.stream&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.stream})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:"Tags (press Enter to add)"}),S.jsxs("div",{className:"flex items-center mt-1",children:[S.jsx("input",{type:"text",id:"tagInput",value:x,onChange:A,onKeyDown:M=>{M.key==="Enter"&&(M.preventDefault(),O())},placeholder:"e.g., football, premier league",className:"block w-full border border-gray-300 rounded-l-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),S.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-r-md hover:bg-gray-300 transition duration-200",children:"Add"})]}),S.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:d.tags.map(M=>S.jsxs("span",{className:"flex items-center bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[M,S.jsx("button",{type:"button",onClick:()=>R(M),className:"ml-1 text-blue-800 hover:text-blue-900",children:"×"})]},M))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700",children:"Duration (e.g., 1h 30m, unknown)"}),S.jsx("input",{type:"text",id:"duration",name:"duration",value:d.duration,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{id:"isvip",name:"isvip",type:"checkbox",checked:d.isvip,onChange:_,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),S.jsx("label",{htmlFor:"isvip",className:"ml-2 block text-sm text-gray-900",children:"Is VIP Content?"})]}),S.jsx("div",{className:"flex justify-end space-x-3",children:S.jsx("button",{type:"submit",disabled:v,className:"px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Saving...":o?"Update Content":"Create Content"})})]})]})},k0e=()=>{var s;const{id:t}=fa(),e=rn(),n=an(),{selectedLiveSport:r,loading:i,error:a}=sn(o=>o.livesports);return F.useEffect(()=>{t&&n(I8(t))},[n,t]),i?S.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),S.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading content details..."})]}):a?S.jsxs("div",{className:"text-center p-6 text-red-500",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Content Details"}),S.jsx("p",{children:a.message||"An unexpected error occurred."}),S.jsx("button",{onClick:()=>e("/livesports"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Live Sports List"})]}):r?S.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Live Sports Details"}),S.jsx("button",{onClick:()=>e("/livesports"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"← Back to List"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"ID:"}),S.jsx("span",{className:"text-gray-900",children:r.id})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Title:"}),S.jsx("span",{className:"text-gray-900",children:r.title||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Category:"}),S.jsx("span",{className:`font-semibold ${r.category==="Live"?"text-blue-600":"text-orange-600"}`,children:r.category||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Profile Image URL:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.profileImg?S.jsx("a",{href:r.profileImg,target:"_blank",rel:"noopener noreferrer",children:r.profileImg}):"N/A"})]}),r.profileImg&&S.jsx("div",{className:"text-center mt-2",children:S.jsx("img",{src:r.profileImg,alt:"Profile Image Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md border border-gray-200",onError:o=>{o.target.src="https://via.placeholder.com/300x200?text=Image+Not+Available"}})}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Cover Image URL:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.coverImg?S.jsx("a",{href:r.coverImg,target:"_blank",rel:"noopener noreferrer",children:r.coverImg}):"N/A"})]}),r.coverImg&&S.jsx("div",{className:"text-center mt-2",children:S.jsx("img",{src:r.coverImg,alt:"Cover Image Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md border border-gray-200",onError:o=>{o.target.src="https://via.placeholder.com/300x200?text=Image+Not+Available"}})}),r.category==="Live"&&S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Content URL:"}),S.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.content?S.jsx("a",{href:r.content,target:"_blank",rel:"noopener noreferrer",children:r.content}):"N/A"})]}),r.category==="Sport"&&((s=r.files)==null?void 0:s.stream_list)&&S.jsxs("div",{children:[S.jsx("span",{className:"font-semibold text-gray-700 block mb-2",children:"Stream List:"}),S.jsx("ul",{className:"list-disc list-inside space-y-1",children:r.files.stream_list.map((o,c)=>S.jsxs("li",{className:"text-gray-900 break-words",children:[S.jsxs("span",{className:"font-medium",children:[o.quality||"N/A",":"]})," ",S.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:o.url||"N/A"})]},c))})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Tags:"}),S.jsx("span",{className:"text-gray-900",children:r.tags&&r.tags.length>0?r.tags.join(", "):"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Duration:"}),S.jsx("span",{className:"text-gray-900",children:r.duration||"N/A"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Is VIP:"}),S.jsx("span",{className:`font-semibold ${r.isvip?"text-green-600":"text-red-600"}`,children:r.isvip?"Yes":"No"})]}),S.jsxs("div",{className:"flex justify-between border-b pb-2",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),S.jsx("span",{className:"text-gray-900",children:r.created_at?pn(new Date(r.created_at),"MMM dd,yyyy HH:mm"):"N/A"})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"font-semibold text-gray-700",children:"Updated At:"}),S.jsx("span",{className:"text-gray-900",children:r.updated_at?pn(new Date(r.updated_at),"MMM dd,yyyy HH:mm"):"N/A"})]})]}),S.jsx("div",{className:"mt-8 flex justify-end space-x-3",children:S.jsx("button",{onClick:()=>e(`/livesports/edit/${r.id}`),className:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Edit Content"})})]}):S.jsxs("div",{className:"text-center p-6 text-gray-600",children:[S.jsxs("p",{children:["No live sports content found with ID: ",t,"."]}),S.jsx("button",{onClick:()=>e("/livesports"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Live Sports List"})]})},j0e=async()=>{var t;try{return(await Je.get("/matches")).data}catch(e){throw((t=e.response)==null?void 0:t.data)||{message:"Failed to fetch matches."}}},U0e=async t=>{var e;try{return(await Je.get(`/matches/${t}/servers`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||{message:"Failed to fetch match details."}}},B0e=()=>async t=>{t({type:k$});try{const e=await j0e();t({type:j$,payload:e})}catch(e){t({type:U$,payload:e})}},F0e=t=>async e=>{e({type:B$});try{const n=await U0e(t);e({type:F$,payload:n})}catch(n){e({type:$$,payload:n})}},$0e=["live","upcoming","finished"],G0e=()=>{var c;const t=an(),e=rn(),{matches:n,loading:r,error:i}=sn(u=>u.sport),[a,s]=F.useState("live");F.useEffect(()=>{t(B0e())},[t]);const o=((c=n.football)==null?void 0:c[a])||[];return S.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 via-white to-gray-100 rounded-2xl shadow-xl max-w-full sm:max-w-6xl mx-auto",children:[S.jsx("h1",{className:"text-4xl font-extrabold text-blue-700 mb-8 text-center tracking-tight drop-shadow",children:"Football Matches"}),S.jsx("div",{className:"flex justify-center gap-3 mb-8",children:$0e.map(u=>S.jsx("button",{onClick:()=>s(u),className:`px-6 py-2 rounded-full text-base font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 ${a===u?"bg-blue-600 text-white scale-105 shadow-lg":"bg-white text-blue-700 border border-blue-200 hover:bg-blue-100"}`,children:u.charAt(0).toUpperCase()+u.slice(1)},u))}),r?S.jsxs("div",{className:"flex flex-col justify-center items-center h-40",children:[S.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"}),S.jsx("span",{className:"text-xl text-blue-700 font-semibold",children:"Loading matches..."})]}):i?S.jsx("div",{className:"text-center text-red-500 text-lg font-semibold py-8",children:i.message||"Failed to load matches."}):o.length===0?S.jsx("div",{className:"text-center text-gray-500 py-12 text-lg font-medium",children:"No matches found."}):S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((u,d)=>S.jsxs("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-shadow duration-300 flex flex-col border border-blue-100 overflow-hidden group",children:[S.jsxs("div",{className:"flex flex-row items-center justify-between p-4 sm:p-6 bg-gradient-to-r from-blue-50 via-white to-gray-50 gap-2 sm:gap-4 w-full overflow-x-auto",children:[S.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 min-w-0",children:[S.jsx("img",{src:u.home_team_logo,alt:u.home_team_name,className:"w-14 h-14 object-contain rounded-full border-2 border-blue-200 group-hover:border-blue-400 transition"}),S.jsx("span",{className:"font-bold text-gray-800 text-sm sm:text-base text-center overflow-hidden text-ellipsis whitespace-nowrap max-w-[100px] sm:max-w-[140px]",children:u.home_team_name})]}),S.jsx("span",{className:"text-base text-blue-500 font-bold mx-2 sm:mx-4 my-2 sm:my-0",children:"vs"}),S.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 min-w-0",children:[S.jsx("img",{src:u.away_team_logo,alt:u.away_team_name,className:"w-14 h-14 object-contain rounded-full border-2 border-blue-200 group-hover:border-blue-400 transition"}),S.jsx("span",{className:"font-bold text-gray-800 text-sm sm:text-base text-center overflow-hidden text-ellipsis whitespace-nowrap max-w-[100px] sm:max-w-[140px]",children:u.away_team_name})]})]}),S.jsxs("div",{className:"px-6 pb-6 flex flex-col gap-2",children:[S.jsx("span",{className:"text-sm text-blue-600 font-semibold tracking-wide",children:u.league_name}),S.jsx("span",{className:"text-xs text-gray-500 font-medium",children:(()=>{let h;return typeof u.match_time=="string"&&u.match_time.includes("MMT")?h=new Date(u.match_time.replace(" MMT","").replace(/-/g,"/")):h=new Date(u.match_time),LY(h)?`Today ${pn(h,"HH:mm")} MMT`:PY(h)?`Yesterday ${pn(h,"HH:mm")} MMT`:DY(h)?`Tomorrow ${pn(h,"HH:mm")} MMT`:`${pn(h,"yyyy-MM-dd HH:mm")} MMT`})()}),S.jsx("button",{onClick:()=>e(`/sport/match/${u.room_num}`),className:"mt-4 px-5 py-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition duration-200 text-base font-bold w-full group-hover:scale-105 group-hover:shadow-lg",children:"View Details"})]})]},d))})]})},xe=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},V0e=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=q0e},q0e=Number.MAX_SAFE_INTEGER||9007199254740991;let Te=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),re=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t}({}),D=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t}({});var He={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Se={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Xo{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class H0e{constructor(e,n,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Xo(e),this.fast_=new Xo(n),this.defaultTTFB_=i,this.ttfb_=new Xo(e)}update(e,n){const{slow_:r,fast_:i,ttfb_:a}=this;r.halfLife!==e&&(this.slow_=new Xo(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==n&&(this.fast_=new Xo(n,i.getEstimate(),i.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new Xo(e,a.getEstimate(),a.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,i=e/1e3,a=r/i;this.fast_.sample(i,a),this.slow_.sample(i,a)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function z0e(t,e,n){return(e=Y0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ut(){return ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ut.apply(null,arguments)}function eU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eU(Object(n),!0).forEach(function(r){z0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y0e(t){var e=K0e(t,"string");return typeof e=="symbol"?e:e+""}class ri{constructor(e,n){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=Va,this.debug=n.debug.bind(null,r),this.log=n.log.bind(null,r),this.warn=n.warn.bind(null,r),this.info=n.info.bind(null,r),this.error=n.error.bind(null,r)}}const Va=function(){},W0e={trace:Va,debug:Va,log:Va,warn:Va,info:Va,error:Va};function MA(){return ut({},W0e)}function X0e(t,e){const n=self.console[t];return n?n.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):Va}function tU(t,e,n){return e[t]?e[t].bind(e):X0e(t,n)}const kA=MA();function Q0e(t,e,n){const r=MA();if(typeof console=="object"&&t===!0||typeof t=="object"){const i=["debug","log","info","warn","error"];i.forEach(a=>{r[a]=tU(a,t,n)});try{r.log(`Debug logs enabled for "${e}" in hls.js version 1.6.7`)}catch{return MA()}i.forEach(a=>{kA[a]=tU(a,t)})}else ut(kA,r);return r}const Ze=kA;function Za(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Z0e(t){return typeof self<"u"&&t===self.ManagedMediaSource}function P8(t,e){const n=Object.keys(t),r=Object.keys(e),i=n.length,a=r.length;return!i||!a||i===a&&!n.some(s=>r.indexOf(s)===-1)}function fr(t,e=!1){if(typeof TextDecoder<"u"){const u=new TextDecoder("utf-8").decode(t);if(e){const d=u.indexOf("\0");return d!==-1?u.substring(0,d):u}return u.replace(/\0/g,"")}const n=t.length;let r,i,a,s="",o=0;for(;o<n;){if(r=t[o++],r===0&&e)return s;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:i=t[o++],s+=String.fromCharCode((r&31)<<6|i&63);break;case 14:i=t[o++],a=t[o++],s+=String.fromCharCode((r&15)<<12|(i&63)<<6|(a&63)<<0);break}}return s}const Ns={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}};function N8(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function J0e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SE={exports:{}},nU;function eye(){return nU||(nU=1,function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(c,u,d){if(d=d||{},c=c.trim(),u=u.trim(),!u){if(!d.alwaysNormalize)return c;var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var p=o.parseURL(u);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return d.alwaysNormalize?(p.path=o.normalizePath(p.path),o.buildURLFromParts(p)):u;var y=o.parseURL(c);if(!y)throw new Error("Error trying to parse base URL.");if(!y.netLoc&&y.path&&y.path[0]!=="/"){var v=i.exec(y.path);y.netLoc=v[1],y.path=v[2]}y.netLoc&&!y.path&&(y.path="/");var b={scheme:y.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(b.netLoc=y.netLoc,p.path[0]!=="/"))if(!p.path)b.path=y.path,p.params||(b.params=y.params,p.query||(b.query=y.query));else{var x=y.path,T=x.substring(0,x.lastIndexOf("/")+1)+p.path;b.path=o.normalizePath(T)}return b.path===null&&(b.path=d.alwaysNormalize?o.normalizePath(p.path):p.path),o.buildURLFromParts(b)},parseURL:function(c){var u=r.exec(c);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(a,"");c.length!==(c=c.replace(s,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}};t.exports=o})()}(SE)),SE.exports}var Ww=eye();class Xw{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var gt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class M8{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,nye(this,"stats")}setByteRange(e,n){const r=e.split("@",2);let i;r.length===1?i=(n==null?void 0:n.byteRangeEndOffset)||0:i=parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[gt.AUDIO]:null,[gt.VIDEO]:null,[gt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Xw),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Ww.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[gt.AUDIO]=null,e[gt.VIDEO]=null,e[gt.AUDIOVIDEO]=null}}function Kt(t){return t.sn!=="initSegment"}class EE extends M8{constructor(e,n){super(n),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],n=this.byteRange[1];if(xe(e)&&xe(n))return n-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=xe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!xe(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Kt(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,r,i,a,s=!1){const{elementaryStreams:o}=this,c=o[e];if(!c){o[e]={startPTS:n,endPTS:r,startDTS:i,endDTS:a,partial:s};return}c.startPTS=Math.min(c.startPTS,n),c.endPTS=Math.max(c.endPTS,r),c.startDTS=Math.min(c.startDTS,i),c.endDTS=Math.max(c.endDTS,a)}}class tye extends M8{constructor(e,n,r,i,a){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=i;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function k8(t,e){const n=Object.getPrototypeOf(t);if(n){const r=Object.getOwnPropertyDescriptor(n,e);return r||k8(n,e)}}function nye(t,e){const n=k8(t,e);n&&(n.enumerable=!0,Object.defineProperty(t,e,n))}const rU=Math.pow(2,32)-1,rye=[].push,j8={video:1,audio:2,id3:3,text:4};function hn(t){return String.fromCharCode.apply(null,t)}function U8(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function Ne(t,e){const n=B8(t,e);return n<0?4294967296+n:n}function iU(t,e){let n=Ne(t,e);return n*=Math.pow(2,32),n+=Ne(t,e+4),n}function B8(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function iye(t){const e=t.byteLength;for(let n=0;n<e;){const r=Ne(t,n);if(r>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=r>1?n+r:e}return!1}function Ve(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let i=0;i<r;){const a=Ne(t,i),s=hn(t.subarray(i+4,i+8)),o=a>1?i+a:r;if(s===e[0])if(e.length===1)n.push(t.subarray(i+8,o));else{const c=Ve(t.subarray(i+8,o),e.slice(1));c.length&&rye.apply(n,c)}i=o}return n}function aye(t){const e=[],n=t[0];let r=8;const i=Ne(t,r);r+=4;let a=0,s=0;n===0?(a=Ne(t,r),s=Ne(t,r+4),r+=8):(a=iU(t,r),s=iU(t,r+8),r+=16),r+=2;let o=t.length+s;const c=U8(t,r);r+=2;for(let u=0;u<c;u++){let d=r;const h=Ne(t,d);d+=4;const p=h&2147483647;if((h&2147483648)>>>31===1)return Ze.warn("SIDX has hierarchical references (not supported)"),null;const v=Ne(t,d);d+=4,e.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/i,start:o,end:o+p-1}}),o+=p,d+=4,r=d}return{earliestPresentationTime:a,timescale:i,version:n,referencesCount:c,references:e}}function F8(t){const e=[],n=Ve(t,["moov","trak"]);for(let i=0;i<n.length;i++){const a=n[i],s=Ve(a,["tkhd"])[0];if(s){let o=s[0];const c=Ne(s,o===0?12:20),u=Ve(a,["mdia","mdhd"])[0];if(u){o=u[0];const d=Ne(u,o===0?12:20),h=Ve(a,["mdia","hdlr"])[0];if(h){const p=hn(h.subarray(8,12)),y={soun:gt.AUDIO,vide:gt.VIDEO}[p],v=Ve(a,["mdia","minf","stbl","stsd"])[0],b=sye(v);y?(e[c]={timescale:d,type:y,stsd:b},e[y]=ht({timescale:d,id:c},b)):e[c]={timescale:d,type:p,stsd:b}}}}}return Ve(t,["moov","mvex","trex"]).forEach(i=>{const a=Ne(i,4),s=e[a];s&&(s.default={duration:Ne(i,12),flags:Ne(i,20)})}),e}function sye(t){const e=t.subarray(8),n=e.subarray(86),r=hn(e.subarray(4,8));let i=r,a;const s=r==="enca"||r==="encv";if(s){const u=Ve(e,[r])[0].subarray(r==="enca"?28:78);Ve(u,["sinf"]).forEach(h=>{const p=Ve(h,["schm"])[0];if(p){const y=hn(p.subarray(4,8));if(y==="cbcs"||y==="cenc"){const v=Ve(h,["frma"])[0];v&&(i=hn(v))}}})}const o=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const c=Ve(n,["avcC"])[0];c&&c.length>3&&(i+="."+Vh(c[1])+Vh(c[2])+Vh(c[3]),a=Gh(o==="avc1"?"dva1":"dvav",n));break}case"mp4a":{const c=Ve(e,[r])[0],u=Ve(c.subarray(28),["esds"])[0];if(u&&u.length>7){let d=4;if(u[d++]!==3)break;d=TE(u,d),d+=2;const h=u[d++];if(h&128&&(d+=2),h&64&&(d+=u[d++]),u[d++]!==4)break;d=TE(u,d);const p=u[d++];if(p===64)i+="."+Vh(p);else break;if(d+=12,u[d++]!==5)break;d=TE(u,d);const y=u[d++];let v=(y&248)>>3;v===31&&(v+=1+((y&7)<<3)+((u[d]&224)>>5)),i+="."+v}break}case"hvc1":case"hev1":{const c=Ve(n,["hvcC"])[0];if(c&&c.length>12){const u=c[1],d=["","A","B","C"][u>>6],h=u&31,p=Ne(c,2),y=(u&32)>>5?"H":"L",v=c[12],b=c.subarray(6,12);i+="."+d+h,i+="."+oye(p).toString(16).toUpperCase(),i+="."+y+v;let x="";for(let T=b.length;T--;){const _=b[T];(_||x)&&(x="."+_.toString(16).toUpperCase()+x)}i+=x}a=Gh(o=="hev1"?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=Gh(i,n)||i;break}case"vp09":{const c=Ve(n,["vpcC"])[0];if(c&&c.length>6){const u=c[4],d=c[5],h=c[6]>>4&15;i+="."+di(u)+"."+di(d)+"."+di(h)}break}case"av01":{const c=Ve(n,["av1C"])[0];if(c&&c.length>2){const u=c[1]>>>5,d=c[1]&31,h=c[2]>>>7?"H":"M",p=(c[2]&64)>>6,y=(c[2]&32)>>5,v=u===2&&p?y?12:10:p?10:8,b=(c[2]&16)>>4,x=(c[2]&8)>>3,T=(c[2]&4)>>2,_=c[2]&3;i+="."+u+"."+di(d)+h+"."+di(v)+"."+b+"."+x+T+_+"."+di(1)+"."+di(1)+"."+di(1)+"."+0,a=Gh("dav1",n)}break}}return{codec:i,encrypted:s,supplemental:a}}function Gh(t,e){const n=Ve(e,["dvvC"]),r=n.length?n[0]:Ve(e,["dvcC"])[0];if(r){const i=r[2]>>1&127,a=r[2]<<5&32|r[3]>>3&31;return t+"."+di(i)+"."+di(a)}}function oye(t){let e=0;for(let n=0;n<32;n++)e|=(t>>n&1)<<31-n;return e>>>0}function TE(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function Vh(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function di(t){return(t<10?"0":"")+t}function lye(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&Ve(t,["moov","trak"]).forEach(i=>{const s=Ve(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=Ve(s,["enca"]);const c=o.length>0;c||(o=Ve(s,["encv"])),o.forEach(u=>{const d=c?u.subarray(28):u.subarray(78);Ve(d,["sinf"]).forEach(p=>{const y=uye(p);if(y){const v=y.subarray(8,24);v.some(b=>b!==0)||(Ze.log(`[eme] Patching keyId in 'enc${c?"a":"v"}>sinf>>tenc' box: ${Ns.hexDump(v)} -> ${Ns.hexDump(n)}`),y.set(n,8))}})})}),t}function uye(t){const e=Ve(t,["schm"])[0];if(e){const n=hn(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return Ve(t,["schi","tenc"])[0]}return null}function cye(t,e,n){const r={},i=Ve(t,["moof","traf"]);for(let a=0;a<i.length;a++){const s=i[a],o=Ve(s,["tfhd"])[0],c=Ne(o,4),u=e[c];if(!u)continue;const d=r[c]||(r[c]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type}),h=Ve(s,["tfdt"])[0];if(h){const A=h[0];let O=Ne(h,4);A===1&&(O===rU?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(O*=rU+1,O+=Ne(h,8))),xe(O)&&(!xe(d.start)||O<d.start)&&(d.start=O)}const p=u.default,y=Ne(o,0)|(p==null?void 0:p.flags);let v=(p==null?void 0:p.duration)||0;y&8&&(y&2?v=Ne(o,12):v=Ne(o,8));const b=Ve(s,["trun"]);let x=d.start||0,T=0,_=v;for(let A=0;A<b.length;A++){const O=b[A],R=Ne(O,4),C=d.sampleCount;d.sampleCount+=R;const L=O[3]&1,P=O[3]&4,N=O[2]&1,k=O[2]&2,M=O[2]&4,G=O[2]&8;let K=8,W=R;for(L&&(K+=4),P&&R&&(!(O[K+1]&1)&&d.keyFrameIndex===void 0&&(d.keyFrameIndex=C),K+=4,N?(_=Ne(O,K),K+=4):_=v,k&&(K+=4),G&&(K+=4),x+=_,T+=_,W--);W--;)N?(_=Ne(O,K),K+=4):_=v,k&&(K+=4),M&&(O[K+1]&1||d.keyFrameIndex===void 0&&(d.keyFrameIndex=d.sampleCount-(W+1),d.keyFrameStart=x),K+=4),G&&(K+=4),x+=_,T+=_;!T&&v&&(T+=v*R)}d.duration+=T}if(!Object.keys(r).some(a=>r[a].duration)){let a=1/0,s=0;const o=Ve(t,["sidx"]);for(let c=0;c<o.length;c++){const u=aye(o[c]);if(u!=null&&u.references){a=Math.min(a,u.earliestPresentationTime/u.timescale);const d=u.references.reduce((h,p)=>h+p.info.duration||0,0);s=Math.max(s,d+u.earliestPresentationTime/u.timescale)}}s&&xe(s)&&Object.keys(r).forEach(c=>{r[c].duration||(r[c].duration=s*r[c].timescale-r[c].start)})}return r}function fye(t){const e={valid:null,remainder:null},n=Ve(t,["moof"]);if(n.length<2)return e.remainder=t,e;const r=n[n.length-1];return e.valid=t.slice(0,r.byteOffset-8),e.remainder=t.slice(r.byteOffset-8),e}function jr(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function aU(t,e){const n=[],r=e.samples,i=e.timescale,a=e.id;let s=!1;return Ve(r,["moof"]).map(c=>{const u=c.byteOffset-8;Ve(c,["traf"]).map(h=>{const p=Ve(h,["tfdt"]).map(y=>{const v=y[0];let b=Ne(y,4);return v===1&&(b*=Math.pow(2,32),b+=Ne(y,8)),b/i})[0];return p!==void 0&&(t=p),Ve(h,["tfhd"]).map(y=>{const v=Ne(y,4),b=Ne(y,0)&16777215,x=(b&1)!==0,T=(b&2)!==0,_=(b&8)!==0;let A=0;const O=(b&16)!==0;let R=0;const C=(b&32)!==0;let L=8;v===a&&(x&&(L+=8),T&&(L+=4),_&&(A=Ne(y,L),L+=4),O&&(R=Ne(y,L),L+=4),C&&(L+=4),e.type==="video"&&(s=Ig(e.codec)),Ve(h,["trun"]).map(P=>{const N=P[0],k=Ne(P,0)&16777215,M=(k&1)!==0;let G=0;const K=(k&4)!==0,W=(k&256)!==0;let Y=0;const j=(k&512)!==0;let $=0;const q=(k&1024)!==0,Z=(k&2048)!==0;let B=0;const V=Ne(P,4);let H=8;M&&(G=Ne(P,H),H+=4),K&&(H+=4);let te=G+u;for(let ce=0;ce<V;ce++){if(W?(Y=Ne(P,H),H+=4):Y=A,j?($=Ne(P,H),H+=4):$=R,q&&(H+=4),Z&&(N===0?B=Ne(P,H):B=B8(P,H),H+=4),e.type===gt.VIDEO){let ye=0;for(;ye<$;){const ge=Ne(r,te);if(te+=4,dye(s,r[te])){const Me=r.subarray(te,te+ge);Qw(Me,s?2:1,t+B/i,n)}te+=ge,ye+=ge+4}}t+=Y/i}}))})})}),n}function Ig(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function dye(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function Qw(t,e,n,r){const i=$8(t);let a=0;a+=e;let s=0,o=0,c=0;for(;a<i.length;){s=0;do{if(a>=i.length)break;c=i[a++],s+=c}while(c===255);o=0;do{if(a>=i.length)break;c=i[a++],o+=c}while(c===255);const u=i.length-a;let d=a;if(o<u)a+=o;else if(o>u){Ze.error(`Malformed SEI payload. ${o} is too small, only ${u} bytes left to parse.`);break}if(s===4){if(i[d++]===181){const p=U8(i,d);if(d+=2,p===49){const y=Ne(i,d);if(d+=4,y===1195456820){const v=i[d++];if(v===3){const b=i[d++],x=31&b,T=64&b,_=T?2+x*3:0,A=new Uint8Array(_);if(T){A[0]=b;for(let O=1;O<_;O++)A[O]=i[d++]}r.push({type:v,payloadType:s,pts:n,bytes:A})}}}}}else if(s===5&&o>16){const h=[];for(let v=0;v<16;v++){const b=i[d++].toString(16);h.push(b.length==1?"0"+b:b),(v===3||v===5||v===7||v===9)&&h.push("-")}const p=o-16,y=new Uint8Array(p);for(let v=0;v<p;v++)y[v]=i[d++];r.push({payloadType:s,pts:n,uuid:h.join(""),userData:fr(y),userDataBytes:y})}}}function $8(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const i=e-n.length,a=new Uint8Array(i);let s=0;for(r=0;r<i;s++,r++)s===n[0]&&(s++,n.shift()),a[r]=t[s];return a}function hye(t){const e=t[0];let n="",r="",i=0,a=0,s=0,o=0,c=0,u=0;if(e===0){for(;hn(t.subarray(u,u+1))!=="\0";)n+=hn(t.subarray(u,u+1)),u+=1;for(n+=hn(t.subarray(u,u+1)),u+=1;hn(t.subarray(u,u+1))!=="\0";)r+=hn(t.subarray(u,u+1)),u+=1;r+=hn(t.subarray(u,u+1)),u+=1,i=Ne(t,12),a=Ne(t,16),o=Ne(t,20),c=Ne(t,24),u=28}else if(e===1){u+=4,i=Ne(t,u),u+=4;const h=Ne(t,u);u+=4;const p=Ne(t,u);for(u+=4,s=2**32*h+p,V0e(s)||(s=Number.MAX_SAFE_INTEGER,Ze.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Ne(t,u),u+=4,c=Ne(t,u),u+=4;hn(t.subarray(u,u+1))!=="\0";)n+=hn(t.subarray(u,u+1)),u+=1;for(n+=hn(t.subarray(u,u+1)),u+=1;hn(t.subarray(u,u+1))!=="\0";)r+=hn(t.subarray(u,u+1)),u+=1;r+=hn(t.subarray(u,u+1)),u+=1}const d=t.subarray(u,t.byteLength);return{schemeIdUri:n,value:r,timeScale:i,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:c,payload:d}}function mye(t,...e){const n=e.length;let r=8,i=n;for(;i--;)r+=e[i].byteLength;const a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=r&255,a.set(t,4),i=0,r=8;i<n;i++)a.set(e[i],r),r+=e[i].byteLength;return a}function pye(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,i;r=0,i=new Uint8Array;let a;r>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;const s=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(s.buffer).setUint32(0,n.byteLength,!1),mye([112,115,115,104],new Uint8Array([r,0,0,0]),t,a,i,s,n||new Uint8Array)}const G8=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),$l={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Zw(t,e){const n=$l[e];return!!n&&!!n[t.slice(0,4)]}function jA(t,e,n=!0){return!t.split(",").some(r=>!Jw(r,e,n))}function Jw(t,e,n=!0){var r;const i=Za(n);return(r=i==null?void 0:i.isTypeSupported(Df(t,e)))!=null?r:!1}function Df(t,e){return`${e}/mp4;codecs=${t}`}function sU(t){if(t){const e=t.substring(0,4);return $l.video[e]}return 2}function Cp(t){const e=G8();return t.split(",").reduce((n,r)=>{const a=e&&Ig(r)?9:$l.video[r];return a?(a*2+n)/(n?3:2):($l.audio[r]+n)/(n?2:1)},0)}const AE={};function gye(t,e=!0){if(AE[t])return AE[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let i=0;i<n.length;i++){var r;if(Jw(n[i],"audio",e))return AE[t]=n[i],n[i];if(n[i]==="mp3"&&(r=Za(e))!=null&&r.isTypeSupported("audio/mpeg"))return""}return t}const yye=/flac|opus|mp4a\.40\.34/i;function Lp(t,e=!0){return t.replace(yye,n=>gye(n.toLowerCase(),e))}function vye(t,e){const n=[];if(t){const r=t.split(",");for(let i=0;i<r.length;i++)Zw(r[i],"video")||n.push(r[i])}return e&&n.push(e),n.join(",")}function fm(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(oU(t,"audio")||oU(t,"video")))return t;if(e){const n=e.split(",");if(n.length>1){if(t){for(let r=n.length;r--;)if(n[r].substring(0,4)===t.substring(0,4))return n[r]}return n[0]}}return e||t}function oU(t,e){return Zw(t,e)&&Jw(t,e)}function xye(t){const e=t.split(",");for(let n=0;n<e.length;n++){const r=e[n].split(".");r.length>2&&r[0]==="avc1"&&(e[n]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return e.join(",")}function bye(t){if(t.startsWith("av01.")){const e=t.split("."),n=["0","111","01","01","01","0"];for(let r=e.length;r>4&&r<10;r++)e[r]=n[r-4];return e.join(".")}return t}function lU(t){const e=Za(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function UA(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const V8={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function q8(t,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:t}}function Sye(t,e,n,r,i,a){const s=t.videoCodec,o=t.audioCodec?t.audioGroups:null,c=a==null?void 0:a.audioCodec,u=a==null?void 0:a.channels,d=u?parseInt(u):c?1/0:2;let h=null;if(o!=null&&o.length)try{o.length===1&&o[0]?h=e.groups[o[0]].channels:h=o.reduce((p,y)=>{if(y){const v=e.groups[y];if(!v)throw new Error(`Audio track group ${y} not found`);Object.keys(v.channels).forEach(b=>{p[b]=(p[b]||0)+v.channels[b]})}return p},{2:0})}catch{return!0}return s!==void 0&&(s.split(",").some(p=>Ig(p))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(r,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(i,8e6))||!!h&&xe(d)&&Object.keys(h).some(p=>parseInt(p)>d)}function H8(t,e,n,r={}){const i=t.videoCodec;if(!i&&!t.audioCodec||!n)return Promise.resolve(V8);const a=[],s=Eye(t),o=s.length,c=Tye(t,e,o>0),u=c.length;for(let d=o||1*u||1;d--;){const h={type:"media-source"};if(o&&(h.video=s[d%o]),u){h.audio=c[d%u];const p=h.audio.bitrate;h.video&&p&&(h.video.bitrate-=p)}a.push(h)}if(i){const d=navigator.userAgent;if(i.split(",").some(h=>Ig(h))&&G8())return Promise.resolve(q8(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${d})`),a))}return Promise.all(a.map(d=>{const h=wye(d);return r[h]||(r[h]=n.decodingInfo(d))})).then(d=>({supported:!d.some(h=>!h.supported),configurations:a,decodingInfoResults:d})).catch(d=>({supported:!1,configurations:a,decodingInfoResults:[],error:d}))}function Eye(t){var e;const n=(e=t.videoCodec)==null?void 0:e.split(","),r=z8(t),i=t.width||640,a=t.height||480,s=t.frameRate||30,o=t.videoRange.toLowerCase();return n?n.map(c=>{const u={contentType:Df(bye(c),"video"),width:i,height:a,bitrate:r,framerate:s};return o!=="sdr"&&(u.transferFunction=o),u}):[]}function Tye(t,e,n){var r;const i=(r=t.audioCodec)==null?void 0:r.split(","),a=z8(t);return i&&t.audioGroups?t.audioGroups.reduce((s,o)=>{var c;const u=o?(c=e.groups[o])==null?void 0:c.tracks:null;return u?u.reduce((d,h)=>{if(h.groupId===o){const p=parseFloat(h.channels||"");i.forEach(y=>{const v={contentType:Df(y,"audio"),bitrate:n?Aye(y,a):a};p&&(v.channels=""+p),d.push(v)})}return d},s):s},[]):[]}function Aye(t,e){if(e<=1)return 1;let n=128e3;return t==="ec-3"?n=768e3:t==="ac-3"&&(n=64e4),Math.min(e/2,n)}function z8(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function wye(t){let e="";const{audio:n,video:r}=t;if(r){const i=UA(r.contentType);e+=`${i}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(n){const i=UA(n.contentType);e+=`${r?"_":""}${i}_c${n.channels}`}return e}const BA=["NONE","TYPE-0","TYPE-1",null];function _ye(t){return BA.indexOf(t)>-1}const Dp=["SDR","PQ","HLG"];function Rye(t){return!!t&&Dp.indexOf(t)>-1}var dm={No:"",Yes:"YES",v2:"v2"};function uU(t){const{canSkipUntil:e,canSkipDateRanges:n,age:r}=t,i=r<e/2;return e&&i?n?dm.v2:dm.Yes:dm.No}class cU{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class If{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in e){var n;this.supplemental=e.supplemental;const r=(n=e.supplemental)==null?void 0:n.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return fU(this._audioGroups,e)}hasSubtitleGroup(e){return fU(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function fU(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function Oye(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function Cye(t,e){let n=!1,r=[];if(t&&(n=t!=="SDR",r=[t]),e){r=e.allowedVideoRanges||Dp.slice(0);const i=r.join("")!=="SDR"&&!e.videoCodec;n=e.preferHDR!==void 0?e.preferHDR:i&&Oye(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const Lye=t=>{const e=new WeakSet;return(n,r)=>{if(t&&(r=t(n,r)),typeof r=="object"&&r!==null){if(e.has(r))return;e.add(r)}return r}},Tt=(t,e)=>JSON.stringify(t,Lye(e));function Dye(t,e,n,r,i){const a=Object.keys(t),s=r==null?void 0:r.channels,o=r==null?void 0:r.audioCodec,c=i==null?void 0:i.videoCodec,u=s&&parseInt(s)===2;let d=!1,h=!1,p=1/0,y=1/0,v=1/0,b=1/0,x=0,T=[];const{preferHDR:_,allowedVideoRanges:A}=Cye(e,i);for(let P=a.length;P--;){const N=t[a[P]];d||(d=N.channels[2]>0),p=Math.min(p,N.minHeight),y=Math.min(y,N.minFramerate),v=Math.min(v,N.minBitrate),A.filter(M=>N.videoRanges[M]>0).length>0&&(h=!0)}p=xe(p)?p:0,y=xe(y)?y:0;const O=Math.max(1080,p),R=Math.max(30,y);v=xe(v)?v:n,n=Math.max(v,n),h||(e=void 0);const C=a.length>1;return{codecSet:a.reduce((P,N)=>{const k=t[N];if(N===P)return P;if(T=h?A.filter(M=>k.videoRanges[M]>0):[],C){if(k.minBitrate>n)return fi(N,`min bitrate of ${k.minBitrate} > current estimate of ${n}`),P;if(!k.hasDefaultAudio)return fi(N,"no renditions with default or auto-select sound found"),P;if(o&&N.indexOf(o.substring(0,4))%5!==0)return fi(N,`audio codec preference "${o}" not found`),P;if(s&&!u){if(!k.channels[s])return fi(N,`no renditions with ${s} channel sound found (channels options: ${Object.keys(k.channels)})`),P}else if((!o||u)&&d&&k.channels[2]===0)return fi(N,"no renditions with stereo sound found"),P;if(k.minHeight>O)return fi(N,`min resolution of ${k.minHeight} > maximum of ${O}`),P;if(k.minFramerate>R)return fi(N,`min framerate of ${k.minFramerate} > maximum of ${R}`),P;if(!T.some(M=>k.videoRanges[M]>0))return fi(N,`no variants with VIDEO-RANGE of ${Tt(T)} found`),P;if(c&&N.indexOf(c.substring(0,4))%5!==0)return fi(N,`video codec preference "${c}" not found`),P;if(k.maxScore<x)return fi(N,`max score of ${k.maxScore} < selected max of ${x}`),P}return P&&(Cp(N)>=Cp(P)||k.fragmentError>t[P].fragmentError)?P:(b=k.minIndex,x=k.maxScore,N)},void 0),videoRanges:T,preferHDR:_,minFramerate:y,minBitrate:v,minIndex:b}}function fi(t,e){Ze.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function K8(t){return t.reduce((e,n)=>{let r=e.groups[n.groupId];r||(r=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const i=n.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Iye(t,e,n,r){return t.slice(n,r+1).reduce((i,a,s)=>{if(!a.codecSet)return i;const o=a.audioGroups;let c=i[a.codecSet];c||(i[a.codecSet]=c={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:s,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),c.minBitrate=Math.min(c.minBitrate,a.bitrate);const u=Math.min(a.height,a.width);return c.minHeight=Math.min(c.minHeight,u),c.minFramerate=Math.min(c.minFramerate,a.frameRate),c.minIndex=Math.min(c.minIndex,s),c.maxScore=Math.max(c.maxScore,a.score),c.fragmentError+=a.fragmentError,c.videoRanges[a.videoRange]=(c.videoRanges[a.videoRange]||0)+1,o&&o.forEach(d=>{if(!d)return;const h=e.groups[d];h&&(c.hasDefaultAudio=c.hasDefaultAudio||e.hasDefaultAudio?h.hasDefault:h.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(h.channels).forEach(p=>{c.channels[p]=(c.channels[p]||0)+h.channels[p]}))}),i},{})}function dU(t){if(!t)return t;const{lang:e,assocLang:n,characteristics:r,channels:i,audioCodec:a}=t;return{lang:e,assocLang:n,characteristics:r,channels:i,audioCodec:a}}function yi(t,e,n){if("attrs"in t){const r=e.indexOf(t);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(Ks(t,i,n))return r}return-1}function Ks(t,e,n){const{groupId:r,name:i,lang:a,assocLang:s,default:o}=t,c=t.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(a===void 0||Pye(a,e.lang))&&(a===void 0||e.assocLang===s)&&(o===void 0||e.default===o)&&(c===void 0||e.forced===c)&&(!("characteristics"in t)||Nye(t.characteristics||"",e.characteristics))&&(n===void 0||n(t,e))}function Pye(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function Nye(t,e=""){const n=t.split(","),r=e.split(",");return n.length===r.length&&!n.some(i=>r.indexOf(i)===-1)}function Ps(t,e){const{audioCodec:n,channels:r}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function Mye(t,e,n,r,i){const a=e[r],o=e.reduce((p,y,v)=>{const b=y.uri;return(p[b]||(p[b]=[])).push(v),p},{})[a.uri];o.length>1&&(r=Math.max.apply(Math,o));const c=a.videoRange,u=a.frameRate,d=a.codecSet.substring(0,4),h=hU(e,r,p=>{if(p.videoRange!==c||p.frameRate!==u||p.codecSet.substring(0,4)!==d)return!1;const y=p.audioGroups,v=n.filter(b=>!y||y.indexOf(b.groupId)!==-1);return yi(t,v,i)>-1});return h>-1?h:hU(e,r,p=>{const y=p.audioGroups,v=n.filter(b=>!y||y.indexOf(b.groupId)!==-1);return yi(t,v,i)>-1})}function hU(t,e,n){for(let r=e;r>-1;r--)if(n(t[r]))return r;for(let r=e+1;r<t.length;r++)if(n(t[r]))return r;return-1}function Ip(t,e){var n;return!!t&&t!==((n=e.loadLevelObj)==null?void 0:n.uri)}class kye extends ri{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=n=>{var r;const{fragCurrent:i,partCurrent:a,hls:s}=this,{autoLevelEnabled:o,media:c}=s;if(!i||!c)return;const u=performance.now(),d=a?a.stats:i.stats,h=a?a.duration:i.duration,p=u-d.loading.start,y=s.minAutoLevel,v=i.level,b=this._nextAutoLevel;if(d.aborted||d.loaded&&d.loaded===d.total||v<=y){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const x=b>-1&&b!==v,T=!!n||x;if(!T&&(c.paused||!c.playbackRate||!c.readyState))return;const _=s.mainForwardBufferInfo;if(!T&&_===null)return;const A=this.bwEstimator.getEstimateTTFB(),O=Math.abs(c.playbackRate);if(p<=Math.max(A,1e3*(h/(O*2))))return;const R=_?_.len/O:0,C=d.loading.first?d.loading.first-d.loading.start:-1,L=d.loaded&&C>-1,P=this.getBwEstimate(),N=s.levels,k=N[v],M=Math.max(d.loaded,Math.round(h*(i.bitrate||k.averageBitrate)/8));let G=L?p-C:p;G<1&&L&&(G=Math.min(p,d.loaded*8/P));const K=L?d.loaded*1e3/G:0,W=A/1e3,Y=K?(M-d.loaded)/K:M*8/P+W;if(Y<=R)return;const j=K?K*8:P,$=((r=(n==null?void 0:n.details)||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,q=this.hls.config.abrBandWidthUpFactor;let Z=Number.POSITIVE_INFINITY,B;for(B=v-1;B>y;B--){const ce=N[B].maxBitrate,ye=!N[B].details||$;if(Z=this.getTimeToLoadFrag(W,j,h*ce,ye),Z<Math.min(R,h+W))break}if(Z>=Y||Z>h*10)return;L?this.bwEstimator.sample(p-Math.min(A,C),d.loaded):this.bwEstimator.sampleTTFB(p);const V=N[B].maxBitrate;this.getBwEstimate()*q>V&&this.resetEstimator(V);const H=this.findBestLevel(V,y,B,0,R,1,1);H>-1&&(B=H),this.warn(`Fragment ${i.sn}${a?" part "+a.index:""} of level ${v} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${R.toFixed(3)} s
      Estimated load time for current fragment: ${Y.toFixed(3)} s
      Estimated load time for down switch fragment: ${Z.toFixed(3)} s
      TTFB estimate: ${C|0} ms
      Current BW estimate: ${xe(P)?P|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${B} @ ${V|0} bps`),s.nextLoadLevel=s.nextAutoLevel=B,this.clearTimer();const te=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===B&&B>0){const ce=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${B>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${ce.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,B>y){let ye=this.findBestLevel(this.hls.levels[y].bitrate,y,B,0,ce,1,1);ye===-1&&(ye=y),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ye,this.resetEstimator(this.hls.levels[ye].bitrate)}}};x||Y>Z*2?te():this.timer=self.setInterval(te,Z*1e3),s.trigger(D.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:a,stats:d})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new H0e(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(D.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=n.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case re.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:i,partCurrent:a}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const s=performance.now(),o=a?a.stats:r.stats,c=s-o.loading.start,u=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&u>-1){const h=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(c-Math.min(h,u),o.loaded)}else this.bwEstimator.sampleTTFB(c)}break}}}getTimeToLoadFrag(e,n,r,i){const a=e+r/n,s=i?e+this.lastLevelLoadSec:0;return a+s}onLevelLoaded(e,n){const r=this.hls.config,{loading:i}=n.stats,a=i.end-i.first;xe(a)&&(this.lastLevelLoadSec=a/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(n.levelInfo)}onFragLoaded(e,{frag:n,part:r}){const i=r?r.stats:n.stats;if(n.type===Se.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const a=r?r.duration:n.duration,s=this.hls.levels[n.level],o=(s.loaded?s.loaded.bytes:0)+i.loaded,c=(s.loaded?s.loaded.duration:0)+a;s.loaded={bytes:o,duration:c},s.realBitrate=Math.round(8*o/c)}if(n.bitrateTest){const a={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(D.FRAG_BUFFERED,a),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:r,part:i}=n,a=i!=null&&i.stats.loaded?i.stats:r.stats;if(a.aborted||this.ignoreFragment(r))return;const s=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,a.loaded),a.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Se.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,a=this.findBestLevel(r,n,e,0,i,1,1);if(a>-1)return a;const s=this.hls.firstLevel,o=Math.min(Math.max(s,n),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const a=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const s=this.hls.levels;if(s.length>Math.max(e,a)&&s[e].loadError<=s[a].loadError)return e}return this._nextAutoLevel=a,this.nextAutoLevelKey=this.getAutoLevelKey(),a}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:i,config:a,minAutoLevel:s}=r,o=n?n.duration:e?e.duration:0,c=this.getBwEstimate(),u=this.getStarvationDelay();let d=a.abrBandWidthFactor,h=a.abrBandWidthUpFactor;if(u){const x=this.findBestLevel(c,s,i,u,0,d,h);if(x>=0)return this.rebufferNotice=-1,x}let p=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay;if(!u){const x=this.bitrateTestDelay;x&&(p=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-x,this.info(`bitrate test took ${Math.round(1e3*x)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),d=h=1)}const y=this.findBestLevel(c,s,i,u,p,d,h);if(this.rebufferNotice!==y&&(this.rebufferNotice=y,this.info(`${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${y}`)),y>-1)return y;const v=r.levels[s],b=r.loadLevelObj;return b&&(v==null?void 0:v.bitrate)<b.bitrate?s:r.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,r,i,a,s,o){var c;const u=i+a,d=this.lastLoadedFragLevel,h=d===-1?this.hls.firstLevel:d,{fragCurrent:p,partCurrent:y}=this,{levels:v,allAudioTracks:b,loadLevel:x,config:T}=this.hls;if(v.length===1)return 0;const _=v[h],A=!!((c=this.hls.latestLevelDetails)!=null&&c.live),O=x===-1||d===-1;let R,C="SDR",L=(_==null?void 0:_.frameRate)||0;const{audioPreference:P,videoPreference:N}=T,k=this.audioTracksByGroup||(this.audioTracksByGroup=K8(b));let M=-1;if(O){if(this.firstSelection!==-1)return this.firstSelection;const $=this.codecTiers||(this.codecTiers=Iye(v,k,n,r)),q=Dye($,C,e,P,N),{codecSet:Z,videoRanges:B,minFramerate:V,minBitrate:H,minIndex:te,preferHDR:ce}=q;M=te,R=Z,C=ce?B[B.length-1]:B[0],L=V,e=Math.max(e,H),this.log(`picked start tier ${Tt(q)}`)}else R=_==null?void 0:_.codecSet,C=_==null?void 0:_.videoRange;const G=y?y.duration:p?p.duration:0,K=this.bwEstimator.getEstimateTTFB()/1e3,W=[];for(let $=r;$>=n;$--){var Y,j;const q=v[$],Z=$>h;if(!q)continue;if(T.useMediaCapabilities&&!q.supportedResult&&!q.supportedPromise){const ge=navigator.mediaCapabilities;typeof(ge==null?void 0:ge.decodingInfo)=="function"&&Sye(q,k,C,L,e,P)?(q.supportedPromise=H8(q,k,ge,this.supportedCache),q.supportedPromise.then(Me=>{if(!this.hls)return;q.supportedResult=Me;const Re=this.hls.levels,pe=Re.indexOf(q);Me.error?this.warn(`MediaCapabilities decodingInfo error: "${Me.error}" for level ${pe} ${Tt(Me)}`):Me.supported?Me.decodingInfoResults.some(Ae=>Ae.smooth===!1||Ae.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${pe} not smooth or powerEfficient: ${Tt(Me)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${pe} ${Tt(Me)}`),pe>-1&&Re.length>1&&(this.log(`Removing unsupported level ${pe}`),this.hls.removeLevel(pe),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):q.supportedResult=V8}if((R&&q.codecSet!==R||C&&q.videoRange!==C||Z&&L>q.frameRate||!Z&&L>0&&L<q.frameRate||(Y=q.supportedResult)!=null&&(j=Y.decodingInfoResults)!=null&&j.some(ge=>ge.smooth===!1))&&(!O||$!==M)){W.push($);continue}const B=q.details,V=(y?B==null?void 0:B.partTarget:B==null?void 0:B.averagetargetduration)||G;let H;Z?H=o*e:H=s*e;const te=G&&i>=G*2&&a===0?q.averageBitrate:q.maxBitrate,ce=this.getTimeToLoadFrag(K,H,te*V,B===void 0);if(H>=te&&($===d||q.loadError===0&&q.fragmentError===0)&&(ce<=K||!xe(ce)||A&&!this.bitrateTestDelay||ce<u)){const ge=this.forcedAutoLevel;return $!==x&&(ge===-1||ge!==x)&&(W.length&&this.trace(`Skipped level(s) ${W.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${v[W[0]].codecs}" ${v[W[0]].videoRange}; not compatible with "${R}" ${C}`),this.info(`switch candidate:${h}->${$} adjustedbw(${Math.round(H)})-bitrate=${Math.round(H-te)} ttfb:${K.toFixed(1)} avgDuration:${V.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${ce.toFixed(1)} firstSelection:${O} codecSet:${q.codecSet} videoRange:${q.videoRange} hls.loadLevel:${x}`)),O&&(this.firstSelection=$),$}}return-1}set nextAutoLevel(e){const n=this.deriveNextAutoLevel(e);this._nextAutoLevel!==n&&(this.nextAutoLevelKey="",this._nextAutoLevel=n)}deriveNextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),n)}}const Y8={search:function(t,e){let n=0,r=t.length-1,i=null,a=null;for(;n<=r;){i=(n+r)/2|0,a=t[i];const s=e(a);if(s>0)n=i+1;else if(s<0)r=i-1;else return a}return null}};function jye(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!xe(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let a=0;a<t.length;++a){const s=t[a];if(Bye(e,n,s))return s}return null}function eo(t,e,n=0,r=0,i=.005){let a=null;if(t){a=e[1+t.sn-e[0].sn]||null;const o=t.endDTS-n;o>0&&o<15e-7&&(n+=15e-7),a&&t.level!==a.level&&a.end<=t.end&&(a=e[2+t.sn-e[0].sn]||null)}else n===0&&e[0].start===0&&(a=e[0]);if(a&&((!t||t.level===a.level)&&mU(n,r,a)===0||Uye(a,t,Math.min(i,r))))return a;const s=Y8.search(e,mU.bind(null,n,r));return s&&(s!==t||!a)?s:a}function Uye(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((i,a)=>(a[0]==="INF"&&(i+=parseFloat(a[1])),i),n);return t.start<=r}return!1}function mU(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function Bye(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function W8(t,e,n){if(t&&t.startCC<=e&&t.endCC>=e){let r=t.fragments;const{fragmentHint:i}=t;i&&(r=r.concat(i));let a;return Y8.search(r,s=>s.cc<e?1:s.cc>e?-1:(a=s,s.end<=n?1:s.start>n?-1:0)),a||null}return null}function Pp(t){switch(t.details){case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_TIMEOUT:case re.LEVEL_LOAD_TIMEOUT:case re.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function pU(t,e){const n=Pp(e);return t.default[`${n?"timeout":"error"}Retry`]}function e_(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function gU(t){return ht(ht({},t),{errorRetry:null,timeoutRetry:null})}function Np(t,e,n,r){if(!t)return!1;const i=r==null?void 0:r.code,a=e<t.maxNumRetry&&(Fye(i)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,r,a):a}function Fye(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}var In={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Kr={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class $ye extends ri{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.ERROR,this.onError,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.ERROR,this.onError,this),e.off(D.ERROR,this.onErrorOut,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Se.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var r;if(n.fatal)return;const i=this.hls,a=n.context;switch(n.details){case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case re.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction=Pf();return}case re.FRAG_GAP:case re.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=In.SendAlternateToPenaltyBox;return}case re.LEVEL_EMPTY_ERROR:case re.LEVEL_PARSING_ERROR:{var s,o;const u=n.parent===Se.MAIN?n.level:i.loadLevel;n.details===re.LEVEL_EMPTY_ERROR&&((s=n.context)!=null&&(o=s.levelDetails)!=null&&o.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,u):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,u))}return;case re.LEVEL_LOAD_ERROR:case re.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,a.level));return;case re.AUDIO_TRACK_LOAD_ERROR:case re.AUDIO_TRACK_LOAD_TIMEOUT:case re.SUBTITLE_LOAD_ERROR:case re.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const u=i.loadLevelObj;if(u&&(a.type===He.AUDIO_TRACK&&u.hasAudioGroup(a.groupId)||a.type===He.SUBTITLE_TRACK&&u.hasSubtitleGroup(a.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,i.loadLevel),n.errorAction.action=In.SendAlternateToPenaltyBox,n.errorAction.flags=Kr.MoveAllAlternatesMatchingHost;return}}return;case re.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const u=i.loadLevelObj,d=u==null?void 0:u.attrs["HDCP-LEVEL"];d?n.errorAction={action:In.SendAlternateToPenaltyBox,flags:Kr.MoveAllAlternatesMatchingHDCP,hdcpLevel:d}:this.keySystemError(n)}return;case re.BUFFER_ADD_CODEC_ERROR:case re.REMUX_ALLOC_ERROR:case re.BUFFER_APPEND_ERROR:if(!n.errorAction){var c;n.errorAction=this.getLevelSwitchAction(n,(c=n.level)!=null?c:i.loadLevel)}return;case re.INTERNAL_EXCEPTION:case re.BUFFER_APPENDING_ERROR:case re.BUFFER_FULL_ERROR:case re.LEVEL_SWITCH_ERROR:case re.BUFFER_STALLED_ERROR:case re.BUFFER_SEEK_OVER_HOLE:case re.BUFFER_NUDGE_ON_STALL:n.errorAction=Pf();return}n.type===Te.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const r=this.hls,i=pU(r.config.playlistLoadPolicy,e),a=this.playlistError++;if(Np(i,a,Pp(e),e.response))return{action:In.RetryRequest,flags:Kr.None,retryConfig:i,retryCount:a};const o=this.getLevelSwitchAction(e,n);return i&&(o.retryConfig=i,o.retryCount=a),o}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),i=n.levels[r],{fragLoadPolicy:a,keyLoadPolicy:s}=n.config,o=pU(e.details.startsWith("key")?s:a,e),c=n.levels.reduce((d,h)=>d+h.fragmentError,0);if(i&&(e.details!==re.FRAG_GAP&&i.fragmentError++,Np(o,c,Pp(e),e.response)))return{action:In.RetryRequest,flags:Kr.None,retryConfig:o,retryCount:c};const u=this.getLevelSwitchAction(e,r);return o&&(u.retryConfig=o,u.retryCount=c),u}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const i=this.hls.levels[n];if(i){var a,s;const u=e.details;i.loadError++,u===re.BUFFER_APPEND_ERROR&&i.fragmentError++;let d=-1;const{levels:h,loadLevel:p,minAutoLevel:y,maxAutoLevel:v}=r;!r.autoLevelEnabled&&!r.config.preserveManualLevelOnError&&(r.loadLevel=-1);const b=(a=e.frag)==null?void 0:a.type,T=(b===Se.AUDIO&&u===re.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===re.BUFFER_ADD_CODEC_ERROR||u===re.BUFFER_APPEND_ERROR))&&h.some(({audioCodec:C})=>i.audioCodec!==C),A=e.sourceBufferName==="video"&&(u===re.BUFFER_ADD_CODEC_ERROR||u===re.BUFFER_APPEND_ERROR)&&h.some(({codecSet:C,audioCodec:L})=>i.codecSet!==C&&i.audioCodec===L),{type:O,groupId:R}=(s=e.context)!=null?s:{};for(let C=h.length;C--;){const L=(C+p)%h.length;if(L!==p&&L>=y&&L<=v&&h[L].loadError===0){var o,c;const P=h[L];if(u===re.FRAG_GAP&&b===Se.MAIN&&e.frag){const N=h[L].details;if(N){const k=eo(e.frag,N.fragments,e.frag.start);if(k!=null&&k.gap)continue}}else{if(O===He.AUDIO_TRACK&&P.hasAudioGroup(R)||O===He.SUBTITLE_TRACK&&P.hasSubtitleGroup(R))continue;if(b===Se.AUDIO&&(o=i.audioGroups)!=null&&o.some(N=>P.hasAudioGroup(N))||b===Se.SUBTITLE&&(c=i.subtitleGroups)!=null&&c.some(N=>P.hasSubtitleGroup(N))||T&&i.audioCodec===P.audioCodec||!T&&i.audioCodec!==P.audioCodec||A&&i.codecSet===P.codecSet)continue}d=L;break}}if(d>-1&&r.loadLevel!==d)return e.levelRetry=!0,this.playlistError=0,{action:In.SendAlternateToPenaltyBox,flags:Kr.None,nextAutoLevel:d}}return{action:In.SendAlternateToPenaltyBox,flags:Kr.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case In.DoNothing:break;case In.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==re.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:i,hdcpLevel:a,nextAutoLevel:s}=r;switch(i){case Kr.None:this.switchLevel(e,s);break;case Kr.MoveAllAlternatesMatchingHDCP:a&&(n.maxHdcpLevel=BA[BA.indexOf(a)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,s)}switchLevel(e,n){if(n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===re.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const r=UA(e.mimeType),i=this.hls.levels;for(let a=i.length;a--;)i[a][`${e.sourceBufferName}Codec`]===r&&this.hls.removeLevel(a)}}}function Pf(t){const e={action:In.DoNothing,flags:Kr.None};return t&&(e.resolved=!0),e}var en={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Gye{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const r=this.activePartLists[n];if(r)for(let i=r.length;i--;){const a=r[i];if(!a)break;const s=a.end;if(a.start<=e&&s!==null&&e<=s)return a}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){return this.getFragAtPos(e,n,!0)}getFragAtPos(e,n,r){const{fragments:i}=this,a=Object.keys(i);for(let s=a.length;s--;){const o=i[a[s]];if((o==null?void 0:o.body.type)===n&&(!r||o.buffered)){const c=o.body;if(c.start<=e&&e<=c.end)return c}}return null}detectEvictedFragments(e,n,r,i,a){this.timeRanges&&(this.timeRanges[e]=n);const s=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const c=this.fragments[o];if(!c||s>=c.body.sn)return;if(!c.buffered&&(!c.loaded||a)){c.body.type===r&&this.removeFragment(c.body);return}const u=c.range[e];if(u){if(u.time.length===0){this.removeFragment(c.body);return}u.time.some(d=>{const h=!this.isTimeBuffered(d.startPTS,d.endPTS,n);return h&&this.removeFragment(c.body),h})}})}detectPartialFragments(e){const n=this.timeRanges;if(!n||e.frag.sn==="initSegment")return;const r=e.frag,i=Qo(r),a=this.fragments[i];if(!a||a.buffered&&r.gap)return;const s=!r.relurl;Object.keys(n).forEach(o=>{const c=r.elementaryStreams[o];if(!c)return;const u=n[o],d=s||c.partial===!0;a.range[o]=this.getBufferedTimes(r,e.part,d,u)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=r.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),qh(a)||this.removeParts(r.sn-1,r.type)):this.removeFragment(a.body)}removeParts(e,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=yU(r,i=>i.fragment.sn>=e))}fragBuffered(e,n){const r=Qo(e);let i=this.fragments[r];!i&&n&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,n,r,i){const a={time:[],partial:r},s=e.start,o=e.end,c=e.minEndPTS||o,u=e.maxStartPTS||s;for(let d=0;d<i.length;d++){const h=i.start(d)-this.bufferPadding,p=i.end(d)+this.bufferPadding;if(u>=h&&c<=p){a.time.push({startPTS:Math.max(s,i.start(d)),endPTS:Math.min(o,i.end(d))});break}else if(s<p&&o>h){const y=Math.max(s,i.start(d)),v=Math.min(o,i.end(d));v>y&&(a.partial=!0,a.time.push({startPTS:y,endPTS:v}))}else if(o<=h)break}return a}getPartialFragment(e){let n=null,r,i,a,s=0;const{bufferPadding:o,fragments:c}=this;return Object.keys(c).forEach(u=>{const d=c[u];d&&qh(d)&&(i=d.body.start-o,a=d.body.end+o,e>=i&&e<=a&&(r=Math.min(e-i,a-e),s<=r&&(n=d.body,s=r)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||qh(n))}getState(e){const n=Qo(e),r=this.fragments[n];return r?r.buffered?qh(r)?en.PARTIAL:en.OK:en.APPENDING:en.NOT_LOADED}isTimeBuffered(e,n,r){let i,a;for(let s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,a=r.end(s)+this.bufferPadding,e>=i&&n<=a)return!0;if(n<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,n){if(n.frag.sn==="initSegment"||n.frag.bitrateTest)return;const r=n.frag,i=n.part?null:n,a=Qo(r);this.fragments[a]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:r,part:i,timeRanges:a,type:s}=n;if(r.sn==="initSegment")return;const o=r.type;if(i){let u=this.activePartLists[o];u||(this.activePartLists[o]=u=[]),u.push(i)}this.timeRanges=a;const c=a[s];this.detectEvictedFragments(s,c,o,i)}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=Qo(e);return!!this.fragments[n]}hasFragments(e){const{fragments:n}=this,r=Object.keys(n);if(!e)return r.length>0;for(let i=r.length;i--;){const a=n[r[i]];if((a==null?void 0:a.body.type)===e)return!0}return!1}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,r,i,a){i&&!this.hasGaps||Object.keys(this.fragments).forEach(s=>{const o=this.fragments[s];if(!o)return;const c=o.body;c.type!==r||i&&!c.gap||c.start<n&&c.end>e&&(o.buffered||a)&&this.removeFragment(c)})}removeFragment(e){const n=Qo(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const i=e.sn;this.activePartLists[e.type]=yU(r,a=>a.fragment.sn!==i)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,n;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(e=this.hls)==null||(n=e.latestLevelDetails)==null?void 0:n.partList;r&&r.forEach(i=>i.clearElementaryStreamInfo())}}function qh(t){var e,n,r;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((r=t.range.audiovideo)==null?void 0:r.partial))}function Qo(t){return`${t.type}_${t.level}_${t.sn}`}function yU(t,e){return t.filter(n=>{const r=e(n);return r||n.clearElementaryStreamInfo(),r})}var Ja={cbc:0,ctr:1};class Vye{constructor(e,n,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=n,this.aesMode=r}decrypt(e,n){switch(this.aesMode){case Ja.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e);case Ja.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},n,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function qye(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?t.slice(0,e-n):t}class Hye{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=n.getUint32(i*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,i=r[0],a=r[1],s=r[2],o=r[3],c=this.invSubMix,u=c[0],d=c[1],h=c[2],p=c[3],y=new Uint32Array(256);let v=0,b=0,x=0;for(x=0;x<256;x++)x<128?y[x]=x<<1:y[x]=x<<1^283;for(x=0;x<256;x++){let T=b^b<<1^b<<2^b<<3^b<<4;T=T>>>8^T&255^99,e[v]=T,n[T]=v;const _=y[v],A=y[_],O=y[A];let R=y[T]*257^T*16843008;i[v]=R<<24|R>>>8,a[v]=R<<16|R>>>16,s[v]=R<<8|R>>>24,o[v]=R,R=O*16843009^A*65537^_*257^v*16843008,u[T]=R<<24|R>>>8,d[T]=R<<16|R>>>16,h[T]=R<<8|R>>>24,p[T]=R,v?(v=_^y[y[y[O^_]]],b^=y[y[b]]):v=b=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<n.length&&r;)r=n[i]===this.key[i],i++;if(r)return;this.key=n;const a=this.keySize=n.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const s=this.ksRows=(a+6+1)*4;let o,c;const u=this.keySchedule=new Uint32Array(s),d=this.invKeySchedule=new Uint32Array(s),h=this.sBox,p=this.rcon,y=this.invSubMix,v=y[0],b=y[1],x=y[2],T=y[3];let _,A;for(o=0;o<s;o++){if(o<a){_=u[o]=n[o];continue}A=_,o%a===0?(A=A<<8|A>>>24,A=h[A>>>24]<<24|h[A>>>16&255]<<16|h[A>>>8&255]<<8|h[A&255],A^=p[o/a|0]<<24):a>6&&o%a===4&&(A=h[A>>>24]<<24|h[A>>>16&255]<<16|h[A>>>8&255]<<8|h[A&255]),u[o]=_=(u[o-a]^A)>>>0}for(c=0;c<s;c++)o=s-c,c&3?A=u[o]:A=u[o-4],c<4||o<=4?d[c]=A:d[c]=v[h[A>>>24]]^b[h[A>>>16&255]]^x[h[A>>>8&255]]^T[h[A&255]],d[c]=d[c]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const i=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,o=this.invSubMix,c=o[0],u=o[1],d=o[2],h=o[3],p=this.uint8ArrayToUint32Array_(r);let y=p[0],v=p[1],b=p[2],x=p[3];const T=new Int32Array(e),_=new Int32Array(T.length);let A,O,R,C,L,P,N,k,M,G,K,W,Y,j;const $=this.networkToHostOrderSwap;for(;n<T.length;){for(M=$(T[n]),G=$(T[n+1]),K=$(T[n+2]),W=$(T[n+3]),L=M^a[0],P=W^a[1],N=K^a[2],k=G^a[3],Y=4,j=1;j<i;j++)A=c[L>>>24]^u[P>>16&255]^d[N>>8&255]^h[k&255]^a[Y],O=c[P>>>24]^u[N>>16&255]^d[k>>8&255]^h[L&255]^a[Y+1],R=c[N>>>24]^u[k>>16&255]^d[L>>8&255]^h[P&255]^a[Y+2],C=c[k>>>24]^u[L>>16&255]^d[P>>8&255]^h[N&255]^a[Y+3],L=A,P=O,N=R,k=C,Y=Y+4;A=s[L>>>24]<<24^s[P>>16&255]<<16^s[N>>8&255]<<8^s[k&255]^a[Y],O=s[P>>>24]<<24^s[N>>16&255]<<16^s[k>>8&255]<<8^s[L&255]^a[Y+1],R=s[N>>>24]<<24^s[k>>16&255]<<16^s[L>>8&255]<<8^s[P&255]^a[Y+2],C=s[k>>>24]<<24^s[L>>16&255]<<16^s[P>>8&255]<<8^s[N&255]^a[Y+3],_[n]=$(A^y),_[n+1]=$(C^v),_[n+2]=$(R^b),_[n+3]=$(O^x),y=M,v=G,b=K,x=W,n=n+4}return _.buffer}}class zye{constructor(e,n,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=n,this.aesMode=r}expandKey(){const e=Kye(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Kye(t){switch(t){case Ja.cbc:return"AES-CBC";case Ja.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const Yye=16;class t_{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?qye(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r,i){return this.useSoftware?new Promise((a,s)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,n,r,i);const c=this.flush();c?a(c.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r,i)}softwareDecrypt(e,n,r,i){const{currentIV:a,currentResult:s,remainderData:o}=this;if(i!==Ja.cbc||n.byteLength!==16)return Ze.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=jr(o,e),this.remainderData=null);const c=this.getValidChunk(e);if(!c.length)return null;a&&(r=a);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new Hye),u.expandKey(n);const d=s;return this.currentResult=u.decrypt(c.buffer,0,r),this.currentIV=c.slice(-16).buffer,d||null}webCryptoDecrypt(e,n,r,i){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,r,i));this.key=n,this.fastAesKey=new zye(this.subtle,n,i)}return this.fastAesKey.expandKey().then(a=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Vye(this.subtle,new Uint8Array(r),i).decrypt(e.buffer,a)):Promise.reject(new Error("web crypto not initialized"))).catch(a=>(Ze.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${a.name}: ${a.message}`),this.onWebCryptoError(e,n,r,i)))}onWebCryptoError(e,n,r,i){const a=this.enableSoftwareAES;if(a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r,i);const s=this.flush();if(s)return s.buffer}throw new Error("WebCrypto"+(a?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%Yye;return r!==e.length&&(n=e.slice(0,r),this.remainderData=e.slice(r)),n}logOnce(e){this.logEnabled&&(Ze.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const vU=Math.pow(2,17);class Wye{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(v=>v[0]==="GAP")){c(bU(e));return}else e.gap=!1;const u=this.loader=a?new a(i):new s(i),d=xU(e);e.loader=u;const h=gU(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:vU};e.stats=u.stats;const y={onSuccess:(v,b,x,T)=>{this.resetLoader(e,u);let _=v.data;x.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(_.slice(0,16)),_=_.slice(16)),o({frag:e,part:null,payload:_,networkDetails:T})},onError:(v,b,x,T)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ht({url:r,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:x,stats:T}))},onAbort:(v,b,x)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:x,stats:v}))},onTimeout:(v,b,x)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:x,stats:v}))}};n&&(y.onProgress=(v,b,x,T)=>n({frag:e,part:null,payload:x,networkDetails:T})),u.load(d,p,y)})}loadPart(e,n,r){this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){c(bU(e,n));return}const u=this.loader=a?new a(i):new s(i),d=xU(e,n);e.loader=u;const h=gU(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:vU};n.stats=u.stats,u.load(d,p,{onSuccess:(y,v,b,x)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,n);const T={frag:e,part:n,payload:y.data,networkDetails:x};r(T),o(T)},onError:(y,v,b,x)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:ht({url:d.url,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:b,stats:x}))},onAbort:(y,v,b)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:b,stats:y}))},onTimeout:(y,v,b)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:b,stats:y}))}})})}updateStatsFromPart(e,n){const r=e.stats,i=n.stats,a=i.total;if(r.loaded+=i.loaded,a){const c=Math.round(e.duration/n.duration),u=Math.min(Math.round(r.loaded/a),c),h=(c-u)*Math.round(r.loaded/u);r.total=r.loaded+h}else r.total=Math.max(r.loaded,r.total);const s=r.loading,o=i.loading;s.start?s.first+=o.first-o.start:(s.start=o.start,s.first=o.first),s.end=o.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function xU(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,a=n.byteRangeEndOffset;if(xe(i)&&xe(a)){var s;let o=i,c=a;if(t.sn==="initSegment"&&Xye((s=t.decryptdata)==null?void 0:s.method)){const u=a-i;u%16&&(c=a+(16-u%16)),i!==0&&(r.resetIV=!0,o=i-16)}r.rangeStart=o,r.rangeEnd=c}return r}function bU(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:Te.MEDIA_ERROR,details:re.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new Ki(r)}function Xye(t){return t==="AES-128"||t==="AES-256"}class Ki extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class X8 extends ri{constructor(e,n){super(e,n),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class n_{constructor(e,n,r,i=0,a=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Hh(),this.buffering={audio:Hh(),video:Hh(),audiovideo:Hh()},this.level=e,this.sn=n,this.id=r,this.size=i,this.part=a,this.partial=s}}function Hh(){return{start:0,executeStart:0,executeEnd:0,end:0}}const SU={length:0,start:()=>0,end:()=>0};class ke{static isBuffered(e,n){if(e){const r=ke.getBuffered(e);for(let i=r.length;i--;)if(n>=r.start(i)&&n<=r.end(i))return!0}return!1}static bufferedRanges(e){if(e){const n=ke.getBuffered(e);return ke.timeRangesToArray(n)}return[]}static timeRangesToArray(e){const n=[];for(let r=0;r<e.length;r++)n.push({start:e.start(r),end:e.end(r)});return n}static bufferInfo(e,n,r){if(e){const i=ke.bufferedRanges(e);if(i.length)return ke.bufferedInfo(i,n,r)}return{len:0,start:n,end:n,bufferedIndex:-1}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.length>1&&e.sort((d,h)=>d.start-h.start||h.end-d.end);let i=-1,a=[];if(r)for(let d=0;d<e.length;d++){n>=e[d].start&&n<=e[d].end&&(i=d);const h=a.length;if(h){const p=a[h-1].end;e[d].start-p<r?e[d].end>p&&(a[h-1].end=e[d].end):a.push(e[d])}else a.push(e[d])}else a=e;let s=0,o,c=n,u=n;for(let d=0;d<a.length;d++){const h=a[d].start,p=a[d].end;if(i===-1&&n>=h&&n<=p&&(i=d),n+r>=h&&n<p)c=h,u=p,s=u-n;else if(n+r<h){o=h;break}}return{len:s,start:c||0,end:u||0,nextStart:o,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||SU}catch(n){return Ze.log("failed to get media.buffered",n),SU}}}const Q8=/\{\$([a-zA-Z0-9-_]+)\}/g;function EU(t){return Q8.test(t)}function FA(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(Q8,r=>{const i=r.substring(2,r.length-1),a=n==null?void 0:n[i];return a===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),r):a})}return e}function TU(t,e,n){let r=t.variableList;r||(t.variableList=r={});let i,a;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const s=new self.URL(n).searchParams;if(s.has(i))a=s.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${n}"`)}catch(s){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${s.message}`))}}else i=e.NAME,a=e.VALUE;i in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):r[i]=a||""}function Qye(t,e,n){const r=e.IMPORT;if(n&&r in n){let i=t.variableList;i||(t.variableList=i={}),i[r]=n[r]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const Zye=/^(\d+)x(\d+)$/,AU=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Ct{constructor(e,n){typeof e=="string"&&(e=Ct.parseAttrList(e,n)),ut(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let i=0;i<n.length/2;i++)r[i]=parseInt(n.slice(i*2,i*2+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}enumeratedStringList(e,n){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((i,a)=>(i[a.toLowerCase()]=!0,i),n)}bool(e){return this[e]==="YES"}decimalResolution(e){const n=Zye.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e,n){let r;const i={},a='"';for(AU.lastIndex=0;(r=AU.exec(e))!==null;){const s=r[1].trim();let o=r[2];const c=o.indexOf(a)===0&&o.lastIndexOf(a)===o.length-1;let u=!1;if(c)o=o.slice(1,-1);else switch(s){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":u=!0}if(n&&(c||u))o=FA(n,o);else if(!u&&!c)switch(s){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Ze.warn(`${e}: attribute ${s} is missing quotes`)}i[s]=o}return i}}const Jye="com.apple.hls.interstitial";function eve(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function tve(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class Z8{constructor(e,n,r=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(n==null?void 0:n.tagAnchor)||null,this.tagOrder=(i=n==null?void 0:n.tagOrder)!=null?i:r,n){const a=n.attr;for(const s in a)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==a[s]){Ze.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=ut(new Ct({}),a,e)}if(this.attr=e,n?(this._startDate=n._startDate,this._cue=n._cue,this._endDate=n._endDate,this._dateAtEnd=n._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const a=(n==null?void 0:n.endDate)||new Date(this.attr["END-DATE"]);xe(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Ze.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const n=this.duration;return n!==null?this._dateAtEnd=new Date(this._startDate.getTime()+n*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(xe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Jye}get isValid(){return!!this.id&&!this._badValueForSameId&&xe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const nve=10;class rve{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?xe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||nve}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const n=this.lastPartIndex;if(n!==-1){for(let r=e.length;r--;)if(e[r].index>n)return e[r].index;return n}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function ml(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function r_(t){switch(t){case"AES-128":case"AES-256":return Ja.cbc;case"AES-256-CTR":return Ja.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function J8(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function $A(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function ive(t){const e=$A(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function ave(t){const e=function(r,i,a){const s=r[i];r[i]=r[a],r[a]=s};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function sve(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const a=i[0]==="base64",s=i[1];a?(r.splice(-1,1),n=J8(s)):n=ive(s)}}return n}const Mp=typeof self<"u"?self:void 0;var Ft={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Kn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function GA(t){switch(t){case Kn.FAIRPLAY:return Ft.FAIRPLAY;case Kn.PLAYREADY:return Ft.PLAYREADY;case Kn.WIDEVINE:return Ft.WIDEVINE;case Kn.CLEARKEY:return Ft.CLEARKEY}}function wU(t){switch(t){case Ft.FAIRPLAY:return Kn.FAIRPLAY;case Ft.PLAYREADY:return Kn.PLAYREADY;case Ft.WIDEVINE:return Kn.WIDEVINE;case Ft.CLEARKEY:return Kn.CLEARKEY}}function hm(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[Ft.FAIRPLAY,Ft.WIDEVINE,Ft.PLAYREADY,Ft.CLEARKEY].filter(i=>!!e[i]):[];return!r[Ft.WIDEVINE]&&n&&r.push(Ft.WIDEVINE),r}const eG=function(t){return Mp!=null&&(t=Mp.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function ove(t,e,n,r){let i;switch(t){case Ft.FAIRPLAY:i=["cenc","sinf"];break;case Ft.WIDEVINE:case Ft.PLAYREADY:i=["cenc"];break;case Ft.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return lve(i,e,n,r)}function lve(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(a=>({contentType:`audio/mp4; codecs=${a}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(a=>({contentType:`video/mp4; codecs=${a}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function uve(t){var e;return t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(n=>n==="persistent-license"))}function cve(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(e)),r=n.substring(n.indexOf("<"),n.length),s=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(s){const o=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(o){const c=J8(o).subarray(0,16);return ave(c),c}}return null}let zh={};class Pg{static clearKeyUriToKeyIdMap(){zh={}}constructor(e,n,r,i=[1],a=null,s){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=i,this.iv=a,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!ml(e),s!=null&&s.startsWith("0x")&&(this.keyId=new Uint8Array(N8(s)))}matches(e){var n,r;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&((n=e.iv)==null?void 0:n.join(","))===((r=this.iv)==null?void 0:r.join(","))}isSupported(){if(this.method){if(ml(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Kn.FAIRPLAY:case Kn.WIDEVINE:case Kn.PLAYREADY:case Kn.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(ml(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(Ze.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=fve(e);return new Pg(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.pssh&&this.keyId)return this;const n=sve(this.uri);if(n)switch(this.keyFormat){case Kn.WIDEVINE:if(this.pssh=n,!this.keyId&&n.length>=22){const r=n.length-22;this.keyId=n.subarray(r,r+16)}break;case Kn.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=pye(r,null,n),this.keyId=cve(n);break}default:{let r=n.subarray(0,16);if(r.length!==16){const i=new Uint8Array(16);i.set(r,16-r.length),r=i}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=zh[this.uri];if(!r){const i=Object.keys(zh).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,i),zh[this.uri]=r}this.keyId=r}return this}}function fve(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const _U=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,RU=/#EXT-X-MEDIA:(.*)/g,dve=/^#EXT(?:INF|-X-TARGETDURATION):/m,wE=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),hve=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class vi{static findGroup(e,n){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===n)return i}}static resolve(e,n){return Ww.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return dve.test(e)}static parseMasterPlaylist(e,n){const r=EU(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},a=[];_U.lastIndex=0;let s;for(;(s=_U.exec(e))!=null;)if(s[1]){var o;const u=new Ct(s[1],i),d=FA(i,s[2]),h={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:vi.resolve(d,n)},p=u.decimalResolution("RESOLUTION");p&&(h.width=p.width,h.height=p.height),LU(u.CODECS,h);const y=u["SUPPLEMENTAL-CODECS"];y&&(h.supplemental={},LU(y,h.supplemental)),(o=h.unknownCodecs)!=null&&o.length||a.push(h),i.levels.push(h)}else if(s[3]){const u=s[3],d=s[4];switch(u){case"SESSION-DATA":{const h=new Ct(d,i),p=h["DATA-ID"];p&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[p]=h);break}case"SESSION-KEY":{const h=OU(d,n,i);h.encrypted&&h.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(h)):Ze.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${d}"`);break}case"DEFINE":{{const h=new Ct(d,i);TU(i,h,n)}break}case"CONTENT-STEERING":{const h=new Ct(d,i);i.contentSteering={uri:vi.resolve(h["SERVER-URI"],n),pathwayId:h["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=CU(d);break}}}const c=a.length>0&&a.length<i.levels.length;return i.levels=c?a:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,n,r){let i;const a={},s=r.levels,o={AUDIO:s.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:s.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let c=0;for(RU.lastIndex=0;(i=RU.exec(e))!==null;){const u=new Ct(i[1],r),d=u.TYPE;if(d){const h=o[d],p=a[d]||[];a[d]=p;const y=u.LANGUAGE,v=u["ASSOC-LANGUAGE"],b=u.CHANNELS,x=u.CHARACTERISTICS,T=u["INSTREAM-ID"],_={attrs:u,bitrate:0,id:c++,groupId:u["GROUP-ID"]||"",name:u.NAME||y||"",type:d,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:y,url:u.URI?vi.resolve(u.URI,n):""};if(v&&(_.assocLang=v),b&&(_.channels=b),x&&(_.characteristics=x),T&&(_.instreamId=T),h!=null&&h.length){const A=vi.findGroup(h,_.groupId)||h[0];DU(_,A,"audioCodec"),DU(_,A,"textCodec")}p.push(_)}}return a}static parseLevelPlaylist(e,n,r,i,a,s){var o;const c={url:n},u=new rve(n),d=u.fragments,h=[];let p=null,y=0,v=0,b=0,x=0,T=0,_=null,A=new EE(i,c),O,R,C,L=-1,P=!1,N=null,k;if(wE.lastIndex=0,u.m3u8=e,u.hasVariableRefs=EU(e),((o=wE.exec(e))==null?void 0:o[0])!=="#EXTM3U")return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;(O=wE.exec(e))!==null;){P&&(P=!1,A=new EE(i,c),A.playlistOffset=b,A.start=b,A.sn=y,A.cc=x,T&&(A.bitrate=T),A.level=r,p&&(A.initSegment=p,p.rawProgramDateTime&&(A.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),N&&(A.setByteRange(N),N=null)));const W=O[1];if(W){A.duration=parseFloat(W);const Y=(" "+O[2]).slice(1);A.title=Y||null,A.tagList.push(Y?["INF",W,Y]:["INF",W])}else if(O[3]){if(xe(A.duration)){A.playlistOffset=b,A.start=b,C&&PU(A,C,u),A.sn=y,A.level=r,A.cc=x,d.push(A);const Y=(" "+O[3]).slice(1);A.relurl=FA(u,Y),VA(A,_,h),_=A,b+=A.duration,y++,v=0,P=!0}}else{if(O=O[0].match(hve),!O){Ze.warn("No matches on slow regex match for level playlist!");continue}for(R=1;R<O.length&&O[R]===void 0;R++);const Y=(" "+O[R]).slice(1),j=(" "+O[R+1]).slice(1),$=O[R+2]?(" "+O[R+2]).slice(1):null;switch(Y){case"BYTERANGE":_?A.setByteRange(j,_):A.setByteRange(j);break;case"PROGRAM-DATE-TIME":A.rawProgramDateTime=j,A.tagList.push(["PROGRAM-DATE-TIME",j]),L===-1&&(L=d.length);break;case"PLAYLIST-TYPE":u.type&&Hi(u,Y,O),u.type=j.toUpperCase();break;case"MEDIA-SEQUENCE":u.startSN!==0?Hi(u,Y,O):d.length>0&&NU(u,Y,O),y=u.startSN=parseInt(j);break;case"SKIP":{u.skippedSegments&&Hi(u,Y,O);const q=new Ct(j,u),Z=q.decimalInteger("SKIPPED-SEGMENTS");if(xe(Z)){u.skippedSegments+=Z;for(let V=Z;V--;)d.push(null);y+=Z}const B=q.enumeratedString("RECENTLY-REMOVED-DATERANGES");B&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(B.split("	")));break}case"TARGETDURATION":u.targetduration!==0&&Hi(u,Y,O),u.targetduration=Math.max(parseInt(j),1);break;case"VERSION":u.version!==null&&Hi(u,Y,O),u.version=parseInt(j);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||Hi(u,Y,O),u.live=!1;break;case"#":(j||$)&&A.tagList.push($?[j,$]:[j]);break;case"DISCONTINUITY":x++,A.tagList.push(["DIS"]);break;case"GAP":A.gap=!0,A.tagList.push([Y]);break;case"BITRATE":A.tagList.push([Y,j]),T=parseInt(j)*1e3,xe(T)?A.bitrate=T:T=0;break;case"DATERANGE":{const q=new Ct(j,u),Z=new Z8(q,u.dateRanges[q.ID],u.dateRangeTagCount);u.dateRangeTagCount++,Z.isValid||u.skippedSegments?u.dateRanges[Z.id]=Z:Ze.warn(`Ignoring invalid DATERANGE tag: "${j}"`),A.tagList.push(["EXT-X-DATERANGE",j]);break}case"DEFINE":{{const q=new Ct(j,u);"IMPORT"in q?Qye(u,q,s):TU(u,q,n)}break}case"DISCONTINUITY-SEQUENCE":u.startCC!==0?Hi(u,Y,O):d.length>0&&NU(u,Y,O),u.startCC=x=parseInt(j);break;case"KEY":{const q=OU(j,n,u);if(q.isSupported()){if(q.method==="NONE"){C=void 0;break}C||(C={});const Z=C[q.keyFormat];Z!=null&&Z.matches(q)||(Z&&(C=ut({},C)),C[q.keyFormat]=q)}else Ze.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${j}"`);break}case"START":u.startTimeOffset=CU(j);break;case"MAP":{const q=new Ct(j,u);if(A.duration){const Z=new EE(i,c);IU(Z,q,r,C),p=Z,A.initSegment=p,p.rawProgramDateTime&&!A.rawProgramDateTime&&(A.rawProgramDateTime=p.rawProgramDateTime)}else{const Z=A.byteRangeEndOffset;if(Z){const B=A.byteRangeStartOffset;N=`${Z-B}@${B}`}else N=null;IU(A,q,r,C),p=A,P=!0}p.cc=x;break}case"SERVER-CONTROL":{k&&Hi(u,Y,O),k=new Ct(j),u.canBlockReload=k.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=k.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&k.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=k.optionalFloat("PART-HOLD-BACK",0),u.holdBack=k.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{u.partTarget&&Hi(u,Y,O);const q=new Ct(j);u.partTarget=q.decimalFloatingPoint("PART-TARGET");break}case"PART":{let q=u.partList;q||(q=u.partList=[]);const Z=v>0?q[q.length-1]:void 0,B=v++,V=new Ct(j,u),H=new tye(V,A,c,B,Z);q.push(H),A.duration+=H.duration;break}case"PRELOAD-HINT":{const q=new Ct(j,u);u.preloadHint=q;break}case"RENDITION-REPORT":{const q=new Ct(j,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(q);break}default:Ze.warn(`line parsed but not handled: ${O}`);break}}}_&&!_.relurl?(d.pop(),b-=_.duration,u.partList&&(u.fragmentHint=_)):u.partList&&(VA(A,_,h),A.cc=x,u.fragmentHint=A,C&&PU(A,C,u)),u.targetduration||(u.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const M=d.length,G=d[0],K=d[M-1];if(b+=u.skippedSegments*u.targetduration,b>0&&M&&K){u.averagetargetduration=b/M;const W=K.sn;u.endSN=W!=="initSegment"?W:0,u.live||(K.endList=!0),G&&u.startCC===void 0&&(u.startCC=G.cc),L>0&&(pve(d,L),G&&h.unshift(G))}else u.endSN=0,u.startCC=0;return u.fragmentHint&&(b+=u.fragmentHint.duration),u.totalduration=b,h.length&&u.dateRangeTagCount&&G&&tG(h,u),u.endCC=x,u}}function tG(t,e){const n=t.length;if(!n)return;const r=t[n-1],i=e.live?1/0:e.totalduration,a=Object.keys(e.dateRanges);for(let s=a.length;s--;){const o=e.dateRanges[a[s]],c=o.startDate.getTime();o.tagAnchor=r.ref;for(let u=n;u--;){const d=mve(e,c,t,u,i);if(d!==-1){o.tagAnchor=e.fragments[d].ref;break}}}}function mve(t,e,n,r,i){const a=n[r];if(a){const o=a.programDateTime;if(e>=o||r===0){var s;const c=(((s=n[r+1])==null?void 0:s.start)||i)-a.start;if(e<=o+c*1e3){const u=n[r].sn-t.startSN,d=t.fragments;if(d.length>n.length){const p=(n[r+1]||d[d.length-1]).sn-t.startSN;for(let y=p;y>u;y--){const v=d[y].programDateTime;if(e>=v&&e<v+d[y].duration*1e3)return y}}return u}}}return-1}function OU(t,e,n){var r,i;const a=new Ct(t,n),s=(r=a.METHOD)!=null?r:"",o=a.URI,c=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,d=(i=a.KEYFORMAT)!=null?i:"identity";o&&a.IV&&!c&&Ze.error(`Invalid IV: ${a.IV}`);const h=o?vi.resolve(o,e):"",p=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Pg(s,h,d,p,c,a.KEYID)}function CU(t){const n=new Ct(t).decimalFloatingPoint("TIME-OFFSET");return xe(n)?n:null}function LU(t,e){let n=(t||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const i=n.filter(a=>Zw(a,r));i.length&&(e[`${r}Codec`]=i.map(a=>a.split("/")[0]).join(","),n=n.filter(a=>i.indexOf(a)===-1))}),e.unknownCodecs=n}function DU(t,e,n){const r=e[n];r&&(t[n]=r)}function pve(t,e){let n=t[e];for(let r=e;r--;){const i=t[r];if(!i)return;i.programDateTime=n.programDateTime-i.duration*1e3,n=i}}function VA(t,e,n){t.rawProgramDateTime?n.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function IU(t,e,n,r){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",r&&(t.levelkeys=r),t.initSegment=null}function PU(t,e,n){t.levelkeys=e;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&r.push(t)}function Hi(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${n[0]})`)}function NU(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${n[0]})`)}function _E(t,e){const n=e.startPTS;if(xe(n)){let r=0,i;e.sn>t.sn?(r=n-t.start,i=t):(r=t.start-n,i=e),i.duration!==r&&i.setDuration(r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function nG(t,e,n,r,i,a){r-n<=0&&(Ze.warn("Fragment should have a positive duration",e),r=n+e.duration,a=i+e.duration);let o=n,c=r;const u=e.startPTS,d=e.endPTS;if(xe(u)){const x=Math.abs(u-n);xe(e.deltaPTS)?e.deltaPTS=Math.max(x,e.deltaPTS):e.deltaPTS=x,o=Math.max(n,u),n=Math.min(n,u),i=Math.min(i,e.startDTS),c=Math.min(r,d),r=Math.max(r,d),a=Math.max(a,e.endDTS)}const h=n-e.start;e.start!==0&&e.setStart(n),e.setDuration(r-e.start),e.startPTS=n,e.maxStartPTS=o,e.startDTS=i,e.endPTS=r,e.minEndPTS=c,e.endDTS=a;const p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;let y;const v=p-t.startSN,b=t.fragments;for(b[v]=e,y=v;y>0;y--)_E(b[y],b[y-1]);for(y=v;y<b.length-1;y++)_E(b[y],b[y+1]);return t.fragmentHint&&_E(b[b.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,h}function gve(t,e){if(t===e)return;let n=null;const r=t.fragments;for(let u=r.length-1;u>=0;u--){const d=r[u].initSegment;if(d){n=d;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let i;xve(t,e,(u,d,h,p)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==u.cc){const y=u.cc-d.cc;for(let v=h;v<p.length;v++)p[v].cc+=y;e.endCC=p[p.length-1].cc}xe(u.startPTS)&&xe(u.endPTS)&&(d.setStart(d.startPTS=u.startPTS),d.startDTS=u.startDTS,d.maxStartPTS=u.maxStartPTS,d.endPTS=u.endPTS,d.endDTS=u.endDTS,d.minEndPTS=u.minEndPTS,d.setDuration(u.endPTS-u.startPTS),d.duration&&(i=d),e.PTSKnown=e.alignedSliding=!0),u.hasStreams&&(d.elementaryStreams=u.elementaryStreams),d.loader=u.loader,u.hasStats&&(d.stats=u.stats),u.initSegment&&(d.initSegment=u.initSegment,n=u.initSegment)});const a=e.fragments,s=e.fragmentHint?a.concat(e.fragmentHint):a;if(n&&s.forEach(u=>{var d;u&&(!u.initSegment||u.initSegment.relurl===((d=n)==null?void 0:d.relurl))&&(u.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(u=>!u),e.deltaUpdateFailed){Ze.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=e.skippedSegments;u--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=yve(t.dateRanges,e));const u=t.fragments.filter(d=>d.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<s.length;d++)s[d].programDateTime===null&&VA(s[d],s[d-1],u);tG(u,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var o;const u=aG(t,e.startSN-1);e.startCC=(o=u==null?void 0:u.cc)!=null?o:a[0].cc}vve(t.partList,e.partList,(u,d)=>{d.elementaryStreams=u.elementaryStreams,d.stats=u.stats}),i?nG(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):rG(t,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const u=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=u),e.driftEndTime=c,e.driftEnd=u}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function yve(t,e){const{dateRanges:n,recentlyRemovedDateranges:r}=e,i=ut({},t);r&&r.forEach(o=>{delete i[o]});const s=Object.keys(i).length;return s&&Object.keys(n).forEach(o=>{const c=i[o],u=new Z8(n[o].attr,c);u.isValid?(i[o]=u,c||(u.tagOrder+=s)):Ze.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Tt(n[o].attr)}"`)}),i}function vve(t,e,n){if(t&&e){let r=0;for(let i=0,a=t.length;i<=a;i++){const s=t[i],o=e[i+r];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?n(s,o):r--}}}function xve(t,e,n){const r=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,c=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=i;u<=a;u++){const d=c[s+u];let h=o[u];if(r&&!h&&d&&(h=e.fragments[u]=d),d&&h){if(n(d,h,u,o),d.url&&d.url!==h.url){e.playlistParsingError=MU(`media sequence mismatch ${h.sn}:`,t,e,d,h);return}else if(d.cc!==h.cc){e.playlistParsingError=MU(`discontinuity sequence mismatch (${d.cc}!=${h.cc})`,t,e,d,h);return}}}}function MU(t,e,n,r,i){return new Error(`${t} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${n.startSN}
${n.m3u8}`)}function rG(t,e,n=!0){const r=e.startSN+e.skippedSegments-t.startSN,i=t.fragments,a=r>=0;let s=0;if(a&&r<i.length)s=i[r].start;else if(a&&e.startSN===t.endSN+1)s=t.fragmentEnd;else if(a&&n)s=t.fragmentStart+r*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)s=t.fragmentStart;else return;qA(e,s)}function qA(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function iG(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments;if(r.length&&n*4>e){const a=r[r.length-1].duration*1e3;a<n&&(n=a)}}else n/=2;return Math.round(n)}function aG(t,e,n){if(!t)return null;let r=t.fragments[e-t.startSN];return r||(r=t.fragmentHint,r&&r.sn===e)?r:e<t.startSN&&n&&n.sn===e?n:null}function kU(t,e,n){return t?sG(t.partList,e,n):null}function sG(t,e,n){if(t)for(let r=t.length;r--;){const i=t[r];if(i.index===n&&i.fragment.sn===e)return i}return null}function oG(t){t.forEach((e,n)=>{var r;(r=e.details)==null||r.fragments.forEach(i=>{i.level=n,i.initSegment&&(i.initSegment.level=n)})})}function kc(t,e){for(let r=0,i=t.length;r<i;r++){var n;if(((n=t[r])==null?void 0:n.cc)===e)return t[r]}return null}function bve(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function jU(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function lG(t,e){const n=e.fragments;for(let r=0,i=n.length;r<i;r++)jU(n[r],t);e.fragmentHint&&jU(e.fragmentHint,t),e.alignedSliding=!0}function Sve(t,e){t&&(uG(e,t),!e.alignedSliding&&t&&kp(e,t),!e.alignedSliding&&t&&!e.skippedSegments&&rG(t,e,!1))}function uG(t,e){if(!bve(e,t))return;const n=Math.min(e.endCC,t.endCC),r=kc(e.fragments,n),i=kc(t.fragments,n);if(!r||!i)return;Ze.log(`Aligning playlist at start of dicontinuity sequence ${n}`);const a=r.start-i.start;lG(a,t)}function kp(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;let i,a;const s=Math.min(e.endCC,t.endCC);e.startCC<s&&t.startCC<s&&(i=kc(r,s),a=kc(n,s)),(!i||!a)&&(i=r[Math.floor(r.length/2)],a=kc(n,i.cc)||n[Math.floor(n.length/2)]);const o=i.programDateTime,c=a.programDateTime;if(!o||!c)return;const u=(c-o)/1e3-(a.start-i.start);lG(u,t)}const Eve={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},fe={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class i_ extends X8{constructor(e,n,r,i,a){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=fe.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:s,fragCurrent:o,media:c,mediaBuffer:u,state:d}=this,h=c?c.currentTime:0,p=ke.bufferInfo(u||c,h,s.maxBufferHole),y=!p.len;if(this.log(`Media seeking to ${xe(h)?h.toFixed(3):h}, state: ${d}, ${y?"out of":"in"} buffer`),this.state===fe.ENDED)this.resetLoadingState();else if(o){const v=s.maxFragLookUpTolerance,b=o.start-v,x=o.start+o.duration+v;if(y||x<p.start||b>p.end){const T=h>x;(h<b||T)&&(T&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(c){this.fragmentTracker.removeFragmentsInRange(h,1/0,this.playlistType,!0);const v=this.lastCurrentTime;if(h>v&&(this.lastCurrentTime=h),!this.loadingParts){const b=Math.max(p.end,h),x=this.shouldLoadParts(this.getLevelDetails(),b);x&&(this.log(`LL-Part loading ON after seeking to ${h.toFixed(2)} with buffer @${b.toFixed(2)}`),this.loadingParts=x)}}this.hls.hasEnoughToStart||(this.log(`Setting ${y?"startPosition":"nextLoadPosition"} to ${h} for seek without enough to start`),this.nextLoadPosition=h,y&&(this.startPosition=h)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new Wye(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new t_(e.config)}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===fe.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=fe.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:n}=this;return n===-1&&e?e:n}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,n){if(n.live||!this.media)return!1;const r=e.end||0,i=this.config.timelineOffset||0;if(r<=i)return!1;const a=e.buffered;this.config.maxBufferHole&&a&&a.length>1&&(e=ke.bufferedInfo(a,e.start,0));const s=e.nextStart;if(s&&s>i&&s<n.edge||this.media.currentTime<e.start)return!1;const c=n.partList;if(c!=null&&c.length){const d=c[c.length-1];return ke.isBuffered(this.media,d.start+d.duration/2)}const u=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(u)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var n;return((n=this.getLevelDetails())==null?void 0:n.appliedTimelineOffset)||e}return 0}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===fe.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,n){const r=!!n.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,n){}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=fe.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this.startFragRequested=!0,this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const i=a=>{const s=a.frag;if(this.fragContextChanged(s)){this.warn(`${s.type} sn: ${s.sn}${a.part?" part: "+a.part.index:""} of ${this.fragInfo(s,!1,a.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(s);return}s.stats.chunkCount++,this._handleFragmentLoadProgress(a)};this._doFragLoad(e,n,r,i).then(a=>{if(!a)return;const s=this.state,o=a.frag;if(this.fragContextChanged(o)){(s===fe.FRAG_LOADING||!this.fragCurrent&&s===fe.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=fe.IDLE);return}"payload"in a&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(D.FRAG_LOADED,a)),this._handleFragmentLoadComplete(a)}).catch(a=>{this.state===fe.STOPPED||this.state===fe.ERROR||(this.warn(`Frag error: ${(a==null?void 0:a.message)||a}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===en.APPENDING){const a=e.type,s=this.getFwdBufferInfo(this.mediaBuffer,a),o=Math.max(e.duration,s?s.len:this.config.maxBufferLength),c=this.backtrackFragment;((c?e.sn-c.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===en.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const n=e.details;return(n==null?void 0:n.live)&&n.type!=="EVENT"&&(this.levelLastLoaded!==e||n.expired)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const i={startOffset:e,endOffset:n,type:r};this.hls.trigger(D.BUFFER_FLUSHING,i)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{const i=r==null?void 0:r.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{frag:a,payload:s}=r,o=a.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&ml(o.method)){const c=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer,r_(o.method)).catch(u=>{throw i.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:a}),u}).then(u=>{const d=self.performance.now();return i.trigger(D.FRAG_DECRYPTED,{frag:a,payload:u,stats:{tstart:c,tdecrypt:d}}),r.payload=u,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===fe.STOPPED||this.state===fe.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==fe.STOPPED&&(this.state=fe.IDLE),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)} > buffer:${r?Eve.toString(ke.getBuffered(r)):"(detached)"})`),Kt(e)){var i;if(e.type!==Se.SUBTITLE){const s=e.elementaryStreams;if(!Object.keys(s).some(o=>!!s[o])){this.state=fe.IDLE;return}}const a=(i=this.levels)==null?void 0:i[e.level];a!=null&&a.fragmentError&&(this.log(`Resetting level fragment error count of ${a.fragmentError} on frag buffered`),a.fragmentError=0)}this.state=fe.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:i,partsLoaded:a}=e,s=!a||a.length===0||a.some(c=>!c),o=new n_(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!s);n.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,i){var a;this.fragCurrent=e;const s=n==null?void 0:n.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let o=null;e.encrypted&&!((a=e.decryptdata)!=null&&a.key)?(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=fe.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(D.KEY_LOADED,h),this.state===fe.KEY_LOADING&&(this.state=fe.IDLE),h}),this.hls.trigger(D.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):e.encrypted||(o=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const c=this.fragPrevious;if(Kt(e)&&(!c||e.sn!==c.sn)){const h=this.shouldLoadParts(n.details,e.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} loading sn ${c==null?void 0:c.sn}->${e.sn}`),this.loadingParts=h)}if(r=Math.max(e.start,r||0),this.loadingParts&&Kt(e)){const h=s.partList;if(h&&i){r>e.end&&s.fragmentHint&&(e=s.fragmentHint);const p=this.getNextPart(h,e,r);if(p>-1){const y=h[p];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${p}/${h.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=fe.FRAG_LOADING;let v;return o?v=o.then(b=>!b||this.fragContextChanged(b.frag)?null:this.doFragPartsLoad(e,y,n,i)).catch(b=>this.handleFragLoadError(b)):v=this.doFragPartsLoad(e,y,n,i).catch(b=>this.handleFragLoadError(b)),this.hls.trigger(D.FRAG_LOADING,{frag:e,part:y,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):v}else if(!e.url||this.loadedEndOfParts(h,r))return Promise.resolve(null)}}if(Kt(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${s?"["+s.startSN+"-"+s.endSN+"]":""}, target: ${parseFloat(r.toFixed(3))}`),xe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=fe.FRAG_LOADING;const u=this.config.progressive;let d;return u&&o?d=o.then(h=>!h||this.fragContextChanged(h==null?void 0:h.frag)?null:this.fragmentLoader.load(e,i)).catch(h=>this.handleFragLoadError(h)):d=Promise.all([this.fragmentLoader.load(e,u?i:void 0),o]).then(([h])=>(!u&&h&&i&&i(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(D.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,n,r,i){return new Promise((a,s)=>{var o;const c=[],u=(o=r.details)==null?void 0:o.partList,d=h=>{this.fragmentLoader.loadPart(e,h,i).then(p=>{c[h.index]=p;const y=p.part;this.hls.trigger(D.FRAG_LOADED,p);const v=kU(r.details,e.sn,h.index+1)||sG(u,e.sn,h.index+1);if(v)d(v);else return a({frag:e,part:y,partsLoaded:c})}).catch(s)};d(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===re.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(D.ERROR,n)}else this.hls.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==fe.PARSING){!this.fragCurrent&&this.state!==fe.STOPPED&&this.state!==fe.ERROR&&(this.state=fe.IDLE);return}const{frag:r,part:i,level:a}=n,s=self.performance.now();r.stats.parsing.end=s,i&&(i.stats.parsing.end=s);const o=this.getLevelDetails(),u=o&&r.sn>o.endSN||this.shouldLoadParts(o,r.end);u!==this.loadingParts&&(this.log(`LL-Part loading ${u?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=u),this.updateLevelTiming(r,i,a,e.partial)}shouldLoadParts(e,n){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var r;const a=e.partList[0],s=a.end+(((r=e.fragmentHint)==null?void 0:r.duration)||0);if(n>=s){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>a.start-a.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:i,sn:a,part:s}=e;if(!(n!=null&&n[i]))return this.warn(`Levels object was unset while buffering fragment ${a} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const o=n[i],c=o.details,u=s>-1?kU(c,a,s):null,d=u?u.fragment:aG(c,a,r);return d?(r&&r!==d&&(d.stats=r.stats),{frag:d,part:u,level:o}):null}bufferFragmentData(e,n,r,i,a){var s;if(!e||this.state!==fe.PARSING)return;const{data1:o,data2:c}=e;let u=o;if(o&&c&&(u=jr(o,c)),!((s=u)!=null&&s.length))return;const d=this.initPTS[n.cc],h=d?-d.baseTime/d.timescale:void 0,p={type:e.type,frag:n,part:r,chunkMeta:i,offset:h,parent:n.type,data:u};if(this.hls.trigger(D.BUFFER_APPENDING,p),e.dropped&&e.independent&&!r){if(a)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!ke.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,i=ke.bufferInfo(n,r,0),a=e.duration,s=Math.min(this.config.maxFragLookUpTolerance*2,a*.25),o=Math.max(Math.min(e.start-s,i.end-s),r+s);e.start-o>s&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,n){var r;const i=this.getLoadPosition();if(!xe(i))return null;const s=this.lastCurrentTime>i||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,n,s)}getFwdBufferInfoAtPos(e,n,r,i){const a=ke.bufferInfo(e,n,i);if(a.len===0&&a.nextStart!==void 0){const s=this.fragmentTracker.getBufferedFrag(n,r);if(s&&(a.nextStart<=s.end||s.gap)){const o=Math.max(Math.min(a.nextStart,s.end)-n,i);return ke.bufferInfo(e,n,o)}}return a}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const r=this.config,i=Math.max(Math.min(e-n,r.maxBufferLength),n),a=Math.max(e-n*3,r.maxMaxBufferLength/2,i);return a>=i?(r.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0):!1}getAppendedFrag(e,n=Se.MAIN){var r;const i=(r=this.fragmentTracker)==null?void 0:r.getAppendedFrag(e,n);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,n){const r=n.fragments,i=r.length;if(!i)return null;const{config:a}=this,s=r[0].start,o=a.lowLatencyMode&&!!n.partList;let c=null;if(n.live){const h=a.initialLiveManifestSize;if(i<h)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${h})`),null;if(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<s){var u;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),c=this.getInitialLiveFragment(n);const p=this.hls.startPosition,y=this.hls.liveSyncPosition,v=c?(p!==-1&&p>=s?p:y)||c.start:e;this.log(`Setting startPosition to ${v} to match start frag at live edge. mainStart: ${p} liveSyncPosition: ${y} frag.start: ${(u=c)==null?void 0:u.start}`),this.startPosition=this.nextLoadPosition=v}}else e<=s&&(c=r[0]);if(!c){const h=this.loadingParts?n.partEnd:n.fragmentEnd;c=this.getFragmentAtPosition(e,h,n)}let d=this.filterReplacedPrimary(c,n);if(!d&&c){const h=c.sn-n.startSN;d=this.filterReplacedPrimary(r[h+1]||null,n)}return this.mapToInitFragWhenRequired(d)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===en.OK||r===en.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,i,a){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,n),s&&!s.gap&&r.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i,0);if(o!==null&&r.len+o.len>=a){const c=s.sn;return this.loopSn!==c&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${c}`),this.loopSn=c),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(UU(this.hls.config)){var e,n;if((e=this.hls.interstitialsManager)==null||(n=e.playingItem)==null?void 0:n.event)return!0}return!1}filterReplacedPrimary(e,n){if(!e)return e;if(UU(this.hls.config)&&e.type!==Se.SUBTITLE){const r=this.hls.interstitialsManager,i=r==null?void 0:r.bufferingItem;if(i){const s=i.event;if(s){if(s.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&(n==null?void 0:n.live)===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const a=r==null?void 0:r.playerQueue;if(a)for(let s=a.length;s--;){const o=a[s].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let i=-1,a=!1,s=!0;for(let o=0,c=e.length;o<c;o++){const u=e[o];if(s=s&&!u.independent,i>-1&&r<u.start)break;const d=u.loaded;d?i=-1:(a||u.independent||s)&&u.fragment===n&&(i=o),a=d}return i}loadedEndOfParts(e,n){const r=e[e.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(e){const n=e.fragments,r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=jye(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const a=r.sn+1;if(a>=e.startSN&&a<=e.endSN){const s=n[a-e.startSN];r.cc===s.cc&&(i=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=W8(e,r.cc,r.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const a=this.hls.liveSyncPosition;a!==null&&(i=this.getFragmentAtPosition(a,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,n,r){const{config:i}=this;let{fragPrevious:a}=this,{fragments:s,endSN:o}=r;const{fragmentHint:c}=r,{maxFragLookUpTolerance:u}=i,d=r.partList,h=!!(this.loadingParts&&d!=null&&d.length&&c);h&&c&&!this.bitrateTest&&d[d.length-1].fragment.sn===c.sn&&(s=s.concat(c),o=c.sn);let p;if(e<n){var y;const b=e<this.lastCurrentTime||e>n-u||(y=this.media)!=null&&y.paused||!this.startFragRequested?0:u;p=eo(a,s,e,b)}else p=s[s.length-1];if(p){const v=p.sn-r.startSN,b=this.fragmentTracker.getState(p);if((b===en.OK||b===en.PARTIAL&&p.gap)&&(a=p),a&&p.sn===a.sn&&(!h||d[0].fragment.sn>p.sn||!r.live&&!h)&&a&&p.level===a.level){const T=s[v+1];p.sn<o&&this.fragmentTracker.getState(T)!==en.OK?p=T:p=null}}return p}alignPlaylists(e,n,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,s=!n,o=e.alignedSliding&&xe(a);if(s||!o&&!a){Sve(r,e);const c=e.fragmentStart;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} fragments: ${i}`),c}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;r<n&&(r=-1);const i=this.timelineOffset;if(r===-1){const a=this.startTimeOffset!==null,s=a?this.startTimeOffset:e.startTimeOffset;s!==null&&xe(s)?(r=n+s,s<0&&(r+=e.edge),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${s} found in ${a?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||n,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+i}this.nextLoadPosition=r+i}getLoadPosition(){var e;const{media:n}=this;let r=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&n?r=n.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,n){this.transmuxer&&e.type===this.playlistType&&Kt(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${n?" part "+n.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==fe.FRAG_LOADING_WAITING_RETRY)&&(this.state=fe.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const v=this.getCurrentContext(n.chunkMeta);v&&(n.frag=v.frag)}const r=n.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const a=n.details===re.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(r,!0);const s=n.errorAction,{action:o,flags:c,retryCount:u=0,retryConfig:d}=s||{},h=!!s&&!!d,p=h&&o===In.RetryRequest,y=h&&!s.resolved&&c===Kr.MoveAllAlternatesMatchingHost;if(!p&&y&&Kt(r)&&!r.endList)this.resetFragmentErrors(e),this.treatAsGap(r),s.resolved=!0;else if((p||y)&&u<d.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const v=e_(d,u);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${n.details}, retrying loading ${u+1}/${d.maxNumRetry} in ${v}ms`),s.resolved=!0,this.retryDate=self.performance.now()+v,this.state=fe.FRAG_LOADING_WAITING_RETRY}else if(d&&s)if(this.resetFragmentErrors(e),u<d.maxNumRetry)!a&&o!==In.RemoveAlternatePermanently&&(s.resolved=!0);else{this.warn(`${n.details} reached or exceeded max retry (${u})`);return}else o===In.SendAlternateToPenaltyBox?this.state=fe.WAITING_LEVEL:this.state=fe.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===fe.PARSING||this.state===fe.PARSED){const n=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),a=i&&i.len>.5;a&&this.reduceMaxBufferLength(i.len,(n==null?void 0:n.duration)||10);const s=!a;return s&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===Se.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==fe.STOPPED&&(this.state=fe.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const i=ke.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,i,r),this.state===fe.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==fe.STOPPED&&(this.state=fe.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(n,n.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,i){const a=r.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((c,u)=>{const d=e.elementaryStreams[u];if(d){const h=d.endPTS-d.startPTS;if(h<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${h})`),c||!1;const p=i?0:nG(a,e,d.startPTS,d.endPTS,d.startDTS,d.endDTS);return this.hls.trigger(D.LEVEL_PTS_UPDATED,{details:a,level:r,drift:p,type:u,frag:e,start:d.startPTS,end:d.endPTS}),!0}return c},!1)){var o;if(r.fragmentError===0&&this.treatAsGap(e,r),((o=this.transmuxer)==null?void 0:o.error)===null){const c=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=fe.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)})`),this.hls.trigger(D.FRAG_PARSED,{frag:e,part:n})}playlistLabel(){return this.playlistType===Se.MAIN?"level":"track"}fragInfo(e,n=!0,r){var i,a;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${((i=n&&!r?e.startPTS:(r||e).start)!=null?i:NaN).toFixed(3)}-${((a=n&&!r?e.endPTS:(r||e).end)!=null?a:NaN).toFixed(3)}]${r&&e.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,n){n&&n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}function UU(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class cG{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=Tve(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function Tve(t,e){const n=new Uint8Array(e);let r=0;for(let i=0;i<t.length;i++){const a=t[i];n.set(a,r),r+=a.length}return n}var RE={exports:{}},BU;function Ave(){return BU||(BU=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,h||c,p),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],y]:c._events[v].push(y):(c._events[v]=y,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,y=h.length,v=new Array(y);p<y;p++)v[p]=h[p].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,p,y,v){var b=n?n+u:u;if(!this._events[b])return!1;var x=this._events[b],T=arguments.length,_,A;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),T){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,p),!0;case 5:return x.fn.call(x.context,d,h,p,y),!0;case 6:return x.fn.call(x.context,d,h,p,y,v),!0}for(A=1,_=new Array(T-1);A<T;A++)_[A-1]=arguments[A];x.fn.apply(x.context,_)}else{var O=x.length,R;for(A=0;A<O;A++)switch(x[A].once&&this.removeListener(u,x[A].fn,void 0,!0),T){case 1:x[A].fn.call(x[A].context);break;case 2:x[A].fn.call(x[A].context,d);break;case 3:x[A].fn.call(x[A].context,d,h);break;case 4:x[A].fn.call(x[A].context,d,h,p);break;default:if(!_)for(R=1,_=new Array(T-1);R<T;R++)_[R-1]=arguments[R];x[A].fn.apply(x[A].context,_)}}return!0},o.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,p){var y=n?n+u:u;if(!this._events[y])return this;if(!d)return s(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&s(this,y);else{for(var b=0,x=[],T=v.length;b<T;b++)(v[b].fn!==d||p&&!v[b].once||h&&v[b].context!==h)&&x.push(v[b]);x.length?this._events[y]=x.length===1?x[0]:x:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(RE)),RE.exports}var wve=Ave(),a_=J0e(wve);const Nf="1.6.7",Gl={};function _ve(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Rve(){const t=Gl[Nf];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(e),i={worker:new self.Worker(n),objectURL:n,clientCount:1};return Gl[Nf]=i,i}function Ove(t){const e=Gl[t];if(e)return e.clientCount++,e;const n=new self.URL(t,self.location.href).href,i={worker:new self.Worker(n),scriptURL:n,clientCount:1};return Gl[t]=i,i}function Cve(t){const e=Gl[t||Nf];if(e&&e.clientCount--===1){const{worker:r,objectURL:i}=e;delete Gl[t||Nf],i&&self.URL.revokeObjectURL(i),r.terminate()}}function fG(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function s_(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function Ng(t,e){let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n}function Mf(t,e){const n=e;let r=0;for(;s_(t,e);){r+=10;const i=Ng(t,e+6);r+=i,fG(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)}function Lve(t,e,n,r){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=e[n+2],s=a>>2&15;if(s>12){const y=new Error(`invalid ADTS sampling index:${s}`);t.emit(D.ERROR,D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!0,error:y,reason:y.message});return}const o=(a>>6&3)+1,c=e[n+3]>>6&3|(a&1)<<2,u="mp4a.40."+o,d=i[s];let h=s;(o===5||o===29)&&(h-=3);const p=[o<<3|(h&14)>>1,(h&1)<<7|c<<3];return Ze.log(`manifest codec:${r}, parsed codec:${u}, channels:${c}, rate:${d} (ADTS object type:${o} sampling index:${s})`),{config:p,samplerate:d,channelCount:c,codec:u,parsedCodec:u,manifestCodec:r}}function dG(t,e){return t[e]===255&&(t[e+1]&246)===240}function hG(t,e){return t[e+1]&1?7:9}function o_(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function Dve(t,e){return e+5<t.length}function jp(t,e){return e+1<t.length&&dG(t,e)}function Ive(t,e){return Dve(t,e)&&dG(t,e)&&o_(t,e)<=t.length-e}function Pve(t,e){if(jp(t,e)){const n=hG(t,e);if(e+n>=t.length)return!1;const r=o_(t,e);if(r<=n)return!1;const i=e+r;return i===t.length||jp(t,i)}return!1}function mG(t,e,n,r,i){if(!t.samplerate){const a=Lve(e,n,r,i);if(!a)return;ut(t,a)}}function pG(t){return 1024*9e4/t}function Nve(t,e){const n=hG(t,e);if(e+n<=t.length){const r=o_(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function gG(t,e,n,r,i){const a=pG(t.samplerate),s=r+i*a,o=Nve(e,n);let c;if(o){const{frameLength:h,headerLength:p}=o,y=p+h,v=Math.max(0,n+y-e.length);v?(c=new Uint8Array(y-p),c.set(e.subarray(n+p,e.length),0)):c=e.subarray(n+p,n+y);const b={unit:c,pts:s};return v||t.samples.push(b),{sample:b,length:y,missing:v}}const u=e.length-n;return c=new Uint8Array(u),c.set(e.subarray(n,e.length),0),{sample:{unit:c,pts:s},length:u,missing:-1}}function Mve(t,e){return s_(t,e)&&Ng(t,e+6)+10<=t.length-e}function kve(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function OE(t,e=0,n=1/0){return jve(t,e,n,Uint8Array)}function jve(t,e,n,r){const i=Uve(t);let a=1;"BYTES_PER_ELEMENT"in r&&(a=r.BYTES_PER_ELEMENT);const s=Bve(t)?t.byteOffset:0,o=(s+t.byteLength)/a,c=(s+e)/a,u=Math.floor(Math.max(0,Math.min(c,o))),d=Math.floor(Math.min(u+Math.max(n,0),o));return new r(i,u,d-u)}function Uve(t){return t instanceof ArrayBuffer?t:t.buffer}function Bve(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function Fve(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},n=3;if(t.size<2)return;if(t.data[0]!==n){console.log("Ignore frame with unrecognized character encoding");return}const r=t.data.subarray(1).indexOf(0);if(r===-1)return;const i=fr(OE(t.data,1,r)),a=t.data[2+r],s=t.data.subarray(3+r).indexOf(0);if(s===-1)return;const o=fr(OE(t.data,3+r,s));let c;return i==="-->"?c=fr(OE(t.data,4+r+s)):c=kve(t.data.subarray(4+r+s)),e.mimeType=i,e.pictureType=a,e.description=o,e.data=c,e}function $ve(t){if(t.size<2)return;const e=fr(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}function Gve(t){if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=fr(t.data.subarray(n),!0);n+=r.length+1;const i=fr(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=fr(t.data.subarray(1));return{key:t.type,info:"",data:e}}function Vve(t){if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=fr(t.data.subarray(n),!0);n+=r.length+1;const i=fr(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=fr(t.data);return{key:t.type,info:"",data:e}}function qve(t){return t.type==="PRIV"?$ve(t):t.type[0]==="W"?Vve(t):t.type==="APIC"?Fve(t):Gve(t)}function Hve(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=Ng(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}}const Kh=10,zve=10;function yG(t){let e=0;const n=[];for(;s_(t,e);){const r=Ng(t,e+6);t[e+5]>>6&1&&(e+=Kh),e+=Kh;const i=e+r;for(;e+zve<i;){const a=Hve(t.subarray(e)),s=qve(a);s&&n.push(s),e+=a.size+Kh}fG(t,e)&&(e+=Kh)}return n}function vG(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function Kve(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}}function l_(t){const e=yG(t);for(let n=0;n<e.length;n++){const r=e[n];if(vG(r))return Kve(r)}}let ur=function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t}({});function pi(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class u_{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=jr(this.cachedData,e),this.cachedData=null);let r=Mf(e,0),i=r?r.length:0,a;const s=this._audioTrack,o=this._id3Track,c=r?l_(r):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&xe(c))&&(this.basePTS=Yve(c,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ur.audioId3,duration:Number.POSITIVE_INFINITY});i<u;){if(this.canParse(e,i)){const d=this.appendFrame(s,e,i);d?(this.frameIndex++,this.lastPTS=d.sample.pts,i+=d.length,a=i):i=u}else Mve(e,i)?(r=Mf(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ur.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,a=i):i++;if(i===u&&a!==u){const d=e.slice(a);this.cachedData?this.cachedData=jr(this.cachedData,d):this.cachedData=d}}return{audioTrack:s,videoTrack:pi(),id3Track:o,textTrack:pi()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:pi(),id3Track:this._id3Track,textTrack:pi()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Yve=(t,e,n)=>{if(xe(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};let Yh=null;const Wve=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Xve=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Qve=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Zve=[0,1,1,4];function xG(t,e,n,r,i){if(n+24>e.length)return;const a=bG(e,n);if(a&&n+a.frameLength<=e.length){const s=a.samplesPerFrame*9e4/a.sampleRate,o=r+i*s,c={unit:e.subarray(n,n+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(c),{sample:c,length:a.frameLength,missing:0}}}function bG(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,a=t[e+2]>>2&3;if(n!==1&&i!==0&&i!==15&&a!==3){const s=t[e+2]>>1&1,o=t[e+3]>>6,c=n===3?3-r:r===3?3:4,u=Wve[c*14+i-1]*1e3,h=Xve[(n===3?0:n===2?1:2)*3+a],p=o===3?1:2,y=Qve[n][r],v=Zve[r],b=y*8*v,x=Math.floor(y*u/h+s)*v;if(Yh===null){const A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Yh=A?parseInt(A[1]):0}return!!Yh&&Yh<=87&&r===2&&u>=224e3&&o===0&&(t[e+3]=t[e+3]|128),{sampleRate:h,channelCount:p,frameLength:x,samplesPerFrame:b}}}function c_(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function SG(t,e){return e+1<t.length&&c_(t,e)}function Jve(t,e){return c_(t,e)&&4<=t.length-e}function EG(t,e){if(e+1<t.length&&c_(t,e)){const r=bG(t,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const a=e+i;return a===t.length||SG(t,a)}return!1}class exe extends u_{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,n){if(!e)return!1;const r=Mf(e,0);let i=(r==null?void 0:r.length)||0;if(EG(e,i))return!1;for(let a=e.length;i<a;i++)if(Pve(e,i))return n.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return Ive(e,n)}appendFrame(e,n,r){mG(e,this.observer,n,r,e.manifestCodec);const i=gG(e,n,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const TG=(t,e)=>{let n=0,r=5;e+=r;const i=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);for(;r>0;){s[0]=t[e];const o=Math.min(r,8),c=8-o;a[0]=4278190080>>>24+c<<c,i[0]=(s[0]&a[0])>>c,n=n?n<<o|i[0]:i[0],e+=1,r-=o}return n};class txe extends u_{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,r){const i=AG(e,n,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const n=Mf(e,0);if(!n)return!1;const r=n.length;return e[r]===11&&e[r+1]===119&&l_(n)!==void 0&&TG(e,r)<16}}function AG(t,e,n,r,i){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const a=e[n+4]>>6;if(a>=3)return-1;const o=[48e3,44100,32e3][a],c=e[n+4]&63,d=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][c*3+a]*2;if(n+d>e.length)return-1;const h=e[n+6]>>5;let p=0;h===2?p+=2:(h&1&&h!==1&&(p+=2),h&4&&(p+=2));const y=(e[n+6]<<8|e[n+7])>>12-p&1,b=[2,1,2,3,3,4,4,5][h]+y,x=e[n+5]>>3,T=e[n+5]&7,_=new Uint8Array([a<<6|x<<1|T>>2,(T&3)<<6|h<<3|y<<2|c>>4,c<<4&224]),A=1536/o*9e4,O=r+i*A,R=e.subarray(n,n+d);return t.config=_,t.channelCount=b,t.samplerate=o,t.samples.push({unit:R,pts:O}),d}class nxe extends u_{resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Mf(e,0);let r=(n==null?void 0:n.length)||0;if(n&&e[r]===11&&e[r+1]===119&&l_(n)!==void 0&&TG(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(EG(e,r))return Ze.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return Jve(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return xG(e,n,r,this.basePTS,this.frameIndex)}}const rxe=/\/emsg[-/]ID3/i;class ixe{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,i){const a=this.videoTrack=pi("video",1),s=this.audioTrack=pi("audio",1),o=this.txtTrack=pi("text",1);if(this.id3Track=pi("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const c=F8(e);if(c.video){const{id:u,timescale:d,codec:h,supplemental:p}=c.video;a.id=u,a.timescale=o.timescale=d,a.codec=h,a.supplemental=p}if(c.audio){const{id:u,timescale:d,codec:h}=c.audio;s.id=u,s.timescale=d,s.codec=h}o.id=j8.text,a.sampleDuration=0,a.duration=s.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return iye(e)}demux(e,n){this.timeOffset=n;let r=e;const i=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=jr(this.remainderData,e));const o=fye(r);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=r;const s=this.extractID3Track(i,n);return a.samples=aU(n,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(n,this.timeOffset);return r.samples=aU(e,n),{videoTrack:n,audioTrack:pi(),id3Track:i,textTrack:pi()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const i=Ve(e.samples,["emsg"]);i&&i.forEach(a=>{const s=hye(a);if(rxe.test(s.schemeIdUri)){const o=FU(s,n);let c=s.eventDuration===4294967295?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;c<=.001&&(c=Number.POSITIVE_INFINITY);const u=s.payload;r.samples.push({data:u,len:u.byteLength,dts:o,pts:o,type:ur.emsg,duration:c})}else if(this.config.enableEmsgKLVMetadata&&s.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=FU(s,n);r.samples.push({data:s.payload,len:s.payload.byteLength,dts:o,pts:o,type:ur.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function FU(t,e){return xe(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class axe{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new t_(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Ja.cbc)}decryptAacSample(e,n,r){const i=e[n].unit;if(i.length<=16)return;const a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then(o=>{const c=new Uint8Array(o);i.set(c,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)})}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)r.set(e.subarray(a,a+16),i);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)e.set(r.subarray(i,i+16),a);return e}decryptAvcSample(e,n,r,i,a){const s=$8(a.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then(c=>{a.data=this.getAvcDecryptedUnit(s,c),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,i)})}decryptAvcSamples(e,n,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){i();return}const a=e[n].units;for(;!(r>=a.length);r++){const s=a[r];if(!(s.data.length<=48||s.type!==1&&s.type!==5)&&(this.decryptAvcSample(e,n,r,i,s),!this.decrypter.isSync()))return}}}}class wG{constructor(){this.VideoSample=null}createVideoSample(e,n,r){return{key:e,frame:!1,pts:n,dts:r,units:[],length:0}}getLastNalUnit(e){var n;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const a=r.units;i=a[a.length-1]}return i}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const r=n.samples,i=r.length;if(i){const a=r[i-1];e.pts=a.pts,e.dts=a.dts}else{n.dropped++;return}}n.samples.push(e)}}parseNALu(e,n,r){const i=n.byteLength;let a=e.naluState||0;const s=a,o=[];let c=0,u,d,h,p=-1,y=0;for(a===-1&&(p=0,y=this.getNALuType(n,0),a=0,c=1);c<i;){if(u=n[c++],!a){a=u?0:1;continue}if(a===1){a=u?0:2;continue}if(!u)a=3;else if(u===1){if(d=c-a-1,p>=0){const v={data:n.subarray(p,d),type:y};o.push(v)}else{const v=this.getLastNalUnit(e.samples);v&&(s&&c<=4-s&&v.state&&(v.data=v.data.subarray(0,v.data.byteLength-s)),d>0&&(v.data=jr(v.data,n.subarray(0,d)),v.state=0))}c<i?(h=this.getNALuType(n,c),p=c,y=h,a=0):a=-1}else a=0}if(p>=0&&a>=0){const v={data:n.subarray(p,i),type:y,state:a};o.push(v)}if(o.length===0){const v=this.getLastNalUnit(e.samples);v&&(v.data=jr(v.data,n))}return e.naluState=a,o}}class jc{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,i=new Uint8Array(4),a=Math.min(4,n);if(a===0)throw new Error("no bytes available");i.set(e.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&Ze.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class $U extends wG{parsePES(e,n,r,i){const a=this.parseNALu(e,r.data,i);let s=this.VideoSample,o,c=!1;r.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),a.forEach(u=>{var d,h;switch(u.type){case 1:{let b=!1;o=!0;const x=u.data;if(c&&x.length>4){const T=this.readSliceType(x);(T===2||T===4||T===7||T===9)&&(b=!0)}if(b){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.frame=!0,s.key=b;break}case 5:o=!0,(d=s)!=null&&d.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 6:{o=!0,Qw(u.data,1,r.pts,n.samples);break}case 7:{var y,v;o=!0,c=!0;const b=u.data,x=this.readSPS(b);if(!e.sps||e.width!==x.width||e.height!==x.height||((y=e.pixelRatio)==null?void 0:y[0])!==x.pixelRatio[0]||((v=e.pixelRatio)==null?void 0:v[1])!==x.pixelRatio[1]){e.width=x.width,e.height=x.height,e.pixelRatio=x.pixelRatio,e.sps=[b];const T=b.subarray(1,4);let _="avc1.";for(let A=0;A<3;A++){let O=T[A].toString(16);O.length<2&&(O="0"+O),_+=O}e.codec=_}break}case 8:o=!0,e.pps=[u.data];break;case 9:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:o=!0;break;default:o=!1;break}s&&o&&s.units.push(u)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}getNALuType(e,n){return e[n]&31}readSliceType(e){const n=new jc(e);return n.readUByte(),n.readUEG(),n.readUEG()}skipScalingList(e,n){let r=8,i=8,a;for(let s=0;s<e;s++)i!==0&&(a=n.readEG(),i=(r+a+256)%256),r=i===0?r:i}readSPS(e){const n=new jc(e);let r=0,i=0,a=0,s=0,o,c,u;const d=n.readUByte.bind(n),h=n.readBits.bind(n),p=n.readUEG.bind(n),y=n.readBoolean.bind(n),v=n.skipBits.bind(n),b=n.skipEG.bind(n),x=n.skipUEG.bind(n),T=this.skipScalingList.bind(this);d();const _=d();if(h(5),v(3),d(),x(),_===100||_===110||_===122||_===244||_===44||_===83||_===86||_===118||_===128){const P=p();if(P===3&&v(1),x(),x(),v(1),y())for(c=P!==3?8:12,u=0;u<c;u++)y()&&(u<6?T(16,n):T(64,n))}x();const A=p();if(A===0)p();else if(A===1)for(v(1),b(),b(),o=p(),u=0;u<o;u++)b();x(),v(1);const O=p(),R=p(),C=h(1);C===0&&v(1),v(1),y()&&(r=p(),i=p(),a=p(),s=p());let L=[1,1];if(y()&&y())switch(d()){case 1:L=[1,1];break;case 2:L=[12,11];break;case 3:L=[10,11];break;case 4:L=[16,11];break;case 5:L=[40,33];break;case 6:L=[24,11];break;case 7:L=[20,11];break;case 8:L=[32,11];break;case 9:L=[80,33];break;case 10:L=[18,11];break;case 11:L=[15,11];break;case 12:L=[64,33];break;case 13:L=[160,99];break;case 14:L=[4,3];break;case 15:L=[3,2];break;case 16:L=[2,1];break;case 255:{L=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil((O+1)*16-r*2-i*2),height:(2-C)*(R+1)*16-(C?2:4)*(a+s),pixelRatio:L}}}class GU extends wG{constructor(...e){super(...e),this.initVPS=null}parsePES(e,n,r,i){const a=this.parseNALu(e,r.data,i);let s=this.VideoSample,o,c=!1;r.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),a.forEach(u=>{var d,h;switch(u.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),s.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,c){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 19:case 20:o=!0,(d=s)!=null&&d.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 39:o=!0,Qw(u.data,2,r.pts,n.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=ut(e.params,this.readVPS(u.data)),this.initVPS=u.data),e.vps=[u.data];break;case 33:if(o=!0,c=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],u.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const y=this.readSPS(u.data);e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.codec=y.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const v in y.params)e.params[v]=y.params[v]}this.pushParameterSet(e.sps,u.data,e.vps),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const y=this.readPPS(u.data);for(const v in y)e.params[v]=y[v]}this.pushParameterSet(e.pps,u.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:o=!1;break}s&&o&&s.units.push(u)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}pushParameterSet(e,n,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(n)}getNALuType(e,n){return(e[n]&126)>>>1}ebsp2rbsp(e){const n=new Uint8Array(e.byteLength);let r=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(n[r]=e[i],r++);return new Uint8Array(n.buffer,0,r)}pushAccessUnit(e,n){super.pushAccessUnit(e,n),this.initVPS&&(this.initVPS=null)}readVPS(e){const n=new jc(e);n.readUByte(),n.readUByte(),n.readBits(4),n.skipBits(2),n.readBits(6);const r=n.readBits(3),i=n.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:i}}readSPS(e){const n=new jc(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.readBits(4);const r=n.readBits(3);n.readBoolean();const i=n.readBits(2),a=n.readBoolean(),s=n.readBits(5),o=n.readUByte(),c=n.readUByte(),u=n.readUByte(),d=n.readUByte(),h=n.readUByte(),p=n.readUByte(),y=n.readUByte(),v=n.readUByte(),b=n.readUByte(),x=n.readUByte(),T=n.readUByte(),_=[],A=[];for(let _e=0;_e<r;_e++)_.push(n.readBoolean()),A.push(n.readBoolean());if(r>0)for(let _e=r;_e<8;_e++)n.readBits(2);for(let _e=0;_e<r;_e++)_[_e]&&(n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte()),A[_e]&&n.readUByte();n.readUEG();const O=n.readUEG();O==3&&n.skipBits(1);const R=n.readUEG(),C=n.readUEG(),L=n.readBoolean();let P=0,N=0,k=0,M=0;L&&(P+=n.readUEG(),N+=n.readUEG(),k+=n.readUEG(),M+=n.readUEG());const G=n.readUEG(),K=n.readUEG(),W=n.readUEG(),Y=n.readBoolean();for(let _e=Y?0:r;_e<=r;_e++)n.skipUEG(),n.skipUEG(),n.skipUEG();if(n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.readBoolean()&&n.readBoolean())for(let je=0;je<4;je++)for(let Rt=0;Rt<(je===3?2:6);Rt++)if(!n.readBoolean())n.readUEG();else{const Wt=Math.min(64,1<<4+(je<<1));je>1&&n.readEG();for(let Xt=0;Xt<Wt;Xt++)n.readEG()}n.readBoolean(),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.skipUEG(),n.skipUEG(),n.readBoolean());const q=n.readUEG();let Z=0;for(let _e=0;_e<q;_e++){let je=!1;if(_e!==0&&(je=n.readBoolean()),je){_e===q&&n.readUEG(),n.readBoolean(),n.readUEG();let Rt=0;for(let yn=0;yn<=Z;yn++){const Wt=n.readBoolean();let Xt=!1;Wt||(Xt=n.readBoolean()),(Wt||Xt)&&Rt++}Z=Rt}else{const Rt=n.readUEG(),yn=n.readUEG();Z=Rt+yn;for(let Wt=0;Wt<Rt;Wt++)n.readUEG(),n.readBoolean();for(let Wt=0;Wt<yn;Wt++)n.readUEG(),n.readBoolean()}}if(n.readBoolean()){const _e=n.readUEG();for(let je=0;je<_e;je++){for(let Rt=0;Rt<W+4;Rt++)n.readBits(1);n.readBits(1)}}let V=0,H=1,te=1,ce=!0,ye=1,ge=0;n.readBoolean(),n.readBoolean();let Me=!1;if(n.readBoolean()){if(n.readBoolean()){const vn=n.readUByte(),Ri=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Oi=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];vn>0&&vn<16?(H=Ri[vn-1],te=Oi[vn-1]):vn===255&&(H=n.readBits(16),te=n.readBits(16))}if(n.readBoolean()&&n.readBoolean(),n.readBoolean()&&(n.readBits(3),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.readUByte(),n.readUByte())),n.readBoolean()&&(n.readUEG(),n.readUEG()),n.readBoolean(),n.readBoolean(),n.readBoolean(),Me=n.readBoolean(),Me&&(P+=n.readUEG(),N+=n.readUEG(),k+=n.readUEG(),M+=n.readUEG()),n.readBoolean()&&(ye=n.readBits(32),ge=n.readBits(32),n.readBoolean()&&n.readUEG(),n.readBoolean())){const Oi=n.readBoolean(),ss=n.readBoolean();let Fr=!1;(Oi||ss)&&(Fr=n.readBoolean(),Fr&&(n.readUByte(),n.readBits(5),n.readBoolean(),n.readBits(5)),n.readBits(4),n.readBits(4),Fr&&n.readBits(4),n.readBits(5),n.readBits(5),n.readBits(5));for(let _n=0;_n<=r;_n++){ce=n.readBoolean();const ii=ce||n.readBoolean();let Rn=!1;ii?n.readEG():Rn=n.readBoolean();const sd=Rn?1:n.readUEG()+1;if(Oi)for(let os=0;os<sd;os++)n.readUEG(),n.readUEG(),Fr&&(n.readUEG(),n.readUEG()),n.skipBits(1);if(ss)for(let os=0;os<sd;os++)n.readUEG(),n.readUEG(),Fr&&(n.readUEG(),n.readUEG()),n.skipBits(1)}}n.readBoolean()&&(n.readBoolean(),n.readBoolean(),n.readBoolean(),V=n.readUEG())}let pe=R,Ae=C;if(L||Me){let _e=1,je=1;O===1?_e=je=2:O==2&&(_e=2),pe=R-_e*N-_e*P,Ae=C-je*M-je*k}const Oe=i?["A","B","C"][i]:"",me=o<<24|c<<16|u<<8|d;let rt=0;for(let _e=0;_e<32;_e++)rt=(rt|(me>>_e&1)<<31-_e)>>>0;let Be=rt.toString(16);return s===1&&Be==="2"&&(Be="6"),{codecString:`hvc1.${Oe}${s}.${Be}.${a?"H":"L"}${T}.B0`,params:{general_tier_flag:a,general_profile_idc:s,general_profile_space:i,general_profile_compatibility_flags:[o,c,u,d],general_constraint_indicator_flags:[h,p,y,v,b,x],general_level_idc:T,bit_depth:G+8,bit_depth_luma_minus8:G,bit_depth_chroma_minus8:K,min_spatial_segmentation_idc:V,chroma_format_idc:O,frame_rate:{fixed:ce,fps:ge/ye}},width:pe,height:Ae,pixelRatio:[H,te]}}readPPS(e){const n=new jc(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.skipUEG(),n.skipUEG(),n.skipBits(2),n.skipBits(3),n.skipBits(2),n.skipUEG(),n.skipUEG(),n.skipEG(),n.skipBits(2),n.readBoolean()&&n.skipUEG(),n.skipEG(),n.skipEG(),n.skipBits(4);const i=n.readBoolean(),a=n.readBoolean();let s=1;return a&&i?s=0:a?s=3:i&&(s=2),{parallelismType:s}}matchSPS(e,n){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,n).substr(3)}}const dn=188;class qa{constructor(e,n,r,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.logger=i,this.videoParser=null}static probe(e,n){const r=qa.syncOffset(e);return r>0&&n.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const n=e.length;let r=Math.min(dn*5,n-dn)+1,i=0;for(;i<r;){let a=!1,s=-1,o=0;for(let c=i;c<n;c+=dn)if(e[c]===71&&(n-c===dn||e[c+dn]===71)){if(o++,s===-1&&(s=c,s!==0&&(r=Math.min(s+dn*99,e.length-dn)+1)),a||(a=HA(e,c)===0),a&&o>1&&(s===0&&o>2||c+dn>r))return s}else{if(o)return-1;break}i++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:j8[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=qa.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=qa.createTrack("audio",i),this._id3Track=qa.createTrack("id3"),this._txtTrack=qa.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,r=!1,i=!1){r||(this.sampleAes=null);let a;const s=this._videoTrack,o=this._audioTrack,c=this._id3Track,u=this._txtTrack;let d=s.pid,h=s.pesData,p=o.pid,y=c.pid,v=o.pesData,b=c.pesData,x=null,T=this.pmtParsed,_=this._pmtId,A=e.length;if(this.remainderData&&(e=jr(this.remainderData,e),A=e.length,this.remainderData=null),A<dn&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:s,id3Track:c,textTrack:u};const O=Math.max(0,qa.syncOffset(e));A-=(A-O)%dn,A<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,A,e.buffer.byteLength-A));let R=0;for(let L=O;L<A;L+=dn)if(e[L]===71){const P=!!(e[L+1]&64),N=HA(e,L),k=(e[L+3]&48)>>4;let M;if(k>1){if(M=L+5+e[L+4],M===L+dn)continue}else M=L+4;switch(N){case d:if(P){if(h&&(a=Zo(h,this.logger))){if(this.videoParser===null)switch(s.segmentCodec){case"avc":this.videoParser=new $U;break;case"hevc":this.videoParser=new GU;break}this.videoParser!==null&&this.videoParser.parsePES(s,u,a,!1)}h={data:[],size:0}}h&&(h.data.push(e.subarray(M,L+dn)),h.size+=L+dn-M);break;case p:if(P){if(v&&(a=Zo(v,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a);break;case"ac3":this.parseAC3PES(o,a);break}v={data:[],size:0}}v&&(v.data.push(e.subarray(M,L+dn)),v.size+=L+dn-M);break;case y:P&&(b&&(a=Zo(b,this.logger))&&this.parseID3PES(c,a),b={data:[],size:0}),b&&(b.data.push(e.subarray(M,L+dn)),b.size+=L+dn-M);break;case 0:P&&(M+=e[M]+1),_=this._pmtId=sxe(e,M);break;case _:{P&&(M+=e[M]+1);const G=oxe(e,M,this.typeSupported,r,this.observer,this.logger);d=G.videoPid,d>0&&(s.pid=d,s.segmentCodec=G.segmentVideoCodec),p=G.audioPid,p>0&&(o.pid=p,o.segmentCodec=G.segmentAudioCodec),y=G.id3Pid,y>0&&(c.pid=y),x!==null&&!T&&(this.logger.warn(`MPEG-TS PMT found at ${L} after unknown PID '${x}'. Backtracking to sync byte @${O} to parse all TS packets.`),x=null,L=O-188),T=this.pmtParsed=!0;break}case 17:case 8191:break;default:x=N;break}}else R++;R>0&&zA(this.observer,new Error(`Found ${R} TS packet/s that do not start with 0x47`),void 0,this.logger),s.pesData=h,o.pesData=v,c.pesData=b;const C={audioTrack:o,videoTrack:s,id3Track:c,textTrack:u};return i&&this.extractRemainingSamples(C),C}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:i,textTrack:a}=e,s=r.pesData,o=n.pesData,c=i.pesData;let u;if(s&&(u=Zo(s,this.logger))){if(this.videoParser===null)switch(r.segmentCodec){case"avc":this.videoParser=new $U;break;case"hevc":this.videoParser=new GU;break}this.videoParser!==null&&(this.videoParser.parsePES(r,a,u,!0),r.pesData=null)}else r.pesData=s;if(o&&(u=Zo(o,this.logger))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,u);break;case"mp3":this.parseMPEGPES(n,u);break;case"ac3":this.parseAC3PES(n,u);break}n.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o;c&&(u=Zo(c,this.logger))?(this.parseID3PES(i,u),i.pesData=null):i.pesData=c}demuxSampleAes(e,n,r){const i=this.demux(e,r,!0,!this.config.progressive),a=this.sampleAes=new axe(this.observer,this.config,n);return this.decrypt(i,a)}decrypt(e,n){return new Promise(r=>{const{audioTrack:i,videoTrack:a}=e;i.samples&&i.segmentCodec==="aac"?n.decryptAacSamples(i.samples,0,()=>{a.samples?n.decryptAvcSamples(a.samples,0,0,()=>{r(e)}):r(e)}):a.samples&&n.decryptAvcSamples(a.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,n){let r=0;const i=this.aacOverFlow;let a=n.data;if(i){this.aacOverFlow=null;const h=i.missing,p=i.sample.unit.byteLength;if(h===-1)a=jr(i.sample.unit,a);else{const y=p-h;i.sample.unit.set(a.subarray(0,h),y),e.samples.push(i.sample),r=i.missing}}let s,o;for(s=r,o=a.length;s<o-1&&!jp(a,s);s++);if(s!==r){let h;const p=s<o-1;if(p?h=`AAC PES did not start with ADTS header,offset:${s}`:h="No ADTS header found in AAC PES",zA(this.observer,new Error(h),p,this.logger),!p)return}mG(e,this.observer,a,s,this.audioCodec);let c;if(n.pts!==void 0)c=n.pts;else if(i){const h=pG(e.samplerate);c=i.sample.pts+h}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,d;for(;s<o;)if(d=gG(e,a,s,c,u),s+=d.length,d.missing){this.aacOverFlow=d;break}else for(u++;s<o-1&&!jp(a,s);s++);}parseMPEGPES(e,n){const r=n.data,i=r.length;let a=0,s=0;const o=n.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;s<i;)if(SG(r,s)){const c=xG(e,r,s,o,a);if(c)s+=c.length,a++;else break}else s++}parseAC3PES(e,n){{const r=n.data,i=n.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const a=r.length;let s=0,o=0,c;for(;o<a&&(c=AG(e,r,o,i,s++))>0;)o+=c}}parseID3PES(e,n){if(n.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=ut({},n,{type:this._videoTrack?ur.emsg:ur.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function HA(t,e){return((t[e+1]&31)<<8)+t[e+2]}function sxe(t,e){return(t[e+10]&31)<<8|t[e+11]}function oxe(t,e,n,r,i,a){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(t[e+1]&15)<<8|t[e+2],c=e+3+o-4,u=(t[e+10]&15)<<8|t[e+11];for(e+=12+u;e<c;){const d=HA(t,e),h=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!r){CE("ADTS AAC",a);break}case 15:s.audioPid===-1&&(s.audioPid=d);break;case 21:s.id3Pid===-1&&(s.id3Pid=d);break;case 219:if(!r){CE("H.264",a);break}case 27:s.videoPid===-1&&(s.videoPid=d);break;case 3:case 4:!n.mpeg&&!n.mp3?a.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=d,s.segmentAudioCodec="mp3");break;case 193:if(!r){CE("AC-3",a);break}case 129:n.ac3?s.audioPid===-1&&(s.audioPid=d,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&h>0){let p=e+5,y=h;for(;y>2;){switch(t[p]){case 106:n.ac3!==!0?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=d,s.segmentAudioCodec="ac3");break}const b=t[p+1]+2;p+=b,y-=b}}break;case 194:case 135:return zA(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:s.videoPid===-1&&(s.videoPid=d,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));break}e+=h+5}return s}function zA(t,e,n,r){r.warn(`parsing error: ${e.message}`),t.emit(D.ERROR,D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function CE(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function Zo(t,e){let n=0,r,i,a,s,o;const c=t.data;if(!t||t.size===0)return null;for(;c[0].length<19&&c.length>1;)c[0]=jr(c[0],c[1]),c.splice(1,1);if(r=c[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(i=(r[4]<<8)+r[5],i&&i>t.size-6)return null;const d=r[7];d&192&&(s=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,d&64?(o=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,s-o>60*9e4&&(e.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),a=r[8];let h=a+9;if(t.size<=h)return null;t.size-=h;const p=new Uint8Array(t.size);for(let y=0,v=c.length;y<v;y++){r=c[y];let b=r.byteLength;if(h)if(h>b){h-=b;continue}else r=r.subarray(h),b-=h,h=0;p.set(r,n),n+=b}return i&&(i-=a+3),{data:p,pts:s,dts:o,len:i}}return null}class lxe{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ba=Math.pow(2,32)-1;class ee{static init(){ee.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ee.types)ee.types.hasOwnProperty(e)&&(ee.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ee.HDLR_TYPES={video:n,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);ee.STTS=ee.STSC=ee.STCO=a,ee.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ee.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ee.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ee.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);ee.FTYP=ee.box(ee.types.ftyp,s,c,s,o),ee.DINF=ee.box(ee.types.dinf,ee.box(ee.types.dref,i))}static box(e,...n){let r=8,i=n.length;const a=i;for(;i--;)r+=n[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=r&255,s.set(e,4),i=0,r=8;i<a;i++)s.set(n[i],r),r+=n[i].byteLength;return s}static hdlr(e){return ee.box(ee.types.hdlr,ee.HDLR_TYPES[e])}static mdat(e){return ee.box(ee.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(Ba+1)),i=Math.floor(n%(Ba+1));return ee.box(ee.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return ee.box(ee.types.mdia,ee.mdhd(e.timescale||0,e.duration||0),ee.hdlr(e.type),ee.minf(e))}static mfhd(e){return ee.box(ee.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ee.box(ee.types.minf,ee.box(ee.types.smhd,ee.SMHD),ee.DINF,ee.stbl(e)):ee.box(ee.types.minf,ee.box(ee.types.vmhd,ee.VMHD),ee.DINF,ee.stbl(e))}static moof(e,n,r){return ee.box(ee.types.moof,ee.mfhd(e),ee.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=ee.trak(e[n]);return ee.box.apply(null,[ee.types.moov,ee.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(ee.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=ee.trex(e[n]);return ee.box.apply(null,[ee.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(Ba+1)),i=Math.floor(n%(Ba+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ee.box(ee.types.mvhd,a)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let i,a;for(i=0;i<n.length;i++)a=n[i].flags,r[i+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return ee.box(ee.types.sdtp,r)}static stbl(e){return ee.box(ee.types.stbl,ee.stsd(e),ee.box(ee.types.stts,ee.STTS),ee.box(ee.types.stsc,ee.STSC),ee.box(ee.types.stsz,ee.STSZ),ee.box(ee.types.stco,ee.STCO))}static avc1(e){let n=[],r=[],i,a,s;for(i=0;i<e.sps.length;i++)a=e.sps[i],s=a.byteLength,n.push(s>>>8&255),n.push(s&255),n=n.concat(Array.prototype.slice.call(a));for(i=0;i<e.pps.length;i++)a=e.pps[i],s=a.byteLength,r.push(s>>>8&255),r.push(s&255),r=r.concat(Array.prototype.slice.call(a));const o=ee.box(ee.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),c=e.width,u=e.height,d=e.pixelRatio[0],h=e.pixelRatio[1];return ee.box(ee.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,ee.box(ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ee.box(ee.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,d&255,h>>24,h>>16&255,h>>8&255,h&255])))}static esds(e){const n=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...n,6,1,2])}static audioStsd(e){const n=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return ee.box(ee.types.mp4a,ee.audioStsd(e),ee.box(ee.types.esds,ee.esds(e)))}static mp3(e){return ee.box(ee.types[".mp3"],ee.audioStsd(e))}static ac3(e){return ee.box(ee.types["ac-3"],ee.audioStsd(e),ee.box(ee.types.dac3,e.config))}static stsd(e){const{segmentCodec:n}=e;if(e.type==="audio"){if(n==="aac")return ee.box(ee.types.stsd,ee.STSD,ee.mp4a(e));if(n==="ac3"&&e.config)return ee.box(ee.types.stsd,ee.STSD,ee.ac3(e));if(n==="mp3"&&e.codec==="mp3")return ee.box(ee.types.stsd,ee.STSD,ee.mp3(e))}else if(e.pps&&e.sps){if(n==="avc")return ee.box(ee.types.stsd,ee.STSD,ee.avc1(e));if(n==="hevc"&&e.vps)return ee.box(ee.types.stsd,ee.STSD,ee.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${n}/${e.codec})`)}static tkhd(e){const n=e.id,r=(e.duration||0)*(e.timescale||0),i=e.width||0,a=e.height||0,s=Math.floor(r/(Ba+1)),o=Math.floor(r%(Ba+1));return ee.box(ee.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,a>>8&255,a&255,0,0]))}static traf(e,n){const r=ee.sdtp(e),i=e.id,a=Math.floor(n/(Ba+1)),s=Math.floor(n%(Ba+1));return ee.box(ee.types.traf,ee.box(ee.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),ee.box(ee.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,s>>24,s>>16&255,s>>8&255,s&255])),ee.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,ee.box(ee.types.trak,ee.tkhd(e),ee.mdia(e))}static trex(e){const n=e.id;return ee.box(ee.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],i=r.length,a=12+16*i,s=new Uint8Array(a);let o,c,u,d,h,p;for(n+=8+a,s.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),o=0;o<i;o++)c=r[o],u=c.duration,d=c.size,h=c.flags,p=c.cts,s.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&61440,h.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*o);return ee.box(ee.types.trun,s)}static initSegment(e){ee.types||ee.init();const n=ee.moov(e);return jr(ee.FTYP,n)}static hvc1(e){const n=e.params,r=[e.vps,e.sps,e.pps],i=4,a=new Uint8Array([1,n.general_profile_space<<6|(n.general_tier_flag?32:0)|n.general_profile_idc,n.general_profile_compatibility_flags[0],n.general_profile_compatibility_flags[1],n.general_profile_compatibility_flags[2],n.general_profile_compatibility_flags[3],n.general_constraint_indicator_flags[0],n.general_constraint_indicator_flags[1],n.general_constraint_indicator_flags[2],n.general_constraint_indicator_flags[3],n.general_constraint_indicator_flags[4],n.general_constraint_indicator_flags[5],n.general_level_idc,240|n.min_spatial_segmentation_idc>>8,255&n.min_spatial_segmentation_idc,252|n.parallelismType,252|n.chroma_format_idc,248|n.bit_depth_luma_minus8,248|n.bit_depth_chroma_minus8,0,parseInt(n.frame_rate.fps),i-1|n.temporal_id_nested<<2|n.num_temporal_layers<<3|(n.frame_rate.fixed?64:0),r.length]);let s=a.length;for(let v=0;v<r.length;v+=1){s+=3;for(let b=0;b<r[v].length;b+=1)s+=2+r[v][b].length}const o=new Uint8Array(s);o.set(a,0),s=a.length;const c=r.length-1;for(let v=0;v<r.length;v+=1){o.set(new Uint8Array([32+v|(v===c?128:0),0,r[v].length]),s),s+=3;for(let b=0;b<r[v].length;b+=1)o.set(new Uint8Array([r[v][b].length>>8,r[v][b].length&255]),s),s+=2,o.set(r[v][b],s),s+=r[v][b].length}const u=ee.box(ee.types.hvcC,o),d=e.width,h=e.height,p=e.pixelRatio[0],y=e.pixelRatio[1];return ee.box(ee.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,ee.box(ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ee.box(ee.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,y>>24,y>>16&255,y>>8&255,y&255])))}}ee.types=void 0;ee.HDLR_TYPES=void 0;ee.STTS=void 0;ee.STSC=void 0;ee.STCO=void 0;ee.STSZ=void 0;ee.VMHD=void 0;ee.SMHD=void 0;ee.STSD=void 0;ee.FTYP=void 0;ee.DINF=void 0;const _G=9e4;function f_(t,e,n=1,r=!1){const i=t*e*n;return r?Math.round(i):i}function uxe(t,e,n=1,r=!1){return f_(t,e,1/n,r)}function xc(t,e=!1){return f_(t,1e3,1/_G,e)}function cxe(t,e=1){return f_(t,_G,1/e)}const fxe=10*1e3,dxe=1024,hxe=1152,mxe=1536;let Jo=null,LE=null;function VU(t,e,n,r){return{duration:e,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class mm extends ri{constructor(e,n,r,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.ISGenerated=!1,Jo===null){const s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Jo=s?parseInt(s[1]):0}if(LE===null){const a=navigator.userAgent.match(/Safari\/(\d+)/i);LE=a?parseInt(a[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const r=e[0].pts,i=e.reduce((a,s)=>{let o=s.pts,c=o-a;return c<-4294967296&&(n=!0,o=Or(o,r),c=o-a),c>0?a:o},r);return n&&this.debug("PTS rollover detected"),i}remux(e,n,r,i,a,s,o,c){let u,d,h,p,y,v,b=a,x=a;const T=e.pid>-1,_=n.pid>-1,A=n.samples.length,O=e.samples.length>0,R=o&&A>0||A>1;if((!T||O)&&(!_||R)||this.ISGenerated||o){if(this.ISGenerated){var L,P,N,k;const W=this.videoTrackConfig;(W&&(n.width!==W.width||n.height!==W.height||((L=n.pixelRatio)==null?void 0:L[0])!==((P=W.pixelRatio)==null?void 0:P[0])||((N=n.pixelRatio)==null?void 0:N[1])!==((k=W.pixelRatio)==null?void 0:k[1]))||!W&&R||this.nextAudioTs===null&&O)&&this.resetInitSegment()}this.ISGenerated||(h=this.generateIS(e,n,a,s));const M=this.isVideoContiguous;let G=-1,K;if(R&&(G=pxe(n.samples),!M&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,G>0){this.warn(`Dropped ${G} out of ${A} video samples due to a missing keyframe`);const W=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(G),n.dropped+=G,x+=(n.samples[0].pts-W)/n.inputTimeScale,K=x}else G===-1&&(this.warn(`No keyframe found out of ${A} video samples`),v=!1);if(this.ISGenerated){if(O&&R){const W=this.getVideoStartPts(n.samples),j=(Or(e.samples[0].pts,W)-W)/n.inputTimeScale;b+=Math.max(0,j),x+=Math.max(0,-j)}if(O){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),h=this.generateIS(e,n,a,s)),d=this.remuxAudio(e,b,this.isAudioContiguous,s,_||R||c===Se.AUDIO?x:void 0),R){const W=d?d.endPTS-d.startPTS:0;n.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),h=this.generateIS(e,n,a,s)),u=this.remuxVideo(n,x,M,W)}}else R&&(u=this.remuxVideo(n,x,M,0));u&&(u.firstKeyFrame=G,u.independent=G!==-1,u.firstKeyFramePTS=K)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(y=RG(r,a,this._initPTS,this._initDTS)),i.samples.length&&(p=OG(i,a,this._initPTS))),{audio:d,video:u,initSegment:h,independent:v,text:p,id3:y}}generateIS(e,n,r,i){const a=e.samples,s=n.samples,o=this.typeSupported,c={},u=this._initPTS;let d=!u||i,h="audio/mp4",p,y,v,b;if(d&&(p=y=1/0),e.config&&a.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(h="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}c.audio={id:"audio",container:h,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):ee.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(b=e.id,v=e.inputTimeScale,!u||v!==u.timescale?p=y=a[0].pts-Math.round(v*r):d=!1)}if(n.sps&&n.pps&&s.length){if(n.timescale=n.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:ee.initSegment([n]),metadata:{width:n.width,height:n.height}},d)if(b=n.id,v=n.inputTimeScale,!u||v!==u.timescale){const x=this.getVideoStartPts(s),T=Math.round(v*r);y=Math.min(y,Or(s[0].dts,x)-T),p=Math.min(p,x-T)}else d=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(c).length)return this.ISGenerated=!0,d?(this._initPTS={baseTime:p,timescale:v},this._initDTS={baseTime:y,timescale:v}):p=v=void 0,{tracks:c,initPTS:p,timescale:v,trackId:b}}remuxVideo(e,n,r,i){const a=e.inputTimeScale,s=e.samples,o=[],c=s.length,u=this._initPTS,d=u.baseTime*a/u.timescale;let h=this.nextVideoTs,p=8,y=this.videoSampleDuration,v,b,x=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY,_=!1;if(!r||h===null){const V=d+n*a,H=s[0].pts-Or(s[0].dts,s[0].pts);Jo&&h!==null&&Math.abs(V-H-(h+d))<15e3?r=!0:h=V-H-d}const A=h+d;for(let V=0;V<c;V++){const H=s[V];H.pts=Or(H.pts,A),H.dts=Or(H.dts,A),H.dts<s[V>0?V-1:V].dts&&(_=!0)}_&&s.sort(function(V,H){const te=V.dts-H.dts,ce=V.pts-H.pts;return te||ce}),v=s[0].dts,b=s[s.length-1].dts;const O=b-v,R=O?Math.round(O/(c-1)):y||e.inputTimeScale/30;if(r){const V=v-A,H=V>R,te=V<-1;if((H||te)&&(H?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${xc(V,!0)} ms (${V}dts) hole between fragments detected at ${n.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${xc(-V,!0)} ms (${V}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!te||A>=s[0].pts||Jo)){v=A;const ce=s[0].pts-V;if(H)s[0].dts=v,s[0].pts=ce;else{let ye=!0;for(let ge=0;ge<s.length&&!(s[ge].dts>ce&&ye);ge++){const Me=s[ge].pts;if(s[ge].dts-=V,s[ge].pts-=V,ge<s.length-1){const Re=s[ge+1].pts,pe=s[ge].pts,Ae=Re<=pe,Oe=Re<=Me;ye=Ae==Oe}}}this.log(`Video: Initial PTS/DTS adjusted: ${xc(ce,!0)}/${xc(v,!0)}, delta: ${xc(V,!0)} ms`)}}v=Math.max(0,v);let C=0,L=0,P=v;for(let V=0;V<c;V++){const H=s[V],te=H.units,ce=te.length;let ye=0;for(let ge=0;ge<ce;ge++)ye+=te[ge].data.length;L+=ye,C+=ce,H.length=ye,H.dts<P?(H.dts=P,P+=R/4|0||1):P=H.dts,x=Math.min(H.pts,x),T=Math.max(H.pts,T)}b=s[c-1].dts;const N=L+4*C+8;let k;try{k=new Uint8Array(N)}catch(V){this.observer.emit(D.ERROR,D.ERROR,{type:Te.MUX_ERROR,details:re.REMUX_ALLOC_ERROR,fatal:!1,error:V,bytes:N,reason:`fail allocating video mdat ${N}`});return}const M=new DataView(k.buffer);M.setUint32(0,N),k.set(ee.types.mdat,4);let G=!1,K=Number.POSITIVE_INFINITY,W=Number.POSITIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,j=Number.NEGATIVE_INFINITY;for(let V=0;V<c;V++){const H=s[V],te=H.units;let ce=0;for(let Me=0,Re=te.length;Me<Re;Me++){const pe=te[Me],Ae=pe.data,Oe=pe.data.byteLength;M.setUint32(p,Oe),p+=4,k.set(Ae,p),p+=Oe,ce+=4+Oe}let ye;if(V<c-1)y=s[V+1].dts-H.dts,ye=s[V+1].pts-H.pts;else{const Me=this.config,Re=V>0?H.dts-s[V-1].dts:R;if(ye=V>0?H.pts-s[V-1].pts:R,Me.stretchShortVideoTrack&&this.nextAudioTs!==null){const pe=Math.floor(Me.maxBufferHole*a),Ae=(i?x+i*a:this.nextAudioTs+d)-H.pts;Ae>pe?(y=Ae-Re,y<0?y=Re:G=!0,this.log(`It is approximately ${Ae/90} ms to the next segment; using duration ${y/90} ms for the last video frame.`)):y=Re}else y=Re}const ge=Math.round(H.pts-H.dts);K=Math.min(K,y),Y=Math.max(Y,y),W=Math.min(W,ye),j=Math.max(j,ye),o.push(VU(H.key,y,ce,ge))}if(o.length){if(Jo){if(Jo<70){const V=o[0].flags;V.dependsOn=2,V.isNonSync=0}}else if(LE&&j-W<Y-K&&R/Y<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let V=v;for(let H=0,te=o.length;H<te;H++){const ce=V+o[H].duration,ye=V+o[H].cts;if(H<te-1){const ge=ce+o[H+1].cts;o[H].duration=ge-ye}else o[H].duration=H?o[H-1].duration:R;o[H].cts=0,V=ce}}}y=G||!y?R:y;const $=b+y;this.nextVideoTs=h=$-d,this.videoSampleDuration=y,this.isVideoContiguous=!0;const B={data1:ee.moof(e.sequenceNumber++,v,ut(e,{samples:o})),data2:k,startPTS:(x-d)/a,endPTS:(T+y-d)/a,startDTS:(v-d)/a,endDTS:h/a,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,B}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return hxe;case"ac3":return mxe;default:return dxe}}remuxAudio(e,n,r,i,a){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,c=s/o,u=this.getSamplesPerFrame(e),d=u*c,h=this._initPTS,p=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,y=[],v=a!==void 0;let b=e.samples,x=p?0:8,T=this.nextAudioTs||-1;const _=h.baseTime*s/h.timescale,A=_+n*s;if(this.isAudioContiguous=r=r||b.length&&T>0&&(i&&Math.abs(A-(T+_))<9e3||Math.abs(Or(b[0].pts,A)-(T+_))<20*d),b.forEach(function(j){j.pts=Or(j.pts,A)}),!r||T<0){if(b=b.filter(j=>j.pts>=0),!b.length)return;a===0?T=0:i&&!v?T=Math.max(0,A-_):T=b[0].pts-_}if(e.segmentCodec==="aac"){const j=this.config.maxAudioFramesDrift;for(let $=0,q=T+_;$<b.length;$++){const Z=b[$],B=Z.pts,V=B-q,H=Math.abs(1e3*V/s);if(V<=-j*d&&v)$===0&&(this.warn(`Audio frame @ ${(B/s).toFixed(3)}s overlaps marker by ${Math.round(1e3*V/s)} ms.`),this.nextAudioTs=T=B-_,q=B);else if(V>=j*d&&H<fxe&&v){let te=Math.round(V/d);for(q=B-te*d;q<0&&te&&d;)te--,q+=d;$===0&&(this.nextAudioTs=T=q-_),this.warn(`Injecting ${te} audio frames @ ${((q-_)/s).toFixed(3)}s due to ${Math.round(1e3*V/s)} ms gap.`);for(let ce=0;ce<te;ce++){let ye=lxe.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);ye||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ye=Z.unit.subarray()),b.splice($,0,{unit:ye,pts:q}),q+=d,$++}}Z.pts=q,q+=d}}let O=null,R=null,C,L=0,P=b.length;for(;P--;)L+=b[P].unit.byteLength;for(let j=0,$=b.length;j<$;j++){const q=b[j],Z=q.unit;let B=q.pts;if(R!==null){const H=y[j-1];H.duration=Math.round((B-R)/c)}else if(r&&e.segmentCodec==="aac"&&(B=T+_),O=B,L>0){L+=x;try{C=new Uint8Array(L)}catch(H){this.observer.emit(D.ERROR,D.ERROR,{type:Te.MUX_ERROR,details:re.REMUX_ALLOC_ERROR,fatal:!1,error:H,bytes:L,reason:`fail allocating audio mdat ${L}`});return}p||(new DataView(C.buffer).setUint32(0,L),C.set(ee.types.mdat,4))}else return;C.set(Z,x);const V=Z.byteLength;x+=V,y.push(VU(!0,u,V,0)),R=B}const N=y.length;if(!N)return;const k=y[y.length-1];T=R-_,this.nextAudioTs=T+c*k.duration;const M=p?new Uint8Array(0):ee.moof(e.sequenceNumber++,O/c,ut({},e,{samples:y}));e.samples=[];const G=(O-_)/s,K=T/s,Y={data1:M,data2:C,startPTS:G,endPTS:K,startDTS:G,endDTS:K,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.isAudioContiguous=!0,Y}}function Or(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function pxe(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function RG(t,e,n,r){const i=t.samples.length;if(!i)return;const a=t.inputTimeScale;for(let o=0;o<i;o++){const c=t.samples[o];c.pts=Or(c.pts-n.baseTime*a/n.timescale,e*a)/a,c.dts=Or(c.dts-r.baseTime*a/r.timescale,e*a)/a}const s=t.samples;return t.samples=[],{samples:s}}function OG(t,e,n){const r=t.samples.length;if(!r)return;const i=t.inputTimeScale;for(let s=0;s<r;s++){const o=t.samples[s];o.pts=Or(o.pts-n.baseTime*i/n.timescale,e*i)/i}t.samples.sort((s,o)=>s.pts-o.pts);const a=t.samples;return t.samples=[],{samples:a}}class gxe extends ri{constructor(e,n,r,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const n=this.initPTS;n&&e&&n.baseTime===e.baseTime&&n.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,n,r,i){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(lye(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=F8(e);i.audio&&(n=qU(i.audio,gt.AUDIO,this)),i.video&&(r=qU(i.video,gt.VIDEO,this));const a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:i.video.supplemental,initSegment:e,id:"main"}:i.audio?a.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:i.video?a.video={container:"video/mp4",codec:r,supplemental:i.video.supplemental,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,n,r,i,a,s){var o,c;let{initPTS:u,lastEndTime:d}=this;const h={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};xe(d)||(d=this.lastEndTime=a||0);const p=n.samples;if(!(p!=null&&p.length))return h;const y={initPTS:void 0,timescale:void 0,trackId:void 0};let v=this.initData;if((o=v)!=null&&o.length||(this.generateInitSegment(p),v=this.initData),!((c=v)!=null&&c.length))return this.warn("Failed to generate initSegment."),h;this.emitInitSegment&&(y.tracks=this.initTracks,this.emitInitSegment=!1);const b=cye(p,v,this),x=v.audio?b[v.audio.id]:null,T=v.video?b[v.video.id]:null,_=Wh(T,1/0),A=Wh(x,1/0),O=Wh(T,0,!0),R=Wh(x,0,!0);let C,L=a,P=0;if(x&&(!T||!u&&A<_||u&&u.trackId===v.audio.id)?(y.trackId=v.audio.id,C=x,P=R-A):T&&(y.trackId=v.video.id,C=T,P=O-_),C){const j=C.timescale;L=C.start/j,y.initPTS=C.start-a*j,y.timescale=j,u||(this.initPTS=u={baseTime:y.initPTS,timescale:j,trackId:y.trackId})}(s||!u)&&(yxe(u,L,a,P)||y.timescale!==u.timescale)&&(y.initPTS=L-a,y.timescale=1,u&&u.timescale===1&&this.warn(`Adjusting initPTS @${a} from ${u.baseTime/u.timescale} to ${y.initPTS}`),this.initPTS=u={baseTime:y.initPTS,timescale:1});const N=e?L-u.baseTime/u.timescale:d,k=N+P;P>0?this.lastEndTime=k:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const M=!!v.audio,G=!!v.video;let K="";M&&(K+="audio"),G&&(K+="video");const W={data1:p,startPTS:N,startDTS:N,endPTS:k,endDTS:k,type:K,hasAudio:M,hasVideo:G,nb:1,dropped:0};h.audio=M&&!G?W:void 0,h.video=G?W:void 0;const Y=T==null?void 0:T.sampleCount;if(Y){const j=T.keyFrameIndex,$=j!==-1;W.nb=Y,W.dropped=j===0||this.isVideoContiguous?0:$?j:Y,W.independent=$,W.firstKeyFrame=j,$&&T.keyFrameStart&&(W.firstKeyFramePTS=(T.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(h.independent=$),this.isVideoContiguous||(this.isVideoContiguous=$),W.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${j}/${Y} dropped: ${W.dropped} start: ${W.firstKeyFramePTS||"NA"}`)}return h.initSegment=y,h.id3=RG(r,a,u,u),i.samples.length&&(h.text=OG(i,a,u)),h}}function Wh(t,e,n=!1){return(t==null?void 0:t.start)!==void 0?(t.start+(n?t.duration:0))/t.timescale:e}function yxe(t,e,n,r){if(t===null)return!0;const i=Math.max(r,1),a=e-t.baseTime/t.timescale;return Math.abs(a-n)>i}function qU(t,e,n){const r=t==null?void 0:t.codec;return r&&r.length>4?r:e===gt.AUDIO?r==="ec-3"||r==="ac-3"||r==="alac"?r:r==="fLaC"||r==="Opus"?Lp(r,!1):(n.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(n.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}let Yi;try{Yi=self.performance.now.bind(self.performance)}catch{Yi=Date.now}const pm=[{demux:ixe,remux:gxe},{demux:qa,remux:mm},{demux:exe,remux:mm},{demux:nxe,remux:mm}];pm.splice(2,0,{demux:txe,remux:mm});class HU{constructor(e,n,r,i,a,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.id=a,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,i){const a=r.transmuxing;a.executeStart=Yi();let s=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:c}=this;i&&(this.currentTransmuxState=i);const{contiguous:u,discontinuity:d,trackSwitch:h,accurateTimeOffset:p,timeOffset:y,initSegmentChange:v}=i||o,{audioCodec:b,videoCodec:x,defaultInitPts:T,duration:_,initSegmentData:A}=c,O=vxe(s,n);if(O&&ml(O.method)){const P=this.getDecrypter(),N=r_(O.method);if(P.isSync()){let k=P.softwareDecrypt(s,O.key.buffer,O.iv.buffer,N);if(r.part>-1){const G=P.flush();k=G&&G.buffer}if(!k)return a.executeEnd=Yi(),DE(r);s=new Uint8Array(k)}else return this.asyncResult=!0,this.decryptionPromise=P.webCryptoDecrypt(s,O.key.buffer,O.iv.buffer,N).then(k=>{const M=this.push(k,null,r);return this.decryptionPromise=null,M}),this.decryptionPromise}const R=this.needsProbing(d,h);if(R){const P=this.configureTransmuxer(s);if(P)return this.logger.warn(`[transmuxer] ${P.message}`),this.observer.emit(D.ERROR,D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,error:P,reason:P.message}),a.executeEnd=Yi(),DE(r)}(d||h||v||R)&&this.resetInitSegment(A,b,x,_,n),(d||v||R)&&this.resetInitialTimestamp(T),u||this.resetContiguity();const C=this.transmux(s,O,y,p,r);this.asyncResult=kf(C);const L=this.currentTransmuxState;return L.contiguous=!0,L.discontinuity=!1,L.trackSwitch=!1,a.executeEnd=Yi(),C}flush(e){const n=e.transmuxing;n.executeStart=Yi();const{decrypter:r,currentTransmuxState:i,decryptionPromise:a}=this;if(a)return this.asyncResult=!0,a.then(()=>this.flush(e));const s=[],{timeOffset:o}=i;if(r){const h=r.flush();h&&s.push(this.push(h.buffer,null,e))}const{demuxer:c,remuxer:u}=this;if(!c||!u){n.executeEnd=Yi();const h=[DE(e)];return this.asyncResult?Promise.resolve(h):h}const d=c.flush(o);return kf(d)?(this.asyncResult=!0,d.then(h=>(this.flushRemux(s,h,e),s))):(this.flushRemux(s,d,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,n,r){const{audioTrack:i,videoTrack:a,id3Track:s,textTrack:o}=n,{accurateTimeOffset:c,timeOffset:u}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===Se.MAIN?"level":"track"} ${r.level}`);const d=this.remuxer.remux(i,a,s,o,u,c,!0,this.id);e.push({remuxResult:d,chunkMeta:r}),r.transmuxing.executeEnd=Yi()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,i,a){const{demuxer:s,remuxer:o}=this;!s||!o||(s.resetInitSegment(e,n,r,i),o.resetInitSegment(e,n,r,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,i,a){let s;return n&&n.method==="SAMPLE-AES"?s=this.transmuxSampleAes(e,n,r,i,a):s=this.transmuxUnencrypted(e,r,i,a),s}transmuxUnencrypted(e,n,r,i){const{audioTrack:a,videoTrack:s,id3Track:o,textTrack:c}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,s,o,c,n,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,n,r,i,a){return this.demuxer.demuxSampleAes(e,n,r).then(s=>({remuxResult:this.remuxer.remux(s.audioTrack,s.videoTrack,s.id3Track,s.textTrack,r,i,!1,this.id),chunkMeta:a}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:i}=this;let a;for(let h=0,p=pm.length;h<p;h++){var s;if((s=pm[h].demux)!=null&&s.probe(e,this.logger)){a=pm[h];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,c=this.remuxer,u=a.remux,d=a.demux;(!c||!(c instanceof u))&&(this.remuxer=new u(r,n,i,this.logger)),(!o||!(o instanceof d))&&(this.demuxer=new d(r,n,i,this.logger),this.probe=d.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new t_(this.config)),e}}function vxe(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const DE=t=>({remuxResult:{},chunkMeta:t});function kf(t){return"then"in t&&t.then instanceof Function}class xxe{constructor(e,n,r,i,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=i,this.defaultInitPts=a||null}}class bxe{constructor(e,n,r,i,a,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=a,this.initSegmentChange=s}}let zU=0;class CG{constructor(e,n,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=zU++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=c=>{const u=c.data,d=this.hls;if(!(!d||!(u!=null&&u.event)||u.instanceNo!==this.instanceNo))switch(u.event){case"init":{var h;const p=(h=this.workerContext)==null?void 0:h.objectURL;p&&self.URL.revokeObjectURL(p);break}case"transmuxComplete":{this.handleTransmuxComplete(u.data);break}case"flush":{this.onFlush(u.data);break}case"workerLog":{d.logger[u.data.logType]&&d.logger[u.data.logType](u.data.message);break}default:{u.data=u.data||{},u.data.frag=this.frag,u.data.part=this.part,u.data.id=this.id,d.trigger(u.event,u.data);break}}},this.onWorkerError=c=>{if(!this.hls)return;const u=new Error(`${c.message}  (${c.filename}:${c.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:u})};const a=e.config;this.hls=e,this.id=n,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const s=(c,u)=>{u=u||{},u.frag=this.frag||void 0,c===D.ERROR&&(u=u,u.parent=this.id,u.part=this.part,this.error=u.error),this.hls.trigger(c,u)};this.observer=new a_,this.observer.on(D.FRAG_DECRYPTED,s),this.observer.on(D.ERROR,s);const o=lU(a.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const c=this.hls.logger;if(a.workerPath||_ve()){try{a.workerPath?(c.log(`loading Web Worker ${a.workerPath} for "${n}"`),this.workerContext=Ove(a.workerPath)):(c.log(`injecting Web Worker for "${n}"`),this.workerContext=Rve());const{worker:d}=this.workerContext;d.addEventListener("message",this.onWorkerMessage),d.addEventListener("error",this.onWorkerError),d.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:n,config:Tt(a)})}catch(d){c.warn(`Error setting up "${n}" Web Worker, fallback to inline`,d),this.terminateWorker(),this.error=null,this.transmuxer=new HU(this.observer,o,a,"",n,e.logger)}return}}this.transmuxer=new HU(this.observer,o,a,"",n,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=zU++;const n=this.hls.config,r=lU(n.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:Tt(n)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),Cve(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,n,r,i,a,s,o,c,u,d){var h,p;u.transmuxing.start=self.performance.now();const{instanceNo:y,transmuxer:v}=this,b=s?s.start:a.start,x=a.decryptdata,T=this.frag,_=!(T&&a.cc===T.cc),A=!(T&&u.level===T.level),O=T?u.sn-T.sn:-1,R=this.part?u.part-this.part.index:-1,C=O===0&&u.id>1&&u.id===(T==null?void 0:T.stats.chunkCount),L=!A&&(O===1||O===0&&(R===1||C&&R<=0)),P=self.performance.now();(A||O||a.stats.parsing.start===0)&&(a.stats.parsing.start=P),s&&(R||!L)&&(s.stats.parsing.start=P);const N=!(T&&((h=a.initSegment)==null?void 0:h.url)===((p=T.initSegment)==null?void 0:p.url)),k=new bxe(_,L,c,A,b,N);if(!L||_||N){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${a.type} sn: ${u.sn}${u.part>-1?" part: "+u.part:""} ${this.id===Se.MAIN?"level":"track"}: ${u.level} id: ${u.id}
        discontinuity: ${_}
        trackSwitch: ${A}
        contiguous: ${L}
        accurateTimeOffset: ${c}
        timeOffset: ${b}
        initSegmentChange: ${N}`);const M=new xxe(r,i,n,o,d);this.configureTransmuxer(M)}if(this.frag=a,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:y,cmd:"demux",data:e,decryptdata:x,chunkMeta:u,state:k},e instanceof ArrayBuffer?[e]:[]);else if(v){const M=v.push(e,x,u,k);kf(M)?M.then(G=>{this.handleTransmuxComplete(G)}).catch(G=>{this.transmuxerError(G,u,"transmuxer-interface push error")}):this.handleTransmuxComplete(M)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:n,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:n,cmd:"flush",chunkMeta:e});else if(r){const i=r.flush(e);kf(i)?i.then(a=>{this.handleFlushResult(a,e)}).catch(a=>{this.transmuxerError(a,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}configureTransmuxer(e){const{instanceNo:n,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:n,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const KU=100;class Sxe extends i_{constructor(e,n,r){super(e,n,r,"audio-stream-controller",Se.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:a}){if(r===Se.MAIN){const s=n.cc,o=this.fragCurrent;if(this.initPTS[s]={baseTime:i,timescale:a},this.log(`InitPTS for cc: ${s} found from main: ${i}/${a}`),this.mainAnchor=n,this.state===fe.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==s)&&this.syncWithAnchor(n,c==null?void 0:c.frag)}else!this.hls.hasEnoughToStart&&o&&o.cc!==s?(o.abortRequests(),this.syncWithAnchor(n,o)):this.state===fe.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,n){var r;const i=((r=this.mainFragLoading)==null?void 0:r.frag)||null;if(n&&(i==null?void 0:i.cc)===n.cc)return;const a=(i||e).cc,s=this.getLevelDetails(),o=this.getLoadPosition(),c=W8(s,a,o);c&&(this.log(`Syncing with main frag at ${c.start} cc ${c.cc}`),this.startFragRequested=!1,this.nextLoadPosition=c.start,this.resetLoadingState(),this.state===fe.IDLE&&this.doTickIdle())}startLoad(e,n){if(!this.levels){this.startPosition=e,this.state=fe.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(KU),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=fe.IDLE):this.state=fe.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}doTick(){switch(this.state){case fe.IDLE:this.doTickIdle();break;case fe.WAITING_TRACK:{const{levels:n,trackId:r}=this,i=n==null?void 0:n[r],a=i==null?void 0:i.details;if(a&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(a))break;this.state=fe.WAITING_INIT_PTS}break}case fe.FRAG_LOADING_WAITING_RETRY:{var e;const n=performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:i,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((i==null?void 0:i[a])||null),this.state=fe.IDLE}break}case fe.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:r,part:i,cache:a,complete:s}=n,o=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=fe.FRAG_LOADING;const c=a.flush().buffer,u={frag:r,part:i,payload:c,networkDetails:null};this._handleFragmentLoadProgress(u),s&&super._handleFragmentLoadComplete(u)}else o&&o.cc!==n.frag.cc&&this.syncWithAnchor(o,n.frag)}else this.state=fe.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:n,levels:r,media:i,trackId:a}=this,s=n.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||!(r!=null&&r[a]))return;const o=r[a],c=o.details;if(!c||this.waitForLive(o)||this.waitForCdnTuneIn(c)){this.state=fe.WAITING_TRACK,this.startFragRequested=!1;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,gt.AUDIO,Se.AUDIO));const d=this.getFwdBufferInfo(u,Se.AUDIO);if(d===null)return;if(!this.switchingTrack&&this._streamEnded(d,c)){n.trigger(D.BUFFER_EOS,{type:"audio"}),this.state=fe.ENDED;return}const h=d.len,p=n.maxBufferLength,y=c.fragments,v=y[0].start,b=this.getLoadPosition(),x=this.flushing?b:d.end;if(this.switchingTrack&&i){const A=b;c.PTSKnown&&A<v&&(d.end>v||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=v+.05)}if(h>=p&&!this.switchingTrack&&x<y[y.length-1].start)return;let T=this.getNextFragment(x,c);if(T&&this.isLoopLoading(T,x)&&(T=this.getNextFragmentLoopLoading(T,c,d,Se.MAIN,p)),!T){this.bufferFlushed=!0;return}let _=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&_&&Kt(T)&&!T.endList&&(!c.live||!this.loadingParts&&x<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(_)===en.OK&&(this.mainFragLoading=_=null),_&&Kt(_))){if(T.start>_.end){const O=this.fragmentTracker.getFragAtPos(x,Se.MAIN);O&&O.end>_.end&&(_=O,this.mainFragLoading={frag:O,targetBufferTime:null})}if(T.start>_.end)return}this.loadFragment(T,o,x)}onMediaDetaching(e,n){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,n)}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new If(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?(this.switchingTrack=n,this.flushAudioIfNeeded(n),this.state!==fe.STOPPED&&(this.setInterval(KU),this.state=fe.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=n,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,n){this.mainDetails=n.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(D.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,n){var r;const{levels:i}=this,{details:a,id:s,groupId:o,track:c}=n;if(!i){this.warn(`Audio tracks reset while loading track ${s} "${c.name}" of "${o}"`);return}const u=this.mainDetails;if(!u||a.endCC>u.endCC||u.expired){this.cachedTrackLoadedData=n,this.state!==fe.STOPPED&&(this.state=fe.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${s} "${c.name}" of "${o}" loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const d=i[s];let h=0;if(a.live||(r=d.details)!=null&&r.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;if(d.details){var p;h=this.alignPlaylists(a,d.details,(p=this.levelLastLoaded)==null?void 0:p.details)}a.alignedSliding||(uG(a,u),a.alignedSliding||kp(a,u),h=a.fragmentStart)}d.details=a,this.levelLastLoaded=d,this.startFragRequested||this.setStartPosition(u,h),this.hls.trigger(D.AUDIO_TRACK_UPDATED,{details:a,id:s,groupId:n.groupId}),this.state===fe.WAITING_TRACK&&!this.waitForCdnTuneIn(a)&&(this.state=fe.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:i,payload:a}=e,{config:s,trackId:o,levels:c}=this;if(!c){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const u=c[o];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const d=u.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const h=s.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let p=this.transmuxer;p||(p=this.transmuxer=new CG(this.hls,Se.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const y=this.initPTS[r.cc],v=(n=r.initSegment)==null?void 0:n.data;if(y!==void 0){const x=i?i.index:-1,T=x!==-1,_=new n_(r.level,r.sn,r.stats.chunkCount,a.byteLength,x,T);p.push(a,v,h,"",r,i,d.totalduration,!1,_,y)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${d.startSN} ,${d.endSN}],track ${o}`);const{cache:b}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new cG,complete:!1};b.push(new Uint8Array(a)),this.state!==fe.STOPPED&&(this.state=fe.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,n){this.bufferFlushed=this.flushing=!1;const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,n){!this.audioOnly&&n.frag.type===Se.MAIN&&Kt(n.frag)&&(this.mainFragLoading=n,this.state===fe.IDLE&&this.tick())}onFragBuffered(e,n){const{frag:r,part:i}=n;if(r.type!==Se.AUDIO){!this.audioOnly&&r.type===Se.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Kt(r)){this.fragPrevious=r;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(D.AUDIO_TRACK_SWITCHED,ht({},a)))}this.fragBufferedComplete(r,i),this.media&&this.tick()}onError(e,n){var r;if(n.fatal){this.state=fe.ERROR;return}switch(n.details){case re.FRAG_GAP:case re.FRAG_PARSING_ERROR:case re.FRAG_DECRYPT_ERROR:case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Se.AUDIO,n);break;case re.AUDIO_TRACK_LOAD_ERROR:case re.AUDIO_TRACK_LOAD_TIMEOUT:case re.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===fe.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===He.AUDIO_TRACK&&(this.state=fe.IDLE);break;case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)||this.resetLoadingState();break;case re.BUFFER_FULL_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case re.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==gt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==gt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===fe.ENDED&&(this.state=fe.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,Se.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const r="audio",{hls:i}=this,{remuxResult:a,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:c,part:u,level:d}=o,{details:h}=d,{audio:p,text:y,id3:v,initSegment:b}=a;if(this.fragContextChanged(c)||!h){this.fragmentTracker.removeFragment(c);return}if(this.state=fe.PARSING,this.switchingTrack&&p&&this.completeAudioSwitch(this.switchingTrack),b!=null&&b.tracks){const x=c.initSegment||c;this._bufferInitSegment(d,b.tracks,x,s),i.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:r,tracks:b.tracks})}if(p){const{startPTS:x,endPTS:T,startDTS:_,endDTS:A}=p;u&&(u.elementaryStreams[gt.AUDIO]={startPTS:x,endPTS:T,startDTS:_,endDTS:A}),c.setElementaryStreamInfo(gt.AUDIO,x,T,_,A),this.bufferFragmentData(p,c,u,s)}if(v!=null&&(n=v.samples)!=null&&n.length){const x=ut({id:r,frag:c,details:h},v);i.trigger(D.FRAG_PARSING_METADATA,x)}if(y){const x=ut({id:r,frag:c,details:h},y);i.trigger(D.FRAG_PARSING_USERDATA,x)}}_bufferInitSegment(e,n,r,i){if(this.state!==fe.PARSING||(n.video&&delete n.video,n.audiovideo&&delete n.audiovideo,!n.audio))return;const a=n.audio;a.id=Se.AUDIO;const s=e.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${s}/${a.codec}]`),s&&s.split(",").length===1&&(a.levelCodec=s),this.hls.trigger(D.BUFFER_CODECS,n);const o=a.initSegment;if(o!=null&&o.byteLength){const c={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:o};this.hls.trigger(D.BUFFER_APPENDING,c)}this.tickImmediate()}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===en.NOT_LOADED||i===en.PARTIAL){var a;if(!Kt(e))this._loadInitSegment(e,n);else if((a=n.details)!=null&&a.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=fe.WAITING_INIT_PTS;const s=this.mainDetails;s&&s.fragmentStart!==n.details.fragmentStart&&kp(n.details,s)}else super.loadFragment(e,n,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o}=this.bufferedTrack;Ks({name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o},e,Ps)||(Ip(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(D.AUDIO_TRACK_SWITCHED,ht({},e))}}class d_ extends ri{constructor(e,n){super(n,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,r){const i=n==null?void 0:n.renditionReports;if(i){let a=-1;for(let s=0;s<i.length;s++){const o=i[s];let c;try{c=new self.URL(o.URI,n.url).href}catch(u){this.warn(`Could not construct new URL for Rendition Report: ${u}`),c=o.URI||""}if(c===e){a=s;break}else c===e.substring(0,c.length)&&(a=s)}if(a!==-1){const s=i[a],o=parseInt(s["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let c=parseInt(s["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const d=Math.min(n.age-n.partTarget,n.targetduration);c>=0&&d>n.partTarget&&(c+=1)}const u=r&&uU(r);return new cU(o,c>=0?c:void 0,u)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,n){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,n){if(n)try{return n.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,n,r){const{details:i,stats:a}=n,s=self.performance.now(),o=a.loading.first?Math.max(0,s-a.loading.first):0;i.advancedDateTime=Date.now()-o;const c=this.hls.config.timelineOffset;if(c!==i.appliedTimelineOffset){const d=Math.max(c||0,0);i.appliedTimelineOffset=d,i.fragments.forEach(h=>{h.start=h.playlistOffset+d})}if(i.live||r!=null&&r.live){const d="levelInfo"in n?n.levelInfo:n.track;if(i.reloaded(r),r&&i.fragments.length>0){gve(r,i);const _=i.playlistParsingError;if(_){this.warn(_);const A=this.hls;if(!A.config.ignorePlaylistParsingErrors){var u;const{networkDetails:O}=n;A.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:_,reason:_.message,level:n.level||void 0,parent:(u=i.fragments[0])==null?void 0:u.type,networkDetails:O,stats:a});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=a.loading.start);const h=this.hls.mainForwardBufferInfo,p=h?h.end-h.len:0,y=(i.edge-p)*1e3,v=iG(i,y);if(i.requestScheduled+v<s?i.requestScheduled=s:i.requestScheduled+=v,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let b,x,T;if(i.canBlockReload&&i.endSN&&i.advanced){const _=this.hls.config.lowLatencyMode,A=i.lastPartSn,O=i.endSN,R=i.lastPartIndex,C=R!==-1,L=A===O;C?L?(x=O+1,T=_?0:R):(x=A,T=_?R+1:i.maxPartIndex):x=O+1;const P=i.age,N=P+i.ageHeader;let k=Math.min(N-i.partTarget,i.targetduration*1.5);if(k>0){if(N>i.targetduration*3)this.log(`Playlist last advanced ${P.toFixed(2)}s ago. Omitting segment and part directives.`),x=void 0,T=void 0;else if(r!=null&&r.tuneInGoal&&N-i.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${k} with playlist age: ${i.age}`),k=0;else{const M=Math.floor(k/i.targetduration);if(x+=M,T!==void 0){const G=Math.round(k%i.targetduration/i.partTarget);T+=G}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${P.toFixed(2)}s goal: ${k} skip sn ${M} to part ${T}`)}i.tuneInGoal=k}if(b=this.getDeliveryDirectives(i,n.deliveryDirectives,x,T),_||!L){i.requestScheduled=s,this.loadingPlaylist(d,b);return}}else(i.canBlockReload||i.canSkipUntil)&&(b=this.getDeliveryDirectives(i,n.deliveryDirectives,x,T));b&&x!==void 0&&i.canBlockReload&&(i.requestScheduled=a.loading.first+Math.max(v-o*2,v/2)),this.scheduleLoading(d,b,i)}else this.clearTimer()}scheduleLoading(e,n,r){const i=r||e.details;if(!i){this.loadingPlaylist(e,n);return}const a=self.performance.now(),s=i.requestScheduled;if(a>=s){this.loadingPlaylist(e,n);return}const o=s-a;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,n),o)}getDeliveryDirectives(e,n,r,i){let a=uU(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,i=n.part,a=dm.No),new cU(r,i,a)}checkRetry(e){const n=e.details,r=Pp(e),i=e.errorAction,{action:a,retryCount:s=0,retryConfig:o}=i||{},c=!!i&&!!o&&(a===In.RetryRequest||!i.resolved&&a===In.SendAlternateToPenaltyBox);if(c){var u;if(s>=o.maxNumRetry)return!1;if(r&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const d=e_(o,s);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),d),this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${n}" in ${d}ms`)}e.levelRetry=!0,i.resolved=!0}return c}}function LG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!jf(t[n].attrs,e[n].attrs))return!1;return!0}function jf(t,e,n){const r=t["STABLE-RENDITION-ID"];return r&&!n?r===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function KA(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class Exe extends d_{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:i,details:a}=n,s=this.tracksInGroup[r];if(!s||s.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${s==null?void 0:s.groupId}`);return}const o=s.details;s.details=n.details,this.log(`Audio track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,o)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.audioGroups||null,i=this.groupIds;let a=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(o=>(i==null?void 0:i.indexOf(o))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(p=>!r||r.indexOf(p.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(p=>p.default)&&(this.selectDefaultTrack=!1),o.forEach((p,y)=>{p.id=y});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const c=this.hls.config.audioPreference;if(!a&&c){const p=yi(c,o,Ps);if(p>-1)a=o[p];else{const y=yi(c,this.tracks);a=this.tracks[y]}}let u=this.findTrackId(a);u===-1&&a&&(u=this.findTrackId(null));const d={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(D.AUDIO_TRACKS_UPDATED,d);const h=this.trackId;if(u!==-1&&h===-1)this.setAudioTrack(u);else if(o.length&&h===-1){var s;const p=new Error(`No audio track selected for current audio group-ID(s): ${(s=this.groupIds)==null?void 0:s.join(",")} track count: ${o.length}`);this.warn(p.message),this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:p})}}}onError(e,n){n.fatal||!n.context||n.context.type===He.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&Ks(e,i,Ps))return i;const a=yi(e,this.tracksInGroup,Ps);if(a>-1){const s=this.tracksInGroup[a];return this.setAudioTrack(a),s}else if(i){let s=n.loadLevel;s===-1&&(s=n.firstAutoLevel);const o=Mye(e,n.levels,r,s,Ps);if(o===-1)return null;n.nextLoadLevel=o}if(e.channels||e.audioCodec){const s=yi(e,r);if(s>-1)return r[s]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e],a=i.details&&!i.details.live;if(e===this.trackId&&i===r&&a||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(D.AUDIO_TRACK_SWITCHING,ht({},i)),a))return;const s=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(s)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Ks(e,i,Ps)))return r}if(e){const{name:r,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:c}=e;for(let u=0;u<n.length;u++){const d=n[u];if(Ks({name:r,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:c},d,Ps))return u}for(let u=0;u<n.length;u++){const d=n[u];if(jf(e.attrs,d.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<n.length;u++){const d=n[u];if(jf(e.attrs,d.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;this.shouldLoadPlaylist(n)&&Ip(n.url,this.hls)&&this.scheduleLoading(n,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,n),s=e.details,o=s==null?void 0:s.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger(D.AUDIO_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:n||null,track:e})}}class Txe{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,n,r){if(this.queues===null||this.tracks===null)return;const i=this.queues[n];i.push(e),i.length===1&&!r&&this.executeNext(n)}appendBlocker(e){return new Promise(n=>{const r={label:"async-blocker",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(n=>{if(this.queues){const r={label:"async-blocker-prepend",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var n;const r=(n=e[0])==null?void 0:n.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const n=this.queues[e];if(n.length){const i=n[0];try{i.execute()}catch(a){var r;if(i.onError(a),this.queues===null||this.tracks===null)return;const s=(r=this.tracks[e])==null?void 0:r.buffer;s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var n;return((n=this.queues)==null?void 0:n[e][0])||null}toString(){const{queues:e,tracks:n}=this;return e===null||n===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var n,r;return(n=this.queues)!=null&&n[e]||(r=this.tracks)!=null&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var n;const r=(n=this.tracks)==null?void 0:n[e],i=r==null?void 0:r.buffer;return i?`SourceBuffer${i.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var n;return((n=this.queues)==null?void 0:n[e].map(r=>r.label).join(", "))||""}}const YU=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,DG="HlsJsTrackRemovedError";class Axe extends Error{constructor(e){super(e),this.name=DG}}class wxe extends ri{constructor(e,n){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:i,mediaSource:a}=this;r&&this.log("Media source opened"),!(!i||!a)&&(a.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(D.MEDIA_ATTACHED,{media:i,mediaSource:a}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e,this.fragmentTracker=n,this.appendSource=Z0e(Za(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_APPENDING,this.onBufferAppending,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.BUFFER_EOS,this.onBufferEos,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.FRAG_PARSED,this.onFragParsed,this),e.on(D.FRAG_CHANGED,this.onFragChanged,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_APPENDING,this.onBufferAppending,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.BUFFER_EOS,this.onBufferEos,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.FRAG_PARSED,this.onFragParsed,this),e.off(D.FRAG_CHANGED,this.onFragChanged,this),e.off(D.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:n}=this;if(!e)return null;const r={};if(this.operationQueue){const a=this.isUpdating();a||this.operationQueue.removeBlockers();const s=this.isQueued();(a||s)&&this.warn(`Transfering MediaSource with${s?" operations in queue":""}${a?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===n?ut(r,i.tracks):this.sourceBuffers.forEach(a=>{const[s]=a;s&&(r[s]=ut({},this.tracks[s]),this.removeBuffer(s)),a[0]=a[1]=null}),{media:e,mediaSource:n,tracks:r}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){var r;let i=2;(n.audio&&!n.video||!n.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,n){const r=this.media=n.media,i=Za(this.appendSource);if(this.transferData=this.overrides=void 0,r&&i){const a=!!n.mediaSource;(a||n.overrides)&&(this.transferData=n,this.overrides=n.overrides);const s=this.mediaSource=n.mediaSource||new i;if(this.assignMediaSource(s),a)this._objectUrl=r.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{r.removeAttribute("src");const c=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||c&&s instanceof c,WU(r),_xe(r,o),r.load()}catch{r.src=o}else r.src=o}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var n,r;this.log(`${((n=this.transferData)==null?void 0:n.mediaSource)===e?"transferred":"created"} media source: ${(r=e.constructor)==null?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,n=this.transferData;if(!n||!e)return;const r=this.tracks,i=n.tracks,a=i?Object.keys(i):null,s=a?a.length:0,o=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(i&&a&&s){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Tt(r,(c,u)=>c==="initSegment"?void 0:u)};
transfer tracks: ${Tt(i,(c,u)=>c==="initSegment"?void 0:u)}}`),!P8(i,r)){n.mediaSource=null,n.tracks=void 0;const c=e.currentTime,u=this.details,d=Math.max(c,(u==null?void 0:u.fragments[0].start)||0);if(d-c>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${c} -> ${d}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(r)}") start time: ${d} currentTime: ${c}`),this.onMediaDetaching(D.MEDIA_DETACHING,{}),this.onMediaAttaching(D.MEDIA_ATTACHING,n),e.currentTime=d;return}this.transferData=void 0,a.forEach(c=>{const u=c,d=i[u];if(d){const h=d.buffer;if(h){const p=this.fragmentTracker,y=d.id;if(p.hasFragments(y)||p.hasParts(y)){const x=ke.getBuffered(h);p.detectEvictedFragments(u,x,y,null,!0)}const v=IE(u),b=[u,h];this.sourceBuffers[v]=b,h.updating&&this.operationQueue&&this.operationQueue.prependBlocker(u),this.trackSourceBuffer(u,d)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const n=(e=this.mediaSource)==null?void 0:e.readyState;return n==="open"||n==="ended"}onMediaDetaching(e,n){const r=!!n.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:a,_objectUrl:s}=this;if(a){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=a.readyState==="open";try{const c=a.sourceBuffers;for(let u=c.length;u--;)o&&c[u].abort(),a.removeSourceBuffer(c[u]);o&&a.endOfStream()}catch(c){this.warn(`onMediaDetaching: ${c.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),r||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(i.removeAttribute("src"),this.appendSource&&WU(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(D.MEDIA_DETACHED,n)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var n;const r=(n=this.tracks[e])==null?void 0:n.buffer;if(this.removeBuffer(e),r)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(a){this.warn(`onBufferReset ${e}`,a)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[IE(e)]=[null,null];const n=this.tracks[e];n&&(n.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new Txe(this.tracks)}onBufferCodecs(e,n){const r=this.tracks,i=Object.keys(n);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in n&&(r.audio||r.video)||r.audiovideo&&("audio"in n||"video"in n),s=!a&&this.sourceBufferCount&&this.media&&i.some(o=>!r[o]);if(a||s){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${i}" SourceBuffers`);return}i.forEach(o=>{var c,u,d;const h=n[o],{id:p,codec:y,levelCodec:v,container:b,metadata:x,supplemental:T}=h;let _=r[o];const A=(c=this.transferData)==null||(u=c.tracks)==null?void 0:u[o],O=A!=null&&A.buffer?A:_,R=(O==null?void 0:O.pendingCodec)||(O==null?void 0:O.codec),C=O==null?void 0:O.levelCodec;_||(_=r[o]={buffer:void 0,listeners:[],codec:y,supplemental:T,container:b,levelCodec:v,metadata:x,id:p});const L=fm(R,C),P=L==null?void 0:L.replace(YU,"$1");let N=fm(y,v);const k=(d=N)==null?void 0:d.replace(YU,"$1");N&&L&&P!==k&&(o.slice(0,5)==="audio"&&(N=Lp(N,this.appendSource)),this.log(`switching codec ${R} to ${N}`),N!==(_.pendingCodec||_.codec)&&(_.pendingCodec=N),_.container=b,this.appendChangeType(o,b,N))}),(this.tracksReady||this.sourceBufferCount)&&(n.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,n)=>{const r=this.tracks[n];return e[n]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,n,r){const i=`${n};codecs=${r}`,a={label:`change-type=${i}`,execute:()=>{const s=this.tracks[e];if(s){const o=s.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),o.changeType(i),s.codec=r,s.container=n)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};this.append(a,e,this.isPending(this.tracks[e]))}blockAudio(e){var n;const r=e.start,i=r+e.duration*.05;if(((n=this.fragmentTracker.getAppendedFrag(r,Se.MAIN))==null?void 0:n.gap)===!0)return;const s={label:"block-audio",execute:()=>{var o;const c=this.tracks.video;(this.lastVideoAppendEnd>i||c!=null&&c.buffer&&ke.isBuffered(c.buffer,i)||((o=this.fragmentTracker.getAppendedFrag(i,Se.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:s,frag:e},this.append(s,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:n}=this;e&&n&&(this.blockedAudioAppend=null,n.unblockAudio(e.op))}onBufferAppending(e,n){const{tracks:r}=this,{data:i,type:a,parent:s,frag:o,part:c,chunkMeta:u,offset:d}=n,h=u.buffering[a],{sn:p,cc:y}=o,v=self.performance.now();h.start=v;const b=o.stats.buffering,x=c?c.stats.buffering:null;b.start===0&&(b.start=v),x&&x.start===0&&(x.start=v);const T=r.audio;let _=!1;a==="audio"&&(T==null?void 0:T.container)==="audio/mpeg"&&(_=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const A=r.video,O=A==null?void 0:A.buffer;if(O&&p!=="initSegment"){const L=c||o,P=this.blockedAudioAppend;if(a==="audio"&&s!=="main"&&!this.blockedAudioAppend){const k=L.start+L.duration*.05,M=O.buffered,G=this.currentOp("video");!M.length&&!G?this.blockAudio(L):!G&&!ke.isBuffered(O,k)&&this.lastVideoAppendEnd<k&&this.blockAudio(L)}else if(a==="video"){const N=L.end;if(P){const k=P.frag.start;(N>k||N<this.lastVideoAppendEnd||ke.isBuffered(O,k))&&this.unblockAudio()}this.lastVideoAppendEnd=N}}const R=(c||o).start,C={label:`append-${a}`,execute:()=>{var L;h.executeStart=self.performance.now();const P=(L=this.tracks[a])==null?void 0:L.buffer;P&&(_?this.updateTimestampOffset(P,R,.1,a,p,y):d!==void 0&&xe(d)&&this.updateTimestampOffset(P,d,1e-6,a,p,y)),this.appendExecutor(i,a)},onStart:()=>{},onComplete:()=>{const L=self.performance.now();h.executeEnd=h.end=L,b.first===0&&(b.first=L),x&&x.first===0&&(x.first=L);const P={};this.sourceBuffers.forEach(([N,k])=>{N&&(P[N]=ke.getBuffered(k))}),this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(D.BUFFER_APPENDED,{type:a,frag:o,part:c,chunkMeta:u,parent:o.type,timeRanges:P})},onError:L=>{var P;const N={type:Te.MEDIA_ERROR,parent:o.type,details:re.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:c,chunkMeta:u,error:L,err:L,fatal:!1},k=(P=this.media)==null?void 0:P.error;if(L.code===DOMException.QUOTA_EXCEEDED_ERR||L.name=="QuotaExceededError"||"quota"in L)N.details=re.BUFFER_FULL_ERROR;else if(L.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!k)N.errorAction=Pf(!0);else if(L.name===DG&&this.sourceBufferCount===0)N.errorAction=Pf(!0);else{const M=++this.appendErrors[a];this.warn(`Failed ${M}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${k||"no media error"})`),(M>=this.hls.config.appendErrorMaxRetry||k)&&(N.fatal=!0)}this.hls.trigger(D.ERROR,N)}};this.append(C,a,this.isPending(this.tracks[a]))}getFlushOp(e,n,r){return this.log(`queuing "${e}" remove ${n}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,n,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(D.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${n}-${r} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,n){const{type:r,startOffset:i,endOffset:a}=n;r?this.append(this.getFlushOp(r,i,a),r):this.sourceBuffers.forEach(([s])=>{s&&this.append(this.getFlushOp(s,i,a),s)})}onFragParsed(e,n){const{frag:r,part:i}=n,a=[],s=i?i.elementaryStreams:r.elementaryStreams;s[gt.AUDIOVIDEO]?a.push("audiovideo"):(s[gt.AUDIO]&&a.push("audio"),s[gt.VIDEO]&&a.push("video"));const o=()=>{const c=self.performance.now();r.stats.buffering.end=c,i&&(i.stats.buffering.end=c);const u=i?i.stats:r.stats;this.hls.trigger(D.FRAG_BUFFERED,{frag:r,part:i,stats:u,id:r.type})};a.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(o,a).catch(c=>{this.warn(`Fragment buffered callback ${c}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,n){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var n,r;return e&&(!((n=this.tracks[e])!=null&&n.ended)||((r=this.tracks[e])==null?void 0:r.ending))})}onBufferEos(e,n){var r;this.sourceBuffers.forEach(([s])=>{if(s){const o=this.tracks[s];(!n.type||n.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} buffer reached EOS`)))}});const i=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([s])=>{var o;return s&&!((o=this.tracks[s])!=null&&o.ended)})&&(i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream(),this.hls.trigger(D.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(D.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const n=this.tracks[e];n&&(n.ending=!1)}})}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,n){if(n.details===re.BUFFER_APPEND_ERROR&&n.frag){var r;const i=(r=n.errorAction)==null?void 0:r.nextAutoLevel;xe(i)&&i!==n.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:n,media:r}=this;if(!r||n===null||!this.sourceBufferCount)return;const i=e.config,a=r.currentTime,s=n.levelTargetDuration,o=n.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(xe(o)&&o>=0){const c=Math.max(o,s),u=Math.floor(a/s)*s-c;this.flushBackBuffer(a,s,u)}if(xe(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){const c=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),u=Math.max(c,s),d=Math.floor(a/s)*s+u;this.flushFrontBuffer(a,s,d)}}flushBackBuffer(e,n,r){this.sourceBuffers.forEach(([i,a])=>{if(a){const o=ke.getBuffered(a);if(o.length>0&&r>o.start(0)){var s;this.hls.trigger(D.BACK_BUFFER_REACHED,{bufferEnd:r});const c=this.tracks[i];if((s=this.details)!=null&&s.live)this.hls.trigger(D.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(c!=null&&c.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:i})}}})}flushFrontBuffer(e,n,r){this.sourceBuffers.forEach(([i,a])=>{if(a){const s=ke.getBuffered(a),o=s.length;if(o<2)return;const c=s.start(o-1),u=s.end(o-1);if(r>c||e>=c&&e<=u)return;this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:n,mediaSource:r}=this;if(!n||!this.media||(r==null?void 0:r.readyState)!=="open")return null;const i=n.edge;if(n.live&&this.hls.config.liveDurationInfinity){if(n.fragments.length&&n.live&&r.setLiveSeekableRange){const u=Math.max(0,n.fragmentStart),d=Math.max(u,i);return{duration:1/0,start:u,end:d}}return{duration:1/0}}const a=(e=this.overrides)==null?void 0:e.duration;if(a)return xe(a)?{duration:a}:null;const s=this.media.duration,o=xe(r.duration)?r.duration:0;return i>o&&i>s||!xe(s)?{duration:i}:null}updateMediaSource({duration:e,start:n,end:r}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(xe(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),n!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${n}-${r}.`),i.setLiveSeekableRange(n,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:n,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${n} codec events expected: ${e}) ${Tt(r)}`),this.tracksReady){var i;const a=(i=this.transferData)==null?void 0:i.tracks;a&&Object.keys(a).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([n,r])=>{if(n){const i=this.tracks[n];e[n]={buffer:r,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(D.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([n])=>{this.executeNext(n)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:n,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in e){const s=a,o=e[s];if(this.isPending(o)){const c=this.getTrackCodec(o,s),u=`${o.container};codecs=${c}`;o.codec=c,this.log(`creating sourceBuffer(${u})${this.currentOp(s)?" Queued":""} ${Tt(o)}`);try{const d=r.addSourceBuffer(u),h=IE(s),p=[s,d];n[h]=p,o.buffer=d}catch(d){var i;this.error(`error while trying to add sourceBuffer: ${d.message}`),this.shiftAndExecuteNext(s),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[s],this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:d,sourceBufferName:s,mimeType:u,parent:o.id});return}this.trackSourceBuffer(s,o)}}this.bufferCreated()}getTrackCodec(e,n){const r=e.supplemental;let i=e.codec;r&&(n==="video"||n==="audiovideo")&&jA(r,"video")&&(i=vye(i,r));const a=fm(i,e.levelCodec);return a?n.slice(0,5)==="audio"?Lp(a,this.appendSource):a:""}trackSourceBuffer(e,n){const r=n.buffer;if(!r)return;const i=this.getTrackCodec(n,e);this.tracks[e]={buffer:r,codec:i,container:n.container,levelCodec:n.levelCodec,supplemental:n.supplemental,metadata:n.metadata,id:n.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(a,s)=>{const o=s.removedRanges;o!=null&&o.length&&this.hls.trigger(D.BUFFER_FLUSHED,{type:a})})}get mediaSrc(){var e,n;const r=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return r==null?void 0:r.src}onSBUpdateStart(e){const n=this.currentOp(e);n&&n.onStart()}onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,n){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,n),this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const a=this.currentOp(e);a&&a.onError(i)}updateTimestampOffset(e,n,r,i,a,s){const o=n-e.timestampOffset;Math.abs(o)>=r&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${n} (sn: ${a} cc: ${s})`),e.timestampOffset=n)}removeExecutor(e,n,r){const{media:i,mediaSource:a}=this,s=this.tracks[e],o=s==null?void 0:s.buffer;if(!i||!a||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const c=xe(i.duration)?i.duration:1/0,u=xe(a.duration)?a.duration:1/0,d=Math.max(0,n),h=Math.min(r,c,u);h>d&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${d},${h}] from the ${e} SourceBuffer`),o.remove(d,h)):this.shiftAndExecuteNext(e)}appendExecutor(e,n){const r=this.tracks[n],i=r==null?void 0:r.buffer;if(!i)throw new Axe(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(n=>{this.warn(`SourceBuffer blocked callback ${n}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(n){this.warn(`Callback run without blocking ${this.operationQueue} ${n}`)}}isUpdating(){return this.sourceBuffers.some(([e,n])=>e&&n.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,n=this.sourceBufferTypes){if(!n.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,i=n.map(s=>this.appendBlocker(s));return n.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(s=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(n=>{var r;const i=(r=this.tracks[n])==null?void 0:r.buffer;!i||i.updating||this.shiftAndExecuteNext(n)})}append(e,n,r){this.operationQueue&&this.operationQueue.append(e,n,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,n)=>e+(this.isPending(this.tracks[n])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[n])=>e+(n?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,n,r){const i=this.tracks[e];if(!i)return;const a=i.buffer;if(!a)return;const s=r.bind(this,e);i.listeners.push({event:n,listener:s}),a.addEventListener(n,s)}removeBufferListeners(e){const n=this.tracks[e];if(!n)return;const r=n.buffer;r&&(n.listeners.forEach(i=>{r.removeEventListener(i.event,i.listener)}),n.listeners.length=0)}}function WU(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function _xe(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}function IE(t){return t==="audio"?1:0}class h_{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&xe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&n.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelEnabled&&n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((i,a)=>this.isLevelAllowed(i)&&a<=e);return this.clientRect=null,h_.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const i=(o,c)=>c?o.width!==c.width||o.height!==c.height:!0;let a=e.length-1;const s=Math.max(n,r);for(let o=0;o<e.length;o+=1){const c=e[o];if((c.width>=s||c.height>=s)&&i(c,e[o+1])){a=o;break}}return a}}const Rxe={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},zn=Rxe,Oxe={HLS:"h"},Cxe=Oxe,Lxe="CMCD-Object",Dxe="CMCD-Request",Ixe="CMCD-Session",Pxe="CMCD-Status",wc={OBJECT:Lxe,REQUEST:Dxe,SESSION:Ixe,STATUS:Pxe},Nxe={[wc.OBJECT]:["br","ab","d","ot","tb","tpb","lb","tab","lab","url"],[wc.REQUEST]:["pb","bl","tbl","dl","ltc","mtp","nor","nrr","rc","sn","sta","su","ttfb","ttfbb","ttlb","cmsdd","cmsds","smrt","df","cs"],[wc.SESSION]:["cid","pr","sf","sid","st","v","msd"],[wc.STATUS]:["bs","bsd","cdn","rtp","bg","pt","ec","e"]};class Vl{constructor(e,n){Array.isArray(e)&&(e=e.map(r=>r instanceof Vl?r:new Vl(r))),this.value=e,this.params=n}}const Mxe="Dict";function kxe(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function jxe(t,e,n,r){return new Error(`failed to ${t} "${kxe(e)}" as ${n}`,{cause:r})}function wi(t,e,n){return jxe("serialize",t,e,n)}class IG{constructor(e){this.description=e}}const XU="Bare Item",Uxe="Boolean";function Bxe(t){if(typeof t!="boolean")throw wi(t,Uxe);return t?"?1":"?0"}function Fxe(t){return btoa(String.fromCharCode(...t))}const $xe="Byte Sequence";function Gxe(t){if(ArrayBuffer.isView(t)===!1)throw wi(t,$xe);return`:${Fxe(t)}:`}const Vxe="Integer";function qxe(t){return t<-999999999999999||999999999999999<t}function PG(t){if(qxe(t))throw wi(t,Vxe);return t.toString()}function Hxe(t){return`@${PG(t.getTime()/1e3)}`}function NG(t,e){if(t<0)return-NG(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const i=Math.floor(t*n);return(i%2===0?i:i+1)/n}else return Math.round(t*n)/n}const zxe="Decimal";function Kxe(t){const e=NG(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw wi(t,zxe);const n=e.toString();return n.includes(".")?n:`${n}.0`}const Yxe="String",Wxe=/[\x00-\x1f\x7f]+/;function Xxe(t){if(Wxe.test(t))throw wi(t,Yxe);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Qxe(t){return t.description||t.toString().slice(7,-1)}const Zxe="Token";function QU(t){const e=Qxe(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw wi(e,Zxe);return e}function YA(t){switch(typeof t){case"number":if(!xe(t))throw wi(t,XU);return Number.isInteger(t)?PG(t):Kxe(t);case"string":return Xxe(t);case"symbol":return QU(t);case"boolean":return Bxe(t);case"object":if(t instanceof Date)return Hxe(t);if(t instanceof Uint8Array)return Gxe(t);if(t instanceof IG)return QU(t);default:throw wi(t,XU)}}const Jxe="Key";function WA(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw wi(t,Jxe);return t}function m_(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${WA(e)}`:`;${WA(e)}=${YA(n)}`).join("")}function MG(t){return t instanceof Vl?`${YA(t.value)}${m_(t.params)}`:YA(t)}function ebe(t){return`(${t.value.map(MG).join(" ")})${m_(t.params)}`}function tbe(t,e={whitespace:!0}){if(typeof t!="object")throw wi(t,Mxe);const n=t instanceof Map?t.entries():Object.entries(t),r=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([i,a])=>{a instanceof Vl||(a=new Vl(a));let s=WA(i);return a.value===!0?s+=m_(a.params):(s+="=",Array.isArray(a.value)?s+=ebe(a):s+=MG(a)),s}).join(`,${r}`)}function nbe(t,e){return tbe(t,e)}function rbe(t){return["ot","sf","st","e","sta"].includes(t)}function ibe(t){return typeof t=="number"?xe(t):t!=null&&t!==""&&t!==!1}function abe(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const i=n.pathname.split("/").slice(1),a=r.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")}const gm=t=>Math.round(t),sbe=(t,e)=>(e!=null&&e.baseUrl&&(t=abe(t,e.baseUrl)),encodeURIComponent(t)),Xh=t=>gm(t/100)*100,obe={br:gm,d:gm,bl:Xh,dl:Xh,mtp:Xh,nor:sbe,rtp:Xh,tb:gm};function lbe(t,e){const n={};if(t==null||typeof t!="object")return n;const r=Object.keys(t).sort(),i=ut({},obe,e==null?void 0:e.formatters),a=e==null?void 0:e.filter;return r.forEach(s=>{if((a==null?void 0:a(s))===!1)return;let o=t[s];const c=i[s];c&&(o=c(o,e)),!(s==="v"&&o===1)&&(s=="pr"&&o===1||ibe(o)&&(rbe(s)&&typeof o=="string"&&(o=new IG(o)),n[s]=o))}),n}function kG(t,e={}){return t?nbe(lbe(t,e),ut({whitespace:!1},e)):""}function ube(t,e={}){const n={};if(!t)return n;const r=Object.entries(t),i=Object.entries(Nxe).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),a=r.reduce((s,o)=>{var c,u;const[d,h]=o,p=((c=i.find(y=>y[1].includes(d)))===null||c===void 0?void 0:c[0])||wc.REQUEST;return(u=s[p])!==null&&u!==void 0||(s[p]={}),s[p][d]=h,s},{});return Object.entries(a).reduce((s,[o,c])=>(s[o]=kG(c,e),s),n)}function cbe(t,e,n){return ut(t,ube(e,n))}const fbe="CMCD";function dbe(t,e={}){if(!t)return"";const n=kG(t,e);return`${fbe}=${encodeURIComponent(n)}`}const ZU=/CMCD=[^&#]+/;function hbe(t,e,n){const r=dbe(e,n);if(!r)return t;if(ZU.test(t))return t.replace(ZU,r);const i=t.includes("?")?"&":"?";return`${t}${i}${r}`}class mbe{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:zn.MANIFEST,su:!this.initialized})}catch(a){this.hls.logger.warn("Could not generate manifest CMCD data.",a)}},this.applyFragmentData=i=>{try{const{frag:a,part:s}=i,o=this.hls.levels[a.level],c=this.getObjectType(a),u={d:(s||a).duration*1e3,ot:c};(c===zn.VIDEO||c===zn.AUDIO||c==zn.MUXED)&&(u.br=o.bitrate/1e3,u.tb=this.getTopBandwidth(c)/1e3,u.bl=this.getBufferLength(c));const d=s?this.getNextPart(s):this.getNextFrag(a);d!=null&&d.url&&d.url!==a.url&&(u.nor=d.url),this.apply(i,u)}catch(a){this.hls.logger.warn("Could not generate segment CMCD data.",a)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHED,this.onMediaDetached,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHED,this.onMediaDetached,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,i;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=n.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:Cxe.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){ut(n,this.createData());const r=n.ot===zn.INIT||n.ot===zn.VIDEO||n.ot===zn.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:i}=this;i&&(n=Object.keys(n).reduce((s,o)=>(i.includes(o)&&(s[o]=n[o]),s),{}));const a={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),cbe(e.headers,n,a)):e.url=hbe(e.url,n,a)}getNextFrag(e){var n;const r=(n=this.hls.levels[e.level])==null?void 0:n.details;if(r){const i=e.sn-r.startSN;return r.fragments[i+1]}}getNextPart(e){var n,r;const{index:i,fragment:a}=e,s=(n=this.hls.levels[a.level])==null||(r=n.details)==null?void 0:r.partList;if(s){const{sn:o}=a;for(let c=s.length-1;c>=0;c--){const u=s[c];if(u.index===i&&u.fragment.sn===o)return s[c+1]}}}getObjectType(e){const{type:n}=e;if(n==="subtitle")return zn.TIMED_TEXT;if(e.sn==="initSegment")return zn.INIT;if(n==="audio")return zn.AUDIO;if(n==="main")return this.hls.audioTracks.length?zn.VIDEO:zn.MUXED}getTopBandwidth(e){let n=0,r;const i=this.hls;if(e===zn.AUDIO)r=i.audioTracks;else{const a=i.maxAutoLevel,s=a>-1?a+1:i.levels.length;r=i.levels.slice(0,s)}return r.forEach(a=>{a.bitrate>n&&(n=a.bitrate)}),n>0?n:NaN}getBufferLength(e){const n=this.media,r=e===zn.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:ke.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new r(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){n(a),this.loader.load(a,s,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new r(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){n(a),this.loader.load(a,s,o)}}}}const pbe=3e5;class gbe extends ri{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,n)=>(e.indexOf(n.pathwayId)===-1&&e.push(n.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===In.SendAlternateToPenaltyBox&&r.flags===Kr.MoveAllAlternatesMatchingHost){const i=this.levels;let a=this._pathwayPriority,s=this.pathwayId;if(n.context){const{groupId:o,pathwayId:c,type:u}=n.context;o&&i?s=this.getPathwayForGroupId(o,u,s):c&&(s=c)}s in this.penalizedPathways||(this.penalizedPathways[s]=performance.now()),!a&&i&&(a=this.pathways()),a&&a.length>1&&(this.updatePathwayPriority(a),r.resolved=this.pathwayId!==s),n.details===re.BUFFER_APPEND_ERROR&&!n.fatal?r.resolved=!0:r.resolved||this.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${s} levels: ${i&&i.length} priorities: ${Tt(a)} penalized: ${Tt(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length&&this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let n;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(a=>{i-r[a]>pbe&&delete r[a]});for(let a=0;a<e.length;a++){const s=e[a];if(s in r)continue;if(s===this.pathwayId)return;const o=this.hls.nextLoadLevel,c=this.hls.levels[o];if(n=this.getLevelsForPathway(s),n.length>0){this.log(`Setting Pathway to "${s}"`),this.pathwayId=s,oG(n),this.hls.trigger(D.LEVELS_UPDATED,{levels:n});const u=this.hls.levels[o];c&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==c.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==c.bitrate&&this.log(`Unstable Pathways change from bitrate ${c.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,n,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let a=0;a<i.length;a++)if(n===He.AUDIO_TRACK&&i[a].hasAudioGroup(e)||n===He.SUBTITLE_TRACK&&i[a].hasSubtitleGroup(e))return i[a].pathwayId;return r}clonePathways(e){const n=this.levels;if(!n)return;const r={},i={};e.forEach(a=>{const{ID:s,"BASE-ID":o,"URI-REPLACEMENT":c}=a;if(n.some(d=>d.pathwayId===s))return;const u=this.getLevelsForPathway(o).map(d=>{const h=new Ct(d.attrs);h["PATHWAY-ID"]=s;const p=h.AUDIO&&`${h.AUDIO}_clone_${s}`,y=h.SUBTITLES&&`${h.SUBTITLES}_clone_${s}`;p&&(r[h.AUDIO]=p,h.AUDIO=p),y&&(i[h.SUBTITLES]=y,h.SUBTITLES=y);const v=jG(d.uri,h["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",c),b=new If({attrs:h,audioCodec:d.audioCodec,bitrate:d.bitrate,height:d.height,name:d.name,url:v,videoCodec:d.videoCodec,width:d.width});if(d.audioGroups)for(let x=1;x<d.audioGroups.length;x++)b.addGroupId("audio",`${d.audioGroups[x]}_clone_${s}`);if(d.subtitleGroups)for(let x=1;x<d.subtitleGroups.length;x++)b.addGroupId("text",`${d.subtitleGroups[x]}_clone_${s}`);return b});n.push(...u),JU(this.audioTracks,r,c,s),JU(this.subtitleTracks,i,c,s)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const d=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+d)}const a={responseType:"json",url:i.href},s=n.steeringManifestLoadPolicy.default,o=s.errorRetry||s.timeoutRetry||{},c={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(d,h,p,y)=>{this.log(`Loaded steering manifest: "${i}"`);const v=d.data;if((v==null?void 0:v.VERSION)!==1){this.log(`Steering VERSION ${v.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=v.TTL;const{"RELOAD-URI":b,"PATHWAY-CLONES":x,"PATHWAY-PRIORITY":T}=v;if(b)try{this.uri=new self.URL(b,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${b}`);return}this.scheduleRefresh(this.uri||p.url),x&&this.clonePathways(x);const _={steeringManifest:v,url:i.toString()};this.hls.trigger(D.STEERING_MANIFEST_LOADED,_),T&&this.updatePathwayPriority(T)},onError:(d,h,p,y)=>{if(this.log(`Error loading steering manifest: ${d.code} ${d.text} (${h.url})`),this.stopLoad(),d.code===410){this.enabled=!1,this.log(`Steering manifest ${h.url} no longer available`);return}let v=this.timeToLoad*1e3;if(d.code===429){const b=this.loader;if(typeof(b==null?void 0:b.getResponseHeader)=="function"){const x=b.getResponseHeader("Retry-After");x&&(v=parseFloat(x)*1e3)}this.log(`Steering manifest ${h.url} rate limited`);return}this.scheduleRefresh(this.uri||h.url,v)},onTimeout:(d,h,p)=>{this.log(`Timeout loading steering manifest (${h.url})`),this.scheduleRefresh(this.uri||h.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(a,c,u)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function JU(t,e,n,r){t&&Object.keys(e).forEach(i=>{const a=t.filter(s=>s.groupId===i).map(s=>{const o=ut({},s);return o.details=void 0,o.attrs=new Ct(o.attrs),o.url=o.attrs.URI=jG(s.url,s.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=r,o});t.push(...a)})}function jG(t,e,n,r){const{HOST:i,PARAMS:a,[n]:s}=r;let o;e&&(o=s==null?void 0:s[e],o&&(t=o));const c=new self.URL(t);return i&&!o&&(c.host=i),a&&Object.keys(a).sort().forEach(u=>{u&&c.searchParams.set(u,a[u])}),c.href}function Lr(t,e,n){Jr(t,e,n),t.addEventListener(e,n)}function Jr(t,e,n){t.removeEventListener(e,n)}class pl extends ri{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=pl.CDMCleanupPromise?[pl.CDMCleanupPromise]:[],this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(D.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(D.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,i=n[e];if(i)return i.licenseUrl;if(e===Ft.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const n=this.getLicenseServerUrl(e);if(n===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return n}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(s,o,c)=>!!s&&c.indexOf(s)===o,i=n.map(s=>s.audioCodec).filter(r),a=n.map(s=>s.videoCodec).filter(r);return i.length+a.length===0&&a.push("avc1.42e01e"),new Promise((s,o)=>{const c=u=>{const d=u.shift();this.getMediaKeysPromise(d,i,a).then(h=>s({keySystem:d,mediaKeys:h})).catch(h=>{u.length?c(u):h instanceof _r?o(h):o(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_ACCESS,error:h,fatal:!0},h.message))})};c(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return eG===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,n)}getMediaKeysPromise(e,n,r){const i=ove(e,n,r,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e];let s=a==null?void 0:a.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Tt(i)}`),s=this.requestMediaKeySystemAccess(e,i);const o=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),s.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const u=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=c.createMediaKeys().then(d=>(this.log(`Media-keys created for "${e}"`),o.hasMediaKeys=!0,u.then(h=>h?this.setMediaKeysServerCertificate(d,e,h):d))),o.mediaKeys.catch(d=>{this.error(`Failed to create media-keys for "${e}"}: ${d}`)}),o.mediaKeys})}return s.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${Ns.hexDump(e.keyId||[])}`);const i=r.createSession(),a={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(n),a="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,a,n.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Ns.hexDump(e.keyId)}updateKeySession(e,n){var r;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${Ns.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),i.update(n)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>wU(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:n,mediaKeys:r})=>this.attemptSetMediaKeys(n,r))}selectKeySystem(e){return new Promise((n,r)=>this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const a=wU(i);a?n(a):r(new Error(`Unable to find format for key-system "${i}"`))}).catch(r))}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){const n=hm(this.config),r=e.map(GA).filter(i=>!!i&&n.indexOf(i)!==-1);return this.selectKeySystem(r)}loadKey(e){const n=e.keyInfo.decryptdata,r=this.getKeyIdString(n),i=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${i}`);let a=this.keyIdToKeySessionPromise[r];return a||(a=this.getKeySystemForKeyPromise(n).then(({keySystem:o,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(o,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:o,mediaKeys:c,decryptdata:n}))))),(this.keyIdToKeySessionPromise[r]=a.then(o=>{const c="cenc",u=n.pssh?n.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(o,c,u,"playlist-key")})).catch(o=>this.handleError(o))),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof _r?this.hls.trigger(D.ERROR,e.data):this.hls.trigger(D.ERROR,{type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[n];if(!r){const i=GA(e.keyFormat),a=i?[i]:hm(this.config);return this.attemptKeySystemAccess(a)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=hm(this.config)),e.length===0)throw new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Tt({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,n){if(this.mediaKeys===n)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.mediaKeys=n,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(a=>r.indexOf(a)===-1)})}generateRequestWithPreferredKeySession(e,n,r,i){var a,s;const o=(a=this.config.drmSystems)==null||(s=a[e.keySystem])==null?void 0:s.generateRequest;if(o)try{const v=o.call(this.hls,n,r,e);if(!v)throw new Error("Invalid response from configured generateRequest filter");n=v.initDataType,r=v.initData?v.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(v){var c;if(this.warn(v.message),(c=this.hls)!=null&&c.config.debug)throw v}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const u=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${u} (init data type: ${n} length: ${r?r.byteLength:null})`);const d=new a_,h=e._onmessage=v=>{const b=e.mediaKeysSession;if(!b){d.emit("error",new Error("invalid state"));return}const{messageType:x,message:T}=v;this.log(`"${x}" message event for session "${b.sessionId}" message size: ${T.byteLength}`),x==="license-request"||x==="license-renewal"?this.renewLicense(e,T).catch(_=>{d.eventNames().length?d.emit("error",_):this.handleError(_)}):x==="license-release"?e.keySystem===Ft.FAIRPLAY&&(this.updateKeySession(e,$A("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${x}"`)},p=e._onkeystatuseschange=v=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const x=e.keyStatus;d.emit("keyStatus",x),x==="expired"&&(this.warn(`${e.keySystem} expired for key ${u}`),this.renewKeySession(e))};Lr(e.mediaKeysSession,"message",h),Lr(e.mediaKeysSession,"keystatuseschange",p);const y=new Promise((v,b)=>{d.on("error",b),d.on("keyStatus",x=>{x.startsWith("usable")?v():x==="output-restricted"?b(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):x==="internal-error"?b(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${x}"`)):x==="expired"?b(new Error("key expired while generating request")):this.warn(`unhandled key status change "${x}"`)})});return e.mediaKeysSession.generateRequest(n,r).then(()=>{var v;this.log(`Request generated for key-session "${(v=e.mediaKeysSession)==null?void 0:v.sessionId}" keyId: ${u}`)}).catch(v=>{throw new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_SESSION,error:v,fatal:!1},`Error generating key-session request: ${v}`)}).then(()=>y).catch(v=>{throw d.removeAllListeners(),this.removeSession(e),v}).then(()=>(d.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,r)=>{if(typeof r=="string"&&typeof n=="object"){const i=r;r=n,n=i}this.log(`key status change "${n}" for keyStatuses keyId: ${Ns.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${Ns.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,r=n.loader,i=new r(n),a=this.getServerCertificateUrl(e);return a?(this.log(`Fetching server certificate for "${e}"`),new Promise((s,o)=>{const c={responseType:"arraybuffer",url:a},u=n.certLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,y,v,b)=>{s(p.data)},onError:(p,y,v,b)=>{o(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:ht({url:c.url,data:void 0},p)},`"${e}" certificate request failed (${a}). Status: ${p.code} (${p.text})`))},onTimeout:(p,y,v)=>{o(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:c.url,data:void 0}},`"${e}" certificate request timed out (${a})`))},onAbort:(p,y,v)=>{o(new Error("aborted"))}};i.load(c,d,h)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((i,a)=>{e.setServerCertificate(r).then(s=>{this.log(`setServerCertificate ${s?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),i(e)}).catch(s=>{a(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:s,fatal:!0},s.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const i=new DOMParser().parseFromString(r,"application/xml"),a=i.querySelectorAll("HttpHeader");if(a.length>0){let d;for(let h=0,p=a.length;h<p;h++){var s,o;d=a[h];const y=(s=d.querySelector("name"))==null?void 0:s.textContent,v=(o=d.querySelector("value"))==null?void 0:o.textContent;y&&v&&e.setRequestHeader(y,v)}}const c=i.querySelector("Challenge"),u=c==null?void 0:c.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return $A(atob(u))}setupLicenseXHR(e,n,r,i){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return a.call(this.hls,e,n,r,i)}).catch(s=>{if(!r.decryptdata)throw s;return e.open("POST",n,!0),a.call(this.hls,e,n,r,i)}).then(s=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:s||i})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((i,a)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${s}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let c=o.response;this.log(`License received ${c instanceof ArrayBuffer?c.byteLength:c}`);const u=this.config.licenseResponseCallback;if(u)try{c=u.call(this.hls,o,s,e)}catch(d){this.error(d)}i(c)}else{const c=r.errorRetry,u=c?c.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||o.status>=400&&o.status<500)a(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${s}). Status: ${o.status} (${o.statusText})`));else{const d=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${d} attempts left`),this.requestLicense(e,n).then(i,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,s,e,n).then(({xhr:c,licenseChallenge:u})=>{e.keySystem==Ft.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(c,u)),c.send(u)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,Lr(r,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Jr(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Pg.clearKeyUriToKeyIdMap();const i=r.length;pl.CDMCleanupPromise=Promise.all(r.map(a=>this.removeSession(a)).concat(n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(a=>{var s;this.log(`Could not clear media keys: ${a}`),(s=this.hls)==null||s.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${a}`)})}))).catch(a=>{var s;this.log(`Could not close sessions and clear media keys: ${a}`),(s=this.hls)==null||s.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${a}`)})}).then(()=>{i&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((i,a)=>(i.indexOf(a.keyFormat)===-1&&i.push(a.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{drmSystemOptions:a}=this.config;return(uve(a)?new Promise((o,c)=>{self.setTimeout(()=>c(new Error("MediaKeySession.remove() timeout")),8e3),n.remove().then(o)}):Promise.resolve()).catch(o=>{var c;this.log(`Could not remove session: ${o}`),(c=this.hls)==null||c.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${o}`)})}).then(()=>n.close()).catch(o=>{var c;this.log(`Could not close session: ${o}`),(c=this.hls)==null||c.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${o}`)})})}}}pl.CDMCleanupPromise=void 0;class _r extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}class ybe{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(D.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(D.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,n,r){const i=performance.now();if(n){if(this.lastTime){const a=i-this.lastTime,s=r-this.lastDroppedFrames,o=n-this.lastDecodedFrames,c=1e3*s/a,u=this.hls;if(u.trigger(D.FPS_DROP,{currentDropped:s,currentDecoded:o,totalDroppedFrames:r}),c>0&&s>u.config.fpsDroppedMonitoringThreshold*o){let d=u.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=d)&&(d=d-1,u.trigger(D.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function UG(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function BG(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){Ze.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){Ze.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}n==="disabled"&&(t.mode=n)}function ul(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues)for(let r=t.cues.length;r--;)e&&t.cues[r].removeEventListener("enter",e),t.removeCue(t.cues[r]);n==="disabled"&&(t.mode=n)}function XA(t,e,n,r){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const a=xbe(t.cues,e,n);for(let s=0;s<a.length;s++)(!r||r(a[s]))&&t.removeCue(a[s])}i==="disabled"&&(t.mode=i)}function vbe(t,e){if(e<=t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,i=n,a;for(;r<=i;)if(a=Math.floor((i+r)/2),e<t[a].startTime)i=a-1;else if(e>t[a].startTime&&r<n)r=a+1;else return a;return t[r].startTime-e<e-t[i].startTime?r:i}function xbe(t,e,n){const r=[],i=vbe(t,e);if(i>-1)for(let a=i,s=t.length;a<s;a++){const o=t[a];if(o.startTime>=e&&o.endTime<=n)r.push(o);else if(o.startTime>n)return r}return r}function ym(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}class bbe extends d_{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=ym(this.media.textTracks);for(let a=0;a<r.length;a++)if(r[a].mode==="hidden")n=r[a];else if(r[a].mode==="showing"){n=r[a];break}const i=this.findTrackForTextTrack(n);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,n){const r=this.media;if(!r)return;const i=!!n.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;ym(r.textTracks).forEach(s=>{ul(s)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,groupId:i,details:a}=n,s=this.tracksInGroup[r];if(!s||s.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${s==null?void 0:s.groupId}`);return}const o=s.details;s.details=n.details,this.log(`Subtitle track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,o)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.subtitleGroups||null,i=this.groupIds;let a=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(s=>(i==null?void 0:i.indexOf(s))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const s=this.tracks.filter(d=>!r||r.indexOf(d.groupId)!==-1);if(s.length)this.selectDefaultTrack&&!s.some(d=>d.default)&&(this.selectDefaultTrack=!1),s.forEach((d,h)=>{d.id=h});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=s;const o=this.hls.config.subtitlePreference;if(!a&&o){this.selectDefaultTrack=!1;const d=yi(o,s);if(d>-1)a=s[d];else{const h=yi(o,this.tracks);a=this.tracks[h]}}let c=this.findTrackId(a);c===-1&&a&&(c=this.findTrackId(null));const u={subtitleTracks:s};this.log(`Updating subtitle tracks, ${s.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(D.SUBTITLE_TRACKS_UPDATED,u),c!==-1&&this.trackId===-1&&this.setSubtitleTrack(c)}}findTrackId(e){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<n.length;i++){const a=n[i];if(!(r&&!a.default||!r&&!e)&&(!e||Ks(a,e)))return i}if(e){for(let i=0;i<n.length;i++){const a=n[i];if(jf(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<n.length;i++){const a=n[i];if(jf(e.attrs,a.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(KA(i,e))return r}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===He.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&Ks(e,r))return r;const i=yi(e,this.tracksInGroup);if(i>-1){const a=this.tracksInGroup[i];return this.setSubtitleTrack(i),a}else{if(r)return null;{const a=yi(e,n);if(a>-1)return n[a]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,n),s=e.details,o=s==null?void 0:s.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger(D.SUBTITLE_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:n||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=ym(e.textTracks),r=this.currentTrack;let i;if(r&&(i=n.filter(a=>KA(r,a))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(a=>{a.mode!=="disabled"&&a!==i&&(a.mode="disabled")}),i){const a=this.subtitleDisplay?"showing":"hidden";i.mode!==a&&(i.mode=a)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!xe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:e});return}const a=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&a)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:o="",name:c,type:u,url:d}=i;this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:s,groupId:o,name:c,type:u,url:d});const h=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(h)}}function Sbe(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const a=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(i=="x"?a:a&3|8).toString(16)})}}}function Uc(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0).toString()}const gl=.025;let Up=function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t}({});function Ebe(t,e,n){return`${t.identifier}-${n+1}-${Uc(e)}`}class Tbe{constructor(e,n){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=n,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var n;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return e<=0||isNaN(r)?!1:r===0?!0:(((n=this.assetList[e])==null?void 0:n.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const n=this.dateRange.tagAnchor;if(n)return PE(e,n)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const n=this.dateRange.startTime,r=PE(n,e);return n-r<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,n=xe(e)?e:this.duration;return this.cumulativeDuration+n}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const n=this.resumeAnchor;if(n)return PE(e,n)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<gl))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let n;return this._duration!==null?n=this._duration:this.dateRange.duration?n=this.dateRange.duration:n=this.dateRange.plannedDuration||0,!isNaN(e)&&e<n&&(n=e),n}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Up.Range:Up.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return Abe(this)}}function PE(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<gl)?e.start:e.start+e.duration}function FG(t,e,n){const r=new self.URL(t,n);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",e),r}function NE(t,e){for(;(n=t.assetList[++e])!=null&&n.error;)var n;return e}function Abe(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function el(t){const e=t.timelineStart,n=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+n).toFixed(2)}]`}class wbe{constructor(e,n,r,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(D.PLAYOUT_LIMIT_REACHED,{})};const a=this.hls=new e(n);this.interstitial=r,this.assetItem=i;let s=i.uri;try{s=FG(s,n.primarySessionId).href}catch{}a.loadSource(s);const o=()=>{this.hasDetails=!0};a.once(D.LEVEL_LOADED,o),a.once(D.AUDIO_TRACK_LOADED,o),a.once(D.SUBTITLE_TRACK_LOADED,o),a.on(D.MEDIA_ATTACHING,(c,{media:u})=>{this.removeMediaListeners(),this.mediaAttached=u,this.interstitial.playoutLimit&&(u.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&a.on(D.BUFFER_APPENDED,()=>{const h=this.bufferedEnd;this.reachedPlayout(h)&&(this._bufferedEosTime=h,a.trigger(D.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var e;return((e=this.interstitial)==null?void 0:e.appendInPlace)||!1}bufferedInPlaceToEnd(e){var n;if(!this.appendInPlace)return!1;if((n=this.hls)!=null&&n.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const r=this.timelineOffset,i=ke.bufferInfo(e,r,0);return this.getAssetTime(i.end)>=this._bufferedEosTime-.02}reachedPlayout(e){const r=this.interstitial.playoutLimit;return this.startOffset+e>=r}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const n=ke.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(n.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const n=this.timelineOffset;if(e!==n){const r=e-n;if(Math.abs(r)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const n=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-n),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const e=this.hls;if(this.hasDetails){e.stopLoad();const n=r=>delete r.details;e.levels.forEach(n),e.allAudioTracks.forEach(n),e.allSubtitleTracks.forEach(n),this.hasDetails=!1}}on(e,n,r){this.hls.on(e,n)}once(e,n,r){this.hls.once(e,n)}off(e,n,r){this.hls.off(e,n)}toString(){var e;return`HlsAssetPlayer: ${el(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const eB=.033;class _be extends ri{constructor(e,n){super("interstitials-sched",n),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,n){return this.events?this.events.reduce((r,i)=>e<=i.startOffset&&n>i.startOffset?(delete i.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,n){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[r]||(n===void 0&&(n=e.start),r=this.findItemIndexAtTime(n));r>=0&&(a=i[r])!=null&&a.event;){var a;r--}return r}findItemIndexAtTime(e,n){const r=this.items;if(r)for(let i=0;i<r.length;i++){let a=r[i];if(n&&n!=="primary"&&(a=a[n]),e===a.start||e>a.start&&e<a.end)return i}return-1}findJumpRestrictedIndex(e,n){const r=this.items;if(r)for(let i=e;i<=n&&r[i];i++){const a=r[i].event;if(a!=null&&a.restrictions.jump&&!a.appendInPlace)return i}return-1}findEventIndex(e){const n=this.items;if(n)for(let i=n.length;i--;){var r;if(((r=n[i].event)==null?void 0:r.identifier)===e)return i}return-1}findAssetIndex(e,n){const r=e.assetList,i=r.length;if(i>1)for(let a=0;a<i;a++){const s=r[a];if(!s.error){const o=s.timelineStart;if(n===o||n>o&&n<o+(s.duration||0))return a}}return 0}get assetIdAtEnd(){var e,n;const r=(e=this.items)==null||(n=e[this.length-1])==null?void 0:n.event;if(r){const i=r.assetList,a=i[i.length-1];if(a)return a.identifier}return null}parseInterstitialDateRanges(e,n){const r=e.main.details,{dateRanges:i}=r,a=this.events,s=this.parseDateRanges(i,{url:r.url},n),o=Object.keys(i),c=a?a.filter(u=>!o.includes(u.identifier)):[];s.length&&s.sort((u,d)=>{const h=u.cue.pre,p=u.cue.post,y=d.cue.pre,v=d.cue.post;if(h&&!y)return-1;if(y&&!h||p&&!v)return 1;if(v&&!p)return-1;if(!h&&!y&&!p&&!v){const b=u.startTime,x=d.startTime;if(b!==x)return b-x}return u.dateRange.tagOrder-d.dateRange.tagOrder}),this.events=s,c.forEach(u=>{this.removeEvent(u)}),this.updateSchedule(e,c)}updateSchedule(e,n=[]){const r=this.events||[];if(r.length||n.length||this.length<2){const i=this.items,a=this.parseSchedule(r,e);(n.length||(i==null?void 0:i.length)!==a.length||a.some((o,c)=>Math.abs(o.playout.start-i[c].playout.start)>.005||Math.abs(o.playout.end-i[c].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(n,i))}}parseDateRanges(e,n,r){const i=[],a=Object.keys(e);for(let s=0;s<a.length;s++){const o=a[s],c=e[o];if(c.isInterstitial){let u=this.eventMap[o];u?u.setDateRange(c):(u=new Tbe(c,n),this.eventMap[o]=u,r===!1&&(u.appendInPlace=r)),i.push(u)}}return i}parseSchedule(e,n){const r=[],i=n.main.details,a=i.live?1/0:i.edge;let s=0;if(e=e.filter(c=>!c.error&&!(c.cue.once&&c.hasPlayed)),e.length){this.resolveOffsets(e,n);let c=0,u=0;if(e.forEach((d,h)=>{const p=d.cue.pre,y=d.cue.post,v=e[h-1]||null,b=d.appendInPlace,x=y?a:d.startOffset,T=d.duration,_=d.timelineOccupancy===Up.Range?T:0,A=d.resumptionOffset,O=(v==null?void 0:v.startTime)===x,R=x+d.cumulativeDuration;let C=b?R+T:x+A;if(p||!y&&x<=0){const P=u;u+=_,d.timelineStart=R;const N=s;s+=T,r.push({event:d,start:R,end:C,playout:{start:N,end:s},integrated:{start:P,end:u}})}else if(x<=a){if(!O){const k=x-c;if(k>eB){const M=c,G=u;u+=k;const K=s;s+=k;const W={previousEvent:e[h-1]||null,nextEvent:d,start:M,end:M+k,playout:{start:K,end:s},integrated:{start:G,end:u}};r.push(W)}else k>0&&v&&(v.cumulativeDuration+=k,r[r.length-1].end=x)}y&&(C=R),d.timelineStart=R;const P=u;u+=_;const N=s;s+=T,r.push({event:d,start:R,end:C,playout:{start:N,end:s},integrated:{start:P,end:u}})}else return;const L=d.resumeTime;y||L>a?c=a:c=L}),c<a){var o;const d=c,h=u,p=a-c;u+=p;const y=s;s+=p,r.push({previousEvent:((o=r[r.length-1])==null?void 0:o.event)||null,nextEvent:null,start:c,end:d+p,playout:{start:y,end:s},integrated:{start:h,end:u}})}this.setDurations(a,s,u)}else r.push({previousEvent:null,nextEvent:null,start:0,end:a,playout:{start:0,end:a},integrated:{start:0,end:a}}),this.setDurations(a,a,a);return r}setDurations(e,n,r){this.durations={primary:e,playout:n,integrated:r}}resolveOffsets(e,n){const r=n.main.details,i=r.live?1/0:r.edge;let a=0,s=-1;e.forEach((o,c)=>{const u=o.cue.pre,d=o.cue.post,h=u?0:d?i:o.startTime;this.updateAssetDurations(o),s===h?o.cumulativeDuration=a:(a=0,s=h),!d&&o.snapOptions.in&&(o.resumeAnchor=eo(null,r.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,n)||(o.appendInPlace=!1)),!o.appendInPlace&&c+1<e.length&&e[c+1].startTime-e[c].resumeTime<eB&&(e[c+1].appendInPlace=!1,e[c+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const y=xe(o.resumeOffset)?o.resumeOffset:o.duration;a+=y})}primaryCanResumeInPlaceAt(e,n){const r=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(r-i)>gl?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${i}`),!1):n?!Object.keys(n).some(s=>{const o=n[s].details,c=o.edge;if(r>=c)return this.log(`"${e.identifier}" resumption ${r} past ${s} playlist end ${c}`),!1;const u=eo(null,o.fragments,r);if(!u)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${s} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const d=s==="audio"?.175:0;return Math.abs(u.start-r)<gl+d||Math.abs(u.end-r)<gl+d?!1:(this.log(`"${e.identifier}" resumption ${r} not aligned with ${s} fragment bounds (${u.start}-${u.end} sn: ${u.sn} cc: ${u.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${r} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const n=e.timelineStart;let r=0,i=!1,a=!1;e.assetList.forEach((s,o)=>{const c=n+r;s.startOffset=r,s.timelineStart=c,i||(i=s.duration===null),a||(a=!!s.error);const u=s.error?0:s.duration||0;r+=u}),i&&!a?e.duration=Math.max(r,e.duration):e.duration=r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Fa(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class Rbe{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,n){const r=e.assetListUrl;let i;try{i=FG(r,this.hls.sessionId,e.baseUrl)}catch(p){const y=this.assignAssetListError(e,re.ASSET_LIST_LOAD_ERROR,p,r);this.hls.trigger(D.ERROR,y);return}n&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+n);const a=this.hls.config,s=a.loader,o=new s(a),c={responseType:"json",url:i.href},u=a.interstitialAssetListLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,y,v,b)=>{const x=p.data,T=x==null?void 0:x.ASSETS;if(!Array.isArray(T)){const _=this.assignAssetListError(e,re.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),v.url,y,b);this.hls.trigger(D.ERROR,_);return}e.assetListResponse=x,this.hls.trigger(D.ASSET_LIST_LOADED,{event:e,assetListResponse:x,networkDetails:b})},onError:(p,y,v,b)=>{const x=this.assignAssetListError(e,re.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${p.code} ${p.text} (${y.url})`),y.url,b,v);this.hls.trigger(D.ERROR,x)},onTimeout:(p,y,v)=>{const b=this.assignAssetListError(e,re.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${y.url})`),y.url,p,v);this.hls.trigger(D.ERROR,b)}};return o.load(c,d,h),this.hls.trigger(D.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,n,r,i,a,s){return e.error=r,{type:Te.NETWORK_ERROR,details:n,fatal:!1,interstitial:e,url:i,error:r,networkDetails:s,stats:a}}}function tB(t){t==null||t.play().catch(()=>{})}class Obe extends ri{constructor(e,n){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;const i=r-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const s=i<=-.01;this.timelinePos=r,this.bufferedPos=r;const o=this.playingItem;if(!o){this.checkBuffer();return}if(s&&this.schedule.resetErrorsInRange(r,r-i)&&this.updateSchedule(),this.checkBuffer(),s&&r<o.start||r>=o.end){var c;const p=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(o)&&(c=this.media)!=null&&c.paused&&(this.shouldPlay=!1),!s){const y=this.findItemIndex(o);if(p>y){const v=this.schedule.findJumpRestrictedIndex(y+1,p);if(v>y){this.setSchedulePosition(v);return}}}this.setSchedulePosition(p);return}const u=this.playingAsset;if(!u){if(this.playingLastItem&&this.isInterstitial(o)){const p=o.event.assetList[0];p&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,p))}return}const d=u.timelineStart,h=u.duration||0;(s&&r<d||r>=d+h)&&this.setScheduleToAssetAtTime(r,u)},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(r>=i.end){this.timelinePos=i.end;const o=this.findItemIndex(i);this.setSchedulePosition(o+1)}const a=this.playingAsset;if(!a)return;const s=a.timelineStart+(a.duration||0);r>=s&&this.setScheduleToAssetAtTime(r,a)},this.onScheduleUpdate=(r,i)=>{const a=this.schedule,s=this.playingItem,o=a.events||[],c=a.items||[],u=a.durations,d=r.map(v=>v.identifier),h=!!(o.length||d.length);(h||i)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${c.map(v=>Fa(v))} pos: ${this.timelinePos}`),d.length&&this.log(`Removed events ${d}`),this.playerQueue.forEach(v=>{if(v.interstitial.appendInPlace){const b=v.assetItem.timelineStart,x=v.timelineOffset-b;if(x)try{v.timelineOffset=b}catch(T){Math.abs(x)>gl&&this.warn(`${T} ("${v.assetId}" ${v.timelineOffset}->${b})`)}}});let p=null;if(s){const v=this.updateItem(s,this.timelinePos);this.itemsMatch(s,v)&&(this.playingItem=v,this.waitingItem=this.endedItem=null,p=()=>this.trimInPlace(v,s))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y){const v=this.updateItem(y,this.bufferedPos);this.itemsMatch(y,v)?(this.bufferingItem=v,p||(p=()=>this.trimInPlace(v,y))):y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))}if(r.forEach(v=>{v.assetList.forEach(b=>{this.clearAssetPlayer(b.identifier,null)})}),h||i){if(this.hls.trigger(D.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:c.slice(0),durations:u,removedIds:d}),this.isInterstitial(s)&&d.includes(s.event.identifier)){this.warn(`Interstitial "${s.event.identifier}" removed while playing`),this.primaryFallback(s.event);return}p&&p(),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=n,this.assetListLoader=new Rbe(e),this.schedule=new _be(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(D.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(D.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(D.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(D.MEDIA_ENDED,this.onMediaEnded,this),e.on(D.ERROR,this.onError,this),e.on(D.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(D.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(D.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(D.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(D.MEDIA_ENDED,this.onMediaEnded,this),e.off(D.ERROR,this.onError,this),e.off(D.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Jr(e,"play",this.onPlay),Jr(e,"pause",this.onPause),Jr(e,"seeking",this.onSeeking),Jr(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,n){const r=this.media=n.media;Lr(r,"seeking",this.onSeeking),Lr(r,"timeupdate",this.onTimeupdate),Lr(r,"play",this.onPlay),Lr(r,"pause",this.onPause)}onMediaAttached(e,n){const r=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!i){this.clearScheduleState();const a=this.findItemIndex(r);this.setSchedulePosition(a)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,n){const r=!!n.transferMedia,i=this.media;if(this.media=null,!r&&(i&&this.removeMediaListeners(i),this.detachedData)){const a=this.getBufferingPlayer();a&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,a.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,n=()=>e.bufferingItem||e.waitingItem,r=h=>h&&e.getAssetPlayer(h.identifier),i=(h,p,y,v,b)=>{if(h){let x=h[p].start;const T=h.event;if(T){if(p==="playout"||T.timelineOccupancy!==Up.Point){const _=r(y);(_==null?void 0:_.interstitial)===T&&(x+=_.assetItem.startOffset+_[b])}}else{const _=v==="bufferedPos"?s():e[v];x+=_-h.start}return x}return 0},a=(h,p)=>{if(h!==0&&p!=="primary"&&e.schedule.length){var y;const v=e.schedule.findItemIndexAtTime(h),b=(y=e.schedule.items)==null?void 0:y[v];if(b){const x=b[p].start-b.start;return h+x}}return h},s=()=>{const h=e.bufferedPos;return h===Number.MAX_VALUE?o("primary"):Math.max(h,0)},o=h=>{var p;return(p=e.primaryDetails)!=null&&p.live?e.primaryDetails.edge:e.schedule.durations[h]},c=(h,p)=>{var y,v;const b=e.effectivePlayingItem;if(b!=null&&(y=b.event)!=null&&y.restrictions.skip)return;e.log(`seek to ${h} "${p}"`);const x=e.effectivePlayingItem,T=e.schedule.findItemIndexAtTime(h,p),_=(v=e.schedule.items)==null?void 0:v[T],A=e.getBufferingPlayer(),O=A==null?void 0:A.interstitial,R=O==null?void 0:O.appendInPlace,C=x&&e.itemsMatch(x,_);if(x&&(R||C)){const P=r(e.playingAsset),N=(P==null?void 0:P.media)||e.primaryMedia;if(N){const k=p==="primary"?N.currentTime:i(x,p,e.playingAsset,"timelinePos","currentTime"),M=h-k,G=(R?k:N.currentTime)+M;if(G>=0&&(!P||R||G<=P.duration)){N.currentTime=G;return}}}if(_){let P=h;if(p!=="primary"){const k=_[p].start,M=h-k;P=_.start+M}const N=!e.isInterstitial(_);if((!e.isInterstitial(x)||x.event.appendInPlace)&&(N||_.event.appendInPlace)){const k=e.media||(R?A==null?void 0:A.media:null);k&&(k.currentTime=P)}else if(x){const k=e.findItemIndex(x);if(T>k){const G=e.schedule.findJumpRestrictedIndex(k+1,T);if(G>k){e.setSchedulePosition(G);return}}let M=0;if(N)e.timelinePos=P,e.checkBuffer();else{var L;const G=_==null||(L=_.event)==null?void 0:L.assetList;if(G){const K=h-(_[p]||_).start;for(let W=G.length;W--;){const Y=G[W];if(Y.duration&&K>=Y.startOffset&&K<Y.startOffset+Y.duration){M=W;break}}}}e.setSchedulePosition(T,M)}}},u=()=>{const h=e.effectivePlayingItem;if(e.isInterstitial(h))return h;const p=n();return e.isInterstitial(p)?p:null},d={get currentTime(){const h=u(),p=e.effectivePlayingItem;return p&&p===h?i(p,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-p.playout.start:0},set currentTime(h){const p=u(),y=e.effectivePlayingItem;y&&y===p&&c(h+y.playout.start,"playout")},get duration(){const h=u();return h?h.playout.end-h.playout.start:0},get assetPlayers(){var h;const p=(h=u())==null?void 0:h.event.assetList;return p?p.map(y=>e.getAssetPlayer(y.identifier)):[]},get playingIndex(){var h;const p=(h=u())==null?void 0:h.event;return p&&e.effectivePlayingAsset?p.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return u()}};this.manager={get events(){var h,p;return((h=e.schedule)==null||(p=h.events)==null?void 0:p.slice(0))||[]},get schedule(){var h,p;return((h=e.schedule)==null||(p=h.items)==null?void 0:p.slice(0))||[]},get interstitialPlayer(){return u()?d:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return n()},get bufferingIndex(){const h=n();return e.findItemIndex(h)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const h=e.effectivePlayingItem;return e.findItemIndex(h)},primary:{get bufferedEnd(){return s()},get currentTime(){const h=e.timelinePos;return h>0?h:0},set currentTime(h){c(h,"primary")},get duration(){return o("primary")},get seekableStart(){var h;return((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(n(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(h){c(h,"integrated")},get duration(){return o("integrated")},get seekableStart(){var h;return a(((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0,"integrated")}},skip:()=>{const h=e.effectivePlayingItem,p=h==null?void 0:h.event;if(p&&!p.restrictions.skip){const y=e.findItemIndex(h);if(p.appendInPlace){const v=h.playout.start+h.event.duration;c(v+.001,"playout")}else e.advanceAfterAssetEnded(p,y,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const n=this.playingItem,r=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!n||!r?!1:this.findItemIndex(n)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,n,r;if(this.mediaSelection===null)return;const i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let a=this.media;!a&&(e=this.bufferingItem)!=null&&(n=e.event)!=null&&n.appendInPlace&&(a=this.primaryMedia);const s=(r=a)==null?void 0:r.currentTime;if(!(s===void 0||!xe(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,n){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,n)}transferMediaFromPlayer(e,n){const r=e.interstitial.appendInPlace,i=e.media;if(r&&i===this.primaryMedia){if(this.bufferingAsset=null,(!n||this.isInterstitial(n)&&!n.event.appendInPlace)&&n&&i){this.detachedData={media:i};return}const a=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Tt(a)}`),this.detachedData=a}else n&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,n){var r,i;if(e.media===n)return;let a=null;const s=this.hls,o=e!==s,c=o&&e.interstitial.appendInPlace,u=(r=this.detachedData)==null?void 0:r.mediaSource;let d;if(s.media)c&&(a=s.transferMedia(),this.detachedData=a),d="Primary";else if(u){const y=this.getBufferingPlayer();y?(a=y.transferMedia(),d=`${y}`):d="detached MediaSource"}else d="detached media";if(!a){if(u)a=this.detachedData,this.log(`using detachedData: MediaSource ${Tt(a)}`);else if(!this.detachedData||s.media===n){const y=this.playerQueue;y.length>1&&y.forEach(v=>{if(o&&v.interstitial.appendInPlace!==c){const b=v.interstitial;this.clearInterstitial(v.interstitial,null),b.appendInPlace=!1,b.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${b}`)}}),this.hls.detachMedia(),this.detachedData={media:n}}}const h=a&&"mediaSource"in a&&((i=a.mediaSource)==null?void 0:i.readyState)!=="closed",p=h&&a?a:n;if(this.log(`${h?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${d}`),p===a){const y=o&&e.assetId===this.schedule.assetIdAtEnd;p.overrides={duration:this.schedule.duration,endOfStream:!o||y,cueRemoval:!o}}e.attachMedia(p)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,n=e.events;if(!n||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,i=this.effectivePlayingItem;if(r===-1){const a=this.hls.startPosition;if(this.timelinePos=a,n.length&&n[0].cue.pre){const s=e.findEventIndex(n[0].identifier);this.setSchedulePosition(s)}else if(a>=0||!this.primaryLive){const s=this.timelinePos=a>0?a:0,o=e.findItemIndexAtTime(s);this.setSchedulePosition(o)}}else if(i&&!this.playingItem){const a=e.findItemIndex(i);this.setSchedulePosition(a)}}advanceAfterAssetEnded(e,n,r){const i=NE(e,r);if(!e.isAssetPastPlayoutLimit(i))this.setSchedulePosition(n,i);else{const a=this.schedule.items;if(a){const s=n+1,o=a.length;if(s>=o){this.setSchedulePosition(-1);return}const c=e.resumeTime;this.timelinePos<c&&(this.timelinePos=c,this.checkBuffer()),this.setSchedulePosition(s)}}}setScheduleToAssetAtTime(e,n){const r=this.schedule,i=n.parentIdentifier,a=r.getEvent(i);if(a){const s=r.findEventIndex(i),o=r.findAssetIndex(a,e);this.advanceAfterAssetEnded(a,s,o-1)}}setSchedulePosition(e,n){const r=this.schedule.items;if(!r||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${n}`);const i=e>=0?r[e]:null,a=this.playingItem,s=this.playingLastItem;if(this.isInterstitial(a)){var o;const u=a.event,d=this.playingAsset,h=d==null?void 0:d.identifier,p=h?this.getAssetPlayer(h):null;if(p&&h&&(!this.eventItemsMatch(a,i)||n!==void 0&&h!==((o=u.assetList)==null?void 0:o[n].identifier))){var c;const y=u.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${u.assetList.length} ${el(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(D.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:y,event:u,schedule:r.slice(0),scheduleIndex:e,player:p}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(u,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(h,i),p.media&&!((c=this.detachedData)!=null&&c.mediaSource)&&p.detachMedia()}if(!this.eventItemsMatch(a,i)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${u} ${Fa(a)}`),u.hasPlayed=!0,this.hls.trigger(D.INTERSTITIAL_ENDED,{event:u,schedule:r.slice(0),scheduleIndex:e}),u.cue.once)){this.updateSchedule();const y=this.schedule.items;if(i&&y){const v=this.findItemIndex(i);this.advanceSchedule(v,y,n,a,s)}return}}this.advanceSchedule(e,r,n,a,s)}advanceSchedule(e,n,r,i,a){const s=e>=0?n[e]:null,o=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(u=>{const d=u.interstitial,h=this.schedule.findEventIndex(d.identifier);(h<e||h>e+1)&&this.clearInterstitial(d,s)}),this.isInterstitial(s)){this.timelinePos=Math.min(Math.max(this.timelinePos,s.start),s.end);const u=s.event;if(r===void 0){r=this.schedule.findAssetIndex(u,this.timelinePos);const y=NE(u,r-1);if(u.isAssetPastPlayoutLimit(y)){this.advanceAfterAssetEnded(u,e,r);return}r=y}const d=this.waitingItem;this.assetsBuffered(s,o)||this.setBufferingItem(s);let h=this.preloadAssets(u,r);if(this.eventItemsMatch(s,d||i)||(this.waitingItem=s,this.log(`INTERSTITIAL_STARTED ${Fa(s)} ${u.appendInPlace?"append in place":""}`),this.hls.trigger(D.INTERSTITIAL_STARTED,{event:u,schedule:n.slice(0),scheduleIndex:e})),!u.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${u}`);return}if(u.assetListLoader&&(u.assetListLoader.destroy(),u.assetListLoader=void 0),!o){this.log(`Waiting for attachMedia to start Interstitial ${u}`);return}this.waitingItem=this.endedItem=null,this.playingItem=s;const p=u.assetList[r];if(!p){const y=n[e+1],v=this.media;y&&v&&!this.isInterstitial(y)&&v.currentTime<y.start&&(v.currentTime=this.timelinePos=y.start),this.advanceAfterAssetEnded(u,e,r||0);return}if(h||(h=this.getAssetPlayer(p.identifier)),h===null||h.destroyed){const y=u.assetList.length;this.warn(`asset ${r+1}/${y} player destroyed ${u}`),h=this.createAssetPlayer(u,p,r)}if(!this.eventItemsMatch(s,this.bufferingItem)&&u.appendInPlace&&this.isAssetBuffered(p))return;this.startAssetPlayer(h,r,n,e,o),this.shouldPlay&&tB(h.media)}else s!==null?(this.resumePrimary(s,e,i),this.shouldPlay&&tB(this.hls.media)):a&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e,n;return(e=this.mediaSelection)==null||(n=e.main)==null?void 0:n.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,n,r){var i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Fa(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let s=this.timelinePos;(s<e.start||s>=e.end)&&(s=this.getPrimaryResumption(e,n),this.timelinePos=s),this.attachPrimary(s,e)}if(!r)return;const a=this.schedule.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Fa(e)}`),this.hls.trigger(D.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:n}),this.checkBuffer())}getPrimaryResumption(e,n){const r=e.start;if(this.primaryLive){const i=this.primaryDetails;if(n===0)return this.hls.startPosition;if(i&&(r<i.fragmentStart||r>i.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const n=this.getAssetPlayer(e.identifier);return n!=null&&n.hls?n.hls.bufferedToEnd:ke.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,n,r){n?this.setBufferingItem(n):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const a=this.hls;a.media?this.checkBuffer():(this.transferMediaTo(a,i),r&&this.startLoadingPrimaryAt(e,r)),r||(this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,n){var r;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((r=i.mainForwardBufferInfo)==null?void 0:r.start)||i.media.currentTime)-e)>.5?i.startLoad(e,n):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(D.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(D.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,n){if(n.level===-1)return;const r=this.hls.levels[n.level],i=ht(ht({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,n){const r=this.hls.audioTracks[n.id],i=this.mediaSelection;if(!i){this.altSelection=ht(ht({},this.altSelection),{},{audio:r});return}const a=ht(ht({},i),{},{audio:r});this.mediaSelection=a}onSubtitleTrackUpdated(e,n){const r=this.hls.subtitleTracks[n.id],i=this.mediaSelection;if(!i){this.altSelection=ht(ht({},this.altSelection),{},{subtitles:r});return}const a=ht(ht({},i),{},{subtitles:r});this.mediaSelection=a}onAudioTrackSwitching(e,n){const r=dU(n);this.playerQueue.forEach(i=>i.hls.setAudioOption(n)||i.hls.setAudioOption(r))}onSubtitleTrackSwitch(e,n){const r=dU(n);this.playerQueue.forEach(i=>i.hls.setSubtitleOption(n)||n.id!==-1&&i.hls.setSubtitleOption(r))}onBufferCodecs(e,n){const r=n.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,n){this.checkBuffer()}onBufferFlushed(e,n){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){const n=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&n){for(let i=0;i<n.length;i++){const a=n[i];if(a.cue.post){var r;const s=this.schedule.findEventIndex(a.identifier),o=(r=this.schedule.items)==null?void 0:r[s];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const n=this.playingItem;if(!this.playingLastItem&&n){const r=this.findItemIndex(n);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(e,n){const r=this.schedule.items;if(e&&r){const i=this.findItemIndex(e,n);return r[i]||null}return null}trimInPlace(e,n){if(this.isInterstitial(e)&&e.event.appendInPlace&&n.end-e.end>.25){e.event.assetList.forEach((a,s)=>{e.event.isAssetPastPlayoutLimit(s)&&this.clearAssetPlayer(a.identifier,null)});const r=e.end+.25,i=ke.bufferInfo(this.primaryMedia,r,0);(i.end>r||(i.nextStart||0)>r)&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}}itemsMatch(e,n){return!!n&&(e===n||e.event&&n.event&&this.eventItemsMatch(e,n)||!e.event&&!n.event&&this.findItemIndex(e)===this.findItemIndex(n))}eventItemsMatch(e,n){var r;return!!n&&(e===n||e.event.identifier===((r=n.event)==null?void 0:r.identifier))}findItemIndex(e,n){return e?this.schedule.findItemIndex(e,n):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const n=this.schedule.items;if(!n)return;const r=ke.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,n,r){const i=this.schedule,a=this.bufferingItem;if(this.bufferedPos>e)return;if(n.length===1&&this.itemsMatch(n[0],a)){this.bufferedPos=e;return}const s=this.playingItem,o=this.findItemIndex(s);let c=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var u,d;const h=this.findItemIndex(a),p=Math.min(h+1,n.length-1),y=n[p];if((c===-1&&a&&e>=a.end||(u=y.event)!=null&&u.appendInPlace&&e+.01>=y.start)&&(c=p),p-o>1&&(a==null||(d=a.event)==null?void 0:d.appendInPlace)===!1)return;if(this.bufferedPos=e,c>h&&c>o)this.bufferedToItem(y);else{const v=this.primaryDetails;this.primaryLive&&v&&e>v.edge-v.targetduration&&y.start<v.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(y)&&this.preloadAssets(y.event,0)}}else r&&s&&!this.itemsMatch(s,a)&&(c===o?this.bufferedToItem(s):c===o+1&&this.bufferedToItem(n[c]))}assetsBuffered(e,n){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const a=this.getAssetPlayer(i.identifier);return!(a!=null&&a.bufferedInPlaceToEnd(n))})}setBufferingItem(e){const n=this.bufferingItem,r=this.schedule;if(this.itemsMatch(e,n))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:i,events:a}=r;if(!i||!a)return n;const s=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const c=o?o.remaining:n?n.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Fa(e)}`+(n?` (${c.toFixed(2)} remaining)`:"")),this.playbackDisabled||(s?e.event.assetList.forEach(u=>{const d=this.getAssetPlayer(u.identifier);d&&d.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(u=>u.pauseBuffering()))),this.hls.trigger(D.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return n}bufferedToItem(e,n=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,n);else if(r!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const n=this.findItemIndex(e),r=this.getPrimaryResumption(e,n);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,n){const r=e.event,i=r.assetList.length===0&&!r.assetListLoader,a=r.cue.once;if(i||!a){const s=this.preloadAssets(r,n);if(s!=null&&s.interstitial.appendInPlace){const o=r.assetList[n],c=this.primaryMedia;o&&c&&this.bufferAssetPlayer(s,c)}}}preloadAssets(e,n){const r=e.assetUrl,i=e.assetList.length,a=i===0&&!e.assetListLoader,s=e.cue.once;if(a){const c=e.timelineStart;if(e.appendInPlace){var o;const p=this.playingItem;!this.isInterstitial(p)&&(p==null||(o=p.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(c+.25)}let u,d=0;if(!this.playingItem&&this.primaryLive&&(d=this.hls.startPosition,d===-1&&(d=this.hls.liveSyncPosition||0)),d&&!(e.cue.pre||e.cue.post)){const p=d-c;p>0&&(u=Math.round(p*1e3)/1e3)}if(this.log(`Load interstitial asset ${n+1}/${r?1:i} ${e}${u?` live-start: ${d} start-offset: ${u}`:""}`),r)return this.createAsset(e,0,0,c,e.duration,r);const h=this.assetListLoader.loadAssetList(e,u);h&&(e.assetListLoader=h)}else if(!s&&i){for(let c=n;c<i;c++){const u=e.assetList[c],d=this.getAssetPlayerQueueIndex(u.identifier);(d===-1||this.playerQueue[d].destroyed)&&!u.error&&this.createAssetPlayer(e,u,c)}return this.getAssetPlayer(e.assetList[n].identifier)}return null}flushFrontBuffer(e){const n=this.requiredTracks;if(!n)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(n).forEach(i=>{this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const n=this.playerQueue;for(let r=0;r<n.length;r++)if(e===n[r].assetId)return r;return-1}getAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);return this.playerQueue[n]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:n}=this;if(n){for(let r=0;r<e.length;r++)if(e[r].media===n)return e[r]}return null}createAsset(e,n,r,i,a,s){const o={parentIdentifier:e.identifier,identifier:Ebe(e,s,n),duration:a,startOffset:r,timelineStart:i,uri:s};return this.createAssetPlayer(e,o,n)}createAssetPlayer(e,n,r){const i=this.hls,a=i.userConfig;let s=a.videoPreference;const o=i.loadLevelObj||i.levels[i.currentLevel];(s||o)&&(s=ut({},s),o.videoCodec&&(s.videoCodec=o.videoCodec),o.videoRange&&(s.allowedVideoRanges=[o.videoRange]));const c=i.audioTracks[i.audioTrack],u=i.subtitleTracks[i.subtitleTrack];let d=0;if(this.primaryLive||e.appendInPlace){const A=this.timelinePos-n.timelineStart;if(A>1){const O=n.duration;O&&A<O&&(d=A)}}const h=n.identifier,p=ht(ht({},a),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:h,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:d,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:c||a.audioPreference,subtitlePreference:u||a.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,n.timelineStart&&(p.timelineOffset=n.timelineStart));const y=p.cmcd;y!=null&&y.sessionId&&y.contentId&&(p.cmcd=ut({},y,{contentId:Uc(n.uri)})),this.getAssetPlayer(h)&&this.warn(`Duplicate date range identifier ${e} and asset ${h}`);const v=new wbe(this.HlsPlayerClass,p,e,n);this.playerQueue.push(v),e.assetList[r]=n;const b=A=>{if(A.live){const C=new Error(`Interstitials MUST be VOD assets ${e}`),L={fatal:!0,type:Te.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:C};this.handleAssetItemError(L,e,this.schedule.findEventIndex(e.identifier),r,C.message);return}const O=A.edge-A.fragmentStart,R=n.duration;(R===null||O>R)&&(this.log(`Interstitial asset "${h}" duration change ${R} > ${O}`),n.duration=O,this.updateSchedule())};v.on(D.LEVEL_UPDATED,(A,{details:O})=>b(O)),v.on(D.LEVEL_PTS_UPDATED,(A,{details:O})=>b(O));const x=(A,O)=>{const R=this.getAssetPlayer(h);if(R&&O.tracks){R.off(D.BUFFER_CODECS,x),R.tracks=O.tracks;const C=this.primaryMedia;this.bufferingAsset===R.assetItem&&C&&!R.media&&this.bufferAssetPlayer(R,C)}};v.on(D.BUFFER_CODECS,x);const T=()=>{var A;const O=this.getAssetPlayer(h);if(this.log(`buffered to end of asset ${O}`),!O)return;const R=this.schedule.findEventIndex(e.identifier),C=(A=this.schedule.items)==null?void 0:A[R];if(this.isInterstitial(C)){const P=e.findAssetIndex(n),N=NE(e,P);if(!e.isAssetPastPlayoutLimit(N))this.bufferedToItem(C,N);else{var L;const k=(L=this.schedule.items)==null?void 0:L[R+1];k&&this.bufferedToItem(k)}}};v.on(D.BUFFERED_TO_END,T);const _=A=>()=>{if(!this.getAssetPlayer(h))return;this.shouldPlay=!0;const R=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,R,A)};return v.once(D.MEDIA_ENDED,_(r)),v.once(D.PLAYOUT_LIMIT_REACHED,_(1/0)),v.on(D.ERROR,(A,O)=>{const R=this.getAssetPlayer(h);if(O.details===re.BUFFER_STALLED_ERROR){if(R!=null&&R.media){const C=R.currentTime,L=R.duration-C;C&&e.appendInPlace&&L/R.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${h} ${e} at ${R.media.currentTime}`),T()):(this.warn(`Stalled at ${C} of ${C+L} in asset ${h} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(O,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${O.error} ${e}`)}),v.on(D.DESTROYING,()=>{if(!this.getAssetPlayer(h))return;const O=new Error(`Asset player destroyed unexpectedly ${h}`),R={fatal:!0,type:Te.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:O};this.handleAssetItemError(R,e,this.schedule.findEventIndex(e.identifier),r,O.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${el(n)}`),this.hls.trigger(D.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:n,assetListIndex:r,event:e,player:v}),v}clearInterstitial(e,n){e.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,n)}),e.reset()}resetAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[n];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,n){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`clear asset player "${e}" toSegment: ${n&&Fa(n)}`);const i=this.playerQueue[r];this.transferMediaFromPlayer(i,n),this.playerQueue.splice(r,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,n,r,i,a){const{interstitial:s,assetItem:o,assetId:c}=e,u=s.assetList.length,d=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!d||d.identifier!==c)&&(d&&(this.clearAssetPlayer(d.identifier,r[i]),delete d.error),this.log(`INTERSTITIAL_ASSET_STARTED ${n+1}/${u} ${el(o)}`),this.hls.trigger(D.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:n,event:s,schedule:r.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,a)}bufferAssetPlayer(e,n){var r,i;const{interstitial:a,assetItem:s}=e,o=this.schedule.findEventIndex(a.identifier),c=(r=this.schedule.items)==null?void 0:r[o];if(!c)return;this.setBufferingItem(c),this.bufferingAsset=s;const u=this.getBufferingPlayer();if(u===e)return;const d=a.appendInPlace;if(d&&(u==null?void 0:u.interstitial.appendInPlace)===!1)return;const h=(u==null?void 0:u.tracks)||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(d&&s!==this.playingAsset){if(!e.tracks)return;if(h&&!P8(h,e.tracks)){const p=new Error(`Asset ${el(s)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),y={fatal:!0,type:Te.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:p},v=a.findAssetIndex(s);this.handleAssetItemError(y,a,o,v,p.message);return}}this.transferMediaTo(e,n)}handleAssetItemError(e,n,r,i,a){if(e.details===re.BUFFER_STALLED_ERROR)return;const s=n.assetList[i];this.warn(`INTERSTITIAL_ASSET_ERROR ${s&&el(s)} ${e.error}`);const o=s==null?void 0:s.identifier,c=this.getAssetPlayerQueueIndex(o),u=this.playerQueue[c]||null,d=this.schedule.items,h=ut({},e,{fatal:!1,errorAction:Pf(!0),asset:s,assetListIndex:i,event:n,schedule:d,scheduleIndex:r,player:u});if(this.hls.trigger(D.INTERSTITIAL_ASSET_ERROR,h),!e.fatal)return;const p=this.playingAsset,y=new Error(a);if(s&&(this.clearAssetPlayer(o,null),s.error=y),!n.assetList.some(v=>!v.error))n.error=y;else{for(let v=i;v<n.assetList.length;v++)this.resetAssetPlayer(n.assetList[v].identifier);this.updateSchedule()}n.error?this.primaryFallback(n):p&&p.identifier===o&&this.advanceAfterAssetEnded(n,r,i)}primaryFallback(e){const n=e.timelineStart,r=this.effectivePlayingItem;if(this.updateSchedule(),r){this.log(`Fallback to primary from event "${e.identifier}" start: ${n} pos: ${this.timelinePos} playing: ${r?Fa(r):"<none>"} error: ${e.error}`);let i=this.timelinePos;i===-1&&(i=this.hls.startPosition);const a=this.updateItem(r,i);this.itemsMatch(r,a)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(n,null),this.flushFrontBuffer(n));const s=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(s)}else this.checkStart()}onAssetListLoaded(e,n){var r;const i=n.event,a=i.identifier,s=n.assetListResponse.ASSETS;if(!this.schedule.hasEvent(a))return;const o=i.timelineStart,c=i.duration;let u=0;s.forEach((v,b)=>{const x=parseFloat(v.DURATION);this.createAsset(i,b,u,o+u,x,v.URI),u+=x}),i.duration=u,this.log(`Loaded asset-list with duration: ${u} (was: ${c}) ${i}`);const d=this.waitingItem,h=(d==null?void 0:d.event.identifier)===a;this.updateSchedule();const p=(r=this.bufferingItem)==null?void 0:r.event;if(h){var y;const v=this.schedule.findEventIndex(a),b=(y=this.schedule.items)==null?void 0:y[v];if(b){if(!this.playingItem&&this.timelinePos>b.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==v){i.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${i}`),this.primaryFallback(i);return}this.setBufferingItem(b)}this.setSchedulePosition(v)}else if((p==null?void 0:p.identifier)===a&&p.appendInPlace){const v=i.assetList[0],b=this.getAssetPlayer(v.identifier),x=this.primaryMedia;v&&b&&x&&this.bufferAssetPlayer(b,x)}}onError(e,n){switch(n.details){case re.ASSET_LIST_PARSING_ERROR:case re.ASSET_LIST_LOAD_ERROR:case re.ASSET_LIST_LOAD_TIMEOUT:{const r=n.interstitial;r&&this.primaryFallback(r);break}case re.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const nB=500;class Cbe extends i_{constructor(e,n,r){super(e,n,r,"subtitle-stream-controller",Se.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,n){this.stopLoad(),this.state=fe.IDLE,this.setInterval(nB),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,n){this.tracksBuffered=[],super.onMediaDetaching(e,n)}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:i}=n;if(this.fragContextChanged(r)||(Kt(r)&&(this.fragPrevious=r),this.state=fe.IDLE),!i)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let s;const o=r.start;for(let u=0;u<a.length;u++)if(o>=a[u].start&&o<=a[u].end){s=a[u];break}const c=r.start+r.duration;s?s.end=c:(s={start:o,end:c},a.push(s)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,n){const{startOffset:r,endOffset:i}=n;if(r===0&&i!==Number.POSITIVE_INFINITY){const a=i-1;if(a<=0)return;n.endOffsetSubtitles=Math.max(0,a),this.tracksBuffered.forEach(s=>{for(let o=0;o<s.length;){if(s[o].end<=a){s.shift();continue}else if(s[o].start<a)s[o].start=a;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(r,a,Se.SUBTITLE)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===Se.SUBTITLE&&(n.details===re.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==fe.STOPPED&&(this.state=fe.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&LG(this.levels,n)){this.levels=n.map(r=>new If(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const i=new If(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Se.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==fe.STOPPED&&this.setInterval(nB)}onSubtitleTrackLoaded(e,n){var r;const{currentTrackId:i,levels:a}=this,{details:s,id:o}=n;if(!a){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const c=a[o];if(o>=a.length||!c)return;this.log(`Subtitle track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(s.live||(r=c.details)!=null&&r.live){if(s.deltaUpdateFailed)return;const h=this.mainDetails;if(!h){this.startFragRequested=!1;return}const p=h.fragments[0];if(!c.details)s.hasProgramDateTime&&h.hasProgramDateTime?(kp(s,h),u=s.fragmentStart):p&&(u=p.start,qA(s,u));else{var d;u=this.alignPlaylists(s,c.details,(d=this.levelLastLoaded)==null?void 0:d.details),u===0&&p&&(u=p.start,qA(s,u))}h&&!this.startFragRequested&&this.setStartPosition(h,u)}c.details=s,this.levelLastLoaded=c,o===i&&(this.hls.trigger(D.SUBTITLE_TRACK_UPDATED,{details:s,id:o,groupId:n.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===fe.IDLE&&(eo(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),c.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,i=n.decryptdata,a=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&ml(i.method)){const s=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,r_(i.method)).catch(o=>{throw a.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:n}),o}).then(o=>{const c=performance.now();a.trigger(D.FRAG_DECRYPTED,{frag:n,payload:o,stats:{tstart:s,tdecrypt:c}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=fe.IDLE})}}doTick(){if(!this.media){this.state=fe.IDLE;return}if(this.state===fe.IDLE){const{currentTrackId:e,levels:n}=this,r=n==null?void 0:n[e];if(!r||!n.length||!r.details||this.waitForLive(r))return;const{config:i}=this,a=this.getLoadPosition(),s=ke.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,i.maxBufferHole),{end:o,len:c}=s,u=r.details,d=this.hls.maxBufferLength+u.levelTargetDuration;if(c>d)return;const h=u.fragments,p=h.length,y=u.edge;let v=null;const b=this.fragPrevious;if(o<y){const _=i.maxFragLookUpTolerance,A=o>y-_?0:_;v=eo(b,h,Math.max(h[0].start,o),A),!v&&b&&b.start<h[0].start&&(v=h[0])}else v=h[p-1];if(v=this.filterReplacedPrimary(v,r.details),!v)return;const x=v.sn-u.startSN,T=h[x-1];if(T&&T.cc===v.cc&&this.fragmentTracker.getState(T)===en.NOT_LOADED&&(v=T),this.fragmentTracker.getState(v)===en.NOT_LOADED){const _=this.mapToInitFragWhenRequired(v);_&&this.loadFragment(_,r,o)}}}loadFragment(e,n,r){Kt(e)?super.loadFragment(e,n,r):this._loadInitSegment(e,n)}get mediaBufferTimeRanges(){return new Lbe(this.tracksBuffered[this.currentTrackId]||[])}}class Lbe{constructor(e){this.buffered=void 0;const n=(r,i,a)=>{if(i=i>>>0,i>a-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${a})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}const Dbe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},$G=t=>String.fromCharCode(Dbe[t]||t),zr=15,zi=100,Ibe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Pbe={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Nbe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Mbe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},kbe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class jbe{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;Ze.log(`${this.time} [${e}] ${r}`)}}}const Os=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(e[r].toString(16));return n};class GG{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const i=n[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Ube{constructor(){this.uchar=" ",this.penState=new GG}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Bbe{constructor(e){this.chars=[],this.pos=0,this.currPenState=new GG,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<zi;n++)this.chars.push(new Ube);this.logger=e}equals(e){for(let n=0;n<zi;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<zi;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<zi;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>zi&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=zi)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=$G(e);if(this.pos>=zi){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<zi;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<zi;r++){const i=this.chars[r].uchar;i!==" "&&(n=!1),e.push(i)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class ME{constructor(e){this.rows=[],this.currRow=zr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<zr;n++)this.rows.push(new Bbe(e));this.logger=e}reset(){for(let e=0;e<zr;e++)this.rows[e].clear();this.currRow=zr-1}equals(e){let n=!0;for(let r=0;r<zr;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<zr;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<zr;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Tt(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let o=0;o<zr;o++)this.rows[o].clear();const a=this.currRow+1-this.nrRollUpRows,s=this.lastOutputScreen;if(s){const o=s.rows[a].cueStartTime,c=this.logger.time;if(o!==null&&c!==null&&o<c)for(let u=0;u<this.nrRollUpRows;u++)this.rows[n-this.nrRollUpRows+u+1].copy(s.rows[a+u])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const a=e.indent,s=Math.max(a-1,0);r.setCursor(e.indent),e.color=r.chars[s].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Tt(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",i=-1;for(let a=0;a<zr;a++){const s=this.rows[a].getTextString();s&&(i=a+1,e?n.push("Row "+i+": '"+s+"'"):n.push(s.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class rB{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new ME(r),this.nonDisplayedMemory=new ME(r),this.lastOutputScreen=new ME(r),this.currRollUpRow=this.displayedMemory.rows[zr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[zr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=i[r]}this.logger.log(2,"MIDROW: "+Tt(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class iB{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=$be(),this.logger=void 0;const i=this.logger=new jbe;this.channels=[null,new rB(e,n,i),new rB(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let r=0;r<n.length;r+=2){const i=n[r]&127,a=n[r+1]&127;let s=!1,o=null;if(i===0&&a===0)continue;this.logger.log(3,()=>"["+Os([n[r],n[r+1]])+"] -> ("+Os([i,a])+")");const c=this.cmdHistory;if(i>=16&&i<=31){if(Fbe(i,a,c)){Qh(null,null,c),this.logger.log(3,()=>"Repeated command ("+Os([i,a])+") is dropped");continue}Qh(i,a,this.cmdHistory),s=this.parseCmd(i,a),s||(s=this.parseMidrow(i,a)),s||(s=this.parsePAC(i,a)),s||(s=this.parseBackgroundAttributes(i,a))}else Qh(null,null,c);if(!s&&(o=this.parseChars(i,a),o)){const d=this.currentChannel;d&&d>0?this.channels[d].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!s&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Os([i,a])+" orig: "+Os([n[r],n[r+1]]))}}parseCmd(e,n){const r=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=33&&n<=35;if(!(r||i))return!1;const a=e===20||e===21||e===23?1:2,s=this.channels[a];return e===20||e===21||e===28||e===29?n===32?s.ccRCL():n===33?s.ccBS():n===34?s.ccAOF():n===35?s.ccAON():n===36?s.ccDER():n===37?s.ccRU(2):n===38?s.ccRU(3):n===39?s.ccRU(4):n===40?s.ccFON():n===41?s.ccRDC():n===42?s.ccTR():n===43?s.ccRTD():n===44?s.ccEDM():n===45?s.ccCR():n===46?s.ccENM():n===47&&s.ccEOC():s.ccTO(n-32),this.currentChannel=a,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+Os([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const i=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,a=(e===16||e===24)&&n>=64&&n<=95;if(!(i||a))return!1;const s=e<=23?1:2;n>=64&&n<=95?r=s===1?Ibe[e]:Nbe[e]:r=s===1?Pbe[e]:Mbe[e];const o=this.channels[s];return o?(o.setPAC(this.interpretPAC(r,n)),this.currentChannel=s,!0):!1}interpretPAC(e,n){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,n){let r,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19){let s;a===17?s=n+80:a===18?s=n+112:s=n+144,this.logger.log(2,()=>"Special char '"+$G(s)+"' in channel "+r),i=[s]}else e>=32&&e<=127&&(i=n===0?[e]:[e,n]);return i&&this.logger.log(3,()=>"Char codes =  "+Os(i).join(",")),i}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=45&&n<=47;if(!(r||i))return!1;let a;const s={};e===16||e===24?(a=Math.floor((n-32)/2),s.background=kbe[a],n%2===1&&(s.background=s.background+"_semi")):n===45?s.background="transparent":(s.foreground="black",n===47&&(s.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(s),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}Qh(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function Qh(t,e,n){n.a=t,n.b=e}function Fbe(t,e,n){return n.a===t&&n.b===e}function $be(){return{a:null,b:null}}var p_=function(){if(Mp!=null&&Mp.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(o,c){if(typeof c!="string"||!Array.isArray(o))return!1;const u=c.toLowerCase();return~o.indexOf(u)?u:!1}function r(o){return n(t,o)}function i(o){return n(e,o)}function a(o,...c){let u=1;for(;u<arguments.length;u++){const d=arguments[u];for(const h in d)o[h]=d[h]}return o}function s(o,c,u){const d=this,h={enumerable:!0};d.hasBeenReset=!1;let p="",y=!1,v=o,b=c,x=u,T=null,_="",A=!0,O="auto",R="start",C=50,L="middle",P=50,N="middle";Object.defineProperty(d,"id",a({},h,{get:function(){return p},set:function(k){p=""+k}})),Object.defineProperty(d,"pauseOnExit",a({},h,{get:function(){return y},set:function(k){y=!!k}})),Object.defineProperty(d,"startTime",a({},h,{get:function(){return v},set:function(k){if(typeof k!="number")throw new TypeError("Start time must be set to a number.");v=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",a({},h,{get:function(){return b},set:function(k){if(typeof k!="number")throw new TypeError("End time must be set to a number.");b=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",a({},h,{get:function(){return x},set:function(k){x=""+k,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",a({},h,{get:function(){return T},set:function(k){T=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",a({},h,{get:function(){return _},set:function(k){const M=r(k);if(M===!1)throw new SyntaxError("An invalid or illegal string was specified.");_=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",a({},h,{get:function(){return A},set:function(k){A=!!k,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",a({},h,{get:function(){return O},set:function(k){if(typeof k!="number"&&k!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");O=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",a({},h,{get:function(){return R},set:function(k){const M=i(k);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");R=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",a({},h,{get:function(){return C},set:function(k){if(k<0||k>100)throw new Error("Position must be between 0 and 100.");C=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",a({},h,{get:function(){return L},set:function(k){const M=i(k);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");L=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",a({},h,{get:function(){return P},set:function(k){if(k<0||k>100)throw new Error("Size must be between 0 and 100.");P=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",a({},h,{get:function(){return N},set:function(k){const M=i(k);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");N=M,this.hasBeenReset=!0}})),d.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class Gbe{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function VG(t){function e(r,i,a,s){return(r|0)*3600+(i|0)*60+(a|0)+parseFloat(s||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class Vbe{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let i=0;i<r.length;++i)if(n===r[i]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function qG(t,e,n,r){const i=r?t.split(r):[t];for(const a in i){if(typeof i[a]!="string")continue;const s=i[a].split(n);if(s.length!==2)continue;const o=s[0],c=s[1];e(o,c)}}const QA=new p_(0,0,""),Zh=QA.align==="middle"?"middle":"center";function qbe(t,e,n){const r=t;function i(){const o=VG(t);if(o===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,c){const u=new Vbe;qG(o,function(p,y){let v;switch(p){case"region":for(let b=n.length-1;b>=0;b--)if(n[b].id===y){u.set(p,n[b].region);break}break;case"vertical":u.alt(p,y,["rl","lr"]);break;case"line":v=y.split(","),u.integer(p,v[0]),u.percent(p,v[0])&&u.set("snapToLines",!1),u.alt(p,v[0],["auto"]),v.length===2&&u.alt("lineAlign",v[1],["start",Zh,"end"]);break;case"position":v=y.split(","),u.percent(p,v[0]),v.length===2&&u.alt("positionAlign",v[1],["start",Zh,"end","line-left","line-right","auto"]);break;case"size":u.percent(p,y);break;case"align":u.alt(p,y,["start",Zh,"end","left","right"]);break}},/:/,/\s/),c.region=u.get("region",null),c.vertical=u.get("vertical","");let d=u.get("line","auto");d==="auto"&&QA.line===-1&&(d=-1),c.line=d,c.lineAlign=u.get("lineAlign","start"),c.snapToLines=u.get("snapToLines",!0),c.size=u.get("size",100),c.align=u.get("align",Zh);let h=u.get("position","auto");h==="auto"&&QA.position===50&&(h=c.align==="start"||c.align==="left"?0:c.align==="end"||c.align==="right"?100:50),c.position=h}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),s(),e.endTime=i(),s(),a(t,e)}function HG(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class Hbe{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Gbe,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let a=n.buffer,s=0;for(a=HG(a);s<a.length&&a[s]!=="\r"&&a[s]!==`
`;)++s;const o=a.slice(0,s);return a[s]==="\r"&&++s,a[s]===`
`&&++s,n.buffer=a.slice(s),o}function i(a){qG(a,function(s,o){},/:/)}try{let a="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;a=r();const o=a.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let s=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(s?s=!1:a=r(),n.state){case"HEADER":/:/.test(a)?i(a):a||(n.state="ID");continue;case"NOTE":a||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){n.state="NOTE";break}if(!a)continue;if(n.cue=new p_(0,0,""),n.state="CUE",a.indexOf("-->")===-1){n.cue.id=a;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{qbe(a,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const o=a.indexOf("-->")!==-1;if(!a||o&&(s=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=a}continue;case"BADCUE":a||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const zbe=/\r\n|\n\r|\n|\r/g,kE=function(e,n,r=0){return e.slice(r,r+n.length)===n},Kbe=function(e){let n=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!xe(n)||!xe(r)||!xe(i)||!xe(a))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*r,n+=60*1e3*i,n+=60*60*1e3*a,n};function g_(t,e,n){return Uc(t.toString())+Uc(e.toString())+Uc(n)}const Ybe=function(e,n,r){let i=e[n],a=e[i.prevCC];if(!a||!a.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(s=a)!=null&&s.new;){var s;e.ccOffset+=i.start-a.start,i.new=!1,i=a,a=e[i.prevCC]}e.presentationOffset=r};function Wbe(t,e,n,r,i,a,s){const o=new Hbe,c=fr(new Uint8Array(t)).trim().replace(zbe,`
`).split(`
`),u=[],d=e?cxe(e.baseTime,e.timescale):0;let h="00:00.000",p=0,y=0,v,b=!0;o.oncue=function(x){const T=n[r];let _=n.ccOffset;const A=(p-d)/9e4;if(T!=null&&T.new&&(y!==void 0?_=n.ccOffset=T.start:Ybe(n,r,A)),A){if(!e){v=new Error("Missing initPTS for VTT MPEGTS");return}_=A-n.presentationOffset}const O=x.endTime-x.startTime,R=Or((x.startTime+_-y)*9e4,i*9e4)/9e4;x.startTime=Math.max(R,0),x.endTime=Math.max(R+O,0);const C=x.text.trim();x.text=decodeURIComponent(encodeURIComponent(C)),x.id||(x.id=g_(x.startTime,x.endTime,C)),x.endTime>0&&u.push(x)},o.onparsingerror=function(x){v=x},o.onflush=function(){if(v){s(v);return}a(u)},c.forEach(x=>{if(b)if(kE(x,"X-TIMESTAMP-MAP=")){b=!1,x.slice(16).split(",").forEach(T=>{kE(T,"LOCAL:")?h=T.slice(6):kE(T,"MPEGTS:")&&(p=parseInt(T.slice(7)))});try{y=Kbe(h)/1e3}catch(T){v=T}return}else x===""&&(b=!1);o.parse(x+`
`)}),o.flush()}const jE="stpp.ttml.im1t",zG=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,KG=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Xbe={left:"start",center:"center",right:"end",start:"start",end:"end"};function aB(t,e,n,r){const i=Ve(new Uint8Array(t),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const a=i.map(o=>fr(o)),s=uxe(e.baseTime,1,e.timescale);try{a.forEach(o=>n(Qbe(o,s)))}catch(o){r(o)}}function Qbe(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(a).reduce((h,p)=>(h[p]=i.getAttribute(`ttp:${p}`)||a[p],h),{}),o=i.getAttribute("xml:space")!=="preserve",c=sB(UE(i,"styling","style")),u=sB(UE(i,"layout","region")),d=UE(i,"body","[begin]");return[].map.call(d,h=>{const p=YG(h,o);if(!p||!h.hasAttribute("begin"))return null;const y=FE(h.getAttribute("begin"),s),v=FE(h.getAttribute("dur"),s);let b=FE(h.getAttribute("end"),s);if(y===null)throw oB(h);if(b===null){if(v===null)throw oB(h);b=y+v}const x=new p_(y-e,b-e,p);x.id=g_(x.startTime,x.endTime,x.text);const T=u[h.getAttribute("region")],_=c[h.getAttribute("style")],A=Zbe(T,_,c),{textAlign:O}=A;if(O){const R=Xbe[O];R&&(x.lineAlign=R),x.align=O}return ut(x,A),x}).filter(h=>h!==null)}function UE(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function sB(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function YG(t,e){return[].slice.call(t.childNodes).reduce((n,r,i)=>{var a;return r.nodeName==="br"&&i?n+`
`:(a=r.childNodes)!=null&&a.length?YG(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function Zbe(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return s&&n.hasOwnProperty(s)&&(i=n[s]),a.reduce((o,c)=>{const u=BE(e,r,c)||BE(t,r,c)||BE(i,r,c);return u&&(o[c]=u),o},{})}function BE(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function oB(t){return new Error(`Could not parse ttml timestamp ${t}`)}function FE(t,e){if(!t)return null;let n=VG(t);return n===null&&(zG.test(t)?n=Jbe(t,e):KG.test(t)&&(n=eSe(t,e))),n}function Jbe(t,e){const n=zG.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function eSe(t,e){const n=KG.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class Jh{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class tSe{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=uB(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Jh(this,"textTrack1"),n=new Jh(this,"textTrack2"),r=new Jh(this,"textTrack3"),i=new Jh(this,"textTrack4");this.cea608Parser1=new iB(1,e,n),this.cea608Parser2=new iB(3,r,i)}addCues(e,n,r,i,a){let s=!1;for(let o=a.length;o--;){const c=a[o],u=nSe(c[0],c[1],n,r);if(u>=0&&(c[0]=Math.min(c[0],n),c[1]=Math.max(c[1],r),s=!0,u/(r-n)>.5))return}if(s||a.push([n,r]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,n,r,i)}else{const o=this.Cues.newCue(null,n,r,i);this.hls.trigger(D.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:a}){const{unparsedVttFrags:s}=this;r===Se.MAIN&&(this.initPTS[n.cc]={baseTime:i,timescale:a}),s.length&&(this.unparsedVttFrags=[],s.forEach(o=>{this.initPTS[o.frag.cc]?this.onFragLoaded(D.FRAG_LOADED,o):this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,n){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const a=r.textTracks[i];if(lB(a,{name:e,lang:n,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return a}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:i}=this,{label:a,languageCode:s}=n[e],o=this.getExistingTrack(a,s);if(o)r[e]=o,ul(r[e]),UG(r[e],i);else{const c=this.createTextTrack("captions",a,s);c&&(c[e]=!0,r[e]=c)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,i={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,n,r){const i=this.media;if(i)return i.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,n.mediaSource||this._cleanTracks()}onMediaDetaching(e,n){const r=!!n.transferMedia;if(this.media=null,r)return;const{captionsTracks:i}=this;Object.keys(i).forEach(a=>{ul(i[a]),delete i[a]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=uB(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)ul(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],i=r.some(a=>a.textCodec===jE);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(LG(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const s=this.media,o=s?ym(s.textTracks):null;if(this.tracks.forEach((c,u)=>{let d;if(o){let h=null;for(let p=0;p<o.length;p++)if(o[p]&&lB(o[p],c)){h=o[p],o[p]=null;break}h&&(d=h)}if(d)ul(d);else{const h=WG(c);d=this.createTextTrack(h,c.name,c.lang),d&&(d.mode="disabled")}d&&this.textTracks.push(d)}),o!=null&&o.length){const c=o.filter(u=>u!==null).map(u=>u.label);c.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${c.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const s=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const a=`textTrack${i[1]}`,s=this.captionsProperties[a];s&&(s.label=r.name,r.lang&&(s.languageCode=r.lang),s.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===Se.MAIN){var r,i;const{cea608Parser1:a,cea608Parser2:s,lastSn:o}=this,{cc:c,sn:u}=n.frag,d=(r=(i=n.part)==null?void 0:i.index)!=null?r:-1;a&&s&&(u!==o+1||u===o&&d!==this.lastPartIndex+1||c!==this.lastCc)&&(a.reset(),s.reset()),this.lastCc=c,this.lastSn=u,this.lastPartIndex=d}}onFragLoaded(e,n){const{frag:r,payload:i}=n;if(r.type===Se.SUBTITLE)if(i.byteLength){const a=r.decryptdata,s="stats"in n;if(a==null||!a.encrypted||s){const o=this.tracks[r.level],c=this.vttCCs;c[r.cc]||(c[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),o&&o.textCodec===jE?this._parseIMSC1(r,i):this._parseVTTs(n)}}else this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;aB(n,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{r.logger.log(`Failed to parse IMSC1: ${i}`),r.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var n;const{frag:r,payload:i}=e,{initPTS:a,unparsedVttFrags:s}=this,o=a.length-1;if(!a[r.cc]&&o===-1){s.push(e);return}const c=this.hls,u=(n=r.initSegment)!=null&&n.data?jr(r.initSegment.data,new Uint8Array(i)).buffer:i;Wbe(u,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,d=>{this._appendCues(d,r.level),c.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},d=>{const h=d.message==="Missing initPTS for VTT MPEGTS";h?s.push(e):this._fallbackToIMSC1(r,i),c.logger.log(`Failed to parse VTT cue: ${d}`),!(h&&o>r.cc)&&c.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:d})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||aB(n,this.initPTS[e.cc],()=>{r.textCodec=jE,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[n];if(!i||i.mode==="disabled")return;e.forEach(a=>BG(i,a))}else{const i=this.tracks[n];if(!i)return;const a=i.default?"default":"subtitles"+n;r.trigger(D.CUES_PARSED,{type:"subtitles",cues:e,track:a})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===Se.SUBTITLE&&this.onFragLoaded(D.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:i}=n;if(!(r.type===Se.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let a=0;a<i.length;a++){const s=i[a].bytes;if(s){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(s);this.cea608Parser1.addData(i[a].pts,o[0]),this.cea608Parser2.addData(i[a].pts,o[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:a}){const{media:s}=this;if(!(!s||s.currentTime<r)){if(!a||a==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(c=>XA(o[c],n,r))}if(this.config.renderTextTracksNatively&&n===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(c=>XA(o[c],n,i))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let i=2;for(let a=0;a<r;a++){const s=e[i++],o=127&e[i++],c=127&e[i++];if(o===0&&c===0)continue;if((4&s)!==0){const d=3&s;(d===0||d===1)&&(n[d].push(o),n[d].push(c))}}return n}}function WG(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function lB(t,e){return!!t&&t.kind===WG(e)&&KA(e,t)}function nSe(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function uB(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const rSe=/\s/,iSe={newCue(t,e,n,r){const i=[];let a,s,o,c,u;const d=self.VTTCue||self.TextTrackCue;for(let p=0;p<r.rows.length;p++)if(a=r.rows[p],o=!0,c=0,u="",!a.isEmpty()){var h;for(let b=0;b<a.chars.length;b++)rSe.test(a.chars[b].uchar)&&o?c++:(u+=a.chars[b].uchar,o=!1);a.cueStartTime=e,e===n&&(n+=1e-4),c>=16?c--:c++;const y=HG(u.trim()),v=g_(e,n,y);t!=null&&(h=t.cues)!=null&&h.getCueById(v)||(s=new d(e,n,y),s.id=v,s.line=p+1,s.align="left",s.position=10+Math.min(80,Math.floor(c*8/32)*10),i.push(s))}return t&&i.length&&(i.sort((p,y)=>p.line==="auto"||y.line==="auto"?0:p.line>8&&y.line>8?y.line-p.line:p.line-y.line),i.forEach(p=>BG(t,p))),i}};function aSe(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const sSe=/(\d+)-(\d+)\/(\d+)/;class cB{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||cSe,this.controller=new self.AbortController,this.stats=new Xw}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const a=oSe(e,this.controller.signal),s=e.responseType==="arraybuffer",o=s?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=r,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),n.timeout=c&&xe(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},n.timeout),(kf(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(h=>{var p;this.response=this.loader=h;const y=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},u-(y-i.loading.start)),!h.ok){const{status:b,statusText:x}=h;throw new fSe(x||"fetch, bad network response",b,h)}i.loading.first=y,i.total=uSe(h.headers)||i.total;const v=(p=this.callbacks)==null?void 0:p.onProgress;return v&&xe(n.highWaterMark)?this.loadProgressively(h,i,e,n.highWaterMark,v):s?h.arrayBuffer():e.responseType==="json"?h.json():h.text()}).then(h=>{var p,y;const v=this.response;if(!v)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const b=h[o];b&&(i.loaded=i.total=b);const x={url:v.url,data:h,code:v.status},T=(p=this.callbacks)==null?void 0:p.onProgress;T&&!xe(n.highWaterMark)&&T(i,e,h,v),(y=this.callbacks)==null||y.onSuccess(x,i,e,v)}).catch(h=>{var p;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const y=h&&h.code||0,v=h?h.message:null;(p=this.callbacks)==null||p.onError({code:y,text:v},e,h?h.details:null,i)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,r,i=0,a){const s=new cG,o=e.body.getReader(),c=()=>o.read().then(u=>{if(u.done)return s.dataLength&&a(n,r,s.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const d=u.value,h=d.length;return n.loaded+=h,h<i||s.dataLength?(s.push(d),s.dataLength>=i&&a(n,r,s.flush().buffer,e)):a(n,r,d.buffer,e),c()}).catch(()=>Promise.reject());return c()}}function oSe(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(ut({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function lSe(t){const e=sSe.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function uSe(t){const e=t.get("Content-Range");if(e){const r=lSe(e);if(xe(r))return r}const n=t.get("Content-Length");if(n)return parseInt(n)}function cSe(t,e){return new self.Request(t.url,e)}class fSe extends Error{constructor(e,n,r){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const dSe=/^age:\s*[\d.]+\s*$/im;class XG{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Xw,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return a(r,n.url)}).catch(s=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",n.url,!0),a(r,n.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(s=>{var o;(o=this.callbacks)==null||o.onError({code:r.status,text:s.message},n,r,i)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const i=n.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:s}=r.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&xe(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const i=n.readyState,a=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const u=n.status,d=n.responseType==="text"?n.responseText:null;if(u>=200&&u<300){const v=d??n.response;if(v!=null){var s,o;r.loading.end=Math.max(self.performance.now(),r.loading.first);const b=n.responseType==="arraybuffer"?v.byteLength:v.length;r.loaded=r.total=b,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const x=(s=this.callbacks)==null?void 0:s.onProgress;x&&x(r,e,v,n);const T={url:n.responseURL,data:v,code:u};(o=this.callbacks)==null||o.onSuccess(T,r,e,n);return}}const h=a.loadPolicy.errorRetry,p=r.retry,y={url:e.url,data:void 0,code:u};if(Np(h,p,!1,y))this.retry(h);else{var c;Ze.error(`${u} while loading ${e.url}`),(c=this.callbacks)==null||c.onError({code:u,text:n.statusText},e,n,r)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(Np(e,n,!0))this.retry(e);else{var r;Ze.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=e_(e,r.retry),r.retry++,Ze.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&dSe.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const hSe={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},mSe=ht(ht({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:XG,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:kye,bufferController:wxe,capLevelController:h_,errorController:$ye,fpsController:ybe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:eG,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:hSe},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},pSe()),{},{subtitleStreamController:Cbe,subtitleTrackController:bbe,timelineController:tSe,audioStreamController:Sxe,audioTrackController:Exe,emeController:pl,cmcdController:mbe,contentSteeringController:gbe,interstitialsController:Obe});function pSe(){return{cueHandler:iSe,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function gSe(t,e,n){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=ZA(t),i=["manifest","level","frag"],a=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(s=>{const o=`${s==="level"?"playlist":s}LoadPolicy`,c=e[o]===void 0,u=[];a.forEach(d=>{const h=`${s}Loading${d}`,p=e[h];if(p!==void 0&&c){u.push(h);const y=r[o].default;switch(e[o]={default:y},d){case"TimeOut":y.maxLoadTimeMs=p,y.maxTimeToFirstByteMs=p;break;case"MaxRetry":y.errorRetry.maxNumRetry=p,y.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":y.errorRetry.retryDelayMs=p,y.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":y.errorRetry.maxRetryDelayMs=p,y.timeoutRetry.maxRetryDelayMs=p;break}}}),u.length&&n.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${o}": ${Tt(e[o])}`)}),ht(ht({},r),e)}function ZA(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(ZA):Object.keys(t).reduce((e,n)=>(e[n]=ZA(t[n]),e),{}):t}function ySe(t,e){const n=t.loader;n!==cB&&n!==XG?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):aSe()&&(t.loader=cB,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const vm=2,vSe=.1,xSe=.05,bSe=100;class SSe extends X8{constructor(e,n){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=n,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,n){this.setInterval(bSe),this.mediaSource=n.mediaSource;const r=this.media=n.media;Lr(r,"playing",this.onMediaPlaying),Lr(r,"waiting",this.onMediaWaiting),Lr(r,"ended",this.onMediaEnded)}onMediaDetaching(e,n){this.clearInterval();const{media:r}=this;r&&(Jr(r,"playing",this.onMediaPlaying),Jr(r,"waiting",this.onMediaWaiting),Jr(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,n){this.buffered=n.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const n=this.media.currentTime;this.poll(n,this.lastCurrentTime),this.lastCurrentTime=n}poll(e,n){var r,i;const a=(r=this.hls)==null?void 0:r.config;if(!a)return;const s=this.media;if(!s)return;const{seeking:o}=s,c=this.seeking&&!o,u=!this.seeking&&o,d=s.paused&&!o||s.ended||s.playbackRate===0;if(this.seeking=o,e!==n){n&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,a.nudgeOnVideoHole&&!d&&e>n&&this.nudgeOnVideoHole(e,n)),this.waiting===0&&this.stallResolved(e);return}if(u||c){c&&this.stallResolved(e);return}if(d){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&s.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!1}));return}if(!ke.getBuffered(s).length){this.nudgeRetry=0;return}const h=ke.bufferInfo(s,e,0),p=h.nextStart||0,y=this.fragmentTracker;if(o&&y&&this.hls){const C=fB(this.hls.inFlightFragments,e),L=h.len>vm,P=!p||C||p-e>vm&&!y.getPartialFragment(e);if(L||P)return;this.moved=!1}const v=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&y){if(!(h.len>0)&&!p)return;const L=Math.max(p,h.start||0)-e,N=!!(v!=null&&v.live)?v.targetduration*2:vm,k=y.getPartialFragment(e);if(L>0&&(L<=N||k)){s.paused||this._trySkipBufferHole(k);return}}const b=a.detectStallWithCurrentTimeMs,x=self.performance.now(),T=this.waiting;let _=this.stalled;if(_===null)if(T>0&&x-T<b)_=this.stalled=T;else{this.stalled=x;return}const A=x-_;if(!o&&(A>=b||T)&&this.hls){var O;if(((O=this.mediaSource)==null?void 0:O.readyState)==="ended"&&!(v!=null&&v.live)&&Math.abs(e-((v==null?void 0:v.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(h),!this.media||!this.hls)return}const R=ke.bufferInfo(s,e,a.maxBufferHole);this._tryFixBufferStall(R,A,e)}stallResolved(e){const n=this.stalled;if(n&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-n;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(D.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,n){var r;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&i&&i.length>1&&e>i.end(0)){const a=ke.bufferedInfo(ke.timeRangesToArray(this.buffered.audio),e,0);if(a.len>1&&n>=a.start){const s=ke.timeRangesToArray(i),o=ke.bufferedInfo(s,n,0).bufferedIndex;if(o>-1&&o<s.length-1){const c=ke.bufferedInfo(s,e,0).bufferedIndex,u=s[o].end,d=s[o+1].start;if((c===-1||c>o)&&d-u<1&&e-u<2){const h=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${u} -> ${d} buffered index: ${c}`);this.warn(h.message),this.media.currentTime+=1e-6;const p=this.fragmentTracker.getPartialFragment(e)||void 0,y=ke.bufferInfo(this.media,e,0);this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:p,buffer:y.len,bufferInfo:y})}}}}}_tryFixBufferStall(e,n,r){var i,a;const{fragmentTracker:s,media:o}=this,c=(i=this.hls)==null?void 0:i.config;if(!o||!s||!c)return;const u=(a=this.hls)==null?void 0:a.latestLevelDetails,d=s.getPartialFragment(r);if((d||u!=null&&u.live&&r<u.fragmentStart)&&(this._trySkipBufferHole(d)||!this.media))return;const h=e.buffered,p=this.adjacentTraversal(e,r);(h&&h.length>1&&e.len>c.maxBufferHole||e.nextStart&&(e.nextStart-r<c.maxBufferHole||p))&&(n>c.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,n){const r=this.fragmentTracker,i=e.nextStart;if(r&&i){const a=r.getFragAtPos(n,Se.MAIN),s=r.getFragAtPos(i,Se.MAIN);if(a&&s)return s.sn-a.sn<2}return!1}_reportStall(e){const{hls:n,media:r,stallReported:i,stalled:a}=this;if(!i&&a!==null&&r&&n){this.stallReported=!0;const s=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${Tt(e)})`);this.warn(s.message),n.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len,bufferInfo:e,stalled:{start:a}})}}_trySkipBufferHole(e){var n;const{fragmentTracker:r,media:i}=this,a=(n=this.hls)==null?void 0:n.config;if(!i||!r||!a)return 0;const s=i.currentTime,o=ke.bufferInfo(i,s,0),c=s<o.start?o.start:o.nextStart;if(c&&this.hls){const d=o.len<=a.maxBufferHole,h=o.len>0&&o.len<1&&i.readyState<3,p=c-s;if(p>0&&(d||h)){if(p>a.maxBufferHole){let v=!1;if(s===0){const b=r.getAppendedFrag(0,Se.MAIN);b&&c<b.end&&(v=!0)}if(!v){const b=e||r.getAppendedFrag(s,Se.MAIN);if(b){var u;if(!((u=this.hls.loadLevelObj)!=null&&u.details)||fB(this.hls.inFlightFragments,c))return 0;let T=!1,_=b.end;for(;_<c;){const A=r.getAppendedFrag(_,Se.MAIN)||r.getPartialFragment(_);if(A)_+=A.duration;else{T=!0;break}}if(T)return 0}}}const y=Math.max(c+xSe,s+vSe);if(this.warn(`skipping hole, adjusting currentTime from ${s} to ${y}`),this.moved=!0,i.currentTime=y,!(e!=null&&e.gap)){const v=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${y}`);this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:v,reason:v.message,frag:e||void 0,buffer:o.len,bufferInfo:o})}return y}}return 0}_tryNudgeBuffer(e){const{hls:n,media:r,nudgeRetry:i}=this,a=n==null?void 0:n.config;if(!r||!a)return 0;const s=r.currentTime;if(this.nudgeRetry++,i<a.nudgeMaxRetry){const o=s+(i+1)*a.nudgeOffset,c=new Error(`Nudging 'currentTime' from ${s} to ${o}`);this.warn(c.message),r.currentTime=o,n.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_NUDGE_ON_STALL,error:c,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${a.nudgeMaxRetry} nudges`);this.error(o.message),n.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function fB(t,e){const n=dB(t.main);if(n&&n.start<=e)return n;const r=dB(t.audio);return r&&r.start<=e?r:null}function dB(t){if(!t)return null;switch(t.state){case fe.IDLE:case fe.STOPPED:case fe.ENDED:case fe.ERROR:return null}return t.frag}const ESe=.25;function JA(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function hB(t,e,n,r,i){let a=new t(e,n,"");try{a.value=r,i&&(a.type=i)}catch{a=new t(e,n,Tt(i?ht({type:i},r):r))}return a}const em=(()=>{const t=JA();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class TSe{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(D.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,n){var r;this.media=n.media,((r=n.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,n){this.media=null,!n.transferMedia&&(this.id3Track&&(this.removeCues&&ul(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const r=e[n];if(r.kind==="metadata"&&r.label==="id3")return UG(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:i}}}=this;if(!r&&!i)return;const{samples:a}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=JA();if(s)for(let o=0;o<a.length;o++){const c=a[o].type;if(c===ur.emsg&&!r||!i)continue;const u=yG(a[o].data);if(u){const d=a[o].pts;let h=d+a[o].duration;h>em&&(h=em),h-d<=0&&(h=d+ESe);for(let y=0;y<u.length;y++){const v=u[y];if(!vG(v)){this.updateId3CueEnds(d,c);const b=hB(s,d,h,v,c);b&&this.id3Track.addCue(b)}}}}}updateId3CueEnds(e,n){var r;const i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(let a=i.length;a--;){const s=i[a];s.type===n&&s.startTime<e&&s.endTime===em&&(s.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:r,type:i}){const{id3Track:a,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:c}}=s;if(a&&(o||c)){let u;i==="audio"?u=d=>d.type===ur.audioId3&&c:i==="video"?u=d=>d.type===ur.emsg&&o:u=d=>d.type===ur.audioId3&&c||d.type===ur.emsg&&o,XA(a,n,r,u)}}onLevelUpdated(e,{details:n}){this.updateDateRangeCues(n,!0)}onLevelPtsUpdated(e,n){Math.abs(n.drift)>.01&&this.updateDateRangeCues(n.details)}updateDateRangeCues(e,n){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:r}=this,{dateRanges:i}=e,a=Object.keys(i);let s=this.dateRangeCuesAppended;if(r&&n){var o;if((o=r.cues)!=null&&o.length){const d=Object.keys(s).filter(h=>!a.includes(h));for(let h=d.length;h--;){const p=d[h],y=s[p].cues;delete s[p],Object.keys(y).forEach(v=>{try{const b=y[v];b.removeEventListener("enter",this.onEventCueEnter),r.removeCue(b)}catch{}})}}else s=this.dateRangeCuesAppended={}}const c=e.fragments[e.fragments.length-1];if(a.length===0||!xe(c==null?void 0:c.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const u=JA();for(let d=0;d<a.length;d++){const h=a[d],p=i[h],y=p.startTime,v=s[h],b=(v==null?void 0:v.cues)||{};let x=(v==null?void 0:v.durationKnown)||!1,T=em;const{duration:_,endDate:A}=p;if(A&&_!==null)T=y+_,x=!0;else if(p.endOnNext&&!x){const R=a.reduce((C,L)=>{if(L!==p.id){const P=i[L];if(P.class===p.class&&P.startDate>p.startDate&&(!C||p.startDate<C.startDate))return P}return C},null);R&&(T=R.startTime,x=!0)}const O=Object.keys(p.attr);for(let R=0;R<O.length;R++){const C=O[R];if(!eve(C))continue;const L=b[C];if(L)x&&!v.durationKnown?L.endTime=T:Math.abs(L.startTime-y)>.01&&(L.startTime=y,L.endTime=T);else if(u){let P=p.attr[C];tve(C)&&(P=N8(P));const k=hB(u,y,T,{key:C,data:P},ur.dateRange);k&&(k.id=h,this.id3Track.addCue(k),b[C]=k,this.hls.config.interstitialsController&&(C==="X-ASSET-LIST"||C==="X-ASSET-URL")&&k.addEventListener("enter",this.onEventCueEnter))}}s[h]={cues:b,dateRange:p,durationKnown:x}}}}class ASe{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:n}=this,r=this.levelDetails;if(!n||!r)return;this.currentTime=n.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:a,maxLiveSyncPlaybackRate:s}=this.config;if(!a||s===1||!r.live)return;const o=this.targetLatency;if(o===null)return;const c=i-o,u=Math.min(this.maxLatency,o+r.targetduration);if(c<u&&c>.05&&this.forwardBufferLength>1){const h=Math.min(2,Math.max(1,s)),p=Math.round(2/(1+Math.exp(-.75*c-this.edgeStalled))*20)/20,y=Math.min(h,Math.max(1,p));this.changeMediaPlaybackRate(n,y)}else n.playbackRate!==1&&n.playbackRate!==0&&this.changeMediaPlaybackRate(n,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const n=this.levelDetails;return n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:n,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:a,liveSyncDurationCount:s,lowLatencyMode:o}=this.config,c=this.hls.userConfig;let u=o&&r||n;(this._targetLatencyUpdated||c.liveSyncDuration||c.liveSyncDurationCount||u===0)&&(u=a!==void 0?a:s*i);const d=i;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,d)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency;if(e===null||n===null)return null;const r=this.levelDetails;if(r===null)return null;const i=r.edge,a=e-n-this.edgeStalled,s=i-r.totalduration,o=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(s,a),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e}=this,n=this.levelDetails;if(!e||!n)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.ERROR,this.onError,this))}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){n.advanced&&this.onTimeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,n){var r;n.details===re.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,n){var r,i;e.playbackRate!==n&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${n}`),e.playbackRate=n)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class wSe extends d_{constructor(e,n){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const r=this.hls.config.preferManagedMediaSource,i=[],a={},s={};let o=!1,c=!1,u=!1;n.levels.forEach(d=>{const h=d.attrs;let{audioCodec:p,videoCodec:y}=d;p&&(d.audioCodec=p=Lp(p,r)||void 0),y&&(y=d.videoCodec=xye(y));const{width:v,height:b,unknownCodecs:x}=d;let T=x?x.length:0;if(x)for(let k=T;k--;){const M=x[k];this.isAudioSupported(M)?(d.audioCodec=p=p?`${p},${M}`:M,T--,$l.audio[p.substring(0,4)]=2):this.isVideoSupported(M)&&(d.videoCodec=y=y?`${y},${M}`:M,T--,$l.video[y.substring(0,4)]=2)}if(o||(o=!!(v&&b)),c||(c=!!y),u||(u=!!p),T||p&&!this.isAudioSupported(p)||y&&!this.isVideoSupported(y)){this.log(`Some or all CODECS not supported "${h.CODECS}"`);return}const{CODECS:_,"FRAME-RATE":A,"HDCP-LEVEL":O,"PATHWAY-ID":R,RESOLUTION:C,"VIDEO-RANGE":L}=h,N=`${`${R||"."}-`}${d.bitrate}-${C}-${A}-${_}-${L}-${O}`;if(a[N])if(a[N].uri!==d.url&&!d.attrs["PATHWAY-ID"]){const k=s[N]+=1;d.attrs["PATHWAY-ID"]=new Array(k+1).join(".");const M=this.createLevel(d);a[N]=M,i.push(M)}else a[N].addGroupId("audio",h.AUDIO),a[N].addGroupId("text",h.SUBTITLES);else{const k=this.createLevel(d);a[N]=k,s[N]=1,i.push(k)}}),this.filterAndSortMediaOptions(i,n,o,c,u)}createLevel(e){const n=new If(e),r=e.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(i.message),n.supportedResult=q8(i,[])}return n}isAudioSupported(e){return jA(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return jA(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,n,r,i,a){let s=[],o=[],c=e;if((r||i)&&a&&(c=c.filter(({videoCodec:x,videoRange:T,width:_,height:A})=>(!!x||!!(_&&A))&&Rye(T))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let x="no level with compatible codecs found in manifest",T=x;n.levels.length&&(T=`one or more CODECS in variant not supported: ${Tt(n.levels.map(A=>A.attrs.CODECS).filter((A,O,R)=>R.indexOf(A)===O))}`,this.warn(T),x+=` (${T})`);const _=new Error(x);this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:_,reason:T})}});return}n.audioTracks&&(s=n.audioTracks.filter(x=>!x.audioCodec||this.isAudioSupported(x.audioCodec)),mB(s)),n.subtitles&&(o=n.subtitles,mB(o));const u=c.slice(0);c.sort((x,T)=>{if(x.attrs["HDCP-LEVEL"]!==T.attrs["HDCP-LEVEL"])return(x.attrs["HDCP-LEVEL"]||"")>(T.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&x.height!==T.height)return x.height-T.height;if(x.frameRate!==T.frameRate)return x.frameRate-T.frameRate;if(x.videoRange!==T.videoRange)return Dp.indexOf(x.videoRange)-Dp.indexOf(T.videoRange);if(x.videoCodec!==T.videoCodec){const _=sU(x.videoCodec),A=sU(T.videoCodec);if(_!==A)return A-_}if(x.uri===T.uri&&x.codecSet!==T.codecSet){const _=Cp(x.codecSet),A=Cp(T.codecSet);if(_!==A)return A-_}return x.averageBitrate!==T.averageBitrate?x.averageBitrate-T.averageBitrate:0});let d=u[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==u.length)){for(let x=0;x<u.length;x++)if(u[x].pathwayId===c[0].pathwayId){d=u[x];break}}this._levels=c;for(let x=0;x<c.length;x++)if(c[x]===d){var h;this._firstLevel=x;const T=d.bitrate,_=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${T}`),((h=this.hls.userConfig)==null?void 0:h.abrEwmaDefaultEstimate)===void 0){const A=Math.min(T,this.hls.config.abrEwmaDefaultEstimateMax);A>_&&_===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=A)}break}const p=a&&!i,y=this.hls.config,v=!!(y.audioStreamController&&y.audioTrackController),b={levels:c,audioTracks:s,subtitleTracks:o,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:a,video:i,altAudio:v&&!p&&s.some(x=>!!x.url)};this.hls.trigger(D.MANIFEST_PARSED,b)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const d=new Error("invalid level idx"),h=e<0;if(this.hls.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.LEVEL_SWITCH_ERROR,level:e,fatal:h,error:d,reason:d.message}),h)return;e=Math.min(e,n.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,a=i?i.attrs["PATHWAY-ID"]:void 0,s=n[e],o=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,r===e&&i&&a===o)return;this.log(`Switching to level ${e} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${o?" with Pathway "+o:""} from level ${r}${a?" with Pathway "+a:""}`);const c={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(D.LEVEL_SWITCHING,c);const u=s.details;if(!u||u.live){const d=this.switchParams(s.uri,i==null?void 0:i.details,u);this.loadPlaylist(d)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const n=this.steering.pathways(),r=e.filter(i=>n.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${n}`);return}this.steering.pathwayPriority=r}}onError(e,n){n.fatal||!n.context||n.context.type===He.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===Se.MAIN){const r=n.elementaryStreams;if(!Object.keys(r).some(a=>!!r[a]))return;const i=this._levels[n.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,n){var r;const{level:i,details:a}=n,s=n.levelInfo;if(!s){var o;this.warn(`Invalid level index ${i}`),(o=n.deliveryDirectives)!=null&&o.skip&&(a.deltaUpdateFailed=!0);return}if(s===this.currentLevel||n.withoutMultiVariant){s.fragmentError===0&&(s.loadError=0);let c=s.details;c===n.details&&c.advanced&&(c=void 0),this.playlistLoaded(i,n,c)}else(r=n.deliveryDirectives)!=null&&r.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=this.getUrlWithDirectives(e.uri,n),i=this.currentLevelIndex,a=e.attrs["PATHWAY-ID"],s=e.details,o=s==null?void 0:s.age;this.log(`Loading level index ${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${a?" Pathway "+a:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${r}`),this.hls.trigger(D.LEVEL_LOADING,{url:r,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:n||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;if(this._levels.length===1)return;const r=this._levels.filter((a,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(a),a===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,a.details&&a.details.fragments.forEach(o=>o.level=-1)),!1));oG(r),this._levels=r,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=r.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(D.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(D.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function mB(t){const e={};t.forEach(n=>{const r=n.groupId||"";n.id=e[r]=e[r]||0,e[r]++})}function QG(){return self.SourceBuffer||self.WebKitSourceBuffer}function ZG(){if(!Za())return!1;const e=QG();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function _Se(){if(!ZG())return!1;const t=Za();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(Df(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(Df(e,"audio"))))}function RSe(){var t;const e=QG();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const OSe=100;class CSe extends i_{constructor(e,n,r){super(e,n,r,"stream-controller",Se.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,a=i?i.currentTime:null;if(a===null||!xe(a)||(this.log(`Media seeked to ${a.toFixed(3)}`),!this.getBufferedFrag(a)))return;const s=this.getFwdBufferInfoAtPos(i,a,Se.MAIN,0);if(s===null||s.len===0){this.warn(`Main forward buffer length at ${a} on "seeked" event ${s?s.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,n){if(this.levels){const{lastCurrentTime:r,hls:i}=this;if(this.stopLoad(),this.setInterval(OSe),this.level=-1,!this.startFragRequested){let a=i.startLevel;a===-1&&(i.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=i.firstAutoLevel),i.nextLoadLevel=a,this.level=i.loadLevel,this._hasEnoughToStart=!!n}r>0&&e===-1&&!n&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=fe.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=fe.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case fe.WAITING_LEVEL:{const{levels:n,level:r}=this,i=n==null?void 0:n[r],a=i==null?void 0:i.details;if(a&&(!a.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(a))break;this.state=fe.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=fe.IDLE;break}break}case fe.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:i,level:a}=this,s=i==null?void 0:i[a];this.resetStartWhenNotLoaded(s||null),this.state=fe.IDLE}}break}this.state===fe.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:r,media:i}=this;if(n===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const a=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[a]))return;const s=r[a],o=this.getMainFwdBufferInfo();if(o===null)return;const c=this.getLevelDetails();if(c&&this._streamEnded(o,c)){const b={};this.altAudio===2&&(b.type="video"),this.hls.trigger(D.BUFFER_EOS,b),this.state=fe.ENDED;return}if(!this.buffering)return;e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const u=s.details;if(!u||this.state===fe.WAITING_LEVEL||this.waitForLive(s)){this.level=a,this.state=fe.WAITING_LEVEL,this.startFragRequested=!1;return}const d=o.len,h=this.getMaxBufferLength(s.maxBitrate);if(d>=h)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const p=this.backtrackFragment?this.backtrackFragment.start:o.end;let y=this.getNextFragment(p,u);if(this.couldBacktrack&&!this.fragPrevious&&y&&Kt(y)&&this.fragmentTracker.getState(y)!==en.OK){var v;const x=((v=this.backtrackFragment)!=null?v:y).sn-u.startSN,T=u.fragments[x-1];T&&y.cc===T.cc&&(y=T,this.fragmentTracker.removeFragment(T))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(y&&this.isLoopLoading(y,p)){if(!y.gap){const x=this.audioOnly&&!this.altAudio?gt.AUDIO:gt.VIDEO,T=(x===gt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;T&&this.afterBufferFlushed(T,x,Se.MAIN)}y=this.getNextFragmentLoopLoading(y,u,o,Se.MAIN,h)}y&&(y.initSegment&&!y.initSegment.data&&!this.bitrateTest&&(y=y.initSegment),this.loadFragment(y,s,p))}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);i===en.NOT_LOADED||i===en.PARTIAL?Kt(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):super.loadFragment(e,n,r):this._loadInitSegment(e,n):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Se.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let r;const i=this.getAppendedFrag(n.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const a=this.getLevelDetails();if(a!=null&&a.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<a.targetduration*2)return}if(!n.paused&&e){const o=this.hls.nextLoadLevel,c=e[o],u=this.fragLastKbps;u&&this.fragCurrent?r=this.fragCurrent.duration*c.maxBitrate/(1e3*u)+1:r=0}else r=0;const s=this.getBufferedFrag(n.currentTime+r);if(s){const o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();const c=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,d=Math.max(s.end,c+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case fe.KEY_LOADING:case fe.FRAG_LOADING:case fe.FRAG_LOADING_WAITING_RETRY:case fe.PARSING:case fe.PARSED:this.state=fe.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio===2?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const r=n.media;Lr(r,"playing",this.onMediaPlaying),Lr(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,n){const{media:r}=this;r&&(Jr(r,"playing",this.onMediaPlaying),Jr(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,n),!n.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(D.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,n){let r=!1,i=!1;n.levels.forEach(a=>{const s=a.audioCodec;s&&(r=r||s.indexOf("mp4a.40.2")!==-1,i=i||s.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&i&&!RSe(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:r}=this;if(!r||this.state!==fe.IDLE)return;const i=n.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=fe.WAITING_LEVEL)}onLevelLoaded(e,n){var r;const{levels:i,startFragRequested:a}=this,s=n.level,o=n.details,c=o.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${c}`);const u=n.levelInfo,d=this.fragCurrent;d&&(this.state===fe.FRAG_LOADING||this.state===fe.FRAG_LOADING_WAITING_RETRY)&&d.level!==n.level&&d.loader&&this.abortCurrentFrag();let h=0;if(o.live||(r=u.details)!=null&&r.live){var p;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;h=this.alignPlaylists(o,u.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(u.details=o,this.levelLastLoaded=u,a||this.setStartPosition(o,h),this.hls.trigger(D.LEVEL_UPDATED,{details:o,level:s}),this.state===fe.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=fe.IDLE}a&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,a=this.getLoadPosition(),s=e.fragmentStart,o=e.edge,c=a>=s-n.maxFragLookUpTolerance&&a<=o;if(i!==null&&r.duration>i&&(a<i||!c)){const d=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;if((!c&&r.readyState<4||a<o-d)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),r.readyState))if(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var u;const h=ke.bufferInfo(r,i,0);if(!(h!=null&&(u=h.buffered)!=null&&u.length)){r.currentTime=i;return}if(h.start<=a){r.currentTime=i;return}const{nextStart:y}=ke.bufferedInfo(h.buffered,a,0);y&&(r.currentTime=y)}else r.currentTime=i}}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:i,payload:a}=e,{levels:s}=this;if(!s){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const o=s[r.level];if(!o){this.warn(`Level ${r.level} not found on progress`);return}const c=o.details;if(!c){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const u=o.videoCodec,d=c.PTSKnown||!c.live,h=(n=r.initSegment)==null?void 0:n.data,p=this._getAudioCodec(o),y=this.transmuxer=this.transmuxer||new CG(this.hls,Se.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=i?i.index:-1,b=v!==-1,x=new n_(r.level,r.sn,r.stats.chunkCount,a.byteLength,v,b),T=this.initPTS[r.cc];y.push(a,h,p,u,r,i,c.totalduration,d,x,T)}onAudioTrackSwitching(e,n){const r=this.hls,i=this.altAudio===2;if(Ip(n.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const s=this.fragCurrent;s&&(this.log("Switching to main audio track, cancel main fragment load"),s.abortRequests(),this.fragmentTracker.removeFragment(s)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.fragmentTracker.removeAllFragments(),r.once(D.BUFFER_FLUSHED,()=>{var s;(s=this.hls)==null||s.trigger(D.AUDIO_TRACK_SWITCHED,n)}),r.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(D.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const r=Ip(n.url,this.hls);if(r){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,n){const r=n.tracks;let i,a,s=!1;for(const o in r){const c=r[o];if(c.id==="main"){if(a=o,i=c,o==="video"){const u=r[o];u&&(this.videoBuffer=u.buffer)}}else s=!0}s&&i?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:r,part:i}=n,a=r.type===Se.MAIN;if(a){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===fe.PARSED&&(this.state=fe.IDLE);return}const o=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),Kt(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}const s=this.media;s&&(!this._hasEnoughToStart&&ke.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),a&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,n){var r;if(n.fatal){this.state=fe.ERROR;return}switch(n.details){case re.FRAG_GAP:case re.FRAG_PARSING_ERROR:case re.FRAG_DECRYPT_ERROR:case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Se.MAIN,n);break;case re.LEVEL_LOAD_ERROR:case re.LEVEL_LOAD_TIMEOUT:case re.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===fe.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===He.LEVEL&&(this.state=fe.IDLE);break;case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.resetLoadingState();break;case re.BUFFER_FULL_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case re.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onFragLoadEmergencyAborted(){this.state=fe.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==gt.AUDIO||!this.altAudio){const r=(n===gt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,n,Se.MAIN),this.tick())}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const i=this.timelineOffset;i&&r&&(r+=i);const a=this.getLevelDetails(),s=ke.getBuffered(e),o=s.length?s.start(0):0,c=o-r,u=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||c>0&&(c<u||this.loadingParts&&c<2*((a==null?void 0:a.partTarget)||0)))&&(this.log(`adjusting start position by ${c} to match buffer start`),r+=c,this.startPosition=r),n<r&&(this.log(`seek to target start position ${r} from current time ${n} buffer start ${o}`),e.currentTime=r)}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(r=>{const{hls:i}=this,a=r==null?void 0:r.frag;if(!a||this.fragContextChanged(a))return;n.fragmentError=0,this.state=fe.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=a.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(D.FRAG_LOADED,r),a.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const r=this.playlistType,{hls:i}=this,{remuxResult:a,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:c,part:u,level:d}=o,{video:h,text:p,id3:y,initSegment:v}=a,{details:b}=d,x=this.altAudio?void 0:a.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=fe.PARSING,v){if(v!=null&&v.tracks){const O=c.initSegment||c;this._bufferInitSegment(d,v.tracks,O,s),i.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:O,id:r,tracks:v.tracks})}const T=v.initPTS,_=v.timescale,A=this.initPTS[c.cc];xe(T)&&(!A||A.baseTime!==T||A.timescale!==_)&&(this.initPTS[c.cc]={baseTime:T,timescale:_},i.trigger(D.INIT_PTS_FOUND,{frag:c,id:r,initPTS:T,timescale:_}))}if(h&&b){x&&h.type==="audiovideo"&&this.logMuxedErr(c);const T=b.fragments[c.sn-1-b.startSN],_=c.sn===b.startSN,A=!T||c.cc>T.cc;if(a.independent!==!1){const{startPTS:O,endPTS:R,startDTS:C,endDTS:L}=h;if(u)u.elementaryStreams[h.type]={startPTS:O,endPTS:R,startDTS:C,endDTS:L};else if(h.firstKeyFrame&&h.independent&&s.id===1&&!A&&(this.couldBacktrack=!0),h.dropped&&h.independent){const P=this.getMainFwdBufferInfo(),N=(P?P.end:this.getLoadPosition())+this.config.maxBufferHole,k=h.firstKeyFramePTS?h.firstKeyFramePTS:O;if(!_&&N<k-this.config.maxBufferHole&&!A){this.backtrack(c);return}else A&&(c.gap=!0);c.setElementaryStreamInfo(h.type,c.start,R,c.start,L,!0)}else _&&O-(b.appliedTimelineOffset||0)>vm&&(c.gap=!0);c.setElementaryStreamInfo(h.type,O,R,C,L),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(h,c,u,s,_||A)}else if(_||A)c.gap=!0;else{this.backtrack(c);return}}if(x){const{startPTS:T,endPTS:_,startDTS:A,endDTS:O}=x;u&&(u.elementaryStreams[gt.AUDIO]={startPTS:T,endPTS:_,startDTS:A,endDTS:O}),c.setElementaryStreamInfo(gt.AUDIO,T,_,A,O),this.bufferFragmentData(x,c,u,s)}if(b&&y!=null&&(n=y.samples)!=null&&n.length){const T={id:r,frag:c,details:b,samples:y.samples};i.trigger(D.FRAG_PARSING_METADATA,T)}if(b&&p){const T={id:r,frag:c,details:b,samples:p.samples};i.trigger(D.FRAG_PARSING_USERDATA,T)}}logMuxedErr(e){this.warn(`${Kt(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,n,r,i){if(this.state!==fe.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&(delete n.audio,n.audiovideo&&this.logMuxedErr(r));const{audio:a,video:s,audiovideo:o}=n;if(a){const u=e.audioCodec;let d=fm(a.codec,u);d==="mp4a"&&(d="mp4a.40.5");const h=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){d&&(d.indexOf("mp4a.40.5")!==-1?d="mp4a.40.2":d="mp4a.40.5");const p=a.metadata;p&&"channelCount"in p&&(p.channelCount||1)!==1&&h.indexOf("firefox")===-1&&(d="mp4a.40.5")}d&&d.indexOf("mp4a.40.5")!==-1&&h.indexOf("android")!==-1&&a.container!=="audio/mpeg"&&(d="mp4a.40.2",this.log(`Android: force audio codec to ${d}`)),u&&u!==d&&this.log(`Swapping manifest audio codec "${u}" for "${d}"`),a.levelCodec=d,a.id=Se.MAIN,this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${d||""}/${u||""}/${a.codec}]`),delete n.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=Se.MAIN;const u=s.codec;if((u==null?void 0:u.length)===4)switch(u){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${u}]${s.codec!==u?" parsed-corrected="+s.codec:""}${s.supplemental?" supplemental="+s.supplemental:""}`),delete n.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete n.video,delete n.audio);const c=Object.keys(n);if(c.length){if(this.hls.trigger(D.BUFFER_CODECS,n),!this.hls)return;c.forEach(u=>{const h=n[u].initSegment;h!=null&&h.byteLength&&this.hls.trigger(D.BUFFER_APPENDING,{type:u,data:h,frag:r,part:null,chunkMeta:i,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Se.MAIN)}get maxBufferLength(){const{levels:e,level:n}=this,r=e==null?void 0:e[n];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=fe.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(ke.isBuffered(e,r)?n=this.getAppendedFrag(r):ke.isBuffered(e,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const i=this.fragPlaying,a=n.level;(!i||n.sn!==i.sn||i.level!==a)&&(this.fragPlaying=n,this.hls.trigger(D.FRAG_CHANGED,{frag:n}),(!i||i.level!==a)&&this.hls.trigger(D.LEVEL_SWITCHED,{level:a}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return xe(n)?this.getAppendedFrag(n):null}get currentProgramDateTime(){var e;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(xe(n)){const r=this.getLevelDetails(),i=this.currentFrag||(r?eo(null,r.fragments,n):null);if(i){const a=i.programDateTime;if(a!==null){const s=a+(n-i.start)*1e3;return new Date(s)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class LSe{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[r].loader;if(i){var n;if(e&&e!==((n=i.context)==null?void 0:n.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=re.KEY_LOAD_ERROR,r,i,a){return new Ki({type:Te.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:a,error:r,networkDetails:i})}loadClear(e,n,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(n.length)for(let i=0,a=n.length;i<a;i++){const s=n[i];if(e.cc<=s.cc&&(!Kt(e)||!Kt(s)||e.sn<s.sn)||!r&&i==a-1)return this.emeController.selectKeySystemFormat(s).then(o=>{if(!this.emeController)return;s.setKeyFormat(o);const c=GA(o);if(c)return this.emeController.getKeySystemAccess([c])})}if(this.config.requireKeySystemAccessOnStart){const i=hm(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var r,i;n&&e.setKeyFormat(n);const a=e.decryptdata;if(!a){const u=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,u))}const s=a.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));let o=this.keyUriToKeyInfo[s];if((r=o)!=null&&r.decryptdata.key)return a.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((i=o)!=null&&i.keyLoadPromise){var c;switch((c=o.mediaKeySessionContext)==null?void 0:c.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(u=>(a.key=u.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[s]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(e,n){const r={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(r);if(i)return(e.keyLoadPromise=i.then(a=>(e.mediaKeySessionContext=a,r))).catch(a=>{throw e.keyLoadPromise=null,a})}return Promise.resolve(r)}loadKeyHTTP(e,n){const r=this.config,i=r.loader,a=new i(r);return n.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((s,o)=>{const c={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},u=r.keyLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,y,v,b)=>{const{frag:x,keyInfo:T,url:_}=v;if(!x.decryptdata||T!==this.keyUriToKeyInfo[_])return o(this.createKeyLoadError(x,re.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),b));T.decryptdata.key=x.decryptdata.key=new Uint8Array(p.data),x.keyLoader=null,T.loader=null,s({frag:x,keyInfo:T})},onError:(p,y,v,b)=>{this.resetLoader(y),o(this.createKeyLoadError(n,re.KEY_LOAD_ERROR,new Error(`HTTP Error ${p.code} loading key ${p.text}`),v,ht({url:c.url,data:void 0},p)))},onTimeout:(p,y,v)=>{this.resetLoader(y),o(this.createKeyLoadError(n,re.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),v))},onAbort:(p,y,v)=>{this.resetLoader(y),o(this.createKeyLoadError(n,re.INTERNAL_ABORTED,new Error("key loading aborted"),v))}};a.load(c,d,h)})}resetLoader(e){const{frag:n,keyInfo:r,url:i}=e,a=r.loader;n.keyLoader===a&&(n.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],a&&a.destroy()}}function pB(t){const{type:e}=t;switch(e){case He.AUDIO_TRACK:return Se.AUDIO;case He.SUBTITLE_TRACK:return Se.SUBTITLE;default:return Se.MAIN}}function $E(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class DSe{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const n=this.hls.config,r=n.pLoader,i=n.loader,a=r||i,s=new a(n);return this.loaders[e.type]=s,s}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:He.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,n){const{id:r,level:i,pathwayId:a,url:s,deliveryDirectives:o,levelInfo:c}=n;this.load({id:r,level:i,pathwayId:a,responseType:"text",type:He.LEVEL,url:s,deliveryDirectives:o,levelOrTrack:c})}onAudioTrackLoading(e,n){const{id:r,groupId:i,url:a,deliveryDirectives:s,track:o}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:He.AUDIO_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onSubtitleTrackLoading(e,n){const{id:r,groupId:i,url:a,deliveryDirectives:s,track:o}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:He.SUBTITLE_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onLevelsUpdated(e,n){const r=this.loaders[He.LEVEL];if(r){const i=r.context;i&&!n.levels.some(a=>a===i.levelOrTrack)&&(r.abort(),delete this.loaders[He.LEVEL])}}load(e){var n;const r=this.hls.config;let i=this.getInternalLoader(e);if(i){const u=this.hls.logger,d=i.context;if(d&&d.levelOrTrack===e.levelOrTrack&&(d.url===e.url||d.deliveryDirectives&&!e.deliveryDirectives)){d.url===e.url?u.log(`[playlist-loader]: ignore ${e.url} ongoing request`):u.log(`[playlist-loader]: ignore ${e.url} in favor of ${d.url}`);return}u.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let a;if(e.type===He.MANIFEST?a=r.manifestLoadPolicy.default:a=ut({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),xe((n=e.deliveryDirectives)==null?void 0:n.part)){let u;if(e.type===He.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===He.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===He.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const d=u.partTarget,h=u.targetduration;if(d&&h){const p=Math.max(d*3,h*.8)*1e3;a=ut({},a,{maxTimeToFirstByteMs:Math.min(p,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(p,a.maxTimeToFirstByteMs)})}}}const s=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},c={onSuccess:(u,d,h,p)=>{const y=this.getInternalLoader(h);this.resetInternalLoader(h.type);const v=u.data;if(v.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(u,h,new Error("no EXTM3U delimiter"),p||null,d);return}d.parsing.start=performance.now(),vi.isMediaPlaylist(v)||h.type!==He.MANIFEST?this.handleTrackOrLevelPlaylist(u,d,h,p||null,y):this.handleMasterPlaylist(u,d,h,p)},onError:(u,d,h,p)=>{this.handleNetworkError(d,h,!1,u,p)},onTimeout:(u,d,h)=>{this.handleNetworkError(d,h,!0,void 0,u)}};i.load(e,o,c)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:n},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${n}`),this.hls.startLoad(n))}handleMasterPlaylist(e,n,r,i){const a=this.hls,s=e.data,o=$E(e,r),c=vi.parseMasterPlaylist(s,o);if(c.playlistParsingError){this.handleManifestParsingError(e,r,c.playlistParsingError,i,n);return}const{contentSteering:u,levels:d,sessionData:h,sessionKeys:p,startTimeOffset:y,variableList:v}=c;this.variableList=v;const{AUDIO:b=[],SUBTITLES:x,"CLOSED-CAPTIONS":T}=vi.parseMasterPlaylistMedia(s,o,c);b.length&&!b.some(A=>!A.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),b.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Ct({}),bitrate:0,url:""})),a.trigger(D.MANIFEST_LOADED,{levels:d,audioTracks:b,subtitles:x,captions:T,contentSteering:u,url:o,stats:n,networkDetails:i,sessionData:h,sessionKeys:p,startTimeOffset:y,variableList:v})}handleTrackOrLevelPlaylist(e,n,r,i,a){const s=this.hls,{id:o,level:c,type:u}=r,d=$E(e,r),h=xe(c)?c:xe(o)?o:0,p=pB(r),y=vi.parseLevelPlaylist(e.data,d,h,p,0,this.variableList);if(u===He.MANIFEST){const v={attrs:new Ct({}),bitrate:0,details:y,name:"",url:d};y.requestScheduled=n.loading.start+iG(y,0),s.trigger(D.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:d,stats:n,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=y,this.handlePlaylistLoaded(y,e,n,r,i,a)}handleManifestParsingError(e,n,r,i,a){this.hls.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.MANIFEST_PARSING_ERROR,fatal:n.type===He.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:n,networkDetails:i,stats:a})}handleNetworkError(e,n,r=!1,i,a){let s=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===He.LEVEL?s+=`: ${e.level} id: ${e.id}`:(e.type===He.AUDIO_TRACK||e.type===He.SUBTITLE_TRACK)&&(s+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(s);this.hls.logger.warn(`[playlist-loader]: ${s}`);let c=re.UNKNOWN,u=!1;const d=this.getInternalLoader(e);switch(e.type){case He.MANIFEST:c=r?re.MANIFEST_LOAD_TIMEOUT:re.MANIFEST_LOAD_ERROR,u=!0;break;case He.LEVEL:c=r?re.LEVEL_LOAD_TIMEOUT:re.LEVEL_LOAD_ERROR,u=!1;break;case He.AUDIO_TRACK:c=r?re.AUDIO_TRACK_LOAD_TIMEOUT:re.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case He.SUBTITLE_TRACK:c=r?re.SUBTITLE_TRACK_LOAD_TIMEOUT:re.SUBTITLE_LOAD_ERROR,u=!1;break}d&&this.resetInternalLoader(e.type);const h={type:Te.NETWORK_ERROR,details:c,fatal:u,url:e.url,loader:d,context:e,error:o,networkDetails:n,stats:a};if(i){const p=(n==null?void 0:n.url)||e.url;h.response=ht({url:p,data:void 0},i)}this.hls.trigger(D.ERROR,h)}handlePlaylistLoaded(e,n,r,i,a,s){const o=this.hls,{type:c,level:u,id:d,groupId:h,deliveryDirectives:p}=i,y=$E(n,i),v=pB(i),b=typeof i.level=="number"&&v===Se.MAIN?u:void 0;if(!e.fragments.length){const T=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:T,reason:T.message,response:n,context:i,level:b,parent:v,networkDetails:a,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const x=e.playlistParsingError;if(x){if(this.hls.logger.warn(x),!o.config.ignorePlaylistParsingErrors){o.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:x,reason:x.message,response:n,context:i,level:b,parent:v,networkDetails:a,stats:r});return}e.playlistParsingError=null}switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),(!s.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),c){case He.MANIFEST:case He.LEVEL:o.trigger(D.LEVEL_LOADED,{details:e,levelInfo:i.levelOrTrack||o.levels[0],level:b||0,id:d||0,stats:r,networkDetails:a,deliveryDirectives:p,withoutMultiVariant:c===He.MANIFEST});break;case He.AUDIO_TRACK:o.trigger(D.AUDIO_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:d||0,groupId:h||"",stats:r,networkDetails:a,deliveryDirectives:p});break;case He.SUBTITLE_TRACK:o.trigger(D.SUBTITLE_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:d||0,groupId:h||"",stats:r,networkDetails:a,deliveryDirectives:p});break}}}class Wi{static get version(){return Nf}static isMSESupported(){return ZG()}static isSupported(){return _Se()}static getMediaSource(){return Za()}static get Events(){return D}static get MetadataSchema(){return ur}static get ErrorTypes(){return Te}static get ErrorDetails(){return re}static get DefaultConfig(){return Wi.defaultConfig?Wi.defaultConfig:mSe}static set DefaultConfig(e){Wi.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new a_,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const n=this.logger=Q0e(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=gSe(Wi.DefaultConfig,e,n);this.userConfig=e,r.progressive&&ySe(r,n);const{abrController:i,bufferController:a,capLevelController:s,errorController:o,fpsController:c}=r,u=new o(this),d=this.abrController=new i(this),h=new Gye(this),p=r.interstitialsController,y=p?this.interstitialsController=new p(this,Wi):null,v=this.bufferController=new a(this,h),b=this.capLevelController=new s(this),x=new c(this),T=new DSe(this),_=r.contentSteeringController,A=_?new _(this):null,O=this.levelController=new wSe(this,A),R=new TSe(this),C=new LSe(this.config),L=this.streamController=new CSe(this,h,C),P=this.gapController=new SSe(this,h);b.setStreamController(L),x.setStreamController(L);const N=[T,O,L];y&&N.splice(1,0,y),A&&N.splice(1,0,A),this.networkControllers=N;const k=[d,v,P,b,x,R,h];this.audioTrackController=this.createController(r.audioTrackController,N);const M=r.audioStreamController;M&&N.push(this.audioStreamController=new M(this,h,C)),this.subtitleTrackController=this.createController(r.subtitleTrackController,N);const G=r.subtitleStreamController;G&&N.push(this.subtititleStreamController=new G(this,h,C)),this.createController(r.timelineController,k),C.emeController=this.emeController=this.createController(r.emeController,k),this.cmcdController=this.createController(r.cmcdController,k),this.latencyController=this.createController(ASe,k),this.coreComponents=k,N.push(u);const K=u.onErrorOut;typeof K=="function"&&this.on(D.ERROR,K,u),this.on(D.MANIFEST_LOADED,T.onManifestLoaded,T)}createController(e,n){if(e){const r=new e(this);return n&&n.push(r),r}return null}on(e,n,r=this){this._emitter.on(e,n,r)}once(e,n,r=this){this._emitter.once(e,n,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,r=this,i){this._emitter.off(e,n,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,n,r){return this._emitter.emit(e,n,r)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const i=e===D.ERROR;this.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,fatal:i,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(D.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const a=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.ATTACH_MEDIA_ERROR,fatal:!0,error:a});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const n="media"in e,r=n?e.media:e,i=n?e:{media:r};this._media=r,this.trigger(D.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(D.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(D.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const n=this.media,r=this._url,i=this._url=Ww.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),n&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(D.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,n){this.logger.log(`startLoad(${e+(n?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,n),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Se.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Se.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Se.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,n=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),n&&this.startLoad(n))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=Sbe()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){_ye(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=n)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:r}=this;let i;if(n===-1&&e!=null&&e.length?i=e.length-1:i=n,r)for(let a=i;a--;){const s=e[a].attrs["HDCP-LEVEL"];if(s&&s<=r)return a}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var n;return((n=this.audioTrackController)==null?void 0:n.setAudioOption(e))||null}setSubtitleOption(e){var n;return((n=this.subtitleTrackController)==null?void 0:n.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,n=this.allAudioTracks){const r=K8(n);return H8(e,r,navigator.mediaCapabilities)}}Wi.defaultConfig=void 0;const ISe=({src:t,...e})=>{const n=F.useRef(null);return F.useEffect(()=>{if(n.current)if(Wi.isSupported()&&t.includes(".m3u8")){const r=new Wi;return r.loadSource(t),r.attachMedia(n.current),()=>{r.destroy()}}else n.current.src=t},[t]),S.jsx("video",{ref:n,controls:!0,autoPlay:!0,className:"w-full h-64 bg-black rounded",...e,children:"Your browser does not support the video tag."})},PSe=()=>{const t=an(),{roomNum:e}=fa(),{matchDetail:n,loading:r,error:i}=sn(h=>h.sport),[a,s]=F.useState(null),[o,c]=F.useState("");F.useEffect(()=>{t(F0e(e))},[t,e]);const u=h=>{s(h)},d=async h=>{try{await navigator.clipboard.writeText(h),c("Copied!"),setTimeout(()=>c(""),1500)}catch{c("Failed to copy"),setTimeout(()=>c(""),1500)}};return S.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-100 to-white rounded-lg shadow-md max-w-full sm:max-w-3xl mx-auto",children:[S.jsx("h1",{className:"text-3xl font-extrabold text-blue-700 mb-8 text-center tracking-tight",children:"Match Streams"}),r?S.jsxs("div",{className:"flex justify-center items-center h-32",children:[S.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),S.jsx("span",{className:"text-lg text-gray-700",children:"Loading streams..."})]}):i?S.jsx("div",{className:"text-center text-red-500",children:i.message||"Failed to load match details."}):n.length===0?S.jsx("div",{className:"text-center text-gray-500 py-8",children:"No streams found for this match."}):S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((h,p)=>S.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg flex flex-col gap-4 border border-blue-100 hover:shadow-2xl transition duration-200",children:[S.jsx("span",{className:"font-bold text-lg text-blue-800 mb-2",children:h.name}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:()=>u(h),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 transition",children:"▶ Watch"}),S.jsx("button",{onClick:()=>d(h.stream_url),className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium shadow hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 transition",title:"Copy link",children:"📋 Copy Link"}),o&&S.jsx("span",{className:"text-green-500 text-xs self-center",children:o})]}),S.jsxs("span",{className:"text-xs text-gray-400 mt-2",children:["Referer: ",h.referer]})]},p))}),a&&S.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:[S.jsx("button",{onClick:()=>s(null),className:"absolute top-6 right-8 text-white bg-black bg-opacity-40 rounded-full p-3 text-3xl hover:bg-opacity-70 focus:outline-none focus:ring-2 focus:ring-white z-50",title:"Close","aria-label":"Close player",children:"×"}),S.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.stream_url.includes(".m3u8")?S.jsx(ISe,{src:a.stream_url,className:"w-[90vw] h-[80vh] bg-black rounded-2xl shadow-2xl"}):S.jsx("video",{src:a.stream_url,controls:!0,autoPlay:!0,className:"w-[90vw] h-[80vh] bg-black rounded-2xl shadow-2xl",children:"Your browser does not support the video tag."})})]})]})};function NSe({open:t,onClose:e,children:n}){return t?S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:S.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[n,S.jsx("button",{className:"mt-6 w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",onClick:e,children:"Close"})]})}):null}const MSe=()=>{const t=[{key:"1m",label:"1 Month",type:"1month",data:"bronze",reward:"5d"},{key:"3m",label:"3 Months",type:"3months",data:"silver",reward:"20d"},{key:"5m",label:"5 Months",type:"5months",data:"gold",reward:"30d"},{key:"8m",label:"8 Months",type:"8months",data:"diamond",reward:"60d"},{key:"1y",label:"1 Year",type:"1year",data:"platinum",reward:"120d"}],[e]=Kz(),n=e.get("api_key")||"",[r,i]=F.useState(null),[a,s]=F.useState(!1),[o,c]=F.useState(null),[u,d]=F.useState(!1),[h,p]=F.useState(!1),[y,v]=F.useState(null),b=Array.isArray(r==null?void 0:r.history)?r.history:[],x=b.filter(A=>A.reward_granted),T=b.map(A=>{var O,R;return(R=(O=A.subscription)==null?void 0:O.type)==null?void 0:R.toLowerCase()});F.useEffect(()=>{n&&(s(!0),c(null),fetch(`/api/subscription-history?api_token=${n}`).then(A=>A.ok?A.json():Promise.reject(new Error("Fetch failed"))).then(A=>i(A)).catch(A=>c(A.message)).finally(()=>s(!1)))},[n]);const _=async A=>{if(!n){v(S.jsx("p",{className:"text-red-500",children:"API key is missing"})),p(!0);return}d(!0);try{const O=await fetch(`/api/devices/claim-reward?api_token=${n}&subscription_key=${A}`,{method:"POST"});if(!O.ok)throw new Error("Claim request failed");const R=await O.json();v(S.jsxs("div",{children:[S.jsx("h2",{className:"text-xl font-semibold mb-2",children:"🎉 Claim Result"}),S.jsx("div",{className:"text-base p-4 bg-gray-100 dark:bg-gray-700 rounded text-green-700 dark:text-green-300",children:R.message||"Reward claimed successfully!"})]})),p(!0);const L=await(await fetch(`/api/subscription-history?api_token=${n}`)).json();i(L)}catch(O){v(S.jsx("p",{className:"text-red-500",children:O.message})),p(!0)}finally{d(!1)}};return S.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 md:p-6",children:S.jsxs("div",{className:"max-w-4xl mx-auto bg-white dark:bg-gray-900 rounded-3xl shadow-xl p-6 md:p-10",children:[S.jsxs("header",{className:"text-center mb-6 md:mb-10",children:[S.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-indigo-600 dark:text-indigo-400",children:"🎁 Reward Dashboard"}),S.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"Manage and claim your subscription rewards"})]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mb-10",children:t.map(A=>{const R={bronze:"bg-yellow-500 text-white",silver:"bg-gray-400 text-white",gold:"bg-yellow-400 text-white",diamond:"bg-blue-400 text-white",platinum:"bg-gray-700 text-white"}[A.data]||"bg-gray-300 text-white",C=b.find(N=>{var k,M;return((M=(k=N.subscription)==null?void 0:k.type)==null?void 0:M.toLowerCase())===A.type}),L=T.includes(A.type),P=C==null?void 0:C.reward_granted;return S.jsxs("div",{className:`relative rounded-xl shadow-lg flex flex-col items-center border-2 overflow-hidden transition-all duration-200
                  ${L?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900 hover:scale-105 hover:shadow-xl":"border-gray-200 bg-gray-100 dark:bg-gray-800 opacity-60 grayscale"}`,style:L?{}:{pointerEvents:"none"},children:[S.jsx("div",{className:`absolute top-3 -left-10 w-36 h-8 flex items-center justify-center transform -rotate-45 z-10 ${R}`,style:{fontStyle:"italic",letterSpacing:"0.5px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",borderTopLeftRadius:"0.75rem",borderBottomRightRadius:"0.75rem"},children:S.jsx("span",{className:"text-xs font-semibold w-full text-center tracking-wide",children:A.data.charAt(0).toUpperCase()+A.data.slice(1)})}),S.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 w-full",children:[S.jsx("div",{className:"text-2xl font-bold mb-2 text-indigo-600 dark:text-indigo-400",children:A.label}),S.jsxs("div",{className:"mb-2 text-sm text-gray-500",children:["Reward: ",S.jsx("span",{className:"font-semibold",children:A.reward})]}),S.jsx("div",{className:"mb-3",children:L?P?S.jsx("span",{className:"px-3 py-1 rounded-full bg-green-200 text-green-800 text-xs font-semibold",children:"Claimed"}):S.jsx("button",{className:"px-4 py-1 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm font-semibold",disabled:u,onClick:()=>_(C==null?void 0:C.subscription_key),children:u?"Claiming...":"Claim"}):S.jsx("span",{className:"px-3 py-1 rounded-full bg-gray-200 text-gray-600 text-xs font-semibold",children:"Inactive"})})]})]},A.key)})}),a&&S.jsx("div",{className:"text-indigo-600 text-center mb-4",children:"Loading data..."}),o&&S.jsxs("div",{className:"text-red-500 text-center mb-4",children:["Error: ",o]}),r&&S.jsxs("section",{className:"space-y-8",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-semibold text-indigo-600 dark:text-indigo-400 mb-4",children:"Usage History"}),b.length===0?S.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-lg text-center mb-8",children:[S.jsx("span",{role:"img","aria-label":"warning",className:"mr-2",children:"⚠️"}),"You are not eligible to get a reward."]}):S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full table-auto border-collapse",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-indigo-100 dark:bg-indigo-900",children:[S.jsx("th",{className:"px-3 py-2 text-left text-xs md:text-sm font-medium text-indigo-700",children:"Type"}),S.jsx("th",{className:"px-3 py-2 text-left text-xs md:text-sm font-medium text-indigo-700",children:"Reward Status"}),S.jsx("th",{className:"px-3 py-2 text-left text-xs md:text-sm font-medium text-indigo-700",children:"Action"})]})}),S.jsx("tbody",{children:b.map(A=>{var O;return S.jsxs("tr",{className:"hover:bg-indigo-50 dark:hover:bg-indigo-800 transition",children:[S.jsx("td",{className:"px-3 py-2 font-mono text-indigo-800 dark:text-indigo-200 text-sm md:text-base",children:(O=A.subscription)==null?void 0:O.type}),S.jsx("td",{className:"px-3 py-2",children:S.jsx("span",{className:`px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-semibold ${A.reward_granted?"bg-green-200 text-green-800":"bg-gray-200 text-gray-600"}`,children:A.reward_granted?"Granted":"Not Granted"})}),S.jsx("td",{className:"px-3 py-2",children:A.reward_granted?S.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs md:text-sm",children:"—"}):S.jsx("button",{className:"px-3 md:px-4 py-1 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 text-xs md:text-sm",disabled:u,onClick:()=>_(A.subscription_key),children:u?"Claiming...":"Claim"})})]},A.id)})})]})})]}),x.length>0&&S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-semibold text-green-600 dark:text-green-400 mb-4",children:"Claimed Rewards"}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:x.map(A=>{var O;return S.jsxs("div",{className:"bg-green-50 dark:bg-green-900 p-4 rounded-lg shadow",children:[S.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-200",children:(O=A.subscription)==null?void 0:O.type}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reward claimed successfully!"})]},A.id)})})]})]}),S.jsx(NSe,{open:h,onClose:()=>p(!1),children:y})]})})},kSe=()=>{const t=an();return F.useEffect(()=>{t(KY())},[t]),S.jsx(Gz,{children:S.jsxs(yz,{children:[S.jsx(St,{path:"/login",element:S.jsx(IJ,{})}),S.jsx(St,{path:"/claim-reward",element:S.jsx(MSe,{})}),S.jsxs(St,{element:S.jsx(FJ,{}),children:[S.jsx(St,{path:"/",element:S.jsx(Kj,{})}),S.jsx(St,{path:"/dashboard",element:S.jsx(Kj,{})}),S.jsx(St,{path:"/subscriptions",element:S.jsx(g0e,{})}),S.jsx(St,{path:"/contents",element:S.jsx(Kge,{})}),S.jsx(St,{path:"/contents/new",element:S.jsx(Wj,{})}),S.jsx(St,{path:"/contents/details/:id",element:S.jsx(Zge,{})}),S.jsx(St,{path:"/contents/edit/:id",element:S.jsx(Wj,{})}),S.jsx(St,{path:"/suggestions",element:S.jsx(w0e,{})}),S.jsx(St,{path:"/suggestions/new",element:S.jsx(Zj,{})}),S.jsx(St,{path:"/suggestions/edit/:id",element:S.jsx(Zj,{})}),S.jsx(St,{path:"/suggestions/details/:id",element:S.jsx(_0e,{})}),S.jsx(St,{path:"/livesports",element:S.jsx(M0e,{})}),S.jsx(St,{path:"/livesports/new/:type",element:S.jsx(Jj,{})}),S.jsx(St,{path:"/livesports/edit/:id",element:S.jsx(Jj,{})}),S.jsx(St,{path:"/livesports/details/:id",element:S.jsx(k0e,{})}),S.jsx(St,{path:"/sport",element:S.jsx(G0e,{})}),S.jsx(St,{path:"/sport/match/:roomNum",element:S.jsx(PSe,{})}),S.jsx(St,{path:"/devices",element:S.jsx(o0e,{})}),S.jsx(St,{path:"/devices/edit/:id",element:S.jsx(u0e,{})}),S.jsx(St,{path:"/devices/details/:id",element:S.jsx(l0e,{})})]}),S.jsx(St,{path:"*",element:S.jsx(Qge,{})})]})})};EH.createRoot(document.getElementById("root")).render(S.jsx(hK,{store:Rm,children:S.jsx(kSe,{})}));
